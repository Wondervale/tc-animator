const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/monaco-CzMVDqXD.js","assets/react-C1DHRhyI.js","assets/konva-DLbKtySN.js"])))=>i.map(i=>d[i]);
import{A as z,j as d,P as Ed,B as Td,C as Nd,r as $,D as Me,E as yc,y as Ad,T as Od}from"./react-C1DHRhyI.js";import{t as Cd}from"./tailwind-COJ8Fh6m.js";import{G as jd,X as bc,C as wc,a as Id,b as Md,P as Rd,M as Pd,c as $d,I as _s,T as zd,E as Ld,d as Dd,e as Fd,B as Bd,f as Ud,R as Vd,g as Zd,h as Wd,i as qd,F as Gd,j as Hd,k as Kd}from"./lucide-BT_QsgXB.js";import{T as Yd,C as Xd,D as Qd,R as Jd,P as eh,a as th,O as nh,b as rh,I as sh,S as vc,M as ih,c as oh,d as ah,e as lh,f as ch,g as uh,V as fh,h as dh,i as hh,G as ph,L as mh,j as gh,k as yh,l as bh,m as wh,n as vh,o as xh,p as _h,q as Sh,r as kh,s as Eh,t as Th,u as Nh,A as Ah,v as xc,w as Oh,x as Ch,y as jh,z as Ih,B as _c,E as Sc,F as kc,H as Ec,J as Mh,K as Rh,N as Ph,Q as $h,U as zh,W as Lh,X as Dh,Y as Fh,Z as Bh,_ as Uh,$ as Vh,a0 as Zh,a1 as Wh,a2 as qh,a3 as Gh,a4 as Hh,a5 as Kh,a6 as Yh,a7 as Xh}from"./radix-Btdn0XyX.js";import{l as Tc}from"./lodash-Cz48WuHn.js";import{a as aa,p as Qh,b as Jh}from"./zustand-Bfu_kWQJ.js";import{N as ep}from"./nbt--QhT-owt.js";import{g as tp,R as kn,a as Js,L as Br,G as wn,S as np,b as eo}from"./konva-DLbKtySN.js";import{_ as rp,u as bi,a as la,b as sp,c as ca,T as ip,B as op,I as ap,d as lp,e as cp,O as up,G as Nc,L as fp,f as dp,P as hp,H as pp,g as mp,h as gp,C as yp}from"./react-three-CpILiIlp.js";import{a7 as Xa,e as Oe,z as bp,a8 as wp,a9 as vp,Q as Ac,aa as ua,ab as So,ac as Qa,ad as Ja,ae as xp,af as _p,D as Oc}from"./three-7cJnBXsX.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Cc(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=Cc(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function jc(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=Cc(t))&&(r&&(r+=" "),r+=e);return r}const ko={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};for(const t in ko)Object.freeze(ko[t]);const bt=Object.freeze(ko),Ic=Object.create(null);for(const t in bt)Object.hasOwn(bt,t)&&(Ic[bt[t]]=t);const Ie={to:{},get:{}};Ie.get=function(t){const e=t.slice(0,3).toLowerCase();let n,r;switch(e){case"hsl":{n=Ie.get.hsl(t),r="hsl";break}case"hwb":{n=Ie.get.hwb(t),r="hwb";break}default:{n=Ie.get.rgb(t),r="rgb";break}}return n?{model:r,value:n}:null};Ie.get.rgb=function(t){if(!t)return null;const e=/^#([a-f\d]{3,4})$/i,n=/^#([a-f\d]{6})([a-f\d]{2})?$/i,r=/^rgba?\(\s*([+-]?(?:\d*\.)?\d+(?:e\d+)?)(?=[\s,])\s*(?:,\s*)?([+-]?(?:\d*\.)?\d+(?:e\d+)?)(?=[\s,])\s*(?:,\s*)?([+-]?(?:\d*\.)?\d+(?:e\d+)?)\s*(?:[\s,|/]\s*([+-]?(?:\d*\.)?\d+(?:e\d+)?)(%?)\s*)?\)$/i,s=/^rgba?\(\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[\s,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/i,i=/^(\w+)$/;let o=[0,0,0,1],a,l,c;if(a=t.match(n)){for(c=a[2],a=a[1],l=0;l<3;l++){const u=l*2;o[l]=Number.parseInt(a.slice(u,u+2),16)}c&&(o[3]=Number.parseInt(c,16)/255)}else if(a=t.match(e)){for(a=a[1],c=a[3],l=0;l<3;l++)o[l]=Number.parseInt(a[l]+a[l],16);c&&(o[3]=Number.parseInt(c+c,16)/255)}else if(a=t.match(r)){for(l=0;l<3;l++)o[l]=Number.parseFloat(a[l+1]);a[4]&&(o[3]=a[5]?Number.parseFloat(a[4])*.01:Number.parseFloat(a[4]))}else if(a=t.match(s)){for(l=0;l<3;l++)o[l]=Math.round(Number.parseFloat(a[l+1])*2.55);a[4]&&(o[3]=a[5]?Number.parseFloat(a[4])*.01:Number.parseFloat(a[4]))}else return(a=t.toLowerCase().match(i))?a[1]==="transparent"?[0,0,0,0]:Object.hasOwn(bt,a[1])?(o=bt[a[1]].slice(),o[3]=1,o):null:null;for(l=0;l<3;l++)o[l]=Kt(o[l],0,255);return o[3]=Kt(o[3],0,1),o};Ie.get.hsl=function(t){if(!t)return null;const e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[,|/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:e[+-]?\d+)?)\s*)?\)$/i,n=t.match(e);if(n){const r=Number.parseFloat(n[4]),s=(Number.parseFloat(n[1])%360+360)%360,i=Kt(Number.parseFloat(n[2]),0,100),o=Kt(Number.parseFloat(n[3]),0,100),a=Kt(Number.isNaN(r)?1:r,0,1);return[s,i,o,a]}return null};Ie.get.hwb=function(t){if(!t)return null;const e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*[\s,]\s*([+-]?[\d.]+)%\s*[\s,]\s*([+-]?[\d.]+)%\s*(?:[\s,]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:e[+-]?\d+)?)\s*)?\)$/i,n=t.match(e);if(n){const r=Number.parseFloat(n[4]),s=(Number.parseFloat(n[1])%360+360)%360,i=Kt(Number.parseFloat(n[2]),0,100),o=Kt(Number.parseFloat(n[3]),0,100),a=Kt(Number.isNaN(r)?1:r,0,1);return[s,i,o,a]}return null};Ie.to.hex=function(...t){return"#"+Ss(t[0])+Ss(t[1])+Ss(t[2])+(t[3]<1?Ss(Math.round(t[3]*255)):"")};Ie.to.rgb=function(...t){return t.length<4||t[3]===1?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"};Ie.to.rgb.percent=function(...t){const e=Math.round(t[0]/255*100),n=Math.round(t[1]/255*100),r=Math.round(t[2]/255*100);return t.length<4||t[3]===1?"rgb("+e+"%, "+n+"%, "+r+"%)":"rgba("+e+"%, "+n+"%, "+r+"%, "+t[3]+")"};Ie.to.hsl=function(...t){return t.length<4||t[3]===1?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"};Ie.to.hwb=function(...t){let e="";return t.length>=4&&t[3]!==1&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"};Ie.to.keyword=function(...t){return Ic[t.slice(0,3)]};function Kt(t,e,n){return Math.min(Math.max(e,t),n)}function Ss(t){const e=Math.round(t).toString(16).toUpperCase();return e.length<2?"0"+e:e}const Mc={};for(const t of Object.keys(bt))Mc[bt[t]]=t;const F={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},oklab:{channels:3,labels:["okl","oka","okb"]},lch:{channels:3,labels:"lch"},oklch:{channels:3,labels:["okl","okc","okh"]},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}},jt=(6/29)**3;function ar(t){const e=t>.0031308?1.055*t**.4166666666666667-.055:t*12.92;return Math.min(Math.max(0,e),1)}function lr(t){return t>.04045?((t+.055)/1.055)**2.4:t/12.92}for(const t of Object.keys(F)){if(!("channels"in F[t]))throw new Error("missing channels property: "+t);if(!("labels"in F[t]))throw new Error("missing channel labels property: "+t);if(F[t].labels.length!==F[t].channels)throw new Error("channel and label counts mismatch: "+t);const{channels:e,labels:n}=F[t];delete F[t].channels,delete F[t].labels,Object.defineProperty(F[t],"channels",{value:e}),Object.defineProperty(F[t],"labels",{value:n})}F.rgb.hsl=function(t){const e=t[0]/255,n=t[1]/255,r=t[2]/255,s=Math.min(e,n,r),i=Math.max(e,n,r),o=i-s;let a,l;switch(i){case s:{a=0;break}case e:{a=(n-r)/o;break}case n:{a=2+(r-e)/o;break}case r:{a=4+(e-n)/o;break}}a=Math.min(a*60,360),a<0&&(a+=360);const c=(s+i)/2;return i===s?l=0:c<=.5?l=o/(i+s):l=o/(2-i-s),[a,l*100,c*100]};F.rgb.hsv=function(t){let e,n,r,s,i;const o=t[0]/255,a=t[1]/255,l=t[2]/255,c=Math.max(o,a,l),u=c-Math.min(o,a,l),f=function(h){return(c-h)/6/u+1/2};if(u===0)s=0,i=0;else{switch(i=u/c,e=f(o),n=f(a),r=f(l),c){case o:{s=r-n;break}case a:{s=1/3+e-r;break}case l:{s=2/3+n-e;break}}s<0?s+=1:s>1&&(s-=1)}return[s*360,i*100,c*100]};F.rgb.hwb=function(t){const e=t[0],n=t[1];let r=t[2];const s=F.rgb.hsl(t)[0],i=1/255*Math.min(e,Math.min(n,r));return r=1-1/255*Math.max(e,Math.max(n,r)),[s,i*100,r*100]};F.rgb.oklab=function(t){const e=lr(t[0]/255),n=lr(t[1]/255),r=lr(t[2]/255),s=Math.cbrt(.4122214708*e+.5363325363*n+.0514459929*r),i=Math.cbrt(.2119034982*e+.6806995451*n+.1073969566*r),o=Math.cbrt(.0883024619*e+.2817188376*n+.6299787005*r),a=.2104542553*s+.793617785*i-.0040720468*o,l=1.9779984951*s-2.428592205*i+.4505937099*o,c=.0259040371*s+.7827717662*i-.808675766*o;return[a*100,l*100,c*100]};F.rgb.cmyk=function(t){const e=t[0]/255,n=t[1]/255,r=t[2]/255,s=Math.min(1-e,1-n,1-r),i=(1-e-s)/(1-s)||0,o=(1-n-s)/(1-s)||0,a=(1-r-s)/(1-s)||0;return[i*100,o*100,a*100,s*100]};function Sp(t,e){return(t[0]-e[0])**2+(t[1]-e[1])**2+(t[2]-e[2])**2}F.rgb.keyword=function(t){const e=Mc[t];if(e)return e;let n=Number.POSITIVE_INFINITY,r;for(const s of Object.keys(bt)){const i=bt[s],o=Sp(t,i);o<n&&(n=o,r=s)}return r};F.keyword.rgb=function(t){return[...bt[t]]};F.rgb.xyz=function(t){const e=lr(t[0]/255),n=lr(t[1]/255),r=lr(t[2]/255),s=e*.4124564+n*.3575761+r*.1804375,i=e*.2126729+n*.7151522+r*.072175,o=e*.0193339+n*.119192+r*.9503041;return[s*100,i*100,o*100]};F.rgb.lab=function(t){const e=F.rgb.xyz(t);let n=e[0],r=e[1],s=e[2];n/=95.047,r/=100,s/=108.883,n=n>jt?n**(1/3):7.787*n+16/116,r=r>jt?r**(1/3):7.787*r+16/116,s=s>jt?s**(1/3):7.787*s+16/116;const i=116*r-16,o=500*(n-r),a=200*(r-s);return[i,o,a]};F.hsl.rgb=function(t){const e=t[0]/360,n=t[1]/100,r=t[2]/100;let s,i;if(n===0)return i=r*255,[i,i,i];const o=r<.5?r*(1+n):r+n-r*n,a=2*r-o,l=[0,0,0];for(let c=0;c<3;c++)s=e+1/3*-(c-1),s<0&&s++,s>1&&s--,6*s<1?i=a+(o-a)*6*s:2*s<1?i=o:3*s<2?i=a+(o-a)*(2/3-s)*6:i=a,l[c]=i*255;return l};F.hsl.hsv=function(t){const e=t[0];let n=t[1]/100,r=t[2]/100,s=n;const i=Math.max(r,.01);r*=2,n*=r<=1?r:2-r,s*=i<=1?i:2-i;const o=(r+n)/2,a=r===0?2*s/(i+s):2*n/(r+n);return[e,a*100,o*100]};F.hsv.rgb=function(t){const e=t[0]/60,n=t[1]/100;let r=t[2]/100;const s=Math.floor(e)%6,i=e-Math.floor(e),o=255*r*(1-n),a=255*r*(1-n*i),l=255*r*(1-n*(1-i));switch(r*=255,s){case 0:return[r,l,o];case 1:return[a,r,o];case 2:return[o,r,l];case 3:return[o,a,r];case 4:return[l,o,r];case 5:return[r,o,a]}};F.hsv.hsl=function(t){const e=t[0],n=t[1]/100,r=t[2]/100,s=Math.max(r,.01);let i,o;o=(2-n)*r;const a=(2-n)*s;return i=n*s,i/=a<=1?a:2-a,i=i||0,o/=2,[e,i*100,o*100]};F.hwb.rgb=function(t){const e=t[0]/360;let n=t[1]/100,r=t[2]/100;const s=n+r;let i;s>1&&(n/=s,r/=s);const o=Math.floor(6*e),a=1-r;i=6*e-o,(o&1)!==0&&(i=1-i);const l=n+i*(a-n);let c,u,f;switch(o){default:case 6:case 0:{c=a,u=l,f=n;break}case 1:{c=l,u=a,f=n;break}case 2:{c=n,u=a,f=l;break}case 3:{c=n,u=l,f=a;break}case 4:{c=l,u=n,f=a;break}case 5:{c=a,u=n,f=l;break}}return[c*255,u*255,f*255]};F.cmyk.rgb=function(t){const e=t[0]/100,n=t[1]/100,r=t[2]/100,s=t[3]/100,i=1-Math.min(1,e*(1-s)+s),o=1-Math.min(1,n*(1-s)+s),a=1-Math.min(1,r*(1-s)+s);return[i*255,o*255,a*255]};F.xyz.rgb=function(t){const e=t[0]/100,n=t[1]/100,r=t[2]/100;let s,i,o;return s=e*3.2404542+n*-1.5371385+r*-.4985314,i=e*-.969266+n*1.8760108+r*.041556,o=e*.0556434+n*-.2040259+r*1.0572252,s=ar(s),i=ar(i),o=ar(o),[s*255,i*255,o*255]};F.xyz.lab=function(t){let e=t[0],n=t[1],r=t[2];e/=95.047,n/=100,r/=108.883,e=e>jt?e**(1/3):7.787*e+16/116,n=n>jt?n**(1/3):7.787*n+16/116,r=r>jt?r**(1/3):7.787*r+16/116;const s=116*n-16,i=500*(e-n),o=200*(n-r);return[s,i,o]};F.xyz.oklab=function(t){const e=t[0]/100,n=t[1]/100,r=t[2]/100,s=Math.cbrt(.8189330101*e+.3618667424*n-.1288597137*r),i=Math.cbrt(.0329845436*e+.9293118715*n+.0361456387*r),o=Math.cbrt(.0482003018*e+.2643662691*n+.633851707*r),a=.2104542553*s+.793617785*i-.0040720468*o,l=1.9779984951*s-2.428592205*i+.4505937099*o,c=.0259040371*s+.7827717662*i-.808675766*o;return[a*100,l*100,c*100]};F.oklab.oklch=function(t){return F.lab.lch(t)};F.oklab.xyz=function(t){const e=t[0]/100,n=t[1]/100,r=t[2]/100,s=(.999999998*e+.396337792*n+.215803758*r)**3,i=(1.000000008*e-.105561342*n-.063854175*r)**3,o=(1.000000055*e-.089484182*n-1.291485538*r)**3,a=1.227013851*s-.55779998*i+.281256149*o,l=-.040580178*s+1.11225687*i-.071676679*o,c=-.076381285*s-.421481978*i+1.58616322*o;return[a*100,l*100,c*100]};F.oklab.rgb=function(t){const e=t[0]/100,n=t[1]/100,r=t[2]/100,s=(e+.3963377774*n+.2158037573*r)**3,i=(e-.1055613458*n-.0638541728*r)**3,o=(e-.0894841775*n-1.291485548*r)**3,a=ar(4.0767416621*s-3.3077115913*i+.2309699292*o),l=ar(-1.2684380046*s+2.6097574011*i-.3413193965*o),c=ar(-.0041960863*s-.7034186147*i+1.707614701*o);return[a*255,l*255,c*255]};F.oklch.oklab=function(t){return F.lch.lab(t)};F.lab.xyz=function(t){const e=t[0],n=t[1],r=t[2];let s,i,o;i=(e+16)/116,s=n/500+i,o=i-r/200;const a=i**3,l=s**3,c=o**3;return i=a>jt?a:(i-16/116)/7.787,s=l>jt?l:(s-16/116)/7.787,o=c>jt?c:(o-16/116)/7.787,s*=95.047,i*=100,o*=108.883,[s,i,o]};F.lab.lch=function(t){const e=t[0],n=t[1],r=t[2];let s;s=Math.atan2(r,n)*360/2/Math.PI,s<0&&(s+=360);const o=Math.sqrt(n*n+r*r);return[e,o,s]};F.lch.lab=function(t){const e=t[0],n=t[1],s=t[2]/360*2*Math.PI,i=n*Math.cos(s),o=n*Math.sin(s);return[e,i,o]};F.rgb.ansi16=function(t,e=null){const[n,r,s]=t;let i=e===null?F.rgb.hsv(t)[2]:e;if(i=Math.round(i/50),i===0)return 30;let o=30+(Math.round(s/255)<<2|Math.round(r/255)<<1|Math.round(n/255));return i===2&&(o+=60),o};F.hsv.ansi16=function(t){return F.rgb.ansi16(F.hsv.rgb(t),t[2])};F.rgb.ansi256=function(t){const e=t[0],n=t[1],r=t[2];return e>>4===n>>4&&n>>4===r>>4?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)};F.ansi16.rgb=function(t){t=t[0];let e=t%10;if(e===0||e===7)return t>50&&(e+=3.5),e=e/10.5*255,[e,e,e];const n=(Math.trunc(t>50)+1)*.5,r=(e&1)*n*255,s=(e>>1&1)*n*255,i=(e>>2&1)*n*255;return[r,s,i]};F.ansi256.rgb=function(t){if(t=t[0],t>=232){const i=(t-232)*10+8;return[i,i,i]}t-=16;let e;const n=Math.floor(t/36)/5*255,r=Math.floor((e=t%36)/6)/5*255,s=e%6/5*255;return[n,r,s]};F.rgb.hex=function(t){const n=(((Math.round(t[0])&255)<<16)+((Math.round(t[1])&255)<<8)+(Math.round(t[2])&255)).toString(16).toUpperCase();return"000000".slice(n.length)+n};F.hex.rgb=function(t){const e=t.toString(16).match(/[a-f\d]{6}|[a-f\d]{3}/i);if(!e)return[0,0,0];let n=e[0];e[0].length===3&&(n=[...n].map(a=>a+a).join(""));const r=Number.parseInt(n,16),s=r>>16&255,i=r>>8&255,o=r&255;return[s,i,o]};F.rgb.hcg=function(t){const e=t[0]/255,n=t[1]/255,r=t[2]/255,s=Math.max(Math.max(e,n),r),i=Math.min(Math.min(e,n),r),o=s-i;let a;const l=o<1?i/(1-o):0;return o<=0?a=0:s===e?a=(n-r)/o%6:s===n?a=2+(r-e)/o:a=4+(e-n)/o,a/=6,a%=1,[a*360,o*100,l*100]};F.hsl.hcg=function(t){const e=t[1]/100,n=t[2]/100,r=n<.5?2*e*n:2*e*(1-n);let s=0;return r<1&&(s=(n-.5*r)/(1-r)),[t[0],r*100,s*100]};F.hsv.hcg=function(t){const e=t[1]/100,n=t[2]/100,r=e*n;let s=0;return r<1&&(s=(n-r)/(1-r)),[t[0],r*100,s*100]};F.hcg.rgb=function(t){const e=t[0]/360,n=t[1]/100,r=t[2]/100;if(n===0)return[r*255,r*255,r*255];const s=[0,0,0],i=e%1*6,o=i%1,a=1-o;let l=0;switch(Math.floor(i)){case 0:{s[0]=1,s[1]=o,s[2]=0;break}case 1:{s[0]=a,s[1]=1,s[2]=0;break}case 2:{s[0]=0,s[1]=1,s[2]=o;break}case 3:{s[0]=0,s[1]=a,s[2]=1;break}case 4:{s[0]=o,s[1]=0,s[2]=1;break}default:s[0]=1,s[1]=0,s[2]=a}return l=(1-n)*r,[(n*s[0]+l)*255,(n*s[1]+l)*255,(n*s[2]+l)*255]};F.hcg.hsv=function(t){const e=t[1]/100,n=t[2]/100,r=e+n*(1-e);let s=0;return r>0&&(s=e/r),[t[0],s*100,r*100]};F.hcg.hsl=function(t){const e=t[1]/100,r=t[2]/100*(1-e)+.5*e;let s=0;return r>0&&r<.5?s=e/(2*r):r>=.5&&r<1&&(s=e/(2*(1-r))),[t[0],s*100,r*100]};F.hcg.hwb=function(t){const e=t[1]/100,n=t[2]/100,r=e+n*(1-e);return[t[0],(r-e)*100,(1-r)*100]};F.hwb.hcg=function(t){const e=t[1]/100,r=1-t[2]/100,s=r-e;let i=0;return s<1&&(i=(r-s)/(1-s)),[t[0],s*100,i*100]};F.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]};F.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]};F.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]};F.gray.hsl=function(t){return[0,0,t[0]]};F.gray.hsv=F.gray.hsl;F.gray.hwb=function(t){return[0,100,t[0]]};F.gray.cmyk=function(t){return[0,0,0,t[0]]};F.gray.lab=function(t){return[t[0],0,0]};F.gray.hex=function(t){const e=Math.round(t[0]/100*255)&255,r=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".slice(r.length)+r};F.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]};function kp(){const t={},e=Object.keys(F);for(let{length:n}=e,r=0;r<n;r++)t[e[r]]={distance:-1,parent:null};return t}function Ep(t){const e=kp(),n=[t];for(e[t].distance=0;n.length>0;){const r=n.pop(),s=Object.keys(F[r]);for(let{length:i}=s,o=0;o<i;o++){const a=s[o],l=e[a];l.distance===-1&&(l.distance=e[r].distance+1,l.parent=r,n.unshift(a))}}return e}function Tp(t,e){return function(n){return e(t(n))}}function Np(t,e){const n=[e[t].parent,t];let r=F[e[t].parent][t],s=e[t].parent;for(;e[s].parent;)n.unshift(e[s].parent),r=Tp(F[e[s].parent][s],r),s=e[s].parent;return r.conversion=n,r}function Ap(t){const e=Ep(t),n={},r=Object.keys(e);for(let{length:s}=r,i=0;i<s;i++){const o=r[i];e[o].parent!==null&&(n[o]=Np(o,e))}return n}const Re={},Op=Object.keys(F);function Cp(t){const e=function(...n){const r=n[0];return r==null?r:(r.length>1&&(n=r),t(n))};return"conversion"in t&&(e.conversion=t.conversion),e}function jp(t){const e=function(...n){const r=n[0];if(r==null)return r;r.length>1&&(n=r);const s=t(n);if(typeof s=="object")for(let{length:i}=s,o=0;o<i;o++)s[o]=Math.round(s[o]);return s};return"conversion"in t&&(e.conversion=t.conversion),e}for(const t of Op){Re[t]={},Object.defineProperty(Re[t],"channels",{value:F[t].channels}),Object.defineProperty(Re[t],"labels",{value:F[t].labels});const e=Ap(t),n=Object.keys(e);for(const r of n){const s=e[r];Re[t][r]=jp(s),Re[t][r].raw=Cp(s)}}const Rc=["keyword","gray","hex"],Eo={};for(const t of Object.keys(Re))Eo[[...Re[t].labels].sort().join("")]=t;const To={};function fe(t,e){if(!(this instanceof fe))return new fe(t,e);if(e&&e in Rc&&(e=null),e&&!(e in Re))throw new Error("Unknown model: "+e);let n,r;if(t==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(t instanceof fe)this.model=t.model,this.color=[...t.color],this.valpha=t.valpha;else if(typeof t=="string"){const s=Ie.get(t);if(s===null)throw new Error("Unable to parse color from string: "+t);this.model=s.model,r=Re[this.model].channels,this.color=s.value.slice(0,r),this.valpha=typeof s.value[r]=="number"?s.value[r]:1}else if(t.length>0){this.model=e||"rgb",r=Re[this.model].channels;const s=Array.prototype.slice.call(t,0,r);this.color=No(s,r),this.valpha=typeof t[r]=="number"?t[r]:1}else if(typeof t=="number")this.model="rgb",this.color=[t>>16&255,t>>8&255,t&255],this.valpha=1;else{this.valpha=1;const s=Object.keys(t);"alpha"in t&&(s.splice(s.indexOf("alpha"),1),this.valpha=typeof t.alpha=="number"?t.alpha:0);const i=s.sort().join("");if(!(i in Eo))throw new Error("Unable to parse color from object: "+JSON.stringify(t));this.model=Eo[i];const{labels:o}=Re[this.model],a=[];for(n=0;n<o.length;n++)a.push(t[o[n]]);this.color=No(a)}if(To[this.model])for(r=Re[this.model].channels,n=0;n<r;n++){const s=To[this.model][n];s&&(this.color[n]=s(this.color[n]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}fe.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(t){let e=this.model in Ie.to?this:this.rgb();e=e.round(typeof t=="number"?t:1);const n=e.valpha===1?e.color:[...e.color,this.valpha];return Ie.to[e.model](...n)},percentString(t){const e=this.rgb().round(typeof t=="number"?t:1),n=e.valpha===1?e.color:[...e.color,this.valpha];return Ie.to.rgb.percent(...n)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const t={},{channels:e}=Re[this.model],{labels:n}=Re[this.model];for(let r=0;r<e;r++)t[n[r]]=this.color[r];return this.valpha!==1&&(t.alpha=this.valpha),t},unitArray(){const t=this.rgb().color;return t[0]/=255,t[1]/=255,t[2]/=255,this.valpha!==1&&t.push(this.valpha),t},unitObject(){const t=this.rgb().object();return t.r/=255,t.g/=255,t.b/=255,this.valpha!==1&&(t.alpha=this.valpha),t},round(t){return t=Math.max(t||0,0),new fe([...this.color.map(Mp(t)),this.valpha],this.model)},alpha(t){return t!==void 0?new fe([...this.color,Math.max(0,Math.min(1,t))],this.model):this.valpha},red:_e("rgb",0,je(255)),green:_e("rgb",1,je(255)),blue:_e("rgb",2,je(255)),hue:_e(["hsl","hsv","hsl","hwb","hcg"],0,t=>(t%360+360)%360),saturationl:_e("hsl",1,je(100)),lightness:_e("hsl",2,je(100)),saturationv:_e("hsv",1,je(100)),value:_e("hsv",2,je(100)),chroma:_e("hcg",1,je(100)),gray:_e("hcg",2,je(100)),white:_e("hwb",1,je(100)),wblack:_e("hwb",2,je(100)),cyan:_e("cmyk",0,je(100)),magenta:_e("cmyk",1,je(100)),yellow:_e("cmyk",2,je(100)),black:_e("cmyk",3,je(100)),x:_e("xyz",0,je(95.047)),y:_e("xyz",1,je(100)),z:_e("xyz",2,je(108.833)),l:_e("lab",0,je(100)),a:_e("lab",1),b:_e("lab",2),keyword(t){return t!==void 0?new fe(t):Re[this.model].keyword(this.color)},hex(t){return t!==void 0?new fe(t):Ie.to.hex(...this.rgb().round().color)},hexa(t){if(t!==void 0)return new fe(t);const e=this.rgb().round().color;let n=Math.round(this.valpha*255).toString(16).toUpperCase();return n.length===1&&(n="0"+n),Ie.to.hex(...e)+n},rgbNumber(){const t=this.rgb().color;return(t[0]&255)<<16|(t[1]&255)<<8|t[2]&255},luminosity(){const t=this.rgb().color,e=[];for(const[n,r]of t.entries()){const s=r/255;e[n]=s<=.04045?s/12.92:((s+.055)/1.055)**2.4}return .2126*e[0]+.7152*e[1]+.0722*e[2]},contrast(t){const e=this.luminosity(),n=t.luminosity();return e>n?(e+.05)/(n+.05):(n+.05)/(e+.05)},level(t){const e=this.contrast(t);return e>=7?"AAA":e>=4.5?"AA":""},isDark(){const t=this.rgb().color;return(t[0]*2126+t[1]*7152+t[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const t=this.rgb();for(let e=0;e<3;e++)t.color[e]=255-t.color[e];return t},lighten(t){const e=this.hsl();return e.color[2]+=e.color[2]*t,e},darken(t){const e=this.hsl();return e.color[2]-=e.color[2]*t,e},saturate(t){const e=this.hsl();return e.color[1]+=e.color[1]*t,e},desaturate(t){const e=this.hsl();return e.color[1]-=e.color[1]*t,e},whiten(t){const e=this.hwb();return e.color[1]+=e.color[1]*t,e},blacken(t){const e=this.hwb();return e.color[2]+=e.color[2]*t,e},grayscale(){const t=this.rgb().color,e=t[0]*.3+t[1]*.59+t[2]*.11;return fe.rgb(e,e,e)},fade(t){return this.alpha(this.valpha-this.valpha*t)},opaquer(t){return this.alpha(this.valpha+this.valpha*t)},rotate(t){const e=this.hsl();let n=e.color[0];return n=(n+t)%360,n=n<0?360+n:n,e.color[0]=n,e},mix(t,e){if(!t||!t.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof t);const n=t.rgb(),r=this.rgb(),s=e===void 0?.5:e,i=2*s-1,o=n.alpha()-r.alpha(),a=((i*o===-1?i:(i+o)/(1+i*o))+1)/2,l=1-a;return fe.rgb(a*n.red()+l*r.red(),a*n.green()+l*r.green(),a*n.blue()+l*r.blue(),n.alpha()*s+r.alpha()*(1-s))}};for(const t of Object.keys(Re)){if(Rc.includes(t))continue;const{channels:e}=Re[t];fe.prototype[t]=function(...n){return this.model===t?new fe(this):n.length>0?new fe(n,t):new fe([...Rp(Re[this.model][t].raw(this.color)),this.valpha],t)},fe[t]=function(...n){let r=n[0];return typeof r=="number"&&(r=No(n,e)),new fe(r,t)}}function Ip(t,e){return Number(t.toFixed(e))}function Mp(t){return function(e){return Ip(e,t)}}function _e(t,e,n){t=Array.isArray(t)?t:[t];for(const r of t)(To[r]||=[])[e]=n;return t=t[0],function(r){let s;return r!==void 0?(n&&(r=n(r)),s=this[t](),s.color[e]=r,s):(s=this[t]().color[e],n&&(s=n(s)),s)}}function je(t){return function(e){return Math.max(0,Math.min(t,e))}}function Rp(t){return Array.isArray(t)?t:[t]}function No(t,e){for(let n=0;n<e;n++)typeof t[n]!="number"&&(t[n]=0);return t}function U(...t){return Cd(jc(t))}function Pc(t,e=.5){return fe(t).darken(e).hex()}function It(t){return-t*(Math.PI/180)}function $c(t){const e=new ArrayBuffer(t.byteLength);return new Uint8Array(e).set(new Uint8Array(t)),e}function Pp(t){if(t===0)return"0";const e=1e-6;let n=1,r=0,s=0,i=1,o=t;do{const a=Math.floor(o);let l=n;n=a*n+r,r=l,l=s,s=a*s+i,i=l,o=1/(o-a)}while(Math.abs(t-n/s)>t*e);return`${n}/${s}`}function $p(t){switch(t){case"XZ":return[0,0,0];case"XY":return[-Math.PI/2,0,0];case"YZ":return[0,0,Math.PI/2];default:return[0,0,0]}}function Ao(t){const e=z.c(8);let n,r;e[0]!==t?({className:n,...r}=t,e[0]=t,e[1]=n,e[2]=r):(n=e[1],r=e[2]);let s;e[3]!==n?(s=U("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",n),e[3]=n,e[4]=s):s=e[4];let i;return e[5]!==r||e[6]!==s?(i=d.jsx(Nd,{"data-slot":"resizable-panel-group",className:s,...r}),e[5]=r,e[6]=s,e[7]=i):i=e[7],i}function er(t){const e=z.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let r;return e[2]!==n?(r=d.jsx(Ed,{"data-slot":"resizable-panel",...n}),e[2]=n,e[3]=r):r=e[3],r}function Oo(t){const e=z.c(12);let n,r,s;e[0]!==t?({withHandle:s,className:n,...r}=t,e[0]=t,e[1]=n,e[2]=r,e[3]=s):(n=e[1],r=e[2],s=e[3]);let i;e[4]!==n?(i=U("bg-border focus-visible:ring-ring relative flex w-px items-center justify-center after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:ring-1 focus-visible:ring-offset-1 focus-visible:outline-hidden data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:translate-x-0 data-[panel-group-direction=vertical]:after:-translate-y-1/2 [&[data-panel-group-direction=vertical]>div]:rotate-90 hover:bg-primary",n),e[4]=n,e[5]=i):i=e[5];let o;e[6]!==s?(o=s&&d.jsx("div",{className:"bg-border z-10 flex h-4 w-3 items-center justify-center rounded-xs border",children:d.jsx(jd,{className:"size-2.5"})}),e[6]=s,e[7]=o):o=e[7];let a;return e[8]!==r||e[9]!==i||e[10]!==o?(a=d.jsx(Td,{"data-slot":"resizable-handle",className:i,...r,children:o}),e[8]=r,e[9]=i,e[10]=o,e[11]=a):a=e[11],a}function zp(t){const e=z.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let r;return e[2]!==n?(r=d.jsx(Jd,{"data-slot":"dialog",...n}),e[2]=n,e[3]=r):r=e[3],r}function Lp(t){const e=z.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let r;return e[2]!==n?(r=d.jsx(eh,{"data-slot":"dialog-portal",...n}),e[2]=n,e[3]=r):r=e[3],r}function Dp(t){const e=z.c(8);let n,r;e[0]!==t?({className:n,...r}=t,e[0]=t,e[1]=n,e[2]=r):(n=e[1],r=e[2]);let s;e[3]!==n?(s=U("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50 backdrop-blur",n),e[3]=n,e[4]=s):s=e[4];let i;return e[5]!==r||e[6]!==s?(i=d.jsx(nh,{"data-slot":"dialog-overlay",className:s,...r}),e[5]=r,e[6]=s,e[7]=i):i=e[7],i}function Fp(t){const e=z.c(15);let n,r,s,i;e[0]!==t?({className:r,children:n,showCloseButton:i,...s}=t,e[0]=t,e[1]=n,e[2]=r,e[3]=s,e[4]=i):(n=e[1],r=e[2],s=e[3],i=e[4]);const o=i===void 0?!0:i;let a;e[5]===Symbol.for("react.memo_cache_sentinel")?(a=d.jsx(Dp,{}),e[5]=a):a=e[5];let l;e[6]!==r?(l=U("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",r),e[6]=r,e[7]=l):l=e[7];let c;e[8]!==o?(c=o&&d.jsxs(th,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[d.jsx(bc,{}),d.jsx("span",{className:"sr-only",children:"Close"})]}),e[8]=o,e[9]=c):c=e[9];let u;return e[10]!==n||e[11]!==s||e[12]!==l||e[13]!==c?(u=d.jsxs(Lp,{"data-slot":"dialog-portal",children:[a,d.jsxs(Xd,{"data-slot":"dialog-content",className:l,...s,children:[n,c]})]}),e[10]=n,e[11]=s,e[12]=l,e[13]=c,e[14]=u):u=e[14],u}function Bp(t){const e=z.c(8);let n,r;e[0]!==t?({className:n,...r}=t,e[0]=t,e[1]=n,e[2]=r):(n=e[1],r=e[2]);let s;e[3]!==n?(s=U("flex flex-col gap-2 text-center sm:text-left",n),e[3]=n,e[4]=s):s=e[4];let i;return e[5]!==r||e[6]!==s?(i=d.jsx("div",{"data-slot":"dialog-header",className:s,...r}),e[5]=r,e[6]=s,e[7]=i):i=e[7],i}function Up(t){const e=z.c(8);let n,r;e[0]!==t?({className:n,...r}=t,e[0]=t,e[1]=n,e[2]=r):(n=e[1],r=e[2]);let s;e[3]!==n?(s=U("text-lg leading-none font-semibold",n),e[3]=n,e[4]=s):s=e[4];let i;return e[5]!==r||e[6]!==s?(i=d.jsx(Yd,{"data-slot":"dialog-title",className:s,...r}),e[5]=r,e[6]=s,e[7]=i):i=e[7],i}function Vp(t){const e=z.c(8);let n,r;e[0]!==t?({className:n,...r}=t,e[0]=t,e[1]=n,e[2]=r):(n=e[1],r=e[2]);let s;e[3]!==n?(s=U("text-muted-foreground text-sm",n),e[3]=n,e[4]=s):s=e[4];let i;return e[5]!==r||e[6]!==s?(i=d.jsx(Qd,{"data-slot":"dialog-description",className:s,...r}),e[5]=r,e[6]=s,e[7]=i):i=e[7],i}function Zp(t){const e=z.c(8);let n,r;e[0]!==t?({className:n,...r}=t,e[0]=t,e[1]=n,e[2]=r):(n=e[1],r=e[2]);let s;e[3]!==n?(s=U("bg-background flex h-9 items-center gap-1 rounded-md border p-1 shadow-xs",n),e[3]=n,e[4]=s):s=e[4];let i;return e[5]!==r||e[6]!==s?(i=d.jsx(ah,{"data-slot":"menubar",className:s,...r}),e[5]=r,e[6]=s,e[7]=i):i=e[7],i}function el(t){const e=z.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let r;return e[2]!==n?(r=d.jsx(ih,{"data-slot":"menubar-menu",...n}),e[2]=n,e[3]=r):r=e[3],r}function Wp(t){const e=z.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let r;return e[2]!==n?(r=d.jsx(lh,{"data-slot":"menubar-portal",...n}),e[2]=n,e[3]=r):r=e[3],r}function qp(t){const e=z.c(8);let n,r;e[0]!==t?({className:n,...r}=t,e[0]=t,e[1]=n,e[2]=r):(n=e[1],r=e[2]);let s;e[3]!==n?(s=U("focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground flex items-center rounded-sm px-2 py-1 text-sm font-medium outline-hidden select-none",n),e[3]=n,e[4]=s):s=e[4];let i;return e[5]!==r||e[6]!==s?(i=d.jsx(rh,{"data-slot":"menubar-trigger",className:s,...r}),e[5]=r,e[6]=s,e[7]=i):i=e[7],i}function Gp(t){const e=z.c(14);let n,r,s,i,o;e[0]!==t?({className:n,align:s,alignOffset:i,sideOffset:o,...r}=t,e[0]=t,e[1]=n,e[2]=r,e[3]=s,e[4]=i,e[5]=o):(n=e[1],r=e[2],s=e[3],i=e[4],o=e[5]);const a=s===void 0?"start":s,l=i===void 0?-4:i,c=o===void 0?8:o;let u;e[6]!==n?(u=U("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[12rem] origin-(--radix-menubar-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-md",n),e[6]=n,e[7]=u):u=e[7];let f;return e[8]!==a||e[9]!==l||e[10]!==r||e[11]!==c||e[12]!==u?(f=d.jsx(Wp,{children:d.jsx(oh,{"data-slot":"menubar-content",align:a,alignOffset:l,sideOffset:c,className:u,...r})}),e[8]=a,e[9]=l,e[10]=r,e[11]=c,e[12]=u,e[13]=f):f=e[13],f}function Gn(t){const e=z.c(12);let n,r,s,i;e[0]!==t?({className:n,inset:r,variant:i,...s}=t,e[0]=t,e[1]=n,e[2]=r,e[3]=s,e[4]=i):(n=e[1],r=e[2],s=e[3],i=e[4]);const o=i===void 0?"default":i;let a;e[5]!==n?(a=U("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",n),e[5]=n,e[6]=a):a=e[6];let l;return e[7]!==r||e[8]!==s||e[9]!==a||e[10]!==o?(l=d.jsx(sh,{"data-slot":"menubar-item","data-inset":r,"data-variant":o,className:a,...s}),e[7]=r,e[8]=s,e[9]=a,e[10]=o,e[11]=l):l=e[11],l}function to(t){const e=z.c(8);let n,r;e[0]!==t?({className:n,...r}=t,e[0]=t,e[1]=n,e[2]=r):(n=e[1],r=e[2]);let s;e[3]!==n?(s=U("bg-border -mx-1 my-1 h-px",n),e[3]=n,e[4]=s):s=e[4];let i;return e[5]!==r||e[6]!==s?(i=d.jsx(vc,{"data-slot":"menubar-separator",className:s,...r}),e[5]=r,e[6]=s,e[7]=i):i=e[7],i}function tl(t){const e=z.c(8);let n,r;e[0]!==t?({className:n,...r}=t,e[0]=t,e[1]=n,e[2]=r):(n=e[1],r=e[2]);let s;e[3]!==n?(s=U("text-muted-foreground ml-auto text-xs tracking-widest",n),e[3]=n,e[4]=s):s=e[4];let i;return e[5]!==r||e[6]!==s?(i=d.jsx("span",{"data-slot":"menubar-shortcut",className:s,...r}),e[5]=r,e[6]=s,e[7]=i):i=e[7],i}function ei(t){const e=z.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let r;return e[2]!==n?(r=d.jsx(ch,{"data-slot":"select",...n}),e[2]=n,e[3]=r):r=e[3],r}function Co(t){const e=z.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let r;return e[2]!==n?(r=d.jsx(ph,{"data-slot":"select-group",...n}),e[2]=n,e[3]=r):r=e[3],r}function ti(t){const e=z.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let r;return e[2]!==n?(r=d.jsx(fh,{"data-slot":"select-value",...n}),e[2]=n,e[3]=r):r=e[3],r}function ni(t){const e=z.c(13);let n,r,s,i;e[0]!==t?({className:r,size:i,children:n,...s}=t,e[0]=t,e[1]=n,e[2]=r,e[3]=s,e[4]=i):(n=e[1],r=e[2],s=e[3],i=e[4]);const o=i===void 0?"default":i;let a;e[5]!==r?(a=U("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 mt-2",r),e[5]=r,e[6]=a):a=e[6];let l;e[7]===Symbol.for("react.memo_cache_sentinel")?(l=d.jsx(yh,{asChild:!0,children:d.jsx(wc,{className:"size-4 opacity-50"})}),e[7]=l):l=e[7];let c;return e[8]!==n||e[9]!==s||e[10]!==o||e[11]!==a?(c=d.jsxs(uh,{"data-slot":"select-trigger","data-size":o,className:a,...s,children:[n,l]}),e[8]=n,e[9]=s,e[10]=o,e[11]=a,e[12]=c):c=e[12],c}function ri(t){const e=z.c(20);let n,r,s,i;e[0]!==t?({className:r,children:n,position:i,...s}=t,e[0]=t,e[1]=n,e[2]=r,e[3]=s,e[4]=i):(n=e[1],r=e[2],s=e[3],i=e[4]);const o=i===void 0?"popper":i,a=o==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1";let l;e[5]!==r||e[6]!==a?(l=U("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",a,r),e[5]=r,e[6]=a,e[7]=l):l=e[7];let c;e[8]===Symbol.for("react.memo_cache_sentinel")?(c=d.jsx(Hp,{}),e[8]=c):c=e[8];const u=o==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1";let f;e[9]!==u?(f=U("p-1",u),e[9]=u,e[10]=f):f=e[10];let h;e[11]!==n||e[12]!==f?(h=d.jsx(bh,{className:f,children:n}),e[11]=n,e[12]=f,e[13]=h):h=e[13];let p;e[14]===Symbol.for("react.memo_cache_sentinel")?(p=d.jsx(Kp,{}),e[14]=p):p=e[14];let y;return e[15]!==o||e[16]!==s||e[17]!==l||e[18]!==h?(y=d.jsx(dh,{children:d.jsxs(hh,{"data-slot":"select-content",className:l,position:o,...s,children:[c,h,p]})}),e[15]=o,e[16]=s,e[17]=l,e[18]=h,e[19]=y):y=e[19],y}function jo(t){const e=z.c(8);let n,r;e[0]!==t?({className:n,...r}=t,e[0]=t,e[1]=n,e[2]=r):(n=e[1],r=e[2]);let s;e[3]!==n?(s=U("text-muted-foreground px-2 py-1.5 text-xs",n),e[3]=n,e[4]=s):s=e[4];let i;return e[5]!==r||e[6]!==s?(i=d.jsx(mh,{"data-slot":"select-label",className:s,...r}),e[5]=r,e[6]=s,e[7]=i):i=e[7],i}function vn(t){const e=z.c(13);let n,r,s;e[0]!==t?({className:r,children:n,...s}=t,e[0]=t,e[1]=n,e[2]=r,e[3]=s):(n=e[1],r=e[2],s=e[3]);let i;e[4]!==r?(i=U("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",r),e[4]=r,e[5]=i):i=e[5];let o;e[6]===Symbol.for("react.memo_cache_sentinel")?(o=d.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:d.jsx(wh,{children:d.jsx(Id,{className:"size-4"})})}),e[6]=o):o=e[6];let a;e[7]!==n?(a=d.jsx(vh,{children:n}),e[7]=n,e[8]=a):a=e[8];let l;return e[9]!==s||e[10]!==i||e[11]!==a?(l=d.jsxs(gh,{"data-slot":"select-item",className:i,...s,children:[o,a]}),e[9]=s,e[10]=i,e[11]=a,e[12]=l):l=e[12],l}function Hp(t){const e=z.c(9);let n,r;e[0]!==t?({className:n,...r}=t,e[0]=t,e[1]=n,e[2]=r):(n=e[1],r=e[2]);let s;e[3]!==n?(s=U("flex cursor-default items-center justify-center py-1",n),e[3]=n,e[4]=s):s=e[4];let i;e[5]===Symbol.for("react.memo_cache_sentinel")?(i=d.jsx(Md,{className:"size-4"}),e[5]=i):i=e[5];let o;return e[6]!==r||e[7]!==s?(o=d.jsx(xh,{"data-slot":"select-scroll-up-button",className:s,...r,children:i}),e[6]=r,e[7]=s,e[8]=o):o=e[8],o}function Kp(t){const e=z.c(9);let n,r;e[0]!==t?({className:n,...r}=t,e[0]=t,e[1]=n,e[2]=r):(n=e[1],r=e[2]);let s;e[3]!==n?(s=U("flex cursor-default items-center justify-center py-1",n),e[3]=n,e[4]=s):s=e[4];let i;e[5]===Symbol.for("react.memo_cache_sentinel")?(i=d.jsx(wc,{className:"size-4"}),e[5]=i):i=e[5];let o;return e[6]!==r||e[7]!==s?(o=d.jsx(_h,{"data-slot":"select-scroll-down-button",className:s,...r,children:i}),e[6]=r,e[7]=s,e[8]=o):o=e[8],o}function Yp(t){const e=z.c(6);let n,r;e[0]!==t?({delayDuration:r,...n}=t,e[0]=t,e[1]=n,e[2]=r):(n=e[1],r=e[2]);const s=r===void 0?0:r;let i;return e[3]!==s||e[4]!==n?(i=d.jsx(Nh,{"data-slot":"tooltip-provider",delayDuration:s,...n}),e[3]=s,e[4]=n,e[5]=i):i=e[5],i}function Wt(t){const e=z.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let r;return e[2]!==n?(r=d.jsx(Yp,{children:d.jsx(kh,{"data-slot":"tooltip",...n})}),e[2]=n,e[3]=r):r=e[3],r}function qt(t){const e=z.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let r;return e[2]!==n?(r=d.jsx(Sh,{"data-slot":"tooltip-trigger",...n}),e[2]=n,e[3]=r):r=e[3],r}function Gt(t){const e=z.c(13);let n,r,s,i;e[0]!==t?({className:r,sideOffset:i,children:n,...s}=t,e[0]=t,e[1]=n,e[2]=r,e[3]=s,e[4]=i):(n=e[1],r=e[2],s=e[3],i=e[4]);const o=i===void 0?0:i;let a;e[5]!==r?(a=U("bg-secondary text-secondary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",r),e[5]=r,e[6]=a):a=e[6];let l;e[7]===Symbol.for("react.memo_cache_sentinel")?(l=d.jsx(Ah,{className:"bg-secondary fill-secondary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"}),e[7]=l):l=e[7];let c;return e[8]!==n||e[9]!==s||e[10]!==o||e[11]!==a?(c=d.jsx(Eh,{children:d.jsxs(Th,{"data-slot":"tooltip-content",sideOffset:o,className:a,...s,children:[n,l]})}),e[8]=n,e[9]=s,e[10]=o,e[11]=a,e[12]=c):c=e[12],c}const nl=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,rl=jc,fa=(t,e)=>n=>{var r;if(e?.variants==null)return rl(t,n?.class,n?.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const u=n?.[c],f=i?.[c];if(u===null)return null;const h=nl(u)||nl(f);return s[c][h]}),a=n&&Object.entries(n).reduce((c,u)=>{let[f,h]=u;return h===void 0||(c[f]=h),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:f,className:h,...p}=u;return Object.entries(p).every(y=>{let[m,w]=y;return Array.isArray(w)?w.includes({...i,...a}[m]):{...i,...a}[m]===w})?[...c,f,h]:c},[]);return rl(t,o,l,n?.class,n?.className)},zc=fa("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive cursor-pointer",{variants:{variant:{default:"bg-primary text-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function Ve(t){const e=z.c(14);let n,r,s,i,o;e[0]!==t?({className:n,variant:o,size:s,asChild:i,...r}=t,e[0]=t,e[1]=n,e[2]=r,e[3]=s,e[4]=i,e[5]=o):(n=e[1],r=e[2],s=e[3],i=e[4],o=e[5]);const l=(i===void 0?!1:i)?xc:"button";let c;e[6]!==n||e[7]!==s||e[8]!==o?(c=U(zc({variant:o,size:s,className:n})),e[6]=n,e[7]=s,e[8]=o,e[9]=c):c=e[9];let u;return e[10]!==l||e[11]!==r||e[12]!==c?(u=d.jsx(l,{"data-slot":"button",className:c,...r}),e[10]=l,e[11]=r,e[12]=c,e[13]=u):u=e[13],u}function Xp(t){const e=z.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let r;return e[2]!==n?(r=d.jsx(Ih,{"data-slot":"popover",...n}),e[2]=n,e[3]=r):r=e[3],r}function Qp(t){const e=z.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let r;return e[2]!==n?(r=d.jsx(Oh,{"data-slot":"popover-trigger",...n}),e[2]=n,e[3]=r):r=e[3],r}function Jp(t){const e=z.c(12);let n,r,s,i;e[0]!==t?({className:n,align:s,sideOffset:i,...r}=t,e[0]=t,e[1]=n,e[2]=r,e[3]=s,e[4]=i):(n=e[1],r=e[2],s=e[3],i=e[4]);const o=s===void 0?"center":s,a=i===void 0?4:i;let l;e[5]!==n?(l=U("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",n),e[5]=n,e[6]=l):l=e[6];let c;return e[7]!==o||e[8]!==r||e[9]!==a||e[10]!==l?(c=d.jsx(Ch,{children:d.jsx(jh,{"data-slot":"popover-content",align:o,sideOffset:a,className:l,...r})}),e[7]=o,e[8]=r,e[9]=a,e[10]=l,e[11]=c):c=e[11],c}function xn(t){const e=z.c(10);let n,r,s;e[0]!==t?({className:n,type:s,...r}=t,e[0]=t,e[1]=n,e[2]=r,e[3]=s):(n=e[1],r=e[2],s=e[3]);let i;e[4]!==n?(i=U("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm mt-2","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",n),e[4]=n,e[5]=i):i=e[5];let o;return e[6]!==r||e[7]!==i||e[8]!==s?(o=d.jsx("input",{type:s,"data-slot":"input",className:i,...r}),e[6]=r,e[7]=i,e[8]=s,e[9]=o):o=e[9],o}const Lc=$.createContext(void 0),wi=()=>{const t=$.useContext(Lc);if(!t)throw new Error("useColorPicker must be used within a ColorPickerProvider");return t},em=t=>{const e=z.c(37);let n,r,s,i,o;e[0]!==t?({value:o,defaultValue:i,onChange:r,className:n,...s}=t,e[0]=t,e[1]=n,e[2]=r,e[3]=s,e[4]=i,e[5]=o):(n=e[1],r=e[2],s=e[3],i=e[4],o=e[5]);const a=i===void 0?"#000000":i,l=fe(o),c=fe(a),[u,f]=$.useState(l.hue()||c.hue()||0),[h,p]=$.useState(l.saturationl()||c.saturationl()||100),[y,m]=$.useState(l.lightness()||c.lightness()||50),[w,g]=$.useState(l.alpha()*100||c.alpha()*100),[E,v]=$.useState("hex");let S;e[6]!==f||e[7]!==m||e[8]!==p||e[9]!==o?(S=()=>{if(o){const A=fe.rgb(o).rgb().object();f(A.r),p(A.g),m(A.b),g(A.a)}},e[6]=f,e[7]=m,e[8]=p,e[9]=o,e[10]=S):S=e[10];let _;e[11]!==o?(_=[o],e[11]=o,e[12]=_):_=e[12],$.useEffect(S,_);let O,b;e[13]!==w||e[14]!==u||e[15]!==y||e[16]!==r||e[17]!==h?(O=()=>{if(r){const C=fe.hsl(u,h,y).alpha(w/100).rgb().array();r([C[0],C[1],C[2],w/100])}},b=[u,h,y,w,r],e[13]=w,e[14]=u,e[15]=y,e[16]=r,e[17]=h,e[18]=O,e[19]=b):(O=e[18],b=e[19]),$.useEffect(O,b);let x;e[20]!==w||e[21]!==u||e[22]!==y||e[23]!==E||e[24]!==h||e[25]!==f||e[26]!==m||e[27]!==p?(x={hue:u,saturation:h,lightness:y,alpha:w,mode:E,setHue:f,setSaturation:p,setLightness:m,setAlpha:g,setMode:v},e[20]=w,e[21]=u,e[22]=y,e[23]=E,e[24]=h,e[25]=f,e[26]=m,e[27]=p,e[28]=x):x=e[28];let k;e[29]!==n?(k=U("flex size-full flex-col gap-4",n),e[29]=n,e[30]=k):k=e[30];let N;e[31]!==s||e[32]!==k?(N=d.jsx("div",{className:k,...s}),e[31]=s,e[32]=k,e[33]=N):N=e[33];let T;return e[34]!==x||e[35]!==N?(T=d.jsx(Lc.Provider,{value:x,children:N}),e[34]=x,e[35]=N,e[36]=T):T=e[36],T},Dc=$.memo(t=>{const e=z.c(34);let n,r;e[0]!==t?({className:n,...r}=t,e[0]=t,e[1]=n,e[2]=r):(n=e[1],r=e[2]);const s=$.useRef(null),{hue:i,saturation:o,lightness:a,setSaturation:l,setLightness:c}=wi(),[u,f]=$.useState(!1),[h,p]=$.useState(0),[y,m]=$.useState(0);let w;w=`linear-gradient(0deg, oklch(0 0 0), oklch(0 0 0 / 0%)),
			linear-gradient(90deg, oklch(1 0 0), oklch(1 0 0 / 0%)),
			hsl(${i}, 100%, 50%)`;const g=w;let E,v;e[3]!==a||e[4]!==o?(E=()=>{const B=o/100,D=B<.01?100:50+50*(1-B),Y=1-a/D;p(B),m(Y)},v=[o,a],e[3]=a,e[4]=o,e[5]=E,e[6]=v):(E=e[5],v=e[6]),$.useEffect(E,v);let S;e[7]!==c||e[8]!==l?(S=B=>{if(!s.current)return;const D=s.current.getBoundingClientRect(),Y=Math.max(0,Math.min(1,(B.clientX-D.left)/D.width)),ee=Math.max(0,Math.min(1,(B.clientY-D.top)/D.height));p(Y),m(ee),l(Y*100);const K=(Y<.01?100:50+50*(1-Y))*(1-ee);c(K)},e[7]=c,e[8]=l,e[9]=S):S=e[9];const _=S;let O;e[10]!==u||e[11]!==_?(O=B=>{u&&_(B)},e[10]=u,e[11]=_,e[12]=O):O=e[12];const b=O;let x,k;e[13]!==b||e[14]!==u?(x=()=>{const B=()=>f(!1);return u&&(window.addEventListener("pointermove",b),window.addEventListener("pointerup",B)),()=>{window.removeEventListener("pointermove",b),window.removeEventListener("pointerup",B)}},k=[u,b],e[13]=b,e[14]=u,e[15]=x,e[16]=k):(x=e[15],k=e[16]),$.useEffect(x,k);let N;e[17]!==n?(N=U("relative size-full cursor-crosshair rounded",n),e[17]=n,e[18]=N):N=e[18];let T,A;e[19]!==_?(A=B=>{B.preventDefault(),f(!0),_(B)},T=B=>{_(B)},e[19]=_,e[20]=T,e[21]=A):(T=e[20],A=e[21]);let C;e[22]!==g?(C={background:g},e[22]=g,e[23]=C):C=e[23];const R=`${h*100}%`,I=`${y*100}%`;let P;e[24]!==R||e[25]!==I?(P=d.jsx("div",{className:"-translate-x-1/2 -translate-y-1/2 pointer-events-none absolute h-4 w-4 rounded-full border-2 border-white",style:{left:R,top:I,boxShadow:"0 0 0 1px rgba(0,0,0,0.5)"}}),e[24]=R,e[25]=I,e[26]=P):P=e[26];let L;return e[27]!==r||e[28]!==T||e[29]!==C||e[30]!==P||e[31]!==N||e[32]!==A?(L=d.jsx("div",{className:N,onPointerDown:A,onClick:T,ref:s,style:C,...r,children:P}),e[27]=r,e[28]=T,e[29]=C,e[30]=P,e[31]=N,e[32]=A,e[33]=L):L=e[33],L});Dc.displayName="ColorPickerSelection";const tm=t=>{const e=z.c(16);let n,r;e[0]!==t?({className:n,...r}=t,e[0]=t,e[1]=n,e[2]=r):(n=e[1],r=e[2]);const{hue:s,setHue:i}=wi();let o;e[3]!==n?(o=U("relative flex h-4 w-full touch-none",n),e[3]=n,e[4]=o):o=e[4];let a;e[5]!==i?(a=h=>{const[p]=h;return i(p)},e[5]=i,e[6]=a):a=e[6];let l;e[7]!==s?(l=[s],e[7]=s,e[8]=l):l=e[8];let c,u;e[9]===Symbol.for("react.memo_cache_sentinel")?(c=d.jsx(Sc,{className:"relative my-0.5 h-3 w-full grow rounded-full bg-[linear-gradient(90deg,#FF0000,#FFFF00,#00FF00,#00FFFF,#0000FF,#FF00FF,#FF0000)]",children:d.jsx(kc,{className:"absolute h-full"})}),u=d.jsx(Ec,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"}),e[9]=c,e[10]=u):(c=e[9],u=e[10]);let f;return e[11]!==r||e[12]!==o||e[13]!==a||e[14]!==l?(f=d.jsxs(_c,{className:o,max:360,onValueChange:a,step:1,value:l,...r,children:[c,u]}),e[11]=r,e[12]=o,e[13]=a,e[14]=l,e[15]=f):f=e[15],f},nm=t=>{const e=z.c(15);let n,r;e[0]!==t?({className:n,...r}=t,e[0]=t,e[1]=n,e[2]=r):(n=e[1],r=e[2]);const{setHue:s,setSaturation:i,setLightness:o,setAlpha:a}=wi();let l;e[3]!==a||e[4]!==s||e[5]!==o||e[6]!==i?(l=async()=>{try{const y=await new EyeDropper().open(),m=fe(y.sRGBHex),[w,g,E]=m.hsl().array();s(w),i(g),o(E),a(100)}catch(p){console.error("EyeDropper failed:",p)}},e[3]=a,e[4]=s,e[5]=o,e[6]=i,e[7]=l):l=e[7];const c=l;let u;e[8]!==n?(u=U("shrink-0 text-muted-foreground",n),e[8]=n,e[9]=u):u=e[9];let f;e[10]===Symbol.for("react.memo_cache_sentinel")?(f=d.jsx(Rd,{size:16}),e[10]=f):f=e[10];let h;return e[11]!==c||e[12]!==r||e[13]!==u?(h=d.jsx(Ve,{className:u,onClick:c,size:"icon",variant:"outline",type:"button",...r,children:f}),e[11]=c,e[12]=r,e[13]=u,e[14]=h):h=e[14],h},rm=t=>{const e=z.c(86);let n,r;e[0]!==t?({className:n,...r}=t,e[0]=t,e[1]=n,e[2]=r):(n=e[1],r=e[2]);const{hue:s,saturation:i,lightness:o,alpha:a,mode:l,setHue:c,setSaturation:u,setLightness:f}=wi();let h,p,y;e[3]!==a||e[4]!==s||e[5]!==o||e[6]!==i?(h=fe.hsl(s,i,o,a/100),p=$.useState,y=h.hex(),e[3]=a,e[4]=s,e[5]=o,e[6]=i,e[7]=h,e[8]=p,e[9]=y):(h=e[7],p=e[8],y=e[9]);const[m,w]=p(y);let g,E;e[10]!==h||e[11]!==l?(g=()=>{l==="hex"&&w(h.hex())},E=[h,l],e[10]=h,e[11]=l,e[12]=g,e[13]=E):(g=e[12],E=e[13]),$.useEffect(g,E);let v;e[14]!==c||e[15]!==f||e[16]!==u?(v=k=>{w(k);try{const T=fe(k).hsl();c(T.hue()),u(T.saturationl()),f(T.lightness())}catch{}},e[14]=c,e[15]=f,e[16]=u,e[17]=v):v=e[17];const S=v;let _;e[18]!==h||e[19]!==l||e[20]!==c||e[21]!==f||e[22]!==u?(_=(k,N)=>{e:switch(l){case"rgb":{const T=h.rgb().array();T[k]=N;const A=fe.rgb(T).hsl();c(A.hue()),u(A.saturationl()),f(A.lightness());break e}case"hsl":{const T=h.hsl().array();T[k]=N,c(T[0]),u(T[1]),f(T[2])}}},e[18]=h,e[19]=l,e[20]=c,e[21]=f,e[22]=u,e[23]=_):_=e[23];const O=_;let b;e[24]!==n||e[25]!==O?(b=k=>k.map((N,T)=>d.jsx(xn,{className:U("h-8 rounded-r-none bg-secondary px-2 text-xs shadow-none",T&&"rounded-l-none",n),type:"number",value:N,onChange:A=>O(T,Number(A.target.value))},T)),e[24]=n,e[25]=O,e[26]=b):b=e[26];const x=b;if(l==="hex"){let k;e[27]!==n?(k=U("-space-x-px relative flex w-full items-center rounded-md shadow-sm",n),e[27]=n,e[28]=k):k=e[28];let N;e[29]!==S?(N=C=>S(C.target.value),e[29]=S,e[30]=N):N=e[30];let T;e[31]!==m||e[32]!==N?(T=d.jsx(xn,{className:"h-8 rounded-r-none bg-secondary px-2 text-xs shadow-none",type:"text",value:m,onChange:N}),e[31]=m,e[32]=N,e[33]=T):T=e[33];let A;return e[34]!==r||e[35]!==T||e[36]!==k?(A=d.jsx("div",{className:k,...r,children:T}),e[34]=r,e[35]=T,e[36]=k,e[37]=A):A=e[37],A}if(l==="rgb"){let k,N,T;if(e[38]!==n||e[39]!==h||e[40]!==r||e[41]!==x){const C=h.rgb().array().map(sm);e[45]!==n?(N=U("-space-x-px flex items-center rounded-md shadow-sm",n),e[45]=n,e[46]=N):N=e[46],T=r,k=x(C),e[38]=n,e[39]=h,e[40]=r,e[41]=x,e[42]=k,e[43]=N,e[44]=T}else k=e[42],N=e[43],T=e[44];let A;return e[47]!==k||e[48]!==N||e[49]!==T?(A=d.jsx("div",{className:N,...T,children:k}),e[47]=k,e[48]=N,e[49]=T,e[50]=A):A=e[50],A}if(l==="hsl"){let k,N,T;if(e[51]!==n||e[52]!==h||e[53]!==r||e[54]!==x){const C=h.hsl().array().map(im);e[58]!==n?(N=U("-space-x-px flex items-center rounded-md shadow-sm",n),e[58]=n,e[59]=N):N=e[59],T=r,k=x(C),e[51]=n,e[52]=h,e[53]=r,e[54]=x,e[55]=k,e[56]=N,e[57]=T}else k=e[55],N=e[56],T=e[57];let A;return e[60]!==k||e[61]!==N||e[62]!==T?(A=d.jsx("div",{className:N,...T,children:k}),e[60]=k,e[61]=N,e[62]=T,e[63]=A):A=e[63],A}if(l==="css"){let k,N,T,A,C,R,I;if(e[64]!==n||e[65]!==h||e[66]!==r){const D=h.rgb().array().map(om);e[74]!==n?(A=U("w-full rounded-md shadow-sm",n),e[74]=n,e[75]=A):A=e[75],C=r,k=xn,I="h-8 w-full bg-secondary px-2 text-xs shadow-none",N=!0,T="text",R=D.join(", "),e[64]=n,e[65]=h,e[66]=r,e[67]=k,e[68]=N,e[69]=T,e[70]=A,e[71]=C,e[72]=R,e[73]=I}else k=e[67],N=e[68],T=e[69],A=e[70],C=e[71],R=e[72],I=e[73];const P=`rgba(${R}, ${a}%)`;let L;e[76]!==k||e[77]!==N||e[78]!==T||e[79]!==P||e[80]!==I?(L=d.jsx(k,{className:I,readOnly:N,type:T,value:P}),e[76]=k,e[77]=N,e[78]=T,e[79]=P,e[80]=I,e[81]=L):L=e[81];let B;return e[82]!==A||e[83]!==C||e[84]!==L?(B=d.jsx("div",{className:A,...C,children:L}),e[82]=A,e[83]=C,e[84]=L,e[85]=B):B=e[85],B}return null};function sm(t){return Math.round(t)}function im(t){return Math.round(t)}function om(t){return Math.round(t)}function Fc(t){const e=z.c(16),{defaultColor:n,onChangeComplete:r}=t;let s;e[0]!==n?(s=fe(n).hex(),e[0]=n,e[1]=s):s=e[1];const[i,o]=$.useState(s);let a,l;e[2]!==i||e[3]!==r?(l=Tc.debounce(w=>{const g=fe(w).hex();g!==i&&(o(g),r(g))},300),e[2]=i,e[3]=r,e[4]=l):l=e[4],a=l;const c=a;let u;e[5]!==i?(u=d.jsx(Qp,{asChild:!0,children:d.jsx(Ve,{variant:"secondary",className:"w-full",children:d.jsx("div",{className:"h-full w-full rounded-md",style:{background:i}})})}),e[5]=i,e[6]=u):u=e[6];let f;e[7]===Symbol.for("react.memo_cache_sentinel")?(f=d.jsx(Dc,{className:"aspect-square"}),e[7]=f):f=e[7];let h;e[8]===Symbol.for("react.memo_cache_sentinel")?(h=d.jsx("div",{className:"flex items-center gap-4",children:d.jsx(tm,{})}),e[8]=h):h=e[8];let p;e[9]===Symbol.for("react.memo_cache_sentinel")?(p=d.jsxs("div",{className:"flex items-baseline gap-2",children:[d.jsx(nm,{}),d.jsx(rm,{})]}),e[9]=p):p=e[9];let y;e[10]!==i||e[11]!==c?(y=d.jsx(Jp,{asChild:!0,children:d.jsxs(em,{className:"rounded-md border w-full shadow-md",defaultValue:i,onChange:c,children:[f,h,p]})}),e[10]=i,e[11]=c,e[12]=y):y=e[12];let m;return e[13]!==u||e[14]!==y?(m=d.jsxs(Xp,{children:[u,y]}),e[13]=u,e[14]=y,e[15]=m):m=e[15],m}function Je(t){const e=z.c(8);let n,r;e[0]!==t?({className:n,...r}=t,e[0]=t,e[1]=n,e[2]=r):(n=e[1],r=e[2]);let s;e[3]!==n?(s=U("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",n),e[3]=n,e[4]=s):s=e[4];let i;return e[5]!==r||e[6]!==s?(i=d.jsx(Mh,{"data-slot":"label",className:s,...r}),e[5]=r,e[6]=s,e[7]=i):i=e[7],i}function ks(t){const e=z.c(9);let n,r;e[0]!==t?({className:n,...r}=t,e[0]=t,e[1]=n,e[2]=r):(n=e[1],r=e[2]);let s;e[3]!==n?(s=U("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",n),e[3]=n,e[4]=s):s=e[4];let i;e[5]===Symbol.for("react.memo_cache_sentinel")?(i=d.jsx(Rh,{"data-slot":"switch-thumb",className:U("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")}),e[5]=i):i=e[5];let o;return e[6]!==r||e[7]!==s?(o=d.jsx(Ph,{"data-slot":"switch",className:s,...r,children:i}),e[6]=r,e[7]=s,e[8]=o):o=e[8],o}const rs=aa()(Qh((t,e)=>({theme:"dark",saveInterval:300,debugText:!1,gridColor:"#92a3bb",SSAOEnabled:!0,DOFEnabled:!0,controlDamping:!1,angleSnap:11.25,distanceSnap:1/16,setTheme:n=>t({theme:n}),setSaveInterval:n=>t({saveInterval:n}),setDebugText:n=>t({debugText:n}),setGridColor:n=>t({gridColor:n}),setSSAOEnabled:n=>t({SSAOEnabled:n}),setDOFEnabled:n=>t({DOFEnabled:n}),setControlDamping:n=>t({controlDamping:n}),setAngleSnap:n=>t({angleSnap:n}),setDistanceSnap:n=>t({distanceSnap:n}),getComplementaryGridColor:()=>Pc(e().gridColor,.5)}),{version:0,name:"preferences",storage:Jh(()=>localStorage)})),cr=(()=>{if(typeof self>"u")return!1;if("top"in self&&self!==top)try{top.window.document._=0}catch{return!1}return"showOpenFilePicker"in self})(),am=cr?Promise.resolve().then(function(){return dm}):Promise.resolve().then(function(){return bm});async function da(...t){return(await am).default(...t)}cr?Promise.resolve().then(function(){return pm}):Promise.resolve().then(function(){return vm});const lm=cr?Promise.resolve().then(function(){return gm}):Promise.resolve().then(function(){return _m});async function cm(...t){return(await lm).default(...t)}const um=async t=>{const e=await t.getFile();return e.handle=t,e};var fm=async(t=[{}])=>{Array.isArray(t)||(t=[t]);const e=[];t.forEach((s,i)=>{e[i]={description:s.description||"Files",accept:{}},s.mimeTypes?s.mimeTypes.map(o=>{e[i].accept[o]=s.extensions||[]}):e[i].accept["*/*"]=s.extensions||[]});const n=await window.showOpenFilePicker({id:t[0].id,startIn:t[0].startIn,types:e,multiple:t[0].multiple||!1,excludeAcceptAllOption:t[0].excludeAcceptAllOption||!1}),r=await Promise.all(n.map(um));return t[0].multiple?r:r[0]},dm={__proto__:null,default:fm};function Vs(t){function e(n){if(Object(n)!==n)return Promise.reject(new TypeError(n+" is not an object."));var r=n.done;return Promise.resolve(n.value).then(function(s){return{value:s,done:r}})}return Vs=function(n){this.s=n,this.n=n.next},Vs.prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(n){var r=this.s.return;return r===void 0?Promise.resolve({value:n,done:!0}):e(r.apply(this.s,arguments))},throw:function(n){var r=this.s.return;return r===void 0?Promise.reject(n):e(r.apply(this.s,arguments))}},new Vs(t)}const Bc=async(t,e,n=t.name,r)=>{const s=[],i=[];var o,a=!1,l=!1;try{for(var c,u=(function(f){var h,p,y,m=2;for(typeof Symbol<"u"&&(p=Symbol.asyncIterator,y=Symbol.iterator);m--;){if(p&&(h=f[p])!=null)return h.call(f);if(y&&(h=f[y])!=null)return new Vs(h.call(f));p="@@asyncIterator",y="@@iterator"}throw new TypeError("Object is not async iterable")})(t.values());a=!(c=await u.next()).done;a=!1){const f=c.value,h=`${n}/${f.name}`;f.kind==="file"?i.push(f.getFile().then(p=>(p.directoryHandle=t,p.handle=f,Object.defineProperty(p,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>h})))):f.kind!=="directory"||!e||r&&r(f)||s.push(Bc(f,e,h,r))}}catch(f){l=!0,o=f}finally{try{a&&u.return!=null&&await u.return()}finally{if(l)throw o}}return[...(await Promise.all(s)).flat(),...await Promise.all(i)]};var hm=async(t={})=>{t.recursive=t.recursive||!1,t.mode=t.mode||"read";const e=await window.showDirectoryPicker({id:t.id,startIn:t.startIn,mode:t.mode});return(await(await e.values()).next()).done?[e]:Bc(e,t.recursive,void 0,t.skipDirectory)},pm={__proto__:null,default:hm},mm=async(t,e=[{}],n=null,r=!1,s=null)=>{Array.isArray(e)||(e=[e]),e[0].fileName=e[0].fileName||"Untitled";const i=[];let o=null;if(t instanceof Blob&&t.type?o=t.type:t.headers&&t.headers.get("content-type")&&(o=t.headers.get("content-type")),e.forEach((c,u)=>{i[u]={description:c.description||"Files",accept:{}},c.mimeTypes?(u===0&&o&&c.mimeTypes.push(o),c.mimeTypes.map(f=>{i[u].accept[f]=c.extensions||[]})):o?i[u].accept[o]=c.extensions||[]:i[u].accept["*/*"]=c.extensions||[]}),n)try{await n.getFile()}catch(c){if(n=null,r)throw c}const a=n||await window.showSaveFilePicker({suggestedName:e[0].fileName,id:e[0].id,startIn:e[0].startIn,types:i,excludeAcceptAllOption:e[0].excludeAcceptAllOption||!1});!n&&s&&s(a);const l=await a.createWritable();return"stream"in t?(await t.stream().pipeTo(l),a):"body"in t?(await t.body.pipeTo(l),a):(await l.write(await t),await l.close(),a)},gm={__proto__:null,default:mm},ym=async(t=[{}])=>(Array.isArray(t)||(t=[t]),new Promise((e,n)=>{const r=document.createElement("input");r.type="file";const s=[...t.map(i=>i.mimeTypes||[]),...t.map(i=>i.extensions||[])].join();r.multiple=t[0].multiple||!1,r.accept=s||"",r.style.display="none",document.body.append(r),r.addEventListener("cancel",()=>{r.remove(),n(new DOMException("The user aborted a request.","AbortError"))}),r.addEventListener("change",()=>{r.remove(),e(r.multiple?Array.from(r.files):r.files[0])}),"showPicker"in HTMLInputElement.prototype?r.showPicker():r.click()})),bm={__proto__:null,default:ym},wm=async(t=[{}])=>(Array.isArray(t)||(t=[t]),t[0].recursive=t[0].recursive||!1,new Promise((e,n)=>{const r=document.createElement("input");r.type="file",r.webkitdirectory=!0,r.style.display="none",document.body.append(r),r.addEventListener("cancel",()=>{r.remove(),n(new DOMException("The user aborted a request.","AbortError"))}),r.addEventListener("change",()=>{r.remove();let s=Array.from(r.files);t[0].recursive?t[0].recursive&&t[0].skipDirectory&&(s=s.filter(i=>i.webkitRelativePath.split("/").every(o=>!t[0].skipDirectory({name:o,kind:"directory"})))):s=s.filter(i=>i.webkitRelativePath.split("/").length===2),e(s)}),"showPicker"in HTMLInputElement.prototype?r.showPicker():r.click()})),vm={__proto__:null,default:wm},xm=async(t,e={})=>{Array.isArray(e)&&(e=e[0]);const n=document.createElement("a");let r=t;"body"in t&&(r=await(async function(o,a){const l=o.getReader(),c=new ReadableStream({start:h=>(async function p(){return l.read().then(({done:y,value:m})=>{if(!y)return h.enqueue(m),p();h.close()})})()}),u=new Response(c),f=await u.blob();return l.releaseLock(),new Blob([f],{type:a})})(t.body,t.headers.get("content-type"))),n.download=e.fileName||"Untitled",n.href=URL.createObjectURL(await r);const s=()=>{typeof i=="function"&&i()},i=e.legacySetup&&e.legacySetup(s,()=>i(),n);return n.addEventListener("click",()=>{setTimeout(()=>URL.revokeObjectURL(n.href),3e4),s()}),n.click(),null},_m={__proto__:null,default:xm},Se=Uint8Array,Ke=Uint16Array,ha=Int32Array,vi=new Se([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),xi=new Se([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Io=new Se([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Uc=function(t,e){for(var n=new Ke(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var s=new ha(n[30]),r=1;r<30;++r)for(var i=n[r];i<n[r+1];++i)s[i]=i-n[r]<<5|r;return{b:n,r:s}},Vc=Uc(vi,2),Zc=Vc.b,Mo=Vc.r;Zc[28]=258,Mo[258]=28;var Wc=Uc(xi,0),Sm=Wc.b,sl=Wc.r,Ro=new Ke(32768);for(var ge=0;ge<32768;++ge){var Lt=(ge&43690)>>1|(ge&21845)<<1;Lt=(Lt&52428)>>2|(Lt&13107)<<2,Lt=(Lt&61680)>>4|(Lt&3855)<<4,Ro[ge]=((Lt&65280)>>8|(Lt&255)<<8)>>1}var wt=(function(t,e,n){for(var r=t.length,s=0,i=new Ke(e);s<r;++s)t[s]&&++i[t[s]-1];var o=new Ke(e);for(s=1;s<e;++s)o[s]=o[s-1]+i[s-1]<<1;var a;if(n){a=new Ke(1<<e);var l=15-e;for(s=0;s<r;++s)if(t[s])for(var c=s<<4|t[s],u=e-t[s],f=o[t[s]-1]++<<u,h=f|(1<<u)-1;f<=h;++f)a[Ro[f]>>l]=c}else for(a=new Ke(r),s=0;s<r;++s)t[s]&&(a[s]=Ro[o[t[s]-1]++]>>15-t[s]);return a}),en=new Se(288);for(var ge=0;ge<144;++ge)en[ge]=8;for(var ge=144;ge<256;++ge)en[ge]=9;for(var ge=256;ge<280;++ge)en[ge]=7;for(var ge=280;ge<288;++ge)en[ge]=8;var Gr=new Se(32);for(var ge=0;ge<32;++ge)Gr[ge]=5;var km=wt(en,9,0),Em=wt(en,9,1),Tm=wt(Gr,5,0),Nm=wt(Gr,5,1),no=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},ct=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},ro=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},pa=function(t){return(t+7)/8|0},ss=function(t,e,n){return(e==null||e<0)&&(e=0),(n==null||n>t.length)&&(n=t.length),new Se(t.subarray(e,n))},Am=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Fe=function(t,e,n){var r=new Error(e||Am[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,Fe),!n)throw r;return r},Om=function(t,e,n,r){var s=t.length,i=r?r.length:0;if(!s||e.f&&!e.l)return n||new Se(0);var o=!n,a=o||e.i!=2,l=e.i;o&&(n=new Se(s*3));var c=function(Xe){var Qe=n.length;if(Xe>Qe){var He=new Se(Math.max(Qe*2,Xe));He.set(n),n=He}},u=e.f||0,f=e.p||0,h=e.b||0,p=e.l,y=e.d,m=e.m,w=e.n,g=s*8;do{if(!p){u=ct(t,f,1);var E=ct(t,f+1,3);if(f+=3,E)if(E==1)p=Em,y=Nm,m=9,w=5;else if(E==2){var O=ct(t,f,31)+257,b=ct(t,f+10,15)+4,x=O+ct(t,f+5,31)+1;f+=14;for(var k=new Se(x),N=new Se(19),T=0;T<b;++T)N[Io[T]]=ct(t,f+T*3,7);f+=b*3;for(var A=no(N),C=(1<<A)-1,R=wt(N,A,1),T=0;T<x;){var I=R[ct(t,f,C)];f+=I&15;var v=I>>4;if(v<16)k[T++]=v;else{var P=0,L=0;for(v==16?(L=3+ct(t,f,3),f+=2,P=k[T-1]):v==17?(L=3+ct(t,f,7),f+=3):v==18&&(L=11+ct(t,f,127),f+=7);L--;)k[T++]=P}}var B=k.subarray(0,O),D=k.subarray(O);m=no(B),w=no(D),p=wt(B,m,1),y=wt(D,w,1)}else Fe(1);else{var v=pa(f)+4,S=t[v-4]|t[v-3]<<8,_=v+S;if(_>s){l&&Fe(0);break}a&&c(h+S),n.set(t.subarray(v,_),h),e.b=h+=S,e.p=f=_*8,e.f=u;continue}if(f>g){l&&Fe(0);break}}a&&c(h+131072);for(var Y=(1<<m)-1,ee=(1<<w)-1,ne=f;;ne=f){var P=p[ro(t,f)&Y],K=P>>4;if(f+=P&15,f>g){l&&Fe(0);break}if(P||Fe(2),K<256)n[h++]=K;else if(K==256){ne=f,p=null;break}else{var oe=K-254;if(K>264){var T=K-257,X=vi[T];oe=ct(t,f,(1<<X)-1)+Zc[T],f+=X}var le=y[ro(t,f)&ee],Ge=le>>4;le||Fe(3),f+=le&15;var D=Sm[Ge];if(Ge>3){var X=xi[Ge];D+=ro(t,f)&(1<<X)-1,f+=X}if(f>g){l&&Fe(0);break}a&&c(h+131072);var at=h+oe;if(h<D){var _t=i-D,St=Math.min(D,at);for(_t+h<0&&Fe(3);h<St;++h)n[h]=r[_t+h]}for(;h<at;++h)n[h]=n[h-D]}}e.l=p,e.p=ne,e.b=h,e.f=u,p&&(u=1,e.m=m,e.d=y,e.n=w)}while(!u);return h!=n.length&&o?ss(n,0,h):n.subarray(0,h)},Et=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},Ir=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},so=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var s=n.length,i=n.slice();if(!s)return{t:Gc,l:0};if(s==1){var o=new Se(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(_,O){return _.f-O.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,u=1,f=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};u!=s-1;)a=n[n[c].f<n[f].f?c++:f++],l=n[c!=u&&n[c].f<n[f].f?c++:f++],n[u++]={s:-1,f:a.f+l.f,l:a,r:l};for(var h=i[0].s,r=1;r<s;++r)i[r].s>h&&(h=i[r].s);var p=new Ke(h+1),y=Po(n[u-1],p,0);if(y>e){var r=0,m=0,w=y-e,g=1<<w;for(i.sort(function(O,b){return p[b.s]-p[O.s]||O.f-b.f});r<s;++r){var E=i[r].s;if(p[E]>e)m+=g-(1<<y-p[E]),p[E]=e;else break}for(m>>=w;m>0;){var v=i[r].s;p[v]<e?m-=1<<e-p[v]++-1:++r}for(;r>=0&&m;--r){var S=i[r].s;p[S]==e&&(--p[S],++m)}y=e}return{t:new Se(p),l:y}},Po=function(t,e,n){return t.s==-1?Math.max(Po(t.l,e,n+1),Po(t.r,e,n+1)):e[t.s]=n},il=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Ke(++e),r=0,s=t[0],i=1,o=function(l){n[r++]=l},a=1;a<=e;++a)if(t[a]==s&&a!=e)++i;else{if(!s&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(s),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(s);i=1,s=t[a]}return{c:n.subarray(0,r),n:e}},Mr=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},qc=function(t,e,n){var r=n.length,s=pa(e+2);t[s]=r&255,t[s+1]=r>>8,t[s+2]=t[s]^255,t[s+3]=t[s+1]^255;for(var i=0;i<r;++i)t[s+i+4]=n[i];return(s+4+r)*8},ol=function(t,e,n,r,s,i,o,a,l,c,u){Et(e,u++,n),++s[256];for(var f=so(s,15),h=f.t,p=f.l,y=so(i,15),m=y.t,w=y.l,g=il(h),E=g.c,v=g.n,S=il(m),_=S.c,O=S.n,b=new Ke(19),x=0;x<E.length;++x)++b[E[x]&31];for(var x=0;x<_.length;++x)++b[_[x]&31];for(var k=so(b,7),N=k.t,T=k.l,A=19;A>4&&!N[Io[A-1]];--A);var C=c+5<<3,R=Mr(s,en)+Mr(i,Gr)+o,I=Mr(s,h)+Mr(i,m)+o+14+3*A+Mr(b,N)+2*b[16]+3*b[17]+7*b[18];if(l>=0&&C<=R&&C<=I)return qc(e,u,t.subarray(l,l+c));var P,L,B,D;if(Et(e,u,1+(I<R)),u+=2,I<R){P=wt(h,p,0),L=h,B=wt(m,w,0),D=m;var Y=wt(N,T,0);Et(e,u,v-257),Et(e,u+5,O-1),Et(e,u+10,A-4),u+=14;for(var x=0;x<A;++x)Et(e,u+3*x,N[Io[x]]);u+=3*A;for(var ee=[E,_],ne=0;ne<2;++ne)for(var K=ee[ne],x=0;x<K.length;++x){var oe=K[x]&31;Et(e,u,Y[oe]),u+=N[oe],oe>15&&(Et(e,u,K[x]>>5&127),u+=K[x]>>12)}}else P=km,L=en,B=Tm,D=Gr;for(var x=0;x<a;++x){var X=r[x];if(X>255){var oe=X>>18&31;Ir(e,u,P[oe+257]),u+=L[oe+257],oe>7&&(Et(e,u,X>>23&31),u+=vi[oe]);var le=X&31;Ir(e,u,B[le]),u+=D[le],le>3&&(Ir(e,u,X>>5&8191),u+=xi[le])}else Ir(e,u,P[X]),u+=L[X]}return Ir(e,u,P[256]),u+L[256]},Cm=new ha([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Gc=new Se(0),jm=function(t,e,n,r,s,i){var o=i.z||t.length,a=new Se(r+o+5*(1+Math.ceil(o/7e3))+s),l=a.subarray(r,a.length-s),c=i.l,u=(i.r||0)&7;if(e){u&&(l[0]=i.r>>3);for(var f=Cm[e-1],h=f>>13,p=f&8191,y=(1<<n)-1,m=i.p||new Ke(32768),w=i.h||new Ke(y+1),g=Math.ceil(n/3),E=2*g,v=function(zt){return(t[zt]^t[zt+1]<<g^t[zt+2]<<E)&y},S=new ha(25e3),_=new Ke(288),O=new Ke(32),b=0,x=0,k=i.i||0,N=0,T=i.w||0,A=0;k+2<o;++k){var C=v(k),R=k&32767,I=w[C];if(m[R]=I,w[C]=R,T<=k){var P=o-k;if((b>7e3||N>24576)&&(P>423||!c)){u=ol(t,l,0,S,_,O,x,N,A,k-A,u),N=b=x=0,A=k;for(var L=0;L<286;++L)_[L]=0;for(var L=0;L<30;++L)O[L]=0}var B=2,D=0,Y=p,ee=R-I&32767;if(P>2&&C==v(k-ee))for(var ne=Math.min(h,P)-1,K=Math.min(32767,k),oe=Math.min(258,P);ee<=K&&--Y&&R!=I;){if(t[k+B]==t[k+B-ee]){for(var X=0;X<oe&&t[k+X]==t[k+X-ee];++X);if(X>B){if(B=X,D=ee,X>ne)break;for(var le=Math.min(ee,X-2),Ge=0,L=0;L<le;++L){var at=k-ee+L&32767,_t=m[at],St=at-_t&32767;St>Ge&&(Ge=St,I=at)}}}R=I,I=m[R],ee+=R-I&32767}if(D){S[N++]=268435456|Mo[B]<<18|sl[D];var Xe=Mo[B]&31,Qe=sl[D]&31;x+=vi[Xe]+xi[Qe],++_[257+Xe],++O[Qe],T=k+B,++b}else S[N++]=t[k],++_[t[k]]}}for(k=Math.max(k,T);k<o;++k)S[N++]=t[k],++_[t[k]];u=ol(t,l,c,S,_,O,x,N,A,k-A,u),c||(i.r=u&7|l[u/8|0]<<3,u-=7,i.h=w,i.p=m,i.i=k,i.w=T)}else{for(var k=i.w||0;k<o+c;k+=65535){var He=k+65535;He>=o&&(l[u/8|0]=c,He=o),u=qc(l,u+1,t.subarray(k,He))}i.i=o}return ss(a,0,r+pa(u)+s)},Im=(function(){for(var t=new Int32Array(256),e=0;e<256;++e){for(var n=e,r=9;--r;)n=(n&1&&-306674912)^n>>>1;t[e]=n}return t})(),Mm=function(){var t=-1;return{p:function(e){for(var n=t,r=0;r<e.length;++r)n=Im[n&255^e[r]]^n>>>8;t=n},d:function(){return~t}}},Rm=function(t,e,n,r,s){if(!s&&(s={l:1},e.dictionary)){var i=e.dictionary.subarray(-32768),o=new Se(i.length+t.length);o.set(i),o.set(t,i.length),t=o,s.w=i.length}return jm(t,e.level==null?6:e.level,e.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,s)},Hc=function(t,e){var n={};for(var r in t)n[r]=t[r];for(var r in e)n[r]=e[r];return n},gt=function(t,e){return t[e]|t[e+1]<<8},ft=function(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0},io=function(t,e){return ft(t,e)+ft(t,e+4)*4294967296},Pe=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8};function Pm(t,e){return Rm(t,e||{},0,0)}function $m(t,e){return Om(t,{i:2},e&&e.out,e&&e.dictionary)}var Kc=function(t,e,n,r){for(var s in t){var i=t[s],o=e+s,a=r;Array.isArray(i)&&(a=Hc(r,i[1]),i=i[0]),i instanceof Se?n[o]=[i,a]:(n[o+="/"]=[new Se(0),a],Kc(i,o,n,r))}},al=typeof TextEncoder<"u"&&new TextEncoder,$o=typeof TextDecoder<"u"&&new TextDecoder,zm=0;try{$o.decode(Gc,{stream:!0}),zm=1}catch{}var Lm=function(t){for(var e="",n=0;;){var r=t[n++],s=(r>127)+(r>223)+(r>239);if(n+s>t.length)return{s:e,r:ss(t,n-1)};s?s==3?(r=((r&15)<<18|(t[n++]&63)<<12|(t[n++]&63)<<6|t[n++]&63)-65536,e+=String.fromCharCode(55296|r>>10,56320|r&1023)):s&1?e+=String.fromCharCode((r&31)<<6|t[n++]&63):e+=String.fromCharCode((r&15)<<12|(t[n++]&63)<<6|t[n++]&63):e+=String.fromCharCode(r)}};function Hr(t,e){var n;if(al)return al.encode(t);for(var r=t.length,s=new Se(t.length+(t.length>>1)),i=0,o=function(c){s[i++]=c},n=0;n<r;++n){if(i+5>s.length){var a=new Se(i+8+(r-n<<1));a.set(s),s=a}var l=t.charCodeAt(n);l<128||e?o(l):l<2048?(o(192|l>>6),o(128|l&63)):l>55295&&l<57344?(l=65536+(l&1047552)|t.charCodeAt(++n)&1023,o(240|l>>18),o(128|l>>12&63),o(128|l>>6&63),o(128|l&63)):(o(224|l>>12),o(128|l>>6&63),o(128|l&63))}return ss(s,0,i)}function zo(t,e){if(e){for(var n="",r=0;r<t.length;r+=16384)n+=String.fromCharCode.apply(null,t.subarray(r,r+16384));return n}else{if($o)return $o.decode(t);var s=Lm(t),i=s.s,n=s.r;return n.length&&Fe(8),i}}var Dm=function(t,e){return e+30+gt(t,e+26)+gt(t,e+28)},Fm=function(t,e,n){var r=gt(t,e+28),s=zo(t.subarray(e+46,e+46+r),!(gt(t,e+8)&2048)),i=e+46+r,o=ft(t,e+20),a=n&&o==4294967295?Bm(t,i):[o,ft(t,e+24),ft(t,e+42)],l=a[0],c=a[1],u=a[2];return[gt(t,e+10),l,c,s,i+gt(t,e+30)+gt(t,e+32),u]},Bm=function(t,e){for(;gt(t,e)!=1;e+=4+gt(t,e+2));return[io(t,e+12),io(t,e+4),io(t,e+20)]},Lo=function(t){var e=0;if(t)for(var n in t){var r=t[n].length;r>65535&&Fe(9),e+=r+4}return e},ll=function(t,e,n,r,s,i,o,a){var l=r.length,c=n.extra,u=a&&a.length,f=Lo(c);Pe(t,e,o!=null?33639248:67324752),e+=4,o!=null&&(t[e++]=20,t[e++]=n.os),t[e]=20,e+=2,t[e++]=n.flag<<1|(i<0&&8),t[e++]=s&&8,t[e++]=n.compression&255,t[e++]=n.compression>>8;var h=new Date(n.mtime==null?Date.now():n.mtime),p=h.getFullYear()-1980;if((p<0||p>119)&&Fe(10),Pe(t,e,p<<25|h.getMonth()+1<<21|h.getDate()<<16|h.getHours()<<11|h.getMinutes()<<5|h.getSeconds()>>1),e+=4,i!=-1&&(Pe(t,e,n.crc),Pe(t,e+4,i<0?-i-2:i),Pe(t,e+8,n.size)),Pe(t,e+12,l),Pe(t,e+14,f),e+=16,o!=null&&(Pe(t,e,u),Pe(t,e+6,n.attrs),Pe(t,e+10,o),e+=14),t.set(r,e),e+=l,f)for(var y in c){var m=c[y],w=m.length;Pe(t,e,+y),Pe(t,e+2,w),t.set(m,e+4),e+=4+w}return u&&(t.set(a,e),e+=u),e},Um=function(t,e,n,r,s){Pe(t,e,101010256),Pe(t,e+8,n),Pe(t,e+10,n),Pe(t,e+12,r),Pe(t,e+16,s)};function Vm(t,e){e||(e={});var n={},r=[];Kc(t,"",n,e);var s=0,i=0;for(var o in n){var a=n[o],l=a[0],c=a[1],u=c.level==0?0:8,f=Hr(o),h=f.length,p=c.comment,y=p&&Hr(p),m=y&&y.length,w=Lo(c.extra);h>65535&&Fe(11);var g=u?Pm(l,c):l,E=g.length,v=Mm();v.p(l),r.push(Hc(c,{size:l.length,crc:v.d(),c:g,f,m:y,u:h!=o.length||y&&p.length!=m,o:s,compression:u})),s+=30+h+w+E,i+=76+2*(h+w)+(m||0)+E}for(var S=new Se(i+22),_=s,O=i-s,b=0;b<r.length;++b){var f=r[b];ll(S,f.o,f,f.f,f.u,f.c.length);var x=30+f.f.length+Lo(f.extra);S.set(f.c,f.o+x),ll(S,s,f,f.f,f.u,f.c.length,f.o,f.m),s+=16+x+(f.m?f.m.length:0)}return Um(S,s,r.length,O,_),S}function Zm(t,e){for(var n={},r=t.length-22;ft(t,r)!=101010256;--r)(!r||t.length-r>65558)&&Fe(13);var s=gt(t,r+8);if(!s)return{};var i=ft(t,r+16),o=i==4294967295||s==65535;if(o){var a=ft(t,r-12);o=ft(t,a)==101075792,o&&(s=ft(t,a+32),i=ft(t,a+48))}for(var l=0;l<s;++l){var c=Fm(t,i,o),u=c[0],f=c[1],h=c[2],p=c[3],y=c[4],m=c[5],w=Dm(t,m);i=y,u?u==8?n[p]=$m(t.subarray(w,w+f),{out:new Se(h)}):Fe(14,"unknown compression type "+u):n[p]=ss(t,w,w+f)}return n}var Yc=class{_listeners={};addEventListener(t,e){const n=this._listeners;return n[t]===void 0&&(n[t]=[]),n[t].indexOf(e)===-1&&n[t].push(e),this}removeEventListener(t,e){const n=this._listeners[t];if(n!==void 0){const r=n.indexOf(e);r!==-1&&n.splice(r,1)}return this}dispatchEvent(t){const e=this._listeners[t.type];if(e!==void 0){const n=e.slice(0);for(let r=0,s=n.length;r<s;r++)n[r].call(this,t)}return this}dispose(){for(const t in this._listeners)delete this._listeners[t]}},tr=class{_disposed=!1;_name;_parent;_child;_attributes;constructor(t,e,n,r={}){if(this._name=t,this._parent=e,this._child=n,this._attributes=r,!e.isOnGraph(n))throw new Error("Cannot connect disconnected graphs.")}getName(){return this._name}getParent(){return this._parent}getChild(){return this._child}setChild(t){return this._child=t,this}getAttributes(){return this._attributes}dispose(){this._disposed||(this._parent._destroyRef(this),this._disposed=!0)}isDisposed(){return this._disposed}},Wm=class extends Yc{_emptySet=new Set;_edges=new Set;_parentEdges=new Map;_childEdges=new Map;listEdges(){return Array.from(this._edges)}listParentEdges(t){return Array.from(this._childEdges.get(t)||this._emptySet)}listParents(t){const e=new Set;for(const n of this.listParentEdges(t))e.add(n.getParent());return Array.from(e)}listChildEdges(t){return Array.from(this._parentEdges.get(t)||this._emptySet)}listChildren(t){const e=new Set;for(const n of this.listChildEdges(t))e.add(n.getChild());return Array.from(e)}disconnectParents(t,e){for(const n of this.listParentEdges(t))(!e||e(n.getParent()))&&n.dispose();return this}_createEdge(t,e,n,r){const s=new tr(t,e,n,r);this._edges.add(s);const i=s.getParent();this._parentEdges.has(i)||this._parentEdges.set(i,new Set),this._parentEdges.get(i).add(s);const o=s.getChild();return this._childEdges.has(o)||this._childEdges.set(o,new Set),this._childEdges.get(o).add(s),s}_destroyEdge(t){return this._edges.delete(t),this._parentEdges.get(t.getParent()).delete(t),this._childEdges.get(t.getChild()).delete(t),this}},Ht=class{list=[];constructor(t){if(t)for(const e of t)this.list.push(e)}add(t){this.list.push(t)}remove(t){const e=this.list.indexOf(t);e>=0&&this.list.splice(e,1)}removeChild(t){const e=[];for(const n of this.list)n.getChild()===t&&e.push(n);for(const n of e)this.remove(n);return e}listRefsByChild(t){const e=[];for(const n of this.list)n.getChild()===t&&e.push(n);return e}values(){return this.list}},ye=class{set=new Set;map=new Map;constructor(t){if(t)for(const e of t)this.add(e)}add(t){const e=t.getChild();this.removeChild(e),this.set.add(t),this.map.set(e,t)}remove(t){this.set.delete(t),this.map.delete(t.getChild())}removeChild(t){const e=this.map.get(t)||null;return e&&this.remove(e),e}getRefByChild(t){return this.map.get(t)||null}values(){return Array.from(this.set)}},yt=class{map={};constructor(t){t&&Object.assign(this.map,t)}set(t,e){this.map[t]=e}delete(t){delete this.map[t]}get(t){return this.map[t]||null}keys(){return Object.keys(this.map)}values(){return Object.values(this.map)}};const ae=Symbol("attributes"),pn=Symbol("immutableKeys");var qm=class Xc extends Yc{_disposed=!1;graph;[ae];[pn];constructor(e){super(),this.graph=e,this[pn]=new Set,this[ae]=this._createAttributes()}getDefaults(){return{}}_createAttributes(){const e=this.getDefaults(),n={};for(const r in e){const s=e[r];if(s instanceof Xc){const i=this.graph._createEdge(r,this,s);this[pn].add(r),n[r]=i}else n[r]=s}return n}isOnGraph(e){return this.graph===e.graph}isDisposed(){return this._disposed}dispose(){this._disposed||(this.graph.listChildEdges(this).forEach(e=>e.dispose()),this.graph.disconnectParents(this),this._disposed=!0,this.dispatchEvent({type:"dispose"}))}detach(){return this.graph.disconnectParents(this),this}swap(e,n){for(const r in this[ae]){const s=this[ae][r];if(s instanceof tr){const i=s;i.getChild()===e&&this.setRef(r,n,i.getAttributes())}else if(s instanceof Ht)for(const i of s.listRefsByChild(e)){const o=i.getAttributes();this.removeRef(r,e),this.addRef(r,n,o)}else if(s instanceof ye){const i=s.getRefByChild(e);if(i){const o=i.getAttributes();this.removeRef(r,e),this.addRef(r,n,o)}}else if(s instanceof yt)for(const i of s.keys()){const o=s.get(i);o.getChild()===e&&this.setRefMap(r,i,n,o.getAttributes())}}return this}get(e){return this[ae][e]}set(e,n){return this[ae][e]=n,this.dispatchEvent({type:"change",attribute:e})}getRef(e){const n=this[ae][e];return n?n.getChild():null}setRef(e,n,r){if(this[pn].has(e))throw new Error(`Cannot overwrite immutable attribute, "${e}".`);const s=this[ae][e];if(s&&s.dispose(),!n)return this;const i=this.graph._createEdge(e,this,n,r);return this[ae][e]=i,this.dispatchEvent({type:"change",attribute:e})}listRefs(e){return this.assertRefList(e).values().map(n=>n.getChild())}addRef(e,n,r){const s=this.graph._createEdge(e,this,n,r);return this.assertRefList(e).add(s),this.dispatchEvent({type:"change",attribute:e})}removeRef(e,n){const r=this.assertRefList(e);if(r instanceof Ht)for(const s of r.listRefsByChild(n))s.dispose();else{const s=r.getRefByChild(n);s&&s.dispose()}return this}assertRefList(e){const n=this[ae][e];if(n instanceof Ht||n instanceof ye)return n;throw new Error(`Expected RefList or RefSet for attribute "${e}"`)}listRefMapKeys(e){return this.assertRefMap(e).keys()}listRefMapValues(e){return this.assertRefMap(e).values().map(n=>n.getChild())}getRefMap(e,n){const r=this.assertRefMap(e).get(n);return r?r.getChild():null}setRefMap(e,n,r,s){const i=this.assertRefMap(e),o=i.get(n);if(o&&o.dispose(),!r)return this;s=Object.assign(s||{},{key:n});const a=this.graph._createEdge(e,this,r,{...s,key:n});return i.set(n,a),this.dispatchEvent({type:"change",attribute:e,key:n})}assertRefMap(e){const n=this[ae][e];if(n instanceof yt)return n;throw new Error(`Expected RefMap for attribute "${e}"`)}dispatchEvent(e){return super.dispatchEvent({...e,target:this}),this.graph.dispatchEvent({...e,target:this,type:`node:${e.type}`}),this}_destroyRef(e){const n=e.getName();if(this[ae][n]===e)this[ae][n]=null,this[pn].has(n)&&e.getChild().dispose();else if(this[ae][n]instanceof Ht)this[ae][n].remove(e);else if(this[ae][n]instanceof ye)this[ae][n].remove(e);else if(this[ae][n]instanceof yt){const r=this[ae][n];for(const s of r.keys())r.get(s)===e&&r.delete(s)}else return;this.graph._destroyEdge(e),this.dispatchEvent({type:"change",attribute:n})}};const Qc="v4.3.0",si="@glb.bin";var Z;(function(t){t.ACCESSOR="Accessor",t.ANIMATION="Animation",t.ANIMATION_CHANNEL="AnimationChannel",t.ANIMATION_SAMPLER="AnimationSampler",t.BUFFER="Buffer",t.CAMERA="Camera",t.MATERIAL="Material",t.MESH="Mesh",t.PRIMITIVE="Primitive",t.PRIMITIVE_TARGET="PrimitiveTarget",t.NODE="Node",t.ROOT="Root",t.SCENE="Scene",t.SKIN="Skin",t.TEXTURE="Texture",t.TEXTURE_INFO="TextureInfo"})(Z||(Z={}));var ii;(function(t){t.INTERLEAVED="interleaved",t.SEPARATE="separate"})(ii||(ii={}));var Ye;(function(t){t.ARRAY_BUFFER="ARRAY_BUFFER",t.ELEMENT_ARRAY_BUFFER="ELEMENT_ARRAY_BUFFER",t.INVERSE_BIND_MATRICES="INVERSE_BIND_MATRICES",t.OTHER="OTHER",t.SPARSE="SPARSE"})(Ye||(Ye={}));var Do;(function(t){t[t.R=4096]="R",t[t.G=256]="G",t[t.B=16]="B",t[t.A=1]="A"})(Do||(Do={}));var Yt;(function(t){t.GLTF="GLTF",t.GLB="GLB"})(Yt||(Yt={}));const _i={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};class ie{static createBufferFromDataURI(e){if(typeof Buffer>"u"){const n=atob(e.split(",")[1]),r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}else{const n=e.split(",")[1],r=e.indexOf("base64")>=0;return Buffer.from(n,r?"base64":"utf8")}}static encodeText(e){return new TextEncoder().encode(e)}static decodeText(e){return new TextDecoder().decode(e)}static concat(e){let n=0;for(const i of e)n+=i.byteLength;const r=new Uint8Array(n);let s=0;for(const i of e)r.set(i,s),s+=i.byteLength;return r}static pad(e,n=0){const r=this.padNumber(e.byteLength);if(r===e.byteLength)return e;const s=new Uint8Array(r);if(s.set(e),n!==0)for(let i=e.byteLength;i<r;i++)s[i]=n;return s}static padNumber(e){return Math.ceil(e/4)*4}static equals(e,n){if(e===n)return!0;if(e.byteLength!==n.byteLength)return!1;let r=e.byteLength;for(;r--;)if(e[r]!==n[r])return!1;return!0}static toView(e,n=0,r=1/0){return new Uint8Array(e.buffer,e.byteOffset+n,Math.min(e.byteLength,r))}static assertView(e){if(e&&!ArrayBuffer.isView(e))throw new Error(`Method requires Uint8Array parameter; received "${typeof e}".`);return e}}class Gm{match(e){return e.length>=3&&e[0]===255&&e[1]===216&&e[2]===255}getSize(e){let n=new DataView(e.buffer,e.byteOffset+4),r,s;for(;n.byteLength;){if(r=n.getUint16(0,!1),Hm(n,r),s=n.getUint8(r+1),s===192||s===193||s===194)return[n.getUint16(r+7,!1),n.getUint16(r+5,!1)];n=new DataView(e.buffer,n.byteOffset+r+2)}throw new TypeError("Invalid JPG, no size found")}getChannels(e){return 3}}class Si{match(e){return e.length>=8&&e[0]===137&&e[1]===80&&e[2]===78&&e[3]===71&&e[4]===13&&e[5]===10&&e[6]===26&&e[7]===10}getSize(e){const n=new DataView(e.buffer,e.byteOffset);return ie.decodeText(e.slice(12,16))===Si.PNG_FRIED_CHUNK_NAME?[n.getUint32(32,!1),n.getUint32(36,!1)]:[n.getUint32(16,!1),n.getUint32(20,!1)]}getChannels(e){return 4}}Si.PNG_FRIED_CHUNK_NAME="CgBI";class _n{static registerFormat(e,n){this.impls[e]=n}static getMimeType(e){for(const n in this.impls)if(this.impls[n].match(e))return n;return null}static getSize(e,n){return this.impls[n]?this.impls[n].getSize(e):null}static getChannels(e,n){return this.impls[n]?this.impls[n].getChannels(e):null}static getVRAMByteLength(e,n){if(!this.impls[n])return null;if(this.impls[n].getVRAMByteLength)return this.impls[n].getVRAMByteLength(e);let r=0;const s=4,i=this.getSize(e,n);if(!i)return null;for(;i[0]>1||i[1]>1;)r+=i[0]*i[1]*s,i[0]=Math.max(Math.floor(i[0]/2),1),i[1]=Math.max(Math.floor(i[1]/2),1);return r+=1*s,r}static mimeTypeToExtension(e){return e==="image/jpeg"?"jpg":e.split("/").pop()}static extensionToMimeType(e){return e==="jpg"?"image/jpeg":e?`image/${e}`:""}}_n.impls={"image/jpeg":new Gm,"image/png":new Si};function Hm(t,e){if(e>t.byteLength)throw new TypeError("Corrupt JPG, exceeded buffer limits");if(t.getUint8(e)!==255)throw new TypeError("Invalid JPG, marker table corrupted");return t}class pr{static basename(e){const n=e.split(/[\\/]/).pop();return n.substring(0,n.lastIndexOf("."))}static extension(e){if(e.startsWith("data:image/")){const n=e.match(/data:(image\/\w+)/)[1];return _n.mimeTypeToExtension(n)}else{if(e.startsWith("data:model/gltf+json"))return"gltf";if(e.startsWith("data:model/gltf-binary"))return"glb";if(e.startsWith("data:application/"))return"bin"}return e.split(/[\\/]/).pop().split(/[.]/).pop()}}var Fo=typeof Float32Array<"u"?Float32Array:Array;function Km(){var t=new Fo(3);return Fo!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function oo(t){var e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}(function(){var t=Km();return function(e,n,r,s,i,o){var a,l;for(n||(n=3),r||(r=0),s?l=Math.min(s*n+r,e.length):l=e.length,a=r;a<l;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],i(t,t,o),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2];return e}})();const cl="https://null.example";class Ur{static dirname(e){const n=e.lastIndexOf("/");return n===-1?"./":e.substring(0,n+1)}static basename(e){return pr.basename(new URL(e,cl).pathname)}static extension(e){return pr.extension(new URL(e,cl).pathname)}static resolve(e,n){if(!this.isRelativePath(n))return n;const r=e.split("/"),s=n.split("/");r.pop();for(let i=0;i<s.length;i++)s[i]!=="."&&(s[i]===".."?r.pop():r.push(s[i]));return r.join("/")}static isAbsoluteURL(e){return this.PROTOCOL_REGEXP.test(e)}static isRelativePath(e){return!/^(?:[a-zA-Z]+:)?\//.test(e)}}Ur.DEFAULT_INIT={};Ur.PROTOCOL_REGEXP=/^[a-zA-Z]+:\/\//;function ul(t){return Object.prototype.toString.call(t)==="[object Object]"}function mn(t){if(ul(t)===!1)return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(ul(n)===!1||Object.hasOwn(n,"isPrototypeOf")===!1)}var Bo,Uo;(function(t){t[t.SILENT=4]="SILENT",t[t.ERROR=3]="ERROR",t[t.WARN=2]="WARN",t[t.INFO=1]="INFO",t[t.DEBUG=0]="DEBUG"})(Uo||(Uo={}));class tt{constructor(e){this.verbosity=void 0,this.verbosity=e}debug(e){this.verbosity<=tt.Verbosity.DEBUG&&console.debug(e)}info(e){this.verbosity<=tt.Verbosity.INFO&&console.info(e)}warn(e){this.verbosity<=tt.Verbosity.WARN&&console.warn(e)}error(e){this.verbosity<=tt.Verbosity.ERROR&&console.error(e)}}Bo=tt;tt.Verbosity=Uo;tt.DEFAULT_INSTANCE=new Bo(Bo.Verbosity.INFO);function Ym(t){var e=t[0],n=t[1],r=t[2],s=t[3],i=t[4],o=t[5],a=t[6],l=t[7],c=t[8],u=t[9],f=t[10],h=t[11],p=t[12],y=t[13],m=t[14],w=t[15],g=e*o-n*i,E=e*a-r*i,v=n*a-r*o,S=c*y-u*p,_=c*m-f*p,O=u*m-f*y,b=e*O-n*_+r*S,x=i*O-o*_+a*S,k=c*v-u*E+f*g,N=p*v-y*E+m*g;return l*b-s*x+w*k-h*N}function Xm(t,e,n){var r=e[0],s=e[1],i=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],f=e[8],h=e[9],p=e[10],y=e[11],m=e[12],w=e[13],g=e[14],E=e[15],v=n[0],S=n[1],_=n[2],O=n[3];return t[0]=v*r+S*a+_*f+O*m,t[1]=v*s+S*l+_*h+O*w,t[2]=v*i+S*c+_*p+O*g,t[3]=v*o+S*u+_*y+O*E,v=n[4],S=n[5],_=n[6],O=n[7],t[4]=v*r+S*a+_*f+O*m,t[5]=v*s+S*l+_*h+O*w,t[6]=v*i+S*c+_*p+O*g,t[7]=v*o+S*u+_*y+O*E,v=n[8],S=n[9],_=n[10],O=n[11],t[8]=v*r+S*a+_*f+O*m,t[9]=v*s+S*l+_*h+O*w,t[10]=v*i+S*c+_*p+O*g,t[11]=v*o+S*u+_*y+O*E,v=n[12],S=n[13],_=n[14],O=n[15],t[12]=v*r+S*a+_*f+O*m,t[13]=v*s+S*l+_*h+O*w,t[14]=v*i+S*c+_*p+O*g,t[15]=v*o+S*u+_*y+O*E,t}function Qm(t,e){var n=e[0],r=e[1],s=e[2],i=e[4],o=e[5],a=e[6],l=e[8],c=e[9],u=e[10];return t[0]=Math.sqrt(n*n+r*r+s*s),t[1]=Math.sqrt(i*i+o*o+a*a),t[2]=Math.sqrt(l*l+c*c+u*u),t}function Jm(t,e){var n=new Fo(3);Qm(n,e);var r=1/n[0],s=1/n[1],i=1/n[2],o=e[0]*r,a=e[1]*s,l=e[2]*i,c=e[4]*r,u=e[5]*s,f=e[6]*i,h=e[8]*r,p=e[9]*s,y=e[10]*i,m=o+u+y,w=0;return m>0?(w=Math.sqrt(m+1)*2,t[3]=.25*w,t[0]=(f-p)/w,t[1]=(h-l)/w,t[2]=(a-c)/w):o>u&&o>y?(w=Math.sqrt(1+o-u-y)*2,t[3]=(f-p)/w,t[0]=.25*w,t[1]=(a+c)/w,t[2]=(h+l)/w):u>y?(w=Math.sqrt(1+u-o-y)*2,t[3]=(h-l)/w,t[0]=(a+c)/w,t[1]=.25*w,t[2]=(f+p)/w):(w=Math.sqrt(1+y-o-u)*2,t[3]=(a-c)/w,t[0]=(h+l)/w,t[1]=(f+p)/w,t[2]=.25*w),t}class we{static identity(e){return e}static eq(e,n,r=1e-5){if(e.length!==n.length)return!1;for(let s=0;s<e.length;s++)if(Math.abs(e[s]-n[s])>r)return!1;return!0}static clamp(e,n,r){return e<n?n:e>r?r:e}static decodeNormalizedInt(e,n){switch(n){case 5126:return e;case 5123:return e/65535;case 5121:return e/255;case 5122:return Math.max(e/32767,-1);case 5120:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}static encodeNormalizedInt(e,n){switch(n){case 5126:return e;case 5123:return Math.round(we.clamp(e,0,1)*65535);case 5121:return Math.round(we.clamp(e,0,1)*255);case 5122:return Math.round(we.clamp(e,-1,1)*32767);case 5120:return Math.round(we.clamp(e,-1,1)*127);default:throw new Error("Invalid component type.")}}static decompose(e,n,r,s){let i=oo([e[0],e[1],e[2]]);const o=oo([e[4],e[5],e[6]]),a=oo([e[8],e[9],e[10]]);Ym(e)<0&&(i=-i),n[0]=e[12],n[1]=e[13],n[2]=e[14];const c=e.slice(),u=1/i,f=1/o,h=1/a;c[0]*=u,c[1]*=u,c[2]*=u,c[4]*=f,c[5]*=f,c[6]*=f,c[8]*=h,c[9]*=h,c[10]*=h,Jm(r,c),s[0]=i,s[1]=o,s[2]=a}static compose(e,n,r,s){const i=s,o=n[0],a=n[1],l=n[2],c=n[3],u=o+o,f=a+a,h=l+l,p=o*u,y=o*f,m=o*h,w=a*f,g=a*h,E=l*h,v=c*u,S=c*f,_=c*h,O=r[0],b=r[1],x=r[2];return i[0]=(1-(w+E))*O,i[1]=(y+_)*O,i[2]=(m-S)*O,i[3]=0,i[4]=(y-_)*b,i[5]=(1-(p+E))*b,i[6]=(g+v)*b,i[7]=0,i[8]=(m+S)*x,i[9]=(g-v)*x,i[10]=(1-(p+w))*x,i[11]=0,i[12]=e[0],i[13]=e[1],i[14]=e[2],i[15]=1,i}}function eg(t,e){if(!!t!=!!e)return!1;const n=t.getChild(),r=e.getChild();return n===r||n.equals(r)}function tg(t,e){if(!!t!=!!e)return!1;const n=t.values(),r=e.values();if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++){const i=n[s],o=r[s];if(i.getChild()!==o.getChild()&&!i.getChild().equals(o.getChild()))return!1}return!0}function ng(t,e){if(!!t!=!!e)return!1;const n=t.keys(),r=e.keys();if(n.length!==r.length)return!1;for(const s of n){const i=t.get(s),o=e.get(s);if(!!i!=!!o)return!1;const a=i.getChild(),l=o.getChild();if(a!==l&&!a.equals(l))return!1}return!0}function Jc(t,e){if(t===e)return!0;if(!!t!=!!e||!t||!e||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function eu(t,e){if(t===e)return!0;if(!!t!=!!e)return!1;if(!mn(t)||!mn(e))return t===e;const n=t,r=e;let s=0,i=0,o;for(o in n)s++;for(o in r)i++;if(s!==i)return!1;for(o in n){const a=n[o],l=r[o];if(oi(a)&&oi(l)){if(!Jc(a,l))return!1}else if(mn(a)&&mn(l)){if(!eu(a,l))return!1}else if(a!==l)return!1}return!0}function oi(t){return Array.isArray(t)||ArrayBuffer.isView(t)}const fl="23456789abdegjkmnpqrvwxyzABDEGJKMNPQRVWXYZ",rg=999,sg=6,dl=new Set,ig=function(){let e="";for(let n=0;n<sg;n++)e+=fl.charAt(Math.floor(Math.random()*fl.length));return e},og=function(){for(let e=0;e<rg;e++){const n=ig();if(!dl.has(n))return dl.add(n),n}return""},tn=t=>t,ag=new Set;class ma extends qm{constructor(e,n=""){super(e),this[ae].name=n,this.init(),this.dispatchEvent({type:"create"})}getGraph(){return this.graph}getDefaults(){return Object.assign(super.getDefaults(),{name:"",extras:{}})}set(e,n){return Array.isArray(n)&&(n=n.slice()),super.set(e,n)}getName(){return this.get("name")}setName(e){return this.set("name",e)}getExtras(){return this.get("extras")}setExtras(e){return this.set("extras",e)}clone(){const e=this.constructor;return new e(this.graph).copy(this,tn)}copy(e,n=tn){for(const r in this[ae]){const s=this[ae][r];if(s instanceof tr)this[pn].has(r)||s.dispose();else if(s instanceof Ht||s instanceof ye)for(const i of s.values())i.dispose();else if(s instanceof yt)for(const i of s.values())i.dispose()}for(const r in e[ae]){const s=this[ae][r],i=e[ae][r];if(i instanceof tr)this[pn].has(r)?s.getChild().copy(n(i.getChild()),n):this.setRef(r,n(i.getChild()),i.getAttributes());else if(i instanceof ye||i instanceof Ht)for(const o of i.values())this.addRef(r,n(o.getChild()),o.getAttributes());else if(i instanceof yt)for(const o of i.keys()){const a=i.get(o);this.setRefMap(r,o,n(a.getChild()),a.getAttributes())}else mn(i)?this[ae][r]=JSON.parse(JSON.stringify(i)):Array.isArray(i)||i instanceof ArrayBuffer||ArrayBuffer.isView(i)?this[ae][r]=i.slice():this[ae][r]=i}return this}equals(e,n=ag){if(this===e)return!0;if(this.propertyType!==e.propertyType)return!1;for(const r in this[ae]){if(n.has(r))continue;const s=this[ae][r],i=e[ae][r];if(s instanceof tr||i instanceof tr){if(!eg(s,i))return!1}else if(s instanceof ye||i instanceof ye||s instanceof Ht||i instanceof Ht){if(!tg(s,i))return!1}else if(s instanceof yt||i instanceof yt){if(!ng(s,i))return!1}else if(mn(s)||mn(i)){if(!eu(s,i))return!1}else if(oi(s)||oi(i)){if(!Jc(s,i))return!1}else if(s!==i)return!1}return!0}detach(){return this.graph.disconnectParents(this,e=>e.propertyType!=="Root"),this}listParents(){return this.graph.listParents(this)}}class We extends ma{getDefaults(){return Object.assign(super.getDefaults(),{extensions:new yt})}getExtension(e){return this.getRefMap("extensions",e)}setExtension(e,n){return n&&n._validateParent(this),this.setRefMap("extensions",e,n)}listExtensions(){return this.listRefMapValues("extensions")}}class q extends We{init(){this.propertyType=Z.ACCESSOR}getDefaults(){return Object.assign(super.getDefaults(),{array:null,type:q.Type.SCALAR,componentType:q.ComponentType.FLOAT,normalized:!1,sparse:!1,buffer:null})}static getElementSize(e){switch(e){case q.Type.SCALAR:return 1;case q.Type.VEC2:return 2;case q.Type.VEC3:return 3;case q.Type.VEC4:return 4;case q.Type.MAT2:return 4;case q.Type.MAT3:return 9;case q.Type.MAT4:return 16;default:throw new Error("Unexpected type: "+e)}}static getComponentSize(e){switch(e){case q.ComponentType.BYTE:return 1;case q.ComponentType.UNSIGNED_BYTE:return 1;case q.ComponentType.SHORT:return 2;case q.ComponentType.UNSIGNED_SHORT:return 2;case q.ComponentType.UNSIGNED_INT:return 4;case q.ComponentType.FLOAT:return 4;default:throw new Error("Unexpected component type: "+e)}}getMinNormalized(e){const n=this.getNormalized(),r=this.getElementSize(),s=this.getComponentType();if(this.getMin(e),n)for(let i=0;i<r;i++)e[i]=we.decodeNormalizedInt(e[i],s);return e}getMin(e){const n=this.getArray(),r=this.getCount(),s=this.getElementSize();for(let i=0;i<s;i++)e[i]=1/0;for(let i=0;i<r*s;i+=s)for(let o=0;o<s;o++){const a=n[i+o];Number.isFinite(a)&&(e[o]=Math.min(e[o],a))}return e}getMaxNormalized(e){const n=this.getNormalized(),r=this.getElementSize(),s=this.getComponentType();if(this.getMax(e),n)for(let i=0;i<r;i++)e[i]=we.decodeNormalizedInt(e[i],s);return e}getMax(e){const n=this.get("array"),r=this.getCount(),s=this.getElementSize();for(let i=0;i<s;i++)e[i]=-1/0;for(let i=0;i<r*s;i+=s)for(let o=0;o<s;o++){const a=n[i+o];Number.isFinite(a)&&(e[o]=Math.max(e[o],a))}return e}getCount(){const e=this.get("array");return e?e.length/this.getElementSize():0}getType(){return this.get("type")}setType(e){return this.set("type",e)}getElementSize(){return q.getElementSize(this.get("type"))}getComponentSize(){return this.get("array").BYTES_PER_ELEMENT}getComponentType(){return this.get("componentType")}getNormalized(){return this.get("normalized")}setNormalized(e){return this.set("normalized",e)}getScalar(e){const n=this.getElementSize(),r=this.getComponentType(),s=this.getArray();return this.getNormalized()?we.decodeNormalizedInt(s[e*n],r):s[e*n]}setScalar(e,n){const r=this.getElementSize(),s=this.getComponentType(),i=this.getArray();return this.getNormalized()?i[e*r]=we.encodeNormalizedInt(n,s):i[e*r]=n,this}getElement(e,n){const r=this.getNormalized(),s=this.getElementSize(),i=this.getComponentType(),o=this.getArray();for(let a=0;a<s;a++)r?n[a]=we.decodeNormalizedInt(o[e*s+a],i):n[a]=o[e*s+a];return n}setElement(e,n){const r=this.getNormalized(),s=this.getElementSize(),i=this.getComponentType(),o=this.getArray();for(let a=0;a<s;a++)r?o[e*s+a]=we.encodeNormalizedInt(n[a],i):o[e*s+a]=n[a];return this}getSparse(){return this.get("sparse")}setSparse(e){return this.set("sparse",e)}getBuffer(){return this.getRef("buffer")}setBuffer(e){return this.setRef("buffer",e)}getArray(){return this.get("array")}setArray(e){return this.set("componentType",e?lg(e):q.ComponentType.FLOAT),this.set("array",e),this}getByteLength(){const e=this.get("array");return e?e.byteLength:0}}q.Type={SCALAR:"SCALAR",VEC2:"VEC2",VEC3:"VEC3",VEC4:"VEC4",MAT2:"MAT2",MAT3:"MAT3",MAT4:"MAT4"};q.ComponentType={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125,FLOAT:5126};function lg(t){switch(t.constructor){case Float32Array:return q.ComponentType.FLOAT;case Uint32Array:return q.ComponentType.UNSIGNED_INT;case Uint16Array:return q.ComponentType.UNSIGNED_SHORT;case Uint8Array:return q.ComponentType.UNSIGNED_BYTE;case Int16Array:return q.ComponentType.SHORT;case Int8Array:return q.ComponentType.BYTE;default:throw new Error("Unknown accessor componentType.")}}class tu extends We{init(){this.propertyType=Z.ANIMATION}getDefaults(){return Object.assign(super.getDefaults(),{channels:new ye,samplers:new ye})}addChannel(e){return this.addRef("channels",e)}removeChannel(e){return this.removeRef("channels",e)}listChannels(){return this.listRefs("channels")}addSampler(e){return this.addRef("samplers",e)}removeSampler(e){return this.removeRef("samplers",e)}listSamplers(){return this.listRefs("samplers")}}class nu extends We{init(){this.propertyType=Z.ANIMATION_CHANNEL}getDefaults(){return Object.assign(super.getDefaults(),{targetPath:null,targetNode:null,sampler:null})}getTargetPath(){return this.get("targetPath")}setTargetPath(e){return this.set("targetPath",e)}getTargetNode(){return this.getRef("targetNode")}setTargetNode(e){return this.setRef("targetNode",e)}getSampler(){return this.getRef("sampler")}setSampler(e){return this.setRef("sampler",e)}}nu.TargetPath={TRANSLATION:"translation",ROTATION:"rotation",SCALE:"scale",WEIGHTS:"weights"};class is extends We{init(){this.propertyType=Z.ANIMATION_SAMPLER}getDefaultAttributes(){return Object.assign(super.getDefaults(),{interpolation:is.Interpolation.LINEAR,input:null,output:null})}getInterpolation(){return this.get("interpolation")}setInterpolation(e){return this.set("interpolation",e)}getInput(){return this.getRef("input")}setInput(e){return this.setRef("input",e,{usage:Ye.OTHER})}getOutput(){return this.getRef("output")}setOutput(e){return this.setRef("output",e,{usage:Ye.OTHER})}}is.Interpolation={LINEAR:"LINEAR",STEP:"STEP",CUBICSPLINE:"CUBICSPLINE"};class ru extends We{init(){this.propertyType=Z.BUFFER}getDefaults(){return Object.assign(super.getDefaults(),{uri:""})}getURI(){return this.get("uri")}setURI(e){return this.set("uri",e)}}class On extends We{init(){this.propertyType=Z.CAMERA}getDefaults(){return Object.assign(super.getDefaults(),{type:On.Type.PERSPECTIVE,znear:.1,zfar:100,aspectRatio:null,yfov:Math.PI*2*50/360,xmag:1,ymag:1})}getType(){return this.get("type")}setType(e){return this.set("type",e)}getZNear(){return this.get("znear")}setZNear(e){return this.set("znear",e)}getZFar(){return this.get("zfar")}setZFar(e){return this.set("zfar",e)}getAspectRatio(){return this.get("aspectRatio")}setAspectRatio(e){return this.set("aspectRatio",e)}getYFov(){return this.get("yfov")}setYFov(e){return this.set("yfov",e)}getXMag(){return this.get("xmag")}setXMag(e){return this.set("xmag",e)}getYMag(){return this.get("ymag")}setYMag(e){return this.set("ymag",e)}}On.Type={PERSPECTIVE:"perspective",ORTHOGRAPHIC:"orthographic"};class cg extends ma{_validateParent(e){if(!this.parentTypes.includes(e.propertyType))throw new Error(`Parent "${e.propertyType}" invalid for child "${this.propertyType}".`)}}cg.EXTENSION_NAME=void 0;class dt extends We{init(){this.propertyType=Z.TEXTURE_INFO}getDefaults(){return Object.assign(super.getDefaults(),{texCoord:0,magFilter:null,minFilter:null,wrapS:dt.WrapMode.REPEAT,wrapT:dt.WrapMode.REPEAT})}getTexCoord(){return this.get("texCoord")}setTexCoord(e){return this.set("texCoord",e)}getMagFilter(){return this.get("magFilter")}setMagFilter(e){return this.set("magFilter",e)}getMinFilter(){return this.get("minFilter")}setMinFilter(e){return this.set("minFilter",e)}getWrapS(){return this.get("wrapS")}setWrapS(e){return this.set("wrapS",e)}getWrapT(){return this.get("wrapT")}setWrapT(e){return this.set("wrapT",e)}}dt.WrapMode={CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497};dt.MagFilter={NEAREST:9728,LINEAR:9729};dt.MinFilter={NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987};const{R:Es,G:Ts,B:Ns,A:ug}=Do;class En extends We{init(){this.propertyType=Z.MATERIAL}getDefaults(){return Object.assign(super.getDefaults(),{alphaMode:En.AlphaMode.OPAQUE,alphaCutoff:.5,doubleSided:!1,baseColorFactor:[1,1,1,1],baseColorTexture:null,baseColorTextureInfo:new dt(this.graph,"baseColorTextureInfo"),emissiveFactor:[0,0,0],emissiveTexture:null,emissiveTextureInfo:new dt(this.graph,"emissiveTextureInfo"),normalScale:1,normalTexture:null,normalTextureInfo:new dt(this.graph,"normalTextureInfo"),occlusionStrength:1,occlusionTexture:null,occlusionTextureInfo:new dt(this.graph,"occlusionTextureInfo"),roughnessFactor:1,metallicFactor:1,metallicRoughnessTexture:null,metallicRoughnessTextureInfo:new dt(this.graph,"metallicRoughnessTextureInfo")})}getDoubleSided(){return this.get("doubleSided")}setDoubleSided(e){return this.set("doubleSided",e)}getAlpha(){return this.get("baseColorFactor")[3]}setAlpha(e){const n=this.get("baseColorFactor").slice();return n[3]=e,this.set("baseColorFactor",n)}getAlphaMode(){return this.get("alphaMode")}setAlphaMode(e){return this.set("alphaMode",e)}getAlphaCutoff(){return this.get("alphaCutoff")}setAlphaCutoff(e){return this.set("alphaCutoff",e)}getBaseColorFactor(){return this.get("baseColorFactor")}setBaseColorFactor(e){return this.set("baseColorFactor",e)}getBaseColorTexture(){return this.getRef("baseColorTexture")}getBaseColorTextureInfo(){return this.getRef("baseColorTexture")?this.getRef("baseColorTextureInfo"):null}setBaseColorTexture(e){return this.setRef("baseColorTexture",e,{channels:Es|Ts|Ns|ug,isColor:!0})}getEmissiveFactor(){return this.get("emissiveFactor")}setEmissiveFactor(e){return this.set("emissiveFactor",e)}getEmissiveTexture(){return this.getRef("emissiveTexture")}getEmissiveTextureInfo(){return this.getRef("emissiveTexture")?this.getRef("emissiveTextureInfo"):null}setEmissiveTexture(e){return this.setRef("emissiveTexture",e,{channels:Es|Ts|Ns,isColor:!0})}getNormalScale(){return this.get("normalScale")}setNormalScale(e){return this.set("normalScale",e)}getNormalTexture(){return this.getRef("normalTexture")}getNormalTextureInfo(){return this.getRef("normalTexture")?this.getRef("normalTextureInfo"):null}setNormalTexture(e){return this.setRef("normalTexture",e,{channels:Es|Ts|Ns})}getOcclusionStrength(){return this.get("occlusionStrength")}setOcclusionStrength(e){return this.set("occlusionStrength",e)}getOcclusionTexture(){return this.getRef("occlusionTexture")}getOcclusionTextureInfo(){return this.getRef("occlusionTexture")?this.getRef("occlusionTextureInfo"):null}setOcclusionTexture(e){return this.setRef("occlusionTexture",e,{channels:Es})}getRoughnessFactor(){return this.get("roughnessFactor")}setRoughnessFactor(e){return this.set("roughnessFactor",e)}getMetallicFactor(){return this.get("metallicFactor")}setMetallicFactor(e){return this.set("metallicFactor",e)}getMetallicRoughnessTexture(){return this.getRef("metallicRoughnessTexture")}getMetallicRoughnessTextureInfo(){return this.getRef("metallicRoughnessTexture")?this.getRef("metallicRoughnessTextureInfo"):null}setMetallicRoughnessTexture(e){return this.setRef("metallicRoughnessTexture",e,{channels:Ts|Ns})}}En.AlphaMode={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};class su extends We{init(){this.propertyType=Z.MESH}getDefaults(){return Object.assign(super.getDefaults(),{weights:[],primitives:new ye})}addPrimitive(e){return this.addRef("primitives",e)}removePrimitive(e){return this.removeRef("primitives",e)}listPrimitives(){return this.listRefs("primitives")}getWeights(){return this.get("weights")}setWeights(e){return this.set("weights",e)}}class iu extends We{init(){this.propertyType=Z.NODE}getDefaults(){return Object.assign(super.getDefaults(),{translation:[0,0,0],rotation:[0,0,0,1],scale:[1,1,1],weights:[],camera:null,mesh:null,skin:null,children:new ye})}copy(e,n=tn){if(n===tn)throw new Error("Node cannot be copied.");return super.copy(e,n)}getTranslation(){return this.get("translation")}getRotation(){return this.get("rotation")}getScale(){return this.get("scale")}setTranslation(e){return this.set("translation",e)}setRotation(e){return this.set("rotation",e)}setScale(e){return this.set("scale",e)}getMatrix(){return we.compose(this.get("translation"),this.get("rotation"),this.get("scale"),[])}setMatrix(e){const n=this.get("translation").slice(),r=this.get("rotation").slice(),s=this.get("scale").slice();return we.decompose(e,n,r,s),this.set("translation",n).set("rotation",r).set("scale",s)}getWorldTranslation(){const e=[0,0,0];return we.decompose(this.getWorldMatrix(),e,[0,0,0,1],[1,1,1]),e}getWorldRotation(){const e=[0,0,0,1];return we.decompose(this.getWorldMatrix(),[0,0,0],e,[1,1,1]),e}getWorldScale(){const e=[1,1,1];return we.decompose(this.getWorldMatrix(),[0,0,0],[0,0,0,1],e),e}getWorldMatrix(){const e=[];for(let s=this;s!=null;s=s.getParentNode())e.push(s);let n;const r=e.pop().getMatrix();for(;n=e.pop();)Xm(r,r,n.getMatrix());return r}addChild(e){const n=e.getParentNode();n&&n.removeChild(e);for(const r of e.listParents())r.propertyType===Z.SCENE&&r.removeChild(e);return this.addRef("children",e)}removeChild(e){return this.removeRef("children",e)}listChildren(){return this.listRefs("children")}getParentNode(){for(const e of this.listParents())if(e.propertyType===Z.NODE)return e;return null}getMesh(){return this.getRef("mesh")}setMesh(e){return this.setRef("mesh",e)}getCamera(){return this.getRef("camera")}setCamera(e){return this.setRef("camera",e)}getSkin(){return this.getRef("skin")}setSkin(e){return this.setRef("skin",e)}getWeights(){return this.get("weights")}setWeights(e){return this.set("weights",e)}traverse(e){e(this);for(const n of this.listChildren())n.traverse(e);return this}}class ki extends We{init(){this.propertyType=Z.PRIMITIVE}getDefaults(){return Object.assign(super.getDefaults(),{mode:ki.Mode.TRIANGLES,material:null,indices:null,attributes:new yt,targets:new ye})}getIndices(){return this.getRef("indices")}setIndices(e){return this.setRef("indices",e,{usage:Ye.ELEMENT_ARRAY_BUFFER})}getAttribute(e){return this.getRefMap("attributes",e)}setAttribute(e,n){return this.setRefMap("attributes",e,n,{usage:Ye.ARRAY_BUFFER})}listAttributes(){return this.listRefMapValues("attributes")}listSemantics(){return this.listRefMapKeys("attributes")}getMaterial(){return this.getRef("material")}setMaterial(e){return this.setRef("material",e)}getMode(){return this.get("mode")}setMode(e){return this.set("mode",e)}listTargets(){return this.listRefs("targets")}addTarget(e){return this.addRef("targets",e)}removeTarget(e){return this.removeRef("targets",e)}}ki.Mode={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class fg extends ma{init(){this.propertyType=Z.PRIMITIVE_TARGET}getDefaults(){return Object.assign(super.getDefaults(),{attributes:new yt})}getAttribute(e){return this.getRefMap("attributes",e)}setAttribute(e,n){return this.setRefMap("attributes",e,n,{usage:Ye.ARRAY_BUFFER})}listAttributes(){return this.listRefMapValues("attributes")}listSemantics(){return this.listRefMapKeys("attributes")}}function Ue(){return Ue=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ue.apply(null,arguments)}class ou extends We{init(){this.propertyType=Z.SCENE}getDefaults(){return Object.assign(super.getDefaults(),{children:new ye})}copy(e,n=tn){if(n===tn)throw new Error("Scene cannot be copied.");return super.copy(e,n)}addChild(e){const n=e.getParentNode();return n&&n.removeChild(e),this.addRef("children",e)}removeChild(e){return this.removeRef("children",e)}listChildren(){return this.listRefs("children")}traverse(e){for(const n of this.listChildren())n.traverse(e);return this}}class au extends We{init(){this.propertyType=Z.SKIN}getDefaults(){return Object.assign(super.getDefaults(),{skeleton:null,inverseBindMatrices:null,joints:new ye})}getSkeleton(){return this.getRef("skeleton")}setSkeleton(e){return this.setRef("skeleton",e)}getInverseBindMatrices(){return this.getRef("inverseBindMatrices")}setInverseBindMatrices(e){return this.setRef("inverseBindMatrices",e,{usage:Ye.INVERSE_BIND_MATRICES})}addJoint(e){return this.addRef("joints",e)}removeJoint(e){return this.removeRef("joints",e)}listJoints(){return this.listRefs("joints")}}class lu extends We{init(){this.propertyType=Z.TEXTURE}getDefaults(){return Object.assign(super.getDefaults(),{image:null,mimeType:"",uri:""})}getMimeType(){return this.get("mimeType")||_n.extensionToMimeType(pr.extension(this.get("uri")))}setMimeType(e){return this.set("mimeType",e)}getURI(){return this.get("uri")}setURI(e){this.set("uri",e);const n=_n.extensionToMimeType(pr.extension(e));return n&&this.set("mimeType",n),this}getImage(){return this.get("image")}setImage(e){return this.set("image",ie.assertView(e))}getSize(){const e=this.get("image");return e?_n.getSize(e,this.getMimeType()):null}}class dg extends We{init(){this.propertyType=Z.ROOT}getDefaults(){return Object.assign(super.getDefaults(),{asset:{generator:`glTF-Transform ${Qc}`,version:"2.0"},defaultScene:null,accessors:new ye,animations:new ye,buffers:new ye,cameras:new ye,materials:new ye,meshes:new ye,nodes:new ye,scenes:new ye,skins:new ye,textures:new ye})}constructor(e){super(e),this._extensions=new Set,e.addEventListener("node:create",n=>{this._addChildOfRoot(n.target)})}clone(){throw new Error("Root cannot be cloned.")}copy(e,n=tn){if(n===tn)throw new Error("Root cannot be copied.");this.set("asset",Ue({},e.get("asset"))),this.setName(e.getName()),this.setExtras(Ue({},e.getExtras())),this.setDefaultScene(e.getDefaultScene()?n(e.getDefaultScene()):null);for(const r of e.listRefMapKeys("extensions")){const s=e.getExtension(r);this.setExtension(r,n(s))}return this}_addChildOfRoot(e){return e instanceof ou?this.addRef("scenes",e):e instanceof iu?this.addRef("nodes",e):e instanceof On?this.addRef("cameras",e):e instanceof au?this.addRef("skins",e):e instanceof su?this.addRef("meshes",e):e instanceof En?this.addRef("materials",e):e instanceof lu?this.addRef("textures",e):e instanceof tu?this.addRef("animations",e):e instanceof q?this.addRef("accessors",e):e instanceof ru&&this.addRef("buffers",e),this}getAsset(){return this.get("asset")}listExtensionsUsed(){return Array.from(this._extensions)}listExtensionsRequired(){return this.listExtensionsUsed().filter(e=>e.isRequired())}_enableExtension(e){return this._extensions.add(e),this}_disableExtension(e){return this._extensions.delete(e),this}listScenes(){return this.listRefs("scenes")}setDefaultScene(e){return this.setRef("defaultScene",e)}getDefaultScene(){return this.getRef("defaultScene")}listNodes(){return this.listRefs("nodes")}listCameras(){return this.listRefs("cameras")}listSkins(){return this.listRefs("skins")}listMeshes(){return this.listRefs("meshes")}listMaterials(){return this.listRefs("materials")}listTextures(){return this.listRefs("textures")}listAnimations(){return this.listRefs("animations")}listAccessors(){return this.listRefs("accessors")}listBuffers(){return this.listRefs("buffers")}}let cu=class Vo{static fromGraph(e){return Vo._GRAPH_DOCUMENTS.get(e)||null}constructor(){this._graph=new Wm,this._root=new dg(this._graph),this._logger=tt.DEFAULT_INSTANCE,Vo._GRAPH_DOCUMENTS.set(this._graph,this)}getRoot(){return this._root}getGraph(){return this._graph}getLogger(){return this._logger}setLogger(e){return this._logger=e,this}clone(){throw new Error("Use 'cloneDocument(source)' from '@gltf-transform/functions'.")}merge(e){throw new Error("Use 'mergeDocuments(target, source)' from '@gltf-transform/functions'.")}async transform(...e){const n=e.map(r=>r.name);for(const r of e)await r(this,{stack:n});return this}createExtension(e){const n=e.EXTENSION_NAME;return this.getRoot().listExtensionsUsed().find(s=>s.extensionName===n)||new e(this)}disposeExtension(e){const n=this.getRoot().listExtensionsUsed().find(r=>r.extensionName===e);n&&n.dispose()}createScene(e=""){return new ou(this._graph,e)}createNode(e=""){return new iu(this._graph,e)}createCamera(e=""){return new On(this._graph,e)}createSkin(e=""){return new au(this._graph,e)}createMesh(e=""){return new su(this._graph,e)}createPrimitive(){return new ki(this._graph)}createPrimitiveTarget(e=""){return new fg(this._graph,e)}createMaterial(e=""){return new En(this._graph,e)}createTexture(e=""){return new lu(this._graph,e)}createAnimation(e=""){return new tu(this._graph,e)}createAnimationChannel(e=""){return new nu(this._graph,e)}createAnimationSampler(e=""){return new is(this._graph,e)}createAccessor(e="",n=null){return n||(n=this.getRoot().listBuffers()[0]),new q(this._graph,e).setBuffer(n)}createBuffer(e=""){return new ru(this._graph,e)}};cu._GRAPH_DOCUMENTS=new WeakMap;class hg{constructor(e){this.jsonDoc=void 0,this.buffers=[],this.bufferViews=[],this.bufferViewBuffers=[],this.accessors=[],this.textures=[],this.textureInfos=new Map,this.materials=[],this.meshes=[],this.cameras=[],this.nodes=[],this.skins=[],this.animations=[],this.scenes=[],this.jsonDoc=e}setTextureInfo(e,n){this.textureInfos.set(e,n),n.texCoord!==void 0&&e.setTexCoord(n.texCoord),n.extras!==void 0&&e.setExtras(n.extras);const r=this.jsonDoc.json.textures[n.index];if(r.sampler===void 0)return;const s=this.jsonDoc.json.samplers[r.sampler];s.magFilter!==void 0&&e.setMagFilter(s.magFilter),s.minFilter!==void 0&&e.setMinFilter(s.minFilter),s.wrapS!==void 0&&e.setWrapS(s.wrapS),s.wrapT!==void 0&&e.setWrapT(s.wrapT)}}const hl={logger:tt.DEFAULT_INSTANCE,extensions:[],dependencies:{}},pg=new Set([Z.BUFFER,Z.TEXTURE,Z.MATERIAL,Z.MESH,Z.PRIMITIVE,Z.NODE,Z.SCENE]);class mg{static read(e,n=hl){const r=Ue({},hl,n),{json:s}=e,i=new cu().setLogger(r.logger);this.validate(e,r);const o=new hg(e),a=s.asset,l=i.getRoot().getAsset();a.copyright&&(l.copyright=a.copyright),a.extras&&(l.extras=a.extras),s.extras!==void 0&&i.getRoot().setExtras(Ue({},s.extras));const c=s.extensionsUsed||[],u=s.extensionsRequired||[];r.extensions.sort((b,x)=>b.EXTENSION_NAME>x.EXTENSION_NAME?1:-1);for(const b of r.extensions)if(c.includes(b.EXTENSION_NAME)){const x=i.createExtension(b).setRequired(u.includes(b.EXTENSION_NAME)),k=x.prereadTypes.filter(N=>!pg.has(N));k.length&&r.logger.warn(`Preread hooks for some types (${k.join()}), requested by extension ${x.extensionName}, are unsupported. Please file an issue or a PR.`);for(const N of x.readDependencies)x.install(N,r.dependencies[N])}const f=s.buffers||[];i.getRoot().listExtensionsUsed().filter(b=>b.prereadTypes.includes(Z.BUFFER)).forEach(b=>b.preread(o,Z.BUFFER)),o.buffers=f.map(b=>{const x=i.createBuffer(b.name);return b.extras&&x.setExtras(b.extras),b.uri&&b.uri.indexOf("__")!==0&&x.setURI(b.uri),x});const h=s.bufferViews||[];o.bufferViewBuffers=h.map((b,x)=>{if(!o.bufferViews[x]){const k=e.json.buffers[b.buffer],N=k.uri?e.resources[k.uri]:e.resources[si],T=b.byteOffset||0;o.bufferViews[x]=ie.toView(N,T,b.byteLength)}return o.buffers[b.buffer]});const p=s.accessors||[];o.accessors=p.map(b=>{const x=o.bufferViewBuffers[b.bufferView],k=i.createAccessor(b.name,x).setType(b.type);return b.extras&&k.setExtras(b.extras),b.normalized!==void 0&&k.setNormalized(b.normalized),b.bufferView===void 0||k.setArray(Zs(b,o)),k});const y=s.images||[],m=s.textures||[];i.getRoot().listExtensionsUsed().filter(b=>b.prereadTypes.includes(Z.TEXTURE)).forEach(b=>b.preread(o,Z.TEXTURE)),o.textures=y.map(b=>{const x=i.createTexture(b.name);if(b.extras&&x.setExtras(b.extras),b.bufferView!==void 0){const k=s.bufferViews[b.bufferView],N=e.json.buffers[k.buffer],T=N.uri?e.resources[N.uri]:e.resources[si],A=k.byteOffset||0,C=k.byteLength,R=T.slice(A,A+C);x.setImage(R)}else b.uri!==void 0&&(x.setImage(e.resources[b.uri]),b.uri.indexOf("__")!==0&&x.setURI(b.uri));if(b.mimeType!==void 0)x.setMimeType(b.mimeType);else if(b.uri){const k=pr.extension(b.uri);x.setMimeType(_n.extensionToMimeType(k))}return x}),i.getRoot().listExtensionsUsed().filter(b=>b.prereadTypes.includes(Z.MATERIAL)).forEach(b=>b.preread(o,Z.MATERIAL));const w=s.materials||[];o.materials=w.map(b=>{const x=i.createMaterial(b.name);b.extras&&x.setExtras(b.extras),b.alphaMode!==void 0&&x.setAlphaMode(b.alphaMode),b.alphaCutoff!==void 0&&x.setAlphaCutoff(b.alphaCutoff),b.doubleSided!==void 0&&x.setDoubleSided(b.doubleSided);const k=b.pbrMetallicRoughness||{};if(k.baseColorFactor!==void 0&&x.setBaseColorFactor(k.baseColorFactor),b.emissiveFactor!==void 0&&x.setEmissiveFactor(b.emissiveFactor),k.metallicFactor!==void 0&&x.setMetallicFactor(k.metallicFactor),k.roughnessFactor!==void 0&&x.setRoughnessFactor(k.roughnessFactor),k.baseColorTexture!==void 0){const N=k.baseColorTexture,T=o.textures[m[N.index].source];x.setBaseColorTexture(T),o.setTextureInfo(x.getBaseColorTextureInfo(),N)}if(b.emissiveTexture!==void 0){const N=b.emissiveTexture,T=o.textures[m[N.index].source];x.setEmissiveTexture(T),o.setTextureInfo(x.getEmissiveTextureInfo(),N)}if(b.normalTexture!==void 0){const N=b.normalTexture,T=o.textures[m[N.index].source];x.setNormalTexture(T),o.setTextureInfo(x.getNormalTextureInfo(),N),b.normalTexture.scale!==void 0&&x.setNormalScale(b.normalTexture.scale)}if(b.occlusionTexture!==void 0){const N=b.occlusionTexture,T=o.textures[m[N.index].source];x.setOcclusionTexture(T),o.setTextureInfo(x.getOcclusionTextureInfo(),N),b.occlusionTexture.strength!==void 0&&x.setOcclusionStrength(b.occlusionTexture.strength)}if(k.metallicRoughnessTexture!==void 0){const N=k.metallicRoughnessTexture,T=o.textures[m[N.index].source];x.setMetallicRoughnessTexture(T),o.setTextureInfo(x.getMetallicRoughnessTextureInfo(),N)}return x}),i.getRoot().listExtensionsUsed().filter(b=>b.prereadTypes.includes(Z.MESH)).forEach(b=>b.preread(o,Z.MESH));const g=s.meshes||[];i.getRoot().listExtensionsUsed().filter(b=>b.prereadTypes.includes(Z.PRIMITIVE)).forEach(b=>b.preread(o,Z.PRIMITIVE)),o.meshes=g.map(b=>{const x=i.createMesh(b.name);return b.extras&&x.setExtras(b.extras),b.weights!==void 0&&x.setWeights(b.weights),(b.primitives||[]).forEach(N=>{const T=i.createPrimitive();N.extras&&T.setExtras(N.extras),N.material!==void 0&&T.setMaterial(o.materials[N.material]),N.mode!==void 0&&T.setMode(N.mode);for(const[R,I]of Object.entries(N.attributes||{}))T.setAttribute(R,o.accessors[I]);N.indices!==void 0&&T.setIndices(o.accessors[N.indices]);const A=b.extras&&b.extras.targetNames||[];(N.targets||[]).forEach((R,I)=>{const P=A[I]||I.toString(),L=i.createPrimitiveTarget(P);for(const[B,D]of Object.entries(R))L.setAttribute(B,o.accessors[D]);T.addTarget(L)}),x.addPrimitive(T)}),x});const E=s.cameras||[];o.cameras=E.map(b=>{const x=i.createCamera(b.name).setType(b.type);if(b.extras&&x.setExtras(b.extras),b.type===On.Type.PERSPECTIVE){const k=b.perspective;x.setYFov(k.yfov),x.setZNear(k.znear),k.zfar!==void 0&&x.setZFar(k.zfar),k.aspectRatio!==void 0&&x.setAspectRatio(k.aspectRatio)}else{const k=b.orthographic;x.setZNear(k.znear).setZFar(k.zfar).setXMag(k.xmag).setYMag(k.ymag)}return x});const v=s.nodes||[];i.getRoot().listExtensionsUsed().filter(b=>b.prereadTypes.includes(Z.NODE)).forEach(b=>b.preread(o,Z.NODE)),o.nodes=v.map(b=>{const x=i.createNode(b.name);if(b.extras&&x.setExtras(b.extras),b.translation!==void 0&&x.setTranslation(b.translation),b.rotation!==void 0&&x.setRotation(b.rotation),b.scale!==void 0&&x.setScale(b.scale),b.matrix!==void 0){const k=[0,0,0],N=[0,0,0,1],T=[1,1,1];we.decompose(b.matrix,k,N,T),x.setTranslation(k),x.setRotation(N),x.setScale(T)}return b.weights!==void 0&&x.setWeights(b.weights),x});const S=s.skins||[];o.skins=S.map(b=>{const x=i.createSkin(b.name);b.extras&&x.setExtras(b.extras),b.inverseBindMatrices!==void 0&&x.setInverseBindMatrices(o.accessors[b.inverseBindMatrices]),b.skeleton!==void 0&&x.setSkeleton(o.nodes[b.skeleton]);for(const k of b.joints)x.addJoint(o.nodes[k]);return x}),v.map((b,x)=>{const k=o.nodes[x];(b.children||[]).forEach(T=>k.addChild(o.nodes[T])),b.mesh!==void 0&&k.setMesh(o.meshes[b.mesh]),b.camera!==void 0&&k.setCamera(o.cameras[b.camera]),b.skin!==void 0&&k.setSkin(o.skins[b.skin])});const _=s.animations||[];o.animations=_.map(b=>{const x=i.createAnimation(b.name);b.extras&&x.setExtras(b.extras);const N=(b.samplers||[]).map(A=>{const C=i.createAnimationSampler().setInput(o.accessors[A.input]).setOutput(o.accessors[A.output]).setInterpolation(A.interpolation||is.Interpolation.LINEAR);return A.extras&&C.setExtras(A.extras),x.addSampler(C),C});return(b.channels||[]).forEach(A=>{const C=i.createAnimationChannel().setSampler(N[A.sampler]).setTargetPath(A.target.path);A.target.node!==void 0&&C.setTargetNode(o.nodes[A.target.node]),A.extras&&C.setExtras(A.extras),x.addChannel(C)}),x});const O=s.scenes||[];return i.getRoot().listExtensionsUsed().filter(b=>b.prereadTypes.includes(Z.SCENE)).forEach(b=>b.preread(o,Z.SCENE)),o.scenes=O.map(b=>{const x=i.createScene(b.name);return b.extras&&x.setExtras(b.extras),(b.nodes||[]).map(N=>o.nodes[N]).forEach(N=>x.addChild(N)),x}),s.scene!==void 0&&i.getRoot().setDefaultScene(o.scenes[s.scene]),i.getRoot().listExtensionsUsed().forEach(b=>b.read(o)),p.forEach((b,x)=>{const k=o.accessors[x],N=!!b.sparse,T=!b.bufferView&&!k.getArray();(N||T)&&k.setSparse(!0).setArray(yg(b,o))}),i}static validate(e,n){const r=e.json;if(r.asset.version!=="2.0")throw new Error(`Unsupported glTF version, "${r.asset.version}".`);if(r.extensionsRequired){for(const s of r.extensionsRequired)if(!n.extensions.find(i=>i.EXTENSION_NAME===s))throw new Error(`Missing required extension, "${s}".`)}if(r.extensionsUsed)for(const s of r.extensionsUsed)n.extensions.find(i=>i.EXTENSION_NAME===s)||n.logger.warn(`Missing optional extension, "${s}".`)}}function gg(t,e){const n=e.jsonDoc,r=e.bufferViews[t.bufferView],s=n.json.bufferViews[t.bufferView],i=_i[t.componentType],o=q.getElementSize(t.type),a=i.BYTES_PER_ELEMENT,l=t.byteOffset||0,c=new i(t.count*o),u=new DataView(r.buffer,r.byteOffset,r.byteLength),f=s.byteStride;for(let h=0;h<t.count;h++)for(let p=0;p<o;p++){const y=l+h*f+p*a;let m;switch(t.componentType){case q.ComponentType.FLOAT:m=u.getFloat32(y,!0);break;case q.ComponentType.UNSIGNED_INT:m=u.getUint32(y,!0);break;case q.ComponentType.UNSIGNED_SHORT:m=u.getUint16(y,!0);break;case q.ComponentType.UNSIGNED_BYTE:m=u.getUint8(y);break;case q.ComponentType.SHORT:m=u.getInt16(y,!0);break;case q.ComponentType.BYTE:m=u.getInt8(y);break;default:throw new Error(`Unexpected componentType "${t.componentType}".`)}c[h*o+p]=m}return c}function Zs(t,e){const n=e.jsonDoc,r=e.bufferViews[t.bufferView],s=n.json.bufferViews[t.bufferView],i=_i[t.componentType],o=q.getElementSize(t.type),a=i.BYTES_PER_ELEMENT,l=o*a;if(s.byteStride!==void 0&&s.byteStride!==l)return gg(t,e);const c=r.byteOffset+(t.byteOffset||0),u=t.count*o*a;return new i(r.buffer.slice(c,c+u))}function yg(t,e){const n=_i[t.componentType],r=q.getElementSize(t.type);let s;t.bufferView!==void 0?s=Zs(t,e):s=new n(t.count*r);const i=t.sparse;if(!i)return s;const o=i.count,a=Ue({},t,i.indices,{count:o,type:"SCALAR"}),l=Ue({},t,i.values,{count:o}),c=Zs(a,e),u=Zs(l,e);for(let f=0;f<a.count;f++)for(let h=0;h<r;h++)s[c[f]*r+h]=u[f*r+h];return s}var Kr;(function(t){t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER"})(Kr||(Kr={}));class Sn{constructor(e,n,r){this._doc=void 0,this.jsonDoc=void 0,this.options=void 0,this.accessorIndexMap=new Map,this.animationIndexMap=new Map,this.bufferIndexMap=new Map,this.cameraIndexMap=new Map,this.skinIndexMap=new Map,this.materialIndexMap=new Map,this.meshIndexMap=new Map,this.nodeIndexMap=new Map,this.imageIndexMap=new Map,this.textureDefIndexMap=new Map,this.textureInfoDefMap=new Map,this.samplerDefIndexMap=new Map,this.sceneIndexMap=new Map,this.imageBufferViews=[],this.otherBufferViews=new Map,this.otherBufferViewsIndexMap=new Map,this.extensionData={},this.bufferURIGenerator=void 0,this.imageURIGenerator=void 0,this.logger=void 0,this._accessorUsageMap=new Map,this.accessorUsageGroupedByParent=new Set(["ARRAY_BUFFER"]),this.accessorParents=new Map,this._doc=e,this.jsonDoc=n,this.options=r;const s=e.getRoot(),i=s.listBuffers().length,o=s.listTextures().length;this.bufferURIGenerator=new pl(i>1,()=>r.basename||"buffer"),this.imageURIGenerator=new pl(o>1,a=>bg(e,a)||r.basename||"texture"),this.logger=e.getLogger()}createTextureInfoDef(e,n){const r={magFilter:n.getMagFilter()||void 0,minFilter:n.getMinFilter()||void 0,wrapS:n.getWrapS(),wrapT:n.getWrapT()},s=JSON.stringify(r);this.samplerDefIndexMap.has(s)||(this.samplerDefIndexMap.set(s,this.jsonDoc.json.samplers.length),this.jsonDoc.json.samplers.push(r));const i={source:this.imageIndexMap.get(e),sampler:this.samplerDefIndexMap.get(s)},o=JSON.stringify(i);this.textureDefIndexMap.has(o)||(this.textureDefIndexMap.set(o,this.jsonDoc.json.textures.length),this.jsonDoc.json.textures.push(i));const a={index:this.textureDefIndexMap.get(o)};return n.getTexCoord()!==0&&(a.texCoord=n.getTexCoord()),Object.keys(n.getExtras()).length>0&&(a.extras=n.getExtras()),this.textureInfoDefMap.set(n,a),a}createPropertyDef(e){const n={};return e.getName()&&(n.name=e.getName()),Object.keys(e.getExtras()).length>0&&(n.extras=e.getExtras()),n}createAccessorDef(e){const n=this.createPropertyDef(e);return n.type=e.getType(),n.componentType=e.getComponentType(),n.count=e.getCount(),this._doc.getGraph().listParentEdges(e).some(s=>s.getName()==="attributes"&&s.getAttributes().key==="POSITION"||s.getName()==="input")&&(n.max=e.getMax([]).map(Math.fround),n.min=e.getMin([]).map(Math.fround)),e.getNormalized()&&(n.normalized=e.getNormalized()),n}createImageData(e,n,r){if(this.options.format===Yt.GLB)this.imageBufferViews.push(n),e.bufferView=this.jsonDoc.json.bufferViews.length,this.jsonDoc.json.bufferViews.push({buffer:0,byteOffset:-1,byteLength:n.byteLength});else{const s=_n.mimeTypeToExtension(r.getMimeType());e.uri=this.imageURIGenerator.createURI(r,s),this.assignResourceURI(e.uri,n,!1)}}assignResourceURI(e,n,r){const s=this.jsonDoc.resources;if(!(e in s)){s[e]=n;return}if(n===s[e]){this.logger.warn(`Duplicate resource URI, "${e}".`);return}const i=`Resource URI "${e}" already assigned to different data.`;if(!r){this.logger.warn(i);return}throw new Error(i)}getAccessorUsage(e){const n=this._accessorUsageMap.get(e);if(n)return n;if(e.getSparse())return Ye.SPARSE;for(const r of this._doc.getGraph().listParentEdges(e)){const{usage:s}=r.getAttributes();if(s)return s;r.getParent().propertyType!==Z.ROOT&&this.logger.warn(`Missing attribute ".usage" on edge, "${r.getName()}".`)}return Ye.OTHER}addAccessorToUsageGroup(e,n){const r=this._accessorUsageMap.get(e);if(r&&r!==n)throw new Error(`Accessor with usage "${r}" cannot be reused as "${n}".`);return this._accessorUsageMap.set(e,n),this}}Sn.BufferViewTarget=Kr;Sn.BufferViewUsage=Ye;Sn.USAGE_TO_TARGET={[Ye.ARRAY_BUFFER]:Kr.ARRAY_BUFFER,[Ye.ELEMENT_ARRAY_BUFFER]:Kr.ELEMENT_ARRAY_BUFFER};class pl{constructor(e,n){this.multiple=void 0,this.basename=void 0,this.counter={},this.multiple=e,this.basename=n}createURI(e,n){if(e.getURI())return e.getURI();if(this.multiple){const r=this.basename(e);return this.counter[r]=this.counter[r]||1,`${r}_${this.counter[r]++}.${n}`}else return`${this.basename(e)}.${n}`}}function bg(t,e){const n=t.getGraph().listParentEdges(e).find(r=>r.getParent()!==t.getRoot());return n?n.getName().replace(/texture$/i,""):""}const{BufferViewUsage:As}=Sn,{UNSIGNED_INT:wg,UNSIGNED_SHORT:vg,UNSIGNED_BYTE:xg}=q.ComponentType,_g=new Set([Z.ACCESSOR,Z.BUFFER,Z.MATERIAL,Z.MESH]);class Sg{static write(e,n){const r=e.getGraph(),s=e.getRoot(),i={asset:Ue({generator:`glTF-Transform ${Qc}`},s.getAsset()),extras:Ue({},s.getExtras())},o={json:i,resources:{}},a=new Sn(e,o,n),l=n.logger||tt.DEFAULT_INSTANCE,c=new Set(n.extensions.map(g=>g.EXTENSION_NAME)),u=e.getRoot().listExtensionsUsed().filter(g=>c.has(g.extensionName)).sort((g,E)=>g.extensionName>E.extensionName?1:-1),f=e.getRoot().listExtensionsRequired().filter(g=>c.has(g.extensionName)).sort((g,E)=>g.extensionName>E.extensionName?1:-1);u.length<e.getRoot().listExtensionsUsed().length&&l.warn("Some extensions were not registered for I/O, and will not be written.");for(const g of u){const E=g.prewriteTypes.filter(v=>!_g.has(v));E.length&&l.warn(`Prewrite hooks for some types (${E.join()}), requested by extension ${g.extensionName}, are unsupported. Please file an issue or a PR.`);for(const v of g.writeDependencies)g.install(v,n.dependencies[v])}function h(g,E,v,S){const _=[];let O=0;for(const k of g){const N=a.createAccessorDef(k);N.bufferView=i.bufferViews.length;const T=k.getArray(),A=ie.pad(ie.toView(T));N.byteOffset=O,O+=A.byteLength,_.push(A),a.accessorIndexMap.set(k,i.accessors.length),i.accessors.push(N)}const b=ie.concat(_),x={buffer:E,byteOffset:v,byteLength:b.byteLength};return S&&(x.target=S),i.bufferViews.push(x),{buffers:_,byteLength:O}}function p(g,E,v){const S=g[0].getCount();let _=0;for(const N of g){const T=a.createAccessorDef(N);T.bufferView=i.bufferViews.length,T.byteOffset=_;const A=N.getElementSize(),C=N.getComponentSize();_+=ie.padNumber(A*C),a.accessorIndexMap.set(N,i.accessors.length),i.accessors.push(T)}const O=S*_,b=new ArrayBuffer(O),x=new DataView(b);for(let N=0;N<S;N++){let T=0;for(const A of g){const C=A.getElementSize(),R=A.getComponentSize(),I=A.getComponentType(),P=A.getArray();for(let L=0;L<C;L++){const B=N*_+T+L*R,D=P[N*C+L];switch(I){case q.ComponentType.FLOAT:x.setFloat32(B,D,!0);break;case q.ComponentType.BYTE:x.setInt8(B,D);break;case q.ComponentType.SHORT:x.setInt16(B,D,!0);break;case q.ComponentType.UNSIGNED_BYTE:x.setUint8(B,D);break;case q.ComponentType.UNSIGNED_SHORT:x.setUint16(B,D,!0);break;case q.ComponentType.UNSIGNED_INT:x.setUint32(B,D,!0);break;default:throw new Error("Unexpected component type: "+I)}}T+=ie.padNumber(C*R)}}const k={buffer:E,byteOffset:v,byteLength:O,byteStride:_,target:Sn.BufferViewTarget.ARRAY_BUFFER};return i.bufferViews.push(k),{byteLength:O,buffers:[new Uint8Array(b)]}}function y(g,E,v){const S=[];let _=0;const O=new Map;let b=-1/0,x=!1;for(const I of g){const P=a.createAccessorDef(I);i.accessors.push(P),a.accessorIndexMap.set(I,i.accessors.length-1);const L=[],B=[],D=[],Y=new Array(I.getElementSize()).fill(0);for(let oe=0,X=I.getCount();oe<X;oe++)if(I.getElement(oe,D),!we.eq(D,Y,0)){b=Math.max(oe,b),L.push(oe);for(let le=0;le<D.length;le++)B.push(D[le])}const ee=L.length,ne={accessorDef:P,count:ee};if(O.set(I,ne),ee===0)continue;ee>I.getCount()/2&&(x=!0);const K=_i[I.getComponentType()];ne.indices=L,ne.values=new K(B)}if(!Number.isFinite(b))return{buffers:S,byteLength:_};x&&l.warn("Some sparse accessors have >50% non-zero elements, which may increase file size.");const k=b<255?Uint8Array:b<65535?Uint16Array:Uint32Array,N=b<255?xg:b<65535?vg:wg,T={buffer:E,byteOffset:v+_,byteLength:0};for(const I of g){const P=O.get(I);if(P.count===0)continue;P.indicesByteOffset=T.byteLength;const L=ie.pad(ie.toView(new k(P.indices)));S.push(L),_+=L.byteLength,T.byteLength+=L.byteLength}i.bufferViews.push(T);const A=i.bufferViews.length-1,C={buffer:E,byteOffset:v+_,byteLength:0};for(const I of g){const P=O.get(I);if(P.count===0)continue;P.valuesByteOffset=C.byteLength;const L=ie.pad(ie.toView(P.values));S.push(L),_+=L.byteLength,C.byteLength+=L.byteLength}i.bufferViews.push(C);const R=i.bufferViews.length-1;for(const I of g){const P=O.get(I);P.count!==0&&(P.accessorDef.sparse={count:P.count,indices:{bufferView:A,byteOffset:P.indicesByteOffset,componentType:N},values:{bufferView:R,byteOffset:P.valuesByteOffset}})}return{buffers:S,byteLength:_}}if(i.accessors=[],i.bufferViews=[],i.samplers=[],i.textures=[],i.images=s.listTextures().map((g,E)=>{const v=a.createPropertyDef(g);g.getMimeType()&&(v.mimeType=g.getMimeType());const S=g.getImage();return S&&a.createImageData(v,S,g),a.imageIndexMap.set(g,E),v}),u.filter(g=>g.prewriteTypes.includes(Z.ACCESSOR)).forEach(g=>g.prewrite(a,Z.ACCESSOR)),s.listAccessors().forEach(g=>{const E=a.accessorUsageGroupedByParent,v=a.accessorParents;if(a.accessorIndexMap.has(g))return;const S=a.getAccessorUsage(g);if(a.addAccessorToUsageGroup(g,S),E.has(S)){const _=r.listParents(g).find(O=>O.propertyType!==Z.ROOT);v.set(g,_)}}),u.filter(g=>g.prewriteTypes.includes(Z.BUFFER)).forEach(g=>g.prewrite(a,Z.BUFFER)),(s.listAccessors().length>0||a.otherBufferViews.size>0||s.listTextures().length>0&&n.format===Yt.GLB)&&s.listBuffers().length===0)throw new Error("Buffer required for Document resources, but none was found.");i.buffers=[],s.listBuffers().forEach((g,E)=>{const v=a.createPropertyDef(g),S=a.accessorUsageGroupedByParent,_=g.listParents().filter(C=>C instanceof q),O=new Set(_.map(C=>a.accessorParents.get(C))),b=new Map(Array.from(O).map((C,R)=>[C,R])),x={};for(const C of _){var k;if(a.accessorIndexMap.has(C))continue;const R=a.getAccessorUsage(C);let I=R;if(S.has(R)){const P=a.accessorParents.get(C);I+=`:${b.get(P)}`}x[k=I]||(x[k]={usage:R,accessors:[]}),x[I].accessors.push(C)}const N=[],T=i.buffers.length;let A=0;for(const{usage:C,accessors:R}of Object.values(x))if(C===As.ARRAY_BUFFER&&n.vertexLayout===ii.INTERLEAVED){const I=p(R,T,A);A+=I.byteLength;for(const P of I.buffers)N.push(P)}else if(C===As.ARRAY_BUFFER)for(const I of R){const P=p([I],T,A);A+=P.byteLength;for(const L of P.buffers)N.push(L)}else if(C===As.SPARSE){const I=y(R,T,A);A+=I.byteLength;for(const P of I.buffers)N.push(P)}else if(C===As.ELEMENT_ARRAY_BUFFER){const I=Sn.BufferViewTarget.ELEMENT_ARRAY_BUFFER,P=h(R,T,A,I);A+=P.byteLength;for(const L of P.buffers)N.push(L)}else{const I=h(R,T,A);A+=I.byteLength;for(const P of I.buffers)N.push(P)}if(a.imageBufferViews.length&&E===0){for(let C=0;C<a.imageBufferViews.length;C++)if(i.bufferViews[i.images[C].bufferView].byteOffset=A,A+=a.imageBufferViews[C].byteLength,N.push(a.imageBufferViews[C]),A%8){const R=8-A%8;A+=R,N.push(new Uint8Array(R))}}if(a.otherBufferViews.has(g))for(const C of a.otherBufferViews.get(g))i.bufferViews.push({buffer:T,byteOffset:A,byteLength:C.byteLength}),a.otherBufferViewsIndexMap.set(C,i.bufferViews.length-1),A+=C.byteLength,N.push(C);if(A){let C;n.format===Yt.GLB?C=si:(C=a.bufferURIGenerator.createURI(g,"bin"),v.uri=C),v.byteLength=A,a.assignResourceURI(C,ie.concat(N),!0)}i.buffers.push(v),a.bufferIndexMap.set(g,E)}),s.listAccessors().find(g=>!g.getBuffer())&&l.warn("Skipped writing one or more Accessors: no Buffer assigned."),u.filter(g=>g.prewriteTypes.includes(Z.MATERIAL)).forEach(g=>g.prewrite(a,Z.MATERIAL)),i.materials=s.listMaterials().map((g,E)=>{const v=a.createPropertyDef(g);if(g.getAlphaMode()!==En.AlphaMode.OPAQUE&&(v.alphaMode=g.getAlphaMode()),g.getAlphaMode()===En.AlphaMode.MASK&&(v.alphaCutoff=g.getAlphaCutoff()),g.getDoubleSided()&&(v.doubleSided=!0),v.pbrMetallicRoughness={},we.eq(g.getBaseColorFactor(),[1,1,1,1])||(v.pbrMetallicRoughness.baseColorFactor=g.getBaseColorFactor()),we.eq(g.getEmissiveFactor(),[0,0,0])||(v.emissiveFactor=g.getEmissiveFactor()),g.getRoughnessFactor()!==1&&(v.pbrMetallicRoughness.roughnessFactor=g.getRoughnessFactor()),g.getMetallicFactor()!==1&&(v.pbrMetallicRoughness.metallicFactor=g.getMetallicFactor()),g.getBaseColorTexture()){const S=g.getBaseColorTexture(),_=g.getBaseColorTextureInfo();v.pbrMetallicRoughness.baseColorTexture=a.createTextureInfoDef(S,_)}if(g.getEmissiveTexture()){const S=g.getEmissiveTexture(),_=g.getEmissiveTextureInfo();v.emissiveTexture=a.createTextureInfoDef(S,_)}if(g.getNormalTexture()){const S=g.getNormalTexture(),_=g.getNormalTextureInfo(),O=a.createTextureInfoDef(S,_);g.getNormalScale()!==1&&(O.scale=g.getNormalScale()),v.normalTexture=O}if(g.getOcclusionTexture()){const S=g.getOcclusionTexture(),_=g.getOcclusionTextureInfo(),O=a.createTextureInfoDef(S,_);g.getOcclusionStrength()!==1&&(O.strength=g.getOcclusionStrength()),v.occlusionTexture=O}if(g.getMetallicRoughnessTexture()){const S=g.getMetallicRoughnessTexture(),_=g.getMetallicRoughnessTextureInfo();v.pbrMetallicRoughness.metallicRoughnessTexture=a.createTextureInfoDef(S,_)}return a.materialIndexMap.set(g,E),v}),u.filter(g=>g.prewriteTypes.includes(Z.MESH)).forEach(g=>g.prewrite(a,Z.MESH)),i.meshes=s.listMeshes().map((g,E)=>{const v=a.createPropertyDef(g);let S=null;return v.primitives=g.listPrimitives().map(_=>{const O={attributes:{}};O.mode=_.getMode();const b=_.getMaterial();b&&(O.material=a.materialIndexMap.get(b)),Object.keys(_.getExtras()).length&&(O.extras=_.getExtras());const x=_.getIndices();x&&(O.indices=a.accessorIndexMap.get(x));for(const k of _.listSemantics())O.attributes[k]=a.accessorIndexMap.get(_.getAttribute(k));for(const k of _.listTargets()){const N={};for(const T of k.listSemantics())N[T]=a.accessorIndexMap.get(k.getAttribute(T));O.targets=O.targets||[],O.targets.push(N)}return _.listTargets().length&&!S&&(S=_.listTargets().map(k=>k.getName())),O}),g.getWeights().length&&(v.weights=g.getWeights()),S&&(v.extras=v.extras||{},v.extras.targetNames=S),a.meshIndexMap.set(g,E),v}),i.cameras=s.listCameras().map((g,E)=>{const v=a.createPropertyDef(g);if(v.type=g.getType(),v.type===On.Type.PERSPECTIVE){v.perspective={znear:g.getZNear(),zfar:g.getZFar(),yfov:g.getYFov()};const S=g.getAspectRatio();S!==null&&(v.perspective.aspectRatio=S)}else v.orthographic={znear:g.getZNear(),zfar:g.getZFar(),xmag:g.getXMag(),ymag:g.getYMag()};return a.cameraIndexMap.set(g,E),v}),i.nodes=s.listNodes().map((g,E)=>{const v=a.createPropertyDef(g);return we.eq(g.getTranslation(),[0,0,0])||(v.translation=g.getTranslation()),we.eq(g.getRotation(),[0,0,0,1])||(v.rotation=g.getRotation()),we.eq(g.getScale(),[1,1,1])||(v.scale=g.getScale()),g.getWeights().length&&(v.weights=g.getWeights()),a.nodeIndexMap.set(g,E),v}),i.skins=s.listSkins().map((g,E)=>{const v=a.createPropertyDef(g),S=g.getInverseBindMatrices();S&&(v.inverseBindMatrices=a.accessorIndexMap.get(S));const _=g.getSkeleton();return _&&(v.skeleton=a.nodeIndexMap.get(_)),v.joints=g.listJoints().map(O=>a.nodeIndexMap.get(O)),a.skinIndexMap.set(g,E),v}),s.listNodes().forEach((g,E)=>{const v=i.nodes[E],S=g.getMesh();S&&(v.mesh=a.meshIndexMap.get(S));const _=g.getCamera();_&&(v.camera=a.cameraIndexMap.get(_));const O=g.getSkin();O&&(v.skin=a.skinIndexMap.get(O)),g.listChildren().length>0&&(v.children=g.listChildren().map(b=>a.nodeIndexMap.get(b)))}),i.animations=s.listAnimations().map((g,E)=>{const v=a.createPropertyDef(g),S=new Map;return v.samplers=g.listSamplers().map((_,O)=>{const b=a.createPropertyDef(_);return b.input=a.accessorIndexMap.get(_.getInput()),b.output=a.accessorIndexMap.get(_.getOutput()),b.interpolation=_.getInterpolation(),S.set(_,O),b}),v.channels=g.listChannels().map(_=>{const O=a.createPropertyDef(_);return O.sampler=S.get(_.getSampler()),O.target={node:a.nodeIndexMap.get(_.getTargetNode()),path:_.getTargetPath()},O}),a.animationIndexMap.set(g,E),v}),i.scenes=s.listScenes().map((g,E)=>{const v=a.createPropertyDef(g);return v.nodes=g.listChildren().map(S=>a.nodeIndexMap.get(S)),a.sceneIndexMap.set(g,E),v});const w=s.getDefaultScene();return w&&(i.scene=s.listScenes().indexOf(w)),i.extensionsUsed=u.map(g=>g.extensionName),i.extensionsRequired=f.map(g=>g.extensionName),u.forEach(g=>g.write(a)),kg(i),o}}function kg(t){const e=[];for(const n in t){const r=t[n];(Array.isArray(r)&&r.length===0||r===null||r===""||r&&typeof r=="object"&&Object.keys(r).length===0)&&e.push(n)}for(const n of e)delete t[n]}var ai;(function(t){t[t.JSON=1313821514]="JSON",t[t.BIN=5130562]="BIN"})(ai||(ai={}));class Eg{constructor(){this._logger=tt.DEFAULT_INSTANCE,this._extensions=new Set,this._dependencies={},this._vertexLayout=ii.INTERLEAVED,this._strictResources=!0,this.lastReadBytes=0,this.lastWriteBytes=0}setLogger(e){return this._logger=e,this}registerExtensions(e){for(const n of e)this._extensions.add(n),n.register();return this}registerDependencies(e){return Object.assign(this._dependencies,e),this}setVertexLayout(e){return this._vertexLayout=e,this}setStrictResources(e){return this._strictResources=e,this}async read(e){return await this.readJSON(await this.readAsJSON(e))}async readAsJSON(e){const n=await this.readURI(e,"view");this.lastReadBytes=n.byteLength;const r=ml(n)?this._binaryToJSON(n):{json:JSON.parse(ie.decodeText(n)),resources:{}};return await this._readResourcesExternal(r,this.dirname(e)),this._readResourcesInternal(r),r}async readJSON(e){return e=this._copyJSON(e),this._readResourcesInternal(e),mg.read(e,{extensions:Array.from(this._extensions),dependencies:this._dependencies,logger:this._logger})}async binaryToJSON(e){const n=this._binaryToJSON(ie.assertView(e));this._readResourcesInternal(n);const r=n.json;if(r.buffers&&r.buffers.some(s=>Tg(n,s)))throw new Error("Cannot resolve external buffers with binaryToJSON().");if(r.images&&r.images.some(s=>Ng(n,s)))throw new Error("Cannot resolve external images with binaryToJSON().");return n}async readBinary(e){return this.readJSON(await this.binaryToJSON(ie.assertView(e)))}async writeJSON(e,n={}){if(n.format===Yt.GLB&&e.getRoot().listBuffers().length>1)throw new Error("GLB must have 01 buffers.");return Sg.write(e,{format:n.format||Yt.GLTF,basename:n.basename||"",logger:this._logger,vertexLayout:this._vertexLayout,dependencies:Ue({},this._dependencies),extensions:Array.from(this._extensions)})}async writeBinary(e){const{json:n,resources:r}=await this.writeJSON(e,{format:Yt.GLB}),s=new Uint32Array([1179937895,2,12]),i=JSON.stringify(n),o=ie.pad(ie.encodeText(i),32),a=ie.toView(new Uint32Array([o.byteLength,1313821514])),l=ie.concat([a,o]);s[s.length-1]+=l.byteLength;const c=Object.values(r)[0];if(!c||!c.byteLength)return ie.concat([ie.toView(s),l]);const u=ie.pad(c,0),f=ie.toView(new Uint32Array([u.byteLength,5130562])),h=ie.concat([f,u]);return s[s.length-1]+=h.byteLength,ie.concat([ie.toView(s),l,h])}async _readResourcesExternal(e,n){var r=this;const s=e.json.images||[],i=e.json.buffers||[],o=[...s,...i].map(async function(a){const l=a.uri;if(!l||l.match(/data:/))return Promise.resolve();try{e.resources[l]=await r.readURI(r.resolve(n,l),"view"),r.lastReadBytes+=e.resources[l].byteLength}catch(c){if(!r._strictResources&&s.includes(a))r._logger.warn(`Failed to load image URI, "${l}". ${c}`),e.resources[l]=null;else throw c}});await Promise.all(o)}_readResourcesInternal(e){function n(i){if(i.uri){if(i.uri in e.resources){ie.assertView(e.resources[i.uri]);return}if(i.uri.match(/data:/)){const o=`__${og()}.${pr.extension(i.uri)}`;e.resources[o]=ie.createBufferFromDataURI(i.uri),i.uri=o}}}(e.json.images||[]).forEach(i=>{if(i.bufferView===void 0&&i.uri===void 0)throw new Error("Missing resource URI or buffer view.");n(i)}),(e.json.buffers||[]).forEach(n)}_copyJSON(e){const{images:n,buffers:r}=e.json;return e={json:Ue({},e.json),resources:Ue({},e.resources)},n&&(e.json.images=n.map(s=>Ue({},s))),r&&(e.json.buffers=r.map(s=>Ue({},s))),e}_binaryToJSON(e){if(!ml(e))throw new Error("Invalid glTF 2.0 binary.");const n=new Uint32Array(e.buffer,e.byteOffset+12,2);if(n[1]!==ai.JSON)throw new Error("Missing required GLB JSON chunk.");const r=20,s=n[0],i=ie.decodeText(ie.toView(e,r,s)),o=JSON.parse(i),a=r+s;if(e.byteLength<=a)return{json:o,resources:{}};const l=new Uint32Array(e.buffer,e.byteOffset+a,2);if(l[1]!==ai.BIN)return{json:o,resources:{}};const c=l[0],u=ie.toView(e,a+8,c);return{json:o,resources:{[si]:u}}}}function Tg(t,e){return e.uri!==void 0&&!(e.uri in t.resources)}function Ng(t,e){return e.uri!==void 0&&!(e.uri in t.resources)&&e.bufferView===void 0}function ml(t){if(t.byteLength<3*Uint32Array.BYTES_PER_ELEMENT)return!1;const e=new Uint32Array(t.buffer,t.byteOffset,3);return e[0]===1179937895&&e[1]===2}class Ag extends Eg{constructor(e=Ur.DEFAULT_INIT){super(),this._fetchConfig=void 0,this._fetchConfig=e}async readURI(e,n){const r=await fetch(e,this._fetchConfig);switch(n){case"view":return new Uint8Array(await r.arrayBuffer());case"text":return r.text()}}resolve(e,n){return Ur.resolve(e,n)}dirname(e){return Ur.dirname(e)}}async function uu(t){const e=URL.createObjectURL(new Blob([t])),n=new Ag,r=await n.read(e);return await n.writeBinary(r)}function M(t,e,n){function r(a,l){if(a._zod||Object.defineProperty(a,"_zod",{value:{def:l,constr:o,traits:new Set},enumerable:!1}),a._zod.traits.has(t))return;a._zod.traits.add(t),e(a,l);const c=o.prototype,u=Object.keys(c);for(let f=0;f<u.length;f++){const h=u[f];h in a||(a[h]=c[h].bind(a))}}const s=n?.Parent??Object;class i extends s{}Object.defineProperty(i,"name",{value:t});function o(a){var l;const c=n?.Parent?new i:this;r(c,a),(l=c._zod).deferred??(l.deferred=[]);for(const u of c._zod.deferred)u();return c}return Object.defineProperty(o,"init",{value:r}),Object.defineProperty(o,Symbol.hasInstance,{value:a=>n?.Parent&&a instanceof n.Parent?!0:a?._zod?.traits?.has(t)}),Object.defineProperty(o,"name",{value:t}),o}class ur extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class fu extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const du={};function nn(t){return du}function hu(t){const e=Object.values(t).filter(r=>typeof r=="number");return Object.entries(t).filter(([r,s])=>e.indexOf(+r)===-1).map(([r,s])=>s)}function Zo(t,e){return typeof e=="bigint"?e.toString():e}function ga(t){return{get value(){{const e=t();return Object.defineProperty(this,"value",{value:e}),e}}}}function ya(t){return t==null}function ba(t){const e=t.startsWith("^")?1:0,n=t.endsWith("$")?t.length-1:t.length;return t.slice(e,n)}function Og(t,e){const n=(t.toString().split(".")[1]||"").length,r=e.toString();let s=(r.split(".")[1]||"").length;if(s===0&&/\d?e-\d?/.test(r)){const l=r.match(/\d?e-(\d?)/);l?.[1]&&(s=Number.parseInt(l[1]))}const i=n>s?n:s,o=Number.parseInt(t.toFixed(i).replace(".","")),a=Number.parseInt(e.toFixed(i).replace(".",""));return o%a/10**i}const gl=Symbol("evaluating");function re(t,e,n){let r;Object.defineProperty(t,e,{get(){if(r!==gl)return r===void 0&&(r=gl,r=n()),r},set(s){Object.defineProperty(t,e,{value:s})},configurable:!0})}function Cn(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0})}function cn(...t){const e={};for(const n of t){const r=Object.getOwnPropertyDescriptors(n);Object.assign(e,r)}return Object.defineProperties({},e)}function yl(t){return JSON.stringify(t)}function Cg(t){return t.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const pu="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function li(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}const jg=ga(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function mr(t){if(li(t)===!1)return!1;const e=t.constructor;if(e===void 0||typeof e!="function")return!0;const n=e.prototype;return!(li(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function mu(t){return mr(t)?{...t}:Array.isArray(t)?[...t]:t}const Ig=new Set(["string","number","symbol"]);function gr(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function un(t,e,n){const r=new t._zod.constr(e??t._zod.def);return(!e||n?.parent)&&(r._zod.parent=t),r}function V(t){const e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function Mg(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}const Rg={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function Pg(t,e){const n=t._zod.def,r=n.checks;if(r&&r.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");const i=cn(t._zod.def,{get shape(){const o={};for(const a in e){if(!(a in n.shape))throw new Error(`Unrecognized key: "${a}"`);e[a]&&(o[a]=n.shape[a])}return Cn(this,"shape",o),o},checks:[]});return un(t,i)}function $g(t,e){const n=t._zod.def,r=n.checks;if(r&&r.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");const i=cn(t._zod.def,{get shape(){const o={...t._zod.def.shape};for(const a in e){if(!(a in n.shape))throw new Error(`Unrecognized key: "${a}"`);e[a]&&delete o[a]}return Cn(this,"shape",o),o},checks:[]});return un(t,i)}function zg(t,e){if(!mr(e))throw new Error("Invalid input to extend: expected a plain object");const n=t._zod.def.checks;if(n&&n.length>0){const i=t._zod.def.shape;for(const o in e)if(Object.getOwnPropertyDescriptor(i,o)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}const s=cn(t._zod.def,{get shape(){const i={...t._zod.def.shape,...e};return Cn(this,"shape",i),i}});return un(t,s)}function Lg(t,e){if(!mr(e))throw new Error("Invalid input to safeExtend: expected a plain object");const n=cn(t._zod.def,{get shape(){const r={...t._zod.def.shape,...e};return Cn(this,"shape",r),r}});return un(t,n)}function Dg(t,e){const n=cn(t._zod.def,{get shape(){const r={...t._zod.def.shape,...e._zod.def.shape};return Cn(this,"shape",r),r},get catchall(){return e._zod.def.catchall},checks:[]});return un(t,n)}function Fg(t,e,n){const s=e._zod.def.checks;if(s&&s.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");const o=cn(e._zod.def,{get shape(){const a=e._zod.def.shape,l={...a};if(n)for(const c in n){if(!(c in a))throw new Error(`Unrecognized key: "${c}"`);n[c]&&(l[c]=t?new t({type:"optional",innerType:a[c]}):a[c])}else for(const c in a)l[c]=t?new t({type:"optional",innerType:a[c]}):a[c];return Cn(this,"shape",l),l},checks:[]});return un(e,o)}function Bg(t,e,n){const r=cn(e._zod.def,{get shape(){const s=e._zod.def.shape,i={...s};if(n)for(const o in n){if(!(o in i))throw new Error(`Unrecognized key: "${o}"`);n[o]&&(i[o]=new t({type:"nonoptional",innerType:s[o]}))}else for(const o in s)i[o]=new t({type:"nonoptional",innerType:s[o]});return Cn(this,"shape",i),i}});return un(e,r)}function nr(t,e=0){if(t.aborted===!0)return!0;for(let n=e;n<t.issues.length;n++)if(t.issues[n]?.continue!==!0)return!0;return!1}function gn(t,e){return e.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(t),n})}function Os(t){return typeof t=="string"?t:t?.message}function rn(t,e,n){const r={...t,path:t.path??[]};if(!t.message){const s=Os(t.inst?._zod.def?.error?.(t))??Os(e?.error?.(t))??Os(n.customError?.(t))??Os(n.localeError?.(t))??"Invalid input";r.message=s}return delete r.inst,delete r.continue,e?.reportInput||delete r.input,r}function wa(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function Yr(...t){const[e,n,r]=t;return typeof e=="string"?{message:e,code:"custom",input:n,inst:r}:{...e}}const gu=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,Zo,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},yu=M("$ZodError",gu),bu=M("$ZodError",gu,{Parent:Error});function Ug(t,e=n=>n.message){const n={},r=[];for(const s of t.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}function Vg(t,e=n=>n.message){const n={_errors:[]},r=s=>{for(const i of s.issues)if(i.code==="invalid_union"&&i.errors.length)i.errors.map(o=>r({issues:o}));else if(i.code==="invalid_key")r({issues:i.issues});else if(i.code==="invalid_element")r({issues:i.issues});else if(i.path.length===0)n._errors.push(e(i));else{let o=n,a=0;for(;a<i.path.length;){const l=i.path[a];a===i.path.length-1?(o[l]=o[l]||{_errors:[]},o[l]._errors.push(e(i))):o[l]=o[l]||{_errors:[]},o=o[l],a++}}};return r(t),n}const va=t=>(e,n,r,s)=>{const i=r?Object.assign(r,{async:!1}):{async:!1},o=e._zod.run({value:n,issues:[]},i);if(o instanceof Promise)throw new ur;if(o.issues.length){const a=new(s?.Err??t)(o.issues.map(l=>rn(l,i,nn())));throw pu(a,s?.callee),a}return o.value},xa=t=>async(e,n,r,s)=>{const i=r?Object.assign(r,{async:!0}):{async:!0};let o=e._zod.run({value:n,issues:[]},i);if(o instanceof Promise&&(o=await o),o.issues.length){const a=new(s?.Err??t)(o.issues.map(l=>rn(l,i,nn())));throw pu(a,s?.callee),a}return o.value},Ei=t=>(e,n,r)=>{const s=r?{...r,async:!1}:{async:!1},i=e._zod.run({value:n,issues:[]},s);if(i instanceof Promise)throw new ur;return i.issues.length?{success:!1,error:new(t??yu)(i.issues.map(o=>rn(o,s,nn())))}:{success:!0,data:i.value}},Zg=Ei(bu),Ti=t=>async(e,n,r)=>{const s=r?Object.assign(r,{async:!0}):{async:!0};let i=e._zod.run({value:n,issues:[]},s);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new t(i.issues.map(o=>rn(o,s,nn())))}:{success:!0,data:i.value}},Wg=Ti(bu),qg=t=>(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return va(t)(e,n,s)},Gg=t=>(e,n,r)=>va(t)(e,n,r),Hg=t=>async(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return xa(t)(e,n,s)},Kg=t=>async(e,n,r)=>xa(t)(e,n,r),Yg=t=>(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Ei(t)(e,n,s)},Xg=t=>(e,n,r)=>Ei(t)(e,n,r),Qg=t=>async(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Ti(t)(e,n,s)},Jg=t=>async(e,n,r)=>Ti(t)(e,n,r),e0=/^[cC][^\s-]{8,}$/,t0=/^[0-9a-z]+$/,n0=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,r0=/^[0-9a-vA-V]{20}$/,s0=/^[A-Za-z0-9]{27}$/,i0=/^[a-zA-Z0-9_-]{21}$/,o0=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,a0=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,bl=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,l0=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,c0="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function u0(){return new RegExp(c0,"u")}const f0=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,d0=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,h0=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,p0=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,m0=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,wu=/^[A-Za-z0-9_-]*$/,g0=/^\+[1-9]\d{6,14}$/,vu="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",y0=new RegExp(`^${vu}$`);function xu(t){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function b0(t){return new RegExp(`^${xu(t)}$`)}function w0(t){const e=xu({precision:t.precision}),n=["Z"];t.local&&n.push(""),t.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${e}(?:${n.join("|")})`;return new RegExp(`^${vu}T(?:${r})$`)}const v0=t=>{const e=t?`[\\s\\S]{${t?.minimum??0},${t?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},x0=/^-?\d+$/,_u=/^-?\d+(?:\.\d+)?$/,_0=/^(?:true|false)$/i,S0=/^[^A-Z]*$/,k0=/^[^a-z]*$/,qe=M("$ZodCheck",(t,e)=>{var n;t._zod??(t._zod={}),t._zod.def=e,(n=t._zod).onattach??(n.onattach=[])}),Su={number:"number",bigint:"bigint",object:"date"},ku=M("$ZodCheckLessThan",(t,e)=>{qe.init(t,e);const n=Su[typeof e.value];t._zod.onattach.push(r=>{const s=r._zod.bag,i=(e.inclusive?s.maximum:s.exclusiveMaximum)??Number.POSITIVE_INFINITY;e.value<i&&(e.inclusive?s.maximum=e.value:s.exclusiveMaximum=e.value)}),t._zod.check=r=>{(e.inclusive?r.value<=e.value:r.value<e.value)||r.issues.push({origin:n,code:"too_big",maximum:typeof e.value=="object"?e.value.getTime():e.value,input:r.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),Eu=M("$ZodCheckGreaterThan",(t,e)=>{qe.init(t,e);const n=Su[typeof e.value];t._zod.onattach.push(r=>{const s=r._zod.bag,i=(e.inclusive?s.minimum:s.exclusiveMinimum)??Number.NEGATIVE_INFINITY;e.value>i&&(e.inclusive?s.minimum=e.value:s.exclusiveMinimum=e.value)}),t._zod.check=r=>{(e.inclusive?r.value>=e.value:r.value>e.value)||r.issues.push({origin:n,code:"too_small",minimum:typeof e.value=="object"?e.value.getTime():e.value,input:r.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),E0=M("$ZodCheckMultipleOf",(t,e)=>{qe.init(t,e),t._zod.onattach.push(n=>{var r;(r=n._zod.bag).multipleOf??(r.multipleOf=e.value)}),t._zod.check=n=>{if(typeof n.value!=typeof e.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%e.value===BigInt(0):Og(n.value,e.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:e.value,input:n.value,inst:t,continue:!e.abort})}}),T0=M("$ZodCheckNumberFormat",(t,e)=>{qe.init(t,e),e.format=e.format||"float64";const n=e.format?.includes("int"),r=n?"int":"number",[s,i]=Rg[e.format];t._zod.onattach.push(o=>{const a=o._zod.bag;a.format=e.format,a.minimum=s,a.maximum=i,n&&(a.pattern=x0)}),t._zod.check=o=>{const a=o.value;if(n){if(!Number.isInteger(a)){o.issues.push({expected:r,format:e.format,code:"invalid_type",continue:!1,input:a,inst:t});return}if(!Number.isSafeInteger(a)){a>0?o.issues.push({input:a,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:r,inclusive:!0,continue:!e.abort}):o.issues.push({input:a,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:r,inclusive:!0,continue:!e.abort});return}}a<s&&o.issues.push({origin:"number",input:a,code:"too_small",minimum:s,inclusive:!0,inst:t,continue:!e.abort}),a>i&&o.issues.push({origin:"number",input:a,code:"too_big",maximum:i,inclusive:!0,inst:t,continue:!e.abort})}}),N0=M("$ZodCheckMaxLength",(t,e)=>{var n;qe.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!ya(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<s&&(r._zod.bag.maximum=e.maximum)}),t._zod.check=r=>{const s=r.value;if(s.length<=e.maximum)return;const o=wa(s);r.issues.push({origin:o,code:"too_big",maximum:e.maximum,inclusive:!0,input:s,inst:t,continue:!e.abort})}}),A0=M("$ZodCheckMinLength",(t,e)=>{var n;qe.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!ya(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>s&&(r._zod.bag.minimum=e.minimum)}),t._zod.check=r=>{const s=r.value;if(s.length>=e.minimum)return;const o=wa(s);r.issues.push({origin:o,code:"too_small",minimum:e.minimum,inclusive:!0,input:s,inst:t,continue:!e.abort})}}),O0=M("$ZodCheckLengthEquals",(t,e)=>{var n;qe.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!ya(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag;s.minimum=e.length,s.maximum=e.length,s.length=e.length}),t._zod.check=r=>{const s=r.value,i=s.length;if(i===e.length)return;const o=wa(s),a=i>e.length;r.issues.push({origin:o,...a?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:r.value,inst:t,continue:!e.abort})}}),Ni=M("$ZodCheckStringFormat",(t,e)=>{var n,r;qe.init(t,e),t._zod.onattach.push(s=>{const i=s._zod.bag;i.format=e.format,e.pattern&&(i.patterns??(i.patterns=new Set),i.patterns.add(e.pattern))}),e.pattern?(n=t._zod).check??(n.check=s=>{e.pattern.lastIndex=0,!e.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:e.format,input:s.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(r=t._zod).check??(r.check=()=>{})}),C0=M("$ZodCheckRegex",(t,e)=>{Ni.init(t,e),t._zod.check=n=>{e.pattern.lastIndex=0,!e.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),j0=M("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=S0),Ni.init(t,e)}),I0=M("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=k0),Ni.init(t,e)}),M0=M("$ZodCheckIncludes",(t,e)=>{qe.init(t,e);const n=gr(e.includes),r=new RegExp(typeof e.position=="number"?`^.{${e.position}}${n}`:n);e.pattern=r,t._zod.onattach.push(s=>{const i=s._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(r)}),t._zod.check=s=>{s.value.includes(e.includes,e.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:s.value,inst:t,continue:!e.abort})}}),R0=M("$ZodCheckStartsWith",(t,e)=>{qe.init(t,e);const n=new RegExp(`^${gr(e.prefix)}.*`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),t._zod.check=r=>{r.value.startsWith(e.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:r.value,inst:t,continue:!e.abort})}}),P0=M("$ZodCheckEndsWith",(t,e)=>{qe.init(t,e);const n=new RegExp(`.*${gr(e.suffix)}$`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),t._zod.check=r=>{r.value.endsWith(e.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:r.value,inst:t,continue:!e.abort})}}),$0=M("$ZodCheckOverwrite",(t,e)=>{qe.init(t,e),t._zod.check=n=>{n.value=e.tx(n.value)}});class z0{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const r=e.split(`
`).filter(o=>o),s=Math.min(...r.map(o=>o.length-o.trimStart().length)),i=r.map(o=>o.slice(s)).map(o=>" ".repeat(this.indent*2)+o);for(const o of i)this.content.push(o)}compile(){const e=Function,n=this?.args,s=[...(this?.content??[""]).map(i=>`  ${i}`)];return new e(...n,s.join(`
`))}}const L0={major:4,minor:3,patch:5},de=M("$ZodType",(t,e)=>{var n;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=L0;const r=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&r.unshift(t);for(const s of r)for(const i of s._zod.onattach)i(t);if(r.length===0)(n=t._zod).deferred??(n.deferred=[]),t._zod.deferred?.push(()=>{t._zod.run=t._zod.parse});else{const s=(o,a,l)=>{let c=nr(o),u;for(const f of a){if(f._zod.def.when){if(!f._zod.def.when(o))continue}else if(c)continue;const h=o.issues.length,p=f._zod.check(o);if(p instanceof Promise&&l?.async===!1)throw new ur;if(u||p instanceof Promise)u=(u??Promise.resolve()).then(async()=>{await p,o.issues.length!==h&&(c||(c=nr(o,h)))});else{if(o.issues.length===h)continue;c||(c=nr(o,h))}}return u?u.then(()=>o):o},i=(o,a,l)=>{if(nr(o))return o.aborted=!0,o;const c=s(a,r,l);if(c instanceof Promise){if(l.async===!1)throw new ur;return c.then(u=>t._zod.parse(u,l))}return t._zod.parse(c,l)};t._zod.run=(o,a)=>{if(a.skipChecks)return t._zod.parse(o,a);if(a.direction==="backward"){const c=t._zod.parse({value:o.value,issues:[]},{...a,skipChecks:!0});return c instanceof Promise?c.then(u=>i(u,o,a)):i(c,o,a)}const l=t._zod.parse(o,a);if(l instanceof Promise){if(a.async===!1)throw new ur;return l.then(c=>s(c,r,a))}return s(l,r,a)}}re(t,"~standard",()=>({validate:s=>{try{const i=Zg(t,s);return i.success?{value:i.data}:{issues:i.error?.issues}}catch{return Wg(t,s).then(o=>o.success?{value:o.data}:{issues:o.error?.issues})}},vendor:"zod",version:1}))}),_a=M("$ZodString",(t,e)=>{de.init(t,e),t._zod.pattern=[...t?._zod.bag?.patterns??[]].pop()??v0(t._zod.bag),t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:t}),n}}),be=M("$ZodStringFormat",(t,e)=>{Ni.init(t,e),_a.init(t,e)}),D0=M("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=a0),be.init(t,e)}),F0=M("$ZodUUID",(t,e)=>{if(e.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(r===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=bl(r))}else e.pattern??(e.pattern=bl());be.init(t,e)}),B0=M("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=l0),be.init(t,e)}),U0=M("$ZodURL",(t,e)=>{be.init(t,e),t._zod.check=n=>{try{const r=n.value.trim(),s=new URL(r);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(s.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:e.hostname.source,input:n.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:n.value,inst:t,continue:!e.abort})),e.normalize?n.value=s.href:n.value=r;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:t,continue:!e.abort})}}}),V0=M("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=u0()),be.init(t,e)}),Z0=M("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=i0),be.init(t,e)}),W0=M("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=e0),be.init(t,e)}),q0=M("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=t0),be.init(t,e)}),G0=M("$ZodULID",(t,e)=>{e.pattern??(e.pattern=n0),be.init(t,e)}),H0=M("$ZodXID",(t,e)=>{e.pattern??(e.pattern=r0),be.init(t,e)}),K0=M("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=s0),be.init(t,e)}),Y0=M("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=w0(e)),be.init(t,e)}),X0=M("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=y0),be.init(t,e)}),Q0=M("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=b0(e)),be.init(t,e)}),J0=M("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=o0),be.init(t,e)}),e1=M("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=f0),be.init(t,e),t._zod.bag.format="ipv4"}),t1=M("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=d0),be.init(t,e),t._zod.bag.format="ipv6",t._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:t,continue:!e.abort})}}}),n1=M("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=h0),be.init(t,e)}),r1=M("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=p0),be.init(t,e),t._zod.check=n=>{const r=n.value.split("/");try{if(r.length!==2)throw new Error;const[s,i]=r;if(!i)throw new Error;const o=Number(i);if(`${o}`!==i)throw new Error;if(o<0||o>128)throw new Error;new URL(`http://[${s}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:t,continue:!e.abort})}}});function Tu(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}const s1=M("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=m0),be.init(t,e),t._zod.bag.contentEncoding="base64",t._zod.check=n=>{Tu(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:t,continue:!e.abort})}});function i1(t){if(!wu.test(t))return!1;const e=t.replace(/[-_]/g,r=>r==="-"?"+":"/"),n=e.padEnd(Math.ceil(e.length/4)*4,"=");return Tu(n)}const o1=M("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=wu),be.init(t,e),t._zod.bag.contentEncoding="base64url",t._zod.check=n=>{i1(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:t,continue:!e.abort})}}),a1=M("$ZodE164",(t,e)=>{e.pattern??(e.pattern=g0),be.init(t,e)});function l1(t,e=null){try{const n=t.split(".");if(n.length!==3)return!1;const[r]=n;if(!r)return!1;const s=JSON.parse(atob(r));return!("typ"in s&&s?.typ!=="JWT"||!s.alg||e&&(!("alg"in s)||s.alg!==e))}catch{return!1}}const c1=M("$ZodJWT",(t,e)=>{be.init(t,e),t._zod.check=n=>{l1(n.value,e.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:t,continue:!e.abort})}}),Nu=M("$ZodNumber",(t,e)=>{de.init(t,e),t._zod.pattern=t._zod.bag.pattern??_u,t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=Number(n.value)}catch{}const s=n.value;if(typeof s=="number"&&!Number.isNaN(s)&&Number.isFinite(s))return n;const i=typeof s=="number"?Number.isNaN(s)?"NaN":Number.isFinite(s)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:s,inst:t,...i?{received:i}:{}}),n}}),u1=M("$ZodNumberFormat",(t,e)=>{T0.init(t,e),Nu.init(t,e)}),f1=M("$ZodBoolean",(t,e)=>{de.init(t,e),t._zod.pattern=_0,t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=!!n.value}catch{}const s=n.value;return typeof s=="boolean"||n.issues.push({expected:"boolean",code:"invalid_type",input:s,inst:t}),n}}),d1=M("$ZodUnknown",(t,e)=>{de.init(t,e),t._zod.parse=n=>n}),h1=M("$ZodNever",(t,e)=>{de.init(t,e),t._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:t}),n)}),p1=M("$ZodDate",(t,e)=>{de.init(t,e),t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=new Date(n.value)}catch{}const s=n.value,i=s instanceof Date;return i&&!Number.isNaN(s.getTime())||n.issues.push({expected:"date",code:"invalid_type",input:s,...i?{received:"Invalid Date"}:{},inst:t}),n}});function wl(t,e,n){t.issues.length&&e.issues.push(...gn(n,t.issues)),e.value[n]=t.value}const m1=M("$ZodArray",(t,e)=>{de.init(t,e),t._zod.parse=(n,r)=>{const s=n.value;if(!Array.isArray(s))return n.issues.push({expected:"array",code:"invalid_type",input:s,inst:t}),n;n.value=Array(s.length);const i=[];for(let o=0;o<s.length;o++){const a=s[o],l=e.element._zod.run({value:a,issues:[]},r);l instanceof Promise?i.push(l.then(c=>wl(c,n,o))):wl(l,n,o)}return i.length?Promise.all(i).then(()=>n):n}});function ci(t,e,n,r,s){if(t.issues.length){if(s&&!(n in r))return;e.issues.push(...gn(n,t.issues))}t.value===void 0?n in r&&(e.value[n]=void 0):e.value[n]=t.value}function Au(t){const e=Object.keys(t.shape);for(const r of e)if(!t.shape?.[r]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${r}": expected a Zod schema`);const n=Mg(t.shape);return{...t,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(n)}}function Ou(t,e,n,r,s,i){const o=[],a=s.keySet,l=s.catchall._zod,c=l.def.type,u=l.optout==="optional";for(const f in e){if(a.has(f))continue;if(c==="never"){o.push(f);continue}const h=l.run({value:e[f],issues:[]},r);h instanceof Promise?t.push(h.then(p=>ci(p,n,f,e,u))):ci(h,n,f,e,u)}return o.length&&n.issues.push({code:"unrecognized_keys",keys:o,input:e,inst:i}),t.length?Promise.all(t).then(()=>n):n}const g1=M("$ZodObject",(t,e)=>{if(de.init(t,e),!Object.getOwnPropertyDescriptor(e,"shape")?.get){const a=e.shape;Object.defineProperty(e,"shape",{get:()=>{const l={...a};return Object.defineProperty(e,"shape",{value:l}),l}})}const r=ga(()=>Au(e));re(t._zod,"propValues",()=>{const a=e.shape,l={};for(const c in a){const u=a[c]._zod;if(u.values){l[c]??(l[c]=new Set);for(const f of u.values)l[c].add(f)}}return l});const s=li,i=e.catchall;let o;t._zod.parse=(a,l)=>{o??(o=r.value);const c=a.value;if(!s(c))return a.issues.push({expected:"object",code:"invalid_type",input:c,inst:t}),a;a.value={};const u=[],f=o.shape;for(const h of o.keys){const p=f[h],y=p._zod.optout==="optional",m=p._zod.run({value:c[h],issues:[]},l);m instanceof Promise?u.push(m.then(w=>ci(w,a,h,c,y))):ci(m,a,h,c,y)}return i?Ou(u,c,a,l,r.value,t):u.length?Promise.all(u).then(()=>a):a}}),y1=M("$ZodObjectJIT",(t,e)=>{g1.init(t,e);const n=t._zod.parse,r=ga(()=>Au(e)),s=h=>{const p=new z0(["shape","payload","ctx"]),y=r.value,m=v=>{const S=yl(v);return`shape[${S}]._zod.run({ value: input[${S}], issues: [] }, ctx)`};p.write("const input = payload.value;");const w=Object.create(null);let g=0;for(const v of y.keys)w[v]=`key_${g++}`;p.write("const newResult = {};");for(const v of y.keys){const S=w[v],_=yl(v),b=h[v]?._zod?.optout==="optional";p.write(`const ${S} = ${m(v)};`),b?p.write(`
        if (${S}.issues.length) {
          if (${_} in input) {
            payload.issues = payload.issues.concat(${S}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${_}, ...iss.path] : [${_}]
            })));
          }
        }
        
        if (${S}.value === undefined) {
          if (${_} in input) {
            newResult[${_}] = undefined;
          }
        } else {
          newResult[${_}] = ${S}.value;
        }
        
      `):p.write(`
        if (${S}.issues.length) {
          payload.issues = payload.issues.concat(${S}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${_}, ...iss.path] : [${_}]
          })));
        }
        
        if (${S}.value === undefined) {
          if (${_} in input) {
            newResult[${_}] = undefined;
          }
        } else {
          newResult[${_}] = ${S}.value;
        }
        
      `)}p.write("payload.value = newResult;"),p.write("return payload;");const E=p.compile();return(v,S)=>E(h,v,S)};let i;const o=li,a=!du.jitless,c=a&&jg.value,u=e.catchall;let f;t._zod.parse=(h,p)=>{f??(f=r.value);const y=h.value;return o(y)?a&&c&&p?.async===!1&&p.jitless!==!0?(i||(i=s(e.shape)),h=i(h,p),u?Ou([],y,h,p,f,t):h):n(h,p):(h.issues.push({expected:"object",code:"invalid_type",input:y,inst:t}),h)}});function vl(t,e,n,r){for(const i of t)if(i.issues.length===0)return e.value=i.value,e;const s=t.filter(i=>!nr(i));return s.length===1?(e.value=s[0].value,s[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:n,errors:t.map(i=>i.issues.map(o=>rn(o,r,nn())))}),e)}const b1=M("$ZodUnion",(t,e)=>{de.init(t,e),re(t._zod,"optin",()=>e.options.some(s=>s._zod.optin==="optional")?"optional":void 0),re(t._zod,"optout",()=>e.options.some(s=>s._zod.optout==="optional")?"optional":void 0),re(t._zod,"values",()=>{if(e.options.every(s=>s._zod.values))return new Set(e.options.flatMap(s=>Array.from(s._zod.values)))}),re(t._zod,"pattern",()=>{if(e.options.every(s=>s._zod.pattern)){const s=e.options.map(i=>i._zod.pattern);return new RegExp(`^(${s.map(i=>ba(i.source)).join("|")})$`)}});const n=e.options.length===1,r=e.options[0]._zod.run;t._zod.parse=(s,i)=>{if(n)return r(s,i);let o=!1;const a=[];for(const l of e.options){const c=l._zod.run({value:s.value,issues:[]},i);if(c instanceof Promise)a.push(c),o=!0;else{if(c.issues.length===0)return c;a.push(c)}}return o?Promise.all(a).then(l=>vl(l,s,t,i)):vl(a,s,t,i)}}),w1=M("$ZodIntersection",(t,e)=>{de.init(t,e),t._zod.parse=(n,r)=>{const s=n.value,i=e.left._zod.run({value:s,issues:[]},r),o=e.right._zod.run({value:s,issues:[]},r);return i instanceof Promise||o instanceof Promise?Promise.all([i,o]).then(([l,c])=>xl(n,l,c)):xl(n,i,o)}});function Wo(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(mr(t)&&mr(e)){const n=Object.keys(e),r=Object.keys(t).filter(i=>n.indexOf(i)!==-1),s={...t,...e};for(const i of r){const o=Wo(t[i],e[i]);if(!o.valid)return{valid:!1,mergeErrorPath:[i,...o.mergeErrorPath]};s[i]=o.data}return{valid:!0,data:s}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<t.length;r++){const s=t[r],i=e[r],o=Wo(s,i);if(!o.valid)return{valid:!1,mergeErrorPath:[r,...o.mergeErrorPath]};n.push(o.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function xl(t,e,n){const r=new Map;let s;for(const a of e.issues)if(a.code==="unrecognized_keys"){s??(s=a);for(const l of a.keys)r.has(l)||r.set(l,{}),r.get(l).l=!0}else t.issues.push(a);for(const a of n.issues)if(a.code==="unrecognized_keys")for(const l of a.keys)r.has(l)||r.set(l,{}),r.get(l).r=!0;else t.issues.push(a);const i=[...r].filter(([,a])=>a.l&&a.r).map(([a])=>a);if(i.length&&s&&t.issues.push({...s,keys:i}),nr(t))return t;const o=Wo(e.value,n.value);if(!o.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(o.mergeErrorPath)}`);return t.value=o.data,t}const v1=M("$ZodTuple",(t,e)=>{de.init(t,e);const n=e.items;t._zod.parse=(r,s)=>{const i=r.value;if(!Array.isArray(i))return r.issues.push({input:i,inst:t,expected:"tuple",code:"invalid_type"}),r;r.value=[];const o=[],a=[...n].reverse().findIndex(u=>u._zod.optin!=="optional"),l=a===-1?0:n.length-a;if(!e.rest){const u=i.length>n.length,f=i.length<l-1;if(u||f)return r.issues.push({...u?{code:"too_big",maximum:n.length,inclusive:!0}:{code:"too_small",minimum:n.length},input:i,inst:t,origin:"array"}),r}let c=-1;for(const u of n){if(c++,c>=i.length&&c>=l)continue;const f=u._zod.run({value:i[c],issues:[]},s);f instanceof Promise?o.push(f.then(h=>Cs(h,r,c))):Cs(f,r,c)}if(e.rest){const u=i.slice(n.length);for(const f of u){c++;const h=e.rest._zod.run({value:f,issues:[]},s);h instanceof Promise?o.push(h.then(p=>Cs(p,r,c))):Cs(h,r,c)}}return o.length?Promise.all(o).then(()=>r):r}});function Cs(t,e,n){t.issues.length&&e.issues.push(...gn(n,t.issues)),e.value[n]=t.value}const x1=M("$ZodRecord",(t,e)=>{de.init(t,e),t._zod.parse=(n,r)=>{const s=n.value;if(!mr(s))return n.issues.push({expected:"record",code:"invalid_type",input:s,inst:t}),n;const i=[],o=e.keyType._zod.values;if(o){n.value={};const a=new Set;for(const c of o)if(typeof c=="string"||typeof c=="number"||typeof c=="symbol"){a.add(typeof c=="number"?c.toString():c);const u=e.valueType._zod.run({value:s[c],issues:[]},r);u instanceof Promise?i.push(u.then(f=>{f.issues.length&&n.issues.push(...gn(c,f.issues)),n.value[c]=f.value})):(u.issues.length&&n.issues.push(...gn(c,u.issues)),n.value[c]=u.value)}let l;for(const c in s)a.has(c)||(l=l??[],l.push(c));l&&l.length>0&&n.issues.push({code:"unrecognized_keys",input:s,inst:t,keys:l})}else{n.value={};for(const a of Reflect.ownKeys(s)){if(a==="__proto__")continue;let l=e.keyType._zod.run({value:a,issues:[]},r);if(l instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(typeof a=="string"&&_u.test(a)&&l.issues.length&&l.issues.some(f=>f.code==="invalid_type"&&f.expected==="number")){const f=e.keyType._zod.run({value:Number(a),issues:[]},r);if(f instanceof Promise)throw new Error("Async schemas not supported in object keys currently");f.issues.length===0&&(l=f)}if(l.issues.length){e.mode==="loose"?n.value[a]=s[a]:n.issues.push({code:"invalid_key",origin:"record",issues:l.issues.map(f=>rn(f,r,nn())),input:a,path:[a],inst:t});continue}const u=e.valueType._zod.run({value:s[a],issues:[]},r);u instanceof Promise?i.push(u.then(f=>{f.issues.length&&n.issues.push(...gn(a,f.issues)),n.value[l.value]=f.value})):(u.issues.length&&n.issues.push(...gn(a,u.issues)),n.value[l.value]=u.value)}}return i.length?Promise.all(i).then(()=>n):n}}),_1=M("$ZodEnum",(t,e)=>{de.init(t,e);const n=hu(e.entries),r=new Set(n);t._zod.values=r,t._zod.pattern=new RegExp(`^(${n.filter(s=>Ig.has(typeof s)).map(s=>typeof s=="string"?gr(s):s.toString()).join("|")})$`),t._zod.parse=(s,i)=>{const o=s.value;return r.has(o)||s.issues.push({code:"invalid_value",values:n,input:o,inst:t}),s}}),S1=M("$ZodLiteral",(t,e)=>{if(de.init(t,e),e.values.length===0)throw new Error("Cannot create literal schema with no valid values");const n=new Set(e.values);t._zod.values=n,t._zod.pattern=new RegExp(`^(${e.values.map(r=>typeof r=="string"?gr(r):r?gr(r.toString()):String(r)).join("|")})$`),t._zod.parse=(r,s)=>{const i=r.value;return n.has(i)||r.issues.push({code:"invalid_value",values:e.values,input:i,inst:t}),r}}),k1=M("$ZodTransform",(t,e)=>{de.init(t,e),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new fu(t.constructor.name);const s=e.transform(n.value,n);if(r.async)return(s instanceof Promise?s:Promise.resolve(s)).then(o=>(n.value=o,n));if(s instanceof Promise)throw new ur;return n.value=s,n}});function _l(t,e){return t.issues.length&&e===void 0?{issues:[],value:void 0}:t}const Cu=M("$ZodOptional",(t,e)=>{de.init(t,e),t._zod.optin="optional",t._zod.optout="optional",re(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),re(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${ba(n.source)})?$`):void 0}),t._zod.parse=(n,r)=>{if(e.innerType._zod.optin==="optional"){const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(i=>_l(i,n.value)):_l(s,n.value)}return n.value===void 0?n:e.innerType._zod.run(n,r)}}),E1=M("$ZodExactOptional",(t,e)=>{Cu.init(t,e),re(t._zod,"values",()=>e.innerType._zod.values),re(t._zod,"pattern",()=>e.innerType._zod.pattern),t._zod.parse=(n,r)=>e.innerType._zod.run(n,r)}),T1=M("$ZodNullable",(t,e)=>{de.init(t,e),re(t._zod,"optin",()=>e.innerType._zod.optin),re(t._zod,"optout",()=>e.innerType._zod.optout),re(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${ba(n.source)}|null)$`):void 0}),re(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(n,r)=>n.value===null?n:e.innerType._zod.run(n,r)}),N1=M("$ZodDefault",(t,e)=>{de.init(t,e),t._zod.optin="optional",re(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);if(n.value===void 0)return n.value=e.defaultValue,n;const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(i=>Sl(i,e)):Sl(s,e)}});function Sl(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}const A1=M("$ZodPrefault",(t,e)=>{de.init(t,e),t._zod.optin="optional",re(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>(r.direction==="backward"||n.value===void 0&&(n.value=e.defaultValue),e.innerType._zod.run(n,r))}),O1=M("$ZodNonOptional",(t,e)=>{de.init(t,e),re(t._zod,"values",()=>{const n=e.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),t._zod.parse=(n,r)=>{const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(i=>kl(i,t)):kl(s,t)}});function kl(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}const C1=M("$ZodCatch",(t,e)=>{de.init(t,e),re(t._zod,"optin",()=>e.innerType._zod.optin),re(t._zod,"optout",()=>e.innerType._zod.optout),re(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(i=>(n.value=i.value,i.issues.length&&(n.value=e.catchValue({...n,error:{issues:i.issues.map(o=>rn(o,r,nn()))},input:n.value}),n.issues=[]),n)):(n.value=s.value,s.issues.length&&(n.value=e.catchValue({...n,error:{issues:s.issues.map(i=>rn(i,r,nn()))},input:n.value}),n.issues=[]),n)}}),j1=M("$ZodPipe",(t,e)=>{de.init(t,e),re(t._zod,"values",()=>e.in._zod.values),re(t._zod,"optin",()=>e.in._zod.optin),re(t._zod,"optout",()=>e.out._zod.optout),re(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(n,r)=>{if(r.direction==="backward"){const i=e.out._zod.run(n,r);return i instanceof Promise?i.then(o=>js(o,e.in,r)):js(i,e.in,r)}const s=e.in._zod.run(n,r);return s instanceof Promise?s.then(i=>js(i,e.out,r)):js(s,e.out,r)}});function js(t,e,n){return t.issues.length?(t.aborted=!0,t):e._zod.run({value:t.value,issues:t.issues},n)}const I1=M("$ZodReadonly",(t,e)=>{de.init(t,e),re(t._zod,"propValues",()=>e.innerType._zod.propValues),re(t._zod,"values",()=>e.innerType._zod.values),re(t._zod,"optin",()=>e.innerType?._zod?.optin),re(t._zod,"optout",()=>e.innerType?._zod?.optout),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(El):El(s)}});function El(t){return t.value=Object.freeze(t.value),t}const M1=M("$ZodLazy",(t,e)=>{de.init(t,e),re(t._zod,"innerType",()=>e.getter()),re(t._zod,"pattern",()=>t._zod.innerType?._zod?.pattern),re(t._zod,"propValues",()=>t._zod.innerType?._zod?.propValues),re(t._zod,"optin",()=>t._zod.innerType?._zod?.optin??void 0),re(t._zod,"optout",()=>t._zod.innerType?._zod?.optout??void 0),t._zod.parse=(n,r)=>t._zod.innerType._zod.run(n,r)}),R1=M("$ZodCustom",(t,e)=>{qe.init(t,e),de.init(t,e),t._zod.parse=(n,r)=>n,t._zod.check=n=>{const r=n.value,s=e.fn(r);if(s instanceof Promise)return s.then(i=>Tl(i,n,r,t));Tl(s,n,r,t)}});function Tl(t,e,n,r){if(!t){const s={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(s.params=r._zod.def.params),e.issues.push(Yr(s))}}var Nl;class P1{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...n){const r=n[0];return this._map.set(e,r),r&&typeof r=="object"&&"id"in r&&this._idmap.set(r.id,e),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const n=this._map.get(e);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(e),this}get(e){const n=e._zod.parent;if(n){const r={...this.get(n)??{}};delete r.id;const s={...r,...this._map.get(e)};return Object.keys(s).length?s:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function $1(){return new P1}(Nl=globalThis).__zod_globalRegistry??(Nl.__zod_globalRegistry=$1());const Lr=globalThis.__zod_globalRegistry;function z1(t,e){return new t({type:"string",...V(e)})}function L1(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...V(e)})}function Al(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...V(e)})}function D1(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...V(e)})}function F1(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...V(e)})}function B1(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...V(e)})}function U1(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...V(e)})}function V1(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...V(e)})}function Z1(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...V(e)})}function W1(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...V(e)})}function q1(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...V(e)})}function G1(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...V(e)})}function H1(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...V(e)})}function K1(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...V(e)})}function Y1(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...V(e)})}function X1(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...V(e)})}function Q1(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...V(e)})}function J1(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...V(e)})}function ey(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...V(e)})}function ty(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...V(e)})}function ny(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...V(e)})}function ry(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...V(e)})}function sy(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...V(e)})}function iy(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...V(e)})}function oy(t,e){return new t({type:"string",format:"date",check:"string_format",...V(e)})}function ay(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...V(e)})}function ly(t,e){return new t({type:"string",format:"duration",check:"string_format",...V(e)})}function cy(t,e){return new t({type:"number",checks:[],...V(e)})}function uy(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"safeint",...V(e)})}function fy(t,e){return new t({type:"boolean",...V(e)})}function dy(t){return new t({type:"unknown"})}function hy(t,e){return new t({type:"never",...V(e)})}function py(t,e){return new t({type:"date",...V(e)})}function Ol(t,e){return new ku({check:"less_than",...V(e),value:t,inclusive:!1})}function Ws(t,e){return new ku({check:"less_than",...V(e),value:t,inclusive:!0})}function Cl(t,e){return new Eu({check:"greater_than",...V(e),value:t,inclusive:!1})}function qs(t,e){return new Eu({check:"greater_than",...V(e),value:t,inclusive:!0})}function jl(t,e){return new E0({check:"multiple_of",...V(e),value:t})}function ju(t,e){return new N0({check:"max_length",...V(e),maximum:t})}function ui(t,e){return new A0({check:"min_length",...V(e),minimum:t})}function Iu(t,e){return new O0({check:"length_equals",...V(e),length:t})}function my(t,e){return new C0({check:"string_format",format:"regex",...V(e),pattern:t})}function gy(t){return new j0({check:"string_format",format:"lowercase",...V(t)})}function yy(t){return new I0({check:"string_format",format:"uppercase",...V(t)})}function by(t,e){return new M0({check:"string_format",format:"includes",...V(e),includes:t})}function wy(t,e){return new R0({check:"string_format",format:"starts_with",...V(e),prefix:t})}function vy(t,e){return new P0({check:"string_format",format:"ends_with",...V(e),suffix:t})}function _r(t){return new $0({check:"overwrite",tx:t})}function xy(t){return _r(e=>e.normalize(t))}function _y(){return _r(t=>t.trim())}function Sy(){return _r(t=>t.toLowerCase())}function ky(){return _r(t=>t.toUpperCase())}function Ey(){return _r(t=>Cg(t))}function Ty(t,e,n){return new t({type:"array",element:e,...V(n)})}function Ny(t,e,n){return new t({type:"custom",check:"custom",fn:e,...V(n)})}function Ay(t){const e=Oy(n=>(n.addIssue=r=>{if(typeof r=="string")n.issues.push(Yr(r,n.value,e._zod.def));else{const s=r;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=n.value),s.inst??(s.inst=e),s.continue??(s.continue=!e._zod.def.abort),n.issues.push(Yr(s))}},t(n.value,n)));return e}function Oy(t,e){const n=new qe({check:"custom",...V(e)});return n._zod.check=t,n}function Mu(t){let e=t?.target??"draft-2020-12";return e==="draft-4"&&(e="draft-04"),e==="draft-7"&&(e="draft-07"),{processors:t.processors??{},metadataRegistry:t?.metadata??Lr,target:e,unrepresentable:t?.unrepresentable??"throw",override:t?.override??(()=>{}),io:t?.io??"output",counter:0,seen:new Map,cycles:t?.cycles??"ref",reused:t?.reused??"inline",external:t?.external??void 0}}function ve(t,e,n={path:[],schemaPath:[]}){var r;const s=t._zod.def,i=e.seen.get(t);if(i)return i.count++,n.schemaPath.includes(t)&&(i.cycle=n.path),i.schema;const o={schema:{},count:1,cycle:void 0,path:n.path};e.seen.set(t,o);const a=t._zod.toJSONSchema?.();if(a)o.schema=a;else{const u={...n,schemaPath:[...n.schemaPath,t],path:n.path};if(t._zod.processJSONSchema)t._zod.processJSONSchema(e,o.schema,u);else{const h=o.schema,p=e.processors[s.type];if(!p)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${s.type}`);p(t,e,h,u)}const f=t._zod.parent;f&&(o.ref||(o.ref=f),ve(f,e,u),e.seen.get(f).isParent=!0)}const l=e.metadataRegistry.get(t);return l&&Object.assign(o.schema,l),e.io==="input"&&De(t)&&(delete o.schema.examples,delete o.schema.default),e.io==="input"&&o.schema._prefault&&((r=o.schema).default??(r.default=o.schema._prefault)),delete o.schema._prefault,e.seen.get(t).schema}function Ru(t,e){const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=new Map;for(const o of t.seen.entries()){const a=t.metadataRegistry.get(o[0])?.id;if(a){const l=r.get(a);if(l&&l!==o[0])throw new Error(`Duplicate schema id "${a}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);r.set(a,o[0])}}const s=o=>{const a=t.target==="draft-2020-12"?"$defs":"definitions";if(t.external){const f=t.external.registry.get(o[0])?.id,h=t.external.uri??(y=>y);if(f)return{ref:h(f)};const p=o[1].defId??o[1].schema.id??`schema${t.counter++}`;return o[1].defId=p,{defId:p,ref:`${h("__shared")}#/${a}/${p}`}}if(o[1]===n)return{ref:"#"};const c=`#/${a}/`,u=o[1].schema.id??`__schema${t.counter++}`;return{defId:u,ref:c+u}},i=o=>{if(o[1].schema.$ref)return;const a=o[1],{ref:l,defId:c}=s(o);a.def={...a.schema},c&&(a.defId=c);const u=a.schema;for(const f in u)delete u[f];u.$ref=l};if(t.cycles==="throw")for(const o of t.seen.entries()){const a=o[1];if(a.cycle)throw new Error(`Cycle detected: #/${a.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const o of t.seen.entries()){const a=o[1];if(e===o[0]){i(o);continue}if(t.external){const c=t.external.registry.get(o[0])?.id;if(e!==o[0]&&c){i(o);continue}}if(t.metadataRegistry.get(o[0])?.id){i(o);continue}if(a.cycle){i(o);continue}if(a.count>1&&t.reused==="ref"){i(o);continue}}}function Pu(t,e){const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=o=>{const a=t.seen.get(o);if(a.ref===null)return;const l=a.def??a.schema,c={...l},u=a.ref;if(a.ref=null,u){r(u);const h=t.seen.get(u),p=h.schema;if(p.$ref&&(t.target==="draft-07"||t.target==="draft-04"||t.target==="openapi-3.0")?(l.allOf=l.allOf??[],l.allOf.push(p)):Object.assign(l,p),Object.assign(l,c),o._zod.parent===u)for(const m in l)m==="$ref"||m==="allOf"||m in c||delete l[m];if(p.$ref)for(const m in l)m==="$ref"||m==="allOf"||m in h.def&&JSON.stringify(l[m])===JSON.stringify(h.def[m])&&delete l[m]}const f=o._zod.parent;if(f&&f!==u){r(f);const h=t.seen.get(f);if(h?.schema.$ref&&(l.$ref=h.schema.$ref,h.def))for(const p in l)p==="$ref"||p==="allOf"||p in h.def&&JSON.stringify(l[p])===JSON.stringify(h.def[p])&&delete l[p]}t.override({zodSchema:o,jsonSchema:l,path:a.path??[]})};for(const o of[...t.seen.entries()].reverse())r(o[0]);const s={};if(t.target==="draft-2020-12"?s.$schema="https://json-schema.org/draft/2020-12/schema":t.target==="draft-07"?s.$schema="http://json-schema.org/draft-07/schema#":t.target==="draft-04"?s.$schema="http://json-schema.org/draft-04/schema#":t.target,t.external?.uri){const o=t.external.registry.get(e)?.id;if(!o)throw new Error("Schema is missing an `id` property");s.$id=t.external.uri(o)}Object.assign(s,n.def??n.schema);const i=t.external?.defs??{};for(const o of t.seen.entries()){const a=o[1];a.def&&a.defId&&(i[a.defId]=a.def)}t.external||Object.keys(i).length>0&&(t.target==="draft-2020-12"?s.$defs=i:s.definitions=i);try{const o=JSON.parse(JSON.stringify(s));return Object.defineProperty(o,"~standard",{value:{...e["~standard"],jsonSchema:{input:fi(e,"input",t.processors),output:fi(e,"output",t.processors)}},enumerable:!1,writable:!1}),o}catch{throw new Error("Error converting schema to JSON.")}}function De(t,e){const n=e??{seen:new Set};if(n.seen.has(t))return!1;n.seen.add(t);const r=t._zod.def;if(r.type==="transform")return!0;if(r.type==="array")return De(r.element,n);if(r.type==="set")return De(r.valueType,n);if(r.type==="lazy")return De(r.getter(),n);if(r.type==="promise"||r.type==="optional"||r.type==="nonoptional"||r.type==="nullable"||r.type==="readonly"||r.type==="default"||r.type==="prefault")return De(r.innerType,n);if(r.type==="intersection")return De(r.left,n)||De(r.right,n);if(r.type==="record"||r.type==="map")return De(r.keyType,n)||De(r.valueType,n);if(r.type==="pipe")return De(r.in,n)||De(r.out,n);if(r.type==="object"){for(const s in r.shape)if(De(r.shape[s],n))return!0;return!1}if(r.type==="union"){for(const s of r.options)if(De(s,n))return!0;return!1}if(r.type==="tuple"){for(const s of r.items)if(De(s,n))return!0;return!!(r.rest&&De(r.rest,n))}return!1}const Cy=(t,e={})=>n=>{const r=Mu({...n,processors:e});return ve(t,r),Ru(r,t),Pu(r,t)},fi=(t,e,n={})=>r=>{const{libraryOptions:s,target:i}=r??{},o=Mu({...s??{},target:i,io:e,processors:n});return ve(t,o),Ru(o,t),Pu(o,t)},jy={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},Iy=(t,e,n,r)=>{const s=n;s.type="string";const{minimum:i,maximum:o,format:a,patterns:l,contentEncoding:c}=t._zod.bag;if(typeof i=="number"&&(s.minLength=i),typeof o=="number"&&(s.maxLength=o),a&&(s.format=jy[a]??a,s.format===""&&delete s.format,a==="time"&&delete s.format),c&&(s.contentEncoding=c),l&&l.size>0){const u=[...l];u.length===1?s.pattern=u[0].source:u.length>1&&(s.allOf=[...u.map(f=>({...e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0"?{type:"string"}:{},pattern:f.source}))])}},My=(t,e,n,r)=>{const s=n,{minimum:i,maximum:o,format:a,multipleOf:l,exclusiveMaximum:c,exclusiveMinimum:u}=t._zod.bag;typeof a=="string"&&a.includes("int")?s.type="integer":s.type="number",typeof u=="number"&&(e.target==="draft-04"||e.target==="openapi-3.0"?(s.minimum=u,s.exclusiveMinimum=!0):s.exclusiveMinimum=u),typeof i=="number"&&(s.minimum=i,typeof u=="number"&&e.target!=="draft-04"&&(u>=i?delete s.minimum:delete s.exclusiveMinimum)),typeof c=="number"&&(e.target==="draft-04"||e.target==="openapi-3.0"?(s.maximum=c,s.exclusiveMaximum=!0):s.exclusiveMaximum=c),typeof o=="number"&&(s.maximum=o,typeof c=="number"&&e.target!=="draft-04"&&(c<=o?delete s.maximum:delete s.exclusiveMaximum)),typeof l=="number"&&(s.multipleOf=l)},Ry=(t,e,n,r)=>{n.type="boolean"},Py=(t,e,n,r)=>{n.not={}},$y=(t,e,n,r)=>{},zy=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema")},Ly=(t,e,n,r)=>{const s=t._zod.def,i=hu(s.entries);i.every(o=>typeof o=="number")&&(n.type="number"),i.every(o=>typeof o=="string")&&(n.type="string"),n.enum=i},Dy=(t,e,n,r)=>{const s=t._zod.def,i=[];for(const o of s.values)if(o===void 0){if(e.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof o=="bigint"){if(e.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");i.push(Number(o))}else i.push(o);if(i.length!==0)if(i.length===1){const o=i[0];n.type=o===null?"null":typeof o,e.target==="draft-04"||e.target==="openapi-3.0"?n.enum=[o]:n.const=o}else i.every(o=>typeof o=="number")&&(n.type="number"),i.every(o=>typeof o=="string")&&(n.type="string"),i.every(o=>typeof o=="boolean")&&(n.type="boolean"),i.every(o=>o===null)&&(n.type="null"),n.enum=i},Fy=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},By=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},Uy=(t,e,n,r)=>{const s=n,i=t._zod.def,{minimum:o,maximum:a}=t._zod.bag;typeof o=="number"&&(s.minItems=o),typeof a=="number"&&(s.maxItems=a),s.type="array",s.items=ve(i.element,e,{...r,path:[...r.path,"items"]})},Vy=(t,e,n,r)=>{const s=n,i=t._zod.def;s.type="object",s.properties={};const o=i.shape;for(const c in o)s.properties[c]=ve(o[c],e,{...r,path:[...r.path,"properties",c]});const a=new Set(Object.keys(o)),l=new Set([...a].filter(c=>{const u=i.shape[c]._zod;return e.io==="input"?u.optin===void 0:u.optout===void 0}));l.size>0&&(s.required=Array.from(l)),i.catchall?._zod.def.type==="never"?s.additionalProperties=!1:i.catchall?i.catchall&&(s.additionalProperties=ve(i.catchall,e,{...r,path:[...r.path,"additionalProperties"]})):e.io==="output"&&(s.additionalProperties=!1)},Zy=(t,e,n,r)=>{const s=t._zod.def,i=s.inclusive===!1,o=s.options.map((a,l)=>ve(a,e,{...r,path:[...r.path,i?"oneOf":"anyOf",l]}));i?n.oneOf=o:n.anyOf=o},Wy=(t,e,n,r)=>{const s=t._zod.def,i=ve(s.left,e,{...r,path:[...r.path,"allOf",0]}),o=ve(s.right,e,{...r,path:[...r.path,"allOf",1]}),a=c=>"allOf"in c&&Object.keys(c).length===1,l=[...a(i)?i.allOf:[i],...a(o)?o.allOf:[o]];n.allOf=l},qy=(t,e,n,r)=>{const s=n,i=t._zod.def;s.type="array";const o=e.target==="draft-2020-12"?"prefixItems":"items",a=e.target==="draft-2020-12"||e.target==="openapi-3.0"?"items":"additionalItems",l=i.items.map((h,p)=>ve(h,e,{...r,path:[...r.path,o,p]})),c=i.rest?ve(i.rest,e,{...r,path:[...r.path,a,...e.target==="openapi-3.0"?[i.items.length]:[]]}):null;e.target==="draft-2020-12"?(s.prefixItems=l,c&&(s.items=c)):e.target==="openapi-3.0"?(s.items={anyOf:l},c&&s.items.anyOf.push(c),s.minItems=l.length,c||(s.maxItems=l.length)):(s.items=l,c&&(s.additionalItems=c));const{minimum:u,maximum:f}=t._zod.bag;typeof u=="number"&&(s.minItems=u),typeof f=="number"&&(s.maxItems=f)},Gy=(t,e,n,r)=>{const s=n,i=t._zod.def;s.type="object";const o=i.keyType,l=o._zod.bag?.patterns;if(i.mode==="loose"&&l&&l.size>0){const u=ve(i.valueType,e,{...r,path:[...r.path,"patternProperties","*"]});s.patternProperties={};for(const f of l)s.patternProperties[f.source]=u}else(e.target==="draft-07"||e.target==="draft-2020-12")&&(s.propertyNames=ve(i.keyType,e,{...r,path:[...r.path,"propertyNames"]})),s.additionalProperties=ve(i.valueType,e,{...r,path:[...r.path,"additionalProperties"]});const c=o._zod.values;if(c){const u=[...c].filter(f=>typeof f=="string"||typeof f=="number");u.length>0&&(s.required=u)}},Hy=(t,e,n,r)=>{const s=t._zod.def,i=ve(s.innerType,e,r),o=e.seen.get(t);e.target==="openapi-3.0"?(o.ref=s.innerType,n.nullable=!0):n.anyOf=[i,{type:"null"}]},Ky=(t,e,n,r)=>{const s=t._zod.def;ve(s.innerType,e,r);const i=e.seen.get(t);i.ref=s.innerType},Yy=(t,e,n,r)=>{const s=t._zod.def;ve(s.innerType,e,r);const i=e.seen.get(t);i.ref=s.innerType,n.default=JSON.parse(JSON.stringify(s.defaultValue))},Xy=(t,e,n,r)=>{const s=t._zod.def;ve(s.innerType,e,r);const i=e.seen.get(t);i.ref=s.innerType,e.io==="input"&&(n._prefault=JSON.parse(JSON.stringify(s.defaultValue)))},Qy=(t,e,n,r)=>{const s=t._zod.def;ve(s.innerType,e,r);const i=e.seen.get(t);i.ref=s.innerType;let o;try{o=s.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}n.default=o},Jy=(t,e,n,r)=>{const s=t._zod.def,i=e.io==="input"?s.in._zod.def.type==="transform"?s.out:s.in:s.out;ve(i,e,r);const o=e.seen.get(t);o.ref=i},eb=(t,e,n,r)=>{const s=t._zod.def;ve(s.innerType,e,r);const i=e.seen.get(t);i.ref=s.innerType,n.readOnly=!0},$u=(t,e,n,r)=>{const s=t._zod.def;ve(s.innerType,e,r);const i=e.seen.get(t);i.ref=s.innerType},tb=(t,e,n,r)=>{const s=t._zod.innerType;ve(s,e,r);const i=e.seen.get(t);i.ref=s},nb=M("ZodISODateTime",(t,e)=>{Y0.init(t,e),xe.init(t,e)});function rb(t){return iy(nb,t)}const sb=M("ZodISODate",(t,e)=>{X0.init(t,e),xe.init(t,e)});function ib(t){return oy(sb,t)}const ob=M("ZodISOTime",(t,e)=>{Q0.init(t,e),xe.init(t,e)});function ab(t){return ay(ob,t)}const lb=M("ZodISODuration",(t,e)=>{J0.init(t,e),xe.init(t,e)});function cb(t){return ly(lb,t)}const ub=(t,e)=>{yu.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:n=>Vg(t,n)},flatten:{value:n=>Ug(t,n)},addIssue:{value:n=>{t.issues.push(n),t.message=JSON.stringify(t.issues,Zo,2)}},addIssues:{value:n=>{t.issues.push(...n),t.message=JSON.stringify(t.issues,Zo,2)}},isEmpty:{get(){return t.issues.length===0}}})},it=M("ZodError",ub,{Parent:Error}),fb=va(it),db=xa(it),hb=Ei(it),pb=Ti(it),mb=qg(it),gb=Gg(it),yb=Hg(it),bb=Kg(it),wb=Yg(it),vb=Xg(it),xb=Qg(it),_b=Jg(it),me=M("ZodType",(t,e)=>(de.init(t,e),Object.assign(t["~standard"],{jsonSchema:{input:fi(t,"input"),output:fi(t,"output")}}),t.toJSONSchema=Cy(t,{}),t.def=e,t.type=e.type,Object.defineProperty(t,"_def",{value:e}),t.check=(...n)=>t.clone(cn(e,{checks:[...e.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]}),{parent:!0}),t.with=t.check,t.clone=(n,r)=>un(t,n,r),t.brand=()=>t,t.register=((n,r)=>(n.add(t,r),t)),t.parse=(n,r)=>fb(t,n,r,{callee:t.parse}),t.safeParse=(n,r)=>hb(t,n,r),t.parseAsync=async(n,r)=>db(t,n,r,{callee:t.parseAsync}),t.safeParseAsync=async(n,r)=>pb(t,n,r),t.spa=t.safeParseAsync,t.encode=(n,r)=>mb(t,n,r),t.decode=(n,r)=>gb(t,n,r),t.encodeAsync=async(n,r)=>yb(t,n,r),t.decodeAsync=async(n,r)=>bb(t,n,r),t.safeEncode=(n,r)=>wb(t,n,r),t.safeDecode=(n,r)=>vb(t,n,r),t.safeEncodeAsync=async(n,r)=>xb(t,n,r),t.safeDecodeAsync=async(n,r)=>_b(t,n,r),t.refine=(n,r)=>t.check(b2(n,r)),t.superRefine=n=>t.check(w2(n)),t.overwrite=n=>t.check(_r(n)),t.optional=()=>Pl(t),t.exactOptional=()=>r2(t),t.nullable=()=>$l(t),t.nullish=()=>Pl($l(t)),t.nonoptional=n=>c2(t,n),t.array=()=>Tn(t),t.or=n=>Fu([t,n]),t.and=n=>Yb(t,n),t.transform=n=>zl(t,t2(n)),t.default=n=>o2(t,n),t.prefault=n=>l2(t,n),t.catch=n=>f2(t,n),t.pipe=n=>zl(t,n),t.readonly=()=>p2(t),t.describe=n=>{const r=t.clone();return Lr.add(r,{description:n}),r},Object.defineProperty(t,"description",{get(){return Lr.get(t)?.description},configurable:!0}),t.meta=(...n)=>{if(n.length===0)return Lr.get(t);const r=t.clone();return Lr.add(r,n[0]),r},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t.apply=n=>n(t),t)),zu=M("_ZodString",(t,e)=>{_a.init(t,e),me.init(t,e),t._zod.processJSONSchema=(r,s,i)=>Iy(t,r,s);const n=t._zod.bag;t.format=n.format??null,t.minLength=n.minimum??null,t.maxLength=n.maximum??null,t.regex=(...r)=>t.check(my(...r)),t.includes=(...r)=>t.check(by(...r)),t.startsWith=(...r)=>t.check(wy(...r)),t.endsWith=(...r)=>t.check(vy(...r)),t.min=(...r)=>t.check(ui(...r)),t.max=(...r)=>t.check(ju(...r)),t.length=(...r)=>t.check(Iu(...r)),t.nonempty=(...r)=>t.check(ui(1,...r)),t.lowercase=r=>t.check(gy(r)),t.uppercase=r=>t.check(yy(r)),t.trim=()=>t.check(_y()),t.normalize=(...r)=>t.check(xy(...r)),t.toLowerCase=()=>t.check(Sy()),t.toUpperCase=()=>t.check(ky()),t.slugify=()=>t.check(Ey())}),Sb=M("ZodString",(t,e)=>{_a.init(t,e),zu.init(t,e),t.email=n=>t.check(L1(kb,n)),t.url=n=>t.check(V1(Eb,n)),t.jwt=n=>t.check(sy(Fb,n)),t.emoji=n=>t.check(Z1(Tb,n)),t.guid=n=>t.check(Al(Il,n)),t.uuid=n=>t.check(D1(Is,n)),t.uuidv4=n=>t.check(F1(Is,n)),t.uuidv6=n=>t.check(B1(Is,n)),t.uuidv7=n=>t.check(U1(Is,n)),t.nanoid=n=>t.check(W1(Nb,n)),t.guid=n=>t.check(Al(Il,n)),t.cuid=n=>t.check(q1(Ab,n)),t.cuid2=n=>t.check(G1(Ob,n)),t.ulid=n=>t.check(H1(Cb,n)),t.base64=n=>t.check(ty(zb,n)),t.base64url=n=>t.check(ny(Lb,n)),t.xid=n=>t.check(K1(jb,n)),t.ksuid=n=>t.check(Y1(Ib,n)),t.ipv4=n=>t.check(X1(Mb,n)),t.ipv6=n=>t.check(Q1(Rb,n)),t.cidrv4=n=>t.check(J1(Pb,n)),t.cidrv6=n=>t.check(ey($b,n)),t.e164=n=>t.check(ry(Db,n)),t.datetime=n=>t.check(rb(n)),t.date=n=>t.check(ib(n)),t.time=n=>t.check(ab(n)),t.duration=n=>t.check(cb(n))});function te(t){return z1(Sb,t)}const xe=M("ZodStringFormat",(t,e)=>{be.init(t,e),zu.init(t,e)}),kb=M("ZodEmail",(t,e)=>{B0.init(t,e),xe.init(t,e)}),Il=M("ZodGUID",(t,e)=>{D0.init(t,e),xe.init(t,e)}),Is=M("ZodUUID",(t,e)=>{F0.init(t,e),xe.init(t,e)}),Eb=M("ZodURL",(t,e)=>{U0.init(t,e),xe.init(t,e)}),Tb=M("ZodEmoji",(t,e)=>{V0.init(t,e),xe.init(t,e)}),Nb=M("ZodNanoID",(t,e)=>{Z0.init(t,e),xe.init(t,e)}),Ab=M("ZodCUID",(t,e)=>{W0.init(t,e),xe.init(t,e)}),Ob=M("ZodCUID2",(t,e)=>{q0.init(t,e),xe.init(t,e)}),Cb=M("ZodULID",(t,e)=>{G0.init(t,e),xe.init(t,e)}),jb=M("ZodXID",(t,e)=>{H0.init(t,e),xe.init(t,e)}),Ib=M("ZodKSUID",(t,e)=>{K0.init(t,e),xe.init(t,e)}),Mb=M("ZodIPv4",(t,e)=>{e1.init(t,e),xe.init(t,e)}),Rb=M("ZodIPv6",(t,e)=>{t1.init(t,e),xe.init(t,e)}),Pb=M("ZodCIDRv4",(t,e)=>{n1.init(t,e),xe.init(t,e)}),$b=M("ZodCIDRv6",(t,e)=>{r1.init(t,e),xe.init(t,e)}),zb=M("ZodBase64",(t,e)=>{s1.init(t,e),xe.init(t,e)}),Lb=M("ZodBase64URL",(t,e)=>{o1.init(t,e),xe.init(t,e)}),Db=M("ZodE164",(t,e)=>{a1.init(t,e),xe.init(t,e)}),Fb=M("ZodJWT",(t,e)=>{c1.init(t,e),xe.init(t,e)}),Lu=M("ZodNumber",(t,e)=>{Nu.init(t,e),me.init(t,e),t._zod.processJSONSchema=(r,s,i)=>My(t,r,s),t.gt=(r,s)=>t.check(Cl(r,s)),t.gte=(r,s)=>t.check(qs(r,s)),t.min=(r,s)=>t.check(qs(r,s)),t.lt=(r,s)=>t.check(Ol(r,s)),t.lte=(r,s)=>t.check(Ws(r,s)),t.max=(r,s)=>t.check(Ws(r,s)),t.int=r=>t.check(Ml(r)),t.safe=r=>t.check(Ml(r)),t.positive=r=>t.check(Cl(0,r)),t.nonnegative=r=>t.check(qs(0,r)),t.negative=r=>t.check(Ol(0,r)),t.nonpositive=r=>t.check(Ws(0,r)),t.multipleOf=(r,s)=>t.check(jl(r,s)),t.step=(r,s)=>t.check(jl(r,s)),t.finite=()=>t;const n=t._zod.bag;t.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,t.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,t.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),t.isFinite=!0,t.format=n.format??null});function Q(t){return cy(Lu,t)}const Bb=M("ZodNumberFormat",(t,e)=>{u1.init(t,e),Lu.init(t,e)});function Ml(t){return uy(Bb,t)}const Ub=M("ZodBoolean",(t,e)=>{f1.init(t,e),me.init(t,e),t._zod.processJSONSchema=(n,r,s)=>Ry(t,n,r)});function sn(t){return fy(Ub,t)}const Vb=M("ZodUnknown",(t,e)=>{d1.init(t,e),me.init(t,e),t._zod.processJSONSchema=(n,r,s)=>$y()});function di(){return dy(Vb)}const Zb=M("ZodNever",(t,e)=>{h1.init(t,e),me.init(t,e),t._zod.processJSONSchema=(n,r,s)=>Py(t,n,r)});function Wb(t){return hy(Zb,t)}const qb=M("ZodDate",(t,e)=>{p1.init(t,e),me.init(t,e),t._zod.processJSONSchema=(r,s,i)=>zy(t,r),t.min=(r,s)=>t.check(qs(r,s)),t.max=(r,s)=>t.check(Ws(r,s));const n=t._zod.bag;t.minDate=n.minimum?new Date(n.minimum):null,t.maxDate=n.maximum?new Date(n.maximum):null});function Rl(t){return py(qb,t)}const Gb=M("ZodArray",(t,e)=>{m1.init(t,e),me.init(t,e),t._zod.processJSONSchema=(n,r,s)=>Uy(t,n,r,s),t.element=e.element,t.min=(n,r)=>t.check(ui(n,r)),t.nonempty=n=>t.check(ui(1,n)),t.max=(n,r)=>t.check(ju(n,r)),t.length=(n,r)=>t.check(Iu(n,r)),t.unwrap=()=>t.element});function Tn(t,e){return Ty(Gb,t,e)}const Du=M("ZodObject",(t,e)=>{y1.init(t,e),me.init(t,e),t._zod.processJSONSchema=(n,r,s)=>Vy(t,n,r,s),re(t,"shape",()=>e.shape),t.keyof=()=>Bu(Object.keys(t._zod.def.shape)),t.catchall=n=>t.clone({...t._zod.def,catchall:n}),t.passthrough=()=>t.clone({...t._zod.def,catchall:di()}),t.loose=()=>t.clone({...t._zod.def,catchall:di()}),t.strict=()=>t.clone({...t._zod.def,catchall:Wb()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=n=>zg(t,n),t.safeExtend=n=>Lg(t,n),t.merge=n=>Dg(t,n),t.pick=n=>Pg(t,n),t.omit=n=>$g(t,n),t.partial=(...n)=>Fg(Uu,t,n[0]),t.required=(...n)=>Bg(Vu,t,n[0])});function Xt(t,e){const n={type:"object",shape:t??{},...V(e)};return new Du(n)}function on(t,e){return new Du({type:"object",shape:t,catchall:di(),...V(e)})}const Hb=M("ZodUnion",(t,e)=>{b1.init(t,e),me.init(t,e),t._zod.processJSONSchema=(n,r,s)=>Zy(t,n,r,s),t.options=e.options});function Fu(t,e){return new Hb({type:"union",options:t,...V(e)})}const Kb=M("ZodIntersection",(t,e)=>{w1.init(t,e),me.init(t,e),t._zod.processJSONSchema=(n,r,s)=>Wy(t,n,r,s)});function Yb(t,e){return new Kb({type:"intersection",left:t,right:e})}const Xb=M("ZodTuple",(t,e)=>{v1.init(t,e),me.init(t,e),t._zod.processJSONSchema=(n,r,s)=>qy(t,n,r,s),t.rest=n=>t.clone({...t._zod.def,rest:n})});function qo(t,e,n){const r=e instanceof de,s=r?n:e,i=r?e:null;return new Xb({type:"tuple",items:t,rest:i,...V(s)})}const Qb=M("ZodRecord",(t,e)=>{x1.init(t,e),me.init(t,e),t._zod.processJSONSchema=(n,r,s)=>Gy(t,n,r,s),t.keyType=e.keyType,t.valueType=e.valueType});function Rt(t,e,n){return new Qb({type:"record",keyType:t,valueType:e,...V(n)})}const Go=M("ZodEnum",(t,e)=>{_1.init(t,e),me.init(t,e),t._zod.processJSONSchema=(r,s,i)=>Ly(t,r,s),t.enum=e.entries,t.options=Object.values(e.entries);const n=new Set(Object.keys(e.entries));t.extract=(r,s)=>{const i={};for(const o of r)if(n.has(o))i[o]=e.entries[o];else throw new Error(`Key ${o} not found in enum`);return new Go({...e,checks:[],...V(s),entries:i})},t.exclude=(r,s)=>{const i={...e.entries};for(const o of r)if(n.has(o))delete i[o];else throw new Error(`Key ${o} not found in enum`);return new Go({...e,checks:[],...V(s),entries:i})}});function Bu(t,e){const n=Array.isArray(t)?Object.fromEntries(t.map(r=>[r,r])):t;return new Go({type:"enum",entries:n,...V(e)})}const Jb=M("ZodLiteral",(t,e)=>{S1.init(t,e),me.init(t,e),t._zod.processJSONSchema=(n,r,s)=>Dy(t,n,r),t.values=new Set(e.values),Object.defineProperty(t,"value",{get(){if(e.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return e.values[0]}})});function Ms(t,e){return new Jb({type:"literal",values:Array.isArray(t)?t:[t],...V(e)})}const e2=M("ZodTransform",(t,e)=>{k1.init(t,e),me.init(t,e),t._zod.processJSONSchema=(n,r,s)=>By(t,n),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new fu(t.constructor.name);n.addIssue=i=>{if(typeof i=="string")n.issues.push(Yr(i,n.value,e));else{const o=i;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=n.value),o.inst??(o.inst=t),n.issues.push(Yr(o))}};const s=e.transform(n.value,n);return s instanceof Promise?s.then(i=>(n.value=i,n)):(n.value=s,n)}});function t2(t){return new e2({type:"transform",transform:t})}const Uu=M("ZodOptional",(t,e)=>{Cu.init(t,e),me.init(t,e),t._zod.processJSONSchema=(n,r,s)=>$u(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function Pl(t){return new Uu({type:"optional",innerType:t})}const n2=M("ZodExactOptional",(t,e)=>{E1.init(t,e),me.init(t,e),t._zod.processJSONSchema=(n,r,s)=>$u(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function r2(t){return new n2({type:"optional",innerType:t})}const s2=M("ZodNullable",(t,e)=>{T1.init(t,e),me.init(t,e),t._zod.processJSONSchema=(n,r,s)=>Hy(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function $l(t){return new s2({type:"nullable",innerType:t})}const i2=M("ZodDefault",(t,e)=>{N1.init(t,e),me.init(t,e),t._zod.processJSONSchema=(n,r,s)=>Yy(t,n,r,s),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function o2(t,e){return new i2({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():mu(e)}})}const a2=M("ZodPrefault",(t,e)=>{A1.init(t,e),me.init(t,e),t._zod.processJSONSchema=(n,r,s)=>Xy(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function l2(t,e){return new a2({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():mu(e)}})}const Vu=M("ZodNonOptional",(t,e)=>{O1.init(t,e),me.init(t,e),t._zod.processJSONSchema=(n,r,s)=>Ky(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function c2(t,e){return new Vu({type:"nonoptional",innerType:t,...V(e)})}const u2=M("ZodCatch",(t,e)=>{C1.init(t,e),me.init(t,e),t._zod.processJSONSchema=(n,r,s)=>Qy(t,n,r,s),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function f2(t,e){return new u2({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}const d2=M("ZodPipe",(t,e)=>{j1.init(t,e),me.init(t,e),t._zod.processJSONSchema=(n,r,s)=>Jy(t,n,r,s),t.in=e.in,t.out=e.out});function zl(t,e){return new d2({type:"pipe",in:t,out:e})}const h2=M("ZodReadonly",(t,e)=>{I1.init(t,e),me.init(t,e),t._zod.processJSONSchema=(n,r,s)=>eb(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function p2(t){return new h2({type:"readonly",innerType:t})}const m2=M("ZodLazy",(t,e)=>{M1.init(t,e),me.init(t,e),t._zod.processJSONSchema=(n,r,s)=>tb(t,n,r,s),t.unwrap=()=>t._zod.def.getter()});function g2(t){return new m2({type:"lazy",getter:t})}const y2=M("ZodCustom",(t,e)=>{R1.init(t,e),me.init(t,e),t._zod.processJSONSchema=(n,r,s)=>Fy(t,n)});function b2(t,e={}){return Ny(y2,t,e)}function w2(t){return Ay(t)}const v2=Xt({plane:Bu(["XY","XZ","YZ"]).default("XZ"),position:qo([Q(),Q(),Q()]).default([.5,0,.5]),cellSize:Q().default(1/16),sectionSize:Q().default(1),cellColor:te().regex(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,"Invalid hex color").default("#ff0000"),visible:sn().default(!0)}),x2=Xt({schemaVersion:Q().min(0).default(0),projectName:te(),createdAt:Rl().optional().nullable(),lastModifiedAt:Rl().optional().nullable(),orbitControls:Xt({position:qo([Q(),Q(),Q()]),target:qo([Q(),Q(),Q()]),zoom:Q().optional()}).optional(),guidelines:Tn(v2).default([])}),Zu=on({transform:te().optional(),posX:Q(),posY:Q(),posZ:Q(),rotX:Q(),rotY:Q(),rotZ:Q(),sizeX:Q().optional(),sizeY:Q().optional(),sizeZ:Q().optional(),anchor:te().optional()}),_2=on({enabled:sn()}),Wu=Fu([on({"==":Ms("org.bukkit.inventory.ItemStack"),DataVersion:Q(),id:te(),count:Q(),components:Rt(te(),te()).transform(t=>{const e={};for(const[n,r]of Object.entries(t))try{e[n]=ep.parseSNBT(r).toJSON()}catch{e[n]=r}return e}).optional(),schema_version:Ms(1,{message:"Only schema_version 1 is supported"})}),on({"==":Ms("org.bukkit.inventory.ItemStack"),DataVersion:Q(),id:te(),count:Q(),components:Rt(te(),di()).optional(),schema_version:Ms(1,{message:"Only schema_version 1 is supported"})})]),qu=g2(()=>Xt({type:te(),item:Wu.optional(),position:Zu,attachments:Rt(te(),qu).optional(),displayItem:_2.optional(),shulkerColor:te().optional(),schematic:te().optional(),displayMode:te().optional(),firstPersonViewMode:te().optional(),firstPersonViewLockMode:te().optional(),lockRotation:sn().optional(),names:Tn(te()).optional(),text:te().optional(),animations:Rt(te(),on({nodes:Tn(te()),looped:sn().optional(),speed:Q().optional()})).optional(),brightness:Xt({block:Q(),sky:Q()}).optional()})),S2=on({type:te(),entityType:te(),attachments:Rt(te(),qu),position:Zu.optional(),item:Wu.optional(),shulkerColor:te().optional(),editor:Xt({selectedIndex:Q().optional(),animNodeSelectedOption:Q().optional(),scrollOffset:Q().optional(),expanded:sn().optional()}).passthrough().optional(),animations:Rt(te(),Xt({nodes:Tn(te()),looped:sn().optional(),speed:Q().optional()}).passthrough()).optional(),physical:Xt({cartLength:Q().optional(),wheelCenter:Q().optional(),wheelDistance:Q().optional(),cartCouplerLength:Q().optional()}).passthrough().optional()}),Sa=on({model:S2.optional(),entityType:te(),flipped:sn().optional()}),k2=on({savedName:te(),name:te().optional(),carts:Rt(te(),Sa).optional(),claims:Tn(te()).optional(),spawnPattern:te().optional(),flipped:sn().optional(),spawnLimit:Q().optional(),usedModels:Tn(te()).optional()}),Gu=Rt(te(),k2);function E2(t){const e=Gu.safeParse(t);return e.success?{valid:!0}:{valid:!1,errors:e.error.issues.map(n=>`${n.path.join(".")}: ${n.message}`)}}var ao,Ll;function T2(){return Ll||(Ll=1,ao=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,s,i;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(s=r;s--!==0;)if(!t(e[s],n[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(i=Object.keys(e),r=i.length,r!==Object.keys(n).length)return!1;for(s=r;s--!==0;)if(!Object.prototype.hasOwnProperty.call(n,i[s]))return!1;for(s=r;s--!==0;){var o=i[s];if(!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n}),ao}var N2=T2();const A2=tp(N2);class O2{constructor(){this.keyToValue=new Map,this.valueToKey=new Map}set(e,n){this.keyToValue.set(e,n),this.valueToKey.set(n,e)}getByKey(e){return this.keyToValue.get(e)}getByValue(e){return this.valueToKey.get(e)}clear(){this.keyToValue.clear(),this.valueToKey.clear()}}class Hu{constructor(e){this.generateIdentifier=e,this.kv=new O2}register(e,n){this.kv.getByValue(e)||(n||(n=this.generateIdentifier(e)),this.kv.set(n,e))}clear(){this.kv.clear()}getIdentifier(e){return this.kv.getByValue(e)}getValue(e){return this.kv.getByKey(e)}}class C2 extends Hu{constructor(){super(e=>e.name),this.classToAllowedProps=new Map}register(e,n){typeof n=="object"?(n.allowProps&&this.classToAllowedProps.set(e,n.allowProps),super.register(e,n.identifier)):super.register(e,n)}getAllowedProps(e){return this.classToAllowedProps.get(e)}}function j2(t){if("values"in Object)return Object.values(t);const e=[];for(const n in t)t.hasOwnProperty(n)&&e.push(t[n]);return e}function I2(t,e){const n=j2(t);if("find"in n)return n.find(e);const r=n;for(let s=0;s<r.length;s++){const i=r[s];if(e(i))return i}}function yr(t,e){Object.entries(t).forEach(([n,r])=>e(r,n))}function Gs(t,e){return t.indexOf(e)!==-1}function Dl(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(e(r))return r}}class M2{constructor(){this.transfomers={}}register(e){this.transfomers[e.name]=e}findApplicable(e){return I2(this.transfomers,n=>n.isApplicable(e))}findByName(e){return this.transfomers[e]}}const R2=t=>Object.prototype.toString.call(t).slice(8,-1),Ku=t=>typeof t>"u",P2=t=>t===null,Xr=t=>typeof t!="object"||t===null||t===Object.prototype?!1:Object.getPrototypeOf(t)===null?!0:Object.getPrototypeOf(t)===Object.prototype,Ho=t=>Xr(t)&&Object.keys(t).length===0,an=t=>Array.isArray(t),$2=t=>typeof t=="string",z2=t=>typeof t=="number"&&!isNaN(t),L2=t=>typeof t=="boolean",D2=t=>t instanceof RegExp,Qr=t=>t instanceof Map,Jr=t=>t instanceof Set,Yu=t=>R2(t)==="Symbol",F2=t=>t instanceof Date&&!isNaN(t.valueOf()),Xu=t=>t instanceof Error,Fl=t=>typeof t=="number"&&isNaN(t),B2=t=>L2(t)||P2(t)||Ku(t)||z2(t)||$2(t)||Yu(t),U2=t=>typeof t=="bigint",V2=t=>t===1/0||t===-1/0,Z2=t=>ArrayBuffer.isView(t)&&!(t instanceof DataView),W2=t=>t instanceof URL,Ko=t=>t.replace(/\\/g,"\\\\").replace(/\./g,"\\."),lo=t=>t.map(String).map(Ko).join("."),Vr=(t,e)=>{const n=[];let r="";for(let i=0;i<t.length;i++){let o=t.charAt(i);if(!e&&o==="\\"){const c=t.charAt(i+1);if(c==="\\"){r+="\\",i++;continue}else if(c!==".")throw Error("invalid path")}if(o==="\\"&&t.charAt(i+1)==="."){r+=".",i++;continue}if(o==="."){n.push(r),r="";continue}r+=o}const s=r;return n.push(s),n};function mt(t,e,n,r){return{isApplicable:t,annotation:e,transform:n,untransform:r}}const Qu=[mt(Ku,"undefined",()=>null,()=>{}),mt(U2,"bigint",t=>t.toString(),t=>typeof BigInt<"u"?BigInt(t):(console.error("Please add a BigInt polyfill."),t)),mt(F2,"Date",t=>t.toISOString(),t=>new Date(t)),mt(Xu,"Error",(t,e)=>{const n={name:t.name,message:t.message};return"cause"in t&&(n.cause=t.cause),e.allowedErrorProps.forEach(r=>{n[r]=t[r]}),n},(t,e)=>{const n=new Error(t.message,{cause:t.cause});return n.name=t.name,n.stack=t.stack,e.allowedErrorProps.forEach(r=>{n[r]=t[r]}),n}),mt(D2,"regexp",t=>""+t,t=>{const e=t.slice(1,t.lastIndexOf("/")),n=t.slice(t.lastIndexOf("/")+1);return new RegExp(e,n)}),mt(Jr,"set",t=>[...t.values()],t=>new Set(t)),mt(Qr,"map",t=>[...t.entries()],t=>new Map(t)),mt(t=>Fl(t)||V2(t),"number",t=>Fl(t)?"NaN":t>0?"Infinity":"-Infinity",Number),mt(t=>t===0&&1/t===-1/0,"number",()=>"-0",Number),mt(W2,"URL",t=>t.toString(),t=>new URL(t))];function Ai(t,e,n,r){return{isApplicable:t,annotation:e,transform:n,untransform:r}}const Ju=Ai((t,e)=>Yu(t)?!!e.symbolRegistry.getIdentifier(t):!1,(t,e)=>["symbol",e.symbolRegistry.getIdentifier(t)],t=>t.description,(t,e,n)=>{const r=n.symbolRegistry.getValue(e[1]);if(!r)throw new Error("Trying to deserialize unknown symbol");return r}),q2=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,Uint8ClampedArray].reduce((t,e)=>(t[e.name]=e,t),{}),ef=Ai(Z2,t=>["typed-array",t.constructor.name],t=>[...t],(t,e)=>{const n=q2[e[1]];if(!n)throw new Error("Trying to deserialize unknown typed array");return new n(t)});function tf(t,e){return t?.constructor?!!e.classRegistry.getIdentifier(t.constructor):!1}const nf=Ai(tf,(t,e)=>["class",e.classRegistry.getIdentifier(t.constructor)],(t,e)=>{const n=e.classRegistry.getAllowedProps(t.constructor);if(!n)return{...t};const r={};return n.forEach(s=>{r[s]=t[s]}),r},(t,e,n)=>{const r=n.classRegistry.getValue(e[1]);if(!r)throw new Error(`Trying to deserialize unknown class '${e[1]}' - check https://github.com/blitz-js/superjson/issues/116#issuecomment-773996564`);return Object.assign(Object.create(r.prototype),t)}),rf=Ai((t,e)=>!!e.customTransformerRegistry.findApplicable(t),(t,e)=>["custom",e.customTransformerRegistry.findApplicable(t).name],(t,e)=>e.customTransformerRegistry.findApplicable(t).serialize(t),(t,e,n)=>{const r=n.customTransformerRegistry.findByName(e[1]);if(!r)throw new Error("Trying to deserialize unknown custom value");return r.deserialize(t)}),G2=[nf,Ju,rf,ef],Bl=(t,e)=>{const n=Dl(G2,s=>s.isApplicable(t,e));if(n)return{value:n.transform(t,e),type:n.annotation(t,e)};const r=Dl(Qu,s=>s.isApplicable(t,e));if(r)return{value:r.transform(t,e),type:r.annotation}},sf={};Qu.forEach(t=>{sf[t.annotation]=t});const H2=(t,e,n)=>{if(an(e))switch(e[0]){case"symbol":return Ju.untransform(t,e,n);case"class":return nf.untransform(t,e,n);case"custom":return rf.untransform(t,e,n);case"typed-array":return ef.untransform(t,e,n);default:throw new Error("Unknown transformation: "+e)}else{const r=sf[e];if(!r)throw new Error("Unknown transformation: "+e);return r.untransform(t,n)}},rr=(t,e)=>{if(e>t.size)throw new Error("index out of bounds");const n=t.keys();for(;e>0;)n.next(),e--;return n.next().value};function of(t){if(Gs(t,"__proto__"))throw new Error("__proto__ is not allowed as a property");if(Gs(t,"prototype"))throw new Error("prototype is not allowed as a property");if(Gs(t,"constructor"))throw new Error("constructor is not allowed as a property")}const K2=(t,e)=>{of(e);for(let n=0;n<e.length;n++){const r=e[n];if(Jr(t))t=rr(t,+r);else if(Qr(t)){const s=+r,i=+e[++n]==0?"key":"value",o=rr(t,s);switch(i){case"key":t=o;break;case"value":t=t.get(o);break}}else t=t[r]}return t},Yo=(t,e,n)=>{if(of(e),e.length===0)return n(t);let r=t;for(let i=0;i<e.length-1;i++){const o=e[i];if(an(r)){const a=+o;r=r[a]}else if(Xr(r))r=r[o];else if(Jr(r)){const a=+o;r=rr(r,a)}else if(Qr(r)){if(i===e.length-2)break;const l=+o,c=+e[++i]==0?"key":"value",u=rr(r,l);switch(c){case"key":r=u;break;case"value":r=r.get(u);break}}}const s=e[e.length-1];if(an(r)?r[+s]=n(r[+s]):Xr(r)&&(r[s]=n(r[s])),Jr(r)){const i=rr(r,+s),o=n(i);i!==o&&(r.delete(i),r.add(o))}if(Qr(r)){const i=+e[e.length-2],o=rr(r,i);switch(+s==0?"key":"value"){case"key":{const l=n(o);r.set(l,r.get(o)),l!==o&&r.delete(o);break}case"value":{r.set(o,n(r.get(o)));break}}}return t},af=t=>t<1;function Xo(t,e,n,r=[]){if(!t)return;const s=af(n);if(!an(t)){yr(t,(a,l)=>Xo(a,e,n,[...r,...Vr(l,s)]));return}const[i,o]=t;o&&yr(o,(a,l)=>{Xo(a,e,n,[...r,...Vr(l,s)])}),e(i,r)}function Y2(t,e,n,r){return Xo(e,(s,i)=>{t=Yo(t,i,o=>H2(o,s,r))},n),t}function X2(t,e,n){const r=af(n);function s(i,o){const a=K2(t,Vr(o,r));i.map(l=>Vr(l,r)).forEach(l=>{t=Yo(t,l,()=>a)})}if(an(e)){const[i,o]=e;i.forEach(a=>{t=Yo(t,Vr(a,r),()=>t)}),o&&yr(o,s)}else yr(e,s);return t}const Q2=(t,e)=>Xr(t)||an(t)||Qr(t)||Jr(t)||Xu(t)||tf(t,e);function J2(t,e,n){const r=n.get(t);r?r.push(e):n.set(t,[e])}function ew(t,e){const n={};let r;return t.forEach(s=>{if(s.length<=1)return;e||(s=s.map(a=>a.map(String)).sort((a,l)=>a.length-l.length));const[i,...o]=s;i.length===0?r=o.map(lo):n[lo(i)]=o.map(lo)}),r?Ho(n)?[r]:[r,n]:Ho(n)?void 0:n}const lf=(t,e,n,r,s=[],i=[],o=new Map)=>{const a=B2(t);if(!a){J2(t,s,e);const p=o.get(t);if(p)return r?{transformedValue:null}:p}if(!Q2(t,n)){const p=Bl(t,n),y=p?{transformedValue:p.value,annotations:[p.type]}:{transformedValue:t};return a||o.set(t,y),y}if(Gs(i,t))return{transformedValue:null};const l=Bl(t,n),c=l?.value??t,u=an(c)?[]:{},f={};yr(c,(p,y)=>{if(y==="__proto__"||y==="constructor"||y==="prototype")throw new Error(`Detected property ${y}. This is a prototype pollution risk, please remove it from your object.`);const m=lf(p,e,n,r,[...s,y],[...i,t],o);u[y]=m.transformedValue,an(m.annotations)?f[Ko(y)]=m.annotations:Xr(m.annotations)&&yr(m.annotations,(w,g)=>{f[Ko(y)+"."+g]=w})});const h=Ho(f)?{transformedValue:u,annotations:l?[l.type]:void 0}:{transformedValue:u,annotations:l?[l.type,f]:f};return a||o.set(t,h),h};function cf(t){return Object.prototype.toString.call(t).slice(8,-1)}function Ul(t){return cf(t)==="Array"}function tw(t){if(cf(t)!=="Object")return!1;const e=Object.getPrototypeOf(t);return!!e&&e.constructor===Object&&e===Object.prototype}function nw(t,e,n,r,s){const i={}.propertyIsEnumerable.call(r,e)?"enumerable":"nonenumerable";i==="enumerable"&&(t[e]=n),s&&i==="nonenumerable"&&Object.defineProperty(t,e,{value:n,enumerable:!1,writable:!0,configurable:!0})}function Qo(t,e={}){if(Ul(t))return t.map(s=>Qo(s,e));if(!tw(t))return t;const n=Object.getOwnPropertyNames(t),r=Object.getOwnPropertySymbols(t);return[...n,...r].reduce((s,i)=>{if(i==="__proto__"||Ul(e.props)&&!e.props.includes(i))return s;const o=t[i],a=Qo(o,e);return nw(s,i,a,t,e.nonenumerable),s},{})}class J{constructor({dedupe:e=!1}={}){this.classRegistry=new C2,this.symbolRegistry=new Hu(n=>n.description??""),this.customTransformerRegistry=new M2,this.allowedErrorProps=[],this.dedupe=e}serialize(e){const n=new Map,r=lf(e,n,this,this.dedupe),s={json:r.transformedValue};r.annotations&&(s.meta={...s.meta,values:r.annotations});const i=ew(n,this.dedupe);return i&&(s.meta={...s.meta,referentialEqualities:i}),s.meta&&(s.meta.v=1),s}deserialize(e,n){const{json:r,meta:s}=e;let i=n?.inPlace?r:Qo(r);return s?.values&&(i=Y2(i,s.values,s.v??0,this)),s?.referentialEqualities&&(i=X2(i,s.referentialEqualities,s.v??0)),i}stringify(e){return JSON.stringify(this.serialize(e))}parse(e){return this.deserialize(JSON.parse(e),{inPlace:!0})}registerClass(e,n){this.classRegistry.register(e,n)}registerSymbol(e,n){this.symbolRegistry.register(e,n)}registerCustom(e,n){this.customTransformerRegistry.register({name:n,...e})}allowErrorProps(...e){this.allowedErrorProps.push(...e)}}J.defaultInstance=new J;J.serialize=J.defaultInstance.serialize.bind(J.defaultInstance);J.deserialize=J.defaultInstance.deserialize.bind(J.defaultInstance);J.stringify=J.defaultInstance.stringify.bind(J.defaultInstance);J.parse=J.defaultInstance.parse.bind(J.defaultInstance);J.registerClass=J.defaultInstance.registerClass.bind(J.defaultInstance);J.registerSymbol=J.defaultInstance.registerSymbol.bind(J.defaultInstance);J.registerCustom=J.defaultInstance.registerCustom.bind(J.defaultInstance);J.allowErrorProps=J.defaultInstance.allowErrorProps.bind(J.defaultInstance);J.serialize;J.deserialize;J.stringify;J.parse;J.registerClass;J.registerCustom;J.registerSymbol;J.allowErrorProps;const fr=".tcaproj",Hn=Hr(""),rw=0;function Vl(t){if(!t)return[];const e=new Set;function n(s){if(s&&typeof s=="object"&&"minecraft:custom_model_data"in s){const i=s["minecraft:custom_model_data"];if(i?.floats)for(const o of i.floats)e.add(o)}}function r(s){for(const i of Object.keys(s)){const o=s[i];n(o.item?.components),o.attachments&&r(o.attachments)}}return t.model&&(n(t.model.item?.components),t.model.attachments&&r(t.model.attachments)),Array.from(e).sort((s,i)=>s-i)}function uf(t){const e=new Uint8Array(t.slice(0,4));return e[0]===103&&e[1]===108&&e[2]===84&&e[3]===70?"model/gltf-binary":"model/gltf+json"}function Zl(t){const e=new Blob([t],{type:uf(t)}),n=URL.createObjectURL(e);return{arrayBuffer:t,blob:e,url:n}}const ot=aa((t,e,n)=>{const r=s=>{const i=typeof s=="function"?s(e()):s,o=e(),a={...i};let l=!1;if("metadata"in a&&a.metadata){const c={...o.metadata},u={...a.metadata};delete c.orbitControls,delete u.orbitControls,A2(c,u)||(l=!0)}return"saved"in a&&a.saved===!0?a.saved=!0:l&&(a.saved=!1),t(a)};return{saved:!1,metadata:{schemaVersion:rw,projectName:"",createdAt:null,lastModifiedAt:null,orbitControls:void 0,guidelines:[]},cart:null,modelIds:[],modelFiles:new Map,selectedObjectPath:void 0,setSelectedObjectPath:s=>r({selectedObjectPath:s}),setMetadata:s=>r({metadata:s}),setProjectName:s=>r(i=>({metadata:{...i.metadata,projectName:s}})),setCart:s=>r({cart:s,modelIds:Vl(s)}),clearCart:()=>r({cart:null}),addGuideline:s=>r(i=>({metadata:{...i.metadata,guidelines:[...i.metadata.guidelines,s]}})),removeGuideline:s=>r(i=>({metadata:{...i.metadata,guidelines:i.metadata.guidelines.filter((o,a)=>a!==s)}})),updateGuideline:(s,i)=>r(o=>({metadata:{...o.metadata,guidelines:o.metadata.guidelines.map((a,l)=>l===s?{...a,...i}:a)}})),resetGuidelines:()=>r(s=>({metadata:{...s.metadata,guidelines:[]}})),saveProject:async s=>{const i=e();if(!i.cart)throw new Error("No cart data to save.");const o=`${i.metadata.projectName||"TCA-Project"}${fr}`,a={...i.metadata,createdAt:i.metadata.createdAt||new Date},l={"metadata.json":Hr(J.stringify(a)),"cart.json":Hr(J.stringify(i.cart))};for(const y of i.modelIds){const m=i.modelFiles.get(y);if(!m)continue;if((uf(m.arrayBuffer)==="model/gltf-binary"?".glb":".gltf")===".gltf"){const g=await uu(m.arrayBuffer);l[`models/${y}.glb`]=g}else l[`models/${y}.glb`]=new Uint8Array(m.arrayBuffer)}const c=Vm(l,{level:9,mem:8}),u=new Uint8Array(Hn.length+c.length);u.set(Hn),u.set(c,Hn.length);const f=new Uint8Array(u.length);f.set(u);const h=new Blob([f],{type:"application/binary"}),p=i.fileHandle;if(!p||s){const y=await Me.promise(cm(h,{fileName:o,extensions:[fr],mimeTypes:["application/binary"],id:"tca-project"}),{loading:"Saving project...",success:"Project saved successfully!",error:"Failed to save the project."}).unwrap();y&&r({saved:!0,fileHandle:y,metadata:{...a}})}else await Me.promise(p.createWritable().then(async y=>{await y.write(f),await y.close()}),{loading:"Saving project...",success:"Project saved successfully!",error:"Failed to save the project."}).unwrap(),r({saved:!0,fileHandle:p,metadata:{...a,lastModifiedAt:new Date}})},loadProjectFromFileDialog:async()=>{const s=await da({description:"Select a TCA-Project file",extensions:[fr],mimeTypes:["application/binary"],id:"tca-project",startIn:"documents"}).catch(()=>null);if(!s)throw new Error("No file selected.");await e().loadProjectFromFileHandle(s)},loadProjectFromFileHandle:async s=>{if(!s)throw new Error("No file handle.");await e().reset();const i=await s.arrayBuffer();if(!new Uint8Array(i.slice(0,Hn.length)).every((c,u)=>c===Hn[u]))throw new Error("Invalid TCA-Project file format.");const a=new Uint8Array(i.slice(Hn.length)),l=Zm(a);for(const[c,u]of Object.entries(l))if(c==="metadata.json"){const f=x2.safeParse(J.parse(zo(u)));f.success?r({metadata:f.data}):(Me.error("Invalid metadata in project file."),e().reset())}else if(c==="cart.json"){const f=Sa.safeParse(J.parse(zo(u)));f.success?r({cart:f.data,modelIds:Vl(f.data)}):(Me.error("Invalid cart data in project file."),e().reset())}else if(c.startsWith("models/")&&c.endsWith(".glb")){const f=parseInt(c.replace("models/","").replace(".glb",""));isNaN(f)||r(h=>{const p=new Map(h.modelFiles);return p.set(f,Zl($c(u.buffer))),{modelFiles:p}})}r({saved:!0,fileHandle:s.handle})},reset:()=>r(n.getInitialState()),setModelFile:(s,i)=>r(o=>{const a=new Map(o.modelFiles);return i?a.set(s,Zl(i)):a.delete(s),{modelFiles:a,saved:!1}}),removeModelFile:s=>r(i=>{const o=new Map(i.modelFiles);return o.delete(s),{modelFiles:o,saved:!1}}),logState:()=>console.log("ProjectStore state:",e())}});function sw(){const t=z.c(56),e=ot(),[n,r]=$.useState(document.fullscreenElement),[s,i]=$.useState(!1),[o,a]=$.useState(!1),l=ow;let c,u;t[0]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{const ne=()=>{r(document.fullscreenElement)};return document.addEventListener("fullscreenchange",ne),()=>{document.removeEventListener("fullscreenchange",ne)}},u=[],t[0]=c,t[1]=u):(c=t[0],u=t[1]),$.useEffect(c,u);let f;t[2]!==e?(f=async()=>{i(!0),await e.saveProject(),e.reset(),i(!1)},t[2]=e,t[3]=f):f=t[3];const h=f;let p,y;t[4]!==e?(p=()=>{const ne=K=>{K.key==="s"&&(K.ctrlKey||K.metaKey)&&e.cart?(K.preventDefault(),e.saveProject().catch(iw)):K.key===","&&(K.ctrlKey||K.metaKey)&&(K.preventDefault(),a(!0))};return window.addEventListener("keydown",ne),()=>{window.removeEventListener("keydown",ne)}},y=[e],t[4]=e,t[5]=p,t[6]=y):(p=t[5],y=t[6]),$.useEffect(p,y);const m=e.metadata.projectName||"Untitled Project";let w;t[7]!==e.saved?(w=e.saved?d.jsx(bc,{}):d.jsx("span",{style:{display:"inline-block",width:10,height:10,borderRadius:"50%",background:"currentColor",marginRight:4,aspectRatio:"1 / 1"}}),t[7]=e.saved,t[8]=w):w=t[8];let g;t[9]!==h||t[10]!==s||t[11]!==w?(g=d.jsx(Ve,{className:"h-4 w-4",variant:"ghost",size:"icon",disabled:s,onClick:h,children:w}),t[9]=h,t[10]=s,t[11]=w,t[12]=g):g=t[12];let E;t[13]!==m||t[14]!==g?(E=d.jsxs("div",{className:"bg-card flex items-center gap-2 px-2",children:[m,g]}),t[13]=m,t[14]=g,t[15]=E):E=t[15];let v;t[16]===Symbol.for("react.memo_cache_sentinel")?(v=d.jsx(qp,{children:"File"}),t[16]=v):v=t[16];let S;t[17]!==e?(S=async()=>e.saveProject(),t[17]=e,t[18]=S):S=t[18];let _;t[19]===Symbol.for("react.memo_cache_sentinel")?(_=d.jsx(tl,{children:"CTRL + S"}),t[19]=_):_=t[19];let O;t[20]!==s||t[21]!==S?(O=d.jsxs(Gn,{disabled:s,onClick:S,children:["Save Project ",_]}),t[20]=s,t[21]=S,t[22]=O):O=t[22];let b;t[23]!==e?(b=async()=>e.saveProject(!0),t[23]=e,t[24]=b):b=t[24];let x;t[25]!==s||t[26]!==b?(x=d.jsx(Gn,{disabled:s,onClick:b,children:"Save Project As"}),t[25]=s,t[26]=b,t[27]=x):x=t[27];let k;t[28]===Symbol.for("react.memo_cache_sentinel")?(k=d.jsx(to,{}),t[28]=k):k=t[28];let N;t[29]!==e?(N=async()=>e.loadProjectFromFileDialog(),t[29]=e,t[30]=N):N=t[30];let T;t[31]!==s||t[32]!==N?(T=d.jsx(Gn,{disabled:s,onClick:N,children:"Load Project"}),t[31]=s,t[32]=N,t[33]=T):T=t[33];let A;t[34]!==h||t[35]!==s?(A=d.jsx(Gn,{disabled:s,onClick:h,children:"New Project"}),t[34]=h,t[35]=s,t[36]=A):A=t[36];let C;t[37]===Symbol.for("react.memo_cache_sentinel")?(C=d.jsx(to,{}),t[37]=C):C=t[37];let R;t[38]===Symbol.for("react.memo_cache_sentinel")?(R=()=>a(!0),t[38]=R):R=t[38];let I,P,L;t[39]===Symbol.for("react.memo_cache_sentinel")?(I=d.jsxs(Gn,{onClick:R,children:["Preferences",d.jsx(tl,{children:"CTRL + ,"})]}),P=d.jsx(to,{}),L=d.jsx(Gn,{children:"Print"}),t[39]=I,t[40]=P,t[41]=L):(I=t[39],P=t[40],L=t[41]);let B;t[42]!==O||t[43]!==x||t[44]!==T||t[45]!==A?(B=d.jsxs(el,{children:[v,d.jsxs(Gp,{children:[O,x,k,T,A,C,I,P,L]})]}),t[42]=O,t[43]=x,t[44]=T,t[45]=A,t[46]=B):B=t[46];let D;t[47]!==n?(D=d.jsx(el,{children:d.jsx(Ve,{className:"ml-auto",variant:"ghost",size:"icon",onClick:l,children:n?d.jsx($d,{}):d.jsx(Pd,{})})}),t[47]=n,t[48]=D):D=t[48];let Y;t[49]!==o?(Y=d.jsx(cw,{open:o,setOpen:a}),t[49]=o,t[50]=Y):Y=t[50];let ee;return t[51]!==B||t[52]!==D||t[53]!==Y||t[54]!==E?(ee=d.jsxs(Zp,{className:"rounded-none",children:[E,B,D,Y]}),t[51]=B,t[52]=D,t[53]=Y,t[54]=E,t[55]=ee):ee=t[55],ee}function iw(t){console.error("Save failed:",t)}function ow(){document.fullscreenElement?document.exitFullscreen().catch(aw):document.documentElement.requestFullscreen().catch(lw)}function aw(t){console.error("Error exiting fullscreen mode:",t)}function lw(t){console.error("Error entering fullscreen mode:",t)}function cw(t){const e=z.c(61),{open:n,setOpen:r}=t,s=rs();let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=d.jsx(Up,{children:"Preferences"}),e[0]=i):i=e[0];let o;e[1]===Symbol.for("react.memo_cache_sentinel")?(o=d.jsx(Je,{htmlFor:"theme-select",children:"Theme:"}),e[1]=o):o=e[1];let a;e[2]!==s?(a=D=>{if(D!=="light"&&D!=="dark"){console.warn("Invalid theme selected:",D);return}s.setTheme(D)},e[2]=s,e[3]=a):a=e[3];let l;e[4]===Symbol.for("react.memo_cache_sentinel")?(l=d.jsx(ni,{className:"h-10 w-full",id:"theme-select",children:d.jsx(ti,{placeholder:"Select theme"})}),e[4]=l):l=e[4];let c;e[5]===Symbol.for("react.memo_cache_sentinel")?(c=d.jsx(ri,{children:d.jsxs(Co,{children:[d.jsx(jo,{children:"Available Themes"}),d.jsx(vn,{value:"light",children:"Light"}),d.jsx(vn,{value:"dark",children:"Dark"})]})}),e[5]=c):c=e[5];let u;e[6]!==s.theme||e[7]!==a?(u=d.jsxs("div",{className:"flex flex-col",children:[o,d.jsxs(ei,{value:s.theme,onValueChange:a,children:[l,c]})]}),e[6]=s.theme,e[7]=a,e[8]=u):u=e[8];let f;e[9]===Symbol.for("react.memo_cache_sentinel")?(f=d.jsx(Je,{htmlFor:"save-interval",children:"Auto-save Interval (seconds):"}),e[9]=f):f=e[9];let h;e[10]!==s?(h=D=>{const Y=parseInt(D.target.value,10);if(isNaN(Y)||Y<1){console.warn("Invalid save interval:",D.target.value);return}s.setSaveInterval(Y)},e[10]=s,e[11]=h):h=e[11];let p;e[12]!==s.saveInterval||e[13]!==h?(p=d.jsxs("div",{className:"flex flex-col",children:[f,d.jsx(xn,{id:"save-interval",type:"number",min:1,value:s.saveInterval,onChange:h,className:"h-10 w-full"})]}),e[12]=s.saveInterval,e[13]=h,e[14]=p):p=e[14];let y;e[15]===Symbol.for("react.memo_cache_sentinel")?(y=d.jsx(Je,{htmlFor:"grid-color",className:"mb-2 block",children:"Grid Color:"}),e[15]=y):y=e[15];let m;e[16]!==s?(m=D=>{s.setGridColor(D)},e[16]=s,e[17]=m):m=e[17];let w;e[18]!==s.gridColor||e[19]!==m?(w=d.jsxs("div",{className:"flex flex-col",children:[y,d.jsx(Fc,{defaultColor:s.gridColor,onChangeComplete:m})]}),e[18]=s.gridColor,e[19]=m,e[20]=w):w=e[20];let g;e[21]===Symbol.for("react.memo_cache_sentinel")?(g=d.jsx(qt,{asChild:!0,children:d.jsx(_s,{className:"mr-[0.5] inline h-3"})}),e[21]=g):g=e[21];let E;e[22]===Symbol.for("react.memo_cache_sentinel")?(E=d.jsxs(Je,{htmlFor:"debug-text",className:"mb-2 block",children:[d.jsxs(Wt,{children:[g,d.jsx(Gt,{children:d.jsx("p",{children:"Debug text displays additional information about the 3D scene, such as object coordinates and rendering details. It can be useful for troubleshooting but may clutter the view."})})]}),"Debug Text:"]}),e[22]=E):E=e[22];let v;e[23]!==s?(v=D=>s.setDebugText(D),e[23]=s,e[24]=v):v=e[24];let S;e[25]!==s.debugText||e[26]!==v?(S=d.jsxs("div",{className:"flex flex-row gap-2",children:[E,d.jsx(ks,{id:"debug-text",checked:s.debugText,onCheckedChange:v})]}),e[25]=s.debugText,e[26]=v,e[27]=S):S=e[27];let _;e[28]===Symbol.for("react.memo_cache_sentinel")?(_=d.jsx(qt,{asChild:!0,children:d.jsx(_s,{className:"mr-[0.5] inline h-3"})}),e[28]=_):_=e[28];let O;e[29]===Symbol.for("react.memo_cache_sentinel")?(O=d.jsxs(Je,{htmlFor:"ssao-enabled",className:"mb-2 block",children:[d.jsxs(Wt,{children:[_,d.jsx(Gt,{children:d.jsx("p",{children:"Screen Space Ambient Occlusion (SSAO) is a shading method that adds soft shadows to enhance depth perception in 3D scenes. It can improve visual realism but may impact performance."})})]}),"SSAO Enabled:"]}),e[29]=O):O=e[29];let b;e[30]!==s?(b=D=>s.setSSAOEnabled(D),e[30]=s,e[31]=b):b=e[31];let x;e[32]!==s.SSAOEnabled||e[33]!==b?(x=d.jsxs("div",{className:"flex flex-row gap-2",children:[O,d.jsx(ks,{id:"ssao-enabled",checked:s.SSAOEnabled,onCheckedChange:b})]}),e[32]=s.SSAOEnabled,e[33]=b,e[34]=x):x=e[34];let k;e[35]===Symbol.for("react.memo_cache_sentinel")?(k=d.jsx(qt,{asChild:!0,children:d.jsx(_s,{className:"mr-[0.5] inline h-3"})}),e[35]=k):k=e[35];let N;e[36]===Symbol.for("react.memo_cache_sentinel")?(N=d.jsxs(Je,{htmlFor:"dof-enabled",className:"mb-2 block",children:[d.jsxs(Wt,{children:[k,d.jsx(Gt,{children:d.jsx("p",{children:"Depth of Field (DOF) creates a blurred effect on objects outside the focus area, simulating camera lens behavior. It enhances realism but can be resource-intensive and may affect performance."})})]}),"Depth of Field Enabled:"]}),e[36]=N):N=e[36];let T;e[37]!==s?(T=D=>s.setDOFEnabled(D),e[37]=s,e[38]=T):T=e[38];let A;e[39]!==s.DOFEnabled||e[40]!==T?(A=d.jsxs("div",{className:"flex flex-row gap-2",children:[N,d.jsx(ks,{id:"dof-enabled",checked:s.DOFEnabled,onCheckedChange:T})]}),e[39]=s.DOFEnabled,e[40]=T,e[41]=A):A=e[41];let C;e[42]===Symbol.for("react.memo_cache_sentinel")?(C=d.jsx(qt,{asChild:!0,children:d.jsx(_s,{className:"mr-[0.5] inline h-3"})}),e[42]=C):C=e[42];let R;e[43]===Symbol.for("react.memo_cache_sentinel")?(R=d.jsxs(Je,{htmlFor:"control-damping-enabled",className:"mb-2 block",children:[d.jsxs(Wt,{children:[C,d.jsx(Gt,{children:d.jsx("p",{children:"Enabling control damping makes camera movements smoother by adding inertia. This results in a more natural feel when orbiting or panning the view, but may introduce a slight delay in responsiveness."})})]}),"Orbit Controls Damping:"]}),e[43]=R):R=e[43];let I;e[44]!==s?(I=D=>s.setControlDamping(D),e[44]=s,e[45]=I):I=e[45];let P;e[46]!==s.controlDamping||e[47]!==I?(P=d.jsxs("div",{className:"flex flex-row gap-2",children:[R,d.jsx(ks,{id:"control-damping",checked:s.controlDamping,onCheckedChange:I})]}),e[46]=s.controlDamping,e[47]=I,e[48]=P):P=e[48];let L;e[49]!==w||e[50]!==S||e[51]!==x||e[52]!==A||e[53]!==P||e[54]!==u||e[55]!==p?(L=d.jsx(Fp,{children:d.jsxs(Bp,{children:[i,d.jsx(Vp,{asChild:!0,children:d.jsxs("div",{children:["Here you can adjust your preferences for the application.",d.jsxs("div",{className:"mt-4 flex flex-col gap-4",children:[u,p,w,S,x,A,P]})]})})]})}),e[49]=w,e[50]=S,e[51]=x,e[52]=A,e[53]=P,e[54]=u,e[55]=p,e[56]=L):L=e[56];let B;return e[57]!==n||e[58]!==r||e[59]!==L?(B=d.jsx(zp,{open:n,onOpenChange:r,children:L}),e[57]=n,e[58]=r,e[59]=L,e[60]=B):B=e[60],B}function ff(t){const e=z.c(4),{error:n}=t;let r,s;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=d.jsx("p",{children:"Something went wrong:"}),s={color:"red"},e[0]=r,e[1]=s):(r=e[0],s=e[1]);let i;return e[2]!==n.message?(i=d.jsxs("div",{role:"alert",children:[r,d.jsx("pre",{style:s,children:n.message})]}),e[2]=n.message,e[3]=i):i=e[3],i}function uw(t){const e=z.c(8);let n,r;e[0]!==t?({className:n,...r}=t,e[0]=t,e[1]=n,e[2]=r):(n=e[1],r=e[2]);let s;e[3]!==n?(s=U("flex flex-col gap-2",n),e[3]=n,e[4]=s):s=e[4];let i;return e[5]!==r||e[6]!==s?(i=d.jsx($h,{"data-slot":"tabs",className:s,...r}),e[5]=r,e[6]=s,e[7]=i):i=e[7],i}function fw(t){const e=z.c(8);let n,r;e[0]!==t?({className:n,...r}=t,e[0]=t,e[1]=n,e[2]=r):(n=e[1],r=e[2]);let s;e[3]!==n?(s=U("bg-muted text-muted-foreground inline-flex flex-wrap w-fit items-center justify-center rounded-lg p-[3px]",n),e[3]=n,e[4]=s):s=e[4];let i;return e[5]!==r||e[6]!==s?(i=d.jsx(zh,{"data-slot":"tabs-list",className:s,...r}),e[5]=r,e[6]=s,e[7]=i):i=e[7],i}function Rs(t){const e=z.c(8);let n,r;e[0]!==t?({className:n,...r}=t,e[0]=t,e[1]=n,e[2]=r):(n=e[1],r=e[2]);let s;e[3]!==n?(s=U("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-9  items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 flex-1",n),e[3]=n,e[4]=s):s=e[4];let i;return e[5]!==r||e[6]!==s?(i=d.jsx(Lh,{"data-slot":"tabs-trigger",className:s,...r}),e[5]=r,e[6]=s,e[7]=i):i=e[7],i}function Ps(t){const e=z.c(8);let n,r;e[0]!==t?({className:n,...r}=t,e[0]=t,e[1]=n,e[2]=r):(n=e[1],r=e[2]);let s;e[3]!==n?(s=U("flex-1 outline-none",n),e[3]=n,e[4]=s):s=e[4];let i;return e[5]!==r||e[6]!==s?(i=d.jsx(Dh,{"data-slot":"tabs-content",className:s,...r}),e[5]=r,e[6]=s,e[7]=i):i=e[7],i}function df(t){const e=z.c(8);let n,r;e[0]!==t?({className:n,...r}=t,e[0]=t,e[1]=n,e[2]=r):(n=e[1],r=e[2]);let s;e[3]!==n?(s=U("w-full caption-bottom text-sm",n),e[3]=n,e[4]=s):s=e[4];let i;return e[5]!==r||e[6]!==s?(i=d.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:d.jsx("table",{"data-slot":"table",className:s,...r})}),e[5]=r,e[6]=s,e[7]=i):i=e[7],i}function hf(t){const e=z.c(8);let n,r;e[0]!==t?({className:n,...r}=t,e[0]=t,e[1]=n,e[2]=r):(n=e[1],r=e[2]);let s;e[3]!==n?(s=U("[&_tr]:border-b",n),e[3]=n,e[4]=s):s=e[4];let i;return e[5]!==r||e[6]!==s?(i=d.jsx("thead",{"data-slot":"table-header",className:s,...r}),e[5]=r,e[6]=s,e[7]=i):i=e[7],i}function pf(t){const e=z.c(8);let n,r;e[0]!==t?({className:n,...r}=t,e[0]=t,e[1]=n,e[2]=r):(n=e[1],r=e[2]);let s;e[3]!==n?(s=U("[&_tr:last-child]:border-0",n),e[3]=n,e[4]=s):s=e[4];let i;return e[5]!==r||e[6]!==s?(i=d.jsx("tbody",{"data-slot":"table-body",className:s,...r}),e[5]=r,e[6]=s,e[7]=i):i=e[7],i}function hi(t){const e=z.c(8);let n,r;e[0]!==t?({className:n,...r}=t,e[0]=t,e[1]=n,e[2]=r):(n=e[1],r=e[2]);let s;e[3]!==n?(s=U("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",n),e[3]=n,e[4]=s):s=e[4];let i;return e[5]!==r||e[6]!==s?(i=d.jsx("tr",{"data-slot":"table-row",className:s,...r}),e[5]=r,e[6]=s,e[7]=i):i=e[7],i}function Ut(t){const e=z.c(8);let n,r;e[0]!==t?({className:n,...r}=t,e[0]=t,e[1]=n,e[2]=r):(n=e[1],r=e[2]);let s;e[3]!==n?(s=U("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n),e[3]=n,e[4]=s):s=e[4];let i;return e[5]!==r||e[6]!==s?(i=d.jsx("th",{"data-slot":"table-head",className:s,...r}),e[5]=r,e[6]=s,e[7]=i):i=e[7],i}function Vt(t){const e=z.c(8);let n,r;e[0]!==t?({className:n,...r}=t,e[0]=t,e[1]=n,e[2]=r):(n=e[1],r=e[2]);let s;e[3]!==n?(s=U("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n),e[3]=n,e[4]=s):s=e[4];let i;return e[5]!==r||e[6]!==s?(i=d.jsx("td",{"data-slot":"table-cell",className:s,...r}),e[5]=r,e[6]=s,e[7]=i):i=e[7],i}class dw{add(e,n,r){if(typeof arguments[0]!="string")for(let s in arguments[0])this.add(s,arguments[0][s],arguments[1]);else(Array.isArray(e)?e:[e]).forEach(function(s){this[s]=this[s]||[],n&&this[s][r?"unshift":"push"](n)},this)}run(e,n){this[e]=this[e]||[],this[e].forEach(function(r){r.call(n&&n.context?n.context:n,n)})}}class hw{constructor(e){this.jsep=e,this.registered={}}register(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach(s=>{if(typeof s!="object"||!s.name||!s.init)throw new Error("Invalid JSEP plugin format");this.registered[s.name]||(s.init(this.jsep),this.registered[s.name]=s)})}}class j{static get version(){return"1.4.0"}static toString(){return"JavaScript Expression Parser (JSEP) v"+j.version}static addUnaryOp(e){return j.max_unop_len=Math.max(e.length,j.max_unop_len),j.unary_ops[e]=1,j}static addBinaryOp(e,n,r){return j.max_binop_len=Math.max(e.length,j.max_binop_len),j.binary_ops[e]=n,r?j.right_associative.add(e):j.right_associative.delete(e),j}static addIdentifierChar(e){return j.additional_identifier_chars.add(e),j}static addLiteral(e,n){return j.literals[e]=n,j}static removeUnaryOp(e){return delete j.unary_ops[e],e.length===j.max_unop_len&&(j.max_unop_len=j.getMaxKeyLen(j.unary_ops)),j}static removeAllUnaryOps(){return j.unary_ops={},j.max_unop_len=0,j}static removeIdentifierChar(e){return j.additional_identifier_chars.delete(e),j}static removeBinaryOp(e){return delete j.binary_ops[e],e.length===j.max_binop_len&&(j.max_binop_len=j.getMaxKeyLen(j.binary_ops)),j.right_associative.delete(e),j}static removeAllBinaryOps(){return j.binary_ops={},j.max_binop_len=0,j}static removeLiteral(e){return delete j.literals[e],j}static removeAllLiterals(){return j.literals={},j}get char(){return this.expr.charAt(this.index)}get code(){return this.expr.charCodeAt(this.index)}constructor(e){this.expr=e,this.index=0}static parse(e){return new j(e).parse()}static getMaxKeyLen(e){return Math.max(0,...Object.keys(e).map(n=>n.length))}static isDecimalDigit(e){return e>=48&&e<=57}static binaryPrecedence(e){return j.binary_ops[e]||0}static isIdentifierStart(e){return e>=65&&e<=90||e>=97&&e<=122||e>=128&&!j.binary_ops[String.fromCharCode(e)]||j.additional_identifier_chars.has(String.fromCharCode(e))}static isIdentifierPart(e){return j.isIdentifierStart(e)||j.isDecimalDigit(e)}throwError(e){const n=new Error(e+" at character "+this.index);throw n.index=this.index,n.description=e,n}runHook(e,n){if(j.hooks[e]){const r={context:this,node:n};return j.hooks.run(e,r),r.node}return n}searchHook(e){if(j.hooks[e]){const n={context:this};return j.hooks[e].find(function(r){return r.call(n.context,n),n.node}),n.node}}gobbleSpaces(){let e=this.code;for(;e===j.SPACE_CODE||e===j.TAB_CODE||e===j.LF_CODE||e===j.CR_CODE;)e=this.expr.charCodeAt(++this.index);this.runHook("gobble-spaces")}parse(){this.runHook("before-all");const e=this.gobbleExpressions(),n=e.length===1?e[0]:{type:j.COMPOUND,body:e};return this.runHook("after-all",n)}gobbleExpressions(e){let n=[],r,s;for(;this.index<this.expr.length;)if(r=this.code,r===j.SEMCOL_CODE||r===j.COMMA_CODE)this.index++;else if(s=this.gobbleExpression())n.push(s);else if(this.index<this.expr.length){if(r===e)break;this.throwError('Unexpected "'+this.char+'"')}return n}gobbleExpression(){const e=this.searchHook("gobble-expression")||this.gobbleBinaryExpression();return this.gobbleSpaces(),this.runHook("after-expression",e)}gobbleBinaryOp(){this.gobbleSpaces();let e=this.expr.substr(this.index,j.max_binop_len),n=e.length;for(;n>0;){if(j.binary_ops.hasOwnProperty(e)&&(!j.isIdentifierStart(this.code)||this.index+e.length<this.expr.length&&!j.isIdentifierPart(this.expr.charCodeAt(this.index+e.length))))return this.index+=n,e;e=e.substr(0,--n)}return!1}gobbleBinaryExpression(){let e,n,r,s,i,o,a,l,c;if(o=this.gobbleToken(),!o||(n=this.gobbleBinaryOp(),!n))return o;for(i={value:n,prec:j.binaryPrecedence(n),right_a:j.right_associative.has(n)},a=this.gobbleToken(),a||this.throwError("Expected expression after "+n),s=[o,i,a];n=this.gobbleBinaryOp();){if(r=j.binaryPrecedence(n),r===0){this.index-=n.length;break}i={value:n,prec:r,right_a:j.right_associative.has(n)},c=n;const u=f=>i.right_a&&f.right_a?r>f.prec:r<=f.prec;for(;s.length>2&&u(s[s.length-2]);)a=s.pop(),n=s.pop().value,o=s.pop(),e={type:j.BINARY_EXP,operator:n,left:o,right:a},s.push(e);e=this.gobbleToken(),e||this.throwError("Expected expression after "+c),s.push(i,e)}for(l=s.length-1,e=s[l];l>1;)e={type:j.BINARY_EXP,operator:s[l-1].value,left:s[l-2],right:e},l-=2;return e}gobbleToken(){let e,n,r,s;if(this.gobbleSpaces(),s=this.searchHook("gobble-token"),s)return this.runHook("after-token",s);if(e=this.code,j.isDecimalDigit(e)||e===j.PERIOD_CODE)return this.gobbleNumericLiteral();if(e===j.SQUOTE_CODE||e===j.DQUOTE_CODE)s=this.gobbleStringLiteral();else if(e===j.OBRACK_CODE)s=this.gobbleArray();else{for(n=this.expr.substr(this.index,j.max_unop_len),r=n.length;r>0;){if(j.unary_ops.hasOwnProperty(n)&&(!j.isIdentifierStart(this.code)||this.index+n.length<this.expr.length&&!j.isIdentifierPart(this.expr.charCodeAt(this.index+n.length)))){this.index+=r;const i=this.gobbleToken();return i||this.throwError("missing unaryOp argument"),this.runHook("after-token",{type:j.UNARY_EXP,operator:n,argument:i,prefix:!0})}n=n.substr(0,--r)}j.isIdentifierStart(e)?(s=this.gobbleIdentifier(),j.literals.hasOwnProperty(s.name)?s={type:j.LITERAL,value:j.literals[s.name],raw:s.name}:s.name===j.this_str&&(s={type:j.THIS_EXP})):e===j.OPAREN_CODE&&(s=this.gobbleGroup())}return s?(s=this.gobbleTokenProperty(s),this.runHook("after-token",s)):this.runHook("after-token",!1)}gobbleTokenProperty(e){this.gobbleSpaces();let n=this.code;for(;n===j.PERIOD_CODE||n===j.OBRACK_CODE||n===j.OPAREN_CODE||n===j.QUMARK_CODE;){let r;if(n===j.QUMARK_CODE){if(this.expr.charCodeAt(this.index+1)!==j.PERIOD_CODE)break;r=!0,this.index+=2,this.gobbleSpaces(),n=this.code}this.index++,n===j.OBRACK_CODE?(e={type:j.MEMBER_EXP,computed:!0,object:e,property:this.gobbleExpression()},e.property||this.throwError('Unexpected "'+this.char+'"'),this.gobbleSpaces(),n=this.code,n!==j.CBRACK_CODE&&this.throwError("Unclosed ["),this.index++):n===j.OPAREN_CODE?e={type:j.CALL_EXP,arguments:this.gobbleArguments(j.CPAREN_CODE),callee:e}:(n===j.PERIOD_CODE||r)&&(r&&this.index--,this.gobbleSpaces(),e={type:j.MEMBER_EXP,computed:!1,object:e,property:this.gobbleIdentifier()}),r&&(e.optional=!0),this.gobbleSpaces(),n=this.code}return e}gobbleNumericLiteral(){let e="",n,r;for(;j.isDecimalDigit(this.code);)e+=this.expr.charAt(this.index++);if(this.code===j.PERIOD_CODE)for(e+=this.expr.charAt(this.index++);j.isDecimalDigit(this.code);)e+=this.expr.charAt(this.index++);if(n=this.char,n==="e"||n==="E"){for(e+=this.expr.charAt(this.index++),n=this.char,(n==="+"||n==="-")&&(e+=this.expr.charAt(this.index++));j.isDecimalDigit(this.code);)e+=this.expr.charAt(this.index++);j.isDecimalDigit(this.expr.charCodeAt(this.index-1))||this.throwError("Expected exponent ("+e+this.char+")")}return r=this.code,j.isIdentifierStart(r)?this.throwError("Variable names cannot start with a number ("+e+this.char+")"):(r===j.PERIOD_CODE||e.length===1&&e.charCodeAt(0)===j.PERIOD_CODE)&&this.throwError("Unexpected period"),{type:j.LITERAL,value:parseFloat(e),raw:e}}gobbleStringLiteral(){let e="";const n=this.index,r=this.expr.charAt(this.index++);let s=!1;for(;this.index<this.expr.length;){let i=this.expr.charAt(this.index++);if(i===r){s=!0;break}else if(i==="\\")switch(i=this.expr.charAt(this.index++),i){case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:e+=i}else e+=i}return s||this.throwError('Unclosed quote after "'+e+'"'),{type:j.LITERAL,value:e,raw:this.expr.substring(n,this.index)}}gobbleIdentifier(){let e=this.code,n=this.index;for(j.isIdentifierStart(e)?this.index++:this.throwError("Unexpected "+this.char);this.index<this.expr.length&&(e=this.code,j.isIdentifierPart(e));)this.index++;return{type:j.IDENTIFIER,name:this.expr.slice(n,this.index)}}gobbleArguments(e){const n=[];let r=!1,s=0;for(;this.index<this.expr.length;){this.gobbleSpaces();let i=this.code;if(i===e){r=!0,this.index++,e===j.CPAREN_CODE&&s&&s>=n.length&&this.throwError("Unexpected token "+String.fromCharCode(e));break}else if(i===j.COMMA_CODE){if(this.index++,s++,s!==n.length){if(e===j.CPAREN_CODE)this.throwError("Unexpected token ,");else if(e===j.CBRACK_CODE)for(let o=n.length;o<s;o++)n.push(null)}}else if(n.length!==s&&s!==0)this.throwError("Expected comma");else{const o=this.gobbleExpression();(!o||o.type===j.COMPOUND)&&this.throwError("Expected comma"),n.push(o)}}return r||this.throwError("Expected "+String.fromCharCode(e)),n}gobbleGroup(){this.index++;let e=this.gobbleExpressions(j.CPAREN_CODE);if(this.code===j.CPAREN_CODE)return this.index++,e.length===1?e[0]:e.length?{type:j.SEQUENCE_EXP,expressions:e}:!1;this.throwError("Unclosed (")}gobbleArray(){return this.index++,{type:j.ARRAY_EXP,elements:this.gobbleArguments(j.CBRACK_CODE)}}}const pw=new dw;Object.assign(j,{hooks:pw,plugins:new hw(j),COMPOUND:"Compound",SEQUENCE_EXP:"SequenceExpression",IDENTIFIER:"Identifier",MEMBER_EXP:"MemberExpression",LITERAL:"Literal",THIS_EXP:"ThisExpression",CALL_EXP:"CallExpression",UNARY_EXP:"UnaryExpression",BINARY_EXP:"BinaryExpression",ARRAY_EXP:"ArrayExpression",TAB_CODE:9,LF_CODE:10,CR_CODE:13,SPACE_CODE:32,PERIOD_CODE:46,COMMA_CODE:44,SQUOTE_CODE:39,DQUOTE_CODE:34,OPAREN_CODE:40,CPAREN_CODE:41,OBRACK_CODE:91,CBRACK_CODE:93,QUMARK_CODE:63,SEMCOL_CODE:59,COLON_CODE:58,unary_ops:{"-":1,"!":1,"~":1,"+":1},binary_ops:{"||":1,"??":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10,"**":11},right_associative:new Set(["**"]),additional_identifier_chars:new Set(["$","_"]),literals:{true:!0,false:!1,null:null},this_str:"this"});j.max_unop_len=j.getMaxKeyLen(j.unary_ops);j.max_binop_len=j.getMaxKeyLen(j.binary_ops);const Pt=t=>new j(t).parse(),mw=Object.getOwnPropertyNames(class{});Object.getOwnPropertyNames(j).filter(t=>!mw.includes(t)&&Pt[t]===void 0).forEach(t=>{Pt[t]=j[t]});Pt.Jsep=j;const gw="ConditionalExpression";var yw={name:"ternary",init(t){t.hooks.add("after-expression",function(n){if(n.node&&this.code===t.QUMARK_CODE){this.index++;const r=n.node,s=this.gobbleExpression();if(s||this.throwError("Expected expression"),this.gobbleSpaces(),this.code===t.COLON_CODE){this.index++;const i=this.gobbleExpression();if(i||this.throwError("Expected expression"),n.node={type:gw,test:r,consequent:s,alternate:i},r.operator&&t.binary_ops[r.operator]<=.9){let o=r;for(;o.right.operator&&t.binary_ops[o.right.operator]<=.9;)o=o.right;n.node.test=o.right,o.right=n.node,n.node=r}}else this.throwError("Expected :")}})}};Pt.plugins.register(yw);const Wl=47,bw=92;var ww={name:"regex",init(t){t.hooks.add("gobble-token",function(n){if(this.code===Wl){const r=++this.index;let s=!1;for(;this.index<this.expr.length;){if(this.code===Wl&&!s){const i=this.expr.slice(r,this.index);let o="";for(;++this.index<this.expr.length;){const l=this.code;if(l>=97&&l<=122||l>=65&&l<=90||l>=48&&l<=57)o+=this.char;else break}let a;try{a=new RegExp(i,o)}catch(l){this.throwError(l.message)}return n.node={type:t.LITERAL,value:a,raw:this.expr.slice(r-1,this.index)},n.node=this.gobbleTokenProperty(n.node),n.node}this.code===t.OBRACK_CODE?s=!0:s&&this.code===t.CBRACK_CODE&&(s=!1),this.index+=this.code===bw?2:1}this.throwError("Unclosed Regex")}})}};const co=43,vw=45,Jn={name:"assignment",assignmentOperators:new Set(["=","*=","**=","/=","%=","+=","-=","<<=",">>=",">>>=","&=","^=","|=","||=","&&=","??="]),updateOperators:[co,vw],assignmentPrecedence:.9,init(t){const e=[t.IDENTIFIER,t.MEMBER_EXP];Jn.assignmentOperators.forEach(r=>t.addBinaryOp(r,Jn.assignmentPrecedence,!0)),t.hooks.add("gobble-token",function(s){const i=this.code;Jn.updateOperators.some(o=>o===i&&o===this.expr.charCodeAt(this.index+1))&&(this.index+=2,s.node={type:"UpdateExpression",operator:i===co?"++":"--",argument:this.gobbleTokenProperty(this.gobbleIdentifier()),prefix:!0},(!s.node.argument||!e.includes(s.node.argument.type))&&this.throwError(`Unexpected ${s.node.operator}`))}),t.hooks.add("after-token",function(s){if(s.node){const i=this.code;Jn.updateOperators.some(o=>o===i&&o===this.expr.charCodeAt(this.index+1))&&(e.includes(s.node.type)||this.throwError(`Unexpected ${s.node.operator}`),this.index+=2,s.node={type:"UpdateExpression",operator:i===co?"++":"--",argument:s.node,prefix:!1})}}),t.hooks.add("after-expression",function(s){s.node&&n(s.node)});function n(r){Jn.assignmentOperators.has(r.operator)?(r.type="AssignmentExpression",n(r.left),n(r.right)):r.operator||Object.values(r).forEach(s=>{s&&typeof s=="object"&&n(s)})}}};Pt.plugins.register(ww,Jn);Pt.addUnaryOp("typeof");Pt.addLiteral("null",null);Pt.addLiteral("undefined",void 0);const xw=new Set(["constructor","__proto__","__defineGetter__","__defineSetter__"]),ue={evalAst(t,e){switch(t.type){case"BinaryExpression":case"LogicalExpression":return ue.evalBinaryExpression(t,e);case"Compound":return ue.evalCompound(t,e);case"ConditionalExpression":return ue.evalConditionalExpression(t,e);case"Identifier":return ue.evalIdentifier(t,e);case"Literal":return ue.evalLiteral(t,e);case"MemberExpression":return ue.evalMemberExpression(t,e);case"UnaryExpression":return ue.evalUnaryExpression(t,e);case"ArrayExpression":return ue.evalArrayExpression(t,e);case"CallExpression":return ue.evalCallExpression(t,e);case"AssignmentExpression":return ue.evalAssignmentExpression(t,e);default:throw SyntaxError("Unexpected expression",t)}},evalBinaryExpression(t,e){return{"||":(r,s)=>r||s(),"&&":(r,s)=>r&&s(),"|":(r,s)=>r|s(),"^":(r,s)=>r^s(),"&":(r,s)=>r&s(),"==":(r,s)=>r==s(),"!=":(r,s)=>r!=s(),"===":(r,s)=>r===s(),"!==":(r,s)=>r!==s(),"<":(r,s)=>r<s(),">":(r,s)=>r>s(),"<=":(r,s)=>r<=s(),">=":(r,s)=>r>=s(),"<<":(r,s)=>r<<s(),">>":(r,s)=>r>>s(),">>>":(r,s)=>r>>>s(),"+":(r,s)=>r+s(),"-":(r,s)=>r-s(),"*":(r,s)=>r*s(),"/":(r,s)=>r/s(),"%":(r,s)=>r%s()}[t.operator](ue.evalAst(t.left,e),()=>ue.evalAst(t.right,e))},evalCompound(t,e){let n;for(let r=0;r<t.body.length;r++){t.body[r].type==="Identifier"&&["var","let","const"].includes(t.body[r].name)&&t.body[r+1]&&t.body[r+1].type==="AssignmentExpression"&&(r+=1);const s=t.body[r];n=ue.evalAst(s,e)}return n},evalConditionalExpression(t,e){return ue.evalAst(t.test,e)?ue.evalAst(t.consequent,e):ue.evalAst(t.alternate,e)},evalIdentifier(t,e){if(Object.hasOwn(e,t.name))return e[t.name];throw ReferenceError(`${t.name} is not defined`)},evalLiteral(t){return t.value},evalMemberExpression(t,e){const n=String(t.computed?ue.evalAst(t.property):t.property.name),r=ue.evalAst(t.object,e);if(r==null)throw TypeError(`Cannot read properties of ${r} (reading '${n}')`);if(!Object.hasOwn(r,n)&&xw.has(n))throw TypeError(`Cannot read properties of ${r} (reading '${n}')`);const s=r[n];return typeof s=="function"?s.bind(r):s},evalUnaryExpression(t,e){return{"-":r=>-ue.evalAst(r,e),"!":r=>!ue.evalAst(r,e),"~":r=>~ue.evalAst(r,e),"+":r=>+ue.evalAst(r,e),typeof:r=>typeof ue.evalAst(r,e)}[t.operator](t.argument)},evalArrayExpression(t,e){return t.elements.map(n=>ue.evalAst(n,e))},evalCallExpression(t,e){const n=t.arguments.map(s=>ue.evalAst(s,e));return ue.evalAst(t.callee,e)(...n)},evalAssignmentExpression(t,e){if(t.left.type!=="Identifier")throw SyntaxError("Invalid left-hand side in assignment");const n=t.left.name,r=ue.evalAst(t.right,e);return e[n]=r,e[n]}};class _w{constructor(e){this.code=e,this.ast=Pt(this.code)}runInNewContext(e){const n=Object.assign(Object.create(null),e);return ue.evalAst(this.ast,n)}}function Dt(t,e){return t=t.slice(),t.push(e),t}function Jo(t,e){return e=e.slice(),e.unshift(t),e}class Sw extends Error{constructor(e){super('JSONPath should not be called with "new" (it prevents return of (unwrapped) scalar values)'),this.avoidNew=!0,this.value=e,this.name="NewError"}}function se(t,e,n,r,s){if(!(this instanceof se))try{return new se(t,e,n,r,s)}catch(o){if(!o.avoidNew)throw o;return o.value}typeof t=="string"&&(s=r,r=n,n=e,e=t,t=null);const i=t&&typeof t=="object";if(t=t||{},this.json=t.json||n,this.path=t.path||e,this.resultType=t.resultType||"value",this.flatten=t.flatten||!1,this.wrap=Object.hasOwn(t,"wrap")?t.wrap:!0,this.sandbox=t.sandbox||{},this.eval=t.eval===void 0?"safe":t.eval,this.ignoreEvalErrors=typeof t.ignoreEvalErrors>"u"?!1:t.ignoreEvalErrors,this.parent=t.parent||null,this.parentProperty=t.parentProperty||null,this.callback=t.callback||r||null,this.otherTypeCallback=t.otherTypeCallback||s||function(){throw new TypeError("You must supply an otherTypeCallback callback option with the @other() operator.")},t.autostart!==!1){const o={path:i?t.path:e};i?"json"in t&&(o.json=t.json):o.json=n;const a=this.evaluate(o);if(!a||typeof a!="object")throw new Sw(a);return a}}se.prototype.evaluate=function(t,e,n,r){let s=this.parent,i=this.parentProperty,{flatten:o,wrap:a}=this;if(this.currResultType=this.resultType,this.currEval=this.eval,this.currSandbox=this.sandbox,n=n||this.callback,this.currOtherTypeCallback=r||this.otherTypeCallback,e=e||this.json,t=t||this.path,t&&typeof t=="object"&&!Array.isArray(t)){if(!t.path&&t.path!=="")throw new TypeError('You must supply a "path" property when providing an object argument to JSONPath.evaluate().');if(!Object.hasOwn(t,"json"))throw new TypeError('You must supply a "json" property when providing an object argument to JSONPath.evaluate().');({json:e}=t),o=Object.hasOwn(t,"flatten")?t.flatten:o,this.currResultType=Object.hasOwn(t,"resultType")?t.resultType:this.currResultType,this.currSandbox=Object.hasOwn(t,"sandbox")?t.sandbox:this.currSandbox,a=Object.hasOwn(t,"wrap")?t.wrap:a,this.currEval=Object.hasOwn(t,"eval")?t.eval:this.currEval,n=Object.hasOwn(t,"callback")?t.callback:n,this.currOtherTypeCallback=Object.hasOwn(t,"otherTypeCallback")?t.otherTypeCallback:this.currOtherTypeCallback,s=Object.hasOwn(t,"parent")?t.parent:s,i=Object.hasOwn(t,"parentProperty")?t.parentProperty:i,t=t.path}if(s=s||null,i=i||null,Array.isArray(t)&&(t=se.toPathString(t)),!t&&t!==""||!e)return;const l=se.toPathArray(t);l[0]==="$"&&l.length>1&&l.shift(),this._hasParentSelector=null;const c=this._trace(l,e,["$"],s,i,n).filter(function(u){return u&&!u.isParentSelector});return c.length?!a&&c.length===1&&!c[0].hasArrExpr?this._getPreferredOutput(c[0]):c.reduce((u,f)=>{const h=this._getPreferredOutput(f);return o&&Array.isArray(h)?u=u.concat(h):u.push(h),u},[]):a?[]:void 0};se.prototype._getPreferredOutput=function(t){const e=this.currResultType;switch(e){case"all":{const n=Array.isArray(t.path)?t.path:se.toPathArray(t.path);return t.pointer=se.toPointer(n),t.path=typeof t.path=="string"?t.path:se.toPathString(t.path),t}case"value":case"parent":case"parentProperty":return t[e];case"path":return se.toPathString(t[e]);case"pointer":return se.toPointer(t.path);default:throw new TypeError("Unknown result type")}};se.prototype._handleCallback=function(t,e,n){if(e){const r=this._getPreferredOutput(t);t.path=typeof t.path=="string"?t.path:se.toPathString(t.path),e(r,n,t)}};se.prototype._trace=function(t,e,n,r,s,i,o,a){let l;if(!t.length)return l={path:n,value:e,parent:r,parentProperty:s,hasArrExpr:o},this._handleCallback(l,i,"value"),l;const c=t[0],u=t.slice(1),f=[];function h(p){Array.isArray(p)?p.forEach(y=>{f.push(y)}):f.push(p)}if((typeof c!="string"||a)&&e&&Object.hasOwn(e,c))h(this._trace(u,e[c],Dt(n,c),e,c,i,o));else if(c==="*")this._walk(e,p=>{h(this._trace(u,e[p],Dt(n,p),e,p,i,!0,!0))});else if(c==="..")h(this._trace(u,e,n,r,s,i,o)),this._walk(e,p=>{typeof e[p]=="object"&&h(this._trace(t.slice(),e[p],Dt(n,p),e,p,i,!0))});else{if(c==="^")return this._hasParentSelector=!0,{path:n.slice(0,-1),expr:u,isParentSelector:!0};if(c==="~")return l={path:Dt(n,c),value:s,parent:r,parentProperty:null},this._handleCallback(l,i,"property"),l;if(c==="$")h(this._trace(u,e,n,null,null,i,o));else if(/^(-?\d*):(-?\d*):?(\d*)$/u.test(c))h(this._slice(c,u,e,n,r,s,i));else if(c.indexOf("?(")===0){if(this.currEval===!1)throw new Error("Eval [?(expr)] prevented in JSONPath expression.");const p=c.replace(/^\?\((.*?)\)$/u,"$1"),y=/@.?([^?]*)[['](\??\(.*?\))(?!.\)\])[\]']/gu.exec(p);y?this._walk(e,m=>{const w=[y[2]],g=y[1]?e[m][y[1]]:e[m];this._trace(w,g,n,r,s,i,!0).length>0&&h(this._trace(u,e[m],Dt(n,m),e,m,i,!0))}):this._walk(e,m=>{this._eval(p,e[m],m,n,r,s)&&h(this._trace(u,e[m],Dt(n,m),e,m,i,!0))})}else if(c[0]==="("){if(this.currEval===!1)throw new Error("Eval [(expr)] prevented in JSONPath expression.");h(this._trace(Jo(this._eval(c,e,n.at(-1),n.slice(0,-1),r,s),u),e,n,r,s,i,o))}else if(c[0]==="@"){let p=!1;const y=c.slice(1,-2);switch(y){case"scalar":(!e||!["object","function"].includes(typeof e))&&(p=!0);break;case"boolean":case"string":case"undefined":case"function":typeof e===y&&(p=!0);break;case"integer":Number.isFinite(e)&&!(e%1)&&(p=!0);break;case"number":Number.isFinite(e)&&(p=!0);break;case"nonFinite":typeof e=="number"&&!Number.isFinite(e)&&(p=!0);break;case"object":e&&typeof e===y&&(p=!0);break;case"array":Array.isArray(e)&&(p=!0);break;case"other":p=this.currOtherTypeCallback(e,n,r,s);break;case"null":e===null&&(p=!0);break;default:throw new TypeError("Unknown value type "+y)}if(p)return l={path:n,value:e,parent:r,parentProperty:s},this._handleCallback(l,i,"value"),l}else if(c[0]==="`"&&e&&Object.hasOwn(e,c.slice(1))){const p=c.slice(1);h(this._trace(u,e[p],Dt(n,p),e,p,i,o,!0))}else if(c.includes(",")){const p=c.split(",");for(const y of p)h(this._trace(Jo(y,u),e,n,r,s,i,!0))}else!a&&e&&Object.hasOwn(e,c)&&h(this._trace(u,e[c],Dt(n,c),e,c,i,o,!0))}if(this._hasParentSelector)for(let p=0;p<f.length;p++){const y=f[p];if(y&&y.isParentSelector){const m=this._trace(y.expr,e,y.path,r,s,i,o);if(Array.isArray(m)){f[p]=m[0];const w=m.length;for(let g=1;g<w;g++)p++,f.splice(p,0,m[g])}else f[p]=m}}return f};se.prototype._walk=function(t,e){if(Array.isArray(t)){const n=t.length;for(let r=0;r<n;r++)e(r)}else t&&typeof t=="object"&&Object.keys(t).forEach(n=>{e(n)})};se.prototype._slice=function(t,e,n,r,s,i,o){if(!Array.isArray(n))return;const a=n.length,l=t.split(":"),c=l[2]&&Number.parseInt(l[2])||1;let u=l[0]&&Number.parseInt(l[0])||0,f=l[1]&&Number.parseInt(l[1])||a;u=u<0?Math.max(0,u+a):Math.min(a,u),f=f<0?Math.max(0,f+a):Math.min(a,f);const h=[];for(let p=u;p<f;p+=c)this._trace(Jo(p,e),n,r,s,i,o,!0).forEach(m=>{h.push(m)});return h};se.prototype._eval=function(t,e,n,r,s,i){this.currSandbox._$_parentProperty=i,this.currSandbox._$_parent=s,this.currSandbox._$_property=n,this.currSandbox._$_root=this.json,this.currSandbox._$_v=e;const o=t.includes("@path");o&&(this.currSandbox._$_path=se.toPathString(r.concat([n])));const a=this.currEval+"Script:"+t;if(!se.cache[a]){let l=t.replaceAll("@parentProperty","_$_parentProperty").replaceAll("@parent","_$_parent").replaceAll("@property","_$_property").replaceAll("@root","_$_root").replaceAll(/@([.\s)[])/gu,"_$_v$1");if(o&&(l=l.replaceAll("@path","_$_path")),this.currEval==="safe"||this.currEval===!0||this.currEval===void 0)se.cache[a]=new this.safeVm.Script(l);else if(this.currEval==="native")se.cache[a]=new this.vm.Script(l);else if(typeof this.currEval=="function"&&this.currEval.prototype&&Object.hasOwn(this.currEval.prototype,"runInNewContext")){const c=this.currEval;se.cache[a]=new c(l)}else if(typeof this.currEval=="function")se.cache[a]={runInNewContext:c=>this.currEval(l,c)};else throw new TypeError(`Unknown "eval" property "${this.currEval}"`)}try{return se.cache[a].runInNewContext(this.currSandbox)}catch(l){if(this.ignoreEvalErrors)return!1;throw new Error("jsonPath: "+l.message+": "+t)}};se.cache={};se.toPathString=function(t){const e=t,n=e.length;let r="$";for(let s=1;s<n;s++)/^(~|\^|@.*?\(\))$/u.test(e[s])||(r+=/^[0-9*]+$/u.test(e[s])?"["+e[s]+"]":"['"+e[s]+"']");return r};se.toPointer=function(t){const e=t,n=e.length;let r="";for(let s=1;s<n;s++)/^(~|\^|@.*?\(\))$/u.test(e[s])||(r+="/"+e[s].toString().replaceAll("~","~0").replaceAll("/","~1"));return r};se.toPathArray=function(t){const{cache:e}=se;if(e[t])return e[t].concat();const n=[],s=t.replaceAll(/@(?:null|boolean|number|string|integer|undefined|nonFinite|scalar|array|object|function|other)\(\)/gu,";$&;").replaceAll(/[['](\??\(.*?\))[\]'](?!.\])/gu,function(i,o){return"[#"+(n.push(o)-1)+"]"}).replaceAll(/\[['"]([^'\]]*)['"]\]/gu,function(i,o){return"['"+o.replaceAll(".","%@%").replaceAll("~","%%@@%%")+"']"}).replaceAll("~",";~;").replaceAll(/['"]?\.['"]?(?![^[]*\])|\[['"]?/gu,";").replaceAll("%@%",".").replaceAll("%%@@%%","~").replaceAll(/(?:;)?(\^+)(?:;)?/gu,function(i,o){return";"+o.split("").join(";")+";"}).replaceAll(/;;;|;;/gu,";..;").replaceAll(/;$|'?\]|'$/gu,"").split(";").map(function(i){const o=i.match(/#(\d+)/u);return!o||!o[1]?i:n[o[1]]});return e[t]=s,e[t].concat()};se.prototype.safeVm={Script:_w};const kw=function(t,e,n){const r=t.length;for(let s=0;s<r;s++){const i=t[s];n(i)&&e.push(t.splice(s--,1)[0])}};class Ew{constructor(e){this.code=e}runInNewContext(e){let n=this.code;const r=Object.keys(e),s=[];kw(r,s,c=>typeof e[c]=="function");const i=r.map(c=>e[c]);n=s.reduce((c,u)=>{let f=e[u].toString();return/function/u.test(f)||(f="function "+f),"var "+u+"="+f+";"+c},"")+n,!/(['"])use strict\1/u.test(n)&&!r.includes("arguments")&&(n="var arguments = undefined;"+n),n=n.replace(/;\s*$/u,"");const a=n.lastIndexOf(";"),l=a!==-1?n.slice(0,a+1)+" return "+n.slice(a+1):" return "+n;return new Function(...r,l)(...i)}}se.prototype.vm={Script:Ew};const Tw="/tc-animator/assets/blockbench-settings-G7FDEJl4.png";function Nw(){const t=z.c(32),{modelIds:e,selectedObjectPath:n,cart:r,modelFiles:s,setModelFile:i}=ot();let o;e:{if(!n||!r){let N;t[0]===Symbol.for("react.memo_cache_sentinel")?(N=[],t[0]=N):N=t[0],o=N;break e}let x;if(t[1]!==r||t[2]!==n){const N=se({path:n,json:r,resultType:"value"});if(N.length===0){let C;t[5]===Symbol.for("react.memo_cache_sentinel")?(C=[],t[5]=C):C=t[5],o=C;break e}const T=N[0];if(!T||typeof T!="object"){let C;t[6]===Symbol.for("react.memo_cache_sentinel")?(C=[],t[6]=C):C=t[6],o=C;break e}x=new Set;const A=function(R){if(!R)return;const I=R["minecraft:custom_model_data"];if(I&&typeof I=="object"&&"floats"in I){const P=I.floats;Array.isArray(P)&&P.forEach(L=>x.add(L))}};if("item"in T){const C=T.item;A(C?.components)}t[1]=r,t[2]=n,t[3]=x,t[4]=o}else x=t[3],o=t[4];let k;t[7]!==x?(k=Array.from(x),t[7]=x,t[8]=k):k=t[8],o=k}const a=o;let l;t[9]!==i?(l=async x=>{try{const k=await da({mimeTypes:["model/gltf+json","model/gltf-binary"],extensions:[".gltf",".glb"],multiple:!1,description:"3D Model (GLTF/GLB)",id:"tca-models"}),N=await k.arrayBuffer();let T=N;if(k.name.toLowerCase().endsWith(".gltf"))try{const A=await uu(N);T=$c(A.buffer)}catch(A){console.error("Failed to convert GLTF to GLB:",A),alert("Failed to convert GLTF to GLB. See console for details.")}i(x,T)}catch(k){const N=k;N.name!=="AbortError"&&(console.error("Error loading model file:",N),alert("Error loading model file. See console for details."))}},t[9]=i,t[10]=l):l=t[10];const c=l;let u,f;t[11]===Symbol.for("react.memo_cache_sentinel")?(u=d.jsx("br",{}),f=d.jsx("br",{}),t[11]=u,t[12]=f):(u=t[11],f=t[12]);let h;t[13]===Symbol.for("react.memo_cache_sentinel")?(h=d.jsx("b",{children:"GLTF"}),t[13]=h):h=t[13];let p;t[14]===Symbol.for("react.memo_cache_sentinel")?(p=d.jsx("b",{children:"GLB"}),t[14]=p):p=t[14];let y;t[15]===Symbol.for("react.memo_cache_sentinel")?(y=d.jsx(qt,{className:"mx-1 cursor-help font-bold underline underline-offset-2",children:"Blockbench"}),t[15]=y):y=t[15];let m;t[16]===Symbol.for("react.memo_cache_sentinel")?(m=d.jsxs(Wt,{children:[y,d.jsxs(Gt,{children:[d.jsx("p",{className:"mb-2 text-lg",children:"Use these settings when exporting from Blockbench:"}),d.jsx("img",{src:Tw,alt:"Blockbench export settings"})]})]}),t[16]=m):m=t[16];let w,g;t[17]===Symbol.for("react.memo_cache_sentinel")?(w=d.jsx("br",{}),g=d.jsx("br",{}),t[17]=w,t[18]=g):(w=t[17],g=t[18]);let E,v,S;t[19]===Symbol.for("react.memo_cache_sentinel")?(E=d.jsxs("p",{className:"mb-4 text-balance",children:["You can replace the default cubes with your own 3D models to make the cart look like it would *in-game with a resourcepack.",u,f,"Models must be in ",h," or ",p," format. These can be exported from",m,"or most 3D software.",w,g,"Below, you'll see each ",d.jsx("b",{children:"Custom Model ID"})," for your attachments. Select an attachment in the 3D view to highlight the corresponding ID if it has one. Upload your model next to the matching ID to apply it in TC Animator."]}),v=d.jsx("p",{className:"text-xs text-muted-foreground text-balance",children:"* Models are shown just like Item Display Entities in Minecraft. Any automatic scaling based on display mode is not applied here."}),S=d.jsx("hr",{className:"my-4"}),t[19]=E,t[20]=v,t[21]=S):(E=t[19],v=t[20],S=t[21]);let _;t[22]!==e.length?(_=e.length===0&&d.jsx("p",{className:"text-muted-foreground text-sm",children:"No custom models required for this cart."}),t[22]=e.length,t[23]=_):_=t[23];let O;t[24]!==c||t[25]!==s||t[26]!==e||t[27]!==a?(O=e.length>0&&d.jsxs(df,{children:[d.jsx(hf,{children:d.jsxs(hi,{children:[d.jsx(Ut,{children:"Custom Model ID"}),d.jsx(Ut,{children:"Upload Model"})]})}),d.jsx(pf,{children:e.map(x=>d.jsxs(hi,{children:[d.jsx(Vt,{className:a.includes(x)?"font-bold text-primary":"",children:x}),d.jsx(Vt,{children:d.jsx(Ve,{variant:"secondary",size:"sm",onClick:()=>c(x),children:s.get(x)?"Change Model":"Upload Model"})})]},x))})]}),t[24]=c,t[25]=s,t[26]=e,t[27]=a,t[28]=O):O=t[28];let b;return t[29]!==_||t[30]!==O?(b=d.jsxs("div",{className:"overflow-y-auto",children:[E,v,S,d.jsxs(yc,{FallbackComponent:ff,children:[_,O]})]}),t[29]=_,t[30]=O,t[31]=b):b=t[31],b}function Aw(){const t=z.c(13),e=ot();let n,r,s;t[0]===Symbol.for("react.memo_cache_sentinel")?(n=d.jsx("h2",{className:"text-lg font-medium",children:"Guidelines"}),r=d.jsx("p",{className:"text-balance text-sm",children:"Guidelines allow you to add references grids to the 3D view to help with positioning and scaling models. You can add guidelines for different planes (XY, XZ, YZ) and adjust their spacing and color."}),s=d.jsx(vc,{className:"my-2"}),t[0]=n,t[1]=r,t[2]=s):(n=t[0],r=t[1],s=t[2]);let i;t[3]===Symbol.for("react.memo_cache_sentinel")?(i=d.jsx(hf,{children:d.jsxs(hi,{children:[d.jsx(Ut,{children:"Plane"}),d.jsx(Ut,{children:"Position"}),d.jsx(Ut,{children:"Cell Size"}),d.jsx(Ut,{children:"Section Size"}),d.jsx(Ut,{children:"Cell Color"}),d.jsx(Ut,{className:"text-right",children:"Actions"})]})}),t[3]=i):i=t[3];let o;t[4]!==e?(o=e.metadata.guidelines.map((u,f)=>d.jsxs(hi,{children:[d.jsx(Vt,{children:d.jsxs(ei,{onValueChange:h=>{(h==="XY"||h==="XZ"||h==="YZ")&&e.updateGuideline(f,{plane:h})},value:u.plane,children:[d.jsx(ni,{className:"w-full mt-0",children:d.jsx(ti,{placeholder:"XZ"})}),d.jsxs(ri,{children:[d.jsx(vn,{value:"XY",children:"XY"}),d.jsx(vn,{value:"XZ",children:"XZ"}),d.jsx(vn,{value:"YZ",children:"YZ"})]})]})}),d.jsx(Vt,{children:`[${u.position.map(Ow).join(", ")}]`}),d.jsx(Vt,{children:u.cellSize.toFixed(4)}),d.jsx(Vt,{children:u.sectionSize.toFixed(4)}),d.jsx(Vt,{children:d.jsx(Fc,{defaultColor:u.cellColor,onChangeComplete:h=>e.updateGuideline(f,{cellColor:h})})}),d.jsxs(Vt,{className:"text-right gap-2 flex justify-end",children:[d.jsx(Ve,{title:"Delete Guideline",size:"icon",variant:"destructive",onClick:()=>e.removeGuideline(f),children:d.jsx(zd,{})}),d.jsx(Ve,{title:"Toggle Visibility",size:"icon",variant:"secondary",onClick:()=>e.updateGuideline(f,{visible:!u.visible}),children:u.visible?d.jsx(Ld,{}):d.jsx(Dd,{})})]})]},f)),t[4]=e,t[5]=o):o=t[5];let a;t[6]!==o?(a=d.jsxs(df,{className:"w-full h-full",children:[i,d.jsx(pf,{children:o})]}),t[6]=o,t[7]=a):a=t[7];let l;t[8]!==e?(l=d.jsx(Ve,{onClick:()=>e.addGuideline({plane:"XZ",position:[.5,0,.5],cellSize:.0625,sectionSize:1,cellColor:"#ff0000",visible:!0}),children:"Add Guideline"}),t[8]=e,t[9]=l):l=t[9];let c;return t[10]!==a||t[11]!==l?(c=d.jsxs("div",{className:"h-full w-full overflow-auto",children:[n,r,s,a,l]}),t[10]=a,t[11]=l,t[12]=c):c=t[12],c}function Ow(t){return t.toFixed(2)}function Cw(){const t=z.c(3);let e,n;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=d.jsx(er,{className:"px-4 pb-2",children:d.jsx("div",{className:"h-full w-full overflow-auto",children:d.jsx("h2",{className:"text-lg font-medium",children:"Object Controls (to be implemented)"})})}),n=d.jsx(Oo,{}),t[0]=e,t[1]=n):(e=t[0],n=t[1]);let r;return t[2]===Symbol.for("react.memo_cache_sentinel")?(r=d.jsxs(Ao,{direction:"vertical",autoSaveId:"tca-object-controls",autoSave:"true",children:[e,n,d.jsx(er,{className:"px-4 py-2",children:d.jsx(Aw,{})})]}),t[2]=r):r=t[2],r}function ql(t){const e=z.c(8);let n,r;e[0]!==t?({className:n,...r}=t,e[0]=t,e[1]=n,e[2]=r):(n=e[1],r=e[2]);let s;e[3]!==n?(s=U("bg-accent animate-pulse rounded-md",n),e[3]=n,e[4]=s):s=e[4];let i;return e[5]!==r||e[6]!==s?(i=d.jsx("div",{"data-slot":"skeleton",className:s,...r}),e[5]=r,e[6]=s,e[7]=i):i=e[7],i}const Gl=$.lazy(()=>rp(()=>import("./monaco-CzMVDqXD.js"),__vite__mapDeps([0,1,2])));function jw(){const t=ot(),e=$.useMemo(()=>({...t,cart:void 0,modelFiles:void 0,fileHandle:void 0}),[t]);return d.jsxs(uw,{defaultValue:"object-controls",className:"-mt-4 h-full w-full overflow-auto",children:[d.jsxs(fw,{className:"w-full rounded-none",children:[d.jsx(Rs,{value:"object-controls",children:"Object Controls"}),d.jsx(Rs,{value:"custom-models",children:"Custom Models"}),d.jsx(Rs,{value:"cart-debug",children:"Cart Debug"}),d.jsx(Rs,{value:"project-debug",children:"Project Debug"})]}),d.jsx(Ps,{value:"object-controls",className:"overflow-auto",children:d.jsx(Cw,{})}),d.jsx(Ps,{value:"custom-models",className:"px-4 overflow-auto",children:d.jsx(Nw,{})}),d.jsx(Ps,{value:"cart-debug",className:"overflow-auto",children:d.jsx($.Suspense,{fallback:d.jsx(ql,{className:"h-full w-full"}),children:d.jsx(Gl,{language:"json",theme:"vs-dark",value:JSON.stringify(t.cart,null,2),options:{minimap:{enabled:!0},scrollbar:{alwaysConsumeMouseWheel:!1},wordWrap:"on",automaticLayout:!0},onChange:n=>{if(n)try{const r=JSON.parse(n);t.setCart(r)}catch(r){console.error("Failed to parse JSON:",r)}}})})}),d.jsx(Ps,{value:"project-debug",className:"overflow-auto",children:d.jsxs($.Suspense,{fallback:d.jsx(ql,{className:"h-full w-full"}),children:[d.jsx(Ve,{className:"mb-2 block w-full",onClick:()=>t.logState(),children:"Log State to Console"}),d.jsx(Gl,{language:"json",theme:"vs-dark",value:JSON.stringify(e,null,2),options:{minimap:{enabled:!1},scrollbar:{alwaysConsumeMouseWheel:!1},wordWrap:"off",automaticLayout:!0,readOnly:!0}})]})})]})}let Hs=[],Ks=[];function Iw(t){return Hs.push(t),()=>{Hs=Hs.filter(e=>e!==t)}}function Mw(t){return Ks.push(t),()=>{Ks=Ks.filter(e=>e!==t)}}function Rw(){const t=z.c(3),e=$.useRef(0);let n;t[0]===Symbol.for("react.memo_cache_sentinel")?(n=performance.now(),t[0]=n):n=t[0];const r=$.useRef(n),{gl:s}=bi();let i;return t[1]!==s?(i=()=>{e.current=e.current+1;const o=performance.now(),a=o-r.current;if(a>500){const l=Math.round(e.current*1e3/a);e.current=0,r.current=o,Hs.forEach(u=>u(l));const c=s.info;Ks.forEach(u=>u(c.render))}},t[1]=s,t[2]=i):i=t[2],la(i),null}function Pw(t){const e=z.c(24),{position:n}=t,r=n===void 0?"top-right":n,s=rs(),[i,o]=$.useState(0);let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a={calls:0,frame:0,lines:0,points:0,triangles:0},e[0]=a):a=e[0];const[l,c]=$.useState(a);let u,f;e[1]===Symbol.for("react.memo_cache_sentinel")?(u=()=>Iw(o),f=[],e[1]=u,e[2]=f):(u=e[1],f=e[2]),$.useEffect(u,f);let h,p;e[3]===Symbol.for("react.memo_cache_sentinel")?(h=()=>Mw(c),p=[],e[3]=h,e[4]=p):(h=e[3],p=e[4]),$.useEffect(h,p);const y=r.includes("top")?8:void 0,m=r.includes("bottom")?8:void 0,w=r.includes("left")?8:void 0,g=r.includes("right")?8:void 0;let E;e[5]!==g||e[6]!==y||e[7]!==m||e[8]!==w?(E={top:y,bottom:m,left:w,right:g},e[5]=g,e[6]=y,e[7]=m,e[8]=w,e[9]=E):E=e[9];const v=E;let S;e[10]!==v?(S={...v},e[10]=v,e[11]=S):S=e[11];let _;e[12]!==i?(_=d.jsxs("p",{children:[i," FPS"]}),e[12]=i,e[13]=_):_=e[13];let O;e[14]!==s.DOFEnabled||e[15]!==s.SSAOEnabled||e[16]!==s.controlDamping||e[17]!==s.debugText||e[18]!==l?(O=s.debugText&&d.jsxs(d.Fragment,{children:[d.jsx("hr",{className:"border-border my-1 border-t"}),d.jsxs("p",{children:["Draw Calls: ",l.calls]}),d.jsxs("p",{children:["Frame: ",l.frame]}),d.jsxs("p",{children:["Triangles: ",l.triangles]}),d.jsxs("p",{children:["Lines: ",l.lines]}),d.jsxs("p",{children:["Points: ",l.points]}),d.jsx("hr",{className:"border-border my-1 border-t"}),d.jsxs("p",{children:["Debug Text: ",s.debugText?"On":"Off"]}),d.jsxs("p",{children:["SSAO: ",s.SSAOEnabled?"On":"Off"]}),d.jsxs("p",{children:["Depth of Field: ",s.DOFEnabled?"On":"Off"]}),d.jsxs("p",{children:["Control Damping:"," ",s.controlDamping?"On":"Off"]})]}),e[14]=s.DOFEnabled,e[15]=s.SSAOEnabled,e[16]=s.controlDamping,e[17]=s.debugText,e[18]=l,e[19]=O):O=e[19];let b;return e[20]!==S||e[21]!==_||e[22]!==O?(b=d.jsxs("div",{className:"text-muted-foreground pointer-events-none absolute z-10 text-right font-mono text-sm",style:S,children:[_,O]}),e[20]=S,e[21]=_,e[22]=O,e[23]=b):b=e[23],b}const $w="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAAAXNSR0IArs4c6QAAAHpJREFUOI21kjEKACEMBNdD/IGV/39abMwL0uSKgIiCyRVnETFsMrJsUlWEDxFlu0opIuJWZn4ABNUiAiADuChaawDGGNYB4BDs6yvhuRNsYJ3/n5DXd611c9khbPt8wtw33YwSps5x6dSdhKSq8Sz13r9niYiYOZ7wF+cqCUwV0Ir/AAAAAElFTkSuQmCC",$s=[],zw=5;function Lw(){const t=Math.floor(Math.random()*360),e=70+Math.random()*10,n=80+Math.random()*10;return`hsl(${t}, ${e}%, ${n}%)`}function Dw(){let t="",e=0;do t=Lw(),e++;while($s.includes(t)&&e<10);return $s.push(t),$s.length>zw&&$s.shift(),t}const Zr=$.forwardRef((t,e)=>{const n=z.c(13),r=sp($w);let s,i;n[0]!==r?(i=r.clone(),i.magFilter=Xa,i.minFilter=Xa,n[0]=r,n[1]=i):i=n[1],s=i;const o=s;let a,l;n[2]===Symbol.for("react.memo_cache_sentinel")?(l=Dw(),n[2]=l):l=n[2],a=l;const c=a;let u;if(n[3]!==t.position){const m=new Oe(0,.5,0);u=(t.position instanceof Oe?t.position:Array.isArray(t.position)?new Oe(...t.position):new Oe(0,0,0)).clone().add(m),n[3]=t.position,n[4]=u}else u=n[4];const f=u;let h;n[5]===Symbol.for("react.memo_cache_sentinel")?(h=d.jsx("boxGeometry",{args:[1,1,1]}),n[5]=h):h=n[5];let p;n[6]!==o?(p=d.jsx("meshStandardMaterial",{map:o,color:c}),n[6]=o,n[7]=p):p=n[7];let y;return n[8]!==f||n[9]!==t||n[10]!==e||n[11]!==p?(y=d.jsxs("mesh",{ref:e,...t,castShadow:!0,receiveShadow:!0,position:f,children:[h,p]}),n[8]=f,n[9]=t,n[10]=e,n[11]=p,n[12]=y):y=n[12],y});function mf({jsonPath:t}){const{cart:e,modelFiles:n}=ot(),r=$.useMemo(()=>{if(!t||!e)return[];const s=se({path:t,json:e,resultType:"value"});if(s.length===0)return[];const i=s[0];if(!i||typeof i!="object")return[];const o=new Set;function a(l){if(!l)return;const c=l["minecraft:custom_model_data"];if(c&&typeof c=="object"&&"floats"in c){const u=c.floats;Array.isArray(u)&&u.forEach(f=>o.add(f))}}if("item"in i){const l=i.item;a(l?.components)}return Array.from(o)},[t,e]);return r.length===0?d.jsx(d.Fragment,{children:d.jsx(Zr,{})}):d.jsx(d.Fragment,{children:r.map(s=>{if(!n)return d.jsx(Zr,{},s);const i=n.get(s);return!i||!i.url?d.jsx(Zr,{},s):d.jsx(Fw,{modelId:s,blobUrl:i.url},s)})})}function Fw({modelId:t,blobUrl:e,scale:n=1,position:r=new Oe(0,0,0)}){const{scene:s}=ca(e),i=$.useMemo(()=>{if(!s)return null;const o=s.clone(!0);o.updateWorldMatrix(!0,!0);const a=new bp().copy(o.matrixWorld).invert();o.traverse(c=>c.applyMatrix4(a)),o.position.set(-.5,-.5,-.5),o.rotation.set(0,0,0),o.scale.set(1,1,1);const l=new wp;return l.add(o),l.scale.setScalar(1),l},[s]);return i?d.jsx("group",{scale:n,position:r,children:d.jsx("primitive",{object:i,rotation:[0,It(180),0],castShadow:!0,receiveShadow:!0})}):d.jsx(Zr,{},t)}const gf="/tc-animator/assets/dummy-DcMSIvyN.glb";ca.preload(gf);function Bw({scale:t=1,position:e=new Oe(0,0,0)}){const{scene:n}=ca(gf),r=$.useMemo(()=>n?vp(n):null,[n]);return r?d.jsx("primitive",{object:r,scale:t,position:e,castShadow:!0,receiveShadow:!0}):d.jsx(Zr,{})}function Hl(t){const e=z.c(14),n=$.useRef(null),{camera:r}=bi();let s;e[0]!==r?(s=()=>{if(!n.current)return;const m=n.current.getWorldPosition(new Oe),w=r.position.clone();w.y=m.y;const g=w.sub(m).normalize();let E=Math.atan2(g.x,g.z);if(n.current.parent){const v=new Ac;n.current.parent.getWorldQuaternion(v);const _=new ua().setFromQuaternion(v,"YXZ").y;E=E-_+Math.PI}else E=E+Math.PI;n.current.rotation.set(0,E+It(180),0)},e[0]=r,e[1]=s):s=e[1],la(s);let i;e[2]===Symbol.for("react.memo_cache_sentinel")?(i=[.3,.3,.3],e[2]=i):i=e[2];let o,a=0,l=0,c=-.1;const u=t.position;Array.isArray(u)&&u.length===3?(a=u[0]??0,l=u[1]??0,c=(u[2]??0)-.1):u&&typeof u=="object"&&"x"in u&&"y"in u&&"z"in u?(a=u.x??0,l=u.y??0,c=(u.z??0)-.1):typeof u=="number"&&(a=u);let f;e[3]!==a||e[4]!==l||e[5]!==c?(f=new Oe(a,l,c),e[3]=a,e[4]=l,e[5]=c,e[6]=f):f=e[6],o=f;let h;e[7]!==o?(h=d.jsx(op,{castShadow:!0,receiveShadow:!0,args:i,position:o}),e[7]=o,e[8]=h):h=e[8];let p;e[9]!==t?(p=d.jsx(ip,{ref:n,...t,renderOrder:9999,children:t.children}),e[9]=t,e[10]=p):p=e[10];let y;return e[11]!==h||e[12]!==p?(y=d.jsxs(d.Fragment,{children:[h,p]}),e[11]=h,e[12]=p,e[13]=y):y=e[13],y}function Uw(t){const e=z.c(33),{onSelect:n,onHover:r}=t,{cart:s,setSelectedObjectPath:i}=ot(),o=$.useRef(null);if(!s?.model)return null;const{position:a}=s.model,l=a?.posX||0,c=a?.posY||0,u=a?.posZ||0;let f;e[0]!==l||e[1]!==c||e[2]!==u?(f=new Oe(l,c,u),e[0]=l,e[1]=c,e[2]=u,e[3]=f):f=e[3];const h=f,p=a?.rotX||0;let y;e[4]!==a?.rotY||e[5]!==a?.rotZ||e[6]!==p?(y=new ua(It(p),It(a?.rotY||0),It(a?.rotZ||0)),e[4]=a?.rotY,e[5]=a?.rotZ,e[6]=p,e[7]=y):y=e[7];const m=y,w=a?.sizeX||1,g=a?.sizeY||1,E=a?.sizeZ||1;let v;e[8]!==w||e[9]!==g||e[10]!==E?(v=new Oe(w,g,E),e[8]=w,e[9]=g,e[10]=E,e[11]=v):v=e[11];const S=v;let _,O;e[12]!==r?(_=A=>{A.stopPropagation(),o.current&&r(o.current)},O=A=>{A.stopPropagation(),r(null)},e[12]=r,e[13]=_,e[14]=O):(_=e[13],O=e[14]);let b;e[15]!==n||e[16]!==i?(b=A=>{A.stopPropagation(),o.current&&(n(o.current),i("$.model"))},e[15]=n,e[16]=i,e[17]=b):b=e[17];let x;e[18]===Symbol.for("react.memo_cache_sentinel")?(x=d.jsx(mf,{jsonPath:"$.model"}),e[18]=x):x=e[18];let k;e[19]!==S?(k=d.jsx("group",{scale:S,children:x}),e[19]=S,e[20]=k):k=e[20];let N;e[21]!==s.model||e[22]!==r||e[23]!==n?(N=d.jsx(yf,{attachments:s.model,onSelect:n,onHover:r,jsonPath:"$.model"}),e[21]=s.model,e[22]=r,e[23]=n,e[24]=N):N=e[24];let T;return e[25]!==h||e[26]!==m||e[27]!==_||e[28]!==O||e[29]!==b||e[30]!==k||e[31]!==N?(T=d.jsxs("group",{ref:o,position:h,rotation:m,onPointerOver:_,onPointerOut:O,onClick:b,children:[k,N]}),e[25]=h,e[26]=m,e[27]=_,e[28]=O,e[29]=b,e[30]=k,e[31]=N,e[32]=T):T=e[32],T}function yf({attachments:t,onSelect:e,onHover:n,jsonPath:r}){return Object.entries(t.attachments||{}).map(([s,i])=>d.jsx(Vw,{attachment:i,onSelect:e,onHover:n,jsonPath:`${r}.attachments.${s}`},s))}function Vw(t){const e=z.c(61),{attachment:n,onSelect:r,onHover:s,jsonPath:i}=t,o=rs(),{setSelectedObjectPath:a}=ot(),l=$.useRef(null),c=n.position?.posX||0,u=n.position?.posY||0,f=n.position?.posZ||0;let h,p,y,m,w,g,E,v;if(e[0]!==n.names||e[1]!==n.position?.rotX||e[2]!==n.position?.rotY||e[3]!==n.position?.rotZ||e[4]!==n.position?.sizeX||e[5]!==n.position?.sizeY||e[6]!==n.position?.sizeZ||e[7]!==n.type||e[8]!==i||e[9]!==s||e[10]!==r||e[11]!==o.debugText||e[12]!==a||e[13]!==c||e[14]!==u||e[15]!==f){const O=new Oe(c,u,f),b=new ua(It(n.position?.rotX||0),It(n.position?.rotY||0),It(n.position?.rotZ||0)),x=n.position?.sizeX||1,k=n.position?.sizeY||1,N=n.position?.sizeZ||1;let T;e[24]!==x||e[25]!==k||e[26]!==N?(T=new Oe(x,k,N),e[24]=x,e[25]=k,e[26]=N,e[27]=T):T=e[27];const A=T;y=l,m=O,w=b,e[28]!==n.type||e[29]!==s?(g=R=>{l.current&&!["SEAT","HITBOX"].includes(n.type)&&(R.stopPropagation(),s(l.current))},e[28]=n.type,e[29]=s,e[30]=g):g=e[30],e[31]!==s?(E=R=>{R.stopPropagation(),s(null)},e[31]=s,e[32]=E):E=e[32],e[33]!==n.type||e[34]!==i||e[35]!==r||e[36]!==a?(v=R=>{l.current&&!["SEAT","HITBOX"].includes(n.type)&&(R.stopPropagation(),r(l.current),a(i))},e[33]=n.type,e[34]=i,e[35]=r,e[36]=a,e[37]=v):v=e[37];let C;e:switch(n.type){case"SEAT":{const R=o.debugText&&d.jsx(Hl,{fontSize:.3,color:"white",anchorX:"center",anchorY:"middle",outlineWidth:.05,outlineColor:"black",position:[0,3.5,0],children:`${n.names&&Array.isArray(n.names)&&n.names.length>0?n.names[0]:"Seat"}
Pos:${O.toArray().map(Hw)}`});let I;e[38]===Symbol.for("react.memo_cache_sentinel")?(I=d.jsx(Bw,{}),e[38]=I):I=e[38];let P;e[39]!==R?(P=d.jsxs(d.Fragment,{children:[R,I]}),e[39]=R,e[40]=P):P=e[40],C=P;break e}case"HITBOX":{C=null;break e}default:{let R;e[41]!==i?(R=d.jsx(mf,{jsonPath:i}),e[41]=i,e[42]=R):R=e[42],C=R}}e[43]!==A||e[44]!==C?(h=d.jsx("group",{scale:A,children:C}),e[43]=A,e[44]=C,e[45]=h):h=e[45],p=o.debugText&&!["SEAT","HITBOX"].includes(n.type)&&d.jsx(Hl,{position:[0,1.5,0],fontSize:.3,color:"yellow",anchorX:"center",anchorY:"middle",scale:[1,1,1],outlineWidth:.05,outlineColor:"black",children:`${n.names&&Array.isArray(n.names)&&n.names.length>0?n.names[0]:""}
Pos:${O.toArray().map(Gw)}
rot:${b.toArray().filter(qw).map(Ww)}
scale:${A.toArray().map(Zw)}`}),e[0]=n.names,e[1]=n.position?.rotX,e[2]=n.position?.rotY,e[3]=n.position?.rotZ,e[4]=n.position?.sizeX,e[5]=n.position?.sizeY,e[6]=n.position?.sizeZ,e[7]=n.type,e[8]=i,e[9]=s,e[10]=r,e[11]=o.debugText,e[12]=a,e[13]=c,e[14]=u,e[15]=f,e[16]=h,e[17]=p,e[18]=y,e[19]=m,e[20]=w,e[21]=g,e[22]=E,e[23]=v}else h=e[16],p=e[17],y=e[18],m=e[19],w=e[20],g=e[21],E=e[22],v=e[23];let S;e[46]!==n||e[47]!==i||e[48]!==s||e[49]!==r?(S=n.attachments&&d.jsx(yf,{attachments:n,onSelect:r,onHover:s,jsonPath:`${i}`}),e[46]=n,e[47]=i,e[48]=s,e[49]=r,e[50]=S):S=e[50];let _;return e[51]!==h||e[52]!==p||e[53]!==S||e[54]!==y||e[55]!==m||e[56]!==w||e[57]!==g||e[58]!==E||e[59]!==v?(_=d.jsxs("group",{ref:y,position:m,rotation:w,onPointerOver:g,onPointerOut:E,onClick:v,children:[h,p,S]}),e[51]=h,e[52]=p,e[53]=S,e[54]=y,e[55]=m,e[56]=w,e[57]=g,e[58]=E,e[59]=v,e[60]=_):_=e[60],_}function Zw(t){return t.toFixed(2)}function Ww(t){return t.toFixed(2)}function qw(t){return typeof t=="number"}function Gw(t){return t.toFixed(2)}function Hw(t){return`
${t.toFixed(2)}`}function Kl(t){const e=z.c(13),{selection:n,color:r,scaleFactor:s}=t,i=r===void 0?16753920:r,o=s===void 0?1.05:s,{scene:a}=bi(),l=$.useRef(null);let c;e:{if(!n){let m;e[0]===Symbol.for("react.memo_cache_sentinel")?(m=new Oe(1,1,1),e[0]=m):m=e[0],c=m;break e}let y;if(e[1]!==o||e[2]!==n){const m=n.clone(!0);m.rotation.set(0,0,0),m.updateWorldMatrix(!0,!0),y=new So().setFromObject(m).getSize(new Oe).multiplyScalar(o),m.remove(),e[1]=o,e[2]=n,e[3]=y}else y=e[3];c=y}const u=c;let f,h;e[4]!==u||e[5]!==i||e[6]!==a||e[7]!==n?(f=()=>{if(n){if(!l.current){const y=new Qa(new Ja(u.x,u.y,u.z)),m=new xp({color:i});l.current=new _p(y,m),a.add(l.current)}return()=>{l.current&&(a.remove(l.current),l.current.geometry.dispose(),l.current=null)}}},h=[n,a,i,u],e[4]=u,e[5]=i,e[6]=a,e[7]=n,e[8]=f,e[9]=h):(f=e[8],h=e[9]),$.useEffect(f,h);let p;return e[10]!==u||e[11]!==n?(p=()=>{if(!l.current||!n)return;const y=new So().setFromObject(n).getCenter(new Oe);l.current.geometry.dispose(),l.current.geometry=new Qa(new Ja(u.x,u.y,u.z)),l.current.position.copy(y),l.current.quaternion.copy(n.getWorldQuaternion(new Ac))},e[10]=u,e[11]=n,e[12]=p):p=e[12],la(p),null}function bf(t){const e=z.c(26);let n,r,s,i,o,a;e[0]!==t?({className:n,defaultValue:r,value:a,min:i,max:o,...s}=t,e[0]=t,e[1]=n,e[2]=r,e[3]=s,e[4]=i,e[5]=o,e[6]=a):(n=e[1],r=e[2],s=e[3],i=e[4],o=e[5],a=e[6]);const l=i===void 0?0:i,c=o===void 0?100:o;let u,f;e[7]!==r||e[8]!==c||e[9]!==l||e[10]!==a?(f=Array.isArray(a)?a:Array.isArray(r)?r:[l,c],e[7]=r,e[8]=c,e[9]=l,e[10]=a,e[11]=f):f=e[11],u=f;const h=u;let p;e[12]!==n?(p=U("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",n),e[12]=n,e[13]=p):p=e[13];let y;e[14]===Symbol.for("react.memo_cache_sentinel")?(y=U("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),e[14]=y):y=e[14];let m;e[15]===Symbol.for("react.memo_cache_sentinel")?(m=d.jsx(Sc,{"data-slot":"slider-track",className:y,children:d.jsx(kc,{"data-slot":"slider-range",className:U("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),e[15]=m):m=e[15];let w;e[16]!==h.length?(w=Array.from({length:h.length},Kw),e[16]=h.length,e[17]=w):w=e[17];let g;return e[18]!==r||e[19]!==c||e[20]!==l||e[21]!==s||e[22]!==p||e[23]!==w||e[24]!==a?(g=d.jsxs(_c,{"data-slot":"slider",defaultValue:r,value:a,min:l,max:c,className:p,...s,children:[m,w]}),e[18]=r,e[19]=c,e[20]=l,e[21]=s,e[22]=p,e[23]=w,e[24]=a,e[25]=g):g=e[25],g}function Kw(t,e){return d.jsx(Ec,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},e)}function Yw(t){const e=z.c(17),{value:n,onChange:r}=t,s=n===void 0?0:n;let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=[0,1,5,11.25,15,22.5,30,45],e[0]=i):i=e[0];const o=i,[a,l]=$.useState(s||0);let c;e[1]!==r?(c=S=>{l(S),r(S)},e[1]=r,e[2]=c):c=e[2];const u=c;let f;e[3]===Symbol.for("react.memo_cache_sentinel")?(f=S=>o.reduce((_,O)=>Math.abs(O-S)<Math.abs(_-S)?O:_),e[3]=f):f=e[3];const h=f;let p;e[4]===Symbol.for("react.memo_cache_sentinel")?(p={minWidth:"5ch"},e[4]=p):p=e[4];const y=a>0?`${a}`:"Off";let m;e[5]!==y?(m=d.jsxs(Je,{className:"flex items-center gap-1 font-semibold whitespace-nowrap",children:["Angle Snap:",d.jsx("span",{className:"inline-block",style:p,children:y})]}),e[5]=y,e[6]=m):m=e[6];let w;e[7]!==a?(w=[a],e[7]=a,e[8]=w):w=e[8];let g;e[9]!==u?(g=S=>{const _=h(S[0]);u(_)},e[9]=u,e[10]=g):g=e[10];let E;e[11]!==w||e[12]!==g?(E=d.jsx(bf,{min:0,max:45,step:.1,value:w,onValueChange:g,className:"w-full"}),e[11]=w,e[12]=g,e[13]=E):E=e[13];let v;return e[14]!==E||e[15]!==m?(v=d.jsxs("div",{className:"flex w-sm flex-row items-center gap-2",children:[m,E]}),e[14]=E,e[15]=m,e[16]=v):v=e[16],v}function Xw(t){const e=z.c(17),{value:n,onChange:r}=t,s=n===void 0?0:n;let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=[0,.03125,.0625,.125,.25,.5,1],e[0]=i):i=e[0];const o=i,[a,l]=$.useState(s||0);let c;e[1]!==r?(c=S=>{l(S),r(S)},e[1]=r,e[2]=c):c=e[2];const u=c;let f;e[3]===Symbol.for("react.memo_cache_sentinel")?(f=S=>o.reduce((_,O)=>Math.abs(O-S)<Math.abs(_-S)?O:_),e[3]=f):f=e[3];const h=f;let p;e[4]===Symbol.for("react.memo_cache_sentinel")?(p={minWidth:"5ch"},e[4]=p):p=e[4];const y=a>0?`${Pp(a)}`:"Off";let m;e[5]!==y?(m=d.jsxs(Je,{className:"flex items-center gap-1 font-semibold whitespace-nowrap",children:["Distance Snap:",d.jsx("span",{className:"inline-block",style:p,children:y})]}),e[5]=y,e[6]=m):m=e[6];let w;e[7]!==a?(w=[a],e[7]=a,e[8]=w):w=e[8];let g;e[9]!==u?(g=S=>{const _=h(S[0]);u(_)},e[9]=u,e[10]=g):g=e[10];let E;e[11]!==w||e[12]!==g?(E=d.jsx(bf,{min:0,max:1,step:.01,value:w,onValueChange:g,className:"w-full"}),e[11]=w,e[12]=g,e[13]=E):E=e[13];let v;return e[14]!==E||e[15]!==m?(v=d.jsxs("div",{className:"flex w-sm flex-row items-center gap-2",children:[m,E]}),e[14]=E,e[15]=m,e[16]=v):v=e[16],v}const Qw=fa("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium hover:bg-muted hover:text-muted-foreground disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] outline-none transition-[color,box-shadow] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive whitespace-nowrap",{variants:{variant:{default:"bg-card",outline:"border border-input bg-card shadow-xs hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-2 min-w-9",sm:"h-8 px-1.5 min-w-8",lg:"h-10 px-2.5 min-w-10"}},defaultVariants:{variant:"default",size:"default"}});function Yl(t){const e=z.c(12);let n,r,s,i;e[0]!==t?({className:n,variant:i,size:s,...r}=t,e[0]=t,e[1]=n,e[2]=r,e[3]=s,e[4]=i):(n=e[1],r=e[2],s=e[3],i=e[4]);let o;e[5]!==n||e[6]!==s||e[7]!==i?(o=U(Qw({variant:i,size:s,className:n})),e[5]=n,e[6]=s,e[7]=i,e[8]=o):o=e[8];let a;return e[9]!==r||e[10]!==o?(a=d.jsx(Fh,{"data-slot":"toggle",className:o,...r}),e[9]=r,e[10]=o,e[11]=a):a=e[11],a}function Jw({controlsRef:t}){const e=ot(),{camera:n}=bi();return $.useEffect(()=>{const r=t.current,s=e.metadata.orbitControls;!r||!s||(n.position.copy(new Oe(...s.position)),r.target.copy(new Oe(...s.target)),s.zoom&&"zoom"in n&&(n.zoom=s.zoom,n.updateProjectionMatrix()),r.update())},[e.metadata.orbitControls,n,t]),$.useEffect(()=>{const r=t.current;if(!r)return;const s=Tc.debounce(()=>{e.setMetadata({...e.metadata,orbitControls:{position:n.position.toArray(),target:r.target.toArray(),zoom:n.zoom}})},200);return r.addEventListener("change",s),()=>r.removeEventListener("change",s)},[n,e,t]),null}function ev(){const t=z.c(117),e=rs(),n=ot(),r=$.useRef(null),[s,i]=$.useState(null),[o,a]=$.useState(null),[l,c]=$.useState("translate"),[u,f]=$.useState("world");let h,p;t[0]!==n||t[1]!==s||t[2]!==u?(h=()=>{const kt=lt=>{if(!(lt.target&&lt.target.isContentEditable))if(lt.key==="v"||lt.key==="V")c("translate");else if(lt.key==="r"||lt.key==="R")c("rotate");else if(lt.key==="x"||lt.key==="X")f(u==="world"?"local":"world");else if(lt.key==="f"||lt.key==="F"){if(s){const Ya=new So().setFromObject(s),_d=Ya.getSize(new Oe).length(),Qi=Ya.getCenter(new Oe),Sd=_d*1.5,Ji=r.current?.object;if(Ji){const kd=new Oe().subVectors(Ji.position,Qi).normalize().multiplyScalar(Sd);Ji.position.copy(kd.add(Qi)),r.current?.target.copy(Qi),r.current?.update()}}}else lt.key==="Escape"&&(n.setSelectedObjectPath(void 0),i(null))};return window.addEventListener("keydown",kt),()=>{window.removeEventListener("keydown",kt)}},p=[u,n,s],t[0]=n,t[1]=s,t[2]=u,t[3]=h,t[4]=p):(h=t[3],p=t[4]),$.useEffect(h,p);let y,m;if(t[5]!==n.cart||t[6]!==s?(y=()=>{s&&(n.cart||i(null))},m=[n.cart,s],t[5]=n.cart,t[6]=s,t[7]=y,t[8]=m):(y=t[7],m=t[8]),$.useEffect(y,m),!n.cart){let kt;return t[9]===Symbol.for("react.memo_cache_sentinel")?(kt=d.jsx("div",{className:"flex h-full w-full items-center justify-center bg-black",children:d.jsx("p",{className:"text-muted-foreground",children:"No cart selected. Please create or open a project."})}),t[9]=kt):kt=t[9],kt}let w;t[10]===Symbol.for("react.memo_cache_sentinel")?(w=d.jsx(fp,{},"smaa"),t[10]=w):w=t[10];let g;t[11]!==e.SSAOEnabled?(g=e.SSAOEnabled&&d.jsx(ap,{},"ssao"),t[11]=e.SSAOEnabled,t[12]=g):g=t[12];let E;t[13]!==e.DOFEnabled?(E=e.DOFEnabled&&d.jsx(lp,{focusDistance:2,focalLength:5,bokehScale:2},"dof"),t[13]=e.DOFEnabled,t[14]=E):E=t[14];let v;t[15]!==g||t[16]!==E?(v=[w,g,E].filter(Boolean),t[15]=g,t[16]=E,t[17]=v):v=t[17];const S=v,_=`three-bg ${o?"cursor-pointer":"cursor-default"}`;let O;t[18]===Symbol.for("react.memo_cache_sentinel")?(O={position:[3,3,3],fov:45},t[18]=O):O=t[18];let b,x;t[19]===Symbol.for("react.memo_cache_sentinel")?(b=[1,2],x={toneMapping:0,powerPreference:"high-performance",alpha:!1,antialias:!0,stencil:!1,autoClear:!1,depth:!0},t[19]=b,t[20]=x):(b=t[19],x=t[20]);let k;t[21]!==n?(k=kt=>{kt.type==="click"&&(n.setSelectedObjectPath(void 0),i(null))},t[21]=n,t[22]=k):k=t[22];let N;t[23]!==S?(N=d.jsx(dp,{enabled:!0,enableNormalPass:!0,depthBuffer:!0,stencilBuffer:!0,children:S}),t[23]=S,t[24]=N):N=t[24];let T,A,C,R;t[25]===Symbol.for("react.memo_cache_sentinel")?(T=d.jsx(Rw,{}),A=d.jsx(hp,{all:!0}),C=d.jsx("ambientLight",{intensity:2}),R=d.jsx("directionalLight",{position:[5,5,5],intensity:3,castShadow:!0}),t[25]=T,t[26]=A,t[27]=C,t[28]=R):(T=t[25],A=t[26],C=t[27],R=t[28]);let I;t[29]===Symbol.for("react.memo_cache_sentinel")?(I=[.5,0,.5],t[29]=I):I=t[29];const P=e.gridColor;let L;t[30]!==e?(L=e.getComplementaryGridColor(),t[30]=e,t[31]=L):L=t[31];let B;t[32]!==e.gridColor||t[33]!==L?(B=d.jsx(Nc,{position:I,cellSize:.0625,sectionSize:1,cellThickness:.5,sectionThickness:1.5,cellColor:P,sectionColor:L,infiniteGrid:!0,side:Oc}),t[32]=e.gridColor,t[33]=L,t[34]=B):B=t[34];let D;t[35]===Symbol.for("react.memo_cache_sentinel")?(D=[-.5,0,-.5],t[35]=D):D=t[35];let Y;t[36]===Symbol.for("react.memo_cache_sentinel")?(Y=d.jsxs("line",{children:[d.jsx("bufferGeometry",{children:d.jsx("bufferAttribute",{attach:"attributes-position",args:[new Float32Array([0,0,0,1,0,0]),3],count:2,itemSize:3})}),d.jsx("lineBasicMaterial",{color:16711680,linewidth:2})]}),t[36]=Y):Y=t[36];let ee;t[37]===Symbol.for("react.memo_cache_sentinel")?(ee=d.jsxs("line",{children:[d.jsx("bufferGeometry",{children:d.jsx("bufferAttribute",{attach:"attributes-position",args:[new Float32Array([0,0,0,0,1,0]),3],count:2,itemSize:3})}),d.jsx("lineBasicMaterial",{color:65280,linewidth:2})]}),t[37]=ee):ee=t[37];let ne;t[38]===Symbol.for("react.memo_cache_sentinel")?(ne=d.jsxs("line",{children:[d.jsx("bufferGeometry",{children:d.jsx("bufferAttribute",{attach:"attributes-position",args:[new Float32Array([0,0,0,0,0,1]),3],count:2,itemSize:3})}),d.jsx("lineBasicMaterial",{color:255,linewidth:2})]}),t[38]=ne):ne=t[38];let K;t[39]!==Y||t[40]!==ee||t[41]!==ne?(K=d.jsxs("group",{position:D,children:[Y,ee,ne]}),t[39]=Y,t[40]=ee,t[41]=ne,t[42]=K):K=t[42];let oe;t[43]!==n.metadata.guidelines?(oe=n.metadata.guidelines?.map(tv),t[43]=n.metadata.guidelines,t[44]=oe):oe=t[44];let X;t[45]===Symbol.for("react.memo_cache_sentinel")?(X=d.jsx($.Suspense,{fallback:d.jsx(pp,{center:!0,children:"Loading..."}),children:d.jsx(Uw,{onSelect:i,onHover:a})}),t[45]=X):X=t[45];let le;t[46]!==e.angleSnap||t[47]!==e.distanceSnap||t[48]!==s||t[49]!==l||t[50]!==u?(le=s&&d.jsx(cp,{object:s,mode:l,rotationSnap:It(e.angleSnap),translationSnap:e.distanceSnap,onMouseDown:()=>r.current.enabled=!1,onMouseUp:()=>r.current.enabled=!0,space:u}),t[46]=e.angleSnap,t[47]=e.distanceSnap,t[48]=s,t[49]=l,t[50]=u,t[51]=le):le=t[51];let Ge;t[52]!==e.controlDamping?(Ge=d.jsx(up,{ref:r,makeDefault:!0,enableDamping:e.controlDamping}),t[52]=e.controlDamping,t[53]=Ge):Ge=t[53];let at;t[54]===Symbol.for("react.memo_cache_sentinel")?(at=[80,80],t[54]=at):at=t[54];let _t,St;t[55]===Symbol.for("react.memo_cache_sentinel")?(_t=d.jsx(mp,{alignment:"bottom-right",margin:at,children:d.jsx(gp,{axisColors:["#9d4b4b","#2f7f4f","#3b5b9d"],labelColor:"white"})}),St=d.jsx(Jw,{controlsRef:r}),t[55]=_t,t[56]=St):(_t=t[55],St=t[56]);let Xe;t[57]!==o?(Xe=o&&d.jsx(Kl,{selection:o,color:16753920,scaleFactor:1.1}),t[57]=o,t[58]=Xe):Xe=t[58];let Qe;t[59]!==s?(Qe=s&&d.jsx(Kl,{selection:s,color:65535,scaleFactor:1.1}),t[59]=s,t[60]=Qe):Qe=t[60];let He;t[61]!==k||t[62]!==N||t[63]!==B||t[64]!==K||t[65]!==oe||t[66]!==le||t[67]!==Ge||t[68]!==Xe||t[69]!==Qe||t[70]!==_?(He=d.jsxs(yp,{className:_,camera:O,shadows:!0,dpr:b,gl:x,onPointerMissed:k,children:[N,T,A,C,R,B,K,oe,X,le,Ge,_t,St,Xe,Qe]}),t[61]=k,t[62]=N,t[63]=B,t[64]=K,t[65]=oe,t[66]=le,t[67]=Ge,t[68]=Xe,t[69]=Qe,t[70]=_,t[71]=He):He=t[71];let zt;t[72]===Symbol.for("react.memo_cache_sentinel")?(zt=d.jsx(Pw,{}),t[72]=zt):zt=t[72];let Pn;t[73]!==u?(Pn=()=>{f(u==="world"?"local":"world")},t[73]=u,t[74]=Pn):Pn=t[74];let $n;t[75]!==u?($n=d.jsx(qt,{children:u==="world"?d.jsx(Fd,{}):d.jsx(Bd,{})}),t[75]=u,t[76]=$n):$n=t[76];let zn;t[77]!==Pn||t[78]!==$n?(zn=d.jsx(Ve,{variant:"secondary",size:"icon",asChild:!0,onClick:Pn,children:$n}),t[77]=Pn,t[78]=$n,t[79]=zn):zn=t[79];const Ki=u==="world"?"World Space":"Local Space";let ps;t[80]===Symbol.for("react.memo_cache_sentinel")?(ps=d.jsx("kbd",{className:"text-muted-foreground ml-1",children:"X"}),t[80]=ps):ps=t[80];let Ln;t[81]!==Ki?(Ln=d.jsxs(Gt,{children:[Ki,ps]}),t[81]=Ki,t[82]=Ln):Ln=t[82];let Dn;t[83]!==zn||t[84]!==Ln?(Dn=d.jsxs(Wt,{children:[zn,Ln]}),t[83]=zn,t[84]=Ln,t[85]=Dn):Dn=t[85];const Yi=l==="translate";let ms;t[86]===Symbol.for("react.memo_cache_sentinel")?(ms=()=>c("translate"),t[86]=ms):ms=t[86];let gs;t[87]===Symbol.for("react.memo_cache_sentinel")?(gs=d.jsx(qt,{children:d.jsx(Ud,{})}),t[87]=gs):gs=t[87];let Fn;t[88]!==Yi?(Fn=d.jsx(Yl,{pressed:Yi,onClick:ms,asChild:!0,children:gs}),t[88]=Yi,t[89]=Fn):Fn=t[89];let ys;t[90]===Symbol.for("react.memo_cache_sentinel")?(ys=d.jsxs(Gt,{children:["Translate Mode",d.jsx("kbd",{className:"text-muted-foreground ml-1",children:"V"})]}),t[90]=ys):ys=t[90];let Bn;t[91]!==Fn?(Bn=d.jsxs(Wt,{children:[Fn,ys]}),t[91]=Fn,t[92]=Bn):Bn=t[92];const Xi=l==="rotate";let bs;t[93]===Symbol.for("react.memo_cache_sentinel")?(bs=()=>c("rotate"),t[93]=bs):bs=t[93];let ws;t[94]===Symbol.for("react.memo_cache_sentinel")?(ws=d.jsx(qt,{children:d.jsx(Vd,{})}),t[94]=ws):ws=t[94];let Un;t[95]!==Xi?(Un=d.jsx(Yl,{pressed:Xi,onClick:bs,asChild:!0,children:ws}),t[95]=Xi,t[96]=Un):Un=t[96];let vs;t[97]===Symbol.for("react.memo_cache_sentinel")?(vs=d.jsxs(Gt,{children:["Rotate Mode",d.jsx("kbd",{className:"text-muted-foreground ml-1",children:"R"})]}),t[97]=vs):vs=t[97];let Vn;t[98]!==Un?(Vn=d.jsxs(Wt,{children:[Un,vs]}),t[98]=Un,t[99]=Vn):Vn=t[99];let Zn;t[100]!==e.distanceSnap||t[101]!==e.setDistanceSnap||t[102]!==l?(Zn=l==="translate"&&d.jsx(Xw,{value:e.distanceSnap,onChange:e.setDistanceSnap}),t[100]=e.distanceSnap,t[101]=e.setDistanceSnap,t[102]=l,t[103]=Zn):Zn=t[103];let Wn;t[104]!==e.angleSnap||t[105]!==e.setAngleSnap||t[106]!==l?(Wn=l==="rotate"&&d.jsx(Yw,{value:e.angleSnap,onChange:e.setAngleSnap}),t[104]=e.angleSnap,t[105]=e.setAngleSnap,t[106]=l,t[107]=Wn):Wn=t[107];let qn;t[108]!==Dn||t[109]!==Bn||t[110]!==Vn||t[111]!==Zn||t[112]!==Wn?(qn=d.jsxs("div",{className:"absolute top-[8px] left-[8px] flex flex-row gap-[8px]",children:[Dn,Bn,Vn,Zn,Wn]}),t[108]=Dn,t[109]=Bn,t[110]=Vn,t[111]=Zn,t[112]=Wn,t[113]=qn):qn=t[113];let xs;return t[114]!==He||t[115]!==qn?(xs=d.jsxs("div",{className:"relative h-full w-full",children:[He,zt,qn]}),t[114]=He,t[115]=qn,t[116]=xs):xs=t[116],xs}function tv(t,e){return t.visible&&d.jsx(Nc,{position:t.position,cellSize:t.cellSize,sectionSize:t.sectionSize,cellThickness:.5,sectionThickness:1.5,cellColor:t.cellColor,sectionColor:Pc(t.cellColor,.5),infiniteGrid:!0,side:Oc,rotation:$p(t.plane)},e)}function nv(t,e,n){const r=t.getChannelData(0),s=t.duration*1e3,i=Math.floor(s*e),o=r.length/i,a=[];for(let l=0;l<i;l++){const c=Math.floor(l*o),u=Math.floor(c+o);let f=1,h=-1;for(let m=c;m<u;m++){const w=r[m];w<f&&(f=w),w>h&&(h=w)}const p=(1-h)*n/2,y=(1-f)*n/2;a.push(l,p,l,y)}return{points:a,width:i}}var wf=Object.defineProperty,rv=(t,e,n)=>e in t?wf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,sv=(t,e)=>{for(var n in e)wf(t,n,{get:e[n],enumerable:!0})},fn=(t,e,n)=>rv(t,typeof e!="symbol"?e+"":e,n),vt={hsl:["h","s","l"],oklab:["l","a","b"],oklch:["l","c","h"],rgb:["r","g","b"]},iv=["hsl","oklab","oklch","rgb"],Xl=Math.PI/180,Kn={l:[.3963377773761749,.2158037573099136],m:[-.1055613458156586,-.0638541728258133],s:[-.0894841775298119,-1.2914855480194092]},Tt={l:[.4122214708,.5363325363,.0514459929],m:[.2119034982,.6806995451,.1073969566],s:[.0883024619,.2817188376,.6299787005]},Nt={l:[.2104542553,.793617785,.0040720468],a:[1.9779984951,2.428592205,.4505937099],b:[.0259040371,.7827717662,.808675766]},At={r:[4.076741636075958,-3.307711539258063,.2309699031821043],g:[-1.2684379732850315,2.609757349287688,-.341319376002657],b:[-.0041960761386756,-.7034186179359362,1.7076146940746117]},os=5,ov=180/Math.PI,G={alpha:"amount must be a number between 0 and 1",input:"input is required",inputHex:"input is required and must be a hex",inputNumber:"input is required and must be a number",inputString:"input is required and must be a string",invalid:"invalid input",invalidCSS:"invalid CSS string",invalidRange:"color value out of range",left:"left is required and must be a string",right:"right is required and must be a string",threshold:"threshold must be a number between 0 and 255"};function W(t,e){if(t)return;const n=e?new Error(e):new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");throw n.name="colorizr",n}var Oi={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},av=/^#(?:[\da-f]{3,4}|[\da-f]{6,8})$/i;function lv(t){return Array.isArray(t)&&t.length===6}function Ce(t){return Ee(t)?av.test(t):!1}function Ci(t){if(!Sr(t))return!1;const e=Object.entries(t);return!!e.length&&e.every(([n,r])=>n==="h"?r>=0&&r<=360:n==="alpha"?r>=0&&r<=1:vt.hsl.includes(n)&&r>=0&&r<=100)}function ji(t){if(!Sr(t))return!1;const e=Object.entries(t);return!!e.length&&e.every(([n,r])=>n==="l"?r>=0&&r<=100:n==="alpha"?r>=0&&r<=1:vt.oklab.includes(n)&&r>=-1&&r<=1)}function Ii(t){if(!Sr(t))return!1;const e=Object.entries(t);return!!e.length&&e.every(([n,r])=>n==="l"?r>=0&&r<=100:n==="alpha"?r>=0&&r<=1:vt.oklch.includes(n)&&r>=0&&r<=(n==="h"?360:1))}function jn(t){return Ee(t)&&Object.keys(Oi).includes(t.toLowerCase())}function nt(t){return typeof t=="number"&&!Number.isNaN(t)}function Sr(t){if(!t)return!1;const{toString:e}=Object.prototype,n=Object.getPrototypeOf(t);return e.call(t)==="[object Object]"&&(n===null||n===Object.getPrototypeOf({}))}function Mi(t){if(!Sr(t))return!1;const e=Object.entries(t);return!!e.length&&e.every(([n,r])=>n==="alpha"?r>=0&&r<=1:vt.rgb.includes(n)&&r>=0&&r<=255)}function Ee(t,e=!0){const n=typeof t=="string";return e?n&&!!t.trim().length:n}function vf(t){return Ci(t)||Mi(t)||ji(t)||Ii(t)}function he(t,e){W(vf(t),G.invalid);let n=e;return n===void 0||(n>1&&(n/=100),n===1)?t:{...t,alpha:n}}function Qt(t,e=0,n=100){return Math.min(Math.max(t,e),n)}function cv(t,e){W(nt(t),G.inputNumber);let n=t+e;return n>360&&(n%=360),n<0&&(n+=360),Math.abs(n)}function ze(t){if(!Array.isArray(t))return t.alpha}function Ot(t,e,n){switch(W(nt(t),"Input is not a number"),W(iv.includes(e),`Invalid model${e?`: ${e}`:""}`),W(vt[e].includes(n),`Invalid key${n?`: ${n}`:""}`),e){case"hsl":return W(vt.hsl.includes(n),"Invalid key"),["l","s"].includes(n)?Qt(t):Qt(t,0,360);case"rgb":return W(vt.rgb.includes(n),"Invalid key"),Qt(t,0,255);default:throw new Error("Invalid inputs")}}function Le(t,e){const n=vt[e],r={hsl:Ci,oklab:ji,oklch:Ii,rgb:Mi};W(Sr(t)||Array.isArray(t),G.invalid);const s=Array.isArray(t)?{[n[0]]:t[0],[n[1]]:t[1],[n[2]]:t[2]}:t;return W(r[e](s),`invalid ${e} color`),s}function br(t,e=os,n=!0){const r=new Map(Object.entries(t));for(const[s,i]of r.entries())r.set(s,ke(i,e,n));return Object.fromEntries(r)}function ke(t,e=2,n=!0){if(!nt(t)||t===0)return 0;if(n){const a=10**e;return Math.round(t*a)/a}const r=Math.abs(t);let s=Math.abs(Math.ceil(Math.log(r)/Math.LN10));s===0?s=2:s>e&&(s=e);let i=e-(s<0?0:s);i<=1&&e>1?i=2:(i>e||i===0)&&(i=e);const o=10**i;return Math.round(t*o)/o}var xf={};sv(xf,{hex2hsl:()=>_f,hex2oklab:()=>Sf,hex2oklch:()=>kf,hex2rgb:()=>Mn,hsl2hex:()=>ka,hsl2oklab:()=>Ea,hsl2oklch:()=>Ta,hsl2rgb:()=>Tr,oklab2hex:()=>Ef,oklab2hsl:()=>Na,oklab2oklch:()=>Pi,oklab2rgb:()=>Nr,oklch2hex:()=>Tf,oklch2hsl:()=>Aa,oklch2oklab:()=>$i,oklch2rgb:()=>cs,rgb2hex:()=>ls,rgb2hsl:()=>kr,rgb2oklab:()=>Er,rgb2oklch:()=>as});function uv(t){W(Ce(t),G.inputHex);let e=t.replace("#","");if(e.length===3||e.length===4){const r=[...e];e="",r.forEach(s=>{e+=`${s}${s}`})}const n=`#${e}`;return W(Ce(n),"invalid hex"),n}function wr(t,e){return W(Ce(t),G.inputHex),W(nt(e),G.inputNumber),e>=1?pi(t):`${pi(t)}${Ri(e)}`}function Ri(t){W(nt(t),G.inputNumber);let e=t;return t>1&&(e/=100),Math.round(e*255).toString(16).padStart(2,"0")}function In(t){W(Ce(t),G.inputString);const e=t.substring(7,9);return e?ke(parseInt(e,16)/255):1}function pi(t){return W(Ce(t),G.inputHex),t.length===5?t.substring(0,4):t.substring(0,7)}function Mn(t){W(Ce(t),G.inputHex);const e=uv(t).slice(1),n=In(t);return he({r:parseInt(e.charAt(0)+e.charAt(1),16),g:parseInt(e.charAt(2)+e.charAt(3),16),b:parseInt(e.charAt(4)+e.charAt(5),16)},n)}function kr(t){const e=Le(t,"rgb"),n=ze(t),r=Ot(e.r,"rgb","r")/255,s=Ot(e.g,"rgb","g")/255,i=Ot(e.b,"rgb","b")/255,o=Math.min(r,s,i),a=Math.max(r,s,i),l=a-o;let c=0,u;const f=(a+o)/2;let h;switch(a){case r:h=l?(s-i)/l:0,c=60*h;break;case s:h=(i-r)/l,c=60*h+120;break;case i:h=(r-s)/l,c=60*h+240;break}return c<0&&(c=360+c),o===a?u=0:u=f<.5?l/(2*f):l/(2-2*f),he({h:Math.abs(+(c%360).toFixed(2)),s:+(u*100).toFixed(2),l:+(f*100).toFixed(2)},n)}function _f(t){W(Ce(t),G.inputHex);const e=In(t);return he(kr(Mn(t)),e)}var{cbrt:uo,sign:fv}=Math;function fo(t){const e=Math.abs(t);return e<.04045?t/12.92:(fv(t)||1)*((e+.055)/1.055)**2.4}function Er(t,e=os){const n=Le(t,"rgb"),r=ze(t),[s,i,o]=[fo(n.r/255),fo(n.g/255),fo(n.b/255)],a=uo(Tt.l[0]*s+Tt.l[1]*i+Tt.l[2]*o),l=uo(Tt.m[0]*s+Tt.m[1]*i+Tt.m[2]*o),c=uo(Tt.s[0]*s+Tt.s[1]*i+Tt.s[2]*o),u=br({l:Nt.l[0]*a+Nt.l[1]*l-Nt.l[2]*c,a:Nt.a[0]*a-Nt.a[1]*l+Nt.a[2]*c,b:Nt.b[0]*a+Nt.b[1]*l-Nt.b[2]*c},e);return he(u,r)}function Sf(t,e){W(Ce(t),G.inputHex);const n=In(t);return he(Er(Mn(t),e),n)}var{atan2:dv,sqrt:hv}=Math;function Pi(t,e){const{l:n,a:r,b:s}=br(Le(t,"oklab")),i=ze(t),o=hv(r**2+s**2);let a=(dv(s,r)*ov+360)%360;return ke(o*1e4)===0&&(a=0),he(br({l:n,c:o,h:a},e),i)}function as(t,e){const n=Le(t,"rgb"),r=ze(t);return he(Pi(Er(n,e),e),r)}function kf(t,e){W(Ce(t),G.inputHex);const n=In(t);return he(as(Mn(t),e),n)}function ho(t,e,n){W(nt(t)&&nt(e)&&nt(n),"point, chroma and h are required");let r=n;return r<0&&(r+=1),r>1&&(r-=1),r<1/6?ke(t+(e-t)*6*r,4):r<1/2?ke(e,4):r<2/3?ke(t+(e-t)*(2/3-r)*6,4):ke(t,4)}function Tr(t){const e=Le(t,"hsl"),n=ze(t),r=ke(e.h)/360,s=ke(e.s)/100,i=ke(e.l)/100;let o,a,l,c,u;return s===0?(o=i,a=i,l=i):(u=i<.5?i*(1+s):i+s-i*s,c=2*i-u,o=ho(c,u,r+1/3),a=ho(c,u,r),l=ho(c,u,r-1/3)),he({r:Math.round(o*255),g:Math.round(a*255),b:Math.round(l*255)},n)}function ls(t){const e=Le(t,"rgb"),n=ze(t),r=`#${[e.r,e.g,e.b].map(s=>`0${Math.floor(s).toString(16)}`.slice(-2)).join("")}`;return n!==void 0&&n<1?wr(r,n):r}function ka(t){const e=Le(t,"hsl"),n=ze(t),r=ls(Tr(e));return n!==void 0&&n<1?wr(r,n):r}function Ea(t,e){const n=Le(t,"hsl"),r=ze(t);return he(Er(Tr(n),e),r)}function Ta(t,e){const n=Le(t,"hsl"),r=ze(t);return he(as(Tr(n),e),r)}var{abs:pv}=Math;function po(t){const e=pv(t),n=t<0?-1:1;return e>.0031308?n*(e**(1/2.4)*1.055-.055):t*12.92}function Nr(t,e=0){const{l:n,a:r,b:s}=Le(t,"oklab"),i=ze(t),o=(n+Kn.l[0]*r+Kn.l[1]*s)**3,a=(n+Kn.m[0]*r+Kn.m[1]*s)**3,l=(n+Kn.s[0]*r+Kn.s[1]*s)**3,c=255*po(At.r[0]*o+At.r[1]*a+At.r[2]*l),u=255*po(At.g[0]*o+At.g[1]*a+At.g[2]*l),f=255*po(At.b[0]*o+At.b[1]*a+At.b[2]*l);return he({r:Qt(ke(c,e),0,255),g:Qt(ke(u,e),0,255),b:Qt(ke(f,e),0,255)},i)}function Ef(t){const e=Le(t,"oklab"),n=ze(t),r=ls(Nr(e));return n!==void 0&&n<1?wr(r,n):r}function Na(t){const e=Le(t,"oklab"),n=ze(t);return he(kr(Nr(e)),n)}var{sin:mv,cos:gv}=Math;function $i(t,e){let{l:n,c:r,h:s}=Le(t,"oklch");const i=ze(t);return(Number.isNaN(s)||s<0)&&(s=0),he(br({l:n,a:r*gv(s*Xl),b:r*mv(s*Xl)},e),i)}function cs(t,e=0){const n=Le(t,"oklch"),r=ze(t);return he(Nr($i(n),e),r)}function Tf(t){const e=Le(t,"oklch"),n=ze(t),r=ls(cs(e));return n!==void 0&&n<1?wr(r,n):r}function Aa(t){const e=Le(t,"oklch"),n=ze(t);return he(kr(cs(e)),n)}var yv="(rgb|hsl|oklab|oklch)a?",mo="(?:\\s*[,/]\\s*|\\s+)",zs="(none|[\\d%.-]+(?:deg|grad|rad|turn)?)",bv=new RegExp(`${yv}\\s*\\(\\s*${zs}${mo}${zs}${mo}${zs}(?:${mo}${zs})?\\s*\\)`,"i");function wv(t){const e=parseFloat(t);let n;return t.endsWith("grad")?n=e*.9:t.endsWith("rad")?n=e*(180/Math.PI):t.endsWith("turn")?n=e*360:n=e,Math.round(n*1e5)/1e5}function $t(t){if(W(Ee(t),G.inputString),Ce(t)){const a=vt.rgb,{r:l,g:c,b:u}=Mn(t),f=In(t);return{model:"rgb",[a[0]]:l,[a[1]]:c,[a[2]]:u,alpha:f<1?f:void 0}}const e=bv.exec(t);W(lv(e),G.invalidCSS);const n=e[1],r=vt[n];let s=e[5]?parseFloat(e[5]):1;s>1&&(s/=100);const i=(a,l)=>{if(a==="none")return 0;if(n==="hsl"&&l===0||n==="oklch"&&l===2)return wv(a);const u=parseFloat(a);if(!a.includes("%"))return u;if(n==="oklch"){if(l===1)return u*.4/100}else if(n==="oklab"&&(l===1||l===2))return u*.4/100;return u},o=[i(e[2],0),i(e[3],1),i(e[4],2)];return n==="oklab"?(W(o[1]>=-.4&&o[1]<=.4,G.invalidRange),W(o[2]>=-.4&&o[2]<=.4,G.invalidRange)):n==="oklch"&&W(o[1]>=0&&o[1]<=.4,G.invalidRange),{model:n,[r[0]]:o[0],[r[1]]:o[1],[r[2]]:o[2],alpha:s<1?s:void 0}}var vv={oklab:Na,oklch:Aa,rgb:kr},xv={hsl:Ea,oklch:$i,rgb:Er},_v={hsl:Ta,oklab:Pi,rgb:as},Sv={hsl:Tr,oklab:Nr,oklch:cs},kv={hsl:ka,oklab:Ef,oklch:Tf,rgb:ls},Ev={hsl:_f,oklab:Sf,oklch:kf,rgb:Mn},Tv={hsl:vv,oklab:xv,oklch:_v,rgb:Sv};function Nv(t,e){const{alpha:n,model:r,...s}=$t(t);["oklab","oklch"].includes(r)&&s.l>1&&(s.l=ke(s.l/100,os));const i=Object.values(s);if(e==="hex"){const a=n?Ri(n):"";return`${kv[r](i)}${a}`}const o=Tv[e]?.[r];return he(o?o(i):s,n)}function Av(t,e){const n=In(t);return e==="hex"?`${pi(t)}${n!==1?Ri(n):""}`:he(Ev[e](t),n)}function $e(t,e){W(Ee(t),G.inputString);const n=jn(t)?Oi[t.toLowerCase()]:t,r=e??(Ce(n)?"hex":$t(n).model);return Ce(n)?Av(n,r):Nv(n,r)}function Nf(t,e,n=os){W(Ee(t),G.left),W(Ee(e),G.right);const r=$e(t,"rgb"),s=$e(e,"rgb"),i=(r.r*299+r.g*587+r.b*114)/1e3,o=(s.r*299+s.g*587+s.b*114)/1e3;return ke(Math.abs(o-i),n)}function Ov(t){W(Ee(t),G.inputString);const{r:e,g:n,b:r}=$e(t,"rgb"),s=Math.max(e,n,r),i=Math.min(e,n,r);return ke((s-i)/255,4)}function Af(t,e){W(Ee(t),G.left),W(Ee(e),G.right);const n=$e(t,"rgb"),r=$e(e,"rgb");return Math.max(n.r,r.r)-Math.min(n.r,r.r)+(Math.max(n.g,r.g)-Math.min(n.g,r.g))+(Math.max(n.b,r.b)-Math.min(n.b,r.b))}function ea(t){W(Ee(t),G.inputString);const{r:e,g:n,b:r}=$e(t,"rgb"),s=[e/255,n/255,r/255];for(let i=0;i<s.length;i++)s[i]<=.04045?s[i]/=12.92:s[i]=((s[i]+.055)/1.055)**2.4;return ke(.2126*s[0]+.7152*s[1]+.0722*s[2],4)}function Of(t,e){W(Ee(t),G.left),W(Ee(e),G.right);const n=ea(t),r=ea(e);return ke(n>=r?(n+.05)/(r+.05):(r+.05)/(n+.05))}function Cv(t,e){W(Ee(t),G.left),W(Ee(e),G.right);const n=500,r=125,s=Af(t,e),i=Of(t,e),o=Nf(t,e),a=o>=r,l=s>=n;let c=0;return a&&l?c=2:(a||l)&&(c=1),{brightnessDifference:o,colorDifference:s,compliant:c,contrast:i,largeAA:i>=3,largeAAA:i>=4.5,normalAA:i>=4.5,normalAAA:i>=7}}function jv(t){if(Ce(t)||jn(t))return"hex";if(Ci(t))return"hsl";if(ji(t))return"oklab";if(Ii(t))return"oklch";if(Mi(t))return"rgb";throw new Error(G.invalid)}function Rr(t,e){const n=jn(t)?Oi[t.toLowerCase()]:t,r=jv(n);if(r===e)return n;const s=`${r}2${e}`,i=xf[s];if(!i)throw new Error(`Converter not found for ${r} to ${e}`);return i(n)}function Nn(t,e={}){W(Ce(t)||vf(t),G.invalid);const{alpha:n,format:r="hex",precision:s=os,separator:i=" "}=e,o=n&&n!==1?`${ke(n*100)}%`:null;let a=[],l=i;switch(r){case"hsl":{const{h:c,s:u,l:f}=Rr(t,"hsl");a=[c,`${u}%`,`${f}%`];break}case"oklab":{l=" ";const{l:c,a:u,b:f}=br(Rr(t,"oklab"),s);a=[`${ke(c*100,s)}%`,u,f];break}case"oklch":{l=" ";const{l:c,c:u,h:f}=br(Rr(t,"oklch"),s);a=[`${ke(c*100,s)}%`,u,f];break}case"rgb":{const{r:c,g:u,b:f}=Rr(t,"rgb");a=[c,u,f];break}default:{const c=pi(Rr(t,"hex"));return n&&n!==1?`${c}${Ri(n)}`:c}}return`${r}(${a.join(l)}${o?` / ${o}`:""})`}function zi(t,e,n){return(r,s)=>{W(Ee(r),G.inputString),W(nt(s),G.alpha);const i=$e(r,"hsl"),o=Ce(r)||jn(r)?"hex":$t(r).model;return Nn({...i,[t]:Qt(i[t]+(e==="+"?s:-s),0,100)},{format:o})}}function Iv(t,e,n){return zi("l","-")(t,e)}function Mv(t,e,n){return zi("s","-")(t,e)}function Cf(t,e,n){W(Ee(t),G.inputString),W(nt(e),"degrees must be a number");const r=$e(t,"hsl"),s=Ce(t)||jn(t)?"hex":$t(t).model;return Nn({...r,h:cv(r.h,e)},{format:s})}function Rv(t){W(Ee(t),G.inputString);const e=Ce(t)||jn(t)?"hex":$t(t).model,n=$e(t,"hex");return Nn(Cf(n,180),{format:e})}function Pv(t,e,n){return zi("l","+")(t,e)}function $v(t){W(!!t,G.input);const e={};if(Ee(t)){const{alpha:n=1}=$t(t),r=Ce(t)?"hex":$t(t).model;e.hex=wr($e(t,"hex"),n),e.hsl=he($e(t,"hsl"),n),e.oklab=he($e(t,"oklab"),n),e.oklch=he($e(t,"oklch"),n),e.rgb=he($e(t,"rgb"),n),e.alpha=n,e.type=r}else if(Sr(t)){const{alpha:n=1}=t;if(Ci(t))e.hsl={h:Ot(t.h,"hsl","h"),s:Ot(t.s,"hsl","s"),l:Ot(t.l,"hsl","l")},e.rgb=Tr(e.hsl),e.oklab=Ea(e.hsl),e.oklch=Ta(e.hsl),e.type="hsl";else if(ji(t))e.hsl=Na(t),e.oklab=t,e.oklch=Pi(t),e.rgb=Nr(t),e.type="oklab";else if(Ii(t))e.hsl=Aa(t),e.oklab=$i(t),e.oklch=t,e.rgb=cs(t),e.type="oklch";else if(Mi(t))e.rgb={r:Ot(t.r,"rgb","r"),g:Ot(t.g,"rgb","g"),b:Ot(t.b,"rgb","b")},e.hsl=kr(e.rgb),e.oklab=Er(e.rgb),e.oklch=as(e.rgb),e.type="rgb";else throw new Error("invalid color");e.hex=wr(ka(e.hsl),n),e.hsl=he(e.hsl,n),e.oklab=he(e.oklab,n),e.oklch=he(e.oklch,n),e.rgb=he(e.rgb,n),e.alpha=n}else throw new Error(G.input);return e}function zv(t,e,n){W(Ee(t),G.inputString),W(nt(e),G.alpha);const r=Ce(t)||jn(t)?"hex":$t(t).model,s=$e(t,"rgb");return Nn(s,{format:n??r,alpha:e})}function jf(t){if(W(Ee(t),G.inputString),Ce(t))return In(t);if(Object.keys(Oi).includes(t))return 1;const{alpha:e}=$t(t);return e||1}function Lv(t,e,n){return zi("s","+")(t,e)}function Dv(t,e={}){const{darkColor:n="#000000",lightColor:r="#ffffff",threshold:s=128}=e;W(Ee(t),G.inputString),W(s>=0&&s<=255,G.threshold);const{r:i,g:o,b:a}=Mn($e(t,"hex"));return(i*299+o*587+a*114)/1e3>=s?n:r}function Fv(t,e,n){W(Ee(t),G.inputString),W(nt(e),G.alpha),W(e>=-1&&e<=1,G.alpha);const r=$e(t,"oklab"),s=ke(Qt(jf(t)-e,0,1));return Nn(r,{format:n,alpha:s})}var Bv=class{constructor(t,e={}){fn(this,"alpha"),fn(this,"hex"),fn(this,"hsl"),fn(this,"oklab"),fn(this,"oklch"),fn(this,"rgb"),fn(this,"type"),W(!!t,"color is required");const{alpha:n,hex:r,hsl:s,oklab:i,oklch:o,rgb:a,type:l}=$v(t);this.hex=r,this.hsl=s,this.oklab=i,this.oklch=o,this.rgb=a,this.alpha=n,this.type=e.format??l}get css(){return this.selectedColor}get red(){return this.rgb.r}get green(){return this.rgb.g}get blue(){return this.rgb.b}get hue(){return this.hsl.h}get saturation(){return this.hsl.s}get lightness(){return this.hsl.l}get luminance(){return ea(this.selectedColor)}get chroma(){return Ov(this.selectedColor)}get opacity(){return jf(this.selectedColor)}get textColor(){return Dv(this.selectedColor)}get selectedColor(){return Nn(this[this.type],{format:this.type,alpha:this.alpha})}brightnessDifference(t){return Nf(this.selectedColor,t)}colorDifference(t){return Af(this.selectedColor,t)}compare(t){return Cv(this.selectedColor,t)}contrast(t){return Of(this.selectedColor,t)}format(t,e){return Nn(this.rgb,{alpha:this.alpha,format:t,precision:e})}lighten(t){return Pv(this.selectedColor,t)}darken(t){return Iv(this.selectedColor,t)}saturate(t){return Lv(this.selectedColor,t)}desaturate(t){return Mv(this.selectedColor,t)}invert(){return Rv(this.selectedColor)}opacify(t=.9){return zv(this.selectedColor,t,this.type)}rotate(t){return Cf(this.selectedColor,t)}transparentize(t=.1){return Fv(this.selectedColor,t,this.type)}},Bt=Bv;const If=6048e5,Uv=864e5,Ql=Symbol.for("constructDateFrom");function ln(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&Ql in t?t[Ql](e):t instanceof Date?new t.constructor(e):new Date(e)}function ht(t,e){return ln(e||t,t)}let Vv={};function Li(){return Vv}function es(t,e){const n=Li(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,s=ht(t,e?.in),i=s.getDay(),o=(i<r?7:0)+i-r;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function mi(t,e){return es(t,{...e,weekStartsOn:1})}function Mf(t,e){const n=ht(t,e?.in),r=n.getFullYear(),s=ln(n,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const i=mi(s),o=ln(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const a=mi(o);return n.getTime()>=i.getTime()?r+1:n.getTime()>=a.getTime()?r:r-1}function Jl(t){const e=ht(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Zv(t,...e){const n=ln.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function ec(t,e){const n=ht(t,e?.in);return n.setHours(0,0,0,0),n}function Wv(t,e,n){const[r,s]=Zv(n?.in,t,e),i=ec(r),o=ec(s),a=+i-Jl(i),l=+o-Jl(o);return Math.round((a-l)/Uv)}function qv(t,e){const n=Mf(t,e),r=ln(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),mi(r)}function Gv(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Hv(t){return!(!Gv(t)&&typeof t!="number"||isNaN(+ht(t)))}function Kv(t,e){const n=ht(t,e?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const Yv={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Xv=(t,e,n)=>{let r;const s=Yv[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function go(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const Qv={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Jv={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},ex={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},tx={date:go({formats:Qv,defaultWidth:"full"}),time:go({formats:Jv,defaultWidth:"full"}),dateTime:go({formats:ex,defaultWidth:"full"})},nx={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},rx=(t,e,n,r)=>nx[t];function Pr(t){return(e,n)=>{const r=n?.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n?.width?String(n.width):o;s=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n?.width?String(n.width):t.defaultWidth;s=t.values[a]||t.values[o]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const sx={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},ix={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},ox={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},ax={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},lx={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},cx={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ux=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},fx={ordinalNumber:ux,era:Pr({values:sx,defaultWidth:"wide"}),quarter:Pr({values:ix,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Pr({values:ox,defaultWidth:"wide"}),day:Pr({values:ax,defaultWidth:"wide"}),dayPeriod:Pr({values:lx,defaultWidth:"wide",formattingValues:cx,defaultFormattingWidth:"wide"})};function $r(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const o=i[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?hx(a,f=>f.test(o)):dx(a,f=>f.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const u=e.slice(o.length);return{value:c,rest:u}}}function dx(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function hx(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function px(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],i=e.match(t.parsePattern);if(!i)return null;let o=t.valueCallback?t.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(s.length);return{value:o,rest:a}}}const mx=/^(\d+)(th|st|nd|rd)?/i,gx=/\d+/i,yx={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},bx={any:[/^b/i,/^(a|c)/i]},wx={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},vx={any:[/1/i,/2/i,/3/i,/4/i]},xx={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},_x={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Sx={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},kx={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Ex={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Tx={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Nx={ordinalNumber:px({matchPattern:mx,parsePattern:gx,valueCallback:t=>parseInt(t,10)}),era:$r({matchPatterns:yx,defaultMatchWidth:"wide",parsePatterns:bx,defaultParseWidth:"any"}),quarter:$r({matchPatterns:wx,defaultMatchWidth:"wide",parsePatterns:vx,defaultParseWidth:"any",valueCallback:t=>t+1}),month:$r({matchPatterns:xx,defaultMatchWidth:"wide",parsePatterns:_x,defaultParseWidth:"any"}),day:$r({matchPatterns:Sx,defaultMatchWidth:"wide",parsePatterns:kx,defaultParseWidth:"any"}),dayPeriod:$r({matchPatterns:Ex,defaultMatchWidth:"any",parsePatterns:Tx,defaultParseWidth:"any"})},Ax={code:"en-US",formatDistance:Xv,formatLong:tx,formatRelative:rx,localize:fx,match:Nx,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Ox(t,e){const n=ht(t,e?.in);return Wv(n,Kv(n))+1}function Cx(t,e){const n=ht(t,e?.in),r=+mi(n)-+qv(n);return Math.round(r/If)+1}function Rf(t,e){const n=ht(t,e?.in),r=n.getFullYear(),s=Li(),i=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,o=ln(e?.in||t,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const a=es(o,e),l=ln(e?.in||t,0);l.setFullYear(r,0,i),l.setHours(0,0,0,0);const c=es(l,e);return+n>=+a?r+1:+n>=+c?r:r-1}function jx(t,e){const n=Li(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,s=Rf(t,e),i=ln(e?.in||t,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),es(i,e)}function Ix(t,e){const n=ht(t,e?.in),r=+es(n,e)-+jx(n,e);return Math.round(r/If)+1}function ce(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Ft={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return ce(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):ce(n+1,2)},d(t,e){return ce(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return n==="am"?"a.m.":"p.m."}},h(t,e){return ce(t.getHours()%12||12,e.length)},H(t,e){return ce(t.getHours(),e.length)},m(t,e){return ce(t.getMinutes(),e.length)},s(t,e){return ce(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return ce(s,e.length)}},Yn={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},tc={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return Ft.y(t,e)},Y:function(t,e,n,r){const s=Rf(t,r),i=s>0?s:1-s;if(e==="YY"){const o=i%100;return ce(o,2)}return e==="Yo"?n.ordinalNumber(i,{unit:"year"}):ce(i,e.length)},R:function(t,e){const n=Mf(t);return ce(n,e.length)},u:function(t,e){const n=t.getFullYear();return ce(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return ce(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return ce(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Ft.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return ce(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=Ix(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):ce(s,e.length)},I:function(t,e,n){const r=Cx(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):ce(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Ft.d(t,e)},D:function(t,e,n){const r=Ox(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):ce(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return ce(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return ce(i,e.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return ce(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=Yn.noon:r===0?s=Yn.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=Yn.evening:r>=12?s=Yn.afternoon:r>=4?s=Yn.morning:s=Yn.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Ft.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Ft.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):ce(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):ce(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Ft.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Ft.s(t,e)},S:function(t,e){return Ft.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return rc(r);case"XXXX":case"XX":return dn(r);default:return dn(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return rc(r);case"xxxx":case"xx":return dn(r);default:return dn(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+nc(r,":");default:return"GMT"+dn(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+nc(r,":");default:return"GMT"+dn(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return ce(r,e.length)},T:function(t,e,n){return ce(+t,e.length)}};function nc(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),i=r%60;return i===0?n+String(s):n+String(s)+e+ce(i,2)}function rc(t,e){return t%60===0?(t>0?"-":"+")+ce(Math.abs(t)/60,2):dn(t,e)}function dn(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=ce(Math.trunc(r/60),2),i=ce(r%60,2);return n+s+e+i}const sc=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});default:return e.date({width:"full"})}},Pf=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});default:return e.time({width:"full"})}},Mx=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return sc(t,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",sc(r,e)).replace("{{time}}",Pf(s,e))},Rx={p:Pf,P:Mx},Px=/^D+$/,$x=/^Y+$/,zx=["D","DD","YY","YYYY"];function Lx(t){return Px.test(t)}function Dx(t){return $x.test(t)}function Fx(t,e,n){const r=Bx(t,e,n);if(console.warn(r),zx.includes(t))throw new RangeError(r)}function Bx(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Ux=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Vx=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Zx=/^'([^]*?)'?$/,Wx=/''/g,qx=/[a-zA-Z]/;function Gx(t,e,n){const r=Li(),s=r.locale??Ax,i=r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,o=r.weekStartsOn??r.locale?.options?.weekStartsOn??0,a=ht(t,n?.in);if(!Hv(a))throw new RangeError("Invalid time value");let l=e.match(Vx).map(u=>{const f=u[0];if(f==="p"||f==="P"){const h=Rx[f];return h(u,s.formatLong)}return u}).join("").match(Ux).map(u=>{if(u==="''")return{isToken:!1,value:"'"};const f=u[0];if(f==="'")return{isToken:!1,value:Hx(u)};if(tc[f])return{isToken:!0,value:u};if(f.match(qx))throw new RangeError("Format string contains an unescaped latin alphabet character `"+f+"`");return{isToken:!1,value:u}});s.localize.preprocessor&&(l=s.localize.preprocessor(a,l));const c={firstWeekContainsDate:i,weekStartsOn:o,locale:s};return l.map(u=>{if(!u.isToken)return u.value;const f=u.value;(Dx(f)||Lx(f))&&Fx(f,e,String(t));const h=tc[f[0]];return h(a,f,s.localize,c)}).join("")}function Hx(t){const e=t.match(Zx);return e?e[1].replace(Wx,"'"):t}const Kx="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let ic=(t=21)=>{let e="",n=crypto.getRandomValues(new Uint8Array(t|=0));for(;t--;)e+=Kx[n[t]&63];return e};function Yx(){const t=z.c(2),[e,n]=$.useState(Xx);let r,s;return t[0]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{const i=new MutationObserver(()=>n($f()));return i.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>i.disconnect()},s=[],t[0]=r,t[1]=s):(r=t[0],s=t[1]),$.useEffect(r,s),e}function Xx(){return $f()}function $f(){const t=getComputedStyle(document.body);return{backgroundColor:new Bt(t.getPropertyValue("--background")||"#fff").hex,primaryColor:new Bt(t.getPropertyValue("--secondary")||"#007bff").hex,textColor:new Bt(t.getPropertyValue("--foreground")||"#000").hex,keyframeColor:new Bt("oklch(82.8% 0.189 84.429)").hex,keyframeSelectedColor:new Bt("oklch(63.7% 0.237 25.331)").hex,keyframeHighlightedColor:new Bt("oklch(70.5% 0.213 47.604)").hex,gridColor:new Bt(t.getPropertyValue("--card")||"#888").hex}}const Qx=({rows:t})=>{const e=$.useRef(null),[n,r]=$.useState(800),[s,i]=$.useState(.1),[o,a]=$.useState(0),[l,c]=$.useState(!1),[u,f]=$.useState("./laxed.mp3"),h=$.useRef(null),[p,y]=$.useState(0),m=$.useMemo(()=>({rowHeight:40,timelinePadding:10,keyframeRadius:6}),[]),w=Yx(),g=$.useMemo(()=>{if(!t)return[];if(t.some(A=>A.isAudio))return t;const T=[{title:"Audio",isAudio:!0,keyframes:[]},...t];return T.forEach((A,C)=>{A.title||(A.title=`Row ${C+1}`),A.id||(A.id=ic()),A.keyframes.forEach(R=>{R.id||(R.id=ic())})}),T},[t]),E=$.useMemo(()=>{const A=document.createElement("canvas").getContext("2d");return A?(A.font="14px sans-serif",Math.ceil(Math.max(...g.map((C,R)=>A.measureText(C.title||`Row ${R+1}`).width))+20)):0},[g]),v=$.useMemo(()=>({...m,...w,rowNameWidth:E}),[m,w,E]),S=$.useMemo(()=>new Bt(v.gridColor).darken(.2),[v.gridColor]),_=$.useMemo(()=>{const T=[];let A=v.rowHeight;for(const C of g)T.push(A),A+=v.rowHeight*(C.isAudio?2:1);return T},[g,v.rowHeight]),O=$.useMemo(()=>_[_.length-1]+v.rowHeight,[_,v.rowHeight]),[b,x]=$.useState(null);$.useEffect(()=>{const T=h.current;if(!T){x(null);return}const A=()=>{const C=T.duration;!isNaN(C)&&C>0?x(C*1e3):x(0)};return A(),T.addEventListener("loadedmetadata",A),()=>{T.removeEventListener("loadedmetadata",A)}},[u]);const k=$.useMemo(()=>{const T=Math.max(...g.flatMap(R=>R.keyframes.map(I=>I.val??0)),0),A=b??0,C=Math.max(180*1e3,T,A);return v.rowNameWidth+v.timelinePadding+C*s+500},[g,s,v,b]);$.useEffect(()=>{const T=()=>{if(e.current){const C=e.current,R=C.getBoundingClientRect(),I=C.offsetWidth-C.clientWidth;r(Math.max(0,Math.floor(R.width-I)))}};T();const A=new ResizeObserver(T);return e.current&&A.observe(e.current),()=>A.disconnect()},[]),$.useEffect(()=>{const T=h.current;if(!T)return;let A=0;const C=()=>{a(T.currentTime*1e3),A=requestAnimationFrame(C)};return l?(T.play(),C()):(T.pause(),cancelAnimationFrame(A)),()=>cancelAnimationFrame(A)},[l]),$.useEffect(()=>{u&&h.current&&(h.current.src=u,h.current.load(),N(0))},[u]),$.useEffect(()=>{if(!l)return;const T=v.rowNameWidth+v.timelinePadding+o*s;T-p>n*.8&&y(T-n*.8),T-p<n*.2&&y(Math.max(0,T-n*.2))},[o,s,n,p,v,l]);const N=T=>{h.current&&(h.current.currentTime=T/1e3,a(T))};return d.jsxs("div",{className:"w-full h-full overflow-y-auto overflow-x-hidden relative",ref:e,children:[d.jsx("audio",{ref:h,src:u||void 0,preload:"auto"}),d.jsxs("div",{className:"w-full p-2 bg-card sticky top-0 z-10 flex flex-row gap-2 flex-wrap",children:[d.jsx(i_,{canvasWidth:n,timelineWidth:k,scrollX:p,setScrollX:y,timeScale:s,setTimeScale:i}),d.jsx(Ve,{onClick:()=>c(T=>!T),size:"icon",children:l?d.jsx(Zd,{}):d.jsx(Wd,{})}),d.jsxs("p",{children:["Time Scale: ",s.toFixed(2)," px/ms"]}),d.jsxs("p",{children:["Current Time: ",(o/1e3).toFixed(2)," s"]}),d.jsx(o_,{setAudioUrl:f}),d.jsx("p",{className:"mt-2 text-sm w-full font-bold",children:"Render Settings:"}),d.jsx("p",{className:"mt-2 text-sm w-full",children:JSON.stringify(v)}),d.jsxs("p",{className:"mt-2 text-sm w-full",children:["Timeline Width: ",k,"px - Canvas Width:"," ",n,"px, Canvas Height: ",O,"px - ScrollX:"," ",p,"px"]})]}),d.jsxs(np,{width:n,height:O,onWheel:T=>{T.evt.preventDefault();const A=T.evt.deltaX??0,C=T.evt.deltaY??0,R=A!==0?A:C;if(A!==0){y(I=>{const P=I+A,L=Math.max(0,k-n);return Math.min(Math.max(0,P),L)});return}if(T.evt.ctrlKey){const I=e.current;I&&(I.scrollTop+=C);return}if(T.evt.altKey){i(I=>{const P=I-R*.001;return Math.min(Math.max(.04,P),1)});return}if(!T.evt.ctrlKey&&!T.evt.altKey&&!T.evt.shiftKey){y(I=>{const P=I+R,L=Math.max(0,k-n);return Math.min(Math.max(0,P),L)});return}},children:[d.jsx(eo,{children:d.jsx(kn,{x:0,y:0,width:n,height:O,fill:v.backgroundColor,listening:!1})}),d.jsx(eo,{children:d.jsxs(wn,{id:"actual-timeline",x:-p,children:[d.jsx(n_,{renderSettings:v,canvasWidth:k,canvasHeight:O,rowNameOffset:v.rowNameWidth,timeScale:s,scrollX:p,currentTime:o,setCurrentTime:T=>{a(T),N(T)}}),g.map((T,A)=>d.jsx(e_,{row:T,y:_[A],settings:v,canvasWidth:n,darkGridColor:S,timeScale:s},T.id??T.title??A)),g[0].isAudio&&d.jsx(t_,{audioUrl:u||"",timeScale:s,renderSettings:{...v,rowHeight:v.rowHeight*2},y:_[0]})]})}),d.jsxs(eo,{listening:!1,perfectDrawEnabled:!1,children:[d.jsx(kn,{x:0,y:0,width:v.rowNameWidth,height:v.rowHeight,fill:v.backgroundColor,listening:!1}),g.map((T,A)=>d.jsx(Jx,{row:T,y:_[A],settings:v,canvasWidth:n},T.id??T.title??A))]})]})]})},Jx=$.memo(function(e){const n=z.c(20),{row:r,y:s,settings:i,canvasWidth:o}=e,a=s+1,l=i.rowHeight*(r.isAudio?2:1)-1;let c;n[0]!==i.primaryColor||n[1]!==i.rowNameWidth||n[2]!==a||n[3]!==l?(c=d.jsx(kn,{x:0,y:a,width:i.rowNameWidth,height:l,fill:i.primaryColor,stroke:i.primaryColor,strokeWidth:1,listening:!1}),n[0]=i.primaryColor,n[1]=i.rowNameWidth,n[2]=a,n[3]=l,n[4]=c):c=n[4];const u=s+i.rowHeight*(r.isAudio?2:1)/2-7,f=r.title||r.id;let h;n[5]!==i.textColor||n[6]!==u||n[7]!==f?(h=d.jsx(Js,{x:8,y:u,text:f,fontSize:14,fill:i.textColor,listening:!1}),n[5]=i.textColor,n[6]=u,n[7]=f,n[8]=h):h=n[8];const p=s+i.rowHeight*(r.isAudio?2:1),y=s+i.rowHeight*(r.isAudio?2:1);let m;n[9]!==o||n[10]!==p||n[11]!==y?(m=[0,p,o,y],n[9]=o,n[10]=p,n[11]=y,n[12]=m):m=n[12];let w;n[13]!==i.textColor||n[14]!==m?(w=d.jsx(Br,{points:m,stroke:i.textColor,strokeWidth:1,listening:!1,opacity:.3}),n[13]=i.textColor,n[14]=m,n[15]=w):w=n[15];let g;return n[16]!==w||n[17]!==c||n[18]!==h?(g=d.jsxs(wn,{children:[c,h,w]}),n[16]=w,n[17]=c,n[18]=h,n[19]=g):g=n[19],g}),e_=$.memo(function(e){const n=z.c(47),{row:r,y:s,settings:i,canvasWidth:o,darkGridColor:a,timeScale:l}=e,[c,u]=$.useState(null),[f,h]=$.useState(null),p=i.rowHeight*(r.isAudio?2:1);let y;n[0]!==o||n[1]!==a||n[2]!==i.gridColor||n[3]!==i.rowNameWidth||n[4]!==p||n[5]!==s?(y=d.jsx(kn,{x:i.rowNameWidth,y:s,width:o,height:p,fill:i.gridColor,stroke:a,strokeWidth:1,opacity:.1,listening:!1}),n[0]=o,n[1]=a,n[2]=i.gridColor,n[3]=i.rowNameWidth,n[4]=p,n[5]=s,n[6]=y):y=n[6];const m=i.rowNameWidth+5,w=s+5,g=c?`KF: ${c}`:"";let E;n[7]!==i.textColor||n[8]!==m||n[9]!==w||n[10]!==g?(E=d.jsx(Js,{x:m,y:w,text:g,fontSize:12,fill:i.textColor,listening:!1}),n[7]=i.textColor,n[8]=m,n[9]=w,n[10]=g,n[11]=E):E=n[11];const v=i.rowNameWidth+5,S=s+20,_=f&&f.length>0?`Selected: ${f.join(", ")}`:"";let O;n[12]!==i.textColor||n[13]!==v||n[14]!==S||n[15]!==_?(O=d.jsx(Js,{x:v,y:S,text:_,fontSize:12,fill:i.textColor,listening:!1}),n[12]=i.textColor,n[13]=v,n[14]=S,n[15]=_,n[16]=O):O=n[16];let b;if(n[17]!==c||n[18]!==r.keyframes||n[19]!==f||n[20]!==i.keyframeColor||n[21]!==i.keyframeHighlightedColor||n[22]!==i.keyframeRadius||n[23]!==i.keyframeSelectedColor||n[24]!==i.rowHeight||n[25]!==i.rowNameWidth||n[26]!==i.timelinePadding||n[27]!==l||n[28]!==s){let k;n[30]!==c||n[31]!==f||n[32]!==i.keyframeColor||n[33]!==i.keyframeHighlightedColor||n[34]!==i.keyframeRadius||n[35]!==i.keyframeSelectedColor||n[36]!==i.rowHeight||n[37]!==i.rowNameWidth||n[38]!==i.timelinePadding||n[39]!==l||n[40]!==s?(k=(N,T)=>{const A=i.rowNameWidth+i.timelinePadding+N.val*l,C=s+i.rowHeight/2;return d.jsx(kn,{x:A,y:C,width:i.keyframeRadius*2,height:i.keyframeRadius*2,offsetX:i.keyframeRadius,offsetY:i.keyframeRadius,fill:c===N.id?i.keyframeHighlightedColor:f?.includes(N.id||"")?i.keyframeSelectedColor:i.keyframeColor,rotation:45,listening:!0,onMouseEnter:()=>{N.id&&(document.body.style.cursor="pointer",u(N.id))},onMouseLeave:()=>{document.body.style.cursor="default",u(null)},onClick:()=>{N.id&&h(R=>R?.includes(N.id)?R.filter(I=>I!==N.id):R?[...R,N.id]:[N.id])},draggable:!0,onDragMove:R=>{const I=i.rowNameWidth+i.timelinePadding;let P=R.target.x();P<I&&(P=I);const L=(P-I)/l,B=Math.round(L/50)*50;let D=I+B*l;D=Math.round(D),R.target.x(D),R.target.y(C)}},N.id??T)},n[30]=c,n[31]=f,n[32]=i.keyframeColor,n[33]=i.keyframeHighlightedColor,n[34]=i.keyframeRadius,n[35]=i.keyframeSelectedColor,n[36]=i.rowHeight,n[37]=i.rowNameWidth,n[38]=i.timelinePadding,n[39]=l,n[40]=s,n[41]=k):k=n[41],b=r.keyframes.map(k),n[17]=c,n[18]=r.keyframes,n[19]=f,n[20]=i.keyframeColor,n[21]=i.keyframeHighlightedColor,n[22]=i.keyframeRadius,n[23]=i.keyframeSelectedColor,n[24]=i.rowHeight,n[25]=i.rowNameWidth,n[26]=i.timelinePadding,n[27]=l,n[28]=s,n[29]=b}else b=n[29];let x;return n[42]!==O||n[43]!==b||n[44]!==y||n[45]!==E?(x=d.jsxs(wn,{children:[y,E,O,b]}),n[42]=O,n[43]=b,n[44]=y,n[45]=E,n[46]=x):x=n[46],x});function t_({audioUrl:t,timeScale:e,renderSettings:n,y:r}){const[s,i]=$.useState(null);$.useEffect(()=>{let a=!1;i(null);async function l(){if(t)try{const u=await(await fetch(t)).arrayBuffer(),f=new AudioContext,h=await f.decodeAudioData(u);await f.close?.(),a||i(h)}catch{}}return l(),()=>{a=!0}},[t]);const o=$.useMemo(()=>{if(!s)return[];const{points:a}=nv(s,e,n.rowHeight*.9);return a},[s,e,n.rowHeight]);return d.jsx(wn,{listening:!1,perfectDrawEnabled:!1,children:d.jsx(Br,{x:n.rowNameWidth+n.timelinePadding,y:r+n.rowHeight*.05,points:o,stroke:n.keyframeColor,strokeWidth:1,listening:!1})})}function n_(t){const e=z.c(58),{renderSettings:n,canvasWidth:r,canvasHeight:s,rowNameOffset:i,scrollX:o,timeScale:a,currentTime:l,setCurrentTime:c}=t;let u;e[0]!==n.timelinePadding||e[1]!==i||e[2]!==o||e[3]!==c||e[4]!==a?(u=T=>{let C=(T.evt.offsetX+o-i-n.timelinePadding)/a;C<0&&(C=0),c(C)},e[0]=n.timelinePadding,e[1]=i,e[2]=o,e[3]=c,e[4]=a,e[5]=u):u=e[5];let f;e[6]!==r||e[7]!==n.primaryColor||e[8]!==n.rowHeight||e[9]!==i||e[10]!==u?(f=d.jsx(kn,{x:i,y:0,width:r,height:n.rowHeight,fill:n.primaryColor,stroke:n.primaryColor,strokeWidth:1,onClick:u}),e[6]=r,e[7]=n.primaryColor,e[8]=n.rowHeight,e[9]=i,e[10]=u,e[11]=f):f=e[11];let h;e[12]!==r||e[13]!==a?(h=Array.from({length:Math.ceil(r/(a*1e3))}),e[12]=r,e[13]=a,e[14]=h):h=e[14];let p;e[15]!==s||e[16]!==n.rowHeight||e[17]!==n.textColor||e[18]!==n.timelinePadding||e[19]!==i||e[20]!==h||e[21]!==a?(p=h.map((T,A)=>{const C=A*a*1e3+n.timelinePadding+i;return d.jsxs(wn,{children:[d.jsx(Br,{points:[C,n.rowHeight/2,C,s],stroke:n.textColor,strokeWidth:1,dash:[4,6]}),d.jsx(Js,{x:C-2,y:2,text:Gx(A*1e3,"mm:ss"),fontSize:14,fill:n.textColor,align:"center"})]},A)}),e[15]=s,e[16]=n.rowHeight,e[17]=n.textColor,e[18]=n.timelinePadding,e[19]=i,e[20]=h,e[21]=a,e[22]=p):p=e[22];let y;e[23]!==r||e[24]!==a?(y=Array.from({length:Math.ceil(r/(a*50))}),e[23]=r,e[24]=a,e[25]=y):y=e[25];let m;e[26]!==n.rowHeight||e[27]!==n.textColor||e[28]!==n.timelinePadding||e[29]!==i||e[30]!==y||e[31]!==a?(m=y.map((T,A)=>{const C=A*a*50+n.timelinePadding+i;return A%20===0?null:d.jsx(Br,{points:[C,n.rowHeight*.75,C,n.rowHeight],stroke:n.textColor,strokeWidth:1},A)}),e[26]=n.rowHeight,e[27]=n.textColor,e[28]=n.timelinePadding,e[29]=i,e[30]=y,e[31]=a,e[32]=m):m=e[32];let w;e[33]!==f||e[34]!==p||e[35]!==m?(w=d.jsxs(wn,{listening:!0,perfectDrawEnabled:!1,children:[f,p,m]}),e[33]=f,e[34]=p,e[35]=m,e[36]=w):w=e[36];const g=n.rowNameWidth+n.timelinePadding+l*a-2.5,E=n.rowHeight*.5;let v;e[37]!==n.rowHeight||e[38]!==n.rowNameWidth||e[39]!==n.timelinePadding||e[40]!==c||e[41]!==a?(v=T=>{const A=n.rowNameWidth+n.timelinePadding;let C=T.target.x();C<A&&(C=A);const R=(C-A)/a,I=Math.round(R/50)*50;let P=A+I*a;P=Math.round(P),T.target.x(P),T.target.y(n.rowHeight*.5),c(I)},e[37]=n.rowHeight,e[38]=n.rowNameWidth,e[39]=n.timelinePadding,e[40]=c,e[41]=a,e[42]=v):v=e[42];let S;e[43]!==v||e[44]!==g||e[45]!==E?(S=d.jsx(kn,{x:g,y:E,width:5,height:15,fill:"red",onMouseEnter:s_,onMouseLeave:r_,draggable:!0,onDragMove:v}),e[43]=v,e[44]=g,e[45]=E,e[46]=S):S=e[46];const _=n.rowNameWidth+n.timelinePadding+l*a,O=n.rowHeight*.8,b=n.rowNameWidth+n.timelinePadding+l*a;let x;e[47]!==s||e[48]!==_||e[49]!==O||e[50]!==b?(x=d.jsx(Br,{points:[_,O,b,s],stroke:"red",strokeWidth:2}),e[47]=s,e[48]=_,e[49]=O,e[50]=b,e[51]=x):x=e[51];let k;e[52]!==S||e[53]!==x?(k=d.jsxs(wn,{listening:!0,perfectDrawEnabled:!1,children:[S,x]}),e[52]=S,e[53]=x,e[54]=k):k=e[54];let N;return e[55]!==k||e[56]!==w?(N=d.jsxs(d.Fragment,{children:[w,k]}),e[55]=k,e[56]=w,e[57]=N):N=e[57],N}function r_(t){const e=t.target.getStage()?.container();e&&(e.style.cursor="default")}function s_(t){const e=t.target.getStage()?.container();e&&(e.style.cursor="w-resize")}function i_(t){const e=z.c(28),{canvasWidth:n,timelineWidth:r,scrollX:s,setScrollX:i,timeScale:o,setTimeScale:a}=t,l=$.useRef(null),[c,u]=$.useState(!1),[f,h]=$.useState(0),[p,y]=$.useState(0),m=Math.min(n,n/r*n);let w;e[0]!==s?(w=R=>{u(!0),h(R.clientX),y(s)},e[0]=s,e[1]=w):w=e[1];const g=w;let E;e[2]!==n||e[3]!==c||e[4]!==i||e[5]!==p||e[6]!==f||e[7]!==r?(E=R=>{if(!c)return;const I=R.clientX-f,P=r-n,L=Math.min(Math.max(0,p+I*r/n),P);i(L)},e[2]=n,e[3]=c,e[4]=i,e[5]=p,e[6]=f,e[7]=r,e[8]=E):E=e[8];const v=E;let S;e[9]===Symbol.for("react.memo_cache_sentinel")?(S=()=>u(!1),e[9]=S):S=e[9];const _=S;let O,b;e[10]!==v||e[11]!==c?(O=()=>(c?(window.addEventListener("mousemove",v),window.addEventListener("mouseup",_)):(window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",_)),()=>{window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",_)}),b=[c,v,_],e[10]=v,e[11]=c,e[12]=O,e[13]=b):(O=e[12],b=e[13]),$.useEffect(O,b);let x;e[14]!==n||e[15]!==s||e[16]!==i||e[17]!==a||e[18]!==o||e[19]!==r?(x=R=>{if(R.preventDefault(),R.altKey){const I=R.deltaY*-.001;a(Math.min(Math.max(.04,o+I),1))}else{const I=s+(R.deltaX||R.deltaY),P=r-n;i(Math.min(Math.max(0,I),P))}},e[14]=n,e[15]=s,e[16]=i,e[17]=a,e[18]=o,e[19]=r,e[20]=x):x=e[20];const k=x,N=`${m/n*100}%`,T=`${s/r*100}%`;let A;e[21]!==N||e[22]!==T?(A=d.jsx("div",{className:"absolute h-full bg-gray-500 rounded",style:{width:N,left:T,cursor:"grab"}}),e[21]=N,e[22]=T,e[23]=A):A=e[23];let C;return e[24]!==g||e[25]!==k||e[26]!==A?(C=d.jsx("div",{ref:l,className:"relative w-full h-6 bg-gray-200 mt-1 rounded",onMouseDown:g,onWheel:k,children:A}),e[24]=g,e[25]=k,e[26]=A,e[27]=C):C=e[27],C}function o_(t){const e=z.c(4),{setAudioUrl:n}=t;let r;e[0]!==n?(r=o=>{const a=o.target.files?.[0];if(a){const l=URL.createObjectURL(a);n(l)}else n(null)},e[0]=n,e[1]=r):r=e[1];const s=r;let i;return e[2]!==s?(i=d.jsx("div",{children:d.jsx(xn,{type:"file",accept:"audio/*",onChange:s})}),e[2]=s,e[3]=i):i=e[3],i}const a_=[{keyframes:[{val:0},{val:3e3}]},{keyframes:[{val:2e3},{val:2500},{val:3600}]},{keyframes:[{val:1e3},{val:1500},{val:2e3}]},{keyframes:[{val:100},{val:3410},{val:2e3}]},{title:"Max Value",keyframes:[{val:4e3},{val:1500},{val:2500}]}];function l_(){const t=z.c(15),e=rs(),n=ot();let r,s;t[0]!==e.theme?(r=()=>{const y=window.document.documentElement;y.classList.remove("light","dark"),y.classList.add(e.theme)},s=[e.theme],t[0]=e.theme,t[1]=r,t[2]=s):(r=t[1],s=t[2]),$.useEffect(r,s);let i,o;t[3]!==n?(i=()=>{const y=m=>{n.saved||!n.cart||(m.preventDefault(),m.returnValue="")};return window.addEventListener("beforeunload",y),()=>{window.removeEventListener("beforeunload",y)}},o=[n],t[3]=n,t[4]=i,t[5]=o):(i=t[4],o=t[5]),$.useEffect(i,o);let a,l;t[6]!==e.saveInterval||t[7]!==n?(a=()=>{const y=setInterval(()=>{!n.saved&&n.cart&&n.saveProject().catch(c_)},e.saveInterval*1e3);return()=>{clearInterval(y)}},l=[n,e.saveInterval],t[6]=e.saveInterval,t[7]=n,t[8]=a,t[9]=l):(a=t[8],l=t[9]),$.useEffect(a,l);let c,u;t[10]===Symbol.for("react.memo_cache_sentinel")?(c=d.jsxs(er,{minSize:5,defaultSize:25,className:"bg-card flex flex-col gap-4",children:[d.jsx(sw,{}),d.jsx(jw,{})]}),u=d.jsx(Oo,{}),t[10]=c,t[11]=u):(c=t[10],u=t[11]);let f,h;t[12]===Symbol.for("react.memo_cache_sentinel")?(f=d.jsx(er,{minSize:5,defaultSize:80,children:d.jsxs(Ao,{direction:"horizontal",autoSaveId:"tca-preview",autoSave:"true",children:[c,u,d.jsx(er,{minSize:5,defaultSize:75,children:d.jsx(yc,{FallbackComponent:ff,children:d.jsx(ev,{})})})]})}),h=d.jsx(Oo,{}),t[12]=f,t[13]=h):(f=t[12],h=t[13]);let p;return t[14]===Symbol.for("react.memo_cache_sentinel")?(p=d.jsx("div",{className:"h-screen w-screen",children:d.jsxs(Ao,{direction:"vertical",autoSaveId:"tca-project",autoSave:"true",children:[f,h,d.jsx(er,{minSize:5,defaultSize:20,children:d.jsx($.Suspense,{fallback:d.jsx("div",{children:"Loading Timeline..."}),children:d.jsx(Qx,{rows:a_})})})]})}),t[14]=p):p=t[14],p}function c_(t){console.error("Auto-save failed:",t)}function Oa(t){const e=z.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let r;return e[2]!==n?(r=d.jsx(Uh,{"data-slot":"alert-dialog",...n}),e[2]=n,e[3]=r):r=e[3],r}function u_(t){const e=z.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let r;return e[2]!==n?(r=d.jsx(qh,{"data-slot":"alert-dialog-portal",...n}),e[2]=n,e[3]=r):r=e[3],r}function f_(t){const e=z.c(8);let n,r;e[0]!==t?({className:n,...r}=t,e[0]=t,e[1]=n,e[2]=r):(n=e[1],r=e[2]);let s;e[3]!==n?(s=U("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50 backdrop-blur",n),e[3]=n,e[4]=s):s=e[4];let i;return e[5]!==r||e[6]!==s?(i=d.jsx(Gh,{"data-slot":"alert-dialog-overlay",className:s,...r}),e[5]=r,e[6]=s,e[7]=i):i=e[7],i}function Ca(t){const e=z.c(9);let n,r;e[0]!==t?({className:n,...r}=t,e[0]=t,e[1]=n,e[2]=r):(n=e[1],r=e[2]);let s;e[3]===Symbol.for("react.memo_cache_sentinel")?(s=d.jsx(f_,{}),e[3]=s):s=e[3];let i;e[4]!==n?(i=U("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",n),e[4]=n,e[5]=i):i=e[5];let o;return e[6]!==r||e[7]!==i?(o=d.jsxs(u_,{children:[s,d.jsx(Vh,{"data-slot":"alert-dialog-content",className:i,...r})]}),e[6]=r,e[7]=i,e[8]=o):o=e[8],o}function ja(t){const e=z.c(8);let n,r;e[0]!==t?({className:n,...r}=t,e[0]=t,e[1]=n,e[2]=r):(n=e[1],r=e[2]);let s;e[3]!==n?(s=U("flex flex-col gap-2 text-center sm:text-left",n),e[3]=n,e[4]=s):s=e[4];let i;return e[5]!==r||e[6]!==s?(i=d.jsx("div",{"data-slot":"alert-dialog-header",className:s,...r}),e[5]=r,e[6]=s,e[7]=i):i=e[7],i}function Ia(t){const e=z.c(8);let n,r;e[0]!==t?({className:n,...r}=t,e[0]=t,e[1]=n,e[2]=r):(n=e[1],r=e[2]);let s;e[3]!==n?(s=U("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",n),e[3]=n,e[4]=s):s=e[4];let i;return e[5]!==r||e[6]!==s?(i=d.jsx("div",{"data-slot":"alert-dialog-footer",className:s,...r}),e[5]=r,e[6]=s,e[7]=i):i=e[7],i}function Ma(t){const e=z.c(8);let n,r;e[0]!==t?({className:n,...r}=t,e[0]=t,e[1]=n,e[2]=r):(n=e[1],r=e[2]);let s;e[3]!==n?(s=U("text-lg font-semibold",n),e[3]=n,e[4]=s):s=e[4];let i;return e[5]!==r||e[6]!==s?(i=d.jsx(Zh,{"data-slot":"alert-dialog-title",className:s,...r}),e[5]=r,e[6]=s,e[7]=i):i=e[7],i}function Ra(t){const e=z.c(8);let n,r;e[0]!==t?({className:n,...r}=t,e[0]=t,e[1]=n,e[2]=r):(n=e[1],r=e[2]);let s;e[3]!==n?(s=U("text-sm",n),e[3]=n,e[4]=s):s=e[4];let i;return e[5]!==r||e[6]!==s?(i=d.jsx(Wh,{"data-slot":"alert-dialog-description",className:s,...r}),e[5]=r,e[6]=s,e[7]=i):i=e[7],i}function d_(t){const e=z.c(8);let n,r;e[0]!==t?({className:n,...r}=t,e[0]=t,e[1]=n,e[2]=r):(n=e[1],r=e[2]);let s;e[3]!==n?(s=U(zc({variant:"outline"}),n),e[3]=n,e[4]=s):s=e[4];let i;return e[5]!==r||e[6]!==s?(i=d.jsx(Bh,{className:s,...r}),e[5]=r,e[6]=s,e[7]=i):i=e[7],i}function h_(){const t=[],e=document.createElement("canvas");return e.getContext("webgl")||e.getContext("experimental-webgl")||t.push("WebGL / 3D Graphics"),"AudioContext"in window||"webkitAudioContext"in window||t.push("Web Audio API (AudioContext)"),"requestAnimationFrame"in window||t.push("Animation Frame API (requestAnimationFrame)"),t}const p_=()=>{const t=z.c(22);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],t[0]=e):e=t[0];const[n,r]=$.useState(e),[s,i]=$.useState(!1);let o,a;if(t[1]===Symbol.for("react.memo_cache_sentinel")?(o=()=>{const v=h_();(v.length>0||!cr)&&(r(v),setTimeout(()=>{i(!0)},10))},a=[],t[1]=o,t[2]=a):(o=t[1],a=t[2]),$.useEffect(o,a),!s)return null;let l;t[3]===Symbol.for("react.memo_cache_sentinel")?(l=d.jsx(Ma,{children:"Missing Browser Capabilities"}),t[3]=l):l=t[3];let c;t[4]!==n?(c=n.map(m_),t[4]=n,t[5]=c):c=t[5];let u;t[6]===Symbol.for("react.memo_cache_sentinel")?(u=!cr&&d.jsxs("li",{children:["File System Access API",d.jsx("br",{}),d.jsx("span",{className:"text-xs text-muted-foreground",children:"Used for autosave and loading files directly. Without it, you'll need to manually download and upload your files each time."})]}),t[6]=u):u=t[6];let f;t[7]!==c?(f=d.jsxs("ul",{className:"my-2 list-disc list-inside",children:[c,u]}),t[7]=c,t[8]=f):f=t[8];let h;t[9]===Symbol.for("react.memo_cache_sentinel")?(h=d.jsx("strong",{children:"Chrome"}),t[9]=h):h=t[9];let p;t[10]===Symbol.for("react.memo_cache_sentinel")?(p=d.jsx("strong",{children:"Edge"}),t[10]=p):p=t[10];let y;t[11]===Symbol.for("react.memo_cache_sentinel")?(y=d.jsx("strong",{children:"Brave"}),t[11]=y):y=t[11];let m;t[12]!==f?(m=d.jsxs(ja,{children:[l,d.jsxs(Ra,{children:["This app requires certain browser features to work correctly. Your current browser is missing the following capabilities:",f,"To use all features, switch to a modern Chromium-based browser like ",h,","," ",p,", or ",y,"."]})]}),t[12]=f,t[13]=m):m=t[13];let w;t[14]!==n.length?(w=!cr&&n.length===0&&d.jsx(Ia,{children:d.jsx(d_,{children:"Acknowledge"})}),t[14]=n.length,t[15]=w):w=t[15];let g;t[16]!==m||t[17]!==w?(g=d.jsxs(Ca,{children:[m,w]}),t[16]=m,t[17]=w,t[18]=g):g=t[18];let E;return t[19]!==s||t[20]!==g?(E=d.jsx(Oa,{open:s,onOpenChange:i,children:g}),t[19]=s,t[20]=g,t[21]=E):E=t[21],E};function m_(t){return d.jsx("li",{children:t},t)}const Pa=Symbol.for("yaml.alias"),ta=Symbol.for("yaml.document"),Jt=Symbol.for("yaml.map"),zf=Symbol.for("yaml.pair"),xt=Symbol.for("yaml.scalar"),Ar=Symbol.for("yaml.seq"),st=Symbol.for("yaml.node.type"),Rn=t=>!!t&&typeof t=="object"&&t[st]===Pa,Di=t=>!!t&&typeof t=="object"&&t[st]===ta,us=t=>!!t&&typeof t=="object"&&t[st]===Jt,Ae=t=>!!t&&typeof t=="object"&&t[st]===zf,pe=t=>!!t&&typeof t=="object"&&t[st]===xt,fs=t=>!!t&&typeof t=="object"&&t[st]===Ar;function Te(t){if(t&&typeof t=="object")switch(t[st]){case Jt:case Ar:return!0}return!1}function Ne(t){if(t&&typeof t=="object")switch(t[st]){case Pa:case Jt:case xt:case Ar:return!0}return!1}const Lf=t=>(pe(t)||Te(t))&&!!t.anchor,hn=Symbol("break visit"),g_=Symbol("skip children"),Wr=Symbol("remove node");function Or(t,e){const n=y_(e);Di(t)?sr(null,t.contents,n,Object.freeze([t]))===Wr&&(t.contents=null):sr(null,t,n,Object.freeze([]))}Or.BREAK=hn;Or.SKIP=g_;Or.REMOVE=Wr;function sr(t,e,n,r){const s=b_(t,e,n,r);if(Ne(s)||Ae(s))return w_(t,r,s),sr(t,s,n,r);if(typeof s!="symbol"){if(Te(e)){r=Object.freeze(r.concat(e));for(let i=0;i<e.items.length;++i){const o=sr(i,e.items[i],n,r);if(typeof o=="number")i=o-1;else{if(o===hn)return hn;o===Wr&&(e.items.splice(i,1),i-=1)}}}else if(Ae(e)){r=Object.freeze(r.concat(e));const i=sr("key",e.key,n,r);if(i===hn)return hn;i===Wr&&(e.key=null);const o=sr("value",e.value,n,r);if(o===hn)return hn;o===Wr&&(e.value=null)}}return s}function y_(t){return typeof t=="object"&&(t.Collection||t.Node||t.Value)?Object.assign({Alias:t.Node,Map:t.Node,Scalar:t.Node,Seq:t.Node},t.Value&&{Map:t.Value,Scalar:t.Value,Seq:t.Value},t.Collection&&{Map:t.Collection,Seq:t.Collection},t):t}function b_(t,e,n,r){if(typeof n=="function")return n(t,e,r);if(us(e))return n.Map?.(t,e,r);if(fs(e))return n.Seq?.(t,e,r);if(Ae(e))return n.Pair?.(t,e,r);if(pe(e))return n.Scalar?.(t,e,r);if(Rn(e))return n.Alias?.(t,e,r)}function w_(t,e,n){const r=e[e.length-1];if(Te(r))r.items[t]=n;else if(Ae(r))t==="key"?r.key=n:r.value=n;else if(Di(r))r.contents=n;else{const s=Rn(r)?"alias":"scalar";throw new Error(`Cannot replace node with ${s} parent`)}}const v_={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},x_=t=>t.replace(/[!,[\]{}]/g,e=>v_[e]);class Be{constructor(e,n){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},Be.defaultYaml,e),this.tags=Object.assign({},Be.defaultTags,n)}clone(){const e=new Be(this.yaml,this.tags);return e.docStart=this.docStart,e}atDocument(){const e=new Be(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:Be.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},Be.defaultTags);break}return e}add(e,n){this.atNextDocument&&(this.yaml={explicit:Be.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},Be.defaultTags),this.atNextDocument=!1);const r=e.trim().split(/[ \t]+/),s=r.shift();switch(s){case"%TAG":{if(r.length!==2&&(n(0,"%TAG directive should contain exactly two parts"),r.length<2))return!1;const[i,o]=r;return this.tags[i]=o,!0}case"%YAML":{if(this.yaml.explicit=!0,r.length!==1)return n(0,"%YAML directive should contain exactly one part"),!1;const[i]=r;if(i==="1.1"||i==="1.2")return this.yaml.version=i,!0;{const o=/^\d+\.\d+$/.test(i);return n(6,`Unsupported YAML version ${i}`,o),!1}}default:return n(0,`Unknown directive ${s}`,!0),!1}}tagName(e,n){if(e==="!")return"!";if(e[0]!=="!")return n(`Not a valid tag: ${e}`),null;if(e[1]==="<"){const o=e.slice(2,-1);return o==="!"||o==="!!"?(n(`Verbatim tags aren't resolved, so ${e} is invalid.`),null):(e[e.length-1]!==">"&&n("Verbatim tags must end with a >"),o)}const[,r,s]=e.match(/^(.*!)([^!]*)$/s);s||n(`The ${e} tag has no suffix`);const i=this.tags[r];if(i)try{return i+decodeURIComponent(s)}catch(o){return n(String(o)),null}return r==="!"?e:(n(`Could not resolve tag: ${e}`),null)}tagString(e){for(const[n,r]of Object.entries(this.tags))if(e.startsWith(r))return n+x_(e.substring(r.length));return e[0]==="!"?e:`!<${e}>`}toString(e){const n=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],r=Object.entries(this.tags);let s;if(e&&r.length>0&&Ne(e.contents)){const i={};Or(e.contents,(o,a)=>{Ne(a)&&a.tag&&(i[a.tag]=!0)}),s=Object.keys(i)}else s=[];for(const[i,o]of r)i==="!!"&&o==="tag:yaml.org,2002:"||(!e||s.some(a=>a.startsWith(o)))&&n.push(`%TAG ${i} ${o}`);return n.join(`
`)}}Be.defaultYaml={explicit:!1,version:"1.2"};Be.defaultTags={"!!":"tag:yaml.org,2002:"};function Df(t){if(/[\x00-\x19\s,[\]{}]/.test(t)){const n=`Anchor must not contain whitespace or control characters: ${JSON.stringify(t)}`;throw new Error(n)}return!0}function Ff(t){const e=new Set;return Or(t,{Value(n,r){r.anchor&&e.add(r.anchor)}}),e}function Bf(t,e){for(let n=1;;++n){const r=`${t}${n}`;if(!e.has(r))return r}}function __(t,e){const n=[],r=new Map;let s=null;return{onAnchor:i=>{n.push(i),s??(s=Ff(t));const o=Bf(e,s);return s.add(o),o},setAnchors:()=>{for(const i of n){const o=r.get(i);if(typeof o=="object"&&o.anchor&&(pe(o.node)||Te(o.node)))o.node.anchor=o.anchor;else{const a=new Error("Failed to resolve repeated object (this should not happen)");throw a.source=i,a}}},sourceObjects:r}}function ir(t,e,n,r){if(r&&typeof r=="object")if(Array.isArray(r))for(let s=0,i=r.length;s<i;++s){const o=r[s],a=ir(t,r,String(s),o);a===void 0?delete r[s]:a!==o&&(r[s]=a)}else if(r instanceof Map)for(const s of Array.from(r.keys())){const i=r.get(s),o=ir(t,r,s,i);o===void 0?r.delete(s):o!==i&&r.set(s,o)}else if(r instanceof Set)for(const s of Array.from(r)){const i=ir(t,r,s,s);i===void 0?r.delete(s):i!==s&&(r.delete(s),r.add(i))}else for(const[s,i]of Object.entries(r)){const o=ir(t,r,s,i);o===void 0?delete r[s]:o!==i&&(r[s]=o)}return t.call(e,n,r)}function rt(t,e,n){if(Array.isArray(t))return t.map((r,s)=>rt(r,String(s),n));if(t&&typeof t.toJSON=="function"){if(!n||!Lf(t))return t.toJSON(e,n);const r={aliasCount:0,count:1,res:void 0};n.anchors.set(t,r),n.onCreate=i=>{r.res=i,delete n.onCreate};const s=t.toJSON(e,n);return n.onCreate&&n.onCreate(s),s}return typeof t=="bigint"&&!n?.keep?Number(t):t}class $a{constructor(e){Object.defineProperty(this,st,{value:e})}clone(){const e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}toJS(e,{mapAsMap:n,maxAliasCount:r,onAnchor:s,reviver:i}={}){if(!Di(e))throw new TypeError("A document argument is required");const o={anchors:new Map,doc:e,keep:!0,mapAsMap:n===!0,mapKeyWarned:!1,maxAliasCount:typeof r=="number"?r:100},a=rt(this,"",o);if(typeof s=="function")for(const{count:l,res:c}of o.anchors.values())s(c,l);return typeof i=="function"?ir(i,{"":a},"",a):a}}class za extends $a{constructor(e){super(Pa),this.source=e,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(e,n){let r;n?.aliasResolveCache?r=n.aliasResolveCache:(r=[],Or(e,{Node:(i,o)=>{(Rn(o)||Lf(o))&&r.push(o)}}),n&&(n.aliasResolveCache=r));let s;for(const i of r){if(i===this)break;i.anchor===this.source&&(s=i)}return s}toJSON(e,n){if(!n)return{source:this.source};const{anchors:r,doc:s,maxAliasCount:i}=n,o=this.resolve(s,n);if(!o){const l=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(l)}let a=r.get(o);if(a||(rt(o,null,n),a=r.get(o)),a?.res===void 0){const l="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(l)}if(i>=0&&(a.count+=1,a.aliasCount===0&&(a.aliasCount=Ys(s,o,r)),a.count*a.aliasCount>i)){const l="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(l)}return a.res}toString(e,n,r){const s=`*${this.source}`;if(e){if(Df(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source)){const i=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(i)}if(e.implicitKey)return`${s} `}return s}}function Ys(t,e,n){if(Rn(e)){const r=e.resolve(t),s=n&&r&&n.get(r);return s?s.count*s.aliasCount:0}else if(Te(e)){let r=0;for(const s of e.items){const i=Ys(t,s,n);i>r&&(r=i)}return r}else if(Ae(e)){const r=Ys(t,e.key,n),s=Ys(t,e.value,n);return Math.max(r,s)}return 1}const Uf=t=>!t||typeof t!="function"&&typeof t!="object";class H extends $a{constructor(e){super(xt),this.value=e}toJSON(e,n){return n?.keep?this.value:rt(this.value,e,n)}toString(){return String(this.value)}}H.BLOCK_FOLDED="BLOCK_FOLDED";H.BLOCK_LITERAL="BLOCK_LITERAL";H.PLAIN="PLAIN";H.QUOTE_DOUBLE="QUOTE_DOUBLE";H.QUOTE_SINGLE="QUOTE_SINGLE";const S_="tag:yaml.org,2002:";function k_(t,e,n){if(e){const r=n.filter(i=>i.tag===e),s=r.find(i=>!i.format)??r[0];if(!s)throw new Error(`Tag ${e} not found`);return s}return n.find(r=>r.identify?.(t)&&!r.format)}function ts(t,e,n){if(Di(t)&&(t=t.contents),Ne(t))return t;if(Ae(t)){const f=n.schema[Jt].createNode?.(n.schema,null,n);return f.items.push(t),f}(t instanceof String||t instanceof Number||t instanceof Boolean||typeof BigInt<"u"&&t instanceof BigInt)&&(t=t.valueOf());const{aliasDuplicateObjects:r,onAnchor:s,onTagObj:i,schema:o,sourceObjects:a}=n;let l;if(r&&t&&typeof t=="object"){if(l=a.get(t),l)return l.anchor??(l.anchor=s(t)),new za(l.anchor);l={anchor:null,node:null},a.set(t,l)}e?.startsWith("!!")&&(e=S_+e.slice(2));let c=k_(t,e,o.tags);if(!c){if(t&&typeof t.toJSON=="function"&&(t=t.toJSON()),!t||typeof t!="object"){const f=new H(t);return l&&(l.node=f),f}c=t instanceof Map?o[Jt]:Symbol.iterator in Object(t)?o[Ar]:o[Jt]}i&&(i(c),delete n.onTagObj);const u=c?.createNode?c.createNode(n.schema,t,n):typeof c?.nodeClass?.from=="function"?c.nodeClass.from(n.schema,t,n):new H(t);return e?u.tag=e:c.default||(u.tag=c.tag),l&&(l.node=u),u}function gi(t,e,n){let r=n;for(let s=e.length-1;s>=0;--s){const i=e[s];if(typeof i=="number"&&Number.isInteger(i)&&i>=0){const o=[];o[i]=r,r=o}else r=new Map([[i,r]])}return ts(r,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:t,sourceObjects:new Map})}const Dr=t=>t==null||typeof t=="object"&&!!t[Symbol.iterator]().next().done;class Vf extends $a{constructor(e,n){super(e),Object.defineProperty(this,"schema",{value:n,configurable:!0,enumerable:!1,writable:!0})}clone(e){const n=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return e&&(n.schema=e),n.items=n.items.map(r=>Ne(r)||Ae(r)?r.clone(e):r),this.range&&(n.range=this.range.slice()),n}addIn(e,n){if(Dr(e))this.add(n);else{const[r,...s]=e,i=this.get(r,!0);if(Te(i))i.addIn(s,n);else if(i===void 0&&this.schema)this.set(r,gi(this.schema,s,n));else throw new Error(`Expected YAML collection at ${r}. Remaining path: ${s}`)}}deleteIn(e){const[n,...r]=e;if(r.length===0)return this.delete(n);const s=this.get(n,!0);if(Te(s))return s.deleteIn(r);throw new Error(`Expected YAML collection at ${n}. Remaining path: ${r}`)}getIn(e,n){const[r,...s]=e,i=this.get(r,!0);return s.length===0?!n&&pe(i)?i.value:i:Te(i)?i.getIn(s,n):void 0}hasAllNullValues(e){return this.items.every(n=>{if(!Ae(n))return!1;const r=n.value;return r==null||e&&pe(r)&&r.value==null&&!r.commentBefore&&!r.comment&&!r.tag})}hasIn(e){const[n,...r]=e;if(r.length===0)return this.has(n);const s=this.get(n,!0);return Te(s)?s.hasIn(r):!1}setIn(e,n){const[r,...s]=e;if(s.length===0)this.set(r,n);else{const i=this.get(r,!0);if(Te(i))i.setIn(s,n);else if(i===void 0&&this.schema)this.set(r,gi(this.schema,s,n));else throw new Error(`Expected YAML collection at ${r}. Remaining path: ${s}`)}}}const E_=t=>t.replace(/^(?!$)(?: $)?/gm,"#");function Ct(t,e){return/^\n+$/.test(t)?t.substring(1):e?t.replace(/^(?! *$)/gm,e):t}const yn=(t,e,n)=>t.endsWith(`
`)?Ct(n,e):n.includes(`
`)?`
`+Ct(n,e):(t.endsWith(" ")?"":" ")+n,Zf="flow",na="block",Xs="quoted";function Fi(t,e,n="flow",{indentAtStart:r,lineWidth:s=80,minContentWidth:i=20,onFold:o,onOverflow:a}={}){if(!s||s<0)return t;s<i&&(i=0);const l=Math.max(1+i,1+s-e.length);if(t.length<=l)return t;const c=[],u={};let f=s-e.length;typeof r=="number"&&(r>s-Math.max(2,i)?c.push(0):f=s-r);let h,p,y=!1,m=-1,w=-1,g=-1;n===na&&(m=oc(t,m,e.length),m!==-1&&(f=m+l));for(let v;v=t[m+=1];){if(n===Xs&&v==="\\"){switch(w=m,t[m+1]){case"x":m+=3;break;case"u":m+=5;break;case"U":m+=9;break;default:m+=1}g=m}if(v===`
`)n===na&&(m=oc(t,m,e.length)),f=m+e.length+l,h=void 0;else{if(v===" "&&p&&p!==" "&&p!==`
`&&p!=="	"){const S=t[m+1];S&&S!==" "&&S!==`
`&&S!=="	"&&(h=m)}if(m>=f)if(h)c.push(h),f=h+l,h=void 0;else if(n===Xs){for(;p===" "||p==="	";)p=v,v=t[m+=1],y=!0;const S=m>g+1?m-2:w-1;if(u[S])return t;c.push(S),u[S]=!0,f=S+l,h=void 0}else y=!0}p=v}if(y&&a&&a(),c.length===0)return t;o&&o();let E=t.slice(0,c[0]);for(let v=0;v<c.length;++v){const S=c[v],_=c[v+1]||t.length;S===0?E=`
${e}${t.slice(0,_)}`:(n===Xs&&u[S]&&(E+=`${t[S]}\\`),E+=`
${e}${t.slice(S+1,_)}`)}return E}function oc(t,e,n){let r=e,s=e+1,i=t[s];for(;i===" "||i==="	";)if(e<s+n)i=t[++e];else{do i=t[++e];while(i&&i!==`
`);r=e,s=e+1,i=t[s]}return r}const Bi=(t,e)=>({indentAtStart:e?t.indent.length:t.indentAtStart,lineWidth:t.options.lineWidth,minContentWidth:t.options.minContentWidth}),Ui=t=>/^(%|---|\.\.\.)/m.test(t);function T_(t,e,n){if(!e||e<0)return!1;const r=e-n,s=t.length;if(s<=r)return!1;for(let i=0,o=0;i<s;++i)if(t[i]===`
`){if(i-o>r)return!0;if(o=i+1,s-o<=r)return!1}return!0}function qr(t,e){const n=JSON.stringify(t);if(e.options.doubleQuotedAsJSON)return n;const{implicitKey:r}=e,s=e.options.doubleQuotedMinMultiLineLength,i=e.indent||(Ui(t)?"  ":"");let o="",a=0;for(let l=0,c=n[l];c;c=n[++l])if(c===" "&&n[l+1]==="\\"&&n[l+2]==="n"&&(o+=n.slice(a,l)+"\\ ",l+=1,a=l,c="\\"),c==="\\")switch(n[l+1]){case"u":{o+=n.slice(a,l);const u=n.substr(l+2,4);switch(u){case"0000":o+="\\0";break;case"0007":o+="\\a";break;case"000b":o+="\\v";break;case"001b":o+="\\e";break;case"0085":o+="\\N";break;case"00a0":o+="\\_";break;case"2028":o+="\\L";break;case"2029":o+="\\P";break;default:u.substr(0,2)==="00"?o+="\\x"+u.substr(2):o+=n.substr(l,6)}l+=5,a=l+1}break;case"n":if(r||n[l+2]==='"'||n.length<s)l+=1;else{for(o+=n.slice(a,l)+`

`;n[l+2]==="\\"&&n[l+3]==="n"&&n[l+4]!=='"';)o+=`
`,l+=2;o+=i,n[l+2]===" "&&(o+="\\"),l+=1,a=l+1}break;default:l+=1}return o=a?o+n.slice(a):n,r?o:Fi(o,i,Xs,Bi(e,!1))}function ra(t,e){if(e.options.singleQuote===!1||e.implicitKey&&t.includes(`
`)||/[ \t]\n|\n[ \t]/.test(t))return qr(t,e);const n=e.indent||(Ui(t)?"  ":""),r="'"+t.replace(/'/g,"''").replace(/\n+/g,`$&
${n}`)+"'";return e.implicitKey?r:Fi(r,n,Zf,Bi(e,!1))}function or(t,e){const{singleQuote:n}=e.options;let r;if(n===!1)r=qr;else{const s=t.includes('"'),i=t.includes("'");s&&!i?r=ra:i&&!s?r=qr:r=n?ra:qr}return r(t,e)}let sa;try{sa=new RegExp(`(^|(?<!
))
+(?!
|$)`,"g")}catch{sa=/\n+(?!\n|$)/g}function Qs({comment:t,type:e,value:n},r,s,i){const{blockQuote:o,commentString:a,lineWidth:l}=r.options;if(!o||/\n[\t ]+$/.test(n))return or(n,r);const c=r.indent||(r.forceBlockIndent||Ui(n)?"  ":""),u=o==="literal"?!0:o==="folded"||e===H.BLOCK_FOLDED?!1:e===H.BLOCK_LITERAL?!0:!T_(n,l,c.length);if(!n)return u?`|
`:`>
`;let f,h;for(h=n.length;h>0;--h){const _=n[h-1];if(_!==`
`&&_!=="	"&&_!==" ")break}let p=n.substring(h);const y=p.indexOf(`
`);y===-1?f="-":n===p||y!==p.length-1?(f="+",i&&i()):f="",p&&(n=n.slice(0,-p.length),p[p.length-1]===`
`&&(p=p.slice(0,-1)),p=p.replace(sa,`$&${c}`));let m=!1,w,g=-1;for(w=0;w<n.length;++w){const _=n[w];if(_===" ")m=!0;else if(_===`
`)g=w;else break}let E=n.substring(0,g<w?g+1:w);E&&(n=n.substring(E.length),E=E.replace(/\n+/g,`$&${c}`));let S=(m?c?"2":"1":"")+f;if(t&&(S+=" "+a(t.replace(/ ?[\r\n]+/g," ")),s&&s()),!u){const _=n.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${c}`);let O=!1;const b=Bi(r,!0);o!=="folded"&&e!==H.BLOCK_FOLDED&&(b.onOverflow=()=>{O=!0});const x=Fi(`${E}${_}${p}`,c,na,b);if(!O)return`>${S}
${c}${x}`}return n=n.replace(/\n+/g,`$&${c}`),`|${S}
${c}${E}${n}${p}`}function N_(t,e,n,r){const{type:s,value:i}=t,{actualString:o,implicitKey:a,indent:l,indentStep:c,inFlow:u}=e;if(a&&i.includes(`
`)||u&&/[[\]{},]/.test(i))return or(i,e);if(/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(i))return a||u||!i.includes(`
`)?or(i,e):Qs(t,e,n,r);if(!a&&!u&&s!==H.PLAIN&&i.includes(`
`))return Qs(t,e,n,r);if(Ui(i)){if(l==="")return e.forceBlockIndent=!0,Qs(t,e,n,r);if(a&&l===c)return or(i,e)}const f=i.replace(/\n+/g,`$&
${l}`);if(o){const h=m=>m.default&&m.tag!=="tag:yaml.org,2002:str"&&m.test?.test(f),{compat:p,tags:y}=e.doc.schema;if(y.some(h)||p?.some(h))return or(i,e)}return a?f:Fi(f,l,Zf,Bi(e,!1))}function La(t,e,n,r){const{implicitKey:s,inFlow:i}=e,o=typeof t.value=="string"?t:Object.assign({},t,{value:String(t.value)});let{type:a}=t;a!==H.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(o.value)&&(a=H.QUOTE_DOUBLE);const l=u=>{switch(u){case H.BLOCK_FOLDED:case H.BLOCK_LITERAL:return s||i?or(o.value,e):Qs(o,e,n,r);case H.QUOTE_DOUBLE:return qr(o.value,e);case H.QUOTE_SINGLE:return ra(o.value,e);case H.PLAIN:return N_(o,e,n,r);default:return null}};let c=l(a);if(c===null){const{defaultKeyType:u,defaultStringType:f}=e.options,h=s&&u||f;if(c=l(h),c===null)throw new Error(`Unsupported default string type ${h}`)}return c}function Wf(t,e){const n=Object.assign({blockQuote:!0,commentString:E_,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},t.schema.toStringOptions,e);let r;switch(n.collectionStyle){case"block":r=!1;break;case"flow":r=!0;break;default:r=null}return{anchors:new Set,doc:t,flowCollectionPadding:n.flowCollectionPadding?" ":"",indent:"",indentStep:typeof n.indent=="number"?" ".repeat(n.indent):"  ",inFlow:r,options:n}}function A_(t,e){if(e.tag){const s=t.filter(i=>i.tag===e.tag);if(s.length>0)return s.find(i=>i.format===e.format)??s[0]}let n,r;if(pe(e)){r=e.value;let s=t.filter(i=>i.identify?.(r));if(s.length>1){const i=s.filter(o=>o.test);i.length>0&&(s=i)}n=s.find(i=>i.format===e.format)??s.find(i=>!i.format)}else r=e,n=t.find(s=>s.nodeClass&&r instanceof s.nodeClass);if(!n){const s=r?.constructor?.name??(r===null?"null":typeof r);throw new Error(`Tag not resolved for ${s} value`)}return n}function O_(t,e,{anchors:n,doc:r}){if(!r.directives)return"";const s=[],i=(pe(t)||Te(t))&&t.anchor;i&&Df(i)&&(n.add(i),s.push(`&${i}`));const o=t.tag??(e.default?null:e.tag);return o&&s.push(r.directives.tagString(o)),s.join(" ")}function vr(t,e,n,r){if(Ae(t))return t.toString(e,n,r);if(Rn(t)){if(e.doc.directives)return t.toString(e);if(e.resolvedAliases?.has(t))throw new TypeError("Cannot stringify circular structure without alias nodes");e.resolvedAliases?e.resolvedAliases.add(t):e.resolvedAliases=new Set([t]),t=t.resolve(e.doc)}let s;const i=Ne(t)?t:e.doc.createNode(t,{onTagObj:l=>s=l});s??(s=A_(e.doc.schema.tags,i));const o=O_(i,s,e);o.length>0&&(e.indentAtStart=(e.indentAtStart??0)+o.length+1);const a=typeof s.stringify=="function"?s.stringify(i,e,n,r):pe(i)?La(i,e,n,r):i.toString(e,n,r);return o?pe(i)||a[0]==="{"||a[0]==="["?`${o} ${a}`:`${o}
${e.indent}${a}`:a}function C_({key:t,value:e},n,r,s){const{allNullValues:i,doc:o,indent:a,indentStep:l,options:{commentString:c,indentSeq:u,simpleKeys:f}}=n;let h=Ne(t)&&t.comment||null;if(f){if(h)throw new Error("With simple keys, key nodes cannot have comments");if(Te(t)||!Ne(t)&&typeof t=="object"){const b="With simple keys, collection cannot be used as a key value";throw new Error(b)}}let p=!f&&(!t||h&&e==null&&!n.inFlow||Te(t)||(pe(t)?t.type===H.BLOCK_FOLDED||t.type===H.BLOCK_LITERAL:typeof t=="object"));n=Object.assign({},n,{allNullValues:!1,implicitKey:!p&&(f||!i),indent:a+l});let y=!1,m=!1,w=vr(t,n,()=>y=!0,()=>m=!0);if(!p&&!n.inFlow&&w.length>1024){if(f)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");p=!0}if(n.inFlow){if(i||e==null)return y&&r&&r(),w===""?"?":p?`? ${w}`:w}else if(i&&!f||e==null&&p)return w=`? ${w}`,h&&!y?w+=yn(w,n.indent,c(h)):m&&s&&s(),w;y&&(h=null),p?(h&&(w+=yn(w,n.indent,c(h))),w=`? ${w}
${a}:`):(w=`${w}:`,h&&(w+=yn(w,n.indent,c(h))));let g,E,v;Ne(e)?(g=!!e.spaceBefore,E=e.commentBefore,v=e.comment):(g=!1,E=null,v=null,e&&typeof e=="object"&&(e=o.createNode(e))),n.implicitKey=!1,!p&&!h&&pe(e)&&(n.indentAtStart=w.length+1),m=!1,!u&&l.length>=2&&!n.inFlow&&!p&&fs(e)&&!e.flow&&!e.tag&&!e.anchor&&(n.indent=n.indent.substring(2));let S=!1;const _=vr(e,n,()=>S=!0,()=>m=!0);let O=" ";if(h||g||E){if(O=g?`
`:"",E){const b=c(E);O+=`
${Ct(b,n.indent)}`}_===""&&!n.inFlow?O===`
`&&v&&(O=`

`):O+=`
${n.indent}`}else if(!p&&Te(e)){const b=_[0],x=_.indexOf(`
`),k=x!==-1,N=n.inFlow??e.flow??e.items.length===0;if(k||!N){let T=!1;if(k&&(b==="&"||b==="!")){let A=_.indexOf(" ");b==="&"&&A!==-1&&A<x&&_[A+1]==="!"&&(A=_.indexOf(" ",A+1)),(A===-1||x<A)&&(T=!0)}T||(O=`
${n.indent}`)}}else(_===""||_[0]===`
`)&&(O="");return w+=O+_,n.inFlow?S&&r&&r():v&&!S?w+=yn(w,n.indent,c(v)):m&&s&&s(),w}function qf(t,e){(t==="debug"||t==="warn")&&console.warn(e)}const Ls="<<",Mt={identify:t=>t===Ls||typeof t=="symbol"&&t.description===Ls,default:"key",tag:"tag:yaml.org,2002:merge",test:/^<<$/,resolve:()=>Object.assign(new H(Symbol(Ls)),{addToJSMap:Gf}),stringify:()=>Ls},j_=(t,e)=>(Mt.identify(e)||pe(e)&&(!e.type||e.type===H.PLAIN)&&Mt.identify(e.value))&&t?.doc.schema.tags.some(n=>n.tag===Mt.tag&&n.default);function Gf(t,e,n){if(n=t&&Rn(n)?n.resolve(t.doc):n,fs(n))for(const r of n.items)yo(t,e,r);else if(Array.isArray(n))for(const r of n)yo(t,e,r);else yo(t,e,n)}function yo(t,e,n){const r=t&&Rn(n)?n.resolve(t.doc):n;if(!us(r))throw new Error("Merge sources must be maps or map aliases");const s=r.toJSON(null,t,Map);for(const[i,o]of s)e instanceof Map?e.has(i)||e.set(i,o):e instanceof Set?e.add(i):Object.prototype.hasOwnProperty.call(e,i)||Object.defineProperty(e,i,{value:o,writable:!0,enumerable:!0,configurable:!0});return e}function Hf(t,e,{key:n,value:r}){if(Ne(n)&&n.addToJSMap)n.addToJSMap(t,e,r);else if(j_(t,n))Gf(t,e,r);else{const s=rt(n,"",t);if(e instanceof Map)e.set(s,rt(r,s,t));else if(e instanceof Set)e.add(s);else{const i=I_(n,s,t),o=rt(r,i,t);i in e?Object.defineProperty(e,i,{value:o,writable:!0,enumerable:!0,configurable:!0}):e[i]=o}}return e}function I_(t,e,n){if(e===null)return"";if(typeof e!="object")return String(e);if(Ne(t)&&n?.doc){const r=Wf(n.doc,{});r.anchors=new Set;for(const i of n.anchors.keys())r.anchors.add(i.anchor);r.inFlow=!0,r.inStringifyKey=!0;const s=t.toString(r);if(!n.mapKeyWarned){let i=JSON.stringify(s);i.length>40&&(i=i.substring(0,36)+'..."'),qf(n.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${i}. Set mapAsMap: true to use object keys.`),n.mapKeyWarned=!0}return s}return JSON.stringify(e)}function Da(t,e,n){const r=ts(t,void 0,n),s=ts(e,void 0,n);return new Ze(r,s)}class Ze{constructor(e,n=null){Object.defineProperty(this,st,{value:zf}),this.key=e,this.value=n}clone(e){let{key:n,value:r}=this;return Ne(n)&&(n=n.clone(e)),Ne(r)&&(r=r.clone(e)),new Ze(n,r)}toJSON(e,n){const r=n?.mapAsMap?new Map:{};return Hf(n,r,this)}toString(e,n,r){return e?.doc?C_(this,e,n,r):JSON.stringify(this)}}function Kf(t,e,n){return(e.inFlow??t.flow?R_:M_)(t,e,n)}function M_({comment:t,items:e},n,{blockItemPrefix:r,flowChars:s,itemIndent:i,onChompKeep:o,onComment:a}){const{indent:l,options:{commentString:c}}=n,u=Object.assign({},n,{indent:i,type:null});let f=!1;const h=[];for(let y=0;y<e.length;++y){const m=e[y];let w=null;if(Ne(m))!f&&m.spaceBefore&&h.push(""),yi(n,h,m.commentBefore,f),m.comment&&(w=m.comment);else if(Ae(m)){const E=Ne(m.key)?m.key:null;E&&(!f&&E.spaceBefore&&h.push(""),yi(n,h,E.commentBefore,f))}f=!1;let g=vr(m,u,()=>w=null,()=>f=!0);w&&(g+=yn(g,i,c(w))),f&&w&&(f=!1),h.push(r+g)}let p;if(h.length===0)p=s.start+s.end;else{p=h[0];for(let y=1;y<h.length;++y){const m=h[y];p+=m?`
${l}${m}`:`
`}}return t?(p+=`
`+Ct(c(t),l),a&&a()):f&&o&&o(),p}function R_({items:t},e,{flowChars:n,itemIndent:r}){const{indent:s,indentStep:i,flowCollectionPadding:o,options:{commentString:a}}=e;r+=i;const l=Object.assign({},e,{indent:r,inFlow:!0,type:null});let c=!1,u=0;const f=[];for(let y=0;y<t.length;++y){const m=t[y];let w=null;if(Ne(m))m.spaceBefore&&f.push(""),yi(e,f,m.commentBefore,!1),m.comment&&(w=m.comment);else if(Ae(m)){const E=Ne(m.key)?m.key:null;E&&(E.spaceBefore&&f.push(""),yi(e,f,E.commentBefore,!1),E.comment&&(c=!0));const v=Ne(m.value)?m.value:null;v?(v.comment&&(w=v.comment),v.commentBefore&&(c=!0)):m.value==null&&E?.comment&&(w=E.comment)}w&&(c=!0);let g=vr(m,l,()=>w=null);y<t.length-1&&(g+=","),w&&(g+=yn(g,r,a(w))),!c&&(f.length>u||g.includes(`
`))&&(c=!0),f.push(g),u=f.length}const{start:h,end:p}=n;if(f.length===0)return h+p;if(!c){const y=f.reduce((m,w)=>m+w.length+2,2);c=e.options.lineWidth>0&&y>e.options.lineWidth}if(c){let y=h;for(const m of f)y+=m?`
${i}${s}${m}`:`
`;return`${y}
${s}${p}`}else return`${h}${o}${f.join(" ")}${o}${p}`}function yi({indent:t,options:{commentString:e}},n,r,s){if(r&&s&&(r=r.replace(/^\n+/,"")),r){const i=Ct(e(r),t);n.push(i.trimStart())}}function bn(t,e){const n=pe(e)?e.value:e;for(const r of t)if(Ae(r)&&(r.key===e||r.key===n||pe(r.key)&&r.key.value===n))return r}class et extends Vf{static get tagName(){return"tag:yaml.org,2002:map"}constructor(e){super(Jt,e),this.items=[]}static from(e,n,r){const{keepUndefined:s,replacer:i}=r,o=new this(e),a=(l,c)=>{if(typeof i=="function")c=i.call(n,l,c);else if(Array.isArray(i)&&!i.includes(l))return;(c!==void 0||s)&&o.items.push(Da(l,c,r))};if(n instanceof Map)for(const[l,c]of n)a(l,c);else if(n&&typeof n=="object")for(const l of Object.keys(n))a(l,n[l]);return typeof e.sortMapEntries=="function"&&o.items.sort(e.sortMapEntries),o}add(e,n){let r;Ae(e)?r=e:!e||typeof e!="object"||!("key"in e)?r=new Ze(e,e?.value):r=new Ze(e.key,e.value);const s=bn(this.items,r.key),i=this.schema?.sortMapEntries;if(s){if(!n)throw new Error(`Key ${r.key} already set`);pe(s.value)&&Uf(r.value)?s.value.value=r.value:s.value=r.value}else if(i){const o=this.items.findIndex(a=>i(r,a)<0);o===-1?this.items.push(r):this.items.splice(o,0,r)}else this.items.push(r)}delete(e){const n=bn(this.items,e);return n?this.items.splice(this.items.indexOf(n),1).length>0:!1}get(e,n){const s=bn(this.items,e)?.value;return(!n&&pe(s)?s.value:s)??void 0}has(e){return!!bn(this.items,e)}set(e,n){this.add(new Ze(e,n),!0)}toJSON(e,n,r){const s=r?new r:n?.mapAsMap?new Map:{};n?.onCreate&&n.onCreate(s);for(const i of this.items)Hf(n,s,i);return s}toString(e,n,r){if(!e)return JSON.stringify(this);for(const s of this.items)if(!Ae(s))throw new Error(`Map items must all be pairs; found ${JSON.stringify(s)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),Kf(this,e,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:r,onComment:n})}}const Cr={collection:"map",default:!0,nodeClass:et,tag:"tag:yaml.org,2002:map",resolve(t,e){return us(t)||e("Expected a mapping for this tag"),t},createNode:(t,e,n)=>et.from(t,e,n)};class An extends Vf{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(e){super(Ar,e),this.items=[]}add(e){this.items.push(e)}delete(e){const n=Ds(e);return typeof n!="number"?!1:this.items.splice(n,1).length>0}get(e,n){const r=Ds(e);if(typeof r!="number")return;const s=this.items[r];return!n&&pe(s)?s.value:s}has(e){const n=Ds(e);return typeof n=="number"&&n<this.items.length}set(e,n){const r=Ds(e);if(typeof r!="number")throw new Error(`Expected a valid index, not ${e}.`);const s=this.items[r];pe(s)&&Uf(n)?s.value=n:this.items[r]=n}toJSON(e,n){const r=[];n?.onCreate&&n.onCreate(r);let s=0;for(const i of this.items)r.push(rt(i,String(s++),n));return r}toString(e,n,r){return e?Kf(this,e,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:r,onComment:n}):JSON.stringify(this)}static from(e,n,r){const{replacer:s}=r,i=new this(e);if(n&&Symbol.iterator in Object(n)){let o=0;for(let a of n){if(typeof s=="function"){const l=n instanceof Set?a:String(o++);a=s.call(n,l,a)}i.items.push(ts(a,void 0,r))}}return i}}function Ds(t){let e=pe(t)?t.value:t;return e&&typeof e=="string"&&(e=Number(e)),typeof e=="number"&&Number.isInteger(e)&&e>=0?e:null}const jr={collection:"seq",default:!0,nodeClass:An,tag:"tag:yaml.org,2002:seq",resolve(t,e){return fs(t)||e("Expected a sequence for this tag"),t},createNode:(t,e,n)=>An.from(t,e,n)},Vi={identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify(t,e,n,r){return e=Object.assign({actualString:!0},e),La(t,e,n,r)}},Zi={identify:t=>t==null,createNode:()=>new H(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new H(null),stringify:({source:t},e)=>typeof t=="string"&&Zi.test.test(t)?t:e.options.nullStr},Fa={identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:t=>new H(t[0]==="t"||t[0]==="T"),stringify({source:t,value:e},n){if(t&&Fa.test.test(t)){const r=t[0]==="t"||t[0]==="T";if(e===r)return t}return e?n.options.trueStr:n.options.falseStr}};function pt({format:t,minFractionDigits:e,tag:n,value:r}){if(typeof r=="bigint")return String(r);const s=typeof r=="number"?r:Number(r);if(!isFinite(s))return isNaN(s)?".nan":s<0?"-.inf":".inf";let i=Object.is(r,-0)?"-0":JSON.stringify(r);if(!t&&e&&(!n||n==="tag:yaml.org,2002:float")&&/^\d/.test(i)){let o=i.indexOf(".");o<0&&(o=i.length,i+=".");let a=e-(i.length-o-1);for(;a-- >0;)i+="0"}return i}const Yf={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:pt},Xf={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t),stringify(t){const e=Number(t.value);return isFinite(e)?e.toExponential():pt(t)}},Qf={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(t){const e=new H(parseFloat(t)),n=t.indexOf(".");return n!==-1&&t[t.length-1]==="0"&&(e.minFractionDigits=t.length-n-1),e},stringify:pt},Wi=t=>typeof t=="bigint"||Number.isInteger(t),Ba=(t,e,n,{intAsBigInt:r})=>r?BigInt(t):parseInt(t.substring(e),n);function Jf(t,e,n){const{value:r}=t;return Wi(r)&&r>=0?n+r.toString(e):pt(t)}const ed={identify:t=>Wi(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(t,e,n)=>Ba(t,2,8,n),stringify:t=>Jf(t,8,"0o")},td={identify:Wi,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(t,e,n)=>Ba(t,0,10,n),stringify:pt},nd={identify:t=>Wi(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(t,e,n)=>Ba(t,2,16,n),stringify:t=>Jf(t,16,"0x")},P_=[Cr,jr,Vi,Zi,Fa,ed,td,nd,Yf,Xf,Qf];function ac(t){return typeof t=="bigint"||Number.isInteger(t)}const Fs=({value:t})=>JSON.stringify(t),$_=[{identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify:Fs},{identify:t=>t==null,createNode:()=>new H(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:Fs},{identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^true$|^false$/,resolve:t=>t==="true",stringify:Fs},{identify:ac,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(t,e,{intAsBigInt:n})=>n?BigInt(t):parseInt(t,10),stringify:({value:t})=>ac(t)?t.toString():JSON.stringify(t)},{identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:t=>parseFloat(t),stringify:Fs}],z_={default:!0,tag:"",test:/^/,resolve(t,e){return e(`Unresolved plain scalar ${JSON.stringify(t)}`),t}},L_=[Cr,jr].concat($_,z_),Ua={identify:t=>t instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(t,e){if(typeof atob=="function"){const n=atob(t.replace(/[\n\r]/g,"")),r=new Uint8Array(n.length);for(let s=0;s<n.length;++s)r[s]=n.charCodeAt(s);return r}else return e("This environment does not support reading binary tags; either Buffer or atob is required"),t},stringify({comment:t,type:e,value:n},r,s,i){if(!n)return"";const o=n;let a;if(typeof btoa=="function"){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);a=btoa(l)}else throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(e??(e=H.BLOCK_LITERAL),e!==H.QUOTE_DOUBLE){const l=Math.max(r.options.lineWidth-r.indent.length,r.options.minContentWidth),c=Math.ceil(a.length/l),u=new Array(c);for(let f=0,h=0;f<c;++f,h+=l)u[f]=a.substr(h,l);a=u.join(e===H.BLOCK_LITERAL?`
`:" ")}return La({comment:t,type:e,value:a},r,s,i)}};function rd(t,e){if(fs(t))for(let n=0;n<t.items.length;++n){let r=t.items[n];if(!Ae(r)){if(us(r)){r.items.length>1&&e("Each pair must have its own sequence indicator");const s=r.items[0]||new Ze(new H(null));if(r.commentBefore&&(s.key.commentBefore=s.key.commentBefore?`${r.commentBefore}
${s.key.commentBefore}`:r.commentBefore),r.comment){const i=s.value??s.key;i.comment=i.comment?`${r.comment}
${i.comment}`:r.comment}r=s}t.items[n]=Ae(r)?r:new Ze(r)}}else e("Expected a sequence for this tag");return t}function sd(t,e,n){const{replacer:r}=n,s=new An(t);s.tag="tag:yaml.org,2002:pairs";let i=0;if(e&&Symbol.iterator in Object(e))for(let o of e){typeof r=="function"&&(o=r.call(e,String(i++),o));let a,l;if(Array.isArray(o))if(o.length===2)a=o[0],l=o[1];else throw new TypeError(`Expected [key, value] tuple: ${o}`);else if(o&&o instanceof Object){const c=Object.keys(o);if(c.length===1)a=c[0],l=o[a];else throw new TypeError(`Expected tuple with one key, not ${c.length} keys`)}else a=o;s.items.push(Da(a,l,n))}return s}const Va={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:rd,createNode:sd};class dr extends An{constructor(){super(),this.add=et.prototype.add.bind(this),this.delete=et.prototype.delete.bind(this),this.get=et.prototype.get.bind(this),this.has=et.prototype.has.bind(this),this.set=et.prototype.set.bind(this),this.tag=dr.tag}toJSON(e,n){if(!n)return super.toJSON(e);const r=new Map;n?.onCreate&&n.onCreate(r);for(const s of this.items){let i,o;if(Ae(s)?(i=rt(s.key,"",n),o=rt(s.value,i,n)):i=rt(s,"",n),r.has(i))throw new Error("Ordered maps must not include duplicate keys");r.set(i,o)}return r}static from(e,n,r){const s=sd(e,n,r),i=new this;return i.items=s.items,i}}dr.tag="tag:yaml.org,2002:omap";const Za={collection:"seq",identify:t=>t instanceof Map,nodeClass:dr,default:!1,tag:"tag:yaml.org,2002:omap",resolve(t,e){const n=rd(t,e),r=[];for(const{key:s}of n.items)pe(s)&&(r.includes(s.value)?e(`Ordered maps must not include duplicate keys: ${s.value}`):r.push(s.value));return Object.assign(new dr,n)},createNode:(t,e,n)=>dr.from(t,e,n)};function id({value:t,source:e},n){return e&&(t?od:ad).test.test(e)?e:t?n.options.trueStr:n.options.falseStr}const od={identify:t=>t===!0,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new H(!0),stringify:id},ad={identify:t=>t===!1,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/,resolve:()=>new H(!1),stringify:id},D_={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:pt},F_={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t.replace(/_/g,"")),stringify(t){const e=Number(t.value);return isFinite(e)?e.toExponential():pt(t)}},B_={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(t){const e=new H(parseFloat(t.replace(/_/g,""))),n=t.indexOf(".");if(n!==-1){const r=t.substring(n+1).replace(/_/g,"");r[r.length-1]==="0"&&(e.minFractionDigits=r.length)}return e},stringify:pt},ds=t=>typeof t=="bigint"||Number.isInteger(t);function qi(t,e,n,{intAsBigInt:r}){const s=t[0];if((s==="-"||s==="+")&&(e+=1),t=t.substring(e).replace(/_/g,""),r){switch(n){case 2:t=`0b${t}`;break;case 8:t=`0o${t}`;break;case 16:t=`0x${t}`;break}const o=BigInt(t);return s==="-"?BigInt(-1)*o:o}const i=parseInt(t,n);return s==="-"?-1*i:i}function Wa(t,e,n){const{value:r}=t;if(ds(r)){const s=r.toString(e);return r<0?"-"+n+s.substr(1):n+s}return pt(t)}const U_={identify:ds,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(t,e,n)=>qi(t,2,2,n),stringify:t=>Wa(t,2,"0b")},V_={identify:ds,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(t,e,n)=>qi(t,1,8,n),stringify:t=>Wa(t,8,"0")},Z_={identify:ds,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(t,e,n)=>qi(t,0,10,n),stringify:pt},W_={identify:ds,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(t,e,n)=>qi(t,2,16,n),stringify:t=>Wa(t,16,"0x")};class hr extends et{constructor(e){super(e),this.tag=hr.tag}add(e){let n;Ae(e)?n=e:e&&typeof e=="object"&&"key"in e&&"value"in e&&e.value===null?n=new Ze(e.key,null):n=new Ze(e,null),bn(this.items,n.key)||this.items.push(n)}get(e,n){const r=bn(this.items,e);return!n&&Ae(r)?pe(r.key)?r.key.value:r.key:r}set(e,n){if(typeof n!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof n}`);const r=bn(this.items,e);r&&!n?this.items.splice(this.items.indexOf(r),1):!r&&n&&this.items.push(new Ze(e))}toJSON(e,n){return super.toJSON(e,n,Set)}toString(e,n,r){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),n,r);throw new Error("Set items must all have null values")}static from(e,n,r){const{replacer:s}=r,i=new this(e);if(n&&Symbol.iterator in Object(n))for(let o of n)typeof s=="function"&&(o=s.call(n,o,o)),i.items.push(Da(o,null,r));return i}}hr.tag="tag:yaml.org,2002:set";const qa={collection:"map",identify:t=>t instanceof Set,nodeClass:hr,default:!1,tag:"tag:yaml.org,2002:set",createNode:(t,e,n)=>hr.from(t,e,n),resolve(t,e){if(us(t)){if(t.hasAllNullValues(!0))return Object.assign(new hr,t);e("Set items must all have null values")}else e("Expected a mapping for this tag");return t}};function Ga(t,e){const n=t[0],r=n==="-"||n==="+"?t.substring(1):t,s=o=>e?BigInt(o):Number(o),i=r.replace(/_/g,"").split(":").reduce((o,a)=>o*s(60)+s(a),s(0));return n==="-"?s(-1)*i:i}function ld(t){let{value:e}=t,n=o=>o;if(typeof e=="bigint")n=o=>BigInt(o);else if(isNaN(e)||!isFinite(e))return pt(t);let r="";e<0&&(r="-",e*=n(-1));const s=n(60),i=[e%s];return e<60?i.unshift(0):(e=(e-i[0])/s,i.unshift(e%s),e>=60&&(e=(e-i[0])/s,i.unshift(e))),r+i.map(o=>String(o).padStart(2,"0")).join(":").replace(/000000\d*$/,"")}const cd={identify:t=>typeof t=="bigint"||Number.isInteger(t),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(t,e,{intAsBigInt:n})=>Ga(t,n),stringify:ld},ud={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:t=>Ga(t,!1),stringify:ld},Gi={identify:t=>t instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(t){const e=t.match(Gi.test);if(!e)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");const[,n,r,s,i,o,a]=e.map(Number),l=e[7]?Number((e[7]+"00").substr(1,3)):0;let c=Date.UTC(n,r-1,s,i||0,o||0,a||0,l);const u=e[8];if(u&&u!=="Z"){let f=Ga(u,!1);Math.abs(f)<30&&(f*=60),c-=6e4*f}return new Date(c)},stringify:({value:t})=>t?.toISOString().replace(/(T00:00:00)?\.000Z$/,"")??""},lc=[Cr,jr,Vi,Zi,od,ad,U_,V_,Z_,W_,D_,F_,B_,Ua,Mt,Za,Va,qa,cd,ud,Gi],cc=new Map([["core",P_],["failsafe",[Cr,jr,Vi]],["json",L_],["yaml11",lc],["yaml-1.1",lc]]),uc={binary:Ua,bool:Fa,float:Qf,floatExp:Xf,floatNaN:Yf,floatTime:ud,int:td,intHex:nd,intOct:ed,intTime:cd,map:Cr,merge:Mt,null:Zi,omap:Za,pairs:Va,seq:jr,set:qa,timestamp:Gi},q_={"tag:yaml.org,2002:binary":Ua,"tag:yaml.org,2002:merge":Mt,"tag:yaml.org,2002:omap":Za,"tag:yaml.org,2002:pairs":Va,"tag:yaml.org,2002:set":qa,"tag:yaml.org,2002:timestamp":Gi};function bo(t,e,n){const r=cc.get(e);if(r&&!t)return n&&!r.includes(Mt)?r.concat(Mt):r.slice();let s=r;if(!s)if(Array.isArray(t))s=[];else{const i=Array.from(cc.keys()).filter(o=>o!=="yaml11").map(o=>JSON.stringify(o)).join(", ");throw new Error(`Unknown schema "${e}"; use one of ${i} or define customTags array`)}if(Array.isArray(t))for(const i of t)s=s.concat(i);else typeof t=="function"&&(s=t(s.slice()));return n&&(s=s.concat(Mt)),s.reduce((i,o)=>{const a=typeof o=="string"?uc[o]:o;if(!a){const l=JSON.stringify(o),c=Object.keys(uc).map(u=>JSON.stringify(u)).join(", ");throw new Error(`Unknown custom tag ${l}; use one of ${c}`)}return i.includes(a)||i.push(a),i},[])}const G_=(t,e)=>t.key<e.key?-1:t.key>e.key?1:0;class Ha{constructor({compat:e,customTags:n,merge:r,resolveKnownTags:s,schema:i,sortMapEntries:o,toStringDefaults:a}){this.compat=Array.isArray(e)?bo(e,"compat"):e?bo(null,e):null,this.name=typeof i=="string"&&i||"core",this.knownTags=s?q_:{},this.tags=bo(n,this.name,r),this.toStringOptions=a??null,Object.defineProperty(this,Jt,{value:Cr}),Object.defineProperty(this,xt,{value:Vi}),Object.defineProperty(this,Ar,{value:jr}),this.sortMapEntries=typeof o=="function"?o:o===!0?G_:null}clone(){const e=Object.create(Ha.prototype,Object.getOwnPropertyDescriptors(this));return e.tags=this.tags.slice(),e}}function H_(t,e){const n=[];let r=e.directives===!0;if(e.directives!==!1&&t.directives){const l=t.directives.toString(t);l?(n.push(l),r=!0):t.directives.docStart&&(r=!0)}r&&n.push("---");const s=Wf(t,e),{commentString:i}=s.options;if(t.commentBefore){n.length!==1&&n.unshift("");const l=i(t.commentBefore);n.unshift(Ct(l,""))}let o=!1,a=null;if(t.contents){if(Ne(t.contents)){if(t.contents.spaceBefore&&r&&n.push(""),t.contents.commentBefore){const u=i(t.contents.commentBefore);n.push(Ct(u,""))}s.forceBlockIndent=!!t.comment,a=t.contents.comment}const l=a?void 0:()=>o=!0;let c=vr(t.contents,s,()=>a=null,l);a&&(c+=yn(c,"",i(a))),(c[0]==="|"||c[0]===">")&&n[n.length-1]==="---"?n[n.length-1]=`--- ${c}`:n.push(c)}else n.push(vr(t.contents,s));if(t.directives?.docEnd)if(t.comment){const l=i(t.comment);l.includes(`
`)?(n.push("..."),n.push(Ct(l,""))):n.push(`... ${l}`)}else n.push("...");else{let l=t.comment;l&&o&&(l=l.replace(/^\n+/,"")),l&&((!o||a)&&n[n.length-1]!==""&&n.push(""),n.push(Ct(i(l),"")))}return n.join(`
`)+`
`}class Hi{constructor(e,n,r){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,st,{value:ta});let s=null;typeof n=="function"||Array.isArray(n)?s=n:r===void 0&&n&&(r=n,n=void 0);const i=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,stringKeys:!1,uniqueKeys:!0,version:"1.2"},r);this.options=i;let{version:o}=i;r?._directives?(this.directives=r._directives.atDocument(),this.directives.yaml.explicit&&(o=this.directives.yaml.version)):this.directives=new Be({version:o}),this.setSchema(o,r),this.contents=e===void 0?null:this.createNode(e,s,r)}clone(){const e=Object.create(Hi.prototype,{[st]:{value:ta}});return e.commentBefore=this.commentBefore,e.comment=this.comment,e.errors=this.errors.slice(),e.warnings=this.warnings.slice(),e.options=Object.assign({},this.options),this.directives&&(e.directives=this.directives.clone()),e.schema=this.schema.clone(),e.contents=Ne(this.contents)?this.contents.clone(e.schema):this.contents,this.range&&(e.range=this.range.slice()),e}add(e){Xn(this.contents)&&this.contents.add(e)}addIn(e,n){Xn(this.contents)&&this.contents.addIn(e,n)}createAlias(e,n){if(!e.anchor){const r=Ff(this);e.anchor=!n||r.has(n)?Bf(n||"a",r):n}return new za(e.anchor)}createNode(e,n,r){let s;if(typeof n=="function")e=n.call({"":e},"",e),s=n;else if(Array.isArray(n)){const w=E=>typeof E=="number"||E instanceof String||E instanceof Number,g=n.filter(w).map(String);g.length>0&&(n=n.concat(g)),s=n}else r===void 0&&n&&(r=n,n=void 0);const{aliasDuplicateObjects:i,anchorPrefix:o,flow:a,keepUndefined:l,onTagObj:c,tag:u}=r??{},{onAnchor:f,setAnchors:h,sourceObjects:p}=__(this,o||"a"),y={aliasDuplicateObjects:i??!0,keepUndefined:l??!1,onAnchor:f,onTagObj:c,replacer:s,schema:this.schema,sourceObjects:p},m=ts(e,u,y);return a&&Te(m)&&(m.flow=!0),h(),m}createPair(e,n,r={}){const s=this.createNode(e,null,r),i=this.createNode(n,null,r);return new Ze(s,i)}delete(e){return Xn(this.contents)?this.contents.delete(e):!1}deleteIn(e){return Dr(e)?this.contents==null?!1:(this.contents=null,!0):Xn(this.contents)?this.contents.deleteIn(e):!1}get(e,n){return Te(this.contents)?this.contents.get(e,n):void 0}getIn(e,n){return Dr(e)?!n&&pe(this.contents)?this.contents.value:this.contents:Te(this.contents)?this.contents.getIn(e,n):void 0}has(e){return Te(this.contents)?this.contents.has(e):!1}hasIn(e){return Dr(e)?this.contents!==void 0:Te(this.contents)?this.contents.hasIn(e):!1}set(e,n){this.contents==null?this.contents=gi(this.schema,[e],n):Xn(this.contents)&&this.contents.set(e,n)}setIn(e,n){Dr(e)?this.contents=n:this.contents==null?this.contents=gi(this.schema,Array.from(e),n):Xn(this.contents)&&this.contents.setIn(e,n)}setSchema(e,n={}){typeof e=="number"&&(e=String(e));let r;switch(e){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new Be({version:"1.1"}),r={resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=e:this.directives=new Be({version:e}),r={resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,r=null;break;default:{const s=JSON.stringify(e);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${s}`)}}if(n.schema instanceof Object)this.schema=n.schema;else if(r)this.schema=new Ha(Object.assign(r,n));else throw new Error("With a null YAML version, the { schema: Schema } option is required")}toJS({json:e,jsonArg:n,mapAsMap:r,maxAliasCount:s,onAnchor:i,reviver:o}={}){const a={anchors:new Map,doc:this,keep:!e,mapAsMap:r===!0,mapKeyWarned:!1,maxAliasCount:typeof s=="number"?s:100},l=rt(this.contents,n??"",a);if(typeof i=="function")for(const{count:c,res:u}of a.anchors.values())i(u,c);return typeof o=="function"?ir(o,{"":l},"",l):l}toJSON(e,n){return this.toJS({json:!0,jsonArg:e,mapAsMap:!1,onAnchor:n})}toString(e={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in e&&(!Number.isInteger(e.indent)||Number(e.indent)<=0)){const n=JSON.stringify(e.indent);throw new Error(`"indent" option must be a positive integer, not ${n}`)}return H_(this,e)}}function Xn(t){if(Te(t))return!0;throw new Error("Expected a YAML collection as document contents")}class fd extends Error{constructor(e,n,r,s){super(),this.name=e,this.code=r,this.message=s,this.pos=n}}class Fr extends fd{constructor(e,n,r){super("YAMLParseError",e,n,r)}}class K_ extends fd{constructor(e,n,r){super("YAMLWarning",e,n,r)}}const fc=(t,e)=>n=>{if(n.pos[0]===-1)return;n.linePos=n.pos.map(a=>e.linePos(a));const{line:r,col:s}=n.linePos[0];n.message+=` at line ${r}, column ${s}`;let i=s-1,o=t.substring(e.lineStarts[r-1],e.lineStarts[r]).replace(/[\n\r]+$/,"");if(i>=60&&o.length>80){const a=Math.min(i-39,o.length-79);o=""+o.substring(a),i-=a-1}if(o.length>80&&(o=o.substring(0,79)+""),r>1&&/^ *$/.test(o.substring(0,i))){let a=t.substring(e.lineStarts[r-2],e.lineStarts[r-1]);a.length>80&&(a=a.substring(0,79)+`
`),o=a+o}if(/[^ ]/.test(o)){let a=1;const l=n.linePos[1];l?.line===r&&l.col>s&&(a=Math.max(1,Math.min(l.col-s,80-i)));const c=" ".repeat(i)+"^".repeat(a);n.message+=`:

${o}
${c}
`}};function xr(t,{flow:e,indicator:n,next:r,offset:s,onError:i,parentIndent:o,startOnNewline:a}){let l=!1,c=a,u=a,f="",h="",p=!1,y=!1,m=null,w=null,g=null,E=null,v=null,S=null,_=null;for(const x of t)switch(y&&(x.type!=="space"&&x.type!=="newline"&&x.type!=="comma"&&i(x.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),y=!1),m&&(c&&x.type!=="comment"&&x.type!=="newline"&&i(m,"TAB_AS_INDENT","Tabs are not allowed as indentation"),m=null),x.type){case"space":!e&&(n!=="doc-start"||r?.type!=="flow-collection")&&x.source.includes("	")&&(m=x),u=!0;break;case"comment":{u||i(x,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const k=x.source.substring(1)||" ";f?f+=h+k:f=k,h="",c=!1;break}case"newline":c?f?f+=x.source:(!S||n!=="seq-item-ind")&&(l=!0):h+=x.source,c=!0,p=!0,(w||g)&&(E=x),u=!0;break;case"anchor":w&&i(x,"MULTIPLE_ANCHORS","A node can have at most one anchor"),x.source.endsWith(":")&&i(x.offset+x.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",!0),w=x,_??(_=x.offset),c=!1,u=!1,y=!0;break;case"tag":{g&&i(x,"MULTIPLE_TAGS","A node can have at most one tag"),g=x,_??(_=x.offset),c=!1,u=!1,y=!0;break}case n:(w||g)&&i(x,"BAD_PROP_ORDER",`Anchors and tags must be after the ${x.source} indicator`),S&&i(x,"UNEXPECTED_TOKEN",`Unexpected ${x.source} in ${e??"collection"}`),S=x,c=n==="seq-item-ind"||n==="explicit-key-ind",u=!1;break;case"comma":if(e){v&&i(x,"UNEXPECTED_TOKEN",`Unexpected , in ${e}`),v=x,c=!1,u=!1;break}default:i(x,"UNEXPECTED_TOKEN",`Unexpected ${x.type} token`),c=!1,u=!1}const O=t[t.length-1],b=O?O.offset+O.source.length:s;return y&&r&&r.type!=="space"&&r.type!=="newline"&&r.type!=="comma"&&(r.type!=="scalar"||r.source!=="")&&i(r.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),m&&(c&&m.indent<=o||r?.type==="block-map"||r?.type==="block-seq")&&i(m,"TAB_AS_INDENT","Tabs are not allowed as indentation"),{comma:v,found:S,spaceBefore:l,comment:f,hasNewline:p,anchor:w,tag:g,newlineAfterProp:E,end:b,start:_??b}}function ns(t){if(!t)return null;switch(t.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(t.source.includes(`
`))return!0;if(t.end){for(const e of t.end)if(e.type==="newline")return!0}return!1;case"flow-collection":for(const e of t.items){for(const n of e.start)if(n.type==="newline")return!0;if(e.sep){for(const n of e.sep)if(n.type==="newline")return!0}if(ns(e.key)||ns(e.value))return!0}return!1;default:return!0}}function ia(t,e,n){if(e?.type==="flow-collection"){const r=e.end[0];r.indent===t&&(r.source==="]"||r.source==="}")&&ns(e)&&n(r,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}function dd(t,e,n){const{uniqueKeys:r}=t.options;if(r===!1)return!1;const s=typeof r=="function"?r:(i,o)=>i===o||pe(i)&&pe(o)&&i.value===o.value;return e.some(i=>s(i.key,n))}const dc="All mapping items must start at the same column";function Y_({composeNode:t,composeEmptyNode:e},n,r,s,i){const o=i?.nodeClass??et,a=new o(n.schema);n.atRoot&&(n.atRoot=!1);let l=r.offset,c=null;for(const u of r.items){const{start:f,key:h,sep:p,value:y}=u,m=xr(f,{indicator:"explicit-key-ind",next:h??p?.[0],offset:l,onError:s,parentIndent:r.indent,startOnNewline:!0}),w=!m.found;if(w){if(h&&(h.type==="block-seq"?s(l,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in h&&h.indent!==r.indent&&s(l,"BAD_INDENT",dc)),!m.anchor&&!m.tag&&!p){c=m.end,m.comment&&(a.comment?a.comment+=`
`+m.comment:a.comment=m.comment);continue}(m.newlineAfterProp||ns(h))&&s(h??f[f.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}else m.found?.indent!==r.indent&&s(l,"BAD_INDENT",dc);n.atKey=!0;const g=m.end,E=h?t(n,h,m,s):e(n,g,f,null,m,s);n.schema.compat&&ia(r.indent,h,s),n.atKey=!1,dd(n,a.items,E)&&s(g,"DUPLICATE_KEY","Map keys must be unique");const v=xr(p??[],{indicator:"map-value-ind",next:y,offset:E.range[2],onError:s,parentIndent:r.indent,startOnNewline:!h||h.type==="block-scalar"});if(l=v.end,v.found){w&&(y?.type==="block-map"&&!v.hasNewline&&s(l,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),n.options.strict&&m.start<v.found.offset-1024&&s(E.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));const S=y?t(n,y,v,s):e(n,l,p,null,v,s);n.schema.compat&&ia(r.indent,y,s),l=S.range[2];const _=new Ze(E,S);n.options.keepSourceTokens&&(_.srcToken=u),a.items.push(_)}else{w&&s(E.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),v.comment&&(E.comment?E.comment+=`
`+v.comment:E.comment=v.comment);const S=new Ze(E);n.options.keepSourceTokens&&(S.srcToken=u),a.items.push(S)}}return c&&c<l&&s(c,"IMPOSSIBLE","Map comment with trailing content"),a.range=[r.offset,l,c??l],a}function X_({composeNode:t,composeEmptyNode:e},n,r,s,i){const o=i?.nodeClass??An,a=new o(n.schema);n.atRoot&&(n.atRoot=!1),n.atKey&&(n.atKey=!1);let l=r.offset,c=null;for(const{start:u,value:f}of r.items){const h=xr(u,{indicator:"seq-item-ind",next:f,offset:l,onError:s,parentIndent:r.indent,startOnNewline:!0});if(!h.found)if(h.anchor||h.tag||f)f?.type==="block-seq"?s(h.end,"BAD_INDENT","All sequence items must start at the same column"):s(l,"MISSING_CHAR","Sequence item without - indicator");else{c=h.end,h.comment&&(a.comment=h.comment);continue}const p=f?t(n,f,h,s):e(n,h.end,u,null,h,s);n.schema.compat&&ia(r.indent,f,s),l=p.range[2],a.items.push(p)}return a.range=[r.offset,l,c??l],a}function hs(t,e,n,r){let s="";if(t){let i=!1,o="";for(const a of t){const{source:l,type:c}=a;switch(c){case"space":i=!0;break;case"comment":{n&&!i&&r(a,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const u=l.substring(1)||" ";s?s+=o+u:s=u,o="";break}case"newline":s&&(o+=l),i=!0;break;default:r(a,"UNEXPECTED_TOKEN",`Unexpected ${c} at node end`)}e+=l.length}}return{comment:s,offset:e}}const wo="Block collections are not allowed within flow collections",vo=t=>t&&(t.type==="block-map"||t.type==="block-seq");function Q_({composeNode:t,composeEmptyNode:e},n,r,s,i){const o=r.start.source==="{",a=o?"flow map":"flow sequence",l=i?.nodeClass??(o?et:An),c=new l(n.schema);c.flow=!0;const u=n.atRoot;u&&(n.atRoot=!1),n.atKey&&(n.atKey=!1);let f=r.offset+r.start.source.length;for(let w=0;w<r.items.length;++w){const g=r.items[w],{start:E,key:v,sep:S,value:_}=g,O=xr(E,{flow:a,indicator:"explicit-key-ind",next:v??S?.[0],offset:f,onError:s,parentIndent:r.indent,startOnNewline:!1});if(!O.found){if(!O.anchor&&!O.tag&&!S&&!_){w===0&&O.comma?s(O.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${a}`):w<r.items.length-1&&s(O.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${a}`),O.comment&&(c.comment?c.comment+=`
`+O.comment:c.comment=O.comment),f=O.end;continue}!o&&n.options.strict&&ns(v)&&s(v,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(w===0)O.comma&&s(O.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${a}`);else if(O.comma||s(O.start,"MISSING_CHAR",`Missing , between ${a} items`),O.comment){let b="";e:for(const x of E)switch(x.type){case"comma":case"space":break;case"comment":b=x.source.substring(1);break e;default:break e}if(b){let x=c.items[c.items.length-1];Ae(x)&&(x=x.value??x.key),x.comment?x.comment+=`
`+b:x.comment=b,O.comment=O.comment.substring(b.length+1)}}if(!o&&!S&&!O.found){const b=_?t(n,_,O,s):e(n,O.end,S,null,O,s);c.items.push(b),f=b.range[2],vo(_)&&s(b.range,"BLOCK_IN_FLOW",wo)}else{n.atKey=!0;const b=O.end,x=v?t(n,v,O,s):e(n,b,E,null,O,s);vo(v)&&s(x.range,"BLOCK_IN_FLOW",wo),n.atKey=!1;const k=xr(S??[],{flow:a,indicator:"map-value-ind",next:_,offset:x.range[2],onError:s,parentIndent:r.indent,startOnNewline:!1});if(k.found){if(!o&&!O.found&&n.options.strict){if(S)for(const A of S){if(A===k.found)break;if(A.type==="newline"){s(A,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}O.start<k.found.offset-1024&&s(k.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else _&&("source"in _&&_.source?.[0]===":"?s(_,"MISSING_CHAR",`Missing space after : in ${a}`):s(k.start,"MISSING_CHAR",`Missing , or : between ${a} items`));const N=_?t(n,_,k,s):k.found?e(n,k.end,S,null,k,s):null;N?vo(_)&&s(N.range,"BLOCK_IN_FLOW",wo):k.comment&&(x.comment?x.comment+=`
`+k.comment:x.comment=k.comment);const T=new Ze(x,N);if(n.options.keepSourceTokens&&(T.srcToken=g),o){const A=c;dd(n,A.items,x)&&s(b,"DUPLICATE_KEY","Map keys must be unique"),A.items.push(T)}else{const A=new et(n.schema);A.flow=!0,A.items.push(T);const C=(N??x).range;A.range=[x.range[0],C[1],C[2]],c.items.push(A)}f=N?N.range[2]:k.end}}const h=o?"}":"]",[p,...y]=r.end;let m=f;if(p?.source===h)m=p.offset+p.source.length;else{const w=a[0].toUpperCase()+a.substring(1),g=u?`${w} must end with a ${h}`:`${w} in block collection must be sufficiently indented and end with a ${h}`;s(f,u?"MISSING_CHAR":"BAD_INDENT",g),p&&p.source.length!==1&&y.unshift(p)}if(y.length>0){const w=hs(y,m,n.options.strict,s);w.comment&&(c.comment?c.comment+=`
`+w.comment:c.comment=w.comment),c.range=[r.offset,m,w.offset]}else c.range=[r.offset,m,m];return c}function xo(t,e,n,r,s,i){const o=n.type==="block-map"?Y_(t,e,n,r,i):n.type==="block-seq"?X_(t,e,n,r,i):Q_(t,e,n,r,i),a=o.constructor;return s==="!"||s===a.tagName?(o.tag=a.tagName,o):(s&&(o.tag=s),o)}function J_(t,e,n,r,s){const i=r.tag,o=i?e.directives.tagName(i.source,h=>s(i,"TAG_RESOLVE_FAILED",h)):null;if(n.type==="block-seq"){const{anchor:h,newlineAfterProp:p}=r,y=h&&i?h.offset>i.offset?h:i:h??i;y&&(!p||p.offset<y.offset)&&s(y,"MISSING_CHAR","Missing newline after block sequence props")}const a=n.type==="block-map"?"map":n.type==="block-seq"?"seq":n.start.source==="{"?"map":"seq";if(!i||!o||o==="!"||o===et.tagName&&a==="map"||o===An.tagName&&a==="seq")return xo(t,e,n,s,o);let l=e.schema.tags.find(h=>h.tag===o&&h.collection===a);if(!l){const h=e.schema.knownTags[o];if(h?.collection===a)e.schema.tags.push(Object.assign({},h,{default:!1})),l=h;else return h?s(i,"BAD_COLLECTION_TYPE",`${h.tag} used for ${a} collection, but expects ${h.collection??"scalar"}`,!0):s(i,"TAG_RESOLVE_FAILED",`Unresolved tag: ${o}`,!0),xo(t,e,n,s,o)}const c=xo(t,e,n,s,o,l),u=l.resolve?.(c,h=>s(i,"TAG_RESOLVE_FAILED",h),e.options)??c,f=Ne(u)?u:new H(u);return f.range=c.range,f.tag=o,l?.format&&(f.format=l.format),f}function eS(t,e,n){const r=e.offset,s=tS(e,t.options.strict,n);if(!s)return{value:"",type:null,comment:"",range:[r,r,r]};const i=s.mode===">"?H.BLOCK_FOLDED:H.BLOCK_LITERAL,o=e.source?nS(e.source):[];let a=o.length;for(let m=o.length-1;m>=0;--m){const w=o[m][1];if(w===""||w==="\r")a=m;else break}if(a===0){const m=s.chomp==="+"&&o.length>0?`
`.repeat(Math.max(1,o.length-1)):"";let w=r+s.length;return e.source&&(w+=e.source.length),{value:m,type:i,comment:s.comment,range:[r,w,w]}}let l=e.indent+s.indent,c=e.offset+s.length,u=0;for(let m=0;m<a;++m){const[w,g]=o[m];if(g===""||g==="\r")s.indent===0&&w.length>l&&(l=w.length);else{w.length<l&&n(c+w.length,"MISSING_CHAR","Block scalars with more-indented leading empty lines must use an explicit indentation indicator"),s.indent===0&&(l=w.length),u=m,l===0&&!t.atRoot&&n(c,"BAD_INDENT","Block scalar values in collections must be indented");break}c+=w.length+g.length+1}for(let m=o.length-1;m>=a;--m)o[m][0].length>l&&(a=m+1);let f="",h="",p=!1;for(let m=0;m<u;++m)f+=o[m][0].slice(l)+`
`;for(let m=u;m<a;++m){let[w,g]=o[m];c+=w.length+g.length+1;const E=g[g.length-1]==="\r";if(E&&(g=g.slice(0,-1)),g&&w.length<l){const S=`Block scalar lines must not be less indented than their ${s.indent?"explicit indentation indicator":"first line"}`;n(c-g.length-(E?2:1),"BAD_INDENT",S),w=""}i===H.BLOCK_LITERAL?(f+=h+w.slice(l)+g,h=`
`):w.length>l||g[0]==="	"?(h===" "?h=`
`:!p&&h===`
`&&(h=`

`),f+=h+w.slice(l)+g,h=`
`,p=!0):g===""?h===`
`?f+=`
`:h=`
`:(f+=h+g,h=" ",p=!1)}switch(s.chomp){case"-":break;case"+":for(let m=a;m<o.length;++m)f+=`
`+o[m][0].slice(l);f[f.length-1]!==`
`&&(f+=`
`);break;default:f+=`
`}const y=r+s.length+e.source.length;return{value:f,type:i,comment:s.comment,range:[r,y,y]}}function tS({offset:t,props:e},n,r){if(e[0].type!=="block-scalar-header")return r(e[0],"IMPOSSIBLE","Block scalar header not found"),null;const{source:s}=e[0],i=s[0];let o=0,a="",l=-1;for(let h=1;h<s.length;++h){const p=s[h];if(!a&&(p==="-"||p==="+"))a=p;else{const y=Number(p);!o&&y?o=y:l===-1&&(l=t+h)}}l!==-1&&r(l,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${s}`);let c=!1,u="",f=s.length;for(let h=1;h<e.length;++h){const p=e[h];switch(p.type){case"space":c=!0;case"newline":f+=p.source.length;break;case"comment":n&&!c&&r(p,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),f+=p.source.length,u=p.source.substring(1);break;case"error":r(p,"UNEXPECTED_TOKEN",p.message),f+=p.source.length;break;default:{const y=`Unexpected token in block scalar header: ${p.type}`;r(p,"UNEXPECTED_TOKEN",y);const m=p.source;m&&typeof m=="string"&&(f+=m.length)}}}return{mode:i,indent:o,chomp:a,comment:u,length:f}}function nS(t){const e=t.split(/\n( *)/),n=e[0],r=n.match(/^( *)/),i=[r?.[1]?[r[1],n.slice(r[1].length)]:["",n]];for(let o=1;o<e.length;o+=2)i.push([e[o],e[o+1]]);return i}function rS(t,e,n){const{offset:r,type:s,source:i,end:o}=t;let a,l;const c=(h,p,y)=>n(r+h,p,y);switch(s){case"scalar":a=H.PLAIN,l=sS(i,c);break;case"single-quoted-scalar":a=H.QUOTE_SINGLE,l=iS(i,c);break;case"double-quoted-scalar":a=H.QUOTE_DOUBLE,l=oS(i,c);break;default:return n(t,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${s}`),{value:"",type:null,comment:"",range:[r,r+i.length,r+i.length]}}const u=r+i.length,f=hs(o,u,e,n);return{value:l,type:a,comment:f.comment,range:[r,u,f.offset]}}function sS(t,e){let n="";switch(t[0]){case"	":n="a tab character";break;case",":n="flow indicator character ,";break;case"%":n="directive indicator character %";break;case"|":case">":{n=`block scalar indicator ${t[0]}`;break}case"@":case"`":{n=`reserved character ${t[0]}`;break}}return n&&e(0,"BAD_SCALAR_START",`Plain value cannot start with ${n}`),hd(t)}function iS(t,e){return(t[t.length-1]!=="'"||t.length===1)&&e(t.length,"MISSING_CHAR","Missing closing 'quote"),hd(t.slice(1,-1)).replace(/''/g,"'")}function hd(t){let e,n;try{e=new RegExp(`(.*?)(?<![ 	])[ 	]*\r?
`,"sy"),n=new RegExp(`[ 	]*(.*?)(?:(?<![ 	])[ 	]*)?\r?
`,"sy")}catch{e=/(.*?)[ \t]*\r?\n/sy,n=/[ \t]*(.*?)[ \t]*\r?\n/sy}let r=e.exec(t);if(!r)return t;let s=r[1],i=" ",o=e.lastIndex;for(n.lastIndex=o;r=n.exec(t);)r[1]===""?i===`
`?s+=i:i=`
`:(s+=i+r[1],i=" "),o=n.lastIndex;const a=/[ \t]*(.*)/sy;return a.lastIndex=o,r=a.exec(t),s+i+(r?.[1]??"")}function oS(t,e){let n="";for(let r=1;r<t.length-1;++r){const s=t[r];if(!(s==="\r"&&t[r+1]===`
`))if(s===`
`){const{fold:i,offset:o}=aS(t,r);n+=i,r=o}else if(s==="\\"){let i=t[++r];const o=lS[i];if(o)n+=o;else if(i===`
`)for(i=t[r+1];i===" "||i==="	";)i=t[++r+1];else if(i==="\r"&&t[r+1]===`
`)for(i=t[++r+1];i===" "||i==="	";)i=t[++r+1];else if(i==="x"||i==="u"||i==="U"){const a={x:2,u:4,U:8}[i];n+=cS(t,r+1,a,e),r+=a}else{const a=t.substr(r-1,2);e(r-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${a}`),n+=a}}else if(s===" "||s==="	"){const i=r;let o=t[r+1];for(;o===" "||o==="	";)o=t[++r+1];o!==`
`&&!(o==="\r"&&t[r+2]===`
`)&&(n+=r>i?t.slice(i,r+1):s)}else n+=s}return(t[t.length-1]!=='"'||t.length===1)&&e(t.length,"MISSING_CHAR",'Missing closing "quote'),n}function aS(t,e){let n="",r=t[e+1];for(;(r===" "||r==="	"||r===`
`||r==="\r")&&!(r==="\r"&&t[e+2]!==`
`);)r===`
`&&(n+=`
`),e+=1,r=t[e+1];return n||(n=" "),{fold:n,offset:e}}const lS={0:"\0",a:"\x07",b:"\b",e:"\x1B",f:"\f",n:`
`,r:"\r",t:"	",v:"\v",N:"",_:"",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","	":"	"};function cS(t,e,n,r){const s=t.substr(e,n),o=s.length===n&&/^[0-9a-fA-F]+$/.test(s)?parseInt(s,16):NaN;if(isNaN(o)){const a=t.substr(e-2,n+2);return r(e-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${a}`),a}return String.fromCodePoint(o)}function pd(t,e,n,r){const{value:s,type:i,comment:o,range:a}=e.type==="block-scalar"?eS(t,e,r):rS(e,t.options.strict,r),l=n?t.directives.tagName(n.source,f=>r(n,"TAG_RESOLVE_FAILED",f)):null;let c;t.options.stringKeys&&t.atKey?c=t.schema[xt]:l?c=uS(t.schema,s,l,n,r):e.type==="scalar"?c=fS(t,s,e,r):c=t.schema[xt];let u;try{const f=c.resolve(s,h=>r(n??e,"TAG_RESOLVE_FAILED",h),t.options);u=pe(f)?f:new H(f)}catch(f){const h=f instanceof Error?f.message:String(f);r(n??e,"TAG_RESOLVE_FAILED",h),u=new H(s)}return u.range=a,u.source=s,i&&(u.type=i),l&&(u.tag=l),c.format&&(u.format=c.format),o&&(u.comment=o),u}function uS(t,e,n,r,s){if(n==="!")return t[xt];const i=[];for(const a of t.tags)if(!a.collection&&a.tag===n)if(a.default&&a.test)i.push(a);else return a;for(const a of i)if(a.test?.test(e))return a;const o=t.knownTags[n];return o&&!o.collection?(t.tags.push(Object.assign({},o,{default:!1,test:void 0})),o):(s(r,"TAG_RESOLVE_FAILED",`Unresolved tag: ${n}`,n!=="tag:yaml.org,2002:str"),t[xt])}function fS({atKey:t,directives:e,schema:n},r,s,i){const o=n.tags.find(a=>(a.default===!0||t&&a.default==="key")&&a.test?.test(r))||n[xt];if(n.compat){const a=n.compat.find(l=>l.default&&l.test?.test(r))??n[xt];if(o.tag!==a.tag){const l=e.tagString(o.tag),c=e.tagString(a.tag),u=`Value may be parsed as either ${l} or ${c}`;i(s,"TAG_RESOLVE_FAILED",u,!0)}}return o}function dS(t,e,n){if(e){n??(n=e.length);for(let r=n-1;r>=0;--r){let s=e[r];switch(s.type){case"space":case"comment":case"newline":t-=s.source.length;continue}for(s=e[++r];s?.type==="space";)t+=s.source.length,s=e[++r];break}}return t}const hS={composeNode:md,composeEmptyNode:Ka};function md(t,e,n,r){const s=t.atKey,{spaceBefore:i,comment:o,anchor:a,tag:l}=n;let c,u=!0;switch(e.type){case"alias":c=pS(t,e,r),(a||l)&&r(e,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":c=pd(t,e,l,r),a&&(c.anchor=a.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":c=J_(hS,t,e,n,r),a&&(c.anchor=a.source.substring(1));break;default:{const f=e.type==="error"?e.message:`Unsupported token (type: ${e.type})`;r(e,"UNEXPECTED_TOKEN",f),c=Ka(t,e.offset,void 0,null,n,r),u=!1}}return a&&c.anchor===""&&r(a,"BAD_ALIAS","Anchor cannot be an empty string"),s&&t.options.stringKeys&&(!pe(c)||typeof c.value!="string"||c.tag&&c.tag!=="tag:yaml.org,2002:str")&&r(l??e,"NON_STRING_KEY","With stringKeys, all keys must be strings"),i&&(c.spaceBefore=!0),o&&(e.type==="scalar"&&e.source===""?c.comment=o:c.commentBefore=o),t.options.keepSourceTokens&&u&&(c.srcToken=e),c}function Ka(t,e,n,r,{spaceBefore:s,comment:i,anchor:o,tag:a,end:l},c){const u={type:"scalar",offset:dS(e,n,r),indent:-1,source:""},f=pd(t,u,a,c);return o&&(f.anchor=o.source.substring(1),f.anchor===""&&c(o,"BAD_ALIAS","Anchor cannot be an empty string")),s&&(f.spaceBefore=!0),i&&(f.comment=i,f.range[2]=l),f}function pS({options:t},{offset:e,source:n,end:r},s){const i=new za(n.substring(1));i.source===""&&s(e,"BAD_ALIAS","Alias cannot be an empty string"),i.source.endsWith(":")&&s(e+n.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",!0);const o=e+n.length,a=hs(r,o,t.strict,s);return i.range=[e,o,a.offset],a.comment&&(i.comment=a.comment),i}function mS(t,e,{offset:n,start:r,value:s,end:i},o){const a=Object.assign({_directives:e},t),l=new Hi(void 0,a),c={atKey:!1,atRoot:!0,directives:l.directives,options:l.options,schema:l.schema},u=xr(r,{indicator:"doc-start",next:s??i?.[0],offset:n,onError:o,parentIndent:0,startOnNewline:!0});u.found&&(l.directives.docStart=!0,s&&(s.type==="block-map"||s.type==="block-seq")&&!u.hasNewline&&o(u.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),l.contents=s?md(c,s,u,o):Ka(c,u.end,r,null,u,o);const f=l.contents.range[2],h=hs(i,f,!1,o);return h.comment&&(l.comment=h.comment),l.range=[n,f,h.offset],l}function zr(t){if(typeof t=="number")return[t,t+1];if(Array.isArray(t))return t.length===2?t:[t[0],t[1]];const{offset:e,source:n}=t;return[e,e+(typeof n=="string"?n.length:1)]}function hc(t){let e="",n=!1,r=!1;for(let s=0;s<t.length;++s){const i=t[s];switch(i[0]){case"#":e+=(e===""?"":r?`

`:`
`)+(i.substring(1)||" "),n=!0,r=!1;break;case"%":t[s+1]?.[0]!=="#"&&(s+=1),n=!1;break;default:n||(r=!0),n=!1}}return{comment:e,afterEmptyLine:r}}class gS{constructor(e={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(n,r,s,i)=>{const o=zr(n);i?this.warnings.push(new K_(o,r,s)):this.errors.push(new Fr(o,r,s))},this.directives=new Be({version:e.version||"1.2"}),this.options=e}decorate(e,n){const{comment:r,afterEmptyLine:s}=hc(this.prelude);if(r){const i=e.contents;if(n)e.comment=e.comment?`${e.comment}
${r}`:r;else if(s||e.directives.docStart||!i)e.commentBefore=r;else if(Te(i)&&!i.flow&&i.items.length>0){let o=i.items[0];Ae(o)&&(o=o.key);const a=o.commentBefore;o.commentBefore=a?`${r}
${a}`:r}else{const o=i.commentBefore;i.commentBefore=o?`${r}
${o}`:r}}n?(Array.prototype.push.apply(e.errors,this.errors),Array.prototype.push.apply(e.warnings,this.warnings)):(e.errors=this.errors,e.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:hc(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(e,n=!1,r=-1){for(const s of e)yield*this.next(s);yield*this.end(n,r)}*next(e){switch(e.type){case"directive":this.directives.add(e.source,(n,r,s)=>{const i=zr(e);i[0]+=n,this.onError(i,"BAD_DIRECTIVE",r,s)}),this.prelude.push(e.source),this.atDirectives=!0;break;case"document":{const n=mS(this.options,this.directives,e,this.onError);this.atDirectives&&!n.directives.docStart&&this.onError(e,"MISSING_CHAR","Missing directives-end/doc-start indicator line"),this.decorate(n,!1),this.doc&&(yield this.doc),this.doc=n,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(e.source);break;case"error":{const n=e.source?`${e.message}: ${JSON.stringify(e.source)}`:e.message,r=new Fr(zr(e),"UNEXPECTED_TOKEN",n);this.atDirectives||!this.doc?this.errors.push(r):this.doc.errors.push(r);break}case"doc-end":{if(!this.doc){const r="Unexpected doc-end without preceding document";this.errors.push(new Fr(zr(e),"UNEXPECTED_TOKEN",r));break}this.doc.directives.docEnd=!0;const n=hs(e.end,e.offset+e.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),n.comment){const r=this.doc.comment;this.doc.comment=r?`${r}
${n.comment}`:n.comment}this.doc.range[2]=n.offset;break}default:this.errors.push(new Fr(zr(e),"UNEXPECTED_TOKEN",`Unsupported token ${e.type}`))}}*end(e=!1,n=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(e){const r=Object.assign({_directives:this.directives},this.options),s=new Hi(void 0,r);this.atDirectives&&this.onError(n,"MISSING_CHAR","Missing directives-end indicator line"),s.range=[0,n,n],this.decorate(s,!1),yield s}}}const gd="\uFEFF",yd="",bd="",oa="";function yS(t){switch(t){case gd:return"byte-order-mark";case yd:return"doc-mode";case bd:return"flow-error-end";case oa:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case`
`:case`\r
`:return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(t[0]){case" ":case"	":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}function ut(t){switch(t){case void 0:case" ":case`
`:case"\r":case"	":return!0;default:return!1}}const pc=new Set("0123456789ABCDEFabcdef"),bS=new Set("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()"),Bs=new Set(",[]{}"),wS=new Set(` ,[]{}
\r	`),_o=t=>!t||wS.has(t);class vS{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(e,n=!1){if(e){if(typeof e!="string")throw TypeError("source is not a string");this.buffer=this.buffer?this.buffer+e:e,this.lineEndPos=null}this.atEnd=!n;let r=this.next??"stream";for(;r&&(n||this.hasChars(1));)r=yield*this.parseNext(r)}atLineEnd(){let e=this.pos,n=this.buffer[e];for(;n===" "||n==="	";)n=this.buffer[++e];return!n||n==="#"||n===`
`?!0:n==="\r"?this.buffer[e+1]===`
`:!1}charAt(e){return this.buffer[this.pos+e]}continueScalar(e){let n=this.buffer[e];if(this.indentNext>0){let r=0;for(;n===" ";)n=this.buffer[++r+e];if(n==="\r"){const s=this.buffer[r+e+1];if(s===`
`||!s&&!this.atEnd)return e+r+1}return n===`
`||r>=this.indentNext||!n&&!this.atEnd?e+r:-1}if(n==="-"||n==="."){const r=this.buffer.substr(e,3);if((r==="---"||r==="...")&&ut(this.buffer[e+3]))return-1}return e}getLine(){let e=this.lineEndPos;return(typeof e!="number"||e!==-1&&e<this.pos)&&(e=this.buffer.indexOf(`
`,this.pos),this.lineEndPos=e),e===-1?this.atEnd?this.buffer.substring(this.pos):null:(this.buffer[e-1]==="\r"&&(e-=1),this.buffer.substring(this.pos,e))}hasChars(e){return this.pos+e<=this.buffer.length}setNext(e){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=e,null}peek(e){return this.buffer.substr(this.pos,e)}*parseNext(e){switch(e){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let e=this.getLine();if(e===null)return this.setNext("stream");if(e[0]===gd&&(yield*this.pushCount(1),e=e.substring(1)),e[0]==="%"){let n=e.length,r=e.indexOf("#");for(;r!==-1;){const i=e[r-1];if(i===" "||i==="	"){n=r-1;break}else r=e.indexOf("#",r+1)}for(;;){const i=e[n-1];if(i===" "||i==="	")n-=1;else break}const s=(yield*this.pushCount(n))+(yield*this.pushSpaces(!0));return yield*this.pushCount(e.length-s),this.pushNewline(),"stream"}if(this.atLineEnd()){const n=yield*this.pushSpaces(!0);return yield*this.pushCount(e.length-n),yield*this.pushNewline(),"stream"}return yield yd,yield*this.parseLineStart()}*parseLineStart(){const e=this.charAt(0);if(!e&&!this.atEnd)return this.setNext("line-start");if(e==="-"||e==="."){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");const n=this.peek(3);if((n==="---"||n==="...")&&ut(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,n==="---"?"doc":"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!ut(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){const[e,n]=this.peek(2);if(!n&&!this.atEnd)return this.setNext("block-start");if((e==="-"||e==="?"||e===":")&&ut(n)){const r=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=r,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);const e=this.getLine();if(e===null)return this.setNext("doc");let n=yield*this.pushIndicators();switch(e[n]){case"#":yield*this.pushCount(e.length-n);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(_o),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return n+=yield*this.parseBlockScalarHeader(),n+=yield*this.pushSpaces(!0),yield*this.pushCount(e.length-n),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let e,n,r=-1;do e=yield*this.pushNewline(),e>0?(n=yield*this.pushSpaces(!1),this.indentValue=r=n):n=0,n+=yield*this.pushSpaces(!0);while(e+n>0);const s=this.getLine();if(s===null)return this.setNext("flow");if((r!==-1&&r<this.indentNext&&s[0]!=="#"||r===0&&(s.startsWith("---")||s.startsWith("..."))&&ut(s[3]))&&!(r===this.indentNext-1&&this.flowLevel===1&&(s[0]==="]"||s[0]==="}")))return this.flowLevel=0,yield bd,yield*this.parseLineStart();let i=0;for(;s[i]===",";)i+=yield*this.pushCount(1),i+=yield*this.pushSpaces(!0),this.flowKey=!1;switch(i+=yield*this.pushIndicators(),s[i]){case void 0:return"flow";case"#":return yield*this.pushCount(s.length-i),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(_o),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{const o=this.charAt(1);if(this.flowKey||ut(o)||o===",")return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){const e=this.charAt(0);let n=this.buffer.indexOf(e,this.pos+1);if(e==="'")for(;n!==-1&&this.buffer[n+1]==="'";)n=this.buffer.indexOf("'",n+2);else for(;n!==-1;){let i=0;for(;this.buffer[n-1-i]==="\\";)i+=1;if(i%2===0)break;n=this.buffer.indexOf('"',n+1)}const r=this.buffer.substring(0,n);let s=r.indexOf(`
`,this.pos);if(s!==-1){for(;s!==-1;){const i=this.continueScalar(s+1);if(i===-1)break;s=r.indexOf(`
`,i)}s!==-1&&(n=s-(r[s-1]==="\r"?2:1))}if(n===-1){if(!this.atEnd)return this.setNext("quoted-scalar");n=this.buffer.length}return yield*this.pushToIndex(n+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let e=this.pos;for(;;){const n=this.buffer[++e];if(n==="+")this.blockScalarKeep=!0;else if(n>"0"&&n<="9")this.blockScalarIndent=Number(n)-1;else if(n!=="-")break}return yield*this.pushUntil(n=>ut(n)||n==="#")}*parseBlockScalar(){let e=this.pos-1,n=0,r;e:for(let i=this.pos;r=this.buffer[i];++i)switch(r){case" ":n+=1;break;case`
`:e=i,n=0;break;case"\r":{const o=this.buffer[i+1];if(!o&&!this.atEnd)return this.setNext("block-scalar");if(o===`
`)break}default:break e}if(!r&&!this.atEnd)return this.setNext("block-scalar");if(n>=this.indentNext){this.blockScalarIndent===-1?this.indentNext=n:this.indentNext=this.blockScalarIndent+(this.indentNext===0?1:this.indentNext);do{const i=this.continueScalar(e+1);if(i===-1)break;e=this.buffer.indexOf(`
`,i)}while(e!==-1);if(e===-1){if(!this.atEnd)return this.setNext("block-scalar");e=this.buffer.length}}let s=e+1;for(r=this.buffer[s];r===" ";)r=this.buffer[++s];if(r==="	"){for(;r==="	"||r===" "||r==="\r"||r===`
`;)r=this.buffer[++s];e=s-1}else if(!this.blockScalarKeep)do{let i=e-1,o=this.buffer[i];o==="\r"&&(o=this.buffer[--i]);const a=i;for(;o===" ";)o=this.buffer[--i];if(o===`
`&&i>=this.pos&&i+1+n>a)e=i;else break}while(!0);return yield oa,yield*this.pushToIndex(e+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){const e=this.flowLevel>0;let n=this.pos-1,r=this.pos-1,s;for(;s=this.buffer[++r];)if(s===":"){const i=this.buffer[r+1];if(ut(i)||e&&Bs.has(i))break;n=r}else if(ut(s)){let i=this.buffer[r+1];if(s==="\r"&&(i===`
`?(r+=1,s=`
`,i=this.buffer[r+1]):n=r),i==="#"||e&&Bs.has(i))break;if(s===`
`){const o=this.continueScalar(r+1);if(o===-1)break;r=Math.max(r,o-2)}}else{if(e&&Bs.has(s))break;n=r}return!s&&!this.atEnd?this.setNext("plain-scalar"):(yield oa,yield*this.pushToIndex(n+1,!0),e?"flow":"doc")}*pushCount(e){return e>0?(yield this.buffer.substr(this.pos,e),this.pos+=e,e):0}*pushToIndex(e,n){const r=this.buffer.slice(this.pos,e);return r?(yield r,this.pos+=r.length,r.length):(n&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(_o))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"-":case"?":case":":{const e=this.flowLevel>0,n=this.charAt(1);if(ut(n)||e&&Bs.has(n))return e?this.flowKey&&(this.flowKey=!1):this.indentNext=this.indentValue+1,(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}}return 0}*pushTag(){if(this.charAt(1)==="<"){let e=this.pos+2,n=this.buffer[e];for(;!ut(n)&&n!==">";)n=this.buffer[++e];return yield*this.pushToIndex(n===">"?e+1:e,!1)}else{let e=this.pos+1,n=this.buffer[e];for(;n;)if(bS.has(n))n=this.buffer[++e];else if(n==="%"&&pc.has(this.buffer[e+1])&&pc.has(this.buffer[e+2]))n=this.buffer[e+=3];else break;return yield*this.pushToIndex(e,!1)}}*pushNewline(){const e=this.buffer[this.pos];return e===`
`?yield*this.pushCount(1):e==="\r"&&this.charAt(1)===`
`?yield*this.pushCount(2):0}*pushSpaces(e){let n=this.pos-1,r;do r=this.buffer[++n];while(r===" "||e&&r==="	");const s=n-this.pos;return s>0&&(yield this.buffer.substr(this.pos,s),this.pos=n),s}*pushUntil(e){let n=this.pos,r=this.buffer[n];for(;!e(r);)r=this.buffer[++n];return yield*this.pushToIndex(n,!1)}}class xS{constructor(){this.lineStarts=[],this.addNewLine=e=>this.lineStarts.push(e),this.linePos=e=>{let n=0,r=this.lineStarts.length;for(;n<r;){const i=n+r>>1;this.lineStarts[i]<e?n=i+1:r=i}if(this.lineStarts[n]===e)return{line:n+1,col:1};if(n===0)return{line:0,col:e};const s=this.lineStarts[n-1];return{line:n,col:e-s+1}}}}function Zt(t,e){for(let n=0;n<t.length;++n)if(t[n].type===e)return!0;return!1}function mc(t){for(let e=0;e<t.length;++e)switch(t[e].type){case"space":case"comment":case"newline":break;default:return e}return-1}function wd(t){switch(t?.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function Us(t){switch(t.type){case"document":return t.start;case"block-map":{const e=t.items[t.items.length-1];return e.sep??e.start}case"block-seq":return t.items[t.items.length-1].start;default:return[]}}function Qn(t){if(t.length===0)return[];let e=t.length;e:for(;--e>=0;)switch(t[e].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;t[++e]?.type==="space";);return t.splice(e,t.length)}function gc(t){if(t.start.type==="flow-seq-start")for(const e of t.items)e.sep&&!e.value&&!Zt(e.start,"explicit-key-ind")&&!Zt(e.sep,"map-value-ind")&&(e.key&&(e.value=e.key),delete e.key,wd(e.value)?e.value.end?Array.prototype.push.apply(e.value.end,e.sep):e.value.end=e.sep:Array.prototype.push.apply(e.start,e.sep),delete e.sep)}class _S{constructor(e){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new vS,this.onNewLine=e}*parse(e,n=!1){this.onNewLine&&this.offset===0&&this.onNewLine(0);for(const r of this.lexer.lex(e,n))yield*this.next(r);n||(yield*this.end())}*next(e){if(this.source=e,this.atScalar){this.atScalar=!1,yield*this.step(),this.offset+=e.length;return}const n=yS(e);if(n)if(n==="scalar")this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=n,yield*this.step(),n){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+e.length);break;case"space":this.atNewLine&&e[0]===" "&&(this.indent+=e.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=e.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=e.length}else{const r=`Not a YAML token: ${e}`;yield*this.pop({type:"error",offset:this.offset,message:r,source:e}),this.offset+=e.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){const e=this.peek(1);if(this.type==="doc-end"&&e?.type!=="doc-end"){for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source});return}if(!e)return yield*this.stream();switch(e.type){case"document":return yield*this.document(e);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(e);case"block-scalar":return yield*this.blockScalar(e);case"block-map":return yield*this.blockMap(e);case"block-seq":return yield*this.blockSequence(e);case"flow-collection":return yield*this.flowCollection(e);case"doc-end":return yield*this.documentEnd(e)}yield*this.pop()}peek(e){return this.stack[this.stack.length-e]}*pop(e){const n=e??this.stack.pop();if(!n)yield{type:"error",offset:this.offset,source:"",message:"Tried to pop an empty stack"};else if(this.stack.length===0)yield n;else{const r=this.peek(1);switch(n.type==="block-scalar"?n.indent="indent"in r?r.indent:0:n.type==="flow-collection"&&r.type==="document"&&(n.indent=0),n.type==="flow-collection"&&gc(n),r.type){case"document":r.value=n;break;case"block-scalar":r.props.push(n);break;case"block-map":{const s=r.items[r.items.length-1];if(s.value){r.items.push({start:[],key:n,sep:[]}),this.onKeyLine=!0;return}else if(s.sep)s.value=n;else{Object.assign(s,{key:n,sep:[]}),this.onKeyLine=!s.explicitKey;return}break}case"block-seq":{const s=r.items[r.items.length-1];s.value?r.items.push({start:[],value:n}):s.value=n;break}case"flow-collection":{const s=r.items[r.items.length-1];!s||s.value?r.items.push({start:[],key:n,sep:[]}):s.sep?s.value=n:Object.assign(s,{key:n,sep:[]});return}default:yield*this.pop(),yield*this.pop(n)}if((r.type==="document"||r.type==="block-map"||r.type==="block-seq")&&(n.type==="block-map"||n.type==="block-seq")){const s=n.items[n.items.length-1];s&&!s.sep&&!s.value&&s.start.length>0&&mc(s.start)===-1&&(n.indent===0||s.start.every(i=>i.type!=="comment"||i.indent<n.indent))&&(r.type==="document"?r.end=s.start:r.items.push({start:s.start}),n.items.splice(-1,1))}}}*stream(){switch(this.type){case"directive-line":yield{type:"directive",offset:this.offset,source:this.source};return;case"byte-order-mark":case"space":case"comment":case"newline":yield this.sourceToken;return;case"doc-mode":case"doc-start":{const e={type:"document",offset:this.offset,start:[]};this.type==="doc-start"&&e.start.push(this.sourceToken),this.stack.push(e);return}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(e){if(e.value)return yield*this.lineEnd(e);switch(this.type){case"doc-start":{mc(e.start)!==-1?(yield*this.pop(),yield*this.step()):e.start.push(this.sourceToken);return}case"anchor":case"tag":case"space":case"comment":case"newline":e.start.push(this.sourceToken);return}const n=this.startBlockValue(e);n?this.stack.push(n):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(e){if(this.type==="map-value-ind"){const n=Us(this.peek(2)),r=Qn(n);let s;e.end?(s=e.end,s.push(this.sourceToken),delete e.end):s=[this.sourceToken];const i={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:r,key:e,sep:s}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=i}else yield*this.lineEnd(e)}*blockScalar(e){switch(this.type){case"space":case"comment":case"newline":e.props.push(this.sourceToken);return;case"scalar":if(e.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let n=this.source.indexOf(`
`)+1;for(;n!==0;)this.onNewLine(this.offset+n),n=this.source.indexOf(`
`,n)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(e){const n=e.items[e.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,n.value){const r="end"in n.value?n.value.end:void 0;(Array.isArray(r)?r[r.length-1]:void 0)?.type==="comment"?r?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)e.items.push({start:[this.sourceToken]});else if(n.sep)n.sep.push(this.sourceToken);else{if(this.atIndentedComment(n.start,e.indent)){const s=e.items[e.items.length-2]?.value?.end;if(Array.isArray(s)){Array.prototype.push.apply(s,n.start),s.push(this.sourceToken),e.items.pop();return}}n.start.push(this.sourceToken)}return}if(this.indent>=e.indent){const r=!this.onKeyLine&&this.indent===e.indent,s=r&&(n.sep||n.explicitKey)&&this.type!=="seq-item-ind";let i=[];if(s&&n.sep&&!n.value){const o=[];for(let a=0;a<n.sep.length;++a){const l=n.sep[a];switch(l.type){case"newline":o.push(a);break;case"space":break;case"comment":l.indent>e.indent&&(o.length=0);break;default:o.length=0}}o.length>=2&&(i=n.sep.splice(o[1]))}switch(this.type){case"anchor":case"tag":s||n.value?(i.push(this.sourceToken),e.items.push({start:i}),this.onKeyLine=!0):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"explicit-key-ind":!n.sep&&!n.explicitKey?(n.start.push(this.sourceToken),n.explicitKey=!0):s||n.value?(i.push(this.sourceToken),e.items.push({start:i,explicitKey:!0})):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken],explicitKey:!0}]}),this.onKeyLine=!0;return;case"map-value-ind":if(n.explicitKey)if(n.sep)if(n.value)e.items.push({start:[],key:null,sep:[this.sourceToken]});else if(Zt(n.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:i,key:null,sep:[this.sourceToken]}]});else if(wd(n.key)&&!Zt(n.sep,"newline")){const o=Qn(n.start),a=n.key,l=n.sep;l.push(this.sourceToken),delete n.key,delete n.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:a,sep:l}]})}else i.length>0?n.sep=n.sep.concat(i,this.sourceToken):n.sep.push(this.sourceToken);else if(Zt(n.start,"newline"))Object.assign(n,{key:null,sep:[this.sourceToken]});else{const o=Qn(n.start);this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:null,sep:[this.sourceToken]}]})}else n.sep?n.value||s?e.items.push({start:i,key:null,sep:[this.sourceToken]}):Zt(n.sep,"map-value-ind")?this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):n.sep.push(this.sourceToken):Object.assign(n,{key:null,sep:[this.sourceToken]});this.onKeyLine=!0;return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const o=this.flowScalar(this.type);s||n.value?(e.items.push({start:i,key:o,sep:[]}),this.onKeyLine=!0):n.sep?this.stack.push(o):(Object.assign(n,{key:o,sep:[]}),this.onKeyLine=!0);return}default:{const o=this.startBlockValue(e);if(o){if(o.type==="block-seq"){if(!n.explicitKey&&n.sep&&!Zt(n.sep,"newline")){yield*this.pop({type:"error",offset:this.offset,message:"Unexpected block-seq-ind on same line with key",source:this.source});return}}else r&&e.items.push({start:i});this.stack.push(o);return}}}}yield*this.pop(),yield*this.step()}*blockSequence(e){const n=e.items[e.items.length-1];switch(this.type){case"newline":if(n.value){const r="end"in n.value?n.value.end:void 0;(Array.isArray(r)?r[r.length-1]:void 0)?.type==="comment"?r?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)e.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(n.start,e.indent)){const s=e.items[e.items.length-2]?.value?.end;if(Array.isArray(s)){Array.prototype.push.apply(s,n.start),s.push(this.sourceToken),e.items.pop();return}}n.start.push(this.sourceToken)}return;case"anchor":case"tag":if(n.value||this.indent<=e.indent)break;n.start.push(this.sourceToken);return;case"seq-item-ind":if(this.indent!==e.indent)break;n.value||Zt(n.start,"seq-item-ind")?e.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken);return}if(this.indent>e.indent){const r=this.startBlockValue(e);if(r){this.stack.push(r);return}}yield*this.pop(),yield*this.step()}*flowCollection(e){const n=e.items[e.items.length-1];if(this.type==="flow-error-end"){let r;do yield*this.pop(),r=this.peek(1);while(r?.type==="flow-collection")}else if(e.end.length===0){switch(this.type){case"comma":case"explicit-key-ind":!n||n.sep?e.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken);return;case"map-value-ind":!n||n.value?e.items.push({start:[],key:null,sep:[this.sourceToken]}):n.sep?n.sep.push(this.sourceToken):Object.assign(n,{key:null,sep:[this.sourceToken]});return;case"space":case"comment":case"newline":case"anchor":case"tag":!n||n.value?e.items.push({start:[this.sourceToken]}):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const s=this.flowScalar(this.type);!n||n.value?e.items.push({start:[],key:s,sep:[]}):n.sep?this.stack.push(s):Object.assign(n,{key:s,sep:[]});return}case"flow-map-end":case"flow-seq-end":e.end.push(this.sourceToken);return}const r=this.startBlockValue(e);r?this.stack.push(r):(yield*this.pop(),yield*this.step())}else{const r=this.peek(2);if(r.type==="block-map"&&(this.type==="map-value-ind"&&r.indent===e.indent||this.type==="newline"&&!r.items[r.items.length-1].sep))yield*this.pop(),yield*this.step();else if(this.type==="map-value-ind"&&r.type!=="flow-collection"){const s=Us(r),i=Qn(s);gc(e);const o=e.end.splice(1,e.end.length);o.push(this.sourceToken);const a={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:i,key:e,sep:o}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=a}else yield*this.lineEnd(e)}}flowScalar(e){if(this.onNewLine){let n=this.source.indexOf(`
`)+1;for(;n!==0;)this.onNewLine(this.offset+n),n=this.source.indexOf(`
`,n)+1}return{type:e,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(e){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;const n=Us(e),r=Qn(n);return r.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:r,explicitKey:!0}]}}case"map-value-ind":{this.onKeyLine=!0;const n=Us(e),r=Qn(n);return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:r,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(e,n){return this.type!=="comment"||this.indent<=n?!1:e.every(r=>r.type==="newline"||r.type==="space")}*documentEnd(e){this.type!=="doc-mode"&&(e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop()))}*lineEnd(e){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;default:e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop())}}}function SS(t){const e=t.prettyErrors!==!1;return{lineCounter:t.lineCounter||e&&new xS||null,prettyErrors:e}}function kS(t,e={}){const{lineCounter:n,prettyErrors:r}=SS(e),s=new _S(n?.addNewLine),i=new gS(e);let o=null;for(const a of i.compose(s.parse(t),!0,t.length))if(!o)o=a;else if(o.options.logLevel!=="silent"){o.errors.push(new Fr(a.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}return r&&n&&(o.errors.forEach(fc(t,n)),o.warnings.forEach(fc(t,n))),o}function vd(t,e,n){let r;const s=kS(t,n);if(!s)return null;if(s.warnings.forEach(i=>qf(s.options.logLevel,i)),s.errors.length>0){if(s.options.logLevel!=="silent")throw s.errors[0];s.errors=[]}return s.toJS(Object.assign({reviver:r},n))}const xd=aa((t,e,n)=>({trains:{},currentTrain:void 0,setTrainsFromYml:r=>{try{const s=vd(r),i=E2(s);i.valid?t({trains:Gu.parse(s),parseErrors:void 0}):(console.error("Invalid YAML data:",i.errors),Me.error("We couldn't load your trains. Please check that you uploaded the SavedTrainProperties YAML file from TrainCarts. See the browser console for more details.",{duration:1e4}),t({trains:{},parseErrors:i.errors}))}catch(s){console.error("Error parsing YAML:",s),Me.error("We couldn't read your file. Please make sure it's a valid YAML and try again. See the browser console for more details.",{duration:1e4}),t({trains:{},parseErrors:["Failed to parse YAML.",String(s)]});return}},setTrains:r=>t({trains:r}),setCurrentTrain:r=>t({currentTrain:r}),clearCurrentTrain:()=>t({currentTrain:void 0}),reset:()=>t(n.getInitialState())})),ES=fa("inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function TS(t){const e=z.c(12);let n,r,s,i;e[0]!==t?({className:n,variant:i,asChild:s,...r}=t,e[0]=t,e[1]=n,e[2]=r,e[3]=s,e[4]=i):(n=e[1],r=e[2],s=e[3],i=e[4]);const a=(s===void 0?!1:s)?xc:"span";let l;e[5]!==n||e[6]!==i?(l=U(ES({variant:i}),n),e[5]=n,e[6]=i,e[7]=l):l=e[7];let c;return e[8]!==a||e[9]!==r||e[10]!==l?(c=d.jsx(a,{"data-slot":"badge",className:l,...r}),e[8]=a,e[9]=r,e[10]=l,e[11]=c):c=e[11],c}function NS(t){const e=z.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let r;return e[2]!==n?(r=d.jsx(Hh,{"data-slot":"hover-card",...n}),e[2]=n,e[3]=r):r=e[3],r}function AS(t){const e=z.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let r;return e[2]!==n?(r=d.jsx(Kh,{"data-slot":"hover-card-trigger",...n}),e[2]=n,e[3]=r):r=e[3],r}function OS(t){const e=z.c(12);let n,r,s,i;e[0]!==t?({className:n,align:s,sideOffset:i,...r}=t,e[0]=t,e[1]=n,e[2]=r,e[3]=s,e[4]=i):(n=e[1],r=e[2],s=e[3],i=e[4]);const o=s===void 0?"center":s,a=i===void 0?4:i;let l;e[5]!==n?(l=U("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-64 origin-(--radix-hover-card-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",n),e[5]=n,e[6]=l):l=e[6];let c;return e[7]!==o||e[8]!==r||e[9]!==a||e[10]!==l?(c=d.jsx(Yh,{"data-slot":"hover-card-portal",children:d.jsx(Xh,{"data-slot":"hover-card-content",align:o,sideOffset:a,className:l,...r})}),e[7]=o,e[8]=r,e[9]=a,e[10]=l,e[11]=c):c=e[11],c}function CS(){const t=z.c(61),e=ot(),n=xd(),[r,s]=$.useState(n.currentTrain),[i,o]=$.useState(e.cart),[a,l]=$.useState(e.metadata.projectName);let c;t[0]!==n.trains?(c=Object.keys(n.trains),t[0]=n.trains,t[1]=c):c=t[1];const u=c.length;let f,h;t[2]!==n.currentTrain?(f=()=>{n.currentTrain&&s(n.currentTrain)},h=[n.currentTrain],t[2]=n.currentTrain,t[3]=f,t[4]=h):(f=t[3],h=t[4]),$.useEffect(f,h);let p,y;t[5]!==e.cart?(p=()=>{e.cart&&o(e.cart)},y=[e.cart],t[5]=e.cart,t[6]=p,t[7]=y):(p=t[6],y=t[7]),$.useEffect(p,y);let m,w;t[8]!==r?(m=()=>{if(r&&r.carts){const X=Object.values(r.carts)[0];o(X)}},w=[r],t[8]=r,t[9]=m,t[10]=w):(m=t[9],w=t[10]),$.useEffect(m,w);let g;t[11]===Symbol.for("react.memo_cache_sentinel")?(g=d.jsx(Ma,{children:"New TCA-Project"}),t[11]=g):g=t[11];let E;t[12]===Symbol.for("react.memo_cache_sentinel")?(E=d.jsx(Je,{htmlFor:"projectName",children:"Project name"}),t[12]=E):E=t[12];let v,S,_;t[13]===Symbol.for("react.memo_cache_sentinel")?(_=d.jsx(xn,{id:"projectName",placeholder:"My TCA Project",className:"mt-2",onChange:X=>l(X.target.value)}),v=d.jsx("hr",{className:"my-4"}),S=d.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"TC Animator lets you animate one cart from a single train per project. To work on a different train or cart, create a new project for each one."}),t[13]=v,t[14]=S,t[15]=_):(v=t[13],S=t[14],_=t[15]);let O;t[16]!==r||t[17]!==u||t[18]!==n.trains?(O=u>1&&r==null&&d.jsxs(d.Fragment,{children:[d.jsx(Je,{htmlFor:"train",children:"Train"}),d.jsxs(ei,{onValueChange:X=>{const le=n.trains[X];le&&(s(le),o(null))},children:[d.jsx(ni,{className:"w-full",id:"train",children:d.jsx(ti,{placeholder:"Select a train"})}),d.jsx(ri,{children:d.jsxs(Co,{children:[d.jsx(jo,{children:"Trains"}),Object.values(n.trains).filter(MS).map(IS)]})})]})]}),t[16]=r,t[17]=u,t[18]=n.trains,t[19]=O):O=t[19];let b;t[20]===Symbol.for("react.memo_cache_sentinel")?(b=d.jsx(Je,{htmlFor:"cart",className:"mt-4",children:"Cart"}),t[20]=b):b=t[20];let x;t[21]!==i||t[22]!==r?(x=r?.carts?Object.entries(r.carts).find(X=>{const[,le]=X;return le===i})?.[0]??"":"",t[21]=i,t[22]=r,t[23]=x):x=t[23];const k=!r?.carts;let N;t[24]!==r?.carts?(N=X=>{const le=r?.carts?.[X];le&&o(le)},t[24]=r?.carts,t[25]=N):N=t[25];let T;t[26]===Symbol.for("react.memo_cache_sentinel")?(T=d.jsx(ni,{className:"w-full",id:"cart",children:d.jsx(ti,{placeholder:"Select a cart"})}),t[26]=T):T=t[26];let A;t[27]===Symbol.for("react.memo_cache_sentinel")?(A=d.jsx(jo,{children:"Carts"}),t[27]=A):A=t[27];let C;t[28]!==r?.carts?(C=Object.entries(r?.carts||{}).map(jS),t[28]=r?.carts,t[29]=C):C=t[29];let R;t[30]!==C?(R=d.jsx(ri,{children:d.jsxs(Co,{children:[A,C]})}),t[30]=C,t[31]=R):R=t[31];let I;t[32]!==x||t[33]!==k||t[34]!==N||t[35]!==R?(I=d.jsxs(ei,{value:x,disabled:k,onValueChange:N,children:[T,R]}),t[32]=x,t[33]=k,t[34]=N,t[35]=R,t[36]=I):I=t[36];let P;t[37]!==O||t[38]!==I?(P=d.jsxs(ja,{children:[g,d.jsx(Ra,{asChild:!0,children:d.jsxs("div",{children:[E,_,v,S,O,b,I]})})]}),t[37]=O,t[38]=I,t[39]=P):P=t[39];let L;t[40]!==e||t[41]!==n?(L=()=>{e.reset(),n.reset()},t[40]=e,t[41]=n,t[42]=L):L=t[42];let B;t[43]===Symbol.for("react.memo_cache_sentinel")?(B=d.jsx(Kd,{}),t[43]=B):B=t[43];let D;t[44]!==L?(D=d.jsxs(Ve,{variant:"secondary",onClick:L,children:[B,"Back"]}),t[44]=L,t[45]=D):D=t[45];let Y;t[46]!==i||t[47]!==r||t[48]!==a||t[49]!==e||t[50]!==n?(Y=async()=>{a&&r&&i&&(e.setProjectName(a),n.setCurrentTrain(r),e.setCart(i),await e.saveProject(),n.reset())},t[46]=i,t[47]=r,t[48]=a,t[49]=e,t[50]=n,t[51]=Y):Y=t[51];const ee=!(a&&r&&i);let ne;t[52]!==Y||t[53]!==ee?(ne=d.jsx(Ve,{onClick:Y,disabled:ee,children:"Create Project"}),t[52]=Y,t[53]=ee,t[54]=ne):ne=t[54];let K;t[55]!==D||t[56]!==ne?(K=d.jsxs(Ia,{className:"flex justify-between",children:[D,ne]}),t[55]=D,t[56]=ne,t[57]=K):K=t[57];let oe;return t[58]!==P||t[59]!==K?(oe=d.jsx(Oa,{open:!0,children:d.jsxs(Ca,{children:[P,K]})}),t[58]=P,t[59]=K,t[60]=oe):oe=t[60],oe}function jS(t){const[e]=t;return d.jsx(vn,{value:e,children:e},e)}function IS(t){return d.jsx(vn,{value:t.savedName,children:t.savedName},t.savedName)}function MS(t){return t.carts}function RS(){const t=ot(),e=xd(),[n,r]=$.useState(!1),[s,i]=$.useState(""),o=$.useRef(!1),a=async()=>{r(!0);const u=await da({description:"Select a YAML file",mimeTypes:["application/x-yaml","text/yaml"],extensions:[".yaml",".yml"],id:"load-saved-train-properties",startIn:"documents"}).catch(()=>null);if(u){const f=await u.text();e.setTrainsFromYml(f),e.setCurrentTrain(Object.values(e.trains)[0])}r(!1)},l=$.useCallback(async u=>{r(!0),await(async()=>{const h=u??s;if(!h)return;const p=["paste.traincarts.net","hastebin.com","paste.foxxite.com"],y=new URL(h);if(!p.includes(y.hostname)){Me.error("The provided URL is not from a supported domain.");return}const m=Me.loading("Importing data...");y.pathname.includes("/raw/")||(y.pathname=`/raw${y.pathname}`);const w=await fetch(y.toString(),{method:"GET",headers:{"Content-Type":"text/plain"}}).catch(E=>(Me.error(`Failed to fetch data: ${E.message}`,{id:m}),null));if(!w)return;if(!w.ok){Me.error(`Failed to fetch data: ${w.status} ${w.statusText}`);return}const g=await w.text();try{const E=vd(g);if(!E||typeof E!="object"){Me.error("The fetched data is not a valid YAML object.",{id:m});return}if(!("carts"in E)){Me.error("The fetched data does not appear to be a valid TrainCarts export.",{id:m});return}const v=E.carts,_={savedName:"TemporaryTrain",carts:Rt(te(),Sa).parse(v)};e.setTrains({TemporaryTrain:_}),e.setCurrentTrain(_)}catch(E){Me.error(`Failed to parse YAML: ${E}`,{id:m});return}Me.success("Data imported successfully!",{id:m})})().catch(h=>{console.error("Error during import:",h),Me.error(`Import failed: ${h}`,{id:"import-error"})}),r(!1)},[s,e]),c=async()=>{r(!0),await Me.promise(t.loadProjectFromFileDialog(),{loading:"Loading project...",success:"Project loaded successfully!",error:"Failed to load project."}).unwrap().catch(()=>{t.reset()}),r(!1)};return $.useEffect(()=>{const u=async y=>{if(r(!0),!y.name.endsWith(fr)){Me.error(`Invalid file type. Please select a ${fr} file.`),r(!1);return}try{await Me.promise(t.loadProjectFromFileHandle(y),{loading:"Loading project...",success:"Project loaded successfully!",error:"Failed to load project."})}catch{t.reset()}r(!1)},f=y=>{if(n||t.metadata.createdAt)return;const m=y.clipboardData?.getData("text");if(m&&/^https?:\/\/\S+$/i.test(m.trim())&&!o.current){o.current=!0,l(m.trim()),setTimeout(()=>{o.current=!1},500);return}const w=y.clipboardData?.items;if(w){for(const g of w)if(g.kind==="file"){const E=g.getAsFile();if(E){u(E);return}}}},h=y=>{if(y.preventDefault(),!(n||t.metadata.createdAt)&&y.dataTransfer?.files&&y.dataTransfer.files.length>0){const m=y.dataTransfer.files[0];u(m)}},p=y=>{y.preventDefault()};return window.addEventListener("paste",f),window.addEventListener("drop",h),window.addEventListener("dragover",p),()=>{window.removeEventListener("paste",f),window.removeEventListener("drop",h),window.removeEventListener("dragover",p)}},[n,l,t]),n?d.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 backdrop-blur"}):Object.entries(e.trains).length>0&&!t.metadata.createdAt?d.jsx(CS,{}):d.jsx(Oa,{open:!t.metadata.createdAt,children:d.jsxs(Ca,{children:[d.jsxs(ja,{children:[d.jsx(Ma,{className:"text-3xl font-bold text-center",children:"Welcome to TC Animator!"}),d.jsx(Ra,{asChild:!0,children:d.jsxs("div",{className:"space-y-4 pt-2",children:[d.jsx("p",{className:"text-center text-balance leading-relaxed",children:"Please import a train exported from TrainCarts or open an existing TCA-Project."}),d.jsxs("div",{className:"flex flex-col gap-4",children:[d.jsxs("div",{className:"space-y-4 p-6 rounded-lg border border-zinc-300 bg-zinc-50/50 dark:border-zinc-800 dark:bg-zinc-950/50 hover:border-blue-500/50 dark:hover:border-blue-500/50 transition-colors",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"p-2 rounded-lg bg-blue-500/10",children:d.jsx(qd,{className:"w-5 h-5 text-blue-400"})}),d.jsxs("h2",{className:"text-lg font-semibold",children:["Import from TrainCarts"," ",d.jsxs(NS,{children:[d.jsx(AS,{asChild:!0,children:d.jsx(TS,{variant:"secondary",children:"1.21.11-v1"})}),d.jsx(OS,{className:"w-fit max-w-sm",children:d.jsxs("p",{className:"text-balance",children:["TC Animator is proprietary donationware originally created for"," ",d.jsx("a",{href:"https://wondervalepark.com",target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 underline hover:text-blue-600",children:"Wondervale"}),". It has been released publicly, but it is designed specifically to support the version of TrainCarts used on Wondervale's servers. Other versions might work, but they are"," ",d.jsx("strong",{children:"not officially supported."})]})})]})]})]}),d.jsxs("h6",{className:"text-sm text-muted-foreground text-balance -mt-2",children:["Run"," ",d.jsx("code",{className:"font-mono text-primary",children:"/train export"})," ","in your Minecraft server to get a shareable link. Paste it here to import your train."]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx(xn,{type:"url",value:s,onChange:u=>i(u.target.value),placeholder:"https://paste.traincarts.net/"}),d.jsx(Ve,{disabled:!s.trim(),onClick:u=>{u.shiftKey?a():l()},className:"w-full",children:"Import from TrainCarts"})]})]}),d.jsxs("div",{className:"space-y-4 p-6 rounded-lg border border-zinc-300 bg-zinc-50/50 dark:border-zinc-800 dark:bg-zinc-950/50 hover:border-emerald-500/50 dark:hover:border-emerald-500/50 transition-colors",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"p-2 rounded-lg bg-blue-500/10",children:d.jsx(Gd,{className:"w-5 h-5 text-emerald-400"})}),d.jsx("h2",{className:"text-lg font-semibold",children:"Open TCA-Project"})]}),d.jsxs("h6",{className:"text-sm text-muted-foreground text-balance -mt-2",children:["Open a previously saved TCA-Project file with the"," ",d.jsx("code",{className:"font-mono text-primary",children:fr})," ","extension."]}),d.jsx(Ve,{className:"bg-emerald-500 hover:bg-emerald-500/90 dark:bg-emerald-700  dark:hover:bg-emerald-700/90 w-full",onClick:c,children:"Browse files"})]})]})]})})]}),d.jsx(Ia,{className:"sm:justify-center text-sm text-muted-foreground",children:d.jsxs("a",{href:"https://foxxite.com",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5",children:[d.jsx("span",{children:"Made with  by Foxxite | Articca"}),d.jsx(Hd,{className:"w-4 h-4"})]})})]})})}Ad.createRoot(document.getElementById("root")).render(d.jsxs($.StrictMode,{children:[d.jsx(p_,{}),d.jsx(RS,{}),d.jsx(l_,{}),d.jsx(Od,{position:"top-center",richColors:!0})]}));
