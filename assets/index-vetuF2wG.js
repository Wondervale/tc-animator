const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/monaco-BWE6UG2u.js","assets/react-PKmuhi8T.js","assets/lodash-BxEVdJdn.js"])))=>i.map(i=>d[i]);
import{B as L,j as h,P as yf,C as bf,D as wf,r as P,E as Pe,F as vf,W as xf,z as _f,T as Ef}from"./react-PKmuhi8T.js";import{t as Sf}from"./tailwind-D6B6e0vX.js";import{G as kf,X as Pl,C as $l,a as Tf,b as Af,P as Nf,M as Cf,c as Of,I as lr,T as jf,E as If,d as Mf,e as Rf,B as Pf,f as $f,R as Df,g as Lf,h as zf,Z as Ff,i as Bf,j as Uf,F as Zf,k as Vf,l as Wf}from"./lucide-DRastDr4.js";import{T as Yf,C as Gf,D as qf,R as Kf,P as Hf,a as Xf,O as Qf,b as Jf,I as eh,S as Dl,M as th,c as nh,d as sh,e as rh,f as ih,g as oh,V as ah,h as lh,i as ch,G as uh,L as fh,j as hh,k as dh,l as ph,m as mh,n as gh,o as yh,p as bh,q as wh,r as vh,s as xh,t as _h,u as Eh,A as Sh,v as kh,w as Th,x as Ah,y as Nh,z as Ch,B as Ll,E as zl,F as Fl,H as Bl,J as Oh,K as jh,N as Ih,Q as Mh,U as Rh,W as Ph,X as $h,Y as Dh,Z as Lh,_ as zh,$ as Fh,a0 as Bh,a1 as Uh,a2 as Zh,a3 as Vh}from"./radix-Cc266-BU.js";import{l as Ul,g as Wh}from"./lodash-BxEVdJdn.js";import{a as Co,p as Yh,b as Gh}from"./zustand-B04ES5dO.js";import{N as qh}from"./nbt-CbhXOWyk.js";import{_ as Kh,u as si,a as Oo,b as Hh,c as jo,T as Xh,B as Qh,I as Jh,d as ed,e as td,O as nd,G as Zl,L as sd,f as rd,P as id,H as od,g as ad,h as ld,C as cd}from"./react-three-DXlTKCFJ.js";import{a7 as pa,e as Oe,z as ud,a8 as fd,a9 as hd,Q as Vl,aa as Io,ab as Yi,ac as ma,ad as ga,ae as dd,af as pd,D as Wl}from"./three-BYboBJW1.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function Yl(t){var e,n,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=Yl(t[e]))&&(s&&(s+=" "),s+=n)}else for(n in t)t[n]&&(s&&(s+=" "),s+=n);return s}function Gl(){for(var t,e,n=0,s="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=Yl(t))&&(s&&(s+=" "),s+=e);return s}const Lt={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},ql=Object.create(null);for(const t in Lt)Object.hasOwn(Lt,t)&&(ql[Lt[t]]=t);const Me={to:{},get:{}};Me.get=function(t){const e=t.slice(0,3).toLowerCase();let n,s;switch(e){case"hsl":{n=Me.get.hsl(t),s="hsl";break}case"hwb":{n=Me.get.hwb(t),s="hwb";break}default:{n=Me.get.rgb(t),s="rgb";break}}return n?{model:s,value:n}:null};Me.get.rgb=function(t){if(!t)return null;const e=/^#([a-f\d]{3,4})$/i,n=/^#([a-f\d]{6})([a-f\d]{2})?$/i,s=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[\s,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,r=/^rgba?\(\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[\s,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,i=/^(\w+)$/;let o=[0,0,0,1],a,l,c;if(a=t.match(n)){for(c=a[2],a=a[1],l=0;l<3;l++){const u=l*2;o[l]=Number.parseInt(a.slice(u,u+2),16)}c&&(o[3]=Number.parseInt(c,16)/255)}else if(a=t.match(e)){for(a=a[1],c=a[3],l=0;l<3;l++)o[l]=Number.parseInt(a[l]+a[l],16);c&&(o[3]=Number.parseInt(c+c,16)/255)}else if(a=t.match(s)){for(l=0;l<3;l++)o[l]=Number.parseInt(a[l+1],10);a[4]&&(o[3]=a[5]?Number.parseFloat(a[4])*.01:Number.parseFloat(a[4]))}else if(a=t.match(r)){for(l=0;l<3;l++)o[l]=Math.round(Number.parseFloat(a[l+1])*2.55);a[4]&&(o[3]=a[5]?Number.parseFloat(a[4])*.01:Number.parseFloat(a[4]))}else return(a=t.match(i))?a[1]==="transparent"?[0,0,0,0]:Object.hasOwn(Lt,a[1])?(o=Lt[a[1]],o[3]=1,o):null:null;for(l=0;l<3;l++)o[l]=hn(o[l],0,255);return o[3]=hn(o[3],0,1),o};Me.get.hsl=function(t){if(!t)return null;const e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[,|/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,n=t.match(e);if(n){const s=Number.parseFloat(n[4]),r=(Number.parseFloat(n[1])%360+360)%360,i=hn(Number.parseFloat(n[2]),0,100),o=hn(Number.parseFloat(n[3]),0,100),a=hn(Number.isNaN(s)?1:s,0,1);return[r,i,o,a]}return null};Me.get.hwb=function(t){if(!t)return null;const e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*[\s,]\s*([+-]?[\d.]+)%\s*[\s,]\s*([+-]?[\d.]+)%\s*(?:[\s,]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,n=t.match(e);if(n){const s=Number.parseFloat(n[4]),r=(Number.parseFloat(n[1])%360+360)%360,i=hn(Number.parseFloat(n[2]),0,100),o=hn(Number.parseFloat(n[3]),0,100),a=hn(Number.isNaN(s)?1:s,0,1);return[r,i,o,a]}return null};Me.to.hex=function(...t){return"#"+cr(t[0])+cr(t[1])+cr(t[2])+(t[3]<1?cr(Math.round(t[3]*255)):"")};Me.to.rgb=function(...t){return t.length<4||t[3]===1?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"};Me.to.rgb.percent=function(...t){const e=Math.round(t[0]/255*100),n=Math.round(t[1]/255*100),s=Math.round(t[2]/255*100);return t.length<4||t[3]===1?"rgb("+e+"%, "+n+"%, "+s+"%)":"rgba("+e+"%, "+n+"%, "+s+"%, "+t[3]+")"};Me.to.hsl=function(...t){return t.length<4||t[3]===1?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"};Me.to.hwb=function(...t){let e="";return t.length>=4&&t[3]!==1&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"};Me.to.keyword=function(...t){return ql[t.slice(0,3)]};function hn(t,e,n){return Math.min(Math.max(e,t),n)}function cr(t){const e=Math.round(t).toString(16).toUpperCase();return e.length<2?"0"+e:e}const Kl={};for(const t of Object.keys(Lt))Kl[Lt[t]]=t;const F={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},oklab:{channels:3,labels:["okl","oka","okb"]},lch:{channels:3,labels:"lch"},oklch:{channels:3,labels:["okl","okc","okh"]},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}},Wt=(6/29)**3;function as(t){const e=t>.0031308?1.055*t**.4166666666666667-.055:t*12.92;return Math.min(Math.max(0,e),1)}function ls(t){return t>.04045?((t+.055)/1.055)**2.4:t/12.92}for(const t of Object.keys(F)){if(!("channels"in F[t]))throw new Error("missing channels property: "+t);if(!("labels"in F[t]))throw new Error("missing channel labels property: "+t);if(F[t].labels.length!==F[t].channels)throw new Error("channel and label counts mismatch: "+t);const{channels:e,labels:n}=F[t];delete F[t].channels,delete F[t].labels,Object.defineProperty(F[t],"channels",{value:e}),Object.defineProperty(F[t],"labels",{value:n})}F.rgb.hsl=function(t){const e=t[0]/255,n=t[1]/255,s=t[2]/255,r=Math.min(e,n,s),i=Math.max(e,n,s),o=i-r;let a,l;switch(i){case r:{a=0;break}case e:{a=(n-s)/o;break}case n:{a=2+(s-e)/o;break}case s:{a=4+(e-n)/o;break}}a=Math.min(a*60,360),a<0&&(a+=360);const c=(r+i)/2;return i===r?l=0:c<=.5?l=o/(i+r):l=o/(2-i-r),[a,l*100,c*100]};F.rgb.hsv=function(t){let e,n,s,r,i;const o=t[0]/255,a=t[1]/255,l=t[2]/255,c=Math.max(o,a,l),u=c-Math.min(o,a,l),f=function(d){return(c-d)/6/u+1/2};if(u===0)r=0,i=0;else{switch(i=u/c,e=f(o),n=f(a),s=f(l),c){case o:{r=s-n;break}case a:{r=1/3+e-s;break}case l:{r=2/3+n-e;break}}r<0?r+=1:r>1&&(r-=1)}return[r*360,i*100,c*100]};F.rgb.hwb=function(t){const e=t[0],n=t[1];let s=t[2];const r=F.rgb.hsl(t)[0],i=1/255*Math.min(e,Math.min(n,s));return s=1-1/255*Math.max(e,Math.max(n,s)),[r,i*100,s*100]};F.rgb.oklab=function(t){const e=ls(t[0]/255),n=ls(t[1]/255),s=ls(t[2]/255),r=Math.cbrt(.4122214708*e+.5363325363*n+.0514459929*s),i=Math.cbrt(.2119034982*e+.6806995451*n+.1073969566*s),o=Math.cbrt(.0883024619*e+.2817188376*n+.6299787005*s),a=.2104542553*r+.793617785*i-.0040720468*o,l=1.9779984951*r-2.428592205*i+.4505937099*o,c=.0259040371*r+.7827717662*i-.808675766*o;return[a*100,l*100,c*100]};F.rgb.cmyk=function(t){const e=t[0]/255,n=t[1]/255,s=t[2]/255,r=Math.min(1-e,1-n,1-s),i=(1-e-r)/(1-r)||0,o=(1-n-r)/(1-r)||0,a=(1-s-r)/(1-r)||0;return[i*100,o*100,a*100,r*100]};function md(t,e){return(t[0]-e[0])**2+(t[1]-e[1])**2+(t[2]-e[2])**2}F.rgb.keyword=function(t){const e=Kl[t];if(e)return e;let n=Number.POSITIVE_INFINITY,s;for(const r of Object.keys(Lt)){const i=Lt[r],o=md(t,i);o<n&&(n=o,s=r)}return s};F.keyword.rgb=function(t){return Lt[t]};F.rgb.xyz=function(t){const e=ls(t[0]/255),n=ls(t[1]/255),s=ls(t[2]/255),r=e*.4124564+n*.3575761+s*.1804375,i=e*.2126729+n*.7151522+s*.072175,o=e*.0193339+n*.119192+s*.9503041;return[r*100,i*100,o*100]};F.rgb.lab=function(t){const e=F.rgb.xyz(t);let n=e[0],s=e[1],r=e[2];n/=95.047,s/=100,r/=108.883,n=n>Wt?n**(1/3):7.787*n+16/116,s=s>Wt?s**(1/3):7.787*s+16/116,r=r>Wt?r**(1/3):7.787*r+16/116;const i=116*s-16,o=500*(n-s),a=200*(s-r);return[i,o,a]};F.hsl.rgb=function(t){const e=t[0]/360,n=t[1]/100,s=t[2]/100;let r,i;if(n===0)return i=s*255,[i,i,i];const o=s<.5?s*(1+n):s+n-s*n,a=2*s-o,l=[0,0,0];for(let c=0;c<3;c++)r=e+1/3*-(c-1),r<0&&r++,r>1&&r--,6*r<1?i=a+(o-a)*6*r:2*r<1?i=o:3*r<2?i=a+(o-a)*(2/3-r)*6:i=a,l[c]=i*255;return l};F.hsl.hsv=function(t){const e=t[0];let n=t[1]/100,s=t[2]/100,r=n;const i=Math.max(s,.01);s*=2,n*=s<=1?s:2-s,r*=i<=1?i:2-i;const o=(s+n)/2,a=s===0?2*r/(i+r):2*n/(s+n);return[e,a*100,o*100]};F.hsv.rgb=function(t){const e=t[0]/60,n=t[1]/100;let s=t[2]/100;const r=Math.floor(e)%6,i=e-Math.floor(e),o=255*s*(1-n),a=255*s*(1-n*i),l=255*s*(1-n*(1-i));switch(s*=255,r){case 0:return[s,l,o];case 1:return[a,s,o];case 2:return[o,s,l];case 3:return[o,a,s];case 4:return[l,o,s];case 5:return[s,o,a]}};F.hsv.hsl=function(t){const e=t[0],n=t[1]/100,s=t[2]/100,r=Math.max(s,.01);let i,o;o=(2-n)*s;const a=(2-n)*r;return i=n*r,i/=a<=1?a:2-a,i=i||0,o/=2,[e,i*100,o*100]};F.hwb.rgb=function(t){const e=t[0]/360;let n=t[1]/100,s=t[2]/100;const r=n+s;let i;r>1&&(n/=r,s/=r);const o=Math.floor(6*e),a=1-s;i=6*e-o,(o&1)!==0&&(i=1-i);const l=n+i*(a-n);let c,u,f;switch(o){default:case 6:case 0:{c=a,u=l,f=n;break}case 1:{c=l,u=a,f=n;break}case 2:{c=n,u=a,f=l;break}case 3:{c=n,u=l,f=a;break}case 4:{c=l,u=n,f=a;break}case 5:{c=a,u=n,f=l;break}}return[c*255,u*255,f*255]};F.cmyk.rgb=function(t){const e=t[0]/100,n=t[1]/100,s=t[2]/100,r=t[3]/100,i=1-Math.min(1,e*(1-r)+r),o=1-Math.min(1,n*(1-r)+r),a=1-Math.min(1,s*(1-r)+r);return[i*255,o*255,a*255]};F.xyz.rgb=function(t){const e=t[0]/100,n=t[1]/100,s=t[2]/100;let r,i,o;return r=e*3.2404542+n*-1.5371385+s*-.4985314,i=e*-.969266+n*1.8760108+s*.041556,o=e*.0556434+n*-.2040259+s*1.0572252,r=as(r),i=as(i),o=as(o),[r*255,i*255,o*255]};F.xyz.lab=function(t){let e=t[0],n=t[1],s=t[2];e/=95.047,n/=100,s/=108.883,e=e>Wt?e**(1/3):7.787*e+16/116,n=n>Wt?n**(1/3):7.787*n+16/116,s=s>Wt?s**(1/3):7.787*s+16/116;const r=116*n-16,i=500*(e-n),o=200*(n-s);return[r,i,o]};F.xyz.oklab=function(t){const e=t[0]/100,n=t[1]/100,s=t[2]/100,r=Math.cbrt(.8189330101*e+.3618667424*n-.1288597137*s),i=Math.cbrt(.0329845436*e+.9293118715*n+.0361456387*s),o=Math.cbrt(.0482003018*e+.2643662691*n+.633851707*s),a=.2104542553*r+.793617785*i-.0040720468*o,l=1.9779984951*r-2.428592205*i+.4505937099*o,c=.0259040371*r+.7827717662*i-.808675766*o;return[a*100,l*100,c*100]};F.oklab.oklch=function(t){return F.lab.lch(t)};F.oklab.xyz=function(t){const e=t[0]/100,n=t[1]/100,s=t[2]/100,r=(.999999998*e+.396337792*n+.215803758*s)**3,i=(1.000000008*e-.105561342*n-.063854175*s)**3,o=(1.000000055*e-.089484182*n-1.291485538*s)**3,a=1.227013851*r-.55779998*i+.281256149*o,l=-.040580178*r+1.11225687*i-.071676679*o,c=-.076381285*r-.421481978*i+1.58616322*o;return[a*100,l*100,c*100]};F.oklab.rgb=function(t){const e=t[0]/100,n=t[1]/100,s=t[2]/100,r=(e+.3963377774*n+.2158037573*s)**3,i=(e-.1055613458*n-.0638541728*s)**3,o=(e-.0894841775*n-1.291485548*s)**3,a=as(4.0767416621*r-3.3077115913*i+.2309699292*o),l=as(-1.2684380046*r+2.6097574011*i-.3413193965*o),c=as(-.0041960863*r-.7034186147*i+1.707614701*o);return[a*255,l*255,c*255]};F.oklch.oklab=function(t){return F.lch.lab(t)};F.lab.xyz=function(t){const e=t[0],n=t[1],s=t[2];let r,i,o;i=(e+16)/116,r=n/500+i,o=i-s/200;const a=i**3,l=r**3,c=o**3;return i=a>Wt?a:(i-16/116)/7.787,r=l>Wt?l:(r-16/116)/7.787,o=c>Wt?c:(o-16/116)/7.787,r*=95.047,i*=100,o*=108.883,[r,i,o]};F.lab.lch=function(t){const e=t[0],n=t[1],s=t[2];let r;r=Math.atan2(s,n)*360/2/Math.PI,r<0&&(r+=360);const o=Math.sqrt(n*n+s*s);return[e,o,r]};F.lch.lab=function(t){const e=t[0],n=t[1],r=t[2]/360*2*Math.PI,i=n*Math.cos(r),o=n*Math.sin(r);return[e,i,o]};F.rgb.ansi16=function(t,e=null){const[n,s,r]=t;let i=e===null?F.rgb.hsv(t)[2]:e;if(i=Math.round(i/50),i===0)return 30;let o=30+(Math.round(r/255)<<2|Math.round(s/255)<<1|Math.round(n/255));return i===2&&(o+=60),o};F.hsv.ansi16=function(t){return F.rgb.ansi16(F.hsv.rgb(t),t[2])};F.rgb.ansi256=function(t){const e=t[0],n=t[1],s=t[2];return e>>4===n>>4&&n>>4===s>>4?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(n/255*5)+Math.round(s/255*5)};F.ansi16.rgb=function(t){t=t[0];let e=t%10;if(e===0||e===7)return t>50&&(e+=3.5),e=e/10.5*255,[e,e,e];const n=(Math.trunc(t>50)+1)*.5,s=(e&1)*n*255,r=(e>>1&1)*n*255,i=(e>>2&1)*n*255;return[s,r,i]};F.ansi256.rgb=function(t){if(t=t[0],t>=232){const i=(t-232)*10+8;return[i,i,i]}t-=16;let e;const n=Math.floor(t/36)/5*255,s=Math.floor((e=t%36)/6)/5*255,r=e%6/5*255;return[n,s,r]};F.rgb.hex=function(t){const n=(((Math.round(t[0])&255)<<16)+((Math.round(t[1])&255)<<8)+(Math.round(t[2])&255)).toString(16).toUpperCase();return"000000".slice(n.length)+n};F.hex.rgb=function(t){const e=t.toString(16).match(/[a-f\d]{6}|[a-f\d]{3}/i);if(!e)return[0,0,0];let n=e[0];e[0].length===3&&(n=[...n].map(a=>a+a).join(""));const s=Number.parseInt(n,16),r=s>>16&255,i=s>>8&255,o=s&255;return[r,i,o]};F.rgb.hcg=function(t){const e=t[0]/255,n=t[1]/255,s=t[2]/255,r=Math.max(Math.max(e,n),s),i=Math.min(Math.min(e,n),s),o=r-i;let a;const l=o<1?i/(1-o):0;return o<=0?a=0:r===e?a=(n-s)/o%6:r===n?a=2+(s-e)/o:a=4+(e-n)/o,a/=6,a%=1,[a*360,o*100,l*100]};F.hsl.hcg=function(t){const e=t[1]/100,n=t[2]/100,s=n<.5?2*e*n:2*e*(1-n);let r=0;return s<1&&(r=(n-.5*s)/(1-s)),[t[0],s*100,r*100]};F.hsv.hcg=function(t){const e=t[1]/100,n=t[2]/100,s=e*n;let r=0;return s<1&&(r=(n-s)/(1-s)),[t[0],s*100,r*100]};F.hcg.rgb=function(t){const e=t[0]/360,n=t[1]/100,s=t[2]/100;if(n===0)return[s*255,s*255,s*255];const r=[0,0,0],i=e%1*6,o=i%1,a=1-o;let l=0;switch(Math.floor(i)){case 0:{r[0]=1,r[1]=o,r[2]=0;break}case 1:{r[0]=a,r[1]=1,r[2]=0;break}case 2:{r[0]=0,r[1]=1,r[2]=o;break}case 3:{r[0]=0,r[1]=a,r[2]=1;break}case 4:{r[0]=o,r[1]=0,r[2]=1;break}default:r[0]=1,r[1]=0,r[2]=a}return l=(1-n)*s,[(n*r[0]+l)*255,(n*r[1]+l)*255,(n*r[2]+l)*255]};F.hcg.hsv=function(t){const e=t[1]/100,n=t[2]/100,s=e+n*(1-e);let r=0;return s>0&&(r=e/s),[t[0],r*100,s*100]};F.hcg.hsl=function(t){const e=t[1]/100,s=t[2]/100*(1-e)+.5*e;let r=0;return s>0&&s<.5?r=e/(2*s):s>=.5&&s<1&&(r=e/(2*(1-s))),[t[0],r*100,s*100]};F.hcg.hwb=function(t){const e=t[1]/100,n=t[2]/100,s=e+n*(1-e);return[t[0],(s-e)*100,(1-s)*100]};F.hwb.hcg=function(t){const e=t[1]/100,s=1-t[2]/100,r=s-e;let i=0;return r<1&&(i=(s-r)/(1-r)),[t[0],r*100,i*100]};F.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]};F.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]};F.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]};F.gray.hsl=function(t){return[0,0,t[0]]};F.gray.hsv=F.gray.hsl;F.gray.hwb=function(t){return[0,100,t[0]]};F.gray.cmyk=function(t){return[0,0,0,t[0]]};F.gray.lab=function(t){return[t[0],0,0]};F.gray.hex=function(t){const e=Math.round(t[0]/100*255)&255,s=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".slice(s.length)+s};F.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]};function gd(){const t={},e=Object.keys(F);for(let{length:n}=e,s=0;s<n;s++)t[e[s]]={distance:-1,parent:null};return t}function yd(t){const e=gd(),n=[t];for(e[t].distance=0;n.length>0;){const s=n.pop(),r=Object.keys(F[s]);for(let{length:i}=r,o=0;o<i;o++){const a=r[o],l=e[a];l.distance===-1&&(l.distance=e[s].distance+1,l.parent=s,n.unshift(a))}}return e}function bd(t,e){return function(n){return e(t(n))}}function wd(t,e){const n=[e[t].parent,t];let s=F[e[t].parent][t],r=e[t].parent;for(;e[r].parent;)n.unshift(e[r].parent),s=bd(F[e[r].parent][r],s),r=e[r].parent;return s.conversion=n,s}function vd(t){const e=yd(t),n={},s=Object.keys(e);for(let{length:r}=s,i=0;i<r;i++){const o=s[i];e[o].parent!==null&&(n[o]=wd(o,e))}return n}const $e={},xd=Object.keys(F);function _d(t){const e=function(...n){const s=n[0];return s==null?s:(s.length>1&&(n=s),t(n))};return"conversion"in t&&(e.conversion=t.conversion),e}function Ed(t){const e=function(...n){const s=n[0];if(s==null)return s;s.length>1&&(n=s);const r=t(n);if(typeof r=="object")for(let{length:i}=r,o=0;o<i;o++)r[o]=Math.round(r[o]);return r};return"conversion"in t&&(e.conversion=t.conversion),e}for(const t of xd){$e[t]={},Object.defineProperty($e[t],"channels",{value:F[t].channels}),Object.defineProperty($e[t],"labels",{value:F[t].labels});const e=vd(t),n=Object.keys(e);for(const s of n){const r=e[s];$e[t][s]=Ed(r),$e[t][s].raw=_d(r)}}const Hl=["keyword","gray","hex"],Gi={};for(const t of Object.keys($e))Gi[[...$e[t].labels].sort().join("")]=t;const qi={};function pe(t,e){if(!(this instanceof pe))return new pe(t,e);if(e&&e in Hl&&(e=null),e&&!(e in $e))throw new Error("Unknown model: "+e);let n,s;if(t==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(t instanceof pe)this.model=t.model,this.color=[...t.color],this.valpha=t.valpha;else if(typeof t=="string"){const r=Me.get(t);if(r===null)throw new Error("Unable to parse color from string: "+t);this.model=r.model,s=$e[this.model].channels,this.color=r.value.slice(0,s),this.valpha=typeof r.value[s]=="number"?r.value[s]:1}else if(t.length>0){this.model=e||"rgb",s=$e[this.model].channels;const r=Array.prototype.slice.call(t,0,s);this.color=Ki(r,s),this.valpha=typeof t[s]=="number"?t[s]:1}else if(typeof t=="number")this.model="rgb",this.color=[t>>16&255,t>>8&255,t&255],this.valpha=1;else{this.valpha=1;const r=Object.keys(t);"alpha"in t&&(r.splice(r.indexOf("alpha"),1),this.valpha=typeof t.alpha=="number"?t.alpha:0);const i=r.sort().join("");if(!(i in Gi))throw new Error("Unable to parse color from object: "+JSON.stringify(t));this.model=Gi[i];const{labels:o}=$e[this.model],a=[];for(n=0;n<o.length;n++)a.push(t[o[n]]);this.color=Ki(a)}if(qi[this.model])for(s=$e[this.model].channels,n=0;n<s;n++){const r=qi[this.model][n];r&&(this.color[n]=r(this.color[n]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}pe.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(t){let e=this.model in Me.to?this:this.rgb();e=e.round(typeof t=="number"?t:1);const n=e.valpha===1?e.color:[...e.color,this.valpha];return Me.to[e.model](...n)},percentString(t){const e=this.rgb().round(typeof t=="number"?t:1),n=e.valpha===1?e.color:[...e.color,this.valpha];return Me.to.rgb.percent(...n)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const t={},{channels:e}=$e[this.model],{labels:n}=$e[this.model];for(let s=0;s<e;s++)t[n[s]]=this.color[s];return this.valpha!==1&&(t.alpha=this.valpha),t},unitArray(){const t=this.rgb().color;return t[0]/=255,t[1]/=255,t[2]/=255,this.valpha!==1&&t.push(this.valpha),t},unitObject(){const t=this.rgb().object();return t.r/=255,t.g/=255,t.b/=255,this.valpha!==1&&(t.alpha=this.valpha),t},round(t){return t=Math.max(t||0,0),new pe([...this.color.map(kd(t)),this.valpha],this.model)},alpha(t){return t!==void 0?new pe([...this.color,Math.max(0,Math.min(1,t))],this.model):this.valpha},red:Ee("rgb",0,Ie(255)),green:Ee("rgb",1,Ie(255)),blue:Ee("rgb",2,Ie(255)),hue:Ee(["hsl","hsv","hsl","hwb","hcg"],0,t=>(t%360+360)%360),saturationl:Ee("hsl",1,Ie(100)),lightness:Ee("hsl",2,Ie(100)),saturationv:Ee("hsv",1,Ie(100)),value:Ee("hsv",2,Ie(100)),chroma:Ee("hcg",1,Ie(100)),gray:Ee("hcg",2,Ie(100)),white:Ee("hwb",1,Ie(100)),wblack:Ee("hwb",2,Ie(100)),cyan:Ee("cmyk",0,Ie(100)),magenta:Ee("cmyk",1,Ie(100)),yellow:Ee("cmyk",2,Ie(100)),black:Ee("cmyk",3,Ie(100)),x:Ee("xyz",0,Ie(95.047)),y:Ee("xyz",1,Ie(100)),z:Ee("xyz",2,Ie(108.833)),l:Ee("lab",0,Ie(100)),a:Ee("lab",1),b:Ee("lab",2),keyword(t){return t!==void 0?new pe(t):$e[this.model].keyword(this.color)},hex(t){return t!==void 0?new pe(t):Me.to.hex(...this.rgb().round().color)},hexa(t){if(t!==void 0)return new pe(t);const e=this.rgb().round().color;let n=Math.round(this.valpha*255).toString(16).toUpperCase();return n.length===1&&(n="0"+n),Me.to.hex(...e)+n},rgbNumber(){const t=this.rgb().color;return(t[0]&255)<<16|(t[1]&255)<<8|t[2]&255},luminosity(){const t=this.rgb().color,e=[];for(const[n,s]of t.entries()){const r=s/255;e[n]=r<=.04045?r/12.92:((r+.055)/1.055)**2.4}return .2126*e[0]+.7152*e[1]+.0722*e[2]},contrast(t){const e=this.luminosity(),n=t.luminosity();return e>n?(e+.05)/(n+.05):(n+.05)/(e+.05)},level(t){const e=this.contrast(t);return e>=7?"AAA":e>=4.5?"AA":""},isDark(){const t=this.rgb().color;return(t[0]*2126+t[1]*7152+t[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const t=this.rgb();for(let e=0;e<3;e++)t.color[e]=255-t.color[e];return t},lighten(t){const e=this.hsl();return e.color[2]+=e.color[2]*t,e},darken(t){const e=this.hsl();return e.color[2]-=e.color[2]*t,e},saturate(t){const e=this.hsl();return e.color[1]+=e.color[1]*t,e},desaturate(t){const e=this.hsl();return e.color[1]-=e.color[1]*t,e},whiten(t){const e=this.hwb();return e.color[1]+=e.color[1]*t,e},blacken(t){const e=this.hwb();return e.color[2]+=e.color[2]*t,e},grayscale(){const t=this.rgb().color,e=t[0]*.3+t[1]*.59+t[2]*.11;return pe.rgb(e,e,e)},fade(t){return this.alpha(this.valpha-this.valpha*t)},opaquer(t){return this.alpha(this.valpha+this.valpha*t)},rotate(t){const e=this.hsl();let n=e.color[0];return n=(n+t)%360,n=n<0?360+n:n,e.color[0]=n,e},mix(t,e){if(!t||!t.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof t);const n=t.rgb(),s=this.rgb(),r=e===void 0?.5:e,i=2*r-1,o=n.alpha()-s.alpha(),a=((i*o===-1?i:(i+o)/(1+i*o))+1)/2,l=1-a;return pe.rgb(a*n.red()+l*s.red(),a*n.green()+l*s.green(),a*n.blue()+l*s.blue(),n.alpha()*r+s.alpha()*(1-r))}};for(const t of Object.keys($e)){if(Hl.includes(t))continue;const{channels:e}=$e[t];pe.prototype[t]=function(...n){return this.model===t?new pe(this):n.length>0?new pe(n,t):new pe([...Td($e[this.model][t].raw(this.color)),this.valpha],t)},pe[t]=function(...n){let s=n[0];return typeof s=="number"&&(s=Ki(n,e)),new pe(s,t)}}function Sd(t,e){return Number(t.toFixed(e))}function kd(t){return function(e){return Sd(e,t)}}function Ee(t,e,n){t=Array.isArray(t)?t:[t];for(const s of t)(qi[s]||=[])[e]=n;return t=t[0],function(s){let r;return s!==void 0?(n&&(s=n(s)),r=this[t](),r.color[e]=s,r):(r=this[t]().color[e],n&&(r=n(r)),r)}}function Ie(t){return function(e){return Math.max(0,Math.min(t,e))}}function Td(t){return Array.isArray(t)?t:[t]}function Ki(t,e){for(let n=0;n<e;n++)typeof t[n]!="number"&&(t[n]=0);return t}function Z(...t){return Sf(Gl(t))}function Xl(t,e=.5){return pe(t).darken(e).hex()}function Yt(t){return-t*(Math.PI/180)}function Ql(t){const e=new ArrayBuffer(t.byteLength);return new Uint8Array(e).set(new Uint8Array(t)),e}function Ad(t){if(t===0)return"0";const e=1e-6;let n=1,s=0,r=0,i=1,o=t;do{const a=Math.floor(o);let l=n;n=a*n+s,s=l,l=r,r=a*r+i,i=l,o=1/(o-a)}while(Math.abs(t-n/r)>t*e);return`${n}/${r}`}function Nd(t){switch(t){case"XZ":return[0,0,0];case"XY":return[-Math.PI/2,0,0];case"YZ":return[0,0,Math.PI/2];default:return[0,0,0]}}function Hi(t){const e=L.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=Z("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx(wf,{"data-slot":"resizable-panel-group",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function es(t){const e=L.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let s;return e[2]!==n?(s=h.jsx(yf,{"data-slot":"resizable-panel",...n}),e[2]=n,e[3]=s):s=e[3],s}function Xi(t){const e=L.c(12);let n,s,r;e[0]!==t?({withHandle:r,className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r):(n=e[1],s=e[2],r=e[3]);let i;e[4]!==n?(i=Z("bg-border focus-visible:ring-ring relative flex w-px items-center justify-center after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:ring-1 focus-visible:ring-offset-1 focus-visible:outline-hidden data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:translate-x-0 data-[panel-group-direction=vertical]:after:-translate-y-1/2 [&[data-panel-group-direction=vertical]>div]:rotate-90 hover:bg-primary",n),e[4]=n,e[5]=i):i=e[5];let o;e[6]!==r?(o=r&&h.jsx("div",{className:"bg-border z-10 flex h-4 w-3 items-center justify-center rounded-xs border",children:h.jsx(kf,{className:"size-2.5"})}),e[6]=r,e[7]=o):o=e[7];let a;return e[8]!==s||e[9]!==i||e[10]!==o?(a=h.jsx(bf,{"data-slot":"resizable-handle",className:i,...s,children:o}),e[8]=s,e[9]=i,e[10]=o,e[11]=a):a=e[11],a}function Cd(t){const e=L.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let s;return e[2]!==n?(s=h.jsx(Kf,{"data-slot":"dialog",...n}),e[2]=n,e[3]=s):s=e[3],s}function Od(t){const e=L.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let s;return e[2]!==n?(s=h.jsx(Hf,{"data-slot":"dialog-portal",...n}),e[2]=n,e[3]=s):s=e[3],s}function jd(t){const e=L.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=Z("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50 backdrop-blur",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx(Qf,{"data-slot":"dialog-overlay",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function Id(t){const e=L.c(15);let n,s,r,i;e[0]!==t?({className:s,children:n,showCloseButton:i,...r}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r,e[4]=i):(n=e[1],s=e[2],r=e[3],i=e[4]);const o=i===void 0?!0:i;let a;e[5]===Symbol.for("react.memo_cache_sentinel")?(a=h.jsx(jd,{}),e[5]=a):a=e[5];let l;e[6]!==s?(l=Z("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",s),e[6]=s,e[7]=l):l=e[7];let c;e[8]!==o?(c=o&&h.jsxs(Xf,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[h.jsx(Pl,{}),h.jsx("span",{className:"sr-only",children:"Close"})]}),e[8]=o,e[9]=c):c=e[9];let u;return e[10]!==n||e[11]!==r||e[12]!==l||e[13]!==c?(u=h.jsxs(Od,{"data-slot":"dialog-portal",children:[a,h.jsxs(Gf,{"data-slot":"dialog-content",className:l,...r,children:[n,c]})]}),e[10]=n,e[11]=r,e[12]=l,e[13]=c,e[14]=u):u=e[14],u}function Md(t){const e=L.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=Z("flex flex-col gap-2 text-center sm:text-left",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx("div",{"data-slot":"dialog-header",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function Rd(t){const e=L.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=Z("text-lg leading-none font-semibold",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx(Yf,{"data-slot":"dialog-title",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function Pd(t){const e=L.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=Z("text-muted-foreground text-sm",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx(qf,{"data-slot":"dialog-description",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function $d(t){const e=L.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=Z("bg-background flex h-9 items-center gap-1 rounded-md border p-1 shadow-xs",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx(sh,{"data-slot":"menubar",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function ya(t){const e=L.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let s;return e[2]!==n?(s=h.jsx(th,{"data-slot":"menubar-menu",...n}),e[2]=n,e[3]=s):s=e[3],s}function Dd(t){const e=L.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let s;return e[2]!==n?(s=h.jsx(rh,{"data-slot":"menubar-portal",...n}),e[2]=n,e[3]=s):s=e[3],s}function Ld(t){const e=L.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=Z("focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground flex items-center rounded-sm px-2 py-1 text-sm font-medium outline-hidden select-none",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx(Jf,{"data-slot":"menubar-trigger",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function zd(t){const e=L.c(14);let n,s,r,i,o;e[0]!==t?({className:n,align:r,alignOffset:i,sideOffset:o,...s}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r,e[4]=i,e[5]=o):(n=e[1],s=e[2],r=e[3],i=e[4],o=e[5]);const a=r===void 0?"start":r,l=i===void 0?-4:i,c=o===void 0?8:o;let u;e[6]!==n?(u=Z("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[12rem] origin-(--radix-menubar-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-md",n),e[6]=n,e[7]=u):u=e[7];let f;return e[8]!==a||e[9]!==l||e[10]!==s||e[11]!==c||e[12]!==u?(f=h.jsx(Dd,{children:h.jsx(nh,{"data-slot":"menubar-content",align:a,alignOffset:l,sideOffset:c,className:u,...s})}),e[8]=a,e[9]=l,e[10]=s,e[11]=c,e[12]=u,e[13]=f):f=e[13],f}function qn(t){const e=L.c(12);let n,s,r,i;e[0]!==t?({className:n,inset:s,variant:i,...r}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r,e[4]=i):(n=e[1],s=e[2],r=e[3],i=e[4]);const o=i===void 0?"default":i;let a;e[5]!==n?(a=Z("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",n),e[5]=n,e[6]=a):a=e[6];let l;return e[7]!==s||e[8]!==r||e[9]!==a||e[10]!==o?(l=h.jsx(eh,{"data-slot":"menubar-item","data-inset":s,"data-variant":o,className:a,...r}),e[7]=s,e[8]=r,e[9]=a,e[10]=o,e[11]=l):l=e[11],l}function Ci(t){const e=L.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=Z("bg-border -mx-1 my-1 h-px",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx(Dl,{"data-slot":"menubar-separator",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function ba(t){const e=L.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=Z("text-muted-foreground ml-auto text-xs tracking-widest",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx("span",{"data-slot":"menubar-shortcut",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function Fr(t){const e=L.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let s;return e[2]!==n?(s=h.jsx(ih,{"data-slot":"select",...n}),e[2]=n,e[3]=s):s=e[3],s}function Qi(t){const e=L.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let s;return e[2]!==n?(s=h.jsx(uh,{"data-slot":"select-group",...n}),e[2]=n,e[3]=s):s=e[3],s}function Br(t){const e=L.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let s;return e[2]!==n?(s=h.jsx(ah,{"data-slot":"select-value",...n}),e[2]=n,e[3]=s):s=e[3],s}function Ur(t){const e=L.c(13);let n,s,r,i;e[0]!==t?({className:s,size:i,children:n,...r}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r,e[4]=i):(n=e[1],s=e[2],r=e[3],i=e[4]);const o=i===void 0?"default":i;let a;e[5]!==s?(a=Z("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 mt-2",s),e[5]=s,e[6]=a):a=e[6];let l;e[7]===Symbol.for("react.memo_cache_sentinel")?(l=h.jsx(dh,{asChild:!0,children:h.jsx($l,{className:"size-4 opacity-50"})}),e[7]=l):l=e[7];let c;return e[8]!==n||e[9]!==r||e[10]!==o||e[11]!==a?(c=h.jsxs(oh,{"data-slot":"select-trigger","data-size":o,className:a,...r,children:[n,l]}),e[8]=n,e[9]=r,e[10]=o,e[11]=a,e[12]=c):c=e[12],c}function Zr(t){const e=L.c(20);let n,s,r,i;e[0]!==t?({className:s,children:n,position:i,...r}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r,e[4]=i):(n=e[1],s=e[2],r=e[3],i=e[4]);const o=i===void 0?"popper":i,a=o==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1";let l;e[5]!==s||e[6]!==a?(l=Z("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",a,s),e[5]=s,e[6]=a,e[7]=l):l=e[7];let c;e[8]===Symbol.for("react.memo_cache_sentinel")?(c=h.jsx(Fd,{}),e[8]=c):c=e[8];const u=o==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1";let f;e[9]!==u?(f=Z("p-1",u),e[9]=u,e[10]=f):f=e[10];let d;e[11]!==n||e[12]!==f?(d=h.jsx(ph,{className:f,children:n}),e[11]=n,e[12]=f,e[13]=d):d=e[13];let p;e[14]===Symbol.for("react.memo_cache_sentinel")?(p=h.jsx(Bd,{}),e[14]=p):p=e[14];let y;return e[15]!==o||e[16]!==r||e[17]!==l||e[18]!==d?(y=h.jsx(lh,{children:h.jsxs(ch,{"data-slot":"select-content",className:l,position:o,...r,children:[c,d,p]})}),e[15]=o,e[16]=r,e[17]=l,e[18]=d,e[19]=y):y=e[19],y}function Ji(t){const e=L.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=Z("text-muted-foreground px-2 py-1.5 text-xs",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx(fh,{"data-slot":"select-label",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function Mn(t){const e=L.c(13);let n,s,r;e[0]!==t?({className:s,children:n,...r}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r):(n=e[1],s=e[2],r=e[3]);let i;e[4]!==s?(i=Z("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",s),e[4]=s,e[5]=i):i=e[5];let o;e[6]===Symbol.for("react.memo_cache_sentinel")?(o=h.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:h.jsx(mh,{children:h.jsx(Tf,{className:"size-4"})})}),e[6]=o):o=e[6];let a;e[7]!==n?(a=h.jsx(gh,{children:n}),e[7]=n,e[8]=a):a=e[8];let l;return e[9]!==r||e[10]!==i||e[11]!==a?(l=h.jsxs(hh,{"data-slot":"select-item",className:i,...r,children:[o,a]}),e[9]=r,e[10]=i,e[11]=a,e[12]=l):l=e[12],l}function Fd(t){const e=L.c(9);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=Z("flex cursor-default items-center justify-center py-1",n),e[3]=n,e[4]=r):r=e[4];let i;e[5]===Symbol.for("react.memo_cache_sentinel")?(i=h.jsx(Af,{className:"size-4"}),e[5]=i):i=e[5];let o;return e[6]!==s||e[7]!==r?(o=h.jsx(yh,{"data-slot":"select-scroll-up-button",className:r,...s,children:i}),e[6]=s,e[7]=r,e[8]=o):o=e[8],o}function Bd(t){const e=L.c(9);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=Z("flex cursor-default items-center justify-center py-1",n),e[3]=n,e[4]=r):r=e[4];let i;e[5]===Symbol.for("react.memo_cache_sentinel")?(i=h.jsx($l,{className:"size-4"}),e[5]=i):i=e[5];let o;return e[6]!==s||e[7]!==r?(o=h.jsx(bh,{"data-slot":"select-scroll-down-button",className:r,...s,children:i}),e[6]=s,e[7]=r,e[8]=o):o=e[8],o}function Ud(t){const e=L.c(6);let n,s;e[0]!==t?({delayDuration:s,...n}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);const r=s===void 0?0:s;let i;return e[3]!==r||e[4]!==n?(i=h.jsx(Eh,{"data-slot":"tooltip-provider",delayDuration:r,...n}),e[3]=r,e[4]=n,e[5]=i):i=e[5],i}function ln(t){const e=L.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let s;return e[2]!==n?(s=h.jsx(Ud,{children:h.jsx(vh,{"data-slot":"tooltip",...n})}),e[2]=n,e[3]=s):s=e[3],s}function cn(t){const e=L.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let s;return e[2]!==n?(s=h.jsx(wh,{"data-slot":"tooltip-trigger",...n}),e[2]=n,e[3]=s):s=e[3],s}function un(t){const e=L.c(13);let n,s,r,i;e[0]!==t?({className:s,sideOffset:i,children:n,...r}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r,e[4]=i):(n=e[1],s=e[2],r=e[3],i=e[4]);const o=i===void 0?0:i;let a;e[5]!==s?(a=Z("bg-secondary text-secondary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",s),e[5]=s,e[6]=a):a=e[6];let l;e[7]===Symbol.for("react.memo_cache_sentinel")?(l=h.jsx(Sh,{className:"bg-secondary fill-secondary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"}),e[7]=l):l=e[7];let c;return e[8]!==n||e[9]!==r||e[10]!==o||e[11]!==a?(c=h.jsx(xh,{children:h.jsxs(_h,{"data-slot":"tooltip-content",sideOffset:o,className:a,...r,children:[n,l]})}),e[8]=n,e[9]=r,e[10]=o,e[11]=a,e[12]=c):c=e[12],c}const wa=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,va=Gl,Jl=(t,e)=>n=>{var s;if(e?.variants==null)return va(t,n?.class,n?.className);const{variants:r,defaultVariants:i}=e,o=Object.keys(r).map(c=>{const u=n?.[c],f=i?.[c];if(u===null)return null;const d=wa(u)||wa(f);return r[c][d]}),a=n&&Object.entries(n).reduce((c,u)=>{let[f,d]=u;return d===void 0||(c[f]=d),c},{}),l=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((c,u)=>{let{class:f,className:d,...p}=u;return Object.entries(p).every(y=>{let[g,b]=y;return Array.isArray(b)?b.includes({...i,...a}[g]):{...i,...a}[g]===b})?[...c,f,d]:c},[]);return va(t,o,l,n?.class,n?.className)},ec=Jl("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive cursor-pointer",{variants:{variant:{default:"bg-primary text-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function ze(t){const e=L.c(14);let n,s,r,i,o;e[0]!==t?({className:n,variant:o,size:r,asChild:i,...s}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r,e[4]=i,e[5]=o):(n=e[1],s=e[2],r=e[3],i=e[4],o=e[5]);const l=(i===void 0?!1:i)?kh:"button";let c;e[6]!==n||e[7]!==r||e[8]!==o?(c=Z(ec({variant:o,size:r,className:n})),e[6]=n,e[7]=r,e[8]=o,e[9]=c):c=e[9];let u;return e[10]!==l||e[11]!==s||e[12]!==c?(u=h.jsx(l,{"data-slot":"button",className:c,...s}),e[10]=l,e[11]=s,e[12]=c,e[13]=u):u=e[13],u}function Zd(t){const e=L.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let s;return e[2]!==n?(s=h.jsx(Ch,{"data-slot":"popover",...n}),e[2]=n,e[3]=s):s=e[3],s}function Vd(t){const e=L.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let s;return e[2]!==n?(s=h.jsx(Th,{"data-slot":"popover-trigger",...n}),e[2]=n,e[3]=s):s=e[3],s}function Wd(t){const e=L.c(12);let n,s,r,i;e[0]!==t?({className:n,align:r,sideOffset:i,...s}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r,e[4]=i):(n=e[1],s=e[2],r=e[3],i=e[4]);const o=r===void 0?"center":r,a=i===void 0?4:i;let l;e[5]!==n?(l=Z("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",n),e[5]=n,e[6]=l):l=e[6];let c;return e[7]!==o||e[8]!==s||e[9]!==a||e[10]!==l?(c=h.jsx(Ah,{children:h.jsx(Nh,{"data-slot":"popover-content",align:o,sideOffset:a,className:l,...s})}),e[7]=o,e[8]=s,e[9]=a,e[10]=l,e[11]=c):c=e[11],c}function cs(t){const e=L.c(10);let n,s,r;e[0]!==t?({className:n,type:r,...s}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r):(n=e[1],s=e[2],r=e[3]);let i;e[4]!==n?(i=Z("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm mt-2","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",n),e[4]=n,e[5]=i):i=e[5];let o;return e[6]!==s||e[7]!==i||e[8]!==r?(o=h.jsx("input",{type:r,"data-slot":"input",className:i,...s}),e[6]=s,e[7]=i,e[8]=r,e[9]=o):o=e[9],o}const tc=P.createContext(void 0),ri=()=>{const t=P.useContext(tc);if(!t)throw new Error("useColorPicker must be used within a ColorPickerProvider");return t},Yd=t=>{const e=L.c(37);let n,s,r,i,o;e[0]!==t?({value:o,defaultValue:i,onChange:s,className:n,...r}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r,e[4]=i,e[5]=o):(n=e[1],s=e[2],r=e[3],i=e[4],o=e[5]);const a=i===void 0?"#000000":i,l=pe(o),c=pe(a),[u,f]=P.useState(l.hue()||c.hue()||0),[d,p]=P.useState(l.saturationl()||c.saturationl()||100),[y,g]=P.useState(l.lightness()||c.lightness()||50),[b,m]=P.useState(l.alpha()*100||c.alpha()*100),[S,x]=P.useState("hex");let E;e[6]!==f||e[7]!==g||e[8]!==p||e[9]!==o?(E=()=>{if(o){const C=pe.rgb(o).rgb().object();f(C.r),p(C.g),g(C.b),m(C.a)}},e[6]=f,e[7]=g,e[8]=p,e[9]=o,e[10]=E):E=e[10];let _;e[11]!==o?(_=[o],e[11]=o,e[12]=_):_=e[12],P.useEffect(E,_);let T,w;e[13]!==b||e[14]!==u||e[15]!==y||e[16]!==s||e[17]!==d?(T=()=>{if(s){const O=pe.hsl(u,d,y).alpha(b/100).rgb().array();s([O[0],O[1],O[2],b/100])}},w=[u,d,y,b,s],e[13]=b,e[14]=u,e[15]=y,e[16]=s,e[17]=d,e[18]=T,e[19]=w):(T=e[18],w=e[19]),P.useEffect(T,w);let v;e[20]!==b||e[21]!==u||e[22]!==y||e[23]!==S||e[24]!==d||e[25]!==f||e[26]!==g||e[27]!==p?(v={hue:u,saturation:d,lightness:y,alpha:b,mode:S,setHue:f,setSaturation:p,setLightness:g,setAlpha:m,setMode:x},e[20]=b,e[21]=u,e[22]=y,e[23]=S,e[24]=d,e[25]=f,e[26]=g,e[27]=p,e[28]=v):v=e[28];let k;e[29]!==n?(k=Z("flex size-full flex-col gap-4",n),e[29]=n,e[30]=k):k=e[30];let A;e[31]!==r||e[32]!==k?(A=h.jsx("div",{className:k,...r}),e[31]=r,e[32]=k,e[33]=A):A=e[33];let N;return e[34]!==v||e[35]!==A?(N=h.jsx(tc.Provider,{value:v,children:A}),e[34]=v,e[35]=A,e[36]=N):N=e[36],N},nc=P.memo(t=>{const e=L.c(34);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);const r=P.useRef(null),{hue:i,saturation:o,lightness:a,setSaturation:l,setLightness:c}=ri(),[u,f]=P.useState(!1),[d,p]=P.useState(0),[y,g]=P.useState(0);let b;b=`linear-gradient(0deg, oklch(0 0 0), oklch(0 0 0 / 0%)),
			linear-gradient(90deg, oklch(1 0 0), oklch(1 0 0 / 0%)),
			hsl(${i}, 100%, 50%)`;const m=b;let S,x;e[3]!==a||e[4]!==o?(S=()=>{const B=o/100,z=B<.01?100:50+50*(1-B),G=1-a/z;p(B),g(G)},x=[o,a],e[3]=a,e[4]=o,e[5]=S,e[6]=x):(S=e[5],x=e[6]),P.useEffect(S,x);let E;e[7]!==c||e[8]!==l?(E=B=>{if(!r.current)return;const z=r.current.getBoundingClientRect(),G=Math.max(0,Math.min(1,(B.clientX-z.left)/z.width)),H=Math.max(0,Math.min(1,(B.clientY-z.top)/z.height));p(G),g(H),l(G*100);const W=(G<.01?100:50+50*(1-G))*(1-H);c(W)},e[7]=c,e[8]=l,e[9]=E):E=e[9];const _=E;let T;e[10]!==u||e[11]!==_?(T=B=>{u&&_(B)},e[10]=u,e[11]=_,e[12]=T):T=e[12];const w=T;let v,k;e[13]!==w||e[14]!==u?(v=()=>{const B=()=>f(!1);return u&&(window.addEventListener("pointermove",w),window.addEventListener("pointerup",B)),()=>{window.removeEventListener("pointermove",w),window.removeEventListener("pointerup",B)}},k=[u,w],e[13]=w,e[14]=u,e[15]=v,e[16]=k):(v=e[15],k=e[16]),P.useEffect(v,k);let A;e[17]!==n?(A=Z("relative size-full cursor-crosshair rounded",n),e[17]=n,e[18]=A):A=e[18];let N,C;e[19]!==_?(C=B=>{B.preventDefault(),f(!0),_(B)},N=B=>{_(B)},e[19]=_,e[20]=N,e[21]=C):(N=e[20],C=e[21]);let O;e[22]!==m?(O={background:m},e[22]=m,e[23]=O):O=e[23];const D=`${d*100}%`,M=`${y*100}%`;let R;e[24]!==D||e[25]!==M?(R=h.jsx("div",{className:"-translate-x-1/2 -translate-y-1/2 pointer-events-none absolute h-4 w-4 rounded-full border-2 border-white",style:{left:D,top:M,boxShadow:"0 0 0 1px rgba(0,0,0,0.5)"}}),e[24]=D,e[25]=M,e[26]=R):R=e[26];let $;return e[27]!==s||e[28]!==N||e[29]!==O||e[30]!==R||e[31]!==A||e[32]!==C?($=h.jsx("div",{className:A,onPointerDown:C,onClick:N,ref:r,style:O,...s,children:R}),e[27]=s,e[28]=N,e[29]=O,e[30]=R,e[31]=A,e[32]=C,e[33]=$):$=e[33],$});nc.displayName="ColorPickerSelection";const Gd=t=>{const e=L.c(16);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);const{hue:r,setHue:i}=ri();let o;e[3]!==n?(o=Z("relative flex h-4 w-full touch-none",n),e[3]=n,e[4]=o):o=e[4];let a;e[5]!==i?(a=d=>{const[p]=d;return i(p)},e[5]=i,e[6]=a):a=e[6];let l;e[7]!==r?(l=[r],e[7]=r,e[8]=l):l=e[8];let c,u;e[9]===Symbol.for("react.memo_cache_sentinel")?(c=h.jsx(zl,{className:"relative my-0.5 h-3 w-full grow rounded-full bg-[linear-gradient(90deg,#FF0000,#FFFF00,#00FF00,#00FFFF,#0000FF,#FF00FF,#FF0000)]",children:h.jsx(Fl,{className:"absolute h-full"})}),u=h.jsx(Bl,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"}),e[9]=c,e[10]=u):(c=e[9],u=e[10]);let f;return e[11]!==s||e[12]!==o||e[13]!==a||e[14]!==l?(f=h.jsxs(Ll,{className:o,max:360,onValueChange:a,step:1,value:l,...s,children:[c,u]}),e[11]=s,e[12]=o,e[13]=a,e[14]=l,e[15]=f):f=e[15],f},qd=t=>{const e=L.c(15);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);const{setHue:r,setSaturation:i,setLightness:o,setAlpha:a}=ri();let l;e[3]!==a||e[4]!==r||e[5]!==o||e[6]!==i?(l=async()=>{try{const y=await new EyeDropper().open(),g=pe(y.sRGBHex),[b,m,S]=g.hsl().array();r(b),i(m),o(S),a(100)}catch(p){console.error("EyeDropper failed:",p)}},e[3]=a,e[4]=r,e[5]=o,e[6]=i,e[7]=l):l=e[7];const c=l;let u;e[8]!==n?(u=Z("shrink-0 text-muted-foreground",n),e[8]=n,e[9]=u):u=e[9];let f;e[10]===Symbol.for("react.memo_cache_sentinel")?(f=h.jsx(Nf,{size:16}),e[10]=f):f=e[10];let d;return e[11]!==c||e[12]!==s||e[13]!==u?(d=h.jsx(ze,{className:u,onClick:c,size:"icon",variant:"outline",type:"button",...s,children:f}),e[11]=c,e[12]=s,e[13]=u,e[14]=d):d=e[14],d},Kd=t=>{const e=L.c(86);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);const{hue:r,saturation:i,lightness:o,alpha:a,mode:l,setHue:c,setSaturation:u,setLightness:f}=ri();let d,p,y;e[3]!==a||e[4]!==r||e[5]!==o||e[6]!==i?(d=pe.hsl(r,i,o,a/100),p=P.useState,y=d.hex(),e[3]=a,e[4]=r,e[5]=o,e[6]=i,e[7]=d,e[8]=p,e[9]=y):(d=e[7],p=e[8],y=e[9]);const[g,b]=p(y);let m,S;e[10]!==d||e[11]!==l?(m=()=>{l==="hex"&&b(d.hex())},S=[d,l],e[10]=d,e[11]=l,e[12]=m,e[13]=S):(m=e[12],S=e[13]),P.useEffect(m,S);let x;e[14]!==c||e[15]!==f||e[16]!==u?(x=k=>{b(k);try{const N=pe(k).hsl();c(N.hue()),u(N.saturationl()),f(N.lightness())}catch{}},e[14]=c,e[15]=f,e[16]=u,e[17]=x):x=e[17];const E=x;let _;e[18]!==d||e[19]!==l||e[20]!==c||e[21]!==f||e[22]!==u?(_=(k,A)=>{e:switch(l){case"rgb":{const N=d.rgb().array();N[k]=A;const C=pe.rgb(N).hsl();c(C.hue()),u(C.saturationl()),f(C.lightness());break e}case"hsl":{const N=d.hsl().array();N[k]=A,c(N[0]),u(N[1]),f(N[2])}}},e[18]=d,e[19]=l,e[20]=c,e[21]=f,e[22]=u,e[23]=_):_=e[23];const T=_;let w;e[24]!==n||e[25]!==T?(w=k=>k.map((A,N)=>h.jsx(cs,{className:Z("h-8 rounded-r-none bg-secondary px-2 text-xs shadow-none",N&&"rounded-l-none",n),type:"number",value:A,onChange:C=>T(N,Number(C.target.value))},N)),e[24]=n,e[25]=T,e[26]=w):w=e[26];const v=w;if(l==="hex"){let k;e[27]!==n?(k=Z("-space-x-px relative flex w-full items-center rounded-md shadow-sm",n),e[27]=n,e[28]=k):k=e[28];let A;e[29]!==E?(A=O=>E(O.target.value),e[29]=E,e[30]=A):A=e[30];let N;e[31]!==g||e[32]!==A?(N=h.jsx(cs,{className:"h-8 rounded-r-none bg-secondary px-2 text-xs shadow-none",type:"text",value:g,onChange:A}),e[31]=g,e[32]=A,e[33]=N):N=e[33];let C;return e[34]!==s||e[35]!==N||e[36]!==k?(C=h.jsx("div",{className:k,...s,children:N}),e[34]=s,e[35]=N,e[36]=k,e[37]=C):C=e[37],C}if(l==="rgb"){let k,A,N;if(e[38]!==n||e[39]!==d||e[40]!==s||e[41]!==v){const O=d.rgb().array().map(Hd);e[45]!==n?(A=Z("-space-x-px flex items-center rounded-md shadow-sm",n),e[45]=n,e[46]=A):A=e[46],N=s,k=v(O),e[38]=n,e[39]=d,e[40]=s,e[41]=v,e[42]=k,e[43]=A,e[44]=N}else k=e[42],A=e[43],N=e[44];let C;return e[47]!==k||e[48]!==A||e[49]!==N?(C=h.jsx("div",{className:A,...N,children:k}),e[47]=k,e[48]=A,e[49]=N,e[50]=C):C=e[50],C}if(l==="hsl"){let k,A,N;if(e[51]!==n||e[52]!==d||e[53]!==s||e[54]!==v){const O=d.hsl().array().map(Xd);e[58]!==n?(A=Z("-space-x-px flex items-center rounded-md shadow-sm",n),e[58]=n,e[59]=A):A=e[59],N=s,k=v(O),e[51]=n,e[52]=d,e[53]=s,e[54]=v,e[55]=k,e[56]=A,e[57]=N}else k=e[55],A=e[56],N=e[57];let C;return e[60]!==k||e[61]!==A||e[62]!==N?(C=h.jsx("div",{className:A,...N,children:k}),e[60]=k,e[61]=A,e[62]=N,e[63]=C):C=e[63],C}if(l==="css"){let k,A,N,C,O,D,M;if(e[64]!==n||e[65]!==d||e[66]!==s){const z=d.rgb().array().map(Qd);e[74]!==n?(C=Z("w-full rounded-md shadow-sm",n),e[74]=n,e[75]=C):C=e[75],O=s,k=cs,M="h-8 w-full bg-secondary px-2 text-xs shadow-none",A=!0,N="text",D=z.join(", "),e[64]=n,e[65]=d,e[66]=s,e[67]=k,e[68]=A,e[69]=N,e[70]=C,e[71]=O,e[72]=D,e[73]=M}else k=e[67],A=e[68],N=e[69],C=e[70],O=e[71],D=e[72],M=e[73];const R=`rgba(${D}, ${a}%)`;let $;e[76]!==k||e[77]!==A||e[78]!==N||e[79]!==R||e[80]!==M?($=h.jsx(k,{className:M,readOnly:A,type:N,value:R}),e[76]=k,e[77]=A,e[78]=N,e[79]=R,e[80]=M,e[81]=$):$=e[81];let B;return e[82]!==C||e[83]!==O||e[84]!==$?(B=h.jsx("div",{className:C,...O,children:$}),e[82]=C,e[83]=O,e[84]=$,e[85]=B):B=e[85],B}return null};function Hd(t){return Math.round(t)}function Xd(t){return Math.round(t)}function Qd(t){return Math.round(t)}function sc(t){const e=L.c(16),{defaultColor:n,onChangeComplete:s}=t;let r;e[0]!==n?(r=pe(n).hex(),e[0]=n,e[1]=r):r=e[1];const[i,o]=P.useState(r);let a,l;e[2]!==i||e[3]!==s?(l=Ul.debounce(b=>{const m=pe(b).hex();m!==i&&(o(m),s(m))},300),e[2]=i,e[3]=s,e[4]=l):l=e[4],a=l;const c=a;let u;e[5]!==i?(u=h.jsx(Vd,{asChild:!0,children:h.jsx(ze,{variant:"secondary",className:"w-full",children:h.jsx("div",{className:"h-full w-full rounded-md",style:{background:i}})})}),e[5]=i,e[6]=u):u=e[6];let f;e[7]===Symbol.for("react.memo_cache_sentinel")?(f=h.jsx(nc,{className:"aspect-square"}),e[7]=f):f=e[7];let d;e[8]===Symbol.for("react.memo_cache_sentinel")?(d=h.jsx("div",{className:"flex items-center gap-4",children:h.jsx(Gd,{})}),e[8]=d):d=e[8];let p;e[9]===Symbol.for("react.memo_cache_sentinel")?(p=h.jsxs("div",{className:"flex items-baseline gap-2",children:[h.jsx(qd,{}),h.jsx(Kd,{})]}),e[9]=p):p=e[9];let y;e[10]!==i||e[11]!==c?(y=h.jsx(Wd,{asChild:!0,children:h.jsxs(Yd,{className:"rounded-md border w-full shadow-md",defaultValue:i,onChange:c,children:[f,d,p]})}),e[10]=i,e[11]=c,e[12]=y):y=e[12];let g;return e[13]!==u||e[14]!==y?(g=h.jsxs(Zd,{children:[u,y]}),e[13]=u,e[14]=y,e[15]=g):g=e[15],g}function lt(t){const e=L.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=Z("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx(Oh,{"data-slot":"label",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function ur(t){const e=L.c(9);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=Z("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",n),e[3]=n,e[4]=r):r=e[4];let i;e[5]===Symbol.for("react.memo_cache_sentinel")?(i=h.jsx(jh,{"data-slot":"switch-thumb",className:Z("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")}),e[5]=i):i=e[5];let o;return e[6]!==s||e[7]!==r?(o=h.jsx(Ih,{"data-slot":"switch",className:r,...s,children:i}),e[6]=s,e[7]=r,e[8]=o):o=e[8],o}const Xs=Co()(Yh((t,e)=>({theme:"dark",saveInterval:300,debugText:!1,gridColor:"#92a3bb",SSAOEnabled:!0,DOFEnabled:!0,controlDamping:!1,angleSnap:11.25,distanceSnap:1/16,setTheme:n=>t({theme:n}),setSaveInterval:n=>t({saveInterval:n}),setDebugText:n=>t({debugText:n}),setGridColor:n=>t({gridColor:n}),setSSAOEnabled:n=>t({SSAOEnabled:n}),setDOFEnabled:n=>t({DOFEnabled:n}),setControlDamping:n=>t({controlDamping:n}),setAngleSnap:n=>t({angleSnap:n}),setDistanceSnap:n=>t({distanceSnap:n}),getComplementaryGridColor:()=>Xl(e().gridColor,.5)}),{version:0,name:"preferences",storage:Gh(()=>localStorage)})),us=(()=>{if(typeof self>"u")return!1;if("top"in self&&self!==top)try{top.window.document._=0}catch{return!1}return"showOpenFilePicker"in self})(),Jd=us?Promise.resolve().then(function(){return rp}):Promise.resolve().then(function(){return up});async function Mo(...t){return(await Jd).default(...t)}us?Promise.resolve().then(function(){return op}):Promise.resolve().then(function(){return hp});const ep=us?Promise.resolve().then(function(){return lp}):Promise.resolve().then(function(){return pp});async function tp(...t){return(await ep).default(...t)}const np=async t=>{const e=await t.getFile();return e.handle=t,e};var sp=async(t=[{}])=>{Array.isArray(t)||(t=[t]);const e=[];t.forEach((r,i)=>{e[i]={description:r.description||"Files",accept:{}},r.mimeTypes?r.mimeTypes.map(o=>{e[i].accept[o]=r.extensions||[]}):e[i].accept["*/*"]=r.extensions||[]});const n=await window.showOpenFilePicker({id:t[0].id,startIn:t[0].startIn,types:e,multiple:t[0].multiple||!1,excludeAcceptAllOption:t[0].excludeAcceptAllOption||!1}),s=await Promise.all(n.map(np));return t[0].multiple?s:s[0]},rp={__proto__:null,default:sp};function Or(t){function e(n){if(Object(n)!==n)return Promise.reject(new TypeError(n+" is not an object."));var s=n.done;return Promise.resolve(n.value).then(function(r){return{value:r,done:s}})}return Or=function(n){this.s=n,this.n=n.next},Or.prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(n){var s=this.s.return;return s===void 0?Promise.resolve({value:n,done:!0}):e(s.apply(this.s,arguments))},throw:function(n){var s=this.s.return;return s===void 0?Promise.reject(n):e(s.apply(this.s,arguments))}},new Or(t)}const rc=async(t,e,n=t.name,s)=>{const r=[],i=[];var o,a=!1,l=!1;try{for(var c,u=(function(f){var d,p,y,g=2;for(typeof Symbol<"u"&&(p=Symbol.asyncIterator,y=Symbol.iterator);g--;){if(p&&(d=f[p])!=null)return d.call(f);if(y&&(d=f[y])!=null)return new Or(d.call(f));p="@@asyncIterator",y="@@iterator"}throw new TypeError("Object is not async iterable")})(t.values());a=!(c=await u.next()).done;a=!1){const f=c.value,d=`${n}/${f.name}`;f.kind==="file"?i.push(f.getFile().then(p=>(p.directoryHandle=t,p.handle=f,Object.defineProperty(p,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>d})))):f.kind!=="directory"||!e||s&&s(f)||r.push(rc(f,e,d,s))}}catch(f){l=!0,o=f}finally{try{a&&u.return!=null&&await u.return()}finally{if(l)throw o}}return[...(await Promise.all(r)).flat(),...await Promise.all(i)]};var ip=async(t={})=>{t.recursive=t.recursive||!1,t.mode=t.mode||"read";const e=await window.showDirectoryPicker({id:t.id,startIn:t.startIn,mode:t.mode});return(await(await e.values()).next()).done?[e]:rc(e,t.recursive,void 0,t.skipDirectory)},op={__proto__:null,default:ip},ap=async(t,e=[{}],n=null,s=!1,r=null)=>{Array.isArray(e)||(e=[e]),e[0].fileName=e[0].fileName||"Untitled";const i=[];let o=null;if(t instanceof Blob&&t.type?o=t.type:t.headers&&t.headers.get("content-type")&&(o=t.headers.get("content-type")),e.forEach((c,u)=>{i[u]={description:c.description||"Files",accept:{}},c.mimeTypes?(u===0&&o&&c.mimeTypes.push(o),c.mimeTypes.map(f=>{i[u].accept[f]=c.extensions||[]})):o?i[u].accept[o]=c.extensions||[]:i[u].accept["*/*"]=c.extensions||[]}),n)try{await n.getFile()}catch(c){if(n=null,s)throw c}const a=n||await window.showSaveFilePicker({suggestedName:e[0].fileName,id:e[0].id,startIn:e[0].startIn,types:i,excludeAcceptAllOption:e[0].excludeAcceptAllOption||!1});!n&&r&&r(a);const l=await a.createWritable();return"stream"in t?(await t.stream().pipeTo(l),a):"body"in t?(await t.body.pipeTo(l),a):(await l.write(await t),await l.close(),a)},lp={__proto__:null,default:ap},cp=async(t=[{}])=>(Array.isArray(t)||(t=[t]),new Promise((e,n)=>{const s=document.createElement("input");s.type="file";const r=[...t.map(i=>i.mimeTypes||[]),...t.map(i=>i.extensions||[])].join();s.multiple=t[0].multiple||!1,s.accept=r||"",s.style.display="none",document.body.append(s),s.addEventListener("cancel",()=>{s.remove(),n(new DOMException("The user aborted a request.","AbortError"))}),s.addEventListener("change",()=>{s.remove(),e(s.multiple?Array.from(s.files):s.files[0])}),"showPicker"in HTMLInputElement.prototype?s.showPicker():s.click()})),up={__proto__:null,default:cp},fp=async(t=[{}])=>(Array.isArray(t)||(t=[t]),t[0].recursive=t[0].recursive||!1,new Promise((e,n)=>{const s=document.createElement("input");s.type="file",s.webkitdirectory=!0,s.style.display="none",document.body.append(s),s.addEventListener("cancel",()=>{s.remove(),n(new DOMException("The user aborted a request.","AbortError"))}),s.addEventListener("change",()=>{s.remove();let r=Array.from(s.files);t[0].recursive?t[0].recursive&&t[0].skipDirectory&&(r=r.filter(i=>i.webkitRelativePath.split("/").every(o=>!t[0].skipDirectory({name:o,kind:"directory"})))):r=r.filter(i=>i.webkitRelativePath.split("/").length===2),e(r)}),"showPicker"in HTMLInputElement.prototype?s.showPicker():s.click()})),hp={__proto__:null,default:fp},dp=async(t,e={})=>{Array.isArray(e)&&(e=e[0]);const n=document.createElement("a");let s=t;"body"in t&&(s=await(async function(o,a){const l=o.getReader(),c=new ReadableStream({start:d=>(async function p(){return l.read().then(({done:y,value:g})=>{if(!y)return d.enqueue(g),p();d.close()})})()}),u=new Response(c),f=await u.blob();return l.releaseLock(),new Blob([f],{type:a})})(t.body,t.headers.get("content-type"))),n.download=e.fileName||"Untitled",n.href=URL.createObjectURL(await s);const r=()=>{typeof i=="function"&&i()},i=e.legacySetup&&e.legacySetup(r,()=>i(),n);return n.addEventListener("click",()=>{setTimeout(()=>URL.revokeObjectURL(n.href),3e4),r()}),n.click(),null},pp={__proto__:null,default:dp},Se=Uint8Array,ot=Uint16Array,Ro=Int32Array,ii=new Se([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),oi=new Se([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),eo=new Se([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ic=function(t,e){for(var n=new ot(31),s=0;s<31;++s)n[s]=e+=1<<t[s-1];for(var r=new Ro(n[30]),s=1;s<30;++s)for(var i=n[s];i<n[s+1];++i)r[i]=i-n[s]<<5|s;return{b:n,r}},oc=ic(ii,2),ac=oc.b,to=oc.r;ac[28]=258,to[258]=28;var lc=ic(oi,0),mp=lc.b,xa=lc.r,no=new ot(32768);for(var ye=0;ye<32768;++ye){var tn=(ye&43690)>>1|(ye&21845)<<1;tn=(tn&52428)>>2|(tn&13107)<<2,tn=(tn&61680)>>4|(tn&3855)<<4,no[ye]=((tn&65280)>>8|(tn&255)<<8)>>1}var zt=(function(t,e,n){for(var s=t.length,r=0,i=new ot(e);r<s;++r)t[r]&&++i[t[r]-1];var o=new ot(e);for(r=1;r<e;++r)o[r]=o[r-1]+i[r-1]<<1;var a;if(n){a=new ot(1<<e);var l=15-e;for(r=0;r<s;++r)if(t[r])for(var c=r<<4|t[r],u=e-t[r],f=o[t[r]-1]++<<u,d=f|(1<<u)-1;f<=d;++f)a[no[f]>>l]=c}else for(a=new ot(s),r=0;r<s;++r)t[r]&&(a[r]=no[o[t[r]-1]++]>>15-t[r]);return a}),gn=new Se(288);for(var ye=0;ye<144;++ye)gn[ye]=8;for(var ye=144;ye<256;++ye)gn[ye]=9;for(var ye=256;ye<280;++ye)gn[ye]=7;for(var ye=280;ye<288;++ye)gn[ye]=8;var Fs=new Se(32);for(var ye=0;ye<32;++ye)Fs[ye]=5;var gp=zt(gn,9,0),yp=zt(gn,9,1),bp=zt(Fs,5,0),wp=zt(Fs,5,1),Oi=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},Et=function(t,e,n){var s=e/8|0;return(t[s]|t[s+1]<<8)>>(e&7)&n},ji=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},Po=function(t){return(t+7)/8|0},Qs=function(t,e,n){return(e==null||e<0)&&(e=0),(n==null||n>t.length)&&(n=t.length),new Se(t.subarray(e,n))},vp=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],We=function(t,e,n){var s=new Error(e||vp[t]);if(s.code=t,Error.captureStackTrace&&Error.captureStackTrace(s,We),!n)throw s;return s},xp=function(t,e,n,s){var r=t.length,i=s?s.length:0;if(!r||e.f&&!e.l)return n||new Se(0);var o=!n,a=o||e.i!=2,l=e.i;o&&(n=new Se(r*3));var c=function(Be){var je=n.length;if(Be>je){var Ce=new Se(Math.max(je*2,Be));Ce.set(n),n=Ce}},u=e.f||0,f=e.p||0,d=e.b||0,p=e.l,y=e.d,g=e.m,b=e.n,m=r*8;do{if(!p){u=Et(t,f,1);var S=Et(t,f+1,3);if(f+=3,S)if(S==1)p=yp,y=wp,g=9,b=5;else if(S==2){var T=Et(t,f,31)+257,w=Et(t,f+10,15)+4,v=T+Et(t,f+5,31)+1;f+=14;for(var k=new Se(v),A=new Se(19),N=0;N<w;++N)A[eo[N]]=Et(t,f+N*3,7);f+=w*3;for(var C=Oi(A),O=(1<<C)-1,D=zt(A,C,1),N=0;N<v;){var M=D[Et(t,f,O)];f+=M&15;var x=M>>4;if(x<16)k[N++]=x;else{var R=0,$=0;for(x==16?($=3+Et(t,f,3),f+=2,R=k[N-1]):x==17?($=3+Et(t,f,7),f+=3):x==18&&($=11+Et(t,f,127),f+=7);$--;)k[N++]=R}}var B=k.subarray(0,T),z=k.subarray(T);g=Oi(B),b=Oi(z),p=zt(B,g,1),y=zt(z,b,1)}else We(1);else{var x=Po(f)+4,E=t[x-4]|t[x-3]<<8,_=x+E;if(_>r){l&&We(0);break}a&&c(d+E),n.set(t.subarray(x,_),d),e.b=d+=E,e.p=f=_*8,e.f=u;continue}if(f>m){l&&We(0);break}}a&&c(d+131072);for(var G=(1<<g)-1,H=(1<<b)-1,ne=f;;ne=f){var R=p[ji(t,f)&G],W=R>>4;if(f+=R&15,f>m){l&&We(0);break}if(R||We(2),W<256)n[d++]=W;else if(W==256){ne=f,p=null;break}else{var te=W-254;if(W>264){var N=W-257,q=ii[N];te=Et(t,f,(1<<q)-1)+ac[N],f+=q}var ie=y[ji(t,f)&H],Re=ie>>4;ie||We(3),f+=ie&15;var z=mp[Re];if(Re>3){var q=oi[Re];z+=ji(t,f)&(1<<q)-1,f+=q}if(f>m){l&&We(0);break}a&&c(d+131072);var Fe=d+te;if(d<z){var He=i-z,Qe=Math.min(z,Fe);for(He+d<0&&We(3);d<Qe;++d)n[d]=s[He+d]}for(;d<Fe;++d)n[d]=n[d-z]}}e.l=p,e.p=ne,e.b=d,e.f=u,p&&(u=1,e.m=g,e.d=y,e.n=b)}while(!u);return d!=n.length&&o?Qs(n,0,d):n.subarray(0,d)},Zt=function(t,e,n){n<<=e&7;var s=e/8|0;t[s]|=n,t[s+1]|=n>>8},Ns=function(t,e,n){n<<=e&7;var s=e/8|0;t[s]|=n,t[s+1]|=n>>8,t[s+2]|=n>>16},Ii=function(t,e){for(var n=[],s=0;s<t.length;++s)t[s]&&n.push({s,f:t[s]});var r=n.length,i=n.slice();if(!r)return{t:uc,l:0};if(r==1){var o=new Se(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(_,T){return _.f-T.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,u=1,f=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};u!=r-1;)a=n[n[c].f<n[f].f?c++:f++],l=n[c!=u&&n[c].f<n[f].f?c++:f++],n[u++]={s:-1,f:a.f+l.f,l:a,r:l};for(var d=i[0].s,s=1;s<r;++s)i[s].s>d&&(d=i[s].s);var p=new ot(d+1),y=so(n[u-1],p,0);if(y>e){var s=0,g=0,b=y-e,m=1<<b;for(i.sort(function(T,w){return p[w.s]-p[T.s]||T.f-w.f});s<r;++s){var S=i[s].s;if(p[S]>e)g+=m-(1<<y-p[S]),p[S]=e;else break}for(g>>=b;g>0;){var x=i[s].s;p[x]<e?g-=1<<e-p[x]++-1:++s}for(;s>=0&&g;--s){var E=i[s].s;p[E]==e&&(--p[E],++g)}y=e}return{t:new Se(p),l:y}},so=function(t,e,n){return t.s==-1?Math.max(so(t.l,e,n+1),so(t.r,e,n+1)):e[t.s]=n},_a=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new ot(++e),s=0,r=t[0],i=1,o=function(l){n[s++]=l},a=1;a<=e;++a)if(t[a]==r&&a!=e)++i;else{if(!r&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(r),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(r);i=1,r=t[a]}return{c:n.subarray(0,s),n:e}},Cs=function(t,e){for(var n=0,s=0;s<e.length;++s)n+=t[s]*e[s];return n},cc=function(t,e,n){var s=n.length,r=Po(e+2);t[r]=s&255,t[r+1]=s>>8,t[r+2]=t[r]^255,t[r+3]=t[r+1]^255;for(var i=0;i<s;++i)t[r+i+4]=n[i];return(r+4+s)*8},Ea=function(t,e,n,s,r,i,o,a,l,c,u){Zt(e,u++,n),++r[256];for(var f=Ii(r,15),d=f.t,p=f.l,y=Ii(i,15),g=y.t,b=y.l,m=_a(d),S=m.c,x=m.n,E=_a(g),_=E.c,T=E.n,w=new ot(19),v=0;v<S.length;++v)++w[S[v]&31];for(var v=0;v<_.length;++v)++w[_[v]&31];for(var k=Ii(w,7),A=k.t,N=k.l,C=19;C>4&&!A[eo[C-1]];--C);var O=c+5<<3,D=Cs(r,gn)+Cs(i,Fs)+o,M=Cs(r,d)+Cs(i,g)+o+14+3*C+Cs(w,A)+2*w[16]+3*w[17]+7*w[18];if(l>=0&&O<=D&&O<=M)return cc(e,u,t.subarray(l,l+c));var R,$,B,z;if(Zt(e,u,1+(M<D)),u+=2,M<D){R=zt(d,p,0),$=d,B=zt(g,b,0),z=g;var G=zt(A,N,0);Zt(e,u,x-257),Zt(e,u+5,T-1),Zt(e,u+10,C-4),u+=14;for(var v=0;v<C;++v)Zt(e,u+3*v,A[eo[v]]);u+=3*C;for(var H=[S,_],ne=0;ne<2;++ne)for(var W=H[ne],v=0;v<W.length;++v){var te=W[v]&31;Zt(e,u,G[te]),u+=A[te],te>15&&(Zt(e,u,W[v]>>5&127),u+=W[v]>>12)}}else R=gp,$=gn,B=bp,z=Fs;for(var v=0;v<a;++v){var q=s[v];if(q>255){var te=q>>18&31;Ns(e,u,R[te+257]),u+=$[te+257],te>7&&(Zt(e,u,q>>23&31),u+=ii[te]);var ie=q&31;Ns(e,u,B[ie]),u+=z[ie],ie>3&&(Ns(e,u,q>>5&8191),u+=oi[ie])}else Ns(e,u,R[q]),u+=$[q]}return Ns(e,u,R[256]),u+$[256]},_p=new Ro([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),uc=new Se(0),Ep=function(t,e,n,s,r,i){var o=i.z||t.length,a=new Se(s+o+5*(1+Math.ceil(o/7e3))+r),l=a.subarray(s,a.length-r),c=i.l,u=(i.r||0)&7;if(e){u&&(l[0]=i.r>>3);for(var f=_p[e-1],d=f>>13,p=f&8191,y=(1<<n)-1,g=i.p||new ot(32768),b=i.h||new ot(y+1),m=Math.ceil(n/3),S=2*m,x=function(Ue){return(t[Ue]^t[Ue+1]<<m^t[Ue+2]<<S)&y},E=new Ro(25e3),_=new ot(288),T=new ot(32),w=0,v=0,k=i.i||0,A=0,N=i.w||0,C=0;k+2<o;++k){var O=x(k),D=k&32767,M=b[O];if(g[D]=M,b[O]=D,N<=k){var R=o-k;if((w>7e3||A>24576)&&(R>423||!c)){u=Ea(t,l,0,E,_,T,v,A,C,k-C,u),A=w=v=0,C=k;for(var $=0;$<286;++$)_[$]=0;for(var $=0;$<30;++$)T[$]=0}var B=2,z=0,G=p,H=D-M&32767;if(R>2&&O==x(k-H))for(var ne=Math.min(d,R)-1,W=Math.min(32767,k),te=Math.min(258,R);H<=W&&--G&&D!=M;){if(t[k+B]==t[k+B-H]){for(var q=0;q<te&&t[k+q]==t[k+q-H];++q);if(q>B){if(B=q,z=H,q>ne)break;for(var ie=Math.min(H,q-2),Re=0,$=0;$<ie;++$){var Fe=k-H+$&32767,He=g[Fe],Qe=Fe-He&32767;Qe>Re&&(Re=Qe,M=Fe)}}}D=M,M=g[D],H+=D-M&32767}if(z){E[A++]=268435456|to[B]<<18|xa[z];var Be=to[B]&31,je=xa[z]&31;v+=ii[Be]+oi[je],++_[257+Be],++T[je],N=k+B,++w}else E[A++]=t[k],++_[t[k]]}}for(k=Math.max(k,N);k<o;++k)E[A++]=t[k],++_[t[k]];u=Ea(t,l,c,E,_,T,v,A,C,k-C,u),c||(i.r=u&7|l[u/8|0]<<3,u-=7,i.h=b,i.p=g,i.i=k,i.w=N)}else{for(var k=i.w||0;k<o+c;k+=65535){var Ce=k+65535;Ce>=o&&(l[u/8|0]=c,Ce=o),u=cc(l,u+1,t.subarray(k,Ce))}i.i=o}return Qs(a,0,s+Po(u)+r)},Sp=(function(){for(var t=new Int32Array(256),e=0;e<256;++e){for(var n=e,s=9;--s;)n=(n&1&&-306674912)^n>>>1;t[e]=n}return t})(),kp=function(){var t=-1;return{p:function(e){for(var n=t,s=0;s<e.length;++s)n=Sp[n&255^e[s]]^n>>>8;t=n},d:function(){return~t}}},Tp=function(t,e,n,s,r){if(!r&&(r={l:1},e.dictionary)){var i=e.dictionary.subarray(-32768),o=new Se(i.length+t.length);o.set(i),o.set(t,i.length),t=o,r.w=i.length}return Ep(t,e.level==null?6:e.level,e.mem==null?r.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,s,r)},fc=function(t,e){var n={};for(var s in t)n[s]=t[s];for(var s in e)n[s]=e[s];return n},$t=function(t,e){return t[e]|t[e+1]<<8},kt=function(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0},Mi=function(t,e){return kt(t,e)+kt(t,e+4)*4294967296},De=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8};function Ap(t,e){return Tp(t,e||{},0,0)}function Np(t,e){return xp(t,{i:2},e&&e.out,e&&e.dictionary)}var hc=function(t,e,n,s){for(var r in t){var i=t[r],o=e+r,a=s;Array.isArray(i)&&(a=fc(s,i[1]),i=i[0]),i instanceof Se?n[o]=[i,a]:(n[o+="/"]=[new Se(0),a],hc(i,o,n,s))}},Sa=typeof TextEncoder<"u"&&new TextEncoder,ro=typeof TextDecoder<"u"&&new TextDecoder,Cp=0;try{ro.decode(uc,{stream:!0}),Cp=1}catch{}var Op=function(t){for(var e="",n=0;;){var s=t[n++],r=(s>127)+(s>223)+(s>239);if(n+r>t.length)return{s:e,r:Qs(t,n-1)};r?r==3?(s=((s&15)<<18|(t[n++]&63)<<12|(t[n++]&63)<<6|t[n++]&63)-65536,e+=String.fromCharCode(55296|s>>10,56320|s&1023)):r&1?e+=String.fromCharCode((s&31)<<6|t[n++]&63):e+=String.fromCharCode((s&15)<<12|(t[n++]&63)<<6|t[n++]&63):e+=String.fromCharCode(s)}};function Bs(t,e){var n;if(Sa)return Sa.encode(t);for(var s=t.length,r=new Se(t.length+(t.length>>1)),i=0,o=function(c){r[i++]=c},n=0;n<s;++n){if(i+5>r.length){var a=new Se(i+8+(s-n<<1));a.set(r),r=a}var l=t.charCodeAt(n);l<128||e?o(l):l<2048?(o(192|l>>6),o(128|l&63)):l>55295&&l<57344?(l=65536+(l&1047552)|t.charCodeAt(++n)&1023,o(240|l>>18),o(128|l>>12&63),o(128|l>>6&63),o(128|l&63)):(o(224|l>>12),o(128|l>>6&63),o(128|l&63))}return Qs(r,0,i)}function io(t,e){if(e){for(var n="",s=0;s<t.length;s+=16384)n+=String.fromCharCode.apply(null,t.subarray(s,s+16384));return n}else{if(ro)return ro.decode(t);var r=Op(t),i=r.s,n=r.r;return n.length&&We(8),i}}var jp=function(t,e){return e+30+$t(t,e+26)+$t(t,e+28)},Ip=function(t,e,n){var s=$t(t,e+28),r=io(t.subarray(e+46,e+46+s),!($t(t,e+8)&2048)),i=e+46+s,o=kt(t,e+20),a=n&&o==4294967295?Mp(t,i):[o,kt(t,e+24),kt(t,e+42)],l=a[0],c=a[1],u=a[2];return[$t(t,e+10),l,c,r,i+$t(t,e+30)+$t(t,e+32),u]},Mp=function(t,e){for(;$t(t,e)!=1;e+=4+$t(t,e+2));return[Mi(t,e+12),Mi(t,e+4),Mi(t,e+20)]},oo=function(t){var e=0;if(t)for(var n in t){var s=t[n].length;s>65535&&We(9),e+=s+4}return e},ka=function(t,e,n,s,r,i,o,a){var l=s.length,c=n.extra,u=a&&a.length,f=oo(c);De(t,e,o!=null?33639248:67324752),e+=4,o!=null&&(t[e++]=20,t[e++]=n.os),t[e]=20,e+=2,t[e++]=n.flag<<1|(i<0&&8),t[e++]=r&&8,t[e++]=n.compression&255,t[e++]=n.compression>>8;var d=new Date(n.mtime==null?Date.now():n.mtime),p=d.getFullYear()-1980;if((p<0||p>119)&&We(10),De(t,e,p<<25|d.getMonth()+1<<21|d.getDate()<<16|d.getHours()<<11|d.getMinutes()<<5|d.getSeconds()>>1),e+=4,i!=-1&&(De(t,e,n.crc),De(t,e+4,i<0?-i-2:i),De(t,e+8,n.size)),De(t,e+12,l),De(t,e+14,f),e+=16,o!=null&&(De(t,e,u),De(t,e+6,n.attrs),De(t,e+10,o),e+=14),t.set(s,e),e+=l,f)for(var y in c){var g=c[y],b=g.length;De(t,e,+y),De(t,e+2,b),t.set(g,e+4),e+=4+b}return u&&(t.set(a,e),e+=u),e},Rp=function(t,e,n,s,r){De(t,e,101010256),De(t,e+8,n),De(t,e+10,n),De(t,e+12,s),De(t,e+16,r)};function Pp(t,e){e||(e={});var n={},s=[];hc(t,"",n,e);var r=0,i=0;for(var o in n){var a=n[o],l=a[0],c=a[1],u=c.level==0?0:8,f=Bs(o),d=f.length,p=c.comment,y=p&&Bs(p),g=y&&y.length,b=oo(c.extra);d>65535&&We(11);var m=u?Ap(l,c):l,S=m.length,x=kp();x.p(l),s.push(fc(c,{size:l.length,crc:x.d(),c:m,f,m:y,u:d!=o.length||y&&p.length!=g,o:r,compression:u})),r+=30+d+b+S,i+=76+2*(d+b)+(g||0)+S}for(var E=new Se(i+22),_=r,T=i-r,w=0;w<s.length;++w){var f=s[w];ka(E,f.o,f,f.f,f.u,f.c.length);var v=30+f.f.length+oo(f.extra);E.set(f.c,f.o+v),ka(E,r,f,f.f,f.u,f.c.length,f.o,f.m),r+=16+v+(f.m?f.m.length:0)}return Rp(E,r,s.length,T,_),E}function $p(t,e){for(var n={},s=t.length-22;kt(t,s)!=101010256;--s)(!s||t.length-s>65558)&&We(13);var r=$t(t,s+8);if(!r)return{};var i=kt(t,s+16),o=i==4294967295||r==65535;if(o){var a=kt(t,s-12);o=kt(t,a)==101075792,o&&(r=kt(t,a+32),i=kt(t,a+48))}for(var l=0;l<r;++l){var c=Ip(t,i,o),u=c[0],f=c[1],d=c[2],p=c[3],y=c[4],g=c[5],b=jp(t,g);i=y,u?u==8?n[p]=Np(t.subarray(b,b+f),{out:new Se(d)}):We(14,"unknown compression type "+u):n[p]=Qs(t,b,b+f)}return n}class dc{constructor(){this._listeners={}}addEventListener(e,n){const s=this._listeners;return s[e]===void 0&&(s[e]=[]),s[e].indexOf(n)===-1&&s[e].push(n),this}removeEventListener(e,n){const r=this._listeners[e];if(r!==void 0){const i=r.indexOf(n);i!==-1&&r.splice(i,1)}return this}dispatchEvent(e){const s=this._listeners[e.type];if(s!==void 0){const r=s.slice(0);for(let i=0,o=r.length;i<o;i++)r[i].call(this,e)}return this}dispose(){for(const e in this._listeners)delete this._listeners[e]}}class ts{constructor(e,n,s,r={}){if(this._name=void 0,this._parent=void 0,this._child=void 0,this._attributes=void 0,this._disposed=!1,this._name=e,this._parent=n,this._child=s,this._attributes=r,!n.isOnGraph(s))throw new Error("Cannot connect disconnected graphs.")}getName(){return this._name}getParent(){return this._parent}getChild(){return this._child}setChild(e){return this._child=e,this}getAttributes(){return this._attributes}dispose(){this._disposed||(this._parent._destroyRef(this),this._disposed=!0)}isDisposed(){return this._disposed}}class Dp extends dc{constructor(...e){super(...e),this._emptySet=new Set,this._edges=new Set,this._parentEdges=new Map,this._childEdges=new Map}listEdges(){return Array.from(this._edges)}listParentEdges(e){return Array.from(this._childEdges.get(e)||this._emptySet)}listParents(e){const n=new Set;for(const s of this.listParentEdges(e))n.add(s.getParent());return Array.from(n)}listChildEdges(e){return Array.from(this._parentEdges.get(e)||this._emptySet)}listChildren(e){const n=new Set;for(const s of this.listChildEdges(e))n.add(s.getChild());return Array.from(n)}disconnectParents(e,n){for(const s of this.listParentEdges(e))(!n||n(s.getParent()))&&s.dispose();return this}_createEdge(e,n,s,r){const i=new ts(e,n,s,r);this._edges.add(i);const o=i.getParent();this._parentEdges.has(o)||this._parentEdges.set(o,new Set),this._parentEdges.get(o).add(i);const a=i.getChild();return this._childEdges.has(a)||this._childEdges.set(a,new Set),this._childEdges.get(a).add(i),i}_destroyEdge(e){return this._edges.delete(e),this._parentEdges.get(e.getParent()).delete(e),this._childEdges.get(e.getChild()).delete(e),this}}function Ps(){return Ps=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Ps.apply(this,arguments)}class fn{constructor(e){if(this.list=[],e)for(const n of e)this.list.push(n)}add(e){this.list.push(e)}remove(e){const n=this.list.indexOf(e);n>=0&&this.list.splice(n,1)}removeChild(e){const n=[];for(const s of this.list)s.getChild()===e&&n.push(s);for(const s of n)this.remove(s);return n}listRefsByChild(e){const n=[];for(const s of this.list)s.getChild()===e&&n.push(s);return n}values(){return this.list}}class we{constructor(e){if(this.set=new Set,this.map=new Map,e)for(const n of e)this.add(n)}add(e){const n=e.getChild();this.removeChild(n),this.set.add(e),this.map.set(n,e)}remove(e){this.set.delete(e),this.map.delete(e.getChild())}removeChild(e){const n=this.map.get(e)||null;return n&&this.remove(n),n}getRefByChild(e){return this.map.get(e)||null}values(){return Array.from(this.set)}}class Dt{constructor(e){this.map={},e&&Object.assign(this.map,e)}set(e,n){this.map[e]=n}delete(e){delete this.map[e]}get(e){return this.map[e]||null}keys(){return Object.keys(this.map)}values(){return Object.values(this.map)}}const ce=Symbol("attributes"),Nn=Symbol("immutableKeys");class $o extends dc{constructor(e){super(),this._disposed=!1,this.graph=void 0,this[ce]=void 0,this[Nn]=void 0,this.graph=e,this[Nn]=new Set,this[ce]=this._createAttributes()}getDefaults(){return{}}_createAttributes(){const e=this.getDefaults(),n={};for(const s in e){const r=e[s];if(r instanceof $o){const i=this.graph._createEdge(s,this,r);this[Nn].add(s),n[s]=i}else n[s]=r}return n}isOnGraph(e){return this.graph===e.graph}isDisposed(){return this._disposed}dispose(){this._disposed||(this.graph.listChildEdges(this).forEach(e=>e.dispose()),this.graph.disconnectParents(this),this._disposed=!0,this.dispatchEvent({type:"dispose"}))}detach(){return this.graph.disconnectParents(this),this}swap(e,n){for(const s in this[ce]){const r=this[ce][s];if(r instanceof ts){const i=r;i.getChild()===e&&this.setRef(s,n,i.getAttributes())}else if(r instanceof fn)for(const i of r.listRefsByChild(e)){const o=i.getAttributes();this.removeRef(s,e),this.addRef(s,n,o)}else if(r instanceof we){const i=r.getRefByChild(e);if(i){const o=i.getAttributes();this.removeRef(s,e),this.addRef(s,n,o)}}else if(r instanceof Dt)for(const i of r.keys()){const o=r.get(i);o.getChild()===e&&this.setRefMap(s,i,n,o.getAttributes())}}return this}get(e){return this[ce][e]}set(e,n){return this[ce][e]=n,this.dispatchEvent({type:"change",attribute:e})}getRef(e){const n=this[ce][e];return n?n.getChild():null}setRef(e,n,s){if(this[Nn].has(e))throw new Error(`Cannot overwrite immutable attribute, "${e}".`);const r=this[ce][e];if(r&&r.dispose(),!n)return this;const i=this.graph._createEdge(e,this,n,s);return this[ce][e]=i,this.dispatchEvent({type:"change",attribute:e})}listRefs(e){return this.assertRefList(e).values().map(s=>s.getChild())}addRef(e,n,s){const r=this.graph._createEdge(e,this,n,s);return this.assertRefList(e).add(r),this.dispatchEvent({type:"change",attribute:e})}removeRef(e,n){const s=this.assertRefList(e);if(s instanceof fn)for(const r of s.listRefsByChild(n))r.dispose();else{const r=s.getRefByChild(n);r&&r.dispose()}return this}assertRefList(e){const n=this[ce][e];if(n instanceof fn||n instanceof we)return n;throw new Error(`Expected RefList or RefSet for attribute "${e}"`)}listRefMapKeys(e){return this.assertRefMap(e).keys()}listRefMapValues(e){return this.assertRefMap(e).values().map(n=>n.getChild())}getRefMap(e,n){const r=this.assertRefMap(e).get(n);return r?r.getChild():null}setRefMap(e,n,s,r){const i=this.assertRefMap(e),o=i.get(n);if(o&&o.dispose(),!s)return this;r=Object.assign(r||{},{key:n});const a=this.graph._createEdge(e,this,s,Ps({},r,{key:n}));return i.set(n,a),this.dispatchEvent({type:"change",attribute:e,key:n})}assertRefMap(e){const n=this[ce][e];if(n instanceof Dt)return n;throw new Error(`Expected RefMap for attribute "${e}"`)}dispatchEvent(e){return super.dispatchEvent(Ps({},e,{target:this})),this.graph.dispatchEvent(Ps({},e,{target:this,type:`node:${e.type}`})),this}_destroyRef(e){const n=e.getName();if(this[ce][n]===e)this[ce][n]=null,this[Nn].has(n)&&e.getChild().dispose();else if(this[ce][n]instanceof fn)this[ce][n].remove(e);else if(this[ce][n]instanceof we)this[ce][n].remove(e);else if(this[ce][n]instanceof Dt){const s=this[ce][n];for(const r of s.keys())s.get(r)===e&&s.delete(r)}else return;this.graph._destroyEdge(e),this.dispatchEvent({type:"change",attribute:n})}}const pc="v4.2.1",Vr="@glb.bin";var V;(function(t){t.ACCESSOR="Accessor",t.ANIMATION="Animation",t.ANIMATION_CHANNEL="AnimationChannel",t.ANIMATION_SAMPLER="AnimationSampler",t.BUFFER="Buffer",t.CAMERA="Camera",t.MATERIAL="Material",t.MESH="Mesh",t.PRIMITIVE="Primitive",t.PRIMITIVE_TARGET="PrimitiveTarget",t.NODE="Node",t.ROOT="Root",t.SCENE="Scene",t.SKIN="Skin",t.TEXTURE="Texture",t.TEXTURE_INFO="TextureInfo"})(V||(V={}));var Wr;(function(t){t.INTERLEAVED="interleaved",t.SEPARATE="separate"})(Wr||(Wr={}));var at;(function(t){t.ARRAY_BUFFER="ARRAY_BUFFER",t.ELEMENT_ARRAY_BUFFER="ELEMENT_ARRAY_BUFFER",t.INVERSE_BIND_MATRICES="INVERSE_BIND_MATRICES",t.OTHER="OTHER",t.SPARSE="SPARSE"})(at||(at={}));var ao;(function(t){t[t.R=4096]="R",t[t.G=256]="G",t[t.B=16]="B",t[t.A=1]="A"})(ao||(ao={}));var dn;(function(t){t.GLTF="GLTF",t.GLB="GLB"})(dn||(dn={}));const ai={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};class ae{static createBufferFromDataURI(e){if(typeof Buffer>"u"){const n=atob(e.split(",")[1]),s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}else{const n=e.split(",")[1],s=e.indexOf("base64")>=0;return Buffer.from(n,s?"base64":"utf8")}}static encodeText(e){return new TextEncoder().encode(e)}static decodeText(e){return new TextDecoder().decode(e)}static concat(e){let n=0;for(const i of e)n+=i.byteLength;const s=new Uint8Array(n);let r=0;for(const i of e)s.set(i,r),r+=i.byteLength;return s}static pad(e,n=0){const s=this.padNumber(e.byteLength);if(s===e.byteLength)return e;const r=new Uint8Array(s);if(r.set(e),n!==0)for(let i=e.byteLength;i<s;i++)r[i]=n;return r}static padNumber(e){return Math.ceil(e/4)*4}static equals(e,n){if(e===n)return!0;if(e.byteLength!==n.byteLength)return!1;let s=e.byteLength;for(;s--;)if(e[s]!==n[s])return!1;return!0}static toView(e,n=0,s=1/0){return new Uint8Array(e.buffer,e.byteOffset+n,Math.min(e.byteLength,s))}static assertView(e){if(e&&!ArrayBuffer.isView(e))throw new Error(`Method requires Uint8Array parameter; received "${typeof e}".`);return e}}class Lp{match(e){return e.length>=3&&e[0]===255&&e[1]===216&&e[2]===255}getSize(e){let n=new DataView(e.buffer,e.byteOffset+4),s,r;for(;n.byteLength;){if(s=n.getUint16(0,!1),zp(n,s),r=n.getUint8(s+1),r===192||r===193||r===194)return[n.getUint16(s+7,!1),n.getUint16(s+5,!1)];n=new DataView(e.buffer,n.byteOffset+s+2)}throw new TypeError("Invalid JPG, no size found")}getChannels(e){return 3}}class li{match(e){return e.length>=8&&e[0]===137&&e[1]===80&&e[2]===78&&e[3]===71&&e[4]===13&&e[5]===10&&e[6]===26&&e[7]===10}getSize(e){const n=new DataView(e.buffer,e.byteOffset);return ae.decodeText(e.slice(12,16))===li.PNG_FRIED_CHUNK_NAME?[n.getUint32(32,!1),n.getUint32(36,!1)]:[n.getUint32(16,!1),n.getUint32(20,!1)]}getChannels(e){return 4}}li.PNG_FRIED_CHUNK_NAME="CgBI";class Rn{static registerFormat(e,n){this.impls[e]=n}static getMimeType(e){for(const n in this.impls)if(this.impls[n].match(e))return n;return null}static getSize(e,n){return this.impls[n]?this.impls[n].getSize(e):null}static getChannels(e,n){return this.impls[n]?this.impls[n].getChannels(e):null}static getVRAMByteLength(e,n){if(!this.impls[n])return null;if(this.impls[n].getVRAMByteLength)return this.impls[n].getVRAMByteLength(e);let s=0;const r=4,i=this.getSize(e,n);if(!i)return null;for(;i[0]>1||i[1]>1;)s+=i[0]*i[1]*r,i[0]=Math.max(Math.floor(i[0]/2),1),i[1]=Math.max(Math.floor(i[1]/2),1);return s+=1*r,s}static mimeTypeToExtension(e){return e==="image/jpeg"?"jpg":e.split("/").pop()}static extensionToMimeType(e){return e==="jpg"?"image/jpeg":e?`image/${e}`:""}}Rn.impls={"image/jpeg":new Lp,"image/png":new li};function zp(t,e){if(e>t.byteLength)throw new TypeError("Corrupt JPG, exceeded buffer limits");if(t.getUint8(e)!==255)throw new TypeError("Invalid JPG, marker table corrupted");return t}class gs{static basename(e){const n=e.split(/[\\/]/).pop();return n.substring(0,n.lastIndexOf("."))}static extension(e){if(e.startsWith("data:image/")){const n=e.match(/data:(image\/\w+)/)[1];return Rn.mimeTypeToExtension(n)}else{if(e.startsWith("data:model/gltf+json"))return"gltf";if(e.startsWith("data:model/gltf-binary"))return"glb";if(e.startsWith("data:application/"))return"bin"}return e.split(/[\\/]/).pop().split(/[.]/).pop()}}var lo=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function Fp(){var t=new lo(3);return lo!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Ri(t){var e=t[0],n=t[1],s=t[2];return Math.hypot(e,n,s)}(function(){var t=Fp();return function(e,n,s,r,i,o){var a,l;for(n||(n=3),s||(s=0),r?l=Math.min(r*n+s,e.length):l=e.length,a=s;a<l;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],i(t,t,o),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2];return e}})();const Ta="https://null.example";class $s{static dirname(e){const n=e.lastIndexOf("/");return n===-1?"./":e.substring(0,n+1)}static basename(e){return gs.basename(new URL(e,Ta).pathname)}static extension(e){return gs.extension(new URL(e,Ta).pathname)}static resolve(e,n){if(!this.isRelativePath(n))return n;const s=e.split("/"),r=n.split("/");s.pop();for(let i=0;i<r.length;i++)r[i]!=="."&&(r[i]===".."?s.pop():s.push(r[i]));return s.join("/")}static isAbsoluteURL(e){return this.PROTOCOL_REGEXP.test(e)}static isRelativePath(e){return!/^(?:[a-zA-Z]+:)?\//.test(e)}}$s.DEFAULT_INIT={};$s.PROTOCOL_REGEXP=/^[a-zA-Z]+:\/\//;function Aa(t){return Object.prototype.toString.call(t)==="[object Object]"}function Cn(t){if(Aa(t)===!1)return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(Aa(n)===!1||Object.hasOwn(n,"isPrototypeOf")===!1)}var co,uo;(function(t){t[t.SILENT=4]="SILENT",t[t.ERROR=3]="ERROR",t[t.WARN=2]="WARN",t[t.INFO=1]="INFO",t[t.DEBUG=0]="DEBUG"})(uo||(uo={}));class ut{constructor(e){this.verbosity=void 0,this.verbosity=e}debug(e){this.verbosity<=ut.Verbosity.DEBUG&&console.debug(e)}info(e){this.verbosity<=ut.Verbosity.INFO&&console.info(e)}warn(e){this.verbosity<=ut.Verbosity.WARN&&console.warn(e)}error(e){this.verbosity<=ut.Verbosity.ERROR&&console.error(e)}}co=ut;ut.Verbosity=uo;ut.DEFAULT_INSTANCE=new co(co.Verbosity.INFO);function Bp(t){var e=t[0],n=t[1],s=t[2],r=t[3],i=t[4],o=t[5],a=t[6],l=t[7],c=t[8],u=t[9],f=t[10],d=t[11],p=t[12],y=t[13],g=t[14],b=t[15],m=e*o-n*i,S=e*a-s*i,x=e*l-r*i,E=n*a-s*o,_=n*l-r*o,T=s*l-r*a,w=c*y-u*p,v=c*g-f*p,k=c*b-d*p,A=u*g-f*y,N=u*b-d*y,C=f*b-d*g;return m*C-S*N+x*A+E*k-_*v+T*w}function Up(t,e,n){var s=e[0],r=e[1],i=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],f=e[8],d=e[9],p=e[10],y=e[11],g=e[12],b=e[13],m=e[14],S=e[15],x=n[0],E=n[1],_=n[2],T=n[3];return t[0]=x*s+E*a+_*f+T*g,t[1]=x*r+E*l+_*d+T*b,t[2]=x*i+E*c+_*p+T*m,t[3]=x*o+E*u+_*y+T*S,x=n[4],E=n[5],_=n[6],T=n[7],t[4]=x*s+E*a+_*f+T*g,t[5]=x*r+E*l+_*d+T*b,t[6]=x*i+E*c+_*p+T*m,t[7]=x*o+E*u+_*y+T*S,x=n[8],E=n[9],_=n[10],T=n[11],t[8]=x*s+E*a+_*f+T*g,t[9]=x*r+E*l+_*d+T*b,t[10]=x*i+E*c+_*p+T*m,t[11]=x*o+E*u+_*y+T*S,x=n[12],E=n[13],_=n[14],T=n[15],t[12]=x*s+E*a+_*f+T*g,t[13]=x*r+E*l+_*d+T*b,t[14]=x*i+E*c+_*p+T*m,t[15]=x*o+E*u+_*y+T*S,t}function Zp(t,e){var n=e[0],s=e[1],r=e[2],i=e[4],o=e[5],a=e[6],l=e[8],c=e[9],u=e[10];return t[0]=Math.hypot(n,s,r),t[1]=Math.hypot(i,o,a),t[2]=Math.hypot(l,c,u),t}function Vp(t,e){var n=new lo(3);Zp(n,e);var s=1/n[0],r=1/n[1],i=1/n[2],o=e[0]*s,a=e[1]*r,l=e[2]*i,c=e[4]*s,u=e[5]*r,f=e[6]*i,d=e[8]*s,p=e[9]*r,y=e[10]*i,g=o+u+y,b=0;return g>0?(b=Math.sqrt(g+1)*2,t[3]=.25*b,t[0]=(f-p)/b,t[1]=(d-l)/b,t[2]=(a-c)/b):o>u&&o>y?(b=Math.sqrt(1+o-u-y)*2,t[3]=(f-p)/b,t[0]=.25*b,t[1]=(a+c)/b,t[2]=(d+l)/b):u>y?(b=Math.sqrt(1+u-o-y)*2,t[3]=(d-l)/b,t[0]=(a+c)/b,t[1]=.25*b,t[2]=(f+p)/b):(b=Math.sqrt(1+y-o-u)*2,t[3]=(a-c)/b,t[0]=(d+l)/b,t[1]=(f+p)/b,t[2]=.25*b),t}class xe{static identity(e){return e}static eq(e,n,s=1e-5){if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(Math.abs(e[r]-n[r])>s)return!1;return!0}static clamp(e,n,s){return e<n?n:e>s?s:e}static decodeNormalizedInt(e,n){switch(n){case 5126:return e;case 5123:return e/65535;case 5121:return e/255;case 5122:return Math.max(e/32767,-1);case 5120:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}static encodeNormalizedInt(e,n){switch(n){case 5126:return e;case 5123:return Math.round(xe.clamp(e,0,1)*65535);case 5121:return Math.round(xe.clamp(e,0,1)*255);case 5122:return Math.round(xe.clamp(e,-1,1)*32767);case 5120:return Math.round(xe.clamp(e,-1,1)*127);default:throw new Error("Invalid component type.")}}static decompose(e,n,s,r){let i=Ri([e[0],e[1],e[2]]);const o=Ri([e[4],e[5],e[6]]),a=Ri([e[8],e[9],e[10]]);Bp(e)<0&&(i=-i),n[0]=e[12],n[1]=e[13],n[2]=e[14];const c=e.slice(),u=1/i,f=1/o,d=1/a;c[0]*=u,c[1]*=u,c[2]*=u,c[4]*=f,c[5]*=f,c[6]*=f,c[8]*=d,c[9]*=d,c[10]*=d,Vp(s,c),r[0]=i,r[1]=o,r[2]=a}static compose(e,n,s,r){const i=r,o=n[0],a=n[1],l=n[2],c=n[3],u=o+o,f=a+a,d=l+l,p=o*u,y=o*f,g=o*d,b=a*f,m=a*d,S=l*d,x=c*u,E=c*f,_=c*d,T=s[0],w=s[1],v=s[2];return i[0]=(1-(b+S))*T,i[1]=(y+_)*T,i[2]=(g-E)*T,i[3]=0,i[4]=(y-_)*w,i[5]=(1-(p+S))*w,i[6]=(m+x)*w,i[7]=0,i[8]=(g+E)*v,i[9]=(m-x)*v,i[10]=(1-(p+b))*v,i[11]=0,i[12]=e[0],i[13]=e[1],i[14]=e[2],i[15]=1,i}}function Wp(t,e){if(!!t!=!!e)return!1;const n=t.getChild(),s=e.getChild();return n===s||n.equals(s)}function Yp(t,e){if(!!t!=!!e)return!1;const n=t.values(),s=e.values();if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++){const i=n[r],o=s[r];if(i.getChild()!==o.getChild()&&!i.getChild().equals(o.getChild()))return!1}return!0}function Gp(t,e){if(!!t!=!!e)return!1;const n=t.keys(),s=e.keys();if(n.length!==s.length)return!1;for(const r of n){const i=t.get(r),o=e.get(r);if(!!i!=!!o)return!1;const a=i.getChild(),l=o.getChild();if(a!==l&&!a.equals(l))return!1}return!0}function mc(t,e){if(t===e)return!0;if(!!t!=!!e||!t||!e||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function gc(t,e){if(t===e)return!0;if(!!t!=!!e)return!1;if(!Cn(t)||!Cn(e))return t===e;const n=t,s=e;let r=0,i=0,o;for(o in n)r++;for(o in s)i++;if(r!==i)return!1;for(o in n){const a=n[o],l=s[o];if(Yr(a)&&Yr(l)){if(!mc(a,l))return!1}else if(Cn(a)&&Cn(l)){if(!gc(a,l))return!1}else if(a!==l)return!1}return!0}function Yr(t){return Array.isArray(t)||ArrayBuffer.isView(t)}const Na="23456789abdegjkmnpqrvwxyzABDEGJKMNPQRVWXYZ",qp=999,Kp=6,Ca=new Set,Hp=function(){let e="";for(let n=0;n<Kp;n++)e+=Na.charAt(Math.floor(Math.random()*Na.length));return e},Xp=function(){for(let e=0;e<qp;e++){const n=Hp();if(!Ca.has(n))return Ca.add(n),n}return""},yn=t=>t,Qp=new Set;class Do extends $o{constructor(e,n=""){super(e),this[ce].name=n,this.init(),this.dispatchEvent({type:"create"})}getGraph(){return this.graph}getDefaults(){return Object.assign(super.getDefaults(),{name:"",extras:{}})}set(e,n){return Array.isArray(n)&&(n=n.slice()),super.set(e,n)}getName(){return this.get("name")}setName(e){return this.set("name",e)}getExtras(){return this.get("extras")}setExtras(e){return this.set("extras",e)}clone(){const e=this.constructor;return new e(this.graph).copy(this,yn)}copy(e,n=yn){for(const s in this[ce]){const r=this[ce][s];if(r instanceof ts)this[Nn].has(s)||r.dispose();else if(r instanceof fn||r instanceof we)for(const i of r.values())i.dispose();else if(r instanceof Dt)for(const i of r.values())i.dispose()}for(const s in e[ce]){const r=this[ce][s],i=e[ce][s];if(i instanceof ts)this[Nn].has(s)?r.getChild().copy(n(i.getChild()),n):this.setRef(s,n(i.getChild()),i.getAttributes());else if(i instanceof we||i instanceof fn)for(const o of i.values())this.addRef(s,n(o.getChild()),o.getAttributes());else if(i instanceof Dt)for(const o of i.keys()){const a=i.get(o);this.setRefMap(s,o,n(a.getChild()),a.getAttributes())}else Cn(i)?this[ce][s]=JSON.parse(JSON.stringify(i)):Array.isArray(i)||i instanceof ArrayBuffer||ArrayBuffer.isView(i)?this[ce][s]=i.slice():this[ce][s]=i}return this}equals(e,n=Qp){if(this===e)return!0;if(this.propertyType!==e.propertyType)return!1;for(const s in this[ce]){if(n.has(s))continue;const r=this[ce][s],i=e[ce][s];if(r instanceof ts||i instanceof ts){if(!Wp(r,i))return!1}else if(r instanceof we||i instanceof we||r instanceof fn||i instanceof fn){if(!Yp(r,i))return!1}else if(r instanceof Dt||i instanceof Dt){if(!Gp(r,i))return!1}else if(Cn(r)||Cn(i)){if(!gc(r,i))return!1}else if(Yr(r)||Yr(i)){if(!mc(r,i))return!1}else if(r!==i)return!1}return!0}detach(){return this.graph.disconnectParents(this,e=>e.propertyType!=="Root"),this}listParents(){return this.graph.listParents(this)}}class Ke extends Do{getDefaults(){return Object.assign(super.getDefaults(),{extensions:new Dt})}getExtension(e){return this.getRefMap("extensions",e)}setExtension(e,n){return n&&n._validateParent(this),this.setRefMap("extensions",e,n)}listExtensions(){return this.listRefMapValues("extensions")}}class Y extends Ke{init(){this.propertyType=V.ACCESSOR}getDefaults(){return Object.assign(super.getDefaults(),{array:null,type:Y.Type.SCALAR,componentType:Y.ComponentType.FLOAT,normalized:!1,sparse:!1,buffer:null})}static getElementSize(e){switch(e){case Y.Type.SCALAR:return 1;case Y.Type.VEC2:return 2;case Y.Type.VEC3:return 3;case Y.Type.VEC4:return 4;case Y.Type.MAT2:return 4;case Y.Type.MAT3:return 9;case Y.Type.MAT4:return 16;default:throw new Error("Unexpected type: "+e)}}static getComponentSize(e){switch(e){case Y.ComponentType.BYTE:return 1;case Y.ComponentType.UNSIGNED_BYTE:return 1;case Y.ComponentType.SHORT:return 2;case Y.ComponentType.UNSIGNED_SHORT:return 2;case Y.ComponentType.UNSIGNED_INT:return 4;case Y.ComponentType.FLOAT:return 4;default:throw new Error("Unexpected component type: "+e)}}getMinNormalized(e){const n=this.getNormalized(),s=this.getElementSize(),r=this.getComponentType();if(this.getMin(e),n)for(let i=0;i<s;i++)e[i]=xe.decodeNormalizedInt(e[i],r);return e}getMin(e){const n=this.getArray(),s=this.getCount(),r=this.getElementSize();for(let i=0;i<r;i++)e[i]=1/0;for(let i=0;i<s*r;i+=r)for(let o=0;o<r;o++){const a=n[i+o];Number.isFinite(a)&&(e[o]=Math.min(e[o],a))}return e}getMaxNormalized(e){const n=this.getNormalized(),s=this.getElementSize(),r=this.getComponentType();if(this.getMax(e),n)for(let i=0;i<s;i++)e[i]=xe.decodeNormalizedInt(e[i],r);return e}getMax(e){const n=this.get("array"),s=this.getCount(),r=this.getElementSize();for(let i=0;i<r;i++)e[i]=-1/0;for(let i=0;i<s*r;i+=r)for(let o=0;o<r;o++){const a=n[i+o];Number.isFinite(a)&&(e[o]=Math.max(e[o],a))}return e}getCount(){const e=this.get("array");return e?e.length/this.getElementSize():0}getType(){return this.get("type")}setType(e){return this.set("type",e)}getElementSize(){return Y.getElementSize(this.get("type"))}getComponentSize(){return this.get("array").BYTES_PER_ELEMENT}getComponentType(){return this.get("componentType")}getNormalized(){return this.get("normalized")}setNormalized(e){return this.set("normalized",e)}getScalar(e){const n=this.getElementSize(),s=this.getComponentType(),r=this.getArray();return this.getNormalized()?xe.decodeNormalizedInt(r[e*n],s):r[e*n]}setScalar(e,n){const s=this.getElementSize(),r=this.getComponentType(),i=this.getArray();return this.getNormalized()?i[e*s]=xe.encodeNormalizedInt(n,r):i[e*s]=n,this}getElement(e,n){const s=this.getNormalized(),r=this.getElementSize(),i=this.getComponentType(),o=this.getArray();for(let a=0;a<r;a++)s?n[a]=xe.decodeNormalizedInt(o[e*r+a],i):n[a]=o[e*r+a];return n}setElement(e,n){const s=this.getNormalized(),r=this.getElementSize(),i=this.getComponentType(),o=this.getArray();for(let a=0;a<r;a++)s?o[e*r+a]=xe.encodeNormalizedInt(n[a],i):o[e*r+a]=n[a];return this}getSparse(){return this.get("sparse")}setSparse(e){return this.set("sparse",e)}getBuffer(){return this.getRef("buffer")}setBuffer(e){return this.setRef("buffer",e)}getArray(){return this.get("array")}setArray(e){return this.set("componentType",e?Jp(e):Y.ComponentType.FLOAT),this.set("array",e),this}getByteLength(){const e=this.get("array");return e?e.byteLength:0}}Y.Type={SCALAR:"SCALAR",VEC2:"VEC2",VEC3:"VEC3",VEC4:"VEC4",MAT2:"MAT2",MAT3:"MAT3",MAT4:"MAT4"};Y.ComponentType={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125,FLOAT:5126};function Jp(t){switch(t.constructor){case Float32Array:return Y.ComponentType.FLOAT;case Uint32Array:return Y.ComponentType.UNSIGNED_INT;case Uint16Array:return Y.ComponentType.UNSIGNED_SHORT;case Uint8Array:return Y.ComponentType.UNSIGNED_BYTE;case Int16Array:return Y.ComponentType.SHORT;case Int8Array:return Y.ComponentType.BYTE;default:throw new Error("Unknown accessor componentType.")}}class yc extends Ke{init(){this.propertyType=V.ANIMATION}getDefaults(){return Object.assign(super.getDefaults(),{channels:new we,samplers:new we})}addChannel(e){return this.addRef("channels",e)}removeChannel(e){return this.removeRef("channels",e)}listChannels(){return this.listRefs("channels")}addSampler(e){return this.addRef("samplers",e)}removeSampler(e){return this.removeRef("samplers",e)}listSamplers(){return this.listRefs("samplers")}}class bc extends Ke{init(){this.propertyType=V.ANIMATION_CHANNEL}getDefaults(){return Object.assign(super.getDefaults(),{targetPath:null,targetNode:null,sampler:null})}getTargetPath(){return this.get("targetPath")}setTargetPath(e){return this.set("targetPath",e)}getTargetNode(){return this.getRef("targetNode")}setTargetNode(e){return this.setRef("targetNode",e)}getSampler(){return this.getRef("sampler")}setSampler(e){return this.setRef("sampler",e)}}bc.TargetPath={TRANSLATION:"translation",ROTATION:"rotation",SCALE:"scale",WEIGHTS:"weights"};class Js extends Ke{init(){this.propertyType=V.ANIMATION_SAMPLER}getDefaultAttributes(){return Object.assign(super.getDefaults(),{interpolation:Js.Interpolation.LINEAR,input:null,output:null})}getInterpolation(){return this.get("interpolation")}setInterpolation(e){return this.set("interpolation",e)}getInput(){return this.getRef("input")}setInput(e){return this.setRef("input",e,{usage:at.OTHER})}getOutput(){return this.getRef("output")}setOutput(e){return this.setRef("output",e,{usage:at.OTHER})}}Js.Interpolation={LINEAR:"LINEAR",STEP:"STEP",CUBICSPLINE:"CUBICSPLINE"};class wc extends Ke{init(){this.propertyType=V.BUFFER}getDefaults(){return Object.assign(super.getDefaults(),{uri:""})}getURI(){return this.get("uri")}setURI(e){return this.set("uri",e)}}class zn extends Ke{init(){this.propertyType=V.CAMERA}getDefaults(){return Object.assign(super.getDefaults(),{type:zn.Type.PERSPECTIVE,znear:.1,zfar:100,aspectRatio:null,yfov:Math.PI*2*50/360,xmag:1,ymag:1})}getType(){return this.get("type")}setType(e){return this.set("type",e)}getZNear(){return this.get("znear")}setZNear(e){return this.set("znear",e)}getZFar(){return this.get("zfar")}setZFar(e){return this.set("zfar",e)}getAspectRatio(){return this.get("aspectRatio")}setAspectRatio(e){return this.set("aspectRatio",e)}getYFov(){return this.get("yfov")}setYFov(e){return this.set("yfov",e)}getXMag(){return this.get("xmag")}setXMag(e){return this.set("xmag",e)}getYMag(){return this.get("ymag")}setYMag(e){return this.set("ymag",e)}}zn.Type={PERSPECTIVE:"perspective",ORTHOGRAPHIC:"orthographic"};class em extends Do{_validateParent(e){if(!this.parentTypes.includes(e.propertyType))throw new Error(`Parent "${e.propertyType}" invalid for child "${this.propertyType}".`)}}em.EXTENSION_NAME=void 0;class Tt extends Ke{init(){this.propertyType=V.TEXTURE_INFO}getDefaults(){return Object.assign(super.getDefaults(),{texCoord:0,magFilter:null,minFilter:null,wrapS:Tt.WrapMode.REPEAT,wrapT:Tt.WrapMode.REPEAT})}getTexCoord(){return this.get("texCoord")}setTexCoord(e){return this.set("texCoord",e)}getMagFilter(){return this.get("magFilter")}setMagFilter(e){return this.set("magFilter",e)}getMinFilter(){return this.get("minFilter")}setMinFilter(e){return this.set("minFilter",e)}getWrapS(){return this.get("wrapS")}setWrapS(e){return this.set("wrapS",e)}getWrapT(){return this.get("wrapT")}setWrapT(e){return this.set("wrapT",e)}}Tt.WrapMode={CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497};Tt.MagFilter={NEAREST:9728,LINEAR:9729};Tt.MinFilter={NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987};const{R:fr,G:hr,B:dr,A:tm}=ao;class $n extends Ke{init(){this.propertyType=V.MATERIAL}getDefaults(){return Object.assign(super.getDefaults(),{alphaMode:$n.AlphaMode.OPAQUE,alphaCutoff:.5,doubleSided:!1,baseColorFactor:[1,1,1,1],baseColorTexture:null,baseColorTextureInfo:new Tt(this.graph,"baseColorTextureInfo"),emissiveFactor:[0,0,0],emissiveTexture:null,emissiveTextureInfo:new Tt(this.graph,"emissiveTextureInfo"),normalScale:1,normalTexture:null,normalTextureInfo:new Tt(this.graph,"normalTextureInfo"),occlusionStrength:1,occlusionTexture:null,occlusionTextureInfo:new Tt(this.graph,"occlusionTextureInfo"),roughnessFactor:1,metallicFactor:1,metallicRoughnessTexture:null,metallicRoughnessTextureInfo:new Tt(this.graph,"metallicRoughnessTextureInfo")})}getDoubleSided(){return this.get("doubleSided")}setDoubleSided(e){return this.set("doubleSided",e)}getAlpha(){return this.get("baseColorFactor")[3]}setAlpha(e){const n=this.get("baseColorFactor").slice();return n[3]=e,this.set("baseColorFactor",n)}getAlphaMode(){return this.get("alphaMode")}setAlphaMode(e){return this.set("alphaMode",e)}getAlphaCutoff(){return this.get("alphaCutoff")}setAlphaCutoff(e){return this.set("alphaCutoff",e)}getBaseColorFactor(){return this.get("baseColorFactor")}setBaseColorFactor(e){return this.set("baseColorFactor",e)}getBaseColorTexture(){return this.getRef("baseColorTexture")}getBaseColorTextureInfo(){return this.getRef("baseColorTexture")?this.getRef("baseColorTextureInfo"):null}setBaseColorTexture(e){return this.setRef("baseColorTexture",e,{channels:fr|hr|dr|tm,isColor:!0})}getEmissiveFactor(){return this.get("emissiveFactor")}setEmissiveFactor(e){return this.set("emissiveFactor",e)}getEmissiveTexture(){return this.getRef("emissiveTexture")}getEmissiveTextureInfo(){return this.getRef("emissiveTexture")?this.getRef("emissiveTextureInfo"):null}setEmissiveTexture(e){return this.setRef("emissiveTexture",e,{channels:fr|hr|dr,isColor:!0})}getNormalScale(){return this.get("normalScale")}setNormalScale(e){return this.set("normalScale",e)}getNormalTexture(){return this.getRef("normalTexture")}getNormalTextureInfo(){return this.getRef("normalTexture")?this.getRef("normalTextureInfo"):null}setNormalTexture(e){return this.setRef("normalTexture",e,{channels:fr|hr|dr})}getOcclusionStrength(){return this.get("occlusionStrength")}setOcclusionStrength(e){return this.set("occlusionStrength",e)}getOcclusionTexture(){return this.getRef("occlusionTexture")}getOcclusionTextureInfo(){return this.getRef("occlusionTexture")?this.getRef("occlusionTextureInfo"):null}setOcclusionTexture(e){return this.setRef("occlusionTexture",e,{channels:fr})}getRoughnessFactor(){return this.get("roughnessFactor")}setRoughnessFactor(e){return this.set("roughnessFactor",e)}getMetallicFactor(){return this.get("metallicFactor")}setMetallicFactor(e){return this.set("metallicFactor",e)}getMetallicRoughnessTexture(){return this.getRef("metallicRoughnessTexture")}getMetallicRoughnessTextureInfo(){return this.getRef("metallicRoughnessTexture")?this.getRef("metallicRoughnessTextureInfo"):null}setMetallicRoughnessTexture(e){return this.setRef("metallicRoughnessTexture",e,{channels:hr|dr})}}$n.AlphaMode={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};class vc extends Ke{init(){this.propertyType=V.MESH}getDefaults(){return Object.assign(super.getDefaults(),{weights:[],primitives:new we})}addPrimitive(e){return this.addRef("primitives",e)}removePrimitive(e){return this.removeRef("primitives",e)}listPrimitives(){return this.listRefs("primitives")}getWeights(){return this.get("weights")}setWeights(e){return this.set("weights",e)}}let xc=class extends Ke{init(){this.propertyType=V.NODE}getDefaults(){return Object.assign(super.getDefaults(),{translation:[0,0,0],rotation:[0,0,0,1],scale:[1,1,1],weights:[],camera:null,mesh:null,skin:null,children:new we})}copy(e,n=yn){if(n===yn)throw new Error("Node cannot be copied.");return super.copy(e,n)}getTranslation(){return this.get("translation")}getRotation(){return this.get("rotation")}getScale(){return this.get("scale")}setTranslation(e){return this.set("translation",e)}setRotation(e){return this.set("rotation",e)}setScale(e){return this.set("scale",e)}getMatrix(){return xe.compose(this.get("translation"),this.get("rotation"),this.get("scale"),[])}setMatrix(e){const n=this.get("translation").slice(),s=this.get("rotation").slice(),r=this.get("scale").slice();return xe.decompose(e,n,s,r),this.set("translation",n).set("rotation",s).set("scale",r)}getWorldTranslation(){const e=[0,0,0];return xe.decompose(this.getWorldMatrix(),e,[0,0,0,1],[1,1,1]),e}getWorldRotation(){const e=[0,0,0,1];return xe.decompose(this.getWorldMatrix(),[0,0,0],e,[1,1,1]),e}getWorldScale(){const e=[1,1,1];return xe.decompose(this.getWorldMatrix(),[0,0,0],[0,0,0,1],e),e}getWorldMatrix(){const e=[];for(let r=this;r!=null;r=r.getParentNode())e.push(r);let n;const s=e.pop().getMatrix();for(;n=e.pop();)Up(s,s,n.getMatrix());return s}addChild(e){const n=e.getParentNode();n&&n.removeChild(e);for(const s of e.listParents())s.propertyType===V.SCENE&&s.removeChild(e);return this.addRef("children",e)}removeChild(e){return this.removeRef("children",e)}listChildren(){return this.listRefs("children")}getParentNode(){for(const e of this.listParents())if(e.propertyType===V.NODE)return e;return null}getMesh(){return this.getRef("mesh")}setMesh(e){return this.setRef("mesh",e)}getCamera(){return this.getRef("camera")}setCamera(e){return this.setRef("camera",e)}getSkin(){return this.getRef("skin")}setSkin(e){return this.setRef("skin",e)}getWeights(){return this.get("weights")}setWeights(e){return this.set("weights",e)}traverse(e){e(this);for(const n of this.listChildren())n.traverse(e);return this}};class ci extends Ke{init(){this.propertyType=V.PRIMITIVE}getDefaults(){return Object.assign(super.getDefaults(),{mode:ci.Mode.TRIANGLES,material:null,indices:null,attributes:new Dt,targets:new we})}getIndices(){return this.getRef("indices")}setIndices(e){return this.setRef("indices",e,{usage:at.ELEMENT_ARRAY_BUFFER})}getAttribute(e){return this.getRefMap("attributes",e)}setAttribute(e,n){return this.setRefMap("attributes",e,n,{usage:at.ARRAY_BUFFER})}listAttributes(){return this.listRefMapValues("attributes")}listSemantics(){return this.listRefMapKeys("attributes")}getMaterial(){return this.getRef("material")}setMaterial(e){return this.setRef("material",e)}getMode(){return this.get("mode")}setMode(e){return this.set("mode",e)}listTargets(){return this.listRefs("targets")}addTarget(e){return this.addRef("targets",e)}removeTarget(e){return this.removeRef("targets",e)}}ci.Mode={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class nm extends Do{init(){this.propertyType=V.PRIMITIVE_TARGET}getDefaults(){return Object.assign(super.getDefaults(),{attributes:new Dt})}getAttribute(e){return this.getRefMap("attributes",e)}setAttribute(e,n){return this.setRefMap("attributes",e,n,{usage:at.ARRAY_BUFFER})}listAttributes(){return this.listRefMapValues("attributes")}listSemantics(){return this.listRefMapKeys("attributes")}}function Ge(){return Ge=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Ge.apply(null,arguments)}class _c extends Ke{init(){this.propertyType=V.SCENE}getDefaults(){return Object.assign(super.getDefaults(),{children:new we})}copy(e,n=yn){if(n===yn)throw new Error("Scene cannot be copied.");return super.copy(e,n)}addChild(e){const n=e.getParentNode();return n&&n.removeChild(e),this.addRef("children",e)}removeChild(e){return this.removeRef("children",e)}listChildren(){return this.listRefs("children")}traverse(e){for(const n of this.listChildren())n.traverse(e);return this}}class Ec extends Ke{init(){this.propertyType=V.SKIN}getDefaults(){return Object.assign(super.getDefaults(),{skeleton:null,inverseBindMatrices:null,joints:new we})}getSkeleton(){return this.getRef("skeleton")}setSkeleton(e){return this.setRef("skeleton",e)}getInverseBindMatrices(){return this.getRef("inverseBindMatrices")}setInverseBindMatrices(e){return this.setRef("inverseBindMatrices",e,{usage:at.INVERSE_BIND_MATRICES})}addJoint(e){return this.addRef("joints",e)}removeJoint(e){return this.removeRef("joints",e)}listJoints(){return this.listRefs("joints")}}class Sc extends Ke{init(){this.propertyType=V.TEXTURE}getDefaults(){return Object.assign(super.getDefaults(),{image:null,mimeType:"",uri:""})}getMimeType(){return this.get("mimeType")||Rn.extensionToMimeType(gs.extension(this.get("uri")))}setMimeType(e){return this.set("mimeType",e)}getURI(){return this.get("uri")}setURI(e){this.set("uri",e);const n=Rn.extensionToMimeType(gs.extension(e));return n&&this.set("mimeType",n),this}getImage(){return this.get("image")}setImage(e){return this.set("image",ae.assertView(e))}getSize(){const e=this.get("image");return e?Rn.getSize(e,this.getMimeType()):null}}class sm extends Ke{init(){this.propertyType=V.ROOT}getDefaults(){return Object.assign(super.getDefaults(),{asset:{generator:`glTF-Transform ${pc}`,version:"2.0"},defaultScene:null,accessors:new we,animations:new we,buffers:new we,cameras:new we,materials:new we,meshes:new we,nodes:new we,scenes:new we,skins:new we,textures:new we})}constructor(e){super(e),this._extensions=new Set,e.addEventListener("node:create",n=>{this._addChildOfRoot(n.target)})}clone(){throw new Error("Root cannot be cloned.")}copy(e,n=yn){if(n===yn)throw new Error("Root cannot be copied.");this.set("asset",Ge({},e.get("asset"))),this.setName(e.getName()),this.setExtras(Ge({},e.getExtras())),this.setDefaultScene(e.getDefaultScene()?n(e.getDefaultScene()):null);for(const s of e.listRefMapKeys("extensions")){const r=e.getExtension(s);this.setExtension(s,n(r))}return this}_addChildOfRoot(e){return e instanceof _c?this.addRef("scenes",e):e instanceof xc?this.addRef("nodes",e):e instanceof zn?this.addRef("cameras",e):e instanceof Ec?this.addRef("skins",e):e instanceof vc?this.addRef("meshes",e):e instanceof $n?this.addRef("materials",e):e instanceof Sc?this.addRef("textures",e):e instanceof yc?this.addRef("animations",e):e instanceof Y?this.addRef("accessors",e):e instanceof wc&&this.addRef("buffers",e),this}getAsset(){return this.get("asset")}listExtensionsUsed(){return Array.from(this._extensions)}listExtensionsRequired(){return this.listExtensionsUsed().filter(e=>e.isRequired())}_enableExtension(e){return this._extensions.add(e),this}_disableExtension(e){return this._extensions.delete(e),this}listScenes(){return this.listRefs("scenes")}setDefaultScene(e){return this.setRef("defaultScene",e)}getDefaultScene(){return this.getRef("defaultScene")}listNodes(){return this.listRefs("nodes")}listCameras(){return this.listRefs("cameras")}listSkins(){return this.listRefs("skins")}listMeshes(){return this.listRefs("meshes")}listMaterials(){return this.listRefs("materials")}listTextures(){return this.listRefs("textures")}listAnimations(){return this.listRefs("animations")}listAccessors(){return this.listRefs("accessors")}listBuffers(){return this.listRefs("buffers")}}let kc=class fo{static fromGraph(e){return fo._GRAPH_DOCUMENTS.get(e)||null}constructor(){this._graph=new Dp,this._root=new sm(this._graph),this._logger=ut.DEFAULT_INSTANCE,fo._GRAPH_DOCUMENTS.set(this._graph,this)}getRoot(){return this._root}getGraph(){return this._graph}getLogger(){return this._logger}setLogger(e){return this._logger=e,this}clone(){throw new Error("Use 'cloneDocument(source)' from '@gltf-transform/functions'.")}merge(e){throw new Error("Use 'mergeDocuments(target, source)' from '@gltf-transform/functions'.")}async transform(...e){const n=e.map(s=>s.name);for(const s of e)await s(this,{stack:n});return this}createExtension(e){const n=e.EXTENSION_NAME;return this.getRoot().listExtensionsUsed().find(r=>r.extensionName===n)||new e(this)}createScene(e=""){return new _c(this._graph,e)}createNode(e=""){return new xc(this._graph,e)}createCamera(e=""){return new zn(this._graph,e)}createSkin(e=""){return new Ec(this._graph,e)}createMesh(e=""){return new vc(this._graph,e)}createPrimitive(){return new ci(this._graph)}createPrimitiveTarget(e=""){return new nm(this._graph,e)}createMaterial(e=""){return new $n(this._graph,e)}createTexture(e=""){return new Sc(this._graph,e)}createAnimation(e=""){return new yc(this._graph,e)}createAnimationChannel(e=""){return new bc(this._graph,e)}createAnimationSampler(e=""){return new Js(this._graph,e)}createAccessor(e="",n=null){return n||(n=this.getRoot().listBuffers()[0]),new Y(this._graph,e).setBuffer(n)}createBuffer(e=""){return new wc(this._graph,e)}};kc._GRAPH_DOCUMENTS=new WeakMap;class rm{constructor(e){this.jsonDoc=void 0,this.buffers=[],this.bufferViews=[],this.bufferViewBuffers=[],this.accessors=[],this.textures=[],this.textureInfos=new Map,this.materials=[],this.meshes=[],this.cameras=[],this.nodes=[],this.skins=[],this.animations=[],this.scenes=[],this.jsonDoc=e}setTextureInfo(e,n){this.textureInfos.set(e,n),n.texCoord!==void 0&&e.setTexCoord(n.texCoord),n.extras!==void 0&&e.setExtras(n.extras);const s=this.jsonDoc.json.textures[n.index];if(s.sampler===void 0)return;const r=this.jsonDoc.json.samplers[s.sampler];r.magFilter!==void 0&&e.setMagFilter(r.magFilter),r.minFilter!==void 0&&e.setMinFilter(r.minFilter),r.wrapS!==void 0&&e.setWrapS(r.wrapS),r.wrapT!==void 0&&e.setWrapT(r.wrapT)}}const Oa={logger:ut.DEFAULT_INSTANCE,extensions:[],dependencies:{}},im=new Set([V.BUFFER,V.TEXTURE,V.MATERIAL,V.MESH,V.PRIMITIVE,V.NODE,V.SCENE]);class om{static read(e,n=Oa){const s=Ge({},Oa,n),{json:r}=e,i=new kc().setLogger(s.logger);this.validate(e,s);const o=new rm(e),a=r.asset,l=i.getRoot().getAsset();a.copyright&&(l.copyright=a.copyright),a.extras&&(l.extras=a.extras),r.extras!==void 0&&i.getRoot().setExtras(Ge({},r.extras));const c=r.extensionsUsed||[],u=r.extensionsRequired||[];s.extensions.sort((w,v)=>w.EXTENSION_NAME>v.EXTENSION_NAME?1:-1);for(const w of s.extensions)if(c.includes(w.EXTENSION_NAME)){const v=i.createExtension(w).setRequired(u.includes(w.EXTENSION_NAME)),k=v.prereadTypes.filter(A=>!im.has(A));k.length&&s.logger.warn(`Preread hooks for some types (${k.join()}), requested by extension ${v.extensionName}, are unsupported. Please file an issue or a PR.`);for(const A of v.readDependencies)v.install(A,s.dependencies[A])}const f=r.buffers||[];i.getRoot().listExtensionsUsed().filter(w=>w.prereadTypes.includes(V.BUFFER)).forEach(w=>w.preread(o,V.BUFFER)),o.buffers=f.map(w=>{const v=i.createBuffer(w.name);return w.extras&&v.setExtras(w.extras),w.uri&&w.uri.indexOf("__")!==0&&v.setURI(w.uri),v});const d=r.bufferViews||[];o.bufferViewBuffers=d.map((w,v)=>{if(!o.bufferViews[v]){const k=e.json.buffers[w.buffer],A=k.uri?e.resources[k.uri]:e.resources[Vr],N=w.byteOffset||0;o.bufferViews[v]=ae.toView(A,N,w.byteLength)}return o.buffers[w.buffer]});const p=r.accessors||[];o.accessors=p.map(w=>{const v=o.bufferViewBuffers[w.bufferView],k=i.createAccessor(w.name,v).setType(w.type);return w.extras&&k.setExtras(w.extras),w.normalized!==void 0&&k.setNormalized(w.normalized),w.bufferView===void 0||k.setArray(jr(w,o)),k});const y=r.images||[],g=r.textures||[];i.getRoot().listExtensionsUsed().filter(w=>w.prereadTypes.includes(V.TEXTURE)).forEach(w=>w.preread(o,V.TEXTURE)),o.textures=y.map(w=>{const v=i.createTexture(w.name);if(w.extras&&v.setExtras(w.extras),w.bufferView!==void 0){const k=r.bufferViews[w.bufferView],A=e.json.buffers[k.buffer],N=A.uri?e.resources[A.uri]:e.resources[Vr],C=k.byteOffset||0,O=k.byteLength,D=N.slice(C,C+O);v.setImage(D)}else w.uri!==void 0&&(v.setImage(e.resources[w.uri]),w.uri.indexOf("__")!==0&&v.setURI(w.uri));if(w.mimeType!==void 0)v.setMimeType(w.mimeType);else if(w.uri){const k=gs.extension(w.uri);v.setMimeType(Rn.extensionToMimeType(k))}return v}),i.getRoot().listExtensionsUsed().filter(w=>w.prereadTypes.includes(V.MATERIAL)).forEach(w=>w.preread(o,V.MATERIAL));const b=r.materials||[];o.materials=b.map(w=>{const v=i.createMaterial(w.name);w.extras&&v.setExtras(w.extras),w.alphaMode!==void 0&&v.setAlphaMode(w.alphaMode),w.alphaCutoff!==void 0&&v.setAlphaCutoff(w.alphaCutoff),w.doubleSided!==void 0&&v.setDoubleSided(w.doubleSided);const k=w.pbrMetallicRoughness||{};if(k.baseColorFactor!==void 0&&v.setBaseColorFactor(k.baseColorFactor),w.emissiveFactor!==void 0&&v.setEmissiveFactor(w.emissiveFactor),k.metallicFactor!==void 0&&v.setMetallicFactor(k.metallicFactor),k.roughnessFactor!==void 0&&v.setRoughnessFactor(k.roughnessFactor),k.baseColorTexture!==void 0){const A=k.baseColorTexture,N=o.textures[g[A.index].source];v.setBaseColorTexture(N),o.setTextureInfo(v.getBaseColorTextureInfo(),A)}if(w.emissiveTexture!==void 0){const A=w.emissiveTexture,N=o.textures[g[A.index].source];v.setEmissiveTexture(N),o.setTextureInfo(v.getEmissiveTextureInfo(),A)}if(w.normalTexture!==void 0){const A=w.normalTexture,N=o.textures[g[A.index].source];v.setNormalTexture(N),o.setTextureInfo(v.getNormalTextureInfo(),A),w.normalTexture.scale!==void 0&&v.setNormalScale(w.normalTexture.scale)}if(w.occlusionTexture!==void 0){const A=w.occlusionTexture,N=o.textures[g[A.index].source];v.setOcclusionTexture(N),o.setTextureInfo(v.getOcclusionTextureInfo(),A),w.occlusionTexture.strength!==void 0&&v.setOcclusionStrength(w.occlusionTexture.strength)}if(k.metallicRoughnessTexture!==void 0){const A=k.metallicRoughnessTexture,N=o.textures[g[A.index].source];v.setMetallicRoughnessTexture(N),o.setTextureInfo(v.getMetallicRoughnessTextureInfo(),A)}return v}),i.getRoot().listExtensionsUsed().filter(w=>w.prereadTypes.includes(V.MESH)).forEach(w=>w.preread(o,V.MESH));const m=r.meshes||[];i.getRoot().listExtensionsUsed().filter(w=>w.prereadTypes.includes(V.PRIMITIVE)).forEach(w=>w.preread(o,V.PRIMITIVE)),o.meshes=m.map(w=>{const v=i.createMesh(w.name);return w.extras&&v.setExtras(w.extras),w.weights!==void 0&&v.setWeights(w.weights),(w.primitives||[]).forEach(A=>{const N=i.createPrimitive();A.extras&&N.setExtras(A.extras),A.material!==void 0&&N.setMaterial(o.materials[A.material]),A.mode!==void 0&&N.setMode(A.mode);for(const[D,M]of Object.entries(A.attributes||{}))N.setAttribute(D,o.accessors[M]);A.indices!==void 0&&N.setIndices(o.accessors[A.indices]);const C=w.extras&&w.extras.targetNames||[];(A.targets||[]).forEach((D,M)=>{const R=C[M]||M.toString(),$=i.createPrimitiveTarget(R);for(const[B,z]of Object.entries(D))$.setAttribute(B,o.accessors[z]);N.addTarget($)}),v.addPrimitive(N)}),v});const S=r.cameras||[];o.cameras=S.map(w=>{const v=i.createCamera(w.name).setType(w.type);if(w.extras&&v.setExtras(w.extras),w.type===zn.Type.PERSPECTIVE){const k=w.perspective;v.setYFov(k.yfov),v.setZNear(k.znear),k.zfar!==void 0&&v.setZFar(k.zfar),k.aspectRatio!==void 0&&v.setAspectRatio(k.aspectRatio)}else{const k=w.orthographic;v.setZNear(k.znear).setZFar(k.zfar).setXMag(k.xmag).setYMag(k.ymag)}return v});const x=r.nodes||[];i.getRoot().listExtensionsUsed().filter(w=>w.prereadTypes.includes(V.NODE)).forEach(w=>w.preread(o,V.NODE)),o.nodes=x.map(w=>{const v=i.createNode(w.name);if(w.extras&&v.setExtras(w.extras),w.translation!==void 0&&v.setTranslation(w.translation),w.rotation!==void 0&&v.setRotation(w.rotation),w.scale!==void 0&&v.setScale(w.scale),w.matrix!==void 0){const k=[0,0,0],A=[0,0,0,1],N=[1,1,1];xe.decompose(w.matrix,k,A,N),v.setTranslation(k),v.setRotation(A),v.setScale(N)}return w.weights!==void 0&&v.setWeights(w.weights),v});const E=r.skins||[];o.skins=E.map(w=>{const v=i.createSkin(w.name);w.extras&&v.setExtras(w.extras),w.inverseBindMatrices!==void 0&&v.setInverseBindMatrices(o.accessors[w.inverseBindMatrices]),w.skeleton!==void 0&&v.setSkeleton(o.nodes[w.skeleton]);for(const k of w.joints)v.addJoint(o.nodes[k]);return v}),x.map((w,v)=>{const k=o.nodes[v];(w.children||[]).forEach(N=>k.addChild(o.nodes[N])),w.mesh!==void 0&&k.setMesh(o.meshes[w.mesh]),w.camera!==void 0&&k.setCamera(o.cameras[w.camera]),w.skin!==void 0&&k.setSkin(o.skins[w.skin])});const _=r.animations||[];o.animations=_.map(w=>{const v=i.createAnimation(w.name);w.extras&&v.setExtras(w.extras);const A=(w.samplers||[]).map(C=>{const O=i.createAnimationSampler().setInput(o.accessors[C.input]).setOutput(o.accessors[C.output]).setInterpolation(C.interpolation||Js.Interpolation.LINEAR);return C.extras&&O.setExtras(C.extras),v.addSampler(O),O});return(w.channels||[]).forEach(C=>{const O=i.createAnimationChannel().setSampler(A[C.sampler]).setTargetPath(C.target.path);C.target.node!==void 0&&O.setTargetNode(o.nodes[C.target.node]),C.extras&&O.setExtras(C.extras),v.addChannel(O)}),v});const T=r.scenes||[];return i.getRoot().listExtensionsUsed().filter(w=>w.prereadTypes.includes(V.SCENE)).forEach(w=>w.preread(o,V.SCENE)),o.scenes=T.map(w=>{const v=i.createScene(w.name);return w.extras&&v.setExtras(w.extras),(w.nodes||[]).map(A=>o.nodes[A]).forEach(A=>v.addChild(A)),v}),r.scene!==void 0&&i.getRoot().setDefaultScene(o.scenes[r.scene]),i.getRoot().listExtensionsUsed().forEach(w=>w.read(o)),p.forEach((w,v)=>{const k=o.accessors[v],A=!!w.sparse,N=!w.bufferView&&!k.getArray();(A||N)&&k.setSparse(!0).setArray(lm(w,o))}),i}static validate(e,n){const s=e.json;if(s.asset.version!=="2.0")throw new Error(`Unsupported glTF version, "${s.asset.version}".`);if(s.extensionsRequired){for(const r of s.extensionsRequired)if(!n.extensions.find(i=>i.EXTENSION_NAME===r))throw new Error(`Missing required extension, "${r}".`)}if(s.extensionsUsed)for(const r of s.extensionsUsed)n.extensions.find(i=>i.EXTENSION_NAME===r)||n.logger.warn(`Missing optional extension, "${r}".`)}}function am(t,e){const n=e.jsonDoc,s=e.bufferViews[t.bufferView],r=n.json.bufferViews[t.bufferView],i=ai[t.componentType],o=Y.getElementSize(t.type),a=i.BYTES_PER_ELEMENT,l=t.byteOffset||0,c=new i(t.count*o),u=new DataView(s.buffer,s.byteOffset,s.byteLength),f=r.byteStride;for(let d=0;d<t.count;d++)for(let p=0;p<o;p++){const y=l+d*f+p*a;let g;switch(t.componentType){case Y.ComponentType.FLOAT:g=u.getFloat32(y,!0);break;case Y.ComponentType.UNSIGNED_INT:g=u.getUint32(y,!0);break;case Y.ComponentType.UNSIGNED_SHORT:g=u.getUint16(y,!0);break;case Y.ComponentType.UNSIGNED_BYTE:g=u.getUint8(y);break;case Y.ComponentType.SHORT:g=u.getInt16(y,!0);break;case Y.ComponentType.BYTE:g=u.getInt8(y);break;default:throw new Error(`Unexpected componentType "${t.componentType}".`)}c[d*o+p]=g}return c}function jr(t,e){const n=e.jsonDoc,s=e.bufferViews[t.bufferView],r=n.json.bufferViews[t.bufferView],i=ai[t.componentType],o=Y.getElementSize(t.type),a=i.BYTES_PER_ELEMENT,l=o*a;if(r.byteStride!==void 0&&r.byteStride!==l)return am(t,e);const c=s.byteOffset+(t.byteOffset||0),u=t.count*o*a;return new i(s.buffer.slice(c,c+u))}function lm(t,e){const n=ai[t.componentType],s=Y.getElementSize(t.type);let r;t.bufferView!==void 0?r=jr(t,e):r=new n(t.count*s);const i=t.sparse;if(!i)return r;const o=i.count,a=Ge({},t,i.indices,{count:o,type:"SCALAR"}),l=Ge({},t,i.values,{count:o}),c=jr(a,e),u=jr(l,e);for(let f=0;f<a.count;f++)for(let d=0;d<s;d++)r[c[f]*s+d]=u[f*s+d];return r}var Us;(function(t){t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER"})(Us||(Us={}));class Pn{constructor(e,n,s){this._doc=void 0,this.jsonDoc=void 0,this.options=void 0,this.accessorIndexMap=new Map,this.animationIndexMap=new Map,this.bufferIndexMap=new Map,this.cameraIndexMap=new Map,this.skinIndexMap=new Map,this.materialIndexMap=new Map,this.meshIndexMap=new Map,this.nodeIndexMap=new Map,this.imageIndexMap=new Map,this.textureDefIndexMap=new Map,this.textureInfoDefMap=new Map,this.samplerDefIndexMap=new Map,this.sceneIndexMap=new Map,this.imageBufferViews=[],this.otherBufferViews=new Map,this.otherBufferViewsIndexMap=new Map,this.extensionData={},this.bufferURIGenerator=void 0,this.imageURIGenerator=void 0,this.logger=void 0,this._accessorUsageMap=new Map,this.accessorUsageGroupedByParent=new Set(["ARRAY_BUFFER"]),this.accessorParents=new Map,this._doc=e,this.jsonDoc=n,this.options=s;const r=e.getRoot(),i=r.listBuffers().length,o=r.listTextures().length;this.bufferURIGenerator=new ja(i>1,()=>s.basename||"buffer"),this.imageURIGenerator=new ja(o>1,a=>cm(e,a)||s.basename||"texture"),this.logger=e.getLogger()}createTextureInfoDef(e,n){const s={magFilter:n.getMagFilter()||void 0,minFilter:n.getMinFilter()||void 0,wrapS:n.getWrapS(),wrapT:n.getWrapT()},r=JSON.stringify(s);this.samplerDefIndexMap.has(r)||(this.samplerDefIndexMap.set(r,this.jsonDoc.json.samplers.length),this.jsonDoc.json.samplers.push(s));const i={source:this.imageIndexMap.get(e),sampler:this.samplerDefIndexMap.get(r)},o=JSON.stringify(i);this.textureDefIndexMap.has(o)||(this.textureDefIndexMap.set(o,this.jsonDoc.json.textures.length),this.jsonDoc.json.textures.push(i));const a={index:this.textureDefIndexMap.get(o)};return n.getTexCoord()!==0&&(a.texCoord=n.getTexCoord()),Object.keys(n.getExtras()).length>0&&(a.extras=n.getExtras()),this.textureInfoDefMap.set(n,a),a}createPropertyDef(e){const n={};return e.getName()&&(n.name=e.getName()),Object.keys(e.getExtras()).length>0&&(n.extras=e.getExtras()),n}createAccessorDef(e){const n=this.createPropertyDef(e);return n.type=e.getType(),n.componentType=e.getComponentType(),n.count=e.getCount(),this._doc.getGraph().listParentEdges(e).some(r=>r.getName()==="attributes"&&r.getAttributes().key==="POSITION"||r.getName()==="input")&&(n.max=e.getMax([]).map(Math.fround),n.min=e.getMin([]).map(Math.fround)),e.getNormalized()&&(n.normalized=e.getNormalized()),n}createImageData(e,n,s){if(this.options.format===dn.GLB)this.imageBufferViews.push(n),e.bufferView=this.jsonDoc.json.bufferViews.length,this.jsonDoc.json.bufferViews.push({buffer:0,byteOffset:-1,byteLength:n.byteLength});else{const r=Rn.mimeTypeToExtension(s.getMimeType());e.uri=this.imageURIGenerator.createURI(s,r),this.assignResourceURI(e.uri,n,!1)}}assignResourceURI(e,n,s){const r=this.jsonDoc.resources;if(!(e in r)){r[e]=n;return}if(n===r[e]){this.logger.warn(`Duplicate resource URI, "${e}".`);return}const i=`Resource URI "${e}" already assigned to different data.`;if(!s){this.logger.warn(i);return}throw new Error(i)}getAccessorUsage(e){const n=this._accessorUsageMap.get(e);if(n)return n;if(e.getSparse())return at.SPARSE;for(const s of this._doc.getGraph().listParentEdges(e)){const{usage:r}=s.getAttributes();if(r)return r;s.getParent().propertyType!==V.ROOT&&this.logger.warn(`Missing attribute ".usage" on edge, "${s.getName()}".`)}return at.OTHER}addAccessorToUsageGroup(e,n){const s=this._accessorUsageMap.get(e);if(s&&s!==n)throw new Error(`Accessor with usage "${s}" cannot be reused as "${n}".`);return this._accessorUsageMap.set(e,n),this}}Pn.BufferViewTarget=Us;Pn.BufferViewUsage=at;Pn.USAGE_TO_TARGET={[at.ARRAY_BUFFER]:Us.ARRAY_BUFFER,[at.ELEMENT_ARRAY_BUFFER]:Us.ELEMENT_ARRAY_BUFFER};class ja{constructor(e,n){this.multiple=void 0,this.basename=void 0,this.counter={},this.multiple=e,this.basename=n}createURI(e,n){if(e.getURI())return e.getURI();if(this.multiple){const s=this.basename(e);return this.counter[s]=this.counter[s]||1,`${s}_${this.counter[s]++}.${n}`}else return`${this.basename(e)}.${n}`}}function cm(t,e){const n=t.getGraph().listParentEdges(e).find(s=>s.getParent()!==t.getRoot());return n?n.getName().replace(/texture$/i,""):""}const{BufferViewUsage:pr}=Pn,{UNSIGNED_INT:um,UNSIGNED_SHORT:fm,UNSIGNED_BYTE:hm}=Y.ComponentType,dm=new Set([V.ACCESSOR,V.BUFFER,V.MATERIAL,V.MESH]);class pm{static write(e,n){const s=e.getGraph(),r=e.getRoot(),i={asset:Ge({generator:`glTF-Transform ${pc}`},r.getAsset()),extras:Ge({},r.getExtras())},o={json:i,resources:{}},a=new Pn(e,o,n),l=n.logger||ut.DEFAULT_INSTANCE,c=new Set(n.extensions.map(m=>m.EXTENSION_NAME)),u=e.getRoot().listExtensionsUsed().filter(m=>c.has(m.extensionName)).sort((m,S)=>m.extensionName>S.extensionName?1:-1),f=e.getRoot().listExtensionsRequired().filter(m=>c.has(m.extensionName)).sort((m,S)=>m.extensionName>S.extensionName?1:-1);u.length<e.getRoot().listExtensionsUsed().length&&l.warn("Some extensions were not registered for I/O, and will not be written.");for(const m of u){const S=m.prewriteTypes.filter(x=>!dm.has(x));S.length&&l.warn(`Prewrite hooks for some types (${S.join()}), requested by extension ${m.extensionName}, are unsupported. Please file an issue or a PR.`);for(const x of m.writeDependencies)m.install(x,n.dependencies[x])}function d(m,S,x,E){const _=[];let T=0;for(const k of m){const A=a.createAccessorDef(k);A.bufferView=i.bufferViews.length;const N=k.getArray(),C=ae.pad(ae.toView(N));A.byteOffset=T,T+=C.byteLength,_.push(C),a.accessorIndexMap.set(k,i.accessors.length),i.accessors.push(A)}const w=ae.concat(_),v={buffer:S,byteOffset:x,byteLength:w.byteLength};return E&&(v.target=E),i.bufferViews.push(v),{buffers:_,byteLength:T}}function p(m,S,x){const E=m[0].getCount();let _=0;for(const A of m){const N=a.createAccessorDef(A);N.bufferView=i.bufferViews.length,N.byteOffset=_;const C=A.getElementSize(),O=A.getComponentSize();_+=ae.padNumber(C*O),a.accessorIndexMap.set(A,i.accessors.length),i.accessors.push(N)}const T=E*_,w=new ArrayBuffer(T),v=new DataView(w);for(let A=0;A<E;A++){let N=0;for(const C of m){const O=C.getElementSize(),D=C.getComponentSize(),M=C.getComponentType(),R=C.getArray();for(let $=0;$<O;$++){const B=A*_+N+$*D,z=R[A*O+$];switch(M){case Y.ComponentType.FLOAT:v.setFloat32(B,z,!0);break;case Y.ComponentType.BYTE:v.setInt8(B,z);break;case Y.ComponentType.SHORT:v.setInt16(B,z,!0);break;case Y.ComponentType.UNSIGNED_BYTE:v.setUint8(B,z);break;case Y.ComponentType.UNSIGNED_SHORT:v.setUint16(B,z,!0);break;case Y.ComponentType.UNSIGNED_INT:v.setUint32(B,z,!0);break;default:throw new Error("Unexpected component type: "+M)}}N+=ae.padNumber(O*D)}}const k={buffer:S,byteOffset:x,byteLength:T,byteStride:_,target:Pn.BufferViewTarget.ARRAY_BUFFER};return i.bufferViews.push(k),{byteLength:T,buffers:[new Uint8Array(w)]}}function y(m,S,x){const E=[];let _=0;const T=new Map;let w=-1/0,v=!1;for(const M of m){const R=a.createAccessorDef(M);i.accessors.push(R),a.accessorIndexMap.set(M,i.accessors.length-1);const $=[],B=[],z=[],G=new Array(M.getElementSize()).fill(0);for(let te=0,q=M.getCount();te<q;te++)if(M.getElement(te,z),!xe.eq(z,G,0)){w=Math.max(te,w),$.push(te);for(let ie=0;ie<z.length;ie++)B.push(z[ie])}const H=$.length,ne={accessorDef:R,count:H};if(T.set(M,ne),H===0)continue;H>M.getCount()/2&&(v=!0);const W=ai[M.getComponentType()];ne.indices=$,ne.values=new W(B)}if(!Number.isFinite(w))return{buffers:E,byteLength:_};v&&l.warn("Some sparse accessors have >50% non-zero elements, which may increase file size.");const k=w<255?Uint8Array:w<65535?Uint16Array:Uint32Array,A=w<255?hm:w<65535?fm:um,N={buffer:S,byteOffset:x+_,byteLength:0};for(const M of m){const R=T.get(M);if(R.count===0)continue;R.indicesByteOffset=N.byteLength;const $=ae.pad(ae.toView(new k(R.indices)));E.push($),_+=$.byteLength,N.byteLength+=$.byteLength}i.bufferViews.push(N);const C=i.bufferViews.length-1,O={buffer:S,byteOffset:x+_,byteLength:0};for(const M of m){const R=T.get(M);if(R.count===0)continue;R.valuesByteOffset=O.byteLength;const $=ae.pad(ae.toView(R.values));E.push($),_+=$.byteLength,O.byteLength+=$.byteLength}i.bufferViews.push(O);const D=i.bufferViews.length-1;for(const M of m){const R=T.get(M);R.count!==0&&(R.accessorDef.sparse={count:R.count,indices:{bufferView:C,byteOffset:R.indicesByteOffset,componentType:A},values:{bufferView:D,byteOffset:R.valuesByteOffset}})}return{buffers:E,byteLength:_}}if(i.accessors=[],i.bufferViews=[],i.samplers=[],i.textures=[],i.images=r.listTextures().map((m,S)=>{const x=a.createPropertyDef(m);m.getMimeType()&&(x.mimeType=m.getMimeType());const E=m.getImage();return E&&a.createImageData(x,E,m),a.imageIndexMap.set(m,S),x}),u.filter(m=>m.prewriteTypes.includes(V.ACCESSOR)).forEach(m=>m.prewrite(a,V.ACCESSOR)),r.listAccessors().forEach(m=>{const S=a.accessorUsageGroupedByParent,x=a.accessorParents;if(a.accessorIndexMap.has(m))return;const E=a.getAccessorUsage(m);if(a.addAccessorToUsageGroup(m,E),S.has(E)){const _=s.listParents(m).find(T=>T.propertyType!==V.ROOT);x.set(m,_)}}),u.filter(m=>m.prewriteTypes.includes(V.BUFFER)).forEach(m=>m.prewrite(a,V.BUFFER)),(r.listAccessors().length>0||a.otherBufferViews.size>0||r.listTextures().length>0&&n.format===dn.GLB)&&r.listBuffers().length===0)throw new Error("Buffer required for Document resources, but none was found.");i.buffers=[],r.listBuffers().forEach((m,S)=>{const x=a.createPropertyDef(m),E=a.accessorUsageGroupedByParent,_=m.listParents().filter(O=>O instanceof Y),T=new Set(_.map(O=>a.accessorParents.get(O))),w=new Map(Array.from(T).map((O,D)=>[O,D])),v={};for(const O of _){var k;if(a.accessorIndexMap.has(O))continue;const D=a.getAccessorUsage(O);let M=D;if(E.has(D)){const R=a.accessorParents.get(O);M+=`:${w.get(R)}`}v[k=M]||(v[k]={usage:D,accessors:[]}),v[M].accessors.push(O)}const A=[],N=i.buffers.length;let C=0;for(const{usage:O,accessors:D}of Object.values(v))if(O===pr.ARRAY_BUFFER&&n.vertexLayout===Wr.INTERLEAVED){const M=p(D,N,C);C+=M.byteLength;for(const R of M.buffers)A.push(R)}else if(O===pr.ARRAY_BUFFER)for(const M of D){const R=p([M],N,C);C+=R.byteLength;for(const $ of R.buffers)A.push($)}else if(O===pr.SPARSE){const M=y(D,N,C);C+=M.byteLength;for(const R of M.buffers)A.push(R)}else if(O===pr.ELEMENT_ARRAY_BUFFER){const M=Pn.BufferViewTarget.ELEMENT_ARRAY_BUFFER,R=d(D,N,C,M);C+=R.byteLength;for(const $ of R.buffers)A.push($)}else{const M=d(D,N,C);C+=M.byteLength;for(const R of M.buffers)A.push(R)}if(a.imageBufferViews.length&&S===0){for(let O=0;O<a.imageBufferViews.length;O++)if(i.bufferViews[i.images[O].bufferView].byteOffset=C,C+=a.imageBufferViews[O].byteLength,A.push(a.imageBufferViews[O]),C%8){const D=8-C%8;C+=D,A.push(new Uint8Array(D))}}if(a.otherBufferViews.has(m))for(const O of a.otherBufferViews.get(m))i.bufferViews.push({buffer:N,byteOffset:C,byteLength:O.byteLength}),a.otherBufferViewsIndexMap.set(O,i.bufferViews.length-1),C+=O.byteLength,A.push(O);if(C){let O;n.format===dn.GLB?O=Vr:(O=a.bufferURIGenerator.createURI(m,"bin"),x.uri=O),x.byteLength=C,a.assignResourceURI(O,ae.concat(A),!0)}i.buffers.push(x),a.bufferIndexMap.set(m,S)}),r.listAccessors().find(m=>!m.getBuffer())&&l.warn("Skipped writing one or more Accessors: no Buffer assigned."),u.filter(m=>m.prewriteTypes.includes(V.MATERIAL)).forEach(m=>m.prewrite(a,V.MATERIAL)),i.materials=r.listMaterials().map((m,S)=>{const x=a.createPropertyDef(m);if(m.getAlphaMode()!==$n.AlphaMode.OPAQUE&&(x.alphaMode=m.getAlphaMode()),m.getAlphaMode()===$n.AlphaMode.MASK&&(x.alphaCutoff=m.getAlphaCutoff()),m.getDoubleSided()&&(x.doubleSided=!0),x.pbrMetallicRoughness={},xe.eq(m.getBaseColorFactor(),[1,1,1,1])||(x.pbrMetallicRoughness.baseColorFactor=m.getBaseColorFactor()),xe.eq(m.getEmissiveFactor(),[0,0,0])||(x.emissiveFactor=m.getEmissiveFactor()),m.getRoughnessFactor()!==1&&(x.pbrMetallicRoughness.roughnessFactor=m.getRoughnessFactor()),m.getMetallicFactor()!==1&&(x.pbrMetallicRoughness.metallicFactor=m.getMetallicFactor()),m.getBaseColorTexture()){const E=m.getBaseColorTexture(),_=m.getBaseColorTextureInfo();x.pbrMetallicRoughness.baseColorTexture=a.createTextureInfoDef(E,_)}if(m.getEmissiveTexture()){const E=m.getEmissiveTexture(),_=m.getEmissiveTextureInfo();x.emissiveTexture=a.createTextureInfoDef(E,_)}if(m.getNormalTexture()){const E=m.getNormalTexture(),_=m.getNormalTextureInfo(),T=a.createTextureInfoDef(E,_);m.getNormalScale()!==1&&(T.scale=m.getNormalScale()),x.normalTexture=T}if(m.getOcclusionTexture()){const E=m.getOcclusionTexture(),_=m.getOcclusionTextureInfo(),T=a.createTextureInfoDef(E,_);m.getOcclusionStrength()!==1&&(T.strength=m.getOcclusionStrength()),x.occlusionTexture=T}if(m.getMetallicRoughnessTexture()){const E=m.getMetallicRoughnessTexture(),_=m.getMetallicRoughnessTextureInfo();x.pbrMetallicRoughness.metallicRoughnessTexture=a.createTextureInfoDef(E,_)}return a.materialIndexMap.set(m,S),x}),u.filter(m=>m.prewriteTypes.includes(V.MESH)).forEach(m=>m.prewrite(a,V.MESH)),i.meshes=r.listMeshes().map((m,S)=>{const x=a.createPropertyDef(m);let E=null;return x.primitives=m.listPrimitives().map(_=>{const T={attributes:{}};T.mode=_.getMode();const w=_.getMaterial();w&&(T.material=a.materialIndexMap.get(w)),Object.keys(_.getExtras()).length&&(T.extras=_.getExtras());const v=_.getIndices();v&&(T.indices=a.accessorIndexMap.get(v));for(const k of _.listSemantics())T.attributes[k]=a.accessorIndexMap.get(_.getAttribute(k));for(const k of _.listTargets()){const A={};for(const N of k.listSemantics())A[N]=a.accessorIndexMap.get(k.getAttribute(N));T.targets=T.targets||[],T.targets.push(A)}return _.listTargets().length&&!E&&(E=_.listTargets().map(k=>k.getName())),T}),m.getWeights().length&&(x.weights=m.getWeights()),E&&(x.extras=x.extras||{},x.extras.targetNames=E),a.meshIndexMap.set(m,S),x}),i.cameras=r.listCameras().map((m,S)=>{const x=a.createPropertyDef(m);if(x.type=m.getType(),x.type===zn.Type.PERSPECTIVE){x.perspective={znear:m.getZNear(),zfar:m.getZFar(),yfov:m.getYFov()};const E=m.getAspectRatio();E!==null&&(x.perspective.aspectRatio=E)}else x.orthographic={znear:m.getZNear(),zfar:m.getZFar(),xmag:m.getXMag(),ymag:m.getYMag()};return a.cameraIndexMap.set(m,S),x}),i.nodes=r.listNodes().map((m,S)=>{const x=a.createPropertyDef(m);return xe.eq(m.getTranslation(),[0,0,0])||(x.translation=m.getTranslation()),xe.eq(m.getRotation(),[0,0,0,1])||(x.rotation=m.getRotation()),xe.eq(m.getScale(),[1,1,1])||(x.scale=m.getScale()),m.getWeights().length&&(x.weights=m.getWeights()),a.nodeIndexMap.set(m,S),x}),i.skins=r.listSkins().map((m,S)=>{const x=a.createPropertyDef(m),E=m.getInverseBindMatrices();E&&(x.inverseBindMatrices=a.accessorIndexMap.get(E));const _=m.getSkeleton();return _&&(x.skeleton=a.nodeIndexMap.get(_)),x.joints=m.listJoints().map(T=>a.nodeIndexMap.get(T)),a.skinIndexMap.set(m,S),x}),r.listNodes().forEach((m,S)=>{const x=i.nodes[S],E=m.getMesh();E&&(x.mesh=a.meshIndexMap.get(E));const _=m.getCamera();_&&(x.camera=a.cameraIndexMap.get(_));const T=m.getSkin();T&&(x.skin=a.skinIndexMap.get(T)),m.listChildren().length>0&&(x.children=m.listChildren().map(w=>a.nodeIndexMap.get(w)))}),i.animations=r.listAnimations().map((m,S)=>{const x=a.createPropertyDef(m),E=new Map;return x.samplers=m.listSamplers().map((_,T)=>{const w=a.createPropertyDef(_);return w.input=a.accessorIndexMap.get(_.getInput()),w.output=a.accessorIndexMap.get(_.getOutput()),w.interpolation=_.getInterpolation(),E.set(_,T),w}),x.channels=m.listChannels().map(_=>{const T=a.createPropertyDef(_);return T.sampler=E.get(_.getSampler()),T.target={node:a.nodeIndexMap.get(_.getTargetNode()),path:_.getTargetPath()},T}),a.animationIndexMap.set(m,S),x}),i.scenes=r.listScenes().map((m,S)=>{const x=a.createPropertyDef(m);return x.nodes=m.listChildren().map(E=>a.nodeIndexMap.get(E)),a.sceneIndexMap.set(m,S),x});const b=r.getDefaultScene();return b&&(i.scene=r.listScenes().indexOf(b)),i.extensionsUsed=u.map(m=>m.extensionName),i.extensionsRequired=f.map(m=>m.extensionName),u.forEach(m=>m.write(a)),mm(i),o}}function mm(t){const e=[];for(const n in t){const s=t[n];(Array.isArray(s)&&s.length===0||s===null||s===""||s&&typeof s=="object"&&Object.keys(s).length===0)&&e.push(n)}for(const n of e)delete t[n]}var Gr;(function(t){t[t.JSON=1313821514]="JSON",t[t.BIN=5130562]="BIN"})(Gr||(Gr={}));class gm{constructor(){this._logger=ut.DEFAULT_INSTANCE,this._extensions=new Set,this._dependencies={},this._vertexLayout=Wr.INTERLEAVED,this.lastReadBytes=0,this.lastWriteBytes=0}setLogger(e){return this._logger=e,this}registerExtensions(e){for(const n of e)this._extensions.add(n),n.register();return this}registerDependencies(e){return Object.assign(this._dependencies,e),this}setVertexLayout(e){return this._vertexLayout=e,this}async read(e){return await this.readJSON(await this.readAsJSON(e))}async readAsJSON(e){const n=await this.readURI(e,"view");this.lastReadBytes=n.byteLength;const s=Ia(n)?this._binaryToJSON(n):{json:JSON.parse(ae.decodeText(n)),resources:{}};return await this._readResourcesExternal(s,this.dirname(e)),this._readResourcesInternal(s),s}async readJSON(e){return e=this._copyJSON(e),this._readResourcesInternal(e),om.read(e,{extensions:Array.from(this._extensions),dependencies:this._dependencies,logger:this._logger})}async binaryToJSON(e){const n=this._binaryToJSON(ae.assertView(e));this._readResourcesInternal(n);const s=n.json;if(s.buffers&&s.buffers.some(r=>ym(n,r)))throw new Error("Cannot resolve external buffers with binaryToJSON().");if(s.images&&s.images.some(r=>bm(n,r)))throw new Error("Cannot resolve external images with binaryToJSON().");return n}async readBinary(e){return this.readJSON(await this.binaryToJSON(ae.assertView(e)))}async writeJSON(e,n={}){if(n.format===dn.GLB&&e.getRoot().listBuffers().length>1)throw new Error("GLB must have 01 buffers.");return pm.write(e,{format:n.format||dn.GLTF,basename:n.basename||"",logger:this._logger,vertexLayout:this._vertexLayout,dependencies:Ge({},this._dependencies),extensions:Array.from(this._extensions)})}async writeBinary(e){const{json:n,resources:s}=await this.writeJSON(e,{format:dn.GLB}),r=new Uint32Array([1179937895,2,12]),i=JSON.stringify(n),o=ae.pad(ae.encodeText(i),32),a=ae.toView(new Uint32Array([o.byteLength,1313821514])),l=ae.concat([a,o]);r[r.length-1]+=l.byteLength;const c=Object.values(s)[0];if(!c||!c.byteLength)return ae.concat([ae.toView(r),l]);const u=ae.pad(c,0),f=ae.toView(new Uint32Array([u.byteLength,5130562])),d=ae.concat([f,u]);return r[r.length-1]+=d.byteLength,ae.concat([ae.toView(r),l,d])}async _readResourcesExternal(e,n){var s=this;const r=e.json.images||[],i=e.json.buffers||[],o=[...r,...i].map(async function(a){const l=a.uri;if(!l||l.match(/data:/))return Promise.resolve();e.resources[l]=await s.readURI(s.resolve(n,l),"view"),s.lastReadBytes+=e.resources[l].byteLength});await Promise.all(o)}_readResourcesInternal(e){function n(i){if(i.uri){if(i.uri in e.resources){ae.assertView(e.resources[i.uri]);return}if(i.uri.match(/data:/)){const o=`__${Xp()}.${gs.extension(i.uri)}`;e.resources[o]=ae.createBufferFromDataURI(i.uri),i.uri=o}}}(e.json.images||[]).forEach(i=>{if(i.bufferView===void 0&&i.uri===void 0)throw new Error("Missing resource URI or buffer view.");n(i)}),(e.json.buffers||[]).forEach(n)}_copyJSON(e){const{images:n,buffers:s}=e.json;return e={json:Ge({},e.json),resources:Ge({},e.resources)},n&&(e.json.images=n.map(r=>Ge({},r))),s&&(e.json.buffers=s.map(r=>Ge({},r))),e}_binaryToJSON(e){if(!Ia(e))throw new Error("Invalid glTF 2.0 binary.");const n=new Uint32Array(e.buffer,e.byteOffset+12,2);if(n[1]!==Gr.JSON)throw new Error("Missing required GLB JSON chunk.");const s=20,r=n[0],i=ae.decodeText(ae.toView(e,s,r)),o=JSON.parse(i),a=s+r;if(e.byteLength<=a)return{json:o,resources:{}};const l=new Uint32Array(e.buffer,e.byteOffset+a,2);if(l[1]!==Gr.BIN)return{json:o,resources:{}};const c=l[0],u=ae.toView(e,a+8,c);return{json:o,resources:{[Vr]:u}}}}function ym(t,e){return e.uri!==void 0&&!(e.uri in t.resources)}function bm(t,e){return e.uri!==void 0&&!(e.uri in t.resources)&&e.bufferView===void 0}function Ia(t){if(t.byteLength<3*Uint32Array.BYTES_PER_ELEMENT)return!1;const e=new Uint32Array(t.buffer,t.byteOffset,3);return e[0]===1179937895&&e[1]===2}class wm extends gm{constructor(e=$s.DEFAULT_INIT){super(),this._fetchConfig=void 0,this._fetchConfig=e}async readURI(e,n){const s=await fetch(e,this._fetchConfig);switch(n){case"view":return new Uint8Array(await s.arrayBuffer());case"text":return s.text()}}resolve(e,n){return $s.resolve(e,n)}dirname(e){return $s.dirname(e)}}async function Tc(t){const e=URL.createObjectURL(new Blob([t])),n=new wm,s=await n.read(e);return await n.writeBinary(s)}function I(t,e,n){function s(a,l){var c;Object.defineProperty(a,"_zod",{value:a._zod??{},enumerable:!1}),(c=a._zod).traits??(c.traits=new Set),a._zod.traits.add(t),e(a,l);for(const u in o.prototype)u in a||Object.defineProperty(a,u,{value:o.prototype[u].bind(a)});a._zod.constr=o,a._zod.def=l}const r=n?.Parent??Object;class i extends r{}Object.defineProperty(i,"name",{value:t});function o(a){var l;const c=n?.Parent?new i:this;s(c,a),(l=c._zod).deferred??(l.deferred=[]);for(const u of c._zod.deferred)u();return c}return Object.defineProperty(o,"init",{value:s}),Object.defineProperty(o,Symbol.hasInstance,{value:a=>n?.Parent&&a instanceof n.Parent?!0:a?._zod?.traits?.has(t)}),Object.defineProperty(o,"name",{value:t}),o}class fs extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class Ac extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const Nc={};function bn(t){return Nc}function vm(t){const e=Object.values(t).filter(s=>typeof s=="number");return Object.entries(t).filter(([s,r])=>e.indexOf(+s)===-1).map(([s,r])=>r)}function ho(t,e){return typeof e=="bigint"?e.toString():e}function Lo(t){return{get value(){{const e=t();return Object.defineProperty(this,"value",{value:e}),e}}}}function zo(t){return t==null}function Fo(t){const e=t.startsWith("^")?1:0,n=t.endsWith("$")?t.length-1:t.length;return t.slice(e,n)}function xm(t,e){const n=(t.toString().split(".")[1]||"").length,s=e.toString();let r=(s.split(".")[1]||"").length;if(r===0&&/\d?e-\d?/.test(s)){const l=s.match(/\d?e-(\d?)/);l?.[1]&&(r=Number.parseInt(l[1]))}const i=n>r?n:r,o=Number.parseInt(t.toFixed(i).replace(".","")),a=Number.parseInt(e.toFixed(i).replace(".",""));return o%a/10**i}const Ma=Symbol("evaluating");function ue(t,e,n){let s;Object.defineProperty(t,e,{get(){if(s!==Ma)return s===void 0&&(s=Ma,s=n()),s},set(r){Object.defineProperty(t,e,{value:r})},configurable:!0})}function Fn(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0})}function Bn(...t){const e={};for(const n of t){const s=Object.getOwnPropertyDescriptors(n);Object.assign(e,s)}return Object.defineProperties({},e)}function Ra(t){return JSON.stringify(t)}const Cc="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function qr(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}const _m=Lo(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function ys(t){if(qr(t)===!1)return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(qr(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function Oc(t){return ys(t)?{...t}:Array.isArray(t)?[...t]:t}const Em=new Set(["string","number","symbol"]);function bs(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Sn(t,e,n){const s=new t._zod.constr(e??t._zod.def);return(!e||n?.parent)&&(s._zod.parent=t),s}function U(t){const e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function Sm(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}const km={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function Tm(t,e){const n=t._zod.def,s=Bn(t._zod.def,{get shape(){const r={};for(const i in e){if(!(i in n.shape))throw new Error(`Unrecognized key: "${i}"`);e[i]&&(r[i]=n.shape[i])}return Fn(this,"shape",r),r},checks:[]});return Sn(t,s)}function Am(t,e){const n=t._zod.def,s=Bn(t._zod.def,{get shape(){const r={...t._zod.def.shape};for(const i in e){if(!(i in n.shape))throw new Error(`Unrecognized key: "${i}"`);e[i]&&delete r[i]}return Fn(this,"shape",r),r},checks:[]});return Sn(t,s)}function Nm(t,e){if(!ys(e))throw new Error("Invalid input to extend: expected a plain object");const n=t._zod.def.checks;if(n&&n.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const r=Bn(t._zod.def,{get shape(){const i={...t._zod.def.shape,...e};return Fn(this,"shape",i),i},checks:[]});return Sn(t,r)}function Cm(t,e){if(!ys(e))throw new Error("Invalid input to safeExtend: expected a plain object");const n={...t._zod.def,get shape(){const s={...t._zod.def.shape,...e};return Fn(this,"shape",s),s},checks:t._zod.def.checks};return Sn(t,n)}function Om(t,e){const n=Bn(t._zod.def,{get shape(){const s={...t._zod.def.shape,...e._zod.def.shape};return Fn(this,"shape",s),s},get catchall(){return e._zod.def.catchall},checks:[]});return Sn(t,n)}function jm(t,e,n){const s=Bn(e._zod.def,{get shape(){const r=e._zod.def.shape,i={...r};if(n)for(const o in n){if(!(o in r))throw new Error(`Unrecognized key: "${o}"`);n[o]&&(i[o]=t?new t({type:"optional",innerType:r[o]}):r[o])}else for(const o in r)i[o]=t?new t({type:"optional",innerType:r[o]}):r[o];return Fn(this,"shape",i),i},checks:[]});return Sn(e,s)}function Im(t,e,n){const s=Bn(e._zod.def,{get shape(){const r=e._zod.def.shape,i={...r};if(n)for(const o in n){if(!(o in i))throw new Error(`Unrecognized key: "${o}"`);n[o]&&(i[o]=new t({type:"nonoptional",innerType:r[o]}))}else for(const o in r)i[o]=new t({type:"nonoptional",innerType:r[o]});return Fn(this,"shape",i),i},checks:[]});return Sn(e,s)}function ns(t,e=0){if(t.aborted===!0)return!0;for(let n=e;n<t.issues.length;n++)if(t.issues[n]?.continue!==!0)return!0;return!1}function On(t,e){return e.map(n=>{var s;return(s=n).path??(s.path=[]),n.path.unshift(t),n})}function mr(t){return typeof t=="string"?t:t?.message}function wn(t,e,n){const s={...t,path:t.path??[]};if(!t.message){const r=mr(t.inst?._zod.def?.error?.(t))??mr(e?.error?.(t))??mr(n.customError?.(t))??mr(n.localeError?.(t))??"Invalid input";s.message=r}return delete s.inst,delete s.continue,e?.reportInput||delete s.input,s}function Bo(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function Zs(...t){const[e,n,s]=t;return typeof e=="string"?{message:e,code:"custom",input:n,inst:s}:{...e}}const jc=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,ho,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},Ic=I("$ZodError",jc),Mc=I("$ZodError",jc,{Parent:Error});function Mm(t,e=n=>n.message){const n={},s=[];for(const r of t.issues)r.path.length>0?(n[r.path[0]]=n[r.path[0]]||[],n[r.path[0]].push(e(r))):s.push(e(r));return{formErrors:s,fieldErrors:n}}function Rm(t,e=n=>n.message){const n={_errors:[]},s=r=>{for(const i of r.issues)if(i.code==="invalid_union"&&i.errors.length)i.errors.map(o=>s({issues:o}));else if(i.code==="invalid_key")s({issues:i.issues});else if(i.code==="invalid_element")s({issues:i.issues});else if(i.path.length===0)n._errors.push(e(i));else{let o=n,a=0;for(;a<i.path.length;){const l=i.path[a];a===i.path.length-1?(o[l]=o[l]||{_errors:[]},o[l]._errors.push(e(i))):o[l]=o[l]||{_errors:[]},o=o[l],a++}}};return s(t),n}const Uo=t=>(e,n,s,r)=>{const i=s?Object.assign(s,{async:!1}):{async:!1},o=e._zod.run({value:n,issues:[]},i);if(o instanceof Promise)throw new fs;if(o.issues.length){const a=new(r?.Err??t)(o.issues.map(l=>wn(l,i,bn())));throw Cc(a,r?.callee),a}return o.value},Zo=t=>async(e,n,s,r)=>{const i=s?Object.assign(s,{async:!0}):{async:!0};let o=e._zod.run({value:n,issues:[]},i);if(o instanceof Promise&&(o=await o),o.issues.length){const a=new(r?.Err??t)(o.issues.map(l=>wn(l,i,bn())));throw Cc(a,r?.callee),a}return o.value},ui=t=>(e,n,s)=>{const r=s?{...s,async:!1}:{async:!1},i=e._zod.run({value:n,issues:[]},r);if(i instanceof Promise)throw new fs;return i.issues.length?{success:!1,error:new(t??Ic)(i.issues.map(o=>wn(o,r,bn())))}:{success:!0,data:i.value}},Pm=ui(Mc),fi=t=>async(e,n,s)=>{const r=s?Object.assign(s,{async:!0}):{async:!0};let i=e._zod.run({value:n,issues:[]},r);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new t(i.issues.map(o=>wn(o,r,bn())))}:{success:!0,data:i.value}},$m=fi(Mc),Dm=t=>(e,n,s)=>{const r=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return Uo(t)(e,n,r)},Lm=t=>(e,n,s)=>Uo(t)(e,n,s),zm=t=>async(e,n,s)=>{const r=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return Zo(t)(e,n,r)},Fm=t=>async(e,n,s)=>Zo(t)(e,n,s),Bm=t=>(e,n,s)=>{const r=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return ui(t)(e,n,r)},Um=t=>(e,n,s)=>ui(t)(e,n,s),Zm=t=>async(e,n,s)=>{const r=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return fi(t)(e,n,r)},Vm=t=>async(e,n,s)=>fi(t)(e,n,s),Wm=/^[cC][^\s-]{8,}$/,Ym=/^[0-9a-z]+$/,Gm=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,qm=/^[0-9a-vA-V]{20}$/,Km=/^[A-Za-z0-9]{27}$/,Hm=/^[a-zA-Z0-9_-]{21}$/,Xm=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,Qm=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Pa=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,Jm=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,eg="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function tg(){return new RegExp(eg,"u")}const ng=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,sg=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,rg=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,ig=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,og=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Rc=/^[A-Za-z0-9_-]*$/,ag=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,lg=/^\+(?:[0-9]){6,14}[0-9]$/,Pc="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",cg=new RegExp(`^${Pc}$`);function $c(t){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function ug(t){return new RegExp(`^${$c(t)}$`)}function fg(t){const e=$c({precision:t.precision}),n=["Z"];t.local&&n.push(""),t.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const s=`${e}(?:${n.join("|")})`;return new RegExp(`^${Pc}T(?:${s})$`)}const hg=t=>{const e=t?`[\\s\\S]{${t?.minimum??0},${t?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},dg=/^-?\d+$/,pg=/^-?\d+(?:\.\d+)?/,mg=/^(?:true|false)$/i,gg=/^[^A-Z]*$/,yg=/^[^a-z]*$/,Xe=I("$ZodCheck",(t,e)=>{var n;t._zod??(t._zod={}),t._zod.def=e,(n=t._zod).onattach??(n.onattach=[])}),Dc={number:"number",bigint:"bigint",object:"date"},Lc=I("$ZodCheckLessThan",(t,e)=>{Xe.init(t,e);const n=Dc[typeof e.value];t._zod.onattach.push(s=>{const r=s._zod.bag,i=(e.inclusive?r.maximum:r.exclusiveMaximum)??Number.POSITIVE_INFINITY;e.value<i&&(e.inclusive?r.maximum=e.value:r.exclusiveMaximum=e.value)}),t._zod.check=s=>{(e.inclusive?s.value<=e.value:s.value<e.value)||s.issues.push({origin:n,code:"too_big",maximum:e.value,input:s.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),zc=I("$ZodCheckGreaterThan",(t,e)=>{Xe.init(t,e);const n=Dc[typeof e.value];t._zod.onattach.push(s=>{const r=s._zod.bag,i=(e.inclusive?r.minimum:r.exclusiveMinimum)??Number.NEGATIVE_INFINITY;e.value>i&&(e.inclusive?r.minimum=e.value:r.exclusiveMinimum=e.value)}),t._zod.check=s=>{(e.inclusive?s.value>=e.value:s.value>e.value)||s.issues.push({origin:n,code:"too_small",minimum:e.value,input:s.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),bg=I("$ZodCheckMultipleOf",(t,e)=>{Xe.init(t,e),t._zod.onattach.push(n=>{var s;(s=n._zod.bag).multipleOf??(s.multipleOf=e.value)}),t._zod.check=n=>{if(typeof n.value!=typeof e.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%e.value===BigInt(0):xm(n.value,e.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:e.value,input:n.value,inst:t,continue:!e.abort})}}),wg=I("$ZodCheckNumberFormat",(t,e)=>{Xe.init(t,e),e.format=e.format||"float64";const n=e.format?.includes("int"),s=n?"int":"number",[r,i]=km[e.format];t._zod.onattach.push(o=>{const a=o._zod.bag;a.format=e.format,a.minimum=r,a.maximum=i,n&&(a.pattern=dg)}),t._zod.check=o=>{const a=o.value;if(n){if(!Number.isInteger(a)){o.issues.push({expected:s,format:e.format,code:"invalid_type",continue:!1,input:a,inst:t});return}if(!Number.isSafeInteger(a)){a>0?o.issues.push({input:a,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:s,continue:!e.abort}):o.issues.push({input:a,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:s,continue:!e.abort});return}}a<r&&o.issues.push({origin:"number",input:a,code:"too_small",minimum:r,inclusive:!0,inst:t,continue:!e.abort}),a>i&&o.issues.push({origin:"number",input:a,code:"too_big",maximum:i,inst:t})}}),vg=I("$ZodCheckMaxLength",(t,e)=>{var n;Xe.init(t,e),(n=t._zod.def).when??(n.when=s=>{const r=s.value;return!zo(r)&&r.length!==void 0}),t._zod.onattach.push(s=>{const r=s._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<r&&(s._zod.bag.maximum=e.maximum)}),t._zod.check=s=>{const r=s.value;if(r.length<=e.maximum)return;const o=Bo(r);s.issues.push({origin:o,code:"too_big",maximum:e.maximum,inclusive:!0,input:r,inst:t,continue:!e.abort})}}),xg=I("$ZodCheckMinLength",(t,e)=>{var n;Xe.init(t,e),(n=t._zod.def).when??(n.when=s=>{const r=s.value;return!zo(r)&&r.length!==void 0}),t._zod.onattach.push(s=>{const r=s._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>r&&(s._zod.bag.minimum=e.minimum)}),t._zod.check=s=>{const r=s.value;if(r.length>=e.minimum)return;const o=Bo(r);s.issues.push({origin:o,code:"too_small",minimum:e.minimum,inclusive:!0,input:r,inst:t,continue:!e.abort})}}),_g=I("$ZodCheckLengthEquals",(t,e)=>{var n;Xe.init(t,e),(n=t._zod.def).when??(n.when=s=>{const r=s.value;return!zo(r)&&r.length!==void 0}),t._zod.onattach.push(s=>{const r=s._zod.bag;r.minimum=e.length,r.maximum=e.length,r.length=e.length}),t._zod.check=s=>{const r=s.value,i=r.length;if(i===e.length)return;const o=Bo(r),a=i>e.length;s.issues.push({origin:o,...a?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:s.value,inst:t,continue:!e.abort})}}),hi=I("$ZodCheckStringFormat",(t,e)=>{var n,s;Xe.init(t,e),t._zod.onattach.push(r=>{const i=r._zod.bag;i.format=e.format,e.pattern&&(i.patterns??(i.patterns=new Set),i.patterns.add(e.pattern))}),e.pattern?(n=t._zod).check??(n.check=r=>{e.pattern.lastIndex=0,!e.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:e.format,input:r.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(s=t._zod).check??(s.check=()=>{})}),Eg=I("$ZodCheckRegex",(t,e)=>{hi.init(t,e),t._zod.check=n=>{e.pattern.lastIndex=0,!e.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),Sg=I("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=gg),hi.init(t,e)}),kg=I("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=yg),hi.init(t,e)}),Tg=I("$ZodCheckIncludes",(t,e)=>{Xe.init(t,e);const n=bs(e.includes),s=new RegExp(typeof e.position=="number"?`^.{${e.position}}${n}`:n);e.pattern=s,t._zod.onattach.push(r=>{const i=r._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(s)}),t._zod.check=r=>{r.value.includes(e.includes,e.position)||r.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:r.value,inst:t,continue:!e.abort})}}),Ag=I("$ZodCheckStartsWith",(t,e)=>{Xe.init(t,e);const n=new RegExp(`^${bs(e.prefix)}.*`);e.pattern??(e.pattern=n),t._zod.onattach.push(s=>{const r=s._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(n)}),t._zod.check=s=>{s.value.startsWith(e.prefix)||s.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:s.value,inst:t,continue:!e.abort})}}),Ng=I("$ZodCheckEndsWith",(t,e)=>{Xe.init(t,e);const n=new RegExp(`.*${bs(e.suffix)}$`);e.pattern??(e.pattern=n),t._zod.onattach.push(s=>{const r=s._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(n)}),t._zod.check=s=>{s.value.endsWith(e.suffix)||s.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:s.value,inst:t,continue:!e.abort})}}),Cg=I("$ZodCheckOverwrite",(t,e)=>{Xe.init(t,e),t._zod.check=n=>{n.value=e.tx(n.value)}});class Og{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const s=e.split(`
`).filter(o=>o),r=Math.min(...s.map(o=>o.length-o.trimStart().length)),i=s.map(o=>o.slice(r)).map(o=>" ".repeat(this.indent*2)+o);for(const o of i)this.content.push(o)}compile(){const e=Function,n=this?.args,r=[...(this?.content??[""]).map(i=>`  ${i}`)];return new e(...n,r.join(`
`))}}const jg={major:4,minor:1,patch:12},me=I("$ZodType",(t,e)=>{var n;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=jg;const s=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&s.unshift(t);for(const r of s)for(const i of r._zod.onattach)i(t);if(s.length===0)(n=t._zod).deferred??(n.deferred=[]),t._zod.deferred?.push(()=>{t._zod.run=t._zod.parse});else{const r=(o,a,l)=>{let c=ns(o),u;for(const f of a){if(f._zod.def.when){if(!f._zod.def.when(o))continue}else if(c)continue;const d=o.issues.length,p=f._zod.check(o);if(p instanceof Promise&&l?.async===!1)throw new fs;if(u||p instanceof Promise)u=(u??Promise.resolve()).then(async()=>{await p,o.issues.length!==d&&(c||(c=ns(o,d)))});else{if(o.issues.length===d)continue;c||(c=ns(o,d))}}return u?u.then(()=>o):o},i=(o,a,l)=>{if(ns(o))return o.aborted=!0,o;const c=r(a,s,l);if(c instanceof Promise){if(l.async===!1)throw new fs;return c.then(u=>t._zod.parse(u,l))}return t._zod.parse(c,l)};t._zod.run=(o,a)=>{if(a.skipChecks)return t._zod.parse(o,a);if(a.direction==="backward"){const c=t._zod.parse({value:o.value,issues:[]},{...a,skipChecks:!0});return c instanceof Promise?c.then(u=>i(u,o,a)):i(c,o,a)}const l=t._zod.parse(o,a);if(l instanceof Promise){if(a.async===!1)throw new fs;return l.then(c=>r(c,s,a))}return r(l,s,a)}}t["~standard"]={validate:r=>{try{const i=Pm(t,r);return i.success?{value:i.data}:{issues:i.error?.issues}}catch{return $m(t,r).then(o=>o.success?{value:o.data}:{issues:o.error?.issues})}},vendor:"zod",version:1}}),Vo=I("$ZodString",(t,e)=>{me.init(t,e),t._zod.pattern=[...t?._zod.bag?.patterns??[]].pop()??hg(t._zod.bag),t._zod.parse=(n,s)=>{if(e.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:t}),n}}),ve=I("$ZodStringFormat",(t,e)=>{hi.init(t,e),Vo.init(t,e)}),Ig=I("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=Qm),ve.init(t,e)}),Mg=I("$ZodUUID",(t,e)=>{if(e.version){const s={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(s===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=Pa(s))}else e.pattern??(e.pattern=Pa());ve.init(t,e)}),Rg=I("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=Jm),ve.init(t,e)}),Pg=I("$ZodURL",(t,e)=>{ve.init(t,e),t._zod.check=n=>{try{const s=n.value.trim(),r=new URL(s);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(r.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:ag.source,input:n.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(r.protocol.endsWith(":")?r.protocol.slice(0,-1):r.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:n.value,inst:t,continue:!e.abort})),e.normalize?n.value=r.href:n.value=s;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:t,continue:!e.abort})}}}),$g=I("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=tg()),ve.init(t,e)}),Dg=I("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=Hm),ve.init(t,e)}),Lg=I("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=Wm),ve.init(t,e)}),zg=I("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=Ym),ve.init(t,e)}),Fg=I("$ZodULID",(t,e)=>{e.pattern??(e.pattern=Gm),ve.init(t,e)}),Bg=I("$ZodXID",(t,e)=>{e.pattern??(e.pattern=qm),ve.init(t,e)}),Ug=I("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=Km),ve.init(t,e)}),Zg=I("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=fg(e)),ve.init(t,e)}),Vg=I("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=cg),ve.init(t,e)}),Wg=I("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=ug(e)),ve.init(t,e)}),Yg=I("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=Xm),ve.init(t,e)}),Gg=I("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=ng),ve.init(t,e),t._zod.onattach.push(n=>{const s=n._zod.bag;s.format="ipv4"})}),qg=I("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=sg),ve.init(t,e),t._zod.onattach.push(n=>{const s=n._zod.bag;s.format="ipv6"}),t._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:t,continue:!e.abort})}}}),Kg=I("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=rg),ve.init(t,e)}),Hg=I("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=ig),ve.init(t,e),t._zod.check=n=>{const s=n.value.split("/");try{if(s.length!==2)throw new Error;const[r,i]=s;if(!i)throw new Error;const o=Number(i);if(`${o}`!==i)throw new Error;if(o<0||o>128)throw new Error;new URL(`http://[${r}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:t,continue:!e.abort})}}});function Fc(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}const Xg=I("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=og),ve.init(t,e),t._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64"}),t._zod.check=n=>{Fc(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:t,continue:!e.abort})}});function Qg(t){if(!Rc.test(t))return!1;const e=t.replace(/[-_]/g,s=>s==="-"?"+":"/"),n=e.padEnd(Math.ceil(e.length/4)*4,"=");return Fc(n)}const Jg=I("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=Rc),ve.init(t,e),t._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64url"}),t._zod.check=n=>{Qg(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:t,continue:!e.abort})}}),e0=I("$ZodE164",(t,e)=>{e.pattern??(e.pattern=lg),ve.init(t,e)});function t0(t,e=null){try{const n=t.split(".");if(n.length!==3)return!1;const[s]=n;if(!s)return!1;const r=JSON.parse(atob(s));return!("typ"in r&&r?.typ!=="JWT"||!r.alg||e&&(!("alg"in r)||r.alg!==e))}catch{return!1}}const n0=I("$ZodJWT",(t,e)=>{ve.init(t,e),t._zod.check=n=>{t0(n.value,e.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:t,continue:!e.abort})}}),Bc=I("$ZodNumber",(t,e)=>{me.init(t,e),t._zod.pattern=t._zod.bag.pattern??pg,t._zod.parse=(n,s)=>{if(e.coerce)try{n.value=Number(n.value)}catch{}const r=n.value;if(typeof r=="number"&&!Number.isNaN(r)&&Number.isFinite(r))return n;const i=typeof r=="number"?Number.isNaN(r)?"NaN":Number.isFinite(r)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:r,inst:t,...i?{received:i}:{}}),n}}),s0=I("$ZodNumber",(t,e)=>{wg.init(t,e),Bc.init(t,e)}),r0=I("$ZodBoolean",(t,e)=>{me.init(t,e),t._zod.pattern=mg,t._zod.parse=(n,s)=>{if(e.coerce)try{n.value=!!n.value}catch{}const r=n.value;return typeof r=="boolean"||n.issues.push({expected:"boolean",code:"invalid_type",input:r,inst:t}),n}}),i0=I("$ZodUnknown",(t,e)=>{me.init(t,e),t._zod.parse=n=>n}),o0=I("$ZodNever",(t,e)=>{me.init(t,e),t._zod.parse=(n,s)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:t}),n)}),a0=I("$ZodDate",(t,e)=>{me.init(t,e),t._zod.parse=(n,s)=>{if(e.coerce)try{n.value=new Date(n.value)}catch{}const r=n.value,i=r instanceof Date;return i&&!Number.isNaN(r.getTime())||n.issues.push({expected:"date",code:"invalid_type",input:r,...i?{received:"Invalid Date"}:{},inst:t}),n}});function $a(t,e,n){t.issues.length&&e.issues.push(...On(n,t.issues)),e.value[n]=t.value}const l0=I("$ZodArray",(t,e)=>{me.init(t,e),t._zod.parse=(n,s)=>{const r=n.value;if(!Array.isArray(r))return n.issues.push({expected:"array",code:"invalid_type",input:r,inst:t}),n;n.value=Array(r.length);const i=[];for(let o=0;o<r.length;o++){const a=r[o],l=e.element._zod.run({value:a,issues:[]},s);l instanceof Promise?i.push(l.then(c=>$a(c,n,o))):$a(l,n,o)}return i.length?Promise.all(i).then(()=>n):n}});function Kr(t,e,n,s){t.issues.length&&e.issues.push(...On(n,t.issues)),t.value===void 0?n in s&&(e.value[n]=void 0):e.value[n]=t.value}function Uc(t){const e=Object.keys(t.shape);for(const s of e)if(!t.shape?.[s]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${s}": expected a Zod schema`);const n=Sm(t.shape);return{...t,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(n)}}function Zc(t,e,n,s,r,i){const o=[],a=r.keySet,l=r.catchall._zod,c=l.def.type;for(const u of Object.keys(e)){if(a.has(u))continue;if(c==="never"){o.push(u);continue}const f=l.run({value:e[u],issues:[]},s);f instanceof Promise?t.push(f.then(d=>Kr(d,n,u,e))):Kr(f,n,u,e)}return o.length&&n.issues.push({code:"unrecognized_keys",keys:o,input:e,inst:i}),t.length?Promise.all(t).then(()=>n):n}const c0=I("$ZodObject",(t,e)=>{if(me.init(t,e),!Object.getOwnPropertyDescriptor(e,"shape")?.get){const a=e.shape;Object.defineProperty(e,"shape",{get:()=>{const l={...a};return Object.defineProperty(e,"shape",{value:l}),l}})}const s=Lo(()=>Uc(e));ue(t._zod,"propValues",()=>{const a=e.shape,l={};for(const c in a){const u=a[c]._zod;if(u.values){l[c]??(l[c]=new Set);for(const f of u.values)l[c].add(f)}}return l});const r=qr,i=e.catchall;let o;t._zod.parse=(a,l)=>{o??(o=s.value);const c=a.value;if(!r(c))return a.issues.push({expected:"object",code:"invalid_type",input:c,inst:t}),a;a.value={};const u=[],f=o.shape;for(const d of o.keys){const y=f[d]._zod.run({value:c[d],issues:[]},l);y instanceof Promise?u.push(y.then(g=>Kr(g,a,d,c))):Kr(y,a,d,c)}return i?Zc(u,c,a,l,s.value,t):u.length?Promise.all(u).then(()=>a):a}}),u0=I("$ZodObjectJIT",(t,e)=>{c0.init(t,e);const n=t._zod.parse,s=Lo(()=>Uc(e)),r=d=>{const p=new Og(["shape","payload","ctx"]),y=s.value,g=x=>{const E=Ra(x);return`shape[${E}]._zod.run({ value: input[${E}], issues: [] }, ctx)`};p.write("const input = payload.value;");const b=Object.create(null);let m=0;for(const x of y.keys)b[x]=`key_${m++}`;p.write("const newResult = {};");for(const x of y.keys){const E=b[x],_=Ra(x);p.write(`const ${E} = ${g(x)};`),p.write(`
        if (${E}.issues.length) {
          payload.issues = payload.issues.concat(${E}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${_}, ...iss.path] : [${_}]
          })));
        }
        
        
        if (${E}.value === undefined) {
          if (${_} in input) {
            newResult[${_}] = undefined;
          }
        } else {
          newResult[${_}] = ${E}.value;
        }
        
      `)}p.write("payload.value = newResult;"),p.write("return payload;");const S=p.compile();return(x,E)=>S(d,x,E)};let i;const o=qr,a=!Nc.jitless,c=a&&_m.value,u=e.catchall;let f;t._zod.parse=(d,p)=>{f??(f=s.value);const y=d.value;return o(y)?a&&c&&p?.async===!1&&p.jitless!==!0?(i||(i=r(e.shape)),d=i(d,p),u?Zc([],y,d,p,f,t):d):n(d,p):(d.issues.push({expected:"object",code:"invalid_type",input:y,inst:t}),d)}});function Da(t,e,n,s){for(const i of t)if(i.issues.length===0)return e.value=i.value,e;const r=t.filter(i=>!ns(i));return r.length===1?(e.value=r[0].value,r[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:n,errors:t.map(i=>i.issues.map(o=>wn(o,s,bn())))}),e)}const f0=I("$ZodUnion",(t,e)=>{me.init(t,e),ue(t._zod,"optin",()=>e.options.some(r=>r._zod.optin==="optional")?"optional":void 0),ue(t._zod,"optout",()=>e.options.some(r=>r._zod.optout==="optional")?"optional":void 0),ue(t._zod,"values",()=>{if(e.options.every(r=>r._zod.values))return new Set(e.options.flatMap(r=>Array.from(r._zod.values)))}),ue(t._zod,"pattern",()=>{if(e.options.every(r=>r._zod.pattern)){const r=e.options.map(i=>i._zod.pattern);return new RegExp(`^(${r.map(i=>Fo(i.source)).join("|")})$`)}});const n=e.options.length===1,s=e.options[0]._zod.run;t._zod.parse=(r,i)=>{if(n)return s(r,i);let o=!1;const a=[];for(const l of e.options){const c=l._zod.run({value:r.value,issues:[]},i);if(c instanceof Promise)a.push(c),o=!0;else{if(c.issues.length===0)return c;a.push(c)}}return o?Promise.all(a).then(l=>Da(l,r,t,i)):Da(a,r,t,i)}}),h0=I("$ZodIntersection",(t,e)=>{me.init(t,e),t._zod.parse=(n,s)=>{const r=n.value,i=e.left._zod.run({value:r,issues:[]},s),o=e.right._zod.run({value:r,issues:[]},s);return i instanceof Promise||o instanceof Promise?Promise.all([i,o]).then(([l,c])=>La(n,l,c)):La(n,i,o)}});function po(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(ys(t)&&ys(e)){const n=Object.keys(e),s=Object.keys(t).filter(i=>n.indexOf(i)!==-1),r={...t,...e};for(const i of s){const o=po(t[i],e[i]);if(!o.valid)return{valid:!1,mergeErrorPath:[i,...o.mergeErrorPath]};r[i]=o.data}return{valid:!0,data:r}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let s=0;s<t.length;s++){const r=t[s],i=e[s],o=po(r,i);if(!o.valid)return{valid:!1,mergeErrorPath:[s,...o.mergeErrorPath]};n.push(o.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function La(t,e,n){if(e.issues.length&&t.issues.push(...e.issues),n.issues.length&&t.issues.push(...n.issues),ns(t))return t;const s=po(e.value,n.value);if(!s.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(s.mergeErrorPath)}`);return t.value=s.data,t}const d0=I("$ZodTuple",(t,e)=>{me.init(t,e);const n=e.items,s=n.length-[...n].reverse().findIndex(r=>r._zod.optin!=="optional");t._zod.parse=(r,i)=>{const o=r.value;if(!Array.isArray(o))return r.issues.push({input:o,inst:t,expected:"tuple",code:"invalid_type"}),r;r.value=[];const a=[];if(!e.rest){const c=o.length>n.length,u=o.length<s-1;if(c||u)return r.issues.push({...c?{code:"too_big",maximum:n.length}:{code:"too_small",minimum:n.length},input:o,inst:t,origin:"array"}),r}let l=-1;for(const c of n){if(l++,l>=o.length&&l>=s)continue;const u=c._zod.run({value:o[l],issues:[]},i);u instanceof Promise?a.push(u.then(f=>gr(f,r,l))):gr(u,r,l)}if(e.rest){const c=o.slice(n.length);for(const u of c){l++;const f=e.rest._zod.run({value:u,issues:[]},i);f instanceof Promise?a.push(f.then(d=>gr(d,r,l))):gr(f,r,l)}}return a.length?Promise.all(a).then(()=>r):r}});function gr(t,e,n){t.issues.length&&e.issues.push(...On(n,t.issues)),e.value[n]=t.value}const p0=I("$ZodRecord",(t,e)=>{me.init(t,e),t._zod.parse=(n,s)=>{const r=n.value;if(!ys(r))return n.issues.push({expected:"record",code:"invalid_type",input:r,inst:t}),n;const i=[];if(e.keyType._zod.values){const o=e.keyType._zod.values;n.value={};for(const l of o)if(typeof l=="string"||typeof l=="number"||typeof l=="symbol"){const c=e.valueType._zod.run({value:r[l],issues:[]},s);c instanceof Promise?i.push(c.then(u=>{u.issues.length&&n.issues.push(...On(l,u.issues)),n.value[l]=u.value})):(c.issues.length&&n.issues.push(...On(l,c.issues)),n.value[l]=c.value)}let a;for(const l in r)o.has(l)||(a=a??[],a.push(l));a&&a.length>0&&n.issues.push({code:"unrecognized_keys",input:r,inst:t,keys:a})}else{n.value={};for(const o of Reflect.ownKeys(r)){if(o==="__proto__")continue;const a=e.keyType._zod.run({value:o,issues:[]},s);if(a instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(a.issues.length){n.issues.push({code:"invalid_key",origin:"record",issues:a.issues.map(c=>wn(c,s,bn())),input:o,path:[o],inst:t}),n.value[a.value]=a.value;continue}const l=e.valueType._zod.run({value:r[o],issues:[]},s);l instanceof Promise?i.push(l.then(c=>{c.issues.length&&n.issues.push(...On(o,c.issues)),n.value[a.value]=c.value})):(l.issues.length&&n.issues.push(...On(o,l.issues)),n.value[a.value]=l.value)}}return i.length?Promise.all(i).then(()=>n):n}}),m0=I("$ZodEnum",(t,e)=>{me.init(t,e);const n=vm(e.entries),s=new Set(n);t._zod.values=s,t._zod.pattern=new RegExp(`^(${n.filter(r=>Em.has(typeof r)).map(r=>typeof r=="string"?bs(r):r.toString()).join("|")})$`),t._zod.parse=(r,i)=>{const o=r.value;return s.has(o)||r.issues.push({code:"invalid_value",values:n,input:o,inst:t}),r}}),g0=I("$ZodLiteral",(t,e)=>{if(me.init(t,e),e.values.length===0)throw new Error("Cannot create literal schema with no valid values");t._zod.values=new Set(e.values),t._zod.pattern=new RegExp(`^(${e.values.map(n=>typeof n=="string"?bs(n):n?bs(n.toString()):String(n)).join("|")})$`),t._zod.parse=(n,s)=>{const r=n.value;return t._zod.values.has(r)||n.issues.push({code:"invalid_value",values:e.values,input:r,inst:t}),n}}),y0=I("$ZodTransform",(t,e)=>{me.init(t,e),t._zod.parse=(n,s)=>{if(s.direction==="backward")throw new Ac(t.constructor.name);const r=e.transform(n.value,n);if(s.async)return(r instanceof Promise?r:Promise.resolve(r)).then(o=>(n.value=o,n));if(r instanceof Promise)throw new fs;return n.value=r,n}});function za(t,e){return t.issues.length&&e===void 0?{issues:[],value:void 0}:t}const b0=I("$ZodOptional",(t,e)=>{me.init(t,e),t._zod.optin="optional",t._zod.optout="optional",ue(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),ue(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${Fo(n.source)})?$`):void 0}),t._zod.parse=(n,s)=>{if(e.innerType._zod.optin==="optional"){const r=e.innerType._zod.run(n,s);return r instanceof Promise?r.then(i=>za(i,n.value)):za(r,n.value)}return n.value===void 0?n:e.innerType._zod.run(n,s)}}),w0=I("$ZodNullable",(t,e)=>{me.init(t,e),ue(t._zod,"optin",()=>e.innerType._zod.optin),ue(t._zod,"optout",()=>e.innerType._zod.optout),ue(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${Fo(n.source)}|null)$`):void 0}),ue(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(n,s)=>n.value===null?n:e.innerType._zod.run(n,s)}),v0=I("$ZodDefault",(t,e)=>{me.init(t,e),t._zod.optin="optional",ue(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,s)=>{if(s.direction==="backward")return e.innerType._zod.run(n,s);if(n.value===void 0)return n.value=e.defaultValue,n;const r=e.innerType._zod.run(n,s);return r instanceof Promise?r.then(i=>Fa(i,e)):Fa(r,e)}});function Fa(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}const x0=I("$ZodPrefault",(t,e)=>{me.init(t,e),t._zod.optin="optional",ue(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,s)=>(s.direction==="backward"||n.value===void 0&&(n.value=e.defaultValue),e.innerType._zod.run(n,s))}),_0=I("$ZodNonOptional",(t,e)=>{me.init(t,e),ue(t._zod,"values",()=>{const n=e.innerType._zod.values;return n?new Set([...n].filter(s=>s!==void 0)):void 0}),t._zod.parse=(n,s)=>{const r=e.innerType._zod.run(n,s);return r instanceof Promise?r.then(i=>Ba(i,t)):Ba(r,t)}});function Ba(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}const E0=I("$ZodCatch",(t,e)=>{me.init(t,e),ue(t._zod,"optin",()=>e.innerType._zod.optin),ue(t._zod,"optout",()=>e.innerType._zod.optout),ue(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,s)=>{if(s.direction==="backward")return e.innerType._zod.run(n,s);const r=e.innerType._zod.run(n,s);return r instanceof Promise?r.then(i=>(n.value=i.value,i.issues.length&&(n.value=e.catchValue({...n,error:{issues:i.issues.map(o=>wn(o,s,bn()))},input:n.value}),n.issues=[]),n)):(n.value=r.value,r.issues.length&&(n.value=e.catchValue({...n,error:{issues:r.issues.map(i=>wn(i,s,bn()))},input:n.value}),n.issues=[]),n)}}),S0=I("$ZodPipe",(t,e)=>{me.init(t,e),ue(t._zod,"values",()=>e.in._zod.values),ue(t._zod,"optin",()=>e.in._zod.optin),ue(t._zod,"optout",()=>e.out._zod.optout),ue(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(n,s)=>{if(s.direction==="backward"){const i=e.out._zod.run(n,s);return i instanceof Promise?i.then(o=>yr(o,e.in,s)):yr(i,e.in,s)}const r=e.in._zod.run(n,s);return r instanceof Promise?r.then(i=>yr(i,e.out,s)):yr(r,e.out,s)}});function yr(t,e,n){return t.issues.length?(t.aborted=!0,t):e._zod.run({value:t.value,issues:t.issues},n)}const k0=I("$ZodReadonly",(t,e)=>{me.init(t,e),ue(t._zod,"propValues",()=>e.innerType._zod.propValues),ue(t._zod,"values",()=>e.innerType._zod.values),ue(t._zod,"optin",()=>e.innerType._zod.optin),ue(t._zod,"optout",()=>e.innerType._zod.optout),t._zod.parse=(n,s)=>{if(s.direction==="backward")return e.innerType._zod.run(n,s);const r=e.innerType._zod.run(n,s);return r instanceof Promise?r.then(Ua):Ua(r)}});function Ua(t){return t.value=Object.freeze(t.value),t}const T0=I("$ZodLazy",(t,e)=>{me.init(t,e),ue(t._zod,"innerType",()=>e.getter()),ue(t._zod,"pattern",()=>t._zod.innerType._zod.pattern),ue(t._zod,"propValues",()=>t._zod.innerType._zod.propValues),ue(t._zod,"optin",()=>t._zod.innerType._zod.optin??void 0),ue(t._zod,"optout",()=>t._zod.innerType._zod.optout??void 0),t._zod.parse=(n,s)=>t._zod.innerType._zod.run(n,s)}),A0=I("$ZodCustom",(t,e)=>{Xe.init(t,e),me.init(t,e),t._zod.parse=(n,s)=>n,t._zod.check=n=>{const s=n.value,r=e.fn(s);if(r instanceof Promise)return r.then(i=>Za(i,n,s,t));Za(r,n,s,t)}});function Za(t,e,n,s){if(!t){const r={code:"custom",input:n,inst:s,path:[...s._zod.def.path??[]],continue:!s._zod.def.abort};s._zod.def.params&&(r.params=s._zod.def.params),e.issues.push(Zs(r))}}class N0{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...n){const s=n[0];if(this._map.set(e,s),s&&typeof s=="object"&&"id"in s){if(this._idmap.has(s.id))throw new Error(`ID ${s.id} already exists in the registry`);this._idmap.set(s.id,e)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const n=this._map.get(e);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(e),this}get(e){const n=e._zod.parent;if(n){const s={...this.get(n)??{}};delete s.id;const r={...s,...this._map.get(e)};return Object.keys(r).length?r:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function C0(){return new N0}const br=C0();function O0(t,e){return new t({type:"string",...U(e)})}function j0(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...U(e)})}function Va(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...U(e)})}function I0(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...U(e)})}function M0(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...U(e)})}function R0(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...U(e)})}function P0(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...U(e)})}function $0(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...U(e)})}function D0(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...U(e)})}function L0(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...U(e)})}function z0(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...U(e)})}function F0(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...U(e)})}function B0(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...U(e)})}function U0(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...U(e)})}function Z0(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...U(e)})}function V0(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...U(e)})}function W0(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...U(e)})}function Y0(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...U(e)})}function G0(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...U(e)})}function q0(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...U(e)})}function K0(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...U(e)})}function H0(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...U(e)})}function X0(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...U(e)})}function Q0(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...U(e)})}function J0(t,e){return new t({type:"string",format:"date",check:"string_format",...U(e)})}function e1(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...U(e)})}function t1(t,e){return new t({type:"string",format:"duration",check:"string_format",...U(e)})}function n1(t,e){return new t({type:"number",checks:[],...U(e)})}function s1(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"safeint",...U(e)})}function r1(t,e){return new t({type:"boolean",...U(e)})}function i1(t){return new t({type:"unknown"})}function o1(t,e){return new t({type:"never",...U(e)})}function a1(t,e){return new t({type:"date",...U(e)})}function Wa(t,e){return new Lc({check:"less_than",...U(e),value:t,inclusive:!1})}function Ir(t,e){return new Lc({check:"less_than",...U(e),value:t,inclusive:!0})}function Ya(t,e){return new zc({check:"greater_than",...U(e),value:t,inclusive:!1})}function Mr(t,e){return new zc({check:"greater_than",...U(e),value:t,inclusive:!0})}function Ga(t,e){return new bg({check:"multiple_of",...U(e),value:t})}function Vc(t,e){return new vg({check:"max_length",...U(e),maximum:t})}function Hr(t,e){return new xg({check:"min_length",...U(e),minimum:t})}function Wc(t,e){return new _g({check:"length_equals",...U(e),length:t})}function l1(t,e){return new Eg({check:"string_format",format:"regex",...U(e),pattern:t})}function c1(t){return new Sg({check:"string_format",format:"lowercase",...U(t)})}function u1(t){return new kg({check:"string_format",format:"uppercase",...U(t)})}function f1(t,e){return new Tg({check:"string_format",format:"includes",...U(e),includes:t})}function h1(t,e){return new Ag({check:"string_format",format:"starts_with",...U(e),prefix:t})}function d1(t,e){return new Ng({check:"string_format",format:"ends_with",...U(e),suffix:t})}function er(t){return new Cg({check:"overwrite",tx:t})}function p1(t){return er(e=>e.normalize(t))}function m1(){return er(t=>t.trim())}function g1(){return er(t=>t.toLowerCase())}function y1(){return er(t=>t.toUpperCase())}function b1(t,e,n){return new t({type:"array",element:e,...U(n)})}function w1(t,e,n){return new t({type:"custom",check:"custom",fn:e,...U(n)})}function v1(t){const e=x1(n=>(n.addIssue=s=>{if(typeof s=="string")n.issues.push(Zs(s,n.value,e._zod.def));else{const r=s;r.fatal&&(r.continue=!1),r.code??(r.code="custom"),r.input??(r.input=n.value),r.inst??(r.inst=e),r.continue??(r.continue=!e._zod.def.abort),n.issues.push(Zs(r))}},t(n.value,n)));return e}function x1(t,e){const n=new Xe({check:"custom",...U(e)});return n._zod.check=t,n}const _1=I("ZodISODateTime",(t,e)=>{Zg.init(t,e),_e.init(t,e)});function E1(t){return Q0(_1,t)}const S1=I("ZodISODate",(t,e)=>{Vg.init(t,e),_e.init(t,e)});function k1(t){return J0(S1,t)}const T1=I("ZodISOTime",(t,e)=>{Wg.init(t,e),_e.init(t,e)});function A1(t){return e1(T1,t)}const N1=I("ZodISODuration",(t,e)=>{Yg.init(t,e),_e.init(t,e)});function C1(t){return t1(N1,t)}const O1=(t,e)=>{Ic.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:n=>Rm(t,n)},flatten:{value:n=>Mm(t,n)},addIssue:{value:n=>{t.issues.push(n),t.message=JSON.stringify(t.issues,ho,2)}},addIssues:{value:n=>{t.issues.push(...n),t.message=JSON.stringify(t.issues,ho,2)}},isEmpty:{get(){return t.issues.length===0}}})},dt=I("ZodError",O1,{Parent:Error}),j1=Uo(dt),I1=Zo(dt),M1=ui(dt),R1=fi(dt),P1=Dm(dt),$1=Lm(dt),D1=zm(dt),L1=Fm(dt),z1=Bm(dt),F1=Um(dt),B1=Zm(dt),U1=Vm(dt),be=I("ZodType",(t,e)=>(me.init(t,e),t.def=e,t.type=e.type,Object.defineProperty(t,"_def",{value:e}),t.check=(...n)=>t.clone(Bn(e,{checks:[...e.checks??[],...n.map(s=>typeof s=="function"?{_zod:{check:s,def:{check:"custom"},onattach:[]}}:s)]})),t.clone=(n,s)=>Sn(t,n,s),t.brand=()=>t,t.register=((n,s)=>(n.add(t,s),t)),t.parse=(n,s)=>j1(t,n,s,{callee:t.parse}),t.safeParse=(n,s)=>M1(t,n,s),t.parseAsync=async(n,s)=>I1(t,n,s,{callee:t.parseAsync}),t.safeParseAsync=async(n,s)=>R1(t,n,s),t.spa=t.safeParseAsync,t.encode=(n,s)=>P1(t,n,s),t.decode=(n,s)=>$1(t,n,s),t.encodeAsync=async(n,s)=>D1(t,n,s),t.decodeAsync=async(n,s)=>L1(t,n,s),t.safeEncode=(n,s)=>z1(t,n,s),t.safeDecode=(n,s)=>F1(t,n,s),t.safeEncodeAsync=async(n,s)=>B1(t,n,s),t.safeDecodeAsync=async(n,s)=>U1(t,n,s),t.refine=(n,s)=>t.check($y(n,s)),t.superRefine=n=>t.check(Dy(n)),t.overwrite=n=>t.check(er(n)),t.optional=()=>Qa(t),t.nullable=()=>Ja(t),t.nullish=()=>Qa(Ja(t)),t.nonoptional=n=>Ay(t,n),t.array=()=>Dn(t),t.or=n=>Kc([t,n]),t.and=n=>gy(t,n),t.transform=n=>el(t,xy(n)),t.default=n=>Sy(t,n),t.prefault=n=>Ty(t,n),t.catch=n=>Cy(t,n),t.pipe=n=>el(t,n),t.readonly=()=>Iy(t),t.describe=n=>{const s=t.clone();return br.add(s,{description:n}),s},Object.defineProperty(t,"description",{get(){return br.get(t)?.description},configurable:!0}),t.meta=(...n)=>{if(n.length===0)return br.get(t);const s=t.clone();return br.add(s,n[0]),s},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t)),Yc=I("_ZodString",(t,e)=>{Vo.init(t,e),be.init(t,e);const n=t._zod.bag;t.format=n.format??null,t.minLength=n.minimum??null,t.maxLength=n.maximum??null,t.regex=(...s)=>t.check(l1(...s)),t.includes=(...s)=>t.check(f1(...s)),t.startsWith=(...s)=>t.check(h1(...s)),t.endsWith=(...s)=>t.check(d1(...s)),t.min=(...s)=>t.check(Hr(...s)),t.max=(...s)=>t.check(Vc(...s)),t.length=(...s)=>t.check(Wc(...s)),t.nonempty=(...s)=>t.check(Hr(1,...s)),t.lowercase=s=>t.check(c1(s)),t.uppercase=s=>t.check(u1(s)),t.trim=()=>t.check(m1()),t.normalize=(...s)=>t.check(p1(...s)),t.toLowerCase=()=>t.check(g1()),t.toUpperCase=()=>t.check(y1())}),Z1=I("ZodString",(t,e)=>{Vo.init(t,e),Yc.init(t,e),t.email=n=>t.check(j0(V1,n)),t.url=n=>t.check($0(W1,n)),t.jwt=n=>t.check(X0(oy,n)),t.emoji=n=>t.check(D0(Y1,n)),t.guid=n=>t.check(Va(qa,n)),t.uuid=n=>t.check(I0(wr,n)),t.uuidv4=n=>t.check(M0(wr,n)),t.uuidv6=n=>t.check(R0(wr,n)),t.uuidv7=n=>t.check(P0(wr,n)),t.nanoid=n=>t.check(L0(G1,n)),t.guid=n=>t.check(Va(qa,n)),t.cuid=n=>t.check(z0(q1,n)),t.cuid2=n=>t.check(F0(K1,n)),t.ulid=n=>t.check(B0(H1,n)),t.base64=n=>t.check(q0(sy,n)),t.base64url=n=>t.check(K0(ry,n)),t.xid=n=>t.check(U0(X1,n)),t.ksuid=n=>t.check(Z0(Q1,n)),t.ipv4=n=>t.check(V0(J1,n)),t.ipv6=n=>t.check(W0(ey,n)),t.cidrv4=n=>t.check(Y0(ty,n)),t.cidrv6=n=>t.check(G0(ny,n)),t.e164=n=>t.check(H0(iy,n)),t.datetime=n=>t.check(E1(n)),t.date=n=>t.check(k1(n)),t.time=n=>t.check(A1(n)),t.duration=n=>t.check(C1(n))});function re(t){return O0(Z1,t)}const _e=I("ZodStringFormat",(t,e)=>{ve.init(t,e),Yc.init(t,e)}),V1=I("ZodEmail",(t,e)=>{Rg.init(t,e),_e.init(t,e)}),qa=I("ZodGUID",(t,e)=>{Ig.init(t,e),_e.init(t,e)}),wr=I("ZodUUID",(t,e)=>{Mg.init(t,e),_e.init(t,e)}),W1=I("ZodURL",(t,e)=>{Pg.init(t,e),_e.init(t,e)}),Y1=I("ZodEmoji",(t,e)=>{$g.init(t,e),_e.init(t,e)}),G1=I("ZodNanoID",(t,e)=>{Dg.init(t,e),_e.init(t,e)}),q1=I("ZodCUID",(t,e)=>{Lg.init(t,e),_e.init(t,e)}),K1=I("ZodCUID2",(t,e)=>{zg.init(t,e),_e.init(t,e)}),H1=I("ZodULID",(t,e)=>{Fg.init(t,e),_e.init(t,e)}),X1=I("ZodXID",(t,e)=>{Bg.init(t,e),_e.init(t,e)}),Q1=I("ZodKSUID",(t,e)=>{Ug.init(t,e),_e.init(t,e)}),J1=I("ZodIPv4",(t,e)=>{Gg.init(t,e),_e.init(t,e)}),ey=I("ZodIPv6",(t,e)=>{qg.init(t,e),_e.init(t,e)}),ty=I("ZodCIDRv4",(t,e)=>{Kg.init(t,e),_e.init(t,e)}),ny=I("ZodCIDRv6",(t,e)=>{Hg.init(t,e),_e.init(t,e)}),sy=I("ZodBase64",(t,e)=>{Xg.init(t,e),_e.init(t,e)}),ry=I("ZodBase64URL",(t,e)=>{Jg.init(t,e),_e.init(t,e)}),iy=I("ZodE164",(t,e)=>{e0.init(t,e),_e.init(t,e)}),oy=I("ZodJWT",(t,e)=>{n0.init(t,e),_e.init(t,e)}),Gc=I("ZodNumber",(t,e)=>{Bc.init(t,e),be.init(t,e),t.gt=(s,r)=>t.check(Ya(s,r)),t.gte=(s,r)=>t.check(Mr(s,r)),t.min=(s,r)=>t.check(Mr(s,r)),t.lt=(s,r)=>t.check(Wa(s,r)),t.lte=(s,r)=>t.check(Ir(s,r)),t.max=(s,r)=>t.check(Ir(s,r)),t.int=s=>t.check(Ka(s)),t.safe=s=>t.check(Ka(s)),t.positive=s=>t.check(Ya(0,s)),t.nonnegative=s=>t.check(Mr(0,s)),t.negative=s=>t.check(Wa(0,s)),t.nonpositive=s=>t.check(Ir(0,s)),t.multipleOf=(s,r)=>t.check(Ga(s,r)),t.step=(s,r)=>t.check(Ga(s,r)),t.finite=()=>t;const n=t._zod.bag;t.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,t.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,t.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),t.isFinite=!0,t.format=n.format??null});function J(t){return n1(Gc,t)}const ay=I("ZodNumberFormat",(t,e)=>{s0.init(t,e),Gc.init(t,e)});function Ka(t){return s1(ay,t)}const ly=I("ZodBoolean",(t,e)=>{r0.init(t,e),be.init(t,e)});function vn(t){return r1(ly,t)}const cy=I("ZodUnknown",(t,e)=>{i0.init(t,e),be.init(t,e)});function Xr(){return i1(cy)}const uy=I("ZodNever",(t,e)=>{o0.init(t,e),be.init(t,e)});function fy(t){return o1(uy,t)}const hy=I("ZodDate",(t,e)=>{a0.init(t,e),be.init(t,e),t.min=(s,r)=>t.check(Mr(s,r)),t.max=(s,r)=>t.check(Ir(s,r));const n=t._zod.bag;t.minDate=n.minimum?new Date(n.minimum):null,t.maxDate=n.maximum?new Date(n.maximum):null});function Ha(t){return a1(hy,t)}const dy=I("ZodArray",(t,e)=>{l0.init(t,e),be.init(t,e),t.element=e.element,t.min=(n,s)=>t.check(Hr(n,s)),t.nonempty=n=>t.check(Hr(1,n)),t.max=(n,s)=>t.check(Vc(n,s)),t.length=(n,s)=>t.check(Wc(n,s)),t.unwrap=()=>t.element});function Dn(t,e){return b1(dy,t,e)}const qc=I("ZodObject",(t,e)=>{u0.init(t,e),be.init(t,e),ue(t,"shape",()=>e.shape),t.keyof=()=>Hc(Object.keys(t._zod.def.shape)),t.catchall=n=>t.clone({...t._zod.def,catchall:n}),t.passthrough=()=>t.clone({...t._zod.def,catchall:Xr()}),t.loose=()=>t.clone({...t._zod.def,catchall:Xr()}),t.strict=()=>t.clone({...t._zod.def,catchall:fy()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=n=>Nm(t,n),t.safeExtend=n=>Cm(t,n),t.merge=n=>Om(t,n),t.pick=n=>Tm(t,n),t.omit=n=>Am(t,n),t.partial=(...n)=>jm(Xc,t,n[0]),t.required=(...n)=>Im(Qc,t,n[0])});function pn(t,e){const n={type:"object",shape:t??{},...U(e)};return new qc(n)}function xn(t,e){return new qc({type:"object",shape:t,catchall:Xr(),...U(e)})}const py=I("ZodUnion",(t,e)=>{f0.init(t,e),be.init(t,e),t.options=e.options});function Kc(t,e){return new py({type:"union",options:t,...U(e)})}const my=I("ZodIntersection",(t,e)=>{h0.init(t,e),be.init(t,e)});function gy(t,e){return new my({type:"intersection",left:t,right:e})}const yy=I("ZodTuple",(t,e)=>{d0.init(t,e),be.init(t,e),t.rest=n=>t.clone({...t._zod.def,rest:n})});function mo(t,e,n){const s=e instanceof me,r=s?n:e,i=s?e:null;return new yy({type:"tuple",items:t,rest:i,...U(r)})}const by=I("ZodRecord",(t,e)=>{p0.init(t,e),be.init(t,e),t.keyType=e.keyType,t.valueType=e.valueType});function qt(t,e,n){return new by({type:"record",keyType:t,valueType:e,...U(n)})}const go=I("ZodEnum",(t,e)=>{m0.init(t,e),be.init(t,e),t.enum=e.entries,t.options=Object.values(e.entries);const n=new Set(Object.keys(e.entries));t.extract=(s,r)=>{const i={};for(const o of s)if(n.has(o))i[o]=e.entries[o];else throw new Error(`Key ${o} not found in enum`);return new go({...e,checks:[],...U(r),entries:i})},t.exclude=(s,r)=>{const i={...e.entries};for(const o of s)if(n.has(o))delete i[o];else throw new Error(`Key ${o} not found in enum`);return new go({...e,checks:[],...U(r),entries:i})}});function Hc(t,e){const n=Array.isArray(t)?Object.fromEntries(t.map(s=>[s,s])):t;return new go({type:"enum",entries:n,...U(e)})}const wy=I("ZodLiteral",(t,e)=>{g0.init(t,e),be.init(t,e),t.values=new Set(e.values),Object.defineProperty(t,"value",{get(){if(e.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return e.values[0]}})});function Xa(t,e){return new wy({type:"literal",values:Array.isArray(t)?t:[t],...U(e)})}const vy=I("ZodTransform",(t,e)=>{y0.init(t,e),be.init(t,e),t._zod.parse=(n,s)=>{if(s.direction==="backward")throw new Ac(t.constructor.name);n.addIssue=i=>{if(typeof i=="string")n.issues.push(Zs(i,n.value,e));else{const o=i;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=n.value),o.inst??(o.inst=t),n.issues.push(Zs(o))}};const r=e.transform(n.value,n);return r instanceof Promise?r.then(i=>(n.value=i,n)):(n.value=r,n)}});function xy(t){return new vy({type:"transform",transform:t})}const Xc=I("ZodOptional",(t,e)=>{b0.init(t,e),be.init(t,e),t.unwrap=()=>t._zod.def.innerType});function Qa(t){return new Xc({type:"optional",innerType:t})}const _y=I("ZodNullable",(t,e)=>{w0.init(t,e),be.init(t,e),t.unwrap=()=>t._zod.def.innerType});function Ja(t){return new _y({type:"nullable",innerType:t})}const Ey=I("ZodDefault",(t,e)=>{v0.init(t,e),be.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function Sy(t,e){return new Ey({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():Oc(e)}})}const ky=I("ZodPrefault",(t,e)=>{x0.init(t,e),be.init(t,e),t.unwrap=()=>t._zod.def.innerType});function Ty(t,e){return new ky({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():Oc(e)}})}const Qc=I("ZodNonOptional",(t,e)=>{_0.init(t,e),be.init(t,e),t.unwrap=()=>t._zod.def.innerType});function Ay(t,e){return new Qc({type:"nonoptional",innerType:t,...U(e)})}const Ny=I("ZodCatch",(t,e)=>{E0.init(t,e),be.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function Cy(t,e){return new Ny({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}const Oy=I("ZodPipe",(t,e)=>{S0.init(t,e),be.init(t,e),t.in=e.in,t.out=e.out});function el(t,e){return new Oy({type:"pipe",in:t,out:e})}const jy=I("ZodReadonly",(t,e)=>{k0.init(t,e),be.init(t,e),t.unwrap=()=>t._zod.def.innerType});function Iy(t){return new jy({type:"readonly",innerType:t})}const My=I("ZodLazy",(t,e)=>{T0.init(t,e),be.init(t,e),t.unwrap=()=>t._zod.def.getter()});function Ry(t){return new My({type:"lazy",getter:t})}const Py=I("ZodCustom",(t,e)=>{A0.init(t,e),be.init(t,e)});function $y(t,e={}){return w1(Py,t,e)}function Dy(t){return v1(t)}const Ly=pn({plane:Hc(["XY","XZ","YZ"]).default("XZ"),position:mo([J(),J(),J()]).default([.5,0,.5]),cellSize:J().default(1/16),sectionSize:J().default(1),cellColor:re().regex(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,"Invalid hex color").default("#ff0000"),visible:vn().default(!0)}),zy=pn({schemaVersion:J().min(0).default(0),projectName:re(),createdAt:Ha().optional().nullable(),lastModifiedAt:Ha().optional().nullable(),orbitControls:pn({position:mo([J(),J(),J()]),target:mo([J(),J(),J()]),zoom:J().optional()}).optional(),guidelines:Dn(Ly).default([])}),Jc=xn({transform:re().optional(),posX:J(),posY:J(),posZ:J(),rotX:J(),rotY:J(),rotZ:J(),sizeX:J().optional(),sizeY:J().optional(),sizeZ:J().optional(),anchor:re().optional()}),Fy=xn({enabled:vn()}),eu=Kc([xn({"==":Xa("org.bukkit.inventory.ItemStack"),DataVersion:J(),id:re(),count:J(),components:qt(re(),re()).transform(t=>{const e={};for(const[n,s]of Object.entries(t))try{e[n]=qh.parseSNBT(s).toJSON()}catch{e[n]=s}return e}).optional(),schema_version:J()}),xn({"==":Xa("org.bukkit.inventory.ItemStack"),DataVersion:J(),id:re(),count:J(),components:qt(re(),Xr()).optional(),schema_version:J()})]),tu=Ry(()=>pn({type:re(),item:eu.optional(),position:Jc,attachments:qt(re(),tu).optional(),displayItem:Fy.optional(),shulkerColor:re().optional(),schematic:re().optional(),displayMode:re().optional(),firstPersonViewMode:re().optional(),firstPersonViewLockMode:re().optional(),lockRotation:vn().optional(),names:Dn(re()).optional(),text:re().optional(),animations:qt(re(),xn({nodes:Dn(re()),looped:vn().optional(),speed:J().optional()})).optional(),brightness:pn({block:J(),sky:J()}).optional()})),By=xn({type:re(),entityType:re(),attachments:qt(re(),tu),position:Jc.optional(),item:eu.optional(),shulkerColor:re().optional(),editor:pn({selectedIndex:J().optional(),animNodeSelectedOption:J().optional(),scrollOffset:J().optional(),expanded:vn().optional()}).passthrough().optional(),animations:qt(re(),pn({nodes:Dn(re()),looped:vn().optional(),speed:J().optional()}).passthrough()).optional(),physical:pn({cartLength:J().optional(),wheelCenter:J().optional(),wheelDistance:J().optional(),cartCouplerLength:J().optional()}).passthrough().optional()}),Wo=xn({model:By.optional(),entityType:re(),flipped:vn().optional()}),Uy=xn({savedName:re(),name:re().optional(),carts:qt(re(),Wo).optional(),claims:Dn(re()).optional(),spawnPattern:re().optional(),flipped:vn().optional(),spawnLimit:J().optional(),usedModels:Dn(re()).optional()}),nu=qt(re(),Uy);function Zy(t){const e=nu.safeParse(t);return e.success?{valid:!0}:{valid:!1,errors:e.error.issues.map(n=>`${n.path.join(".")}: ${n.message}`)}}var Pi,tl;function Vy(){return tl||(tl=1,Pi=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var s,r,i;if(Array.isArray(e)){if(s=e.length,s!=n.length)return!1;for(r=s;r--!==0;)if(!t(e[r],n[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(i=Object.keys(e),s=i.length,s!==Object.keys(n).length)return!1;for(r=s;r--!==0;)if(!Object.prototype.hasOwnProperty.call(n,i[r]))return!1;for(r=s;r--!==0;){var o=i[r];if(!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n}),Pi}var Wy=Vy();const Yy=Wh(Wy);class Gy{constructor(){this.keyToValue=new Map,this.valueToKey=new Map}set(e,n){this.keyToValue.set(e,n),this.valueToKey.set(n,e)}getByKey(e){return this.keyToValue.get(e)}getByValue(e){return this.valueToKey.get(e)}clear(){this.keyToValue.clear(),this.valueToKey.clear()}}class su{constructor(e){this.generateIdentifier=e,this.kv=new Gy}register(e,n){this.kv.getByValue(e)||(n||(n=this.generateIdentifier(e)),this.kv.set(n,e))}clear(){this.kv.clear()}getIdentifier(e){return this.kv.getByValue(e)}getValue(e){return this.kv.getByKey(e)}}class qy extends su{constructor(){super(e=>e.name),this.classToAllowedProps=new Map}register(e,n){typeof n=="object"?(n.allowProps&&this.classToAllowedProps.set(e,n.allowProps),super.register(e,n.identifier)):super.register(e,n)}getAllowedProps(e){return this.classToAllowedProps.get(e)}}function Ky(t){if("values"in Object)return Object.values(t);const e=[];for(const n in t)t.hasOwnProperty(n)&&e.push(t[n]);return e}function Hy(t,e){const n=Ky(t);if("find"in n)return n.find(e);const s=n;for(let r=0;r<s.length;r++){const i=s[r];if(e(i))return i}}function ws(t,e){Object.entries(t).forEach(([n,s])=>e(s,n))}function Rr(t,e){return t.indexOf(e)!==-1}function nl(t,e){for(let n=0;n<t.length;n++){const s=t[n];if(e(s))return s}}class Xy{constructor(){this.transfomers={}}register(e){this.transfomers[e.name]=e}findApplicable(e){return Hy(this.transfomers,n=>n.isApplicable(e))}findByName(e){return this.transfomers[e]}}const Qy=t=>Object.prototype.toString.call(t).slice(8,-1),ru=t=>typeof t>"u",Jy=t=>t===null,Vs=t=>typeof t!="object"||t===null||t===Object.prototype?!1:Object.getPrototypeOf(t)===null?!0:Object.getPrototypeOf(t)===Object.prototype,yo=t=>Vs(t)&&Object.keys(t).length===0,_n=t=>Array.isArray(t),eb=t=>typeof t=="string",tb=t=>typeof t=="number"&&!isNaN(t),nb=t=>typeof t=="boolean",sb=t=>t instanceof RegExp,Ws=t=>t instanceof Map,Ys=t=>t instanceof Set,iu=t=>Qy(t)==="Symbol",rb=t=>t instanceof Date&&!isNaN(t.valueOf()),ou=t=>t instanceof Error,sl=t=>typeof t=="number"&&isNaN(t),ib=t=>nb(t)||Jy(t)||ru(t)||tb(t)||eb(t)||iu(t),ob=t=>typeof t=="bigint",ab=t=>t===1/0||t===-1/0,lb=t=>ArrayBuffer.isView(t)&&!(t instanceof DataView),cb=t=>t instanceof URL,bo=t=>t.replace(/\\/g,"\\\\").replace(/\./g,"\\."),$i=t=>t.map(String).map(bo).join("."),Ds=(t,e)=>{const n=[];let s="";for(let i=0;i<t.length;i++){let o=t.charAt(i);if(!e&&o==="\\"){const c=t.charAt(i+1);if(c==="\\"){s+="\\",i++;continue}else if(c!==".")throw Error("invalid path")}if(o==="\\"&&t.charAt(i+1)==="."){s+=".",i++;continue}if(o==="."){n.push(s),s="";continue}s+=o}const r=s;return n.push(r),n};function Pt(t,e,n,s){return{isApplicable:t,annotation:e,transform:n,untransform:s}}const au=[Pt(ru,"undefined",()=>null,()=>{}),Pt(ob,"bigint",t=>t.toString(),t=>typeof BigInt<"u"?BigInt(t):(console.error("Please add a BigInt polyfill."),t)),Pt(rb,"Date",t=>t.toISOString(),t=>new Date(t)),Pt(ou,"Error",(t,e)=>{const n={name:t.name,message:t.message};return"cause"in t&&(n.cause=t.cause),e.allowedErrorProps.forEach(s=>{n[s]=t[s]}),n},(t,e)=>{const n=new Error(t.message,{cause:t.cause});return n.name=t.name,n.stack=t.stack,e.allowedErrorProps.forEach(s=>{n[s]=t[s]}),n}),Pt(sb,"regexp",t=>""+t,t=>{const e=t.slice(1,t.lastIndexOf("/")),n=t.slice(t.lastIndexOf("/")+1);return new RegExp(e,n)}),Pt(Ys,"set",t=>[...t.values()],t=>new Set(t)),Pt(Ws,"map",t=>[...t.entries()],t=>new Map(t)),Pt(t=>sl(t)||ab(t),"number",t=>sl(t)?"NaN":t>0?"Infinity":"-Infinity",Number),Pt(t=>t===0&&1/t===-1/0,"number",()=>"-0",Number),Pt(cb,"URL",t=>t.toString(),t=>new URL(t))];function di(t,e,n,s){return{isApplicable:t,annotation:e,transform:n,untransform:s}}const lu=di((t,e)=>iu(t)?!!e.symbolRegistry.getIdentifier(t):!1,(t,e)=>["symbol",e.symbolRegistry.getIdentifier(t)],t=>t.description,(t,e,n)=>{const s=n.symbolRegistry.getValue(e[1]);if(!s)throw new Error("Trying to deserialize unknown symbol");return s}),ub=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,Uint8ClampedArray].reduce((t,e)=>(t[e.name]=e,t),{}),cu=di(lb,t=>["typed-array",t.constructor.name],t=>[...t],(t,e)=>{const n=ub[e[1]];if(!n)throw new Error("Trying to deserialize unknown typed array");return new n(t)});function uu(t,e){return t?.constructor?!!e.classRegistry.getIdentifier(t.constructor):!1}const fu=di(uu,(t,e)=>["class",e.classRegistry.getIdentifier(t.constructor)],(t,e)=>{const n=e.classRegistry.getAllowedProps(t.constructor);if(!n)return{...t};const s={};return n.forEach(r=>{s[r]=t[r]}),s},(t,e,n)=>{const s=n.classRegistry.getValue(e[1]);if(!s)throw new Error(`Trying to deserialize unknown class '${e[1]}' - check https://github.com/blitz-js/superjson/issues/116#issuecomment-773996564`);return Object.assign(Object.create(s.prototype),t)}),hu=di((t,e)=>!!e.customTransformerRegistry.findApplicable(t),(t,e)=>["custom",e.customTransformerRegistry.findApplicable(t).name],(t,e)=>e.customTransformerRegistry.findApplicable(t).serialize(t),(t,e,n)=>{const s=n.customTransformerRegistry.findByName(e[1]);if(!s)throw new Error("Trying to deserialize unknown custom value");return s.deserialize(t)}),fb=[fu,lu,hu,cu],rl=(t,e)=>{const n=nl(fb,r=>r.isApplicable(t,e));if(n)return{value:n.transform(t,e),type:n.annotation(t,e)};const s=nl(au,r=>r.isApplicable(t,e));if(s)return{value:s.transform(t,e),type:s.annotation}},du={};au.forEach(t=>{du[t.annotation]=t});const hb=(t,e,n)=>{if(_n(e))switch(e[0]){case"symbol":return lu.untransform(t,e,n);case"class":return fu.untransform(t,e,n);case"custom":return hu.untransform(t,e,n);case"typed-array":return cu.untransform(t,e,n);default:throw new Error("Unknown transformation: "+e)}else{const s=du[e];if(!s)throw new Error("Unknown transformation: "+e);return s.untransform(t,n)}},ss=(t,e)=>{if(e>t.size)throw new Error("index out of bounds");const n=t.keys();for(;e>0;)n.next(),e--;return n.next().value};function pu(t){if(Rr(t,"__proto__"))throw new Error("__proto__ is not allowed as a property");if(Rr(t,"prototype"))throw new Error("prototype is not allowed as a property");if(Rr(t,"constructor"))throw new Error("constructor is not allowed as a property")}const db=(t,e)=>{pu(e);for(let n=0;n<e.length;n++){const s=e[n];if(Ys(t))t=ss(t,+s);else if(Ws(t)){const r=+s,i=+e[++n]==0?"key":"value",o=ss(t,r);switch(i){case"key":t=o;break;case"value":t=t.get(o);break}}else t=t[s]}return t},wo=(t,e,n)=>{if(pu(e),e.length===0)return n(t);let s=t;for(let i=0;i<e.length-1;i++){const o=e[i];if(_n(s)){const a=+o;s=s[a]}else if(Vs(s))s=s[o];else if(Ys(s)){const a=+o;s=ss(s,a)}else if(Ws(s)){if(i===e.length-2)break;const l=+o,c=+e[++i]==0?"key":"value",u=ss(s,l);switch(c){case"key":s=u;break;case"value":s=s.get(u);break}}}const r=e[e.length-1];if(_n(s)?s[+r]=n(s[+r]):Vs(s)&&(s[r]=n(s[r])),Ys(s)){const i=ss(s,+r),o=n(i);i!==o&&(s.delete(i),s.add(o))}if(Ws(s)){const i=+e[e.length-2],o=ss(s,i);switch(+r==0?"key":"value"){case"key":{const l=n(o);s.set(l,s.get(o)),l!==o&&s.delete(o);break}case"value":{s.set(o,n(s.get(o)));break}}}return t},mu=t=>t<1;function vo(t,e,n,s=[]){if(!t)return;const r=mu(n);if(!_n(t)){ws(t,(a,l)=>vo(a,e,n,[...s,...Ds(l,r)]));return}const[i,o]=t;o&&ws(o,(a,l)=>{vo(a,e,n,[...s,...Ds(l,r)])}),e(i,s)}function pb(t,e,n,s){return vo(e,(r,i)=>{t=wo(t,i,o=>hb(o,r,s))},n),t}function mb(t,e,n){const s=mu(n);function r(i,o){const a=db(t,Ds(o,s));i.map(l=>Ds(l,s)).forEach(l=>{t=wo(t,l,()=>a)})}if(_n(e)){const[i,o]=e;i.forEach(a=>{t=wo(t,Ds(a,s),()=>t)}),o&&ws(o,r)}else ws(e,r);return t}const gb=(t,e)=>Vs(t)||_n(t)||Ws(t)||Ys(t)||ou(t)||uu(t,e);function yb(t,e,n){const s=n.get(t);s?s.push(e):n.set(t,[e])}function bb(t,e){const n={};let s;return t.forEach(r=>{if(r.length<=1)return;e||(r=r.map(a=>a.map(String)).sort((a,l)=>a.length-l.length));const[i,...o]=r;i.length===0?s=o.map($i):n[$i(i)]=o.map($i)}),s?yo(n)?[s]:[s,n]:yo(n)?void 0:n}const gu=(t,e,n,s,r=[],i=[],o=new Map)=>{const a=ib(t);if(!a){yb(t,r,e);const p=o.get(t);if(p)return s?{transformedValue:null}:p}if(!gb(t,n)){const p=rl(t,n),y=p?{transformedValue:p.value,annotations:[p.type]}:{transformedValue:t};return a||o.set(t,y),y}if(Rr(i,t))return{transformedValue:null};const l=rl(t,n),c=l?.value??t,u=_n(c)?[]:{},f={};ws(c,(p,y)=>{if(y==="__proto__"||y==="constructor"||y==="prototype")throw new Error(`Detected property ${y}. This is a prototype pollution risk, please remove it from your object.`);const g=gu(p,e,n,s,[...r,y],[...i,t],o);u[y]=g.transformedValue,_n(g.annotations)?f[bo(y)]=g.annotations:Vs(g.annotations)&&ws(g.annotations,(b,m)=>{f[bo(y)+"."+m]=b})});const d=yo(f)?{transformedValue:u,annotations:l?[l.type]:void 0}:{transformedValue:u,annotations:l?[l.type,f]:f};return a||o.set(t,d),d};function yu(t){return Object.prototype.toString.call(t).slice(8,-1)}function il(t){return yu(t)==="Array"}function wb(t){if(yu(t)!=="Object")return!1;const e=Object.getPrototypeOf(t);return!!e&&e.constructor===Object&&e===Object.prototype}function vb(t,e,n,s,r){const i={}.propertyIsEnumerable.call(s,e)?"enumerable":"nonenumerable";i==="enumerable"&&(t[e]=n),r&&i==="nonenumerable"&&Object.defineProperty(t,e,{value:n,enumerable:!1,writable:!0,configurable:!0})}function xo(t,e={}){if(il(t))return t.map(r=>xo(r,e));if(!wb(t))return t;const n=Object.getOwnPropertyNames(t),s=Object.getOwnPropertySymbols(t);return[...n,...s].reduce((r,i)=>{if(i==="__proto__"||il(e.props)&&!e.props.includes(i))return r;const o=t[i],a=xo(o,e);return vb(r,i,a,t,e.nonenumerable),r},{})}class ee{constructor({dedupe:e=!1}={}){this.classRegistry=new qy,this.symbolRegistry=new su(n=>n.description??""),this.customTransformerRegistry=new Xy,this.allowedErrorProps=[],this.dedupe=e}serialize(e){const n=new Map,s=gu(e,n,this,this.dedupe),r={json:s.transformedValue};s.annotations&&(r.meta={...r.meta,values:s.annotations});const i=bb(n,this.dedupe);return i&&(r.meta={...r.meta,referentialEqualities:i}),r.meta&&(r.meta.v=1),r}deserialize(e,n){const{json:s,meta:r}=e;let i=n?.inPlace?s:xo(s);return r?.values&&(i=pb(i,r.values,r.v??0,this)),r?.referentialEqualities&&(i=mb(i,r.referentialEqualities,r.v??0)),i}stringify(e){return JSON.stringify(this.serialize(e))}parse(e){return this.deserialize(JSON.parse(e),{inPlace:!0})}registerClass(e,n){this.classRegistry.register(e,n)}registerSymbol(e,n){this.symbolRegistry.register(e,n)}registerCustom(e,n){this.customTransformerRegistry.register({name:n,...e})}allowErrorProps(...e){this.allowedErrorProps.push(...e)}}ee.defaultInstance=new ee;ee.serialize=ee.defaultInstance.serialize.bind(ee.defaultInstance);ee.deserialize=ee.defaultInstance.deserialize.bind(ee.defaultInstance);ee.stringify=ee.defaultInstance.stringify.bind(ee.defaultInstance);ee.parse=ee.defaultInstance.parse.bind(ee.defaultInstance);ee.registerClass=ee.defaultInstance.registerClass.bind(ee.defaultInstance);ee.registerSymbol=ee.defaultInstance.registerSymbol.bind(ee.defaultInstance);ee.registerCustom=ee.defaultInstance.registerCustom.bind(ee.defaultInstance);ee.allowErrorProps=ee.defaultInstance.allowErrorProps.bind(ee.defaultInstance);ee.serialize;ee.deserialize;ee.stringify;ee.parse;ee.registerClass;ee.registerCustom;ee.registerSymbol;ee.allowErrorProps;const hs=".tcaproj",Kn=Bs(""),xb=0;function ol(t){if(!t)return[];const e=new Set;function n(r){if(r&&typeof r=="object"&&"minecraft:custom_model_data"in r){const i=r["minecraft:custom_model_data"];if(i?.floats)for(const o of i.floats)e.add(o)}}function s(r){for(const i of Object.keys(r)){const o=r[i];n(o.item?.components),o.attachments&&s(o.attachments)}}return t.model&&(n(t.model.item?.components),t.model.attachments&&s(t.model.attachments)),Array.from(e).sort((r,i)=>r-i)}const pt=Co((t,e,n)=>{const s=r=>{const i=typeof r=="function"?r(e()):r,o=e(),a={...i};let l=!1;if("metadata"in a&&a.metadata){const c={...o.metadata},u={...a.metadata};delete c.orbitControls,delete u.orbitControls,Yy(c,u)||(l=!0)}return"saved"in a&&a.saved===!0?a.saved=!0:l&&(a.saved=!1),t(a)};return{saved:!1,metadata:{schemaVersion:xb,projectName:"",createdAt:null,lastModifiedAt:null,orbitControls:void 0,guidelines:[]},cart:null,modelIds:[],modelFiles:new Map,selectedObjectPath:void 0,setSelectedObjectPath:r=>s({selectedObjectPath:r}),setMetadata:r=>s({metadata:r}),setProjectName:r=>s(i=>({metadata:{...i.metadata,projectName:r}})),setCart:r=>s({cart:r,modelIds:ol(r)}),clearCart:()=>s({cart:null}),addGuideline:r=>s(i=>({metadata:{...i.metadata,guidelines:[...i.metadata.guidelines,r]}})),removeGuideline:r=>s(i=>({metadata:{...i.metadata,guidelines:i.metadata.guidelines.filter((o,a)=>a!==r)}})),updateGuideline:(r,i)=>s(o=>({metadata:{...o.metadata,guidelines:o.metadata.guidelines.map((a,l)=>l===r?{...a,...i}:a)}})),resetGuidelines:()=>s(r=>({metadata:{...r.metadata,guidelines:[]}})),saveProject:async r=>{const i=e();if(!i.cart)throw new Error("No cart data to save.");const o=`${i.metadata.projectName||"TCA-Project"}${hs}`,a={...i.metadata,createdAt:i.metadata.createdAt||new Date},l={"metadata.json":Bs(ee.stringify(a)),"cart.json":Bs(ee.stringify(i.cart))};for(const y of i.modelIds){const g=i.modelFiles.get(y);if(!g)continue;const b=new Uint8Array(g.slice(0,4));let m=".gltf";if(b[0]===103&&b[1]===108&&b[2]===84&&b[3]===70&&(m=".glb"),m===".gltf"){const S=await Tc(g);l[`models/${y}.glb`]=S}else l[`models/${y}.glb`]=new Uint8Array(g)}const c=Pp(l,{level:9,mem:8}),u=new Uint8Array(Kn.length+c.length);u.set(Kn),u.set(c,Kn.length);const f=new Uint8Array(u.length);f.set(u);const d=new Blob([f],{type:"application/binary"}),p=i.fileHandle;if(!p||r){const y=await Pe.promise(tp(d,{fileName:o,extensions:[hs],mimeTypes:["application/binary"],id:"tca-project"}),{loading:"Saving project...",success:"Project saved successfully!",error:"Failed to save the project."}).unwrap();y&&s({saved:!0,fileHandle:y,metadata:{...a}})}else await Pe.promise(p.createWritable().then(async y=>{await y.write(f),await y.close()}),{loading:"Saving project...",success:"Project saved successfully!",error:"Failed to save the project."}).unwrap(),s({saved:!0,fileHandle:p,metadata:{...a,lastModifiedAt:new Date}})},loadProjectFromFileDialog:async()=>{const r=await Mo({description:"Select a TCA-Project file",extensions:[hs],mimeTypes:["application/binary"],id:"tca-project",startIn:"documents"}).catch(()=>null);if(!r)throw new Error("No file selected.");await e().loadProjectFromFileHandle(r)},loadProjectFromFileHandle:async r=>{if(!r)throw new Error("No file handle.");await e().reset();const i=await r.arrayBuffer();if(!new Uint8Array(i.slice(0,Kn.length)).every((c,u)=>c===Kn[u]))throw new Error("Invalid TCA-Project file format.");const a=new Uint8Array(i.slice(Kn.length)),l=$p(a);for(const[c,u]of Object.entries(l))if(c==="metadata.json"){const f=zy.safeParse(ee.parse(io(u)));f.success?s({metadata:f.data}):(Pe.error("Invalid metadata in project file."),e().reset())}else if(c==="cart.json"){const f=Wo.safeParse(ee.parse(io(u)));f.success?s({cart:f.data,modelIds:ol(f.data)}):(Pe.error("Invalid cart data in project file."),e().reset())}else if(c.startsWith("models/")&&c.endsWith(".glb")){const f=parseInt(c.replace("models/","").replace(".glb",""));isNaN(f)||s(d=>{const p=new Map(d.modelFiles);return p.set(f,Ql(u.buffer)),{modelFiles:p}})}s({saved:!0,fileHandle:r.handle})},reset:()=>s(n.getInitialState()),setModelFile:(r,i)=>s(o=>{const a=new Map(o.modelFiles);return i?a.set(r,i):a.delete(r),{modelFiles:a,saved:!1}}),removeModelFile:r=>s(i=>{const o=new Map(i.modelFiles);return o.delete(r),{modelFiles:o,saved:!1}}),logState:()=>console.log("ProjectStore state:",e())}});function _b(){const t=L.c(56),e=pt(),[n,s]=P.useState(document.fullscreenElement),[r,i]=P.useState(!1),[o,a]=P.useState(!1),l=Sb;let c,u;t[0]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{const ne=()=>{s(document.fullscreenElement)};return document.addEventListener("fullscreenchange",ne),()=>{document.removeEventListener("fullscreenchange",ne)}},u=[],t[0]=c,t[1]=u):(c=t[0],u=t[1]),P.useEffect(c,u);let f;t[2]!==e?(f=async()=>{i(!0),await e.saveProject(),e.reset(),i(!1)},t[2]=e,t[3]=f):f=t[3];const d=f;let p,y;t[4]!==e?(p=()=>{const ne=W=>{W.key==="s"&&(W.ctrlKey||W.metaKey)&&e.cart?(W.preventDefault(),e.saveProject().catch(Eb)):W.key===","&&(W.ctrlKey||W.metaKey)&&(W.preventDefault(),a(!0))};return window.addEventListener("keydown",ne),()=>{window.removeEventListener("keydown",ne)}},y=[e],t[4]=e,t[5]=p,t[6]=y):(p=t[5],y=t[6]),P.useEffect(p,y);const g=e.metadata.projectName||"Untitled Project";let b;t[7]!==e.saved?(b=e.saved?h.jsx(Pl,{}):h.jsx("span",{style:{display:"inline-block",width:10,height:10,borderRadius:"50%",background:"currentColor",marginRight:4,aspectRatio:"1 / 1"}}),t[7]=e.saved,t[8]=b):b=t[8];let m;t[9]!==d||t[10]!==r||t[11]!==b?(m=h.jsx(ze,{className:"h-4 w-4",variant:"ghost",size:"icon",disabled:r,onClick:d,children:b}),t[9]=d,t[10]=r,t[11]=b,t[12]=m):m=t[12];let S;t[13]!==g||t[14]!==m?(S=h.jsxs("div",{className:"bg-card flex items-center gap-2 px-2",children:[g,m]}),t[13]=g,t[14]=m,t[15]=S):S=t[15];let x;t[16]===Symbol.for("react.memo_cache_sentinel")?(x=h.jsx(Ld,{children:"File"}),t[16]=x):x=t[16];let E;t[17]!==e?(E=async()=>e.saveProject(),t[17]=e,t[18]=E):E=t[18];let _;t[19]===Symbol.for("react.memo_cache_sentinel")?(_=h.jsx(ba,{children:"CTRL + S"}),t[19]=_):_=t[19];let T;t[20]!==r||t[21]!==E?(T=h.jsxs(qn,{disabled:r,onClick:E,children:["Save Project ",_]}),t[20]=r,t[21]=E,t[22]=T):T=t[22];let w;t[23]!==e?(w=async()=>e.saveProject(!0),t[23]=e,t[24]=w):w=t[24];let v;t[25]!==r||t[26]!==w?(v=h.jsx(qn,{disabled:r,onClick:w,children:"Save Project As"}),t[25]=r,t[26]=w,t[27]=v):v=t[27];let k;t[28]===Symbol.for("react.memo_cache_sentinel")?(k=h.jsx(Ci,{}),t[28]=k):k=t[28];let A;t[29]!==e?(A=async()=>e.loadProjectFromFileDialog(),t[29]=e,t[30]=A):A=t[30];let N;t[31]!==r||t[32]!==A?(N=h.jsx(qn,{disabled:r,onClick:A,children:"Load Project"}),t[31]=r,t[32]=A,t[33]=N):N=t[33];let C;t[34]!==d||t[35]!==r?(C=h.jsx(qn,{disabled:r,onClick:d,children:"New Project"}),t[34]=d,t[35]=r,t[36]=C):C=t[36];let O;t[37]===Symbol.for("react.memo_cache_sentinel")?(O=h.jsx(Ci,{}),t[37]=O):O=t[37];let D;t[38]===Symbol.for("react.memo_cache_sentinel")?(D=()=>a(!0),t[38]=D):D=t[38];let M,R,$;t[39]===Symbol.for("react.memo_cache_sentinel")?(M=h.jsxs(qn,{onClick:D,children:["Preferences",h.jsx(ba,{children:"CTRL + ,"})]}),R=h.jsx(Ci,{}),$=h.jsx(qn,{children:"Print"}),t[39]=M,t[40]=R,t[41]=$):(M=t[39],R=t[40],$=t[41]);let B;t[42]!==T||t[43]!==v||t[44]!==N||t[45]!==C?(B=h.jsxs(ya,{children:[x,h.jsxs(zd,{children:[T,v,k,N,C,O,M,R,$]})]}),t[42]=T,t[43]=v,t[44]=N,t[45]=C,t[46]=B):B=t[46];let z;t[47]!==n?(z=h.jsx(ya,{children:h.jsx(ze,{className:"ml-auto",variant:"ghost",size:"icon",onClick:l,children:n?h.jsx(Of,{}):h.jsx(Cf,{})})}),t[47]=n,t[48]=z):z=t[48];let G;t[49]!==o?(G=h.jsx(Ab,{open:o,setOpen:a}),t[49]=o,t[50]=G):G=t[50];let H;return t[51]!==B||t[52]!==z||t[53]!==G||t[54]!==S?(H=h.jsxs($d,{className:"rounded-none",children:[S,B,z,G]}),t[51]=B,t[52]=z,t[53]=G,t[54]=S,t[55]=H):H=t[55],H}function Eb(t){console.error("Save failed:",t)}function Sb(){document.fullscreenElement?document.exitFullscreen().catch(kb):document.documentElement.requestFullscreen().catch(Tb)}function kb(t){console.error("Error exiting fullscreen mode:",t)}function Tb(t){console.error("Error entering fullscreen mode:",t)}function Ab(t){const e=L.c(61),{open:n,setOpen:s}=t,r=Xs();let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=h.jsx(Rd,{children:"Preferences"}),e[0]=i):i=e[0];let o;e[1]===Symbol.for("react.memo_cache_sentinel")?(o=h.jsx(lt,{htmlFor:"theme-select",children:"Theme:"}),e[1]=o):o=e[1];let a;e[2]!==r?(a=z=>{if(z!=="light"&&z!=="dark"){console.warn("Invalid theme selected:",z);return}r.setTheme(z)},e[2]=r,e[3]=a):a=e[3];let l;e[4]===Symbol.for("react.memo_cache_sentinel")?(l=h.jsx(Ur,{className:"h-10 w-full",id:"theme-select",children:h.jsx(Br,{placeholder:"Select theme"})}),e[4]=l):l=e[4];let c;e[5]===Symbol.for("react.memo_cache_sentinel")?(c=h.jsx(Zr,{children:h.jsxs(Qi,{children:[h.jsx(Ji,{children:"Available Themes"}),h.jsx(Mn,{value:"light",children:"Light"}),h.jsx(Mn,{value:"dark",children:"Dark"})]})}),e[5]=c):c=e[5];let u;e[6]!==r.theme||e[7]!==a?(u=h.jsxs("div",{className:"flex flex-col",children:[o,h.jsxs(Fr,{value:r.theme,onValueChange:a,children:[l,c]})]}),e[6]=r.theme,e[7]=a,e[8]=u):u=e[8];let f;e[9]===Symbol.for("react.memo_cache_sentinel")?(f=h.jsx(lt,{htmlFor:"save-interval",children:"Auto-save Interval (seconds):"}),e[9]=f):f=e[9];let d;e[10]!==r?(d=z=>{const G=parseInt(z.target.value,10);if(isNaN(G)||G<1){console.warn("Invalid save interval:",z.target.value);return}r.setSaveInterval(G)},e[10]=r,e[11]=d):d=e[11];let p;e[12]!==r.saveInterval||e[13]!==d?(p=h.jsxs("div",{className:"flex flex-col",children:[f,h.jsx(cs,{id:"save-interval",type:"number",min:1,value:r.saveInterval,onChange:d,className:"h-10 w-full"})]}),e[12]=r.saveInterval,e[13]=d,e[14]=p):p=e[14];let y;e[15]===Symbol.for("react.memo_cache_sentinel")?(y=h.jsx(lt,{htmlFor:"grid-color",className:"mb-2 block",children:"Grid Color:"}),e[15]=y):y=e[15];let g;e[16]!==r?(g=z=>{r.setGridColor(z)},e[16]=r,e[17]=g):g=e[17];let b;e[18]!==r.gridColor||e[19]!==g?(b=h.jsxs("div",{className:"flex flex-col",children:[y,h.jsx(sc,{defaultColor:r.gridColor,onChangeComplete:g})]}),e[18]=r.gridColor,e[19]=g,e[20]=b):b=e[20];let m;e[21]===Symbol.for("react.memo_cache_sentinel")?(m=h.jsx(cn,{asChild:!0,children:h.jsx(lr,{className:"mr-[0.5] inline h-3"})}),e[21]=m):m=e[21];let S;e[22]===Symbol.for("react.memo_cache_sentinel")?(S=h.jsxs(lt,{htmlFor:"debug-text",className:"mb-2 block",children:[h.jsxs(ln,{children:[m,h.jsx(un,{children:h.jsx("p",{children:"Debug text displays additional information about the 3D scene, such as object coordinates and rendering details. It can be useful for troubleshooting but may clutter the view."})})]}),"Debug Text:"]}),e[22]=S):S=e[22];let x;e[23]!==r?(x=z=>r.setDebugText(z),e[23]=r,e[24]=x):x=e[24];let E;e[25]!==r.debugText||e[26]!==x?(E=h.jsxs("div",{className:"flex flex-row gap-2",children:[S,h.jsx(ur,{id:"debug-text",checked:r.debugText,onCheckedChange:x})]}),e[25]=r.debugText,e[26]=x,e[27]=E):E=e[27];let _;e[28]===Symbol.for("react.memo_cache_sentinel")?(_=h.jsx(cn,{asChild:!0,children:h.jsx(lr,{className:"mr-[0.5] inline h-3"})}),e[28]=_):_=e[28];let T;e[29]===Symbol.for("react.memo_cache_sentinel")?(T=h.jsxs(lt,{htmlFor:"ssao-enabled",className:"mb-2 block",children:[h.jsxs(ln,{children:[_,h.jsx(un,{children:h.jsx("p",{children:"Screen Space Ambient Occlusion (SSAO) is a shading method that adds soft shadows to enhance depth perception in 3D scenes. It can improve visual realism but may impact performance."})})]}),"SSAO Enabled:"]}),e[29]=T):T=e[29];let w;e[30]!==r?(w=z=>r.setSSAOEnabled(z),e[30]=r,e[31]=w):w=e[31];let v;e[32]!==r.SSAOEnabled||e[33]!==w?(v=h.jsxs("div",{className:"flex flex-row gap-2",children:[T,h.jsx(ur,{id:"ssao-enabled",checked:r.SSAOEnabled,onCheckedChange:w})]}),e[32]=r.SSAOEnabled,e[33]=w,e[34]=v):v=e[34];let k;e[35]===Symbol.for("react.memo_cache_sentinel")?(k=h.jsx(cn,{asChild:!0,children:h.jsx(lr,{className:"mr-[0.5] inline h-3"})}),e[35]=k):k=e[35];let A;e[36]===Symbol.for("react.memo_cache_sentinel")?(A=h.jsxs(lt,{htmlFor:"dof-enabled",className:"mb-2 block",children:[h.jsxs(ln,{children:[k,h.jsx(un,{children:h.jsx("p",{children:"Depth of Field (DOF) creates a blurred effect on objects outside the focus area, simulating camera lens behavior. It enhances realism but can be resource-intensive and may affect performance."})})]}),"Depth of Field Enabled:"]}),e[36]=A):A=e[36];let N;e[37]!==r?(N=z=>r.setDOFEnabled(z),e[37]=r,e[38]=N):N=e[38];let C;e[39]!==r.DOFEnabled||e[40]!==N?(C=h.jsxs("div",{className:"flex flex-row gap-2",children:[A,h.jsx(ur,{id:"dof-enabled",checked:r.DOFEnabled,onCheckedChange:N})]}),e[39]=r.DOFEnabled,e[40]=N,e[41]=C):C=e[41];let O;e[42]===Symbol.for("react.memo_cache_sentinel")?(O=h.jsx(cn,{asChild:!0,children:h.jsx(lr,{className:"mr-[0.5] inline h-3"})}),e[42]=O):O=e[42];let D;e[43]===Symbol.for("react.memo_cache_sentinel")?(D=h.jsxs(lt,{htmlFor:"control-damping-enabled",className:"mb-2 block",children:[h.jsxs(ln,{children:[O,h.jsx(un,{children:h.jsx("p",{children:"Enabling control damping makes camera movements smoother by adding inertia. This results in a more natural feel when orbiting or panning the view, but may introduce a slight delay in responsiveness."})})]}),"Orbit Controls Damping:"]}),e[43]=D):D=e[43];let M;e[44]!==r?(M=z=>r.setControlDamping(z),e[44]=r,e[45]=M):M=e[45];let R;e[46]!==r.controlDamping||e[47]!==M?(R=h.jsxs("div",{className:"flex flex-row gap-2",children:[D,h.jsx(ur,{id:"control-damping",checked:r.controlDamping,onCheckedChange:M})]}),e[46]=r.controlDamping,e[47]=M,e[48]=R):R=e[48];let $;e[49]!==b||e[50]!==E||e[51]!==v||e[52]!==C||e[53]!==R||e[54]!==u||e[55]!==p?($=h.jsx(Id,{children:h.jsxs(Md,{children:[i,h.jsx(Pd,{asChild:!0,children:h.jsxs("div",{children:["Here you can adjust your preferences for the application.",h.jsxs("div",{className:"mt-4 flex flex-col gap-4",children:[u,p,b,E,v,C,R]})]})})]})}),e[49]=b,e[50]=E,e[51]=v,e[52]=C,e[53]=R,e[54]=u,e[55]=p,e[56]=$):$=e[56];let B;return e[57]!==n||e[58]!==s||e[59]!==$?(B=h.jsx(Cd,{open:n,onOpenChange:s,children:$}),e[57]=n,e[58]=s,e[59]=$,e[60]=B):B=e[60],B}function Nb(t){const e=L.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=Z("flex flex-col gap-2",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx(Mh,{"data-slot":"tabs",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function Cb(t){const e=L.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=Z("bg-muted text-muted-foreground inline-flex flex-wrap w-fit items-center justify-center rounded-lg p-[3px]",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx(Rh,{"data-slot":"tabs-list",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function vr(t){const e=L.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=Z("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-9  items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 flex-1",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx(Ph,{"data-slot":"tabs-trigger",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function xr(t){const e=L.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=Z("flex-1 outline-none",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx($h,{"data-slot":"tabs-content",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function bu(t){const e=L.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=Z("w-full caption-bottom text-sm",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:h.jsx("table",{"data-slot":"table",className:r,...s})}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function wu(t){const e=L.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=Z("[&_tr]:border-b",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx("thead",{"data-slot":"table-header",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function vu(t){const e=L.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=Z("[&_tr:last-child]:border-0",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx("tbody",{"data-slot":"table-body",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function Qr(t){const e=L.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=Z("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx("tr",{"data-slot":"table-row",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function rn(t){const e=L.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=Z("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx("th",{"data-slot":"table-head",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function on(t){const e=L.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=Z("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx("td",{"data-slot":"table-cell",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}class Ob{add(e,n,s){if(typeof arguments[0]!="string")for(let r in arguments[0])this.add(r,arguments[0][r],arguments[1]);else(Array.isArray(e)?e:[e]).forEach(function(r){this[r]=this[r]||[],n&&this[r][s?"unshift":"push"](n)},this)}run(e,n){this[e]=this[e]||[],this[e].forEach(function(s){s.call(n&&n.context?n.context:n,n)})}}class jb{constructor(e){this.jsep=e,this.registered={}}register(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];n.forEach(r=>{if(typeof r!="object"||!r.name||!r.init)throw new Error("Invalid JSEP plugin format");this.registered[r.name]||(r.init(this.jsep),this.registered[r.name]=r)})}}class j{static get version(){return"1.4.0"}static toString(){return"JavaScript Expression Parser (JSEP) v"+j.version}static addUnaryOp(e){return j.max_unop_len=Math.max(e.length,j.max_unop_len),j.unary_ops[e]=1,j}static addBinaryOp(e,n,s){return j.max_binop_len=Math.max(e.length,j.max_binop_len),j.binary_ops[e]=n,s?j.right_associative.add(e):j.right_associative.delete(e),j}static addIdentifierChar(e){return j.additional_identifier_chars.add(e),j}static addLiteral(e,n){return j.literals[e]=n,j}static removeUnaryOp(e){return delete j.unary_ops[e],e.length===j.max_unop_len&&(j.max_unop_len=j.getMaxKeyLen(j.unary_ops)),j}static removeAllUnaryOps(){return j.unary_ops={},j.max_unop_len=0,j}static removeIdentifierChar(e){return j.additional_identifier_chars.delete(e),j}static removeBinaryOp(e){return delete j.binary_ops[e],e.length===j.max_binop_len&&(j.max_binop_len=j.getMaxKeyLen(j.binary_ops)),j.right_associative.delete(e),j}static removeAllBinaryOps(){return j.binary_ops={},j.max_binop_len=0,j}static removeLiteral(e){return delete j.literals[e],j}static removeAllLiterals(){return j.literals={},j}get char(){return this.expr.charAt(this.index)}get code(){return this.expr.charCodeAt(this.index)}constructor(e){this.expr=e,this.index=0}static parse(e){return new j(e).parse()}static getMaxKeyLen(e){return Math.max(0,...Object.keys(e).map(n=>n.length))}static isDecimalDigit(e){return e>=48&&e<=57}static binaryPrecedence(e){return j.binary_ops[e]||0}static isIdentifierStart(e){return e>=65&&e<=90||e>=97&&e<=122||e>=128&&!j.binary_ops[String.fromCharCode(e)]||j.additional_identifier_chars.has(String.fromCharCode(e))}static isIdentifierPart(e){return j.isIdentifierStart(e)||j.isDecimalDigit(e)}throwError(e){const n=new Error(e+" at character "+this.index);throw n.index=this.index,n.description=e,n}runHook(e,n){if(j.hooks[e]){const s={context:this,node:n};return j.hooks.run(e,s),s.node}return n}searchHook(e){if(j.hooks[e]){const n={context:this};return j.hooks[e].find(function(s){return s.call(n.context,n),n.node}),n.node}}gobbleSpaces(){let e=this.code;for(;e===j.SPACE_CODE||e===j.TAB_CODE||e===j.LF_CODE||e===j.CR_CODE;)e=this.expr.charCodeAt(++this.index);this.runHook("gobble-spaces")}parse(){this.runHook("before-all");const e=this.gobbleExpressions(),n=e.length===1?e[0]:{type:j.COMPOUND,body:e};return this.runHook("after-all",n)}gobbleExpressions(e){let n=[],s,r;for(;this.index<this.expr.length;)if(s=this.code,s===j.SEMCOL_CODE||s===j.COMMA_CODE)this.index++;else if(r=this.gobbleExpression())n.push(r);else if(this.index<this.expr.length){if(s===e)break;this.throwError('Unexpected "'+this.char+'"')}return n}gobbleExpression(){const e=this.searchHook("gobble-expression")||this.gobbleBinaryExpression();return this.gobbleSpaces(),this.runHook("after-expression",e)}gobbleBinaryOp(){this.gobbleSpaces();let e=this.expr.substr(this.index,j.max_binop_len),n=e.length;for(;n>0;){if(j.binary_ops.hasOwnProperty(e)&&(!j.isIdentifierStart(this.code)||this.index+e.length<this.expr.length&&!j.isIdentifierPart(this.expr.charCodeAt(this.index+e.length))))return this.index+=n,e;e=e.substr(0,--n)}return!1}gobbleBinaryExpression(){let e,n,s,r,i,o,a,l,c;if(o=this.gobbleToken(),!o||(n=this.gobbleBinaryOp(),!n))return o;for(i={value:n,prec:j.binaryPrecedence(n),right_a:j.right_associative.has(n)},a=this.gobbleToken(),a||this.throwError("Expected expression after "+n),r=[o,i,a];n=this.gobbleBinaryOp();){if(s=j.binaryPrecedence(n),s===0){this.index-=n.length;break}i={value:n,prec:s,right_a:j.right_associative.has(n)},c=n;const u=f=>i.right_a&&f.right_a?s>f.prec:s<=f.prec;for(;r.length>2&&u(r[r.length-2]);)a=r.pop(),n=r.pop().value,o=r.pop(),e={type:j.BINARY_EXP,operator:n,left:o,right:a},r.push(e);e=this.gobbleToken(),e||this.throwError("Expected expression after "+c),r.push(i,e)}for(l=r.length-1,e=r[l];l>1;)e={type:j.BINARY_EXP,operator:r[l-1].value,left:r[l-2],right:e},l-=2;return e}gobbleToken(){let e,n,s,r;if(this.gobbleSpaces(),r=this.searchHook("gobble-token"),r)return this.runHook("after-token",r);if(e=this.code,j.isDecimalDigit(e)||e===j.PERIOD_CODE)return this.gobbleNumericLiteral();if(e===j.SQUOTE_CODE||e===j.DQUOTE_CODE)r=this.gobbleStringLiteral();else if(e===j.OBRACK_CODE)r=this.gobbleArray();else{for(n=this.expr.substr(this.index,j.max_unop_len),s=n.length;s>0;){if(j.unary_ops.hasOwnProperty(n)&&(!j.isIdentifierStart(this.code)||this.index+n.length<this.expr.length&&!j.isIdentifierPart(this.expr.charCodeAt(this.index+n.length)))){this.index+=s;const i=this.gobbleToken();return i||this.throwError("missing unaryOp argument"),this.runHook("after-token",{type:j.UNARY_EXP,operator:n,argument:i,prefix:!0})}n=n.substr(0,--s)}j.isIdentifierStart(e)?(r=this.gobbleIdentifier(),j.literals.hasOwnProperty(r.name)?r={type:j.LITERAL,value:j.literals[r.name],raw:r.name}:r.name===j.this_str&&(r={type:j.THIS_EXP})):e===j.OPAREN_CODE&&(r=this.gobbleGroup())}return r?(r=this.gobbleTokenProperty(r),this.runHook("after-token",r)):this.runHook("after-token",!1)}gobbleTokenProperty(e){this.gobbleSpaces();let n=this.code;for(;n===j.PERIOD_CODE||n===j.OBRACK_CODE||n===j.OPAREN_CODE||n===j.QUMARK_CODE;){let s;if(n===j.QUMARK_CODE){if(this.expr.charCodeAt(this.index+1)!==j.PERIOD_CODE)break;s=!0,this.index+=2,this.gobbleSpaces(),n=this.code}this.index++,n===j.OBRACK_CODE?(e={type:j.MEMBER_EXP,computed:!0,object:e,property:this.gobbleExpression()},e.property||this.throwError('Unexpected "'+this.char+'"'),this.gobbleSpaces(),n=this.code,n!==j.CBRACK_CODE&&this.throwError("Unclosed ["),this.index++):n===j.OPAREN_CODE?e={type:j.CALL_EXP,arguments:this.gobbleArguments(j.CPAREN_CODE),callee:e}:(n===j.PERIOD_CODE||s)&&(s&&this.index--,this.gobbleSpaces(),e={type:j.MEMBER_EXP,computed:!1,object:e,property:this.gobbleIdentifier()}),s&&(e.optional=!0),this.gobbleSpaces(),n=this.code}return e}gobbleNumericLiteral(){let e="",n,s;for(;j.isDecimalDigit(this.code);)e+=this.expr.charAt(this.index++);if(this.code===j.PERIOD_CODE)for(e+=this.expr.charAt(this.index++);j.isDecimalDigit(this.code);)e+=this.expr.charAt(this.index++);if(n=this.char,n==="e"||n==="E"){for(e+=this.expr.charAt(this.index++),n=this.char,(n==="+"||n==="-")&&(e+=this.expr.charAt(this.index++));j.isDecimalDigit(this.code);)e+=this.expr.charAt(this.index++);j.isDecimalDigit(this.expr.charCodeAt(this.index-1))||this.throwError("Expected exponent ("+e+this.char+")")}return s=this.code,j.isIdentifierStart(s)?this.throwError("Variable names cannot start with a number ("+e+this.char+")"):(s===j.PERIOD_CODE||e.length===1&&e.charCodeAt(0)===j.PERIOD_CODE)&&this.throwError("Unexpected period"),{type:j.LITERAL,value:parseFloat(e),raw:e}}gobbleStringLiteral(){let e="";const n=this.index,s=this.expr.charAt(this.index++);let r=!1;for(;this.index<this.expr.length;){let i=this.expr.charAt(this.index++);if(i===s){r=!0;break}else if(i==="\\")switch(i=this.expr.charAt(this.index++),i){case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:e+=i}else e+=i}return r||this.throwError('Unclosed quote after "'+e+'"'),{type:j.LITERAL,value:e,raw:this.expr.substring(n,this.index)}}gobbleIdentifier(){let e=this.code,n=this.index;for(j.isIdentifierStart(e)?this.index++:this.throwError("Unexpected "+this.char);this.index<this.expr.length&&(e=this.code,j.isIdentifierPart(e));)this.index++;return{type:j.IDENTIFIER,name:this.expr.slice(n,this.index)}}gobbleArguments(e){const n=[];let s=!1,r=0;for(;this.index<this.expr.length;){this.gobbleSpaces();let i=this.code;if(i===e){s=!0,this.index++,e===j.CPAREN_CODE&&r&&r>=n.length&&this.throwError("Unexpected token "+String.fromCharCode(e));break}else if(i===j.COMMA_CODE){if(this.index++,r++,r!==n.length){if(e===j.CPAREN_CODE)this.throwError("Unexpected token ,");else if(e===j.CBRACK_CODE)for(let o=n.length;o<r;o++)n.push(null)}}else if(n.length!==r&&r!==0)this.throwError("Expected comma");else{const o=this.gobbleExpression();(!o||o.type===j.COMPOUND)&&this.throwError("Expected comma"),n.push(o)}}return s||this.throwError("Expected "+String.fromCharCode(e)),n}gobbleGroup(){this.index++;let e=this.gobbleExpressions(j.CPAREN_CODE);if(this.code===j.CPAREN_CODE)return this.index++,e.length===1?e[0]:e.length?{type:j.SEQUENCE_EXP,expressions:e}:!1;this.throwError("Unclosed (")}gobbleArray(){return this.index++,{type:j.ARRAY_EXP,elements:this.gobbleArguments(j.CBRACK_CODE)}}}const Ib=new Ob;Object.assign(j,{hooks:Ib,plugins:new jb(j),COMPOUND:"Compound",SEQUENCE_EXP:"SequenceExpression",IDENTIFIER:"Identifier",MEMBER_EXP:"MemberExpression",LITERAL:"Literal",THIS_EXP:"ThisExpression",CALL_EXP:"CallExpression",UNARY_EXP:"UnaryExpression",BINARY_EXP:"BinaryExpression",ARRAY_EXP:"ArrayExpression",TAB_CODE:9,LF_CODE:10,CR_CODE:13,SPACE_CODE:32,PERIOD_CODE:46,COMMA_CODE:44,SQUOTE_CODE:39,DQUOTE_CODE:34,OPAREN_CODE:40,CPAREN_CODE:41,OBRACK_CODE:91,CBRACK_CODE:93,QUMARK_CODE:63,SEMCOL_CODE:59,COLON_CODE:58,unary_ops:{"-":1,"!":1,"~":1,"+":1},binary_ops:{"||":1,"??":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10,"**":11},right_associative:new Set(["**"]),additional_identifier_chars:new Set(["$","_"]),literals:{true:!0,false:!1,null:null},this_str:"this"});j.max_unop_len=j.getMaxKeyLen(j.unary_ops);j.max_binop_len=j.getMaxKeyLen(j.binary_ops);const Kt=t=>new j(t).parse(),Mb=Object.getOwnPropertyNames(class{});Object.getOwnPropertyNames(j).filter(t=>!Mb.includes(t)&&Kt[t]===void 0).forEach(t=>{Kt[t]=j[t]});Kt.Jsep=j;const Rb="ConditionalExpression";var Pb={name:"ternary",init(t){t.hooks.add("after-expression",function(n){if(n.node&&this.code===t.QUMARK_CODE){this.index++;const s=n.node,r=this.gobbleExpression();if(r||this.throwError("Expected expression"),this.gobbleSpaces(),this.code===t.COLON_CODE){this.index++;const i=this.gobbleExpression();if(i||this.throwError("Expected expression"),n.node={type:Rb,test:s,consequent:r,alternate:i},s.operator&&t.binary_ops[s.operator]<=.9){let o=s;for(;o.right.operator&&t.binary_ops[o.right.operator]<=.9;)o=o.right;n.node.test=o.right,o.right=n.node,n.node=s}}else this.throwError("Expected :")}})}};Kt.plugins.register(Pb);const al=47,$b=92;var Db={name:"regex",init(t){t.hooks.add("gobble-token",function(n){if(this.code===al){const s=++this.index;let r=!1;for(;this.index<this.expr.length;){if(this.code===al&&!r){const i=this.expr.slice(s,this.index);let o="";for(;++this.index<this.expr.length;){const l=this.code;if(l>=97&&l<=122||l>=65&&l<=90||l>=48&&l<=57)o+=this.char;else break}let a;try{a=new RegExp(i,o)}catch(l){this.throwError(l.message)}return n.node={type:t.LITERAL,value:a,raw:this.expr.slice(s-1,this.index)},n.node=this.gobbleTokenProperty(n.node),n.node}this.code===t.OBRACK_CODE?r=!0:r&&this.code===t.CBRACK_CODE&&(r=!1),this.index+=this.code===$b?2:1}this.throwError("Unclosed Regex")}})}};const Di=43,Lb=45,Jn={name:"assignment",assignmentOperators:new Set(["=","*=","**=","/=","%=","+=","-=","<<=",">>=",">>>=","&=","^=","|=","||=","&&=","??="]),updateOperators:[Di,Lb],assignmentPrecedence:.9,init(t){const e=[t.IDENTIFIER,t.MEMBER_EXP];Jn.assignmentOperators.forEach(s=>t.addBinaryOp(s,Jn.assignmentPrecedence,!0)),t.hooks.add("gobble-token",function(r){const i=this.code;Jn.updateOperators.some(o=>o===i&&o===this.expr.charCodeAt(this.index+1))&&(this.index+=2,r.node={type:"UpdateExpression",operator:i===Di?"++":"--",argument:this.gobbleTokenProperty(this.gobbleIdentifier()),prefix:!0},(!r.node.argument||!e.includes(r.node.argument.type))&&this.throwError(`Unexpected ${r.node.operator}`))}),t.hooks.add("after-token",function(r){if(r.node){const i=this.code;Jn.updateOperators.some(o=>o===i&&o===this.expr.charCodeAt(this.index+1))&&(e.includes(r.node.type)||this.throwError(`Unexpected ${r.node.operator}`),this.index+=2,r.node={type:"UpdateExpression",operator:i===Di?"++":"--",argument:r.node,prefix:!1})}}),t.hooks.add("after-expression",function(r){r.node&&n(r.node)});function n(s){Jn.assignmentOperators.has(s.operator)?(s.type="AssignmentExpression",n(s.left),n(s.right)):s.operator||Object.values(s).forEach(r=>{r&&typeof r=="object"&&n(r)})}}};Kt.plugins.register(Db,Jn);Kt.addUnaryOp("typeof");Kt.addLiteral("null",null);Kt.addLiteral("undefined",void 0);const zb=new Set(["constructor","__proto__","__defineGetter__","__defineSetter__"]),de={evalAst(t,e){switch(t.type){case"BinaryExpression":case"LogicalExpression":return de.evalBinaryExpression(t,e);case"Compound":return de.evalCompound(t,e);case"ConditionalExpression":return de.evalConditionalExpression(t,e);case"Identifier":return de.evalIdentifier(t,e);case"Literal":return de.evalLiteral(t,e);case"MemberExpression":return de.evalMemberExpression(t,e);case"UnaryExpression":return de.evalUnaryExpression(t,e);case"ArrayExpression":return de.evalArrayExpression(t,e);case"CallExpression":return de.evalCallExpression(t,e);case"AssignmentExpression":return de.evalAssignmentExpression(t,e);default:throw SyntaxError("Unexpected expression",t)}},evalBinaryExpression(t,e){return{"||":(s,r)=>s||r(),"&&":(s,r)=>s&&r(),"|":(s,r)=>s|r(),"^":(s,r)=>s^r(),"&":(s,r)=>s&r(),"==":(s,r)=>s==r(),"!=":(s,r)=>s!=r(),"===":(s,r)=>s===r(),"!==":(s,r)=>s!==r(),"<":(s,r)=>s<r(),">":(s,r)=>s>r(),"<=":(s,r)=>s<=r(),">=":(s,r)=>s>=r(),"<<":(s,r)=>s<<r(),">>":(s,r)=>s>>r(),">>>":(s,r)=>s>>>r(),"+":(s,r)=>s+r(),"-":(s,r)=>s-r(),"*":(s,r)=>s*r(),"/":(s,r)=>s/r(),"%":(s,r)=>s%r()}[t.operator](de.evalAst(t.left,e),()=>de.evalAst(t.right,e))},evalCompound(t,e){let n;for(let s=0;s<t.body.length;s++){t.body[s].type==="Identifier"&&["var","let","const"].includes(t.body[s].name)&&t.body[s+1]&&t.body[s+1].type==="AssignmentExpression"&&(s+=1);const r=t.body[s];n=de.evalAst(r,e)}return n},evalConditionalExpression(t,e){return de.evalAst(t.test,e)?de.evalAst(t.consequent,e):de.evalAst(t.alternate,e)},evalIdentifier(t,e){if(Object.hasOwn(e,t.name))return e[t.name];throw ReferenceError(`${t.name} is not defined`)},evalLiteral(t){return t.value},evalMemberExpression(t,e){const n=String(t.computed?de.evalAst(t.property):t.property.name),s=de.evalAst(t.object,e);if(s==null)throw TypeError(`Cannot read properties of ${s} (reading '${n}')`);if(!Object.hasOwn(s,n)&&zb.has(n))throw TypeError(`Cannot read properties of ${s} (reading '${n}')`);const r=s[n];return typeof r=="function"?r.bind(s):r},evalUnaryExpression(t,e){return{"-":s=>-de.evalAst(s,e),"!":s=>!de.evalAst(s,e),"~":s=>~de.evalAst(s,e),"+":s=>+de.evalAst(s,e),typeof:s=>typeof de.evalAst(s,e)}[t.operator](t.argument)},evalArrayExpression(t,e){return t.elements.map(n=>de.evalAst(n,e))},evalCallExpression(t,e){const n=t.arguments.map(r=>de.evalAst(r,e));return de.evalAst(t.callee,e)(...n)},evalAssignmentExpression(t,e){if(t.left.type!=="Identifier")throw SyntaxError("Invalid left-hand side in assignment");const n=t.left.name,s=de.evalAst(t.right,e);return e[n]=s,e[n]}};class Fb{constructor(e){this.code=e,this.ast=Kt(this.code)}runInNewContext(e){const n=Object.assign(Object.create(null),e);return de.evalAst(this.ast,n)}}function nn(t,e){return t=t.slice(),t.push(e),t}function _o(t,e){return e=e.slice(),e.unshift(t),e}class Bb extends Error{constructor(e){super('JSONPath should not be called with "new" (it prevents return of (unwrapped) scalar values)'),this.avoidNew=!0,this.value=e,this.name="NewError"}}function oe(t,e,n,s,r){if(!(this instanceof oe))try{return new oe(t,e,n,s,r)}catch(o){if(!o.avoidNew)throw o;return o.value}typeof t=="string"&&(r=s,s=n,n=e,e=t,t=null);const i=t&&typeof t=="object";if(t=t||{},this.json=t.json||n,this.path=t.path||e,this.resultType=t.resultType||"value",this.flatten=t.flatten||!1,this.wrap=Object.hasOwn(t,"wrap")?t.wrap:!0,this.sandbox=t.sandbox||{},this.eval=t.eval===void 0?"safe":t.eval,this.ignoreEvalErrors=typeof t.ignoreEvalErrors>"u"?!1:t.ignoreEvalErrors,this.parent=t.parent||null,this.parentProperty=t.parentProperty||null,this.callback=t.callback||s||null,this.otherTypeCallback=t.otherTypeCallback||r||function(){throw new TypeError("You must supply an otherTypeCallback callback option with the @other() operator.")},t.autostart!==!1){const o={path:i?t.path:e};i?"json"in t&&(o.json=t.json):o.json=n;const a=this.evaluate(o);if(!a||typeof a!="object")throw new Bb(a);return a}}oe.prototype.evaluate=function(t,e,n,s){let r=this.parent,i=this.parentProperty,{flatten:o,wrap:a}=this;if(this.currResultType=this.resultType,this.currEval=this.eval,this.currSandbox=this.sandbox,n=n||this.callback,this.currOtherTypeCallback=s||this.otherTypeCallback,e=e||this.json,t=t||this.path,t&&typeof t=="object"&&!Array.isArray(t)){if(!t.path&&t.path!=="")throw new TypeError('You must supply a "path" property when providing an object argument to JSONPath.evaluate().');if(!Object.hasOwn(t,"json"))throw new TypeError('You must supply a "json" property when providing an object argument to JSONPath.evaluate().');({json:e}=t),o=Object.hasOwn(t,"flatten")?t.flatten:o,this.currResultType=Object.hasOwn(t,"resultType")?t.resultType:this.currResultType,this.currSandbox=Object.hasOwn(t,"sandbox")?t.sandbox:this.currSandbox,a=Object.hasOwn(t,"wrap")?t.wrap:a,this.currEval=Object.hasOwn(t,"eval")?t.eval:this.currEval,n=Object.hasOwn(t,"callback")?t.callback:n,this.currOtherTypeCallback=Object.hasOwn(t,"otherTypeCallback")?t.otherTypeCallback:this.currOtherTypeCallback,r=Object.hasOwn(t,"parent")?t.parent:r,i=Object.hasOwn(t,"parentProperty")?t.parentProperty:i,t=t.path}if(r=r||null,i=i||null,Array.isArray(t)&&(t=oe.toPathString(t)),!t&&t!==""||!e)return;const l=oe.toPathArray(t);l[0]==="$"&&l.length>1&&l.shift(),this._hasParentSelector=null;const c=this._trace(l,e,["$"],r,i,n).filter(function(u){return u&&!u.isParentSelector});return c.length?!a&&c.length===1&&!c[0].hasArrExpr?this._getPreferredOutput(c[0]):c.reduce((u,f)=>{const d=this._getPreferredOutput(f);return o&&Array.isArray(d)?u=u.concat(d):u.push(d),u},[]):a?[]:void 0};oe.prototype._getPreferredOutput=function(t){const e=this.currResultType;switch(e){case"all":{const n=Array.isArray(t.path)?t.path:oe.toPathArray(t.path);return t.pointer=oe.toPointer(n),t.path=typeof t.path=="string"?t.path:oe.toPathString(t.path),t}case"value":case"parent":case"parentProperty":return t[e];case"path":return oe.toPathString(t[e]);case"pointer":return oe.toPointer(t.path);default:throw new TypeError("Unknown result type")}};oe.prototype._handleCallback=function(t,e,n){if(e){const s=this._getPreferredOutput(t);t.path=typeof t.path=="string"?t.path:oe.toPathString(t.path),e(s,n,t)}};oe.prototype._trace=function(t,e,n,s,r,i,o,a){let l;if(!t.length)return l={path:n,value:e,parent:s,parentProperty:r,hasArrExpr:o},this._handleCallback(l,i,"value"),l;const c=t[0],u=t.slice(1),f=[];function d(p){Array.isArray(p)?p.forEach(y=>{f.push(y)}):f.push(p)}if((typeof c!="string"||a)&&e&&Object.hasOwn(e,c))d(this._trace(u,e[c],nn(n,c),e,c,i,o));else if(c==="*")this._walk(e,p=>{d(this._trace(u,e[p],nn(n,p),e,p,i,!0,!0))});else if(c==="..")d(this._trace(u,e,n,s,r,i,o)),this._walk(e,p=>{typeof e[p]=="object"&&d(this._trace(t.slice(),e[p],nn(n,p),e,p,i,!0))});else{if(c==="^")return this._hasParentSelector=!0,{path:n.slice(0,-1),expr:u,isParentSelector:!0};if(c==="~")return l={path:nn(n,c),value:r,parent:s,parentProperty:null},this._handleCallback(l,i,"property"),l;if(c==="$")d(this._trace(u,e,n,null,null,i,o));else if(/^(-?\d*):(-?\d*):?(\d*)$/u.test(c))d(this._slice(c,u,e,n,s,r,i));else if(c.indexOf("?(")===0){if(this.currEval===!1)throw new Error("Eval [?(expr)] prevented in JSONPath expression.");const p=c.replace(/^\?\((.*?)\)$/u,"$1"),y=/@.?([^?]*)[['](\??\(.*?\))(?!.\)\])[\]']/gu.exec(p);y?this._walk(e,g=>{const b=[y[2]],m=y[1]?e[g][y[1]]:e[g];this._trace(b,m,n,s,r,i,!0).length>0&&d(this._trace(u,e[g],nn(n,g),e,g,i,!0))}):this._walk(e,g=>{this._eval(p,e[g],g,n,s,r)&&d(this._trace(u,e[g],nn(n,g),e,g,i,!0))})}else if(c[0]==="("){if(this.currEval===!1)throw new Error("Eval [(expr)] prevented in JSONPath expression.");d(this._trace(_o(this._eval(c,e,n.at(-1),n.slice(0,-1),s,r),u),e,n,s,r,i,o))}else if(c[0]==="@"){let p=!1;const y=c.slice(1,-2);switch(y){case"scalar":(!e||!["object","function"].includes(typeof e))&&(p=!0);break;case"boolean":case"string":case"undefined":case"function":typeof e===y&&(p=!0);break;case"integer":Number.isFinite(e)&&!(e%1)&&(p=!0);break;case"number":Number.isFinite(e)&&(p=!0);break;case"nonFinite":typeof e=="number"&&!Number.isFinite(e)&&(p=!0);break;case"object":e&&typeof e===y&&(p=!0);break;case"array":Array.isArray(e)&&(p=!0);break;case"other":p=this.currOtherTypeCallback(e,n,s,r);break;case"null":e===null&&(p=!0);break;default:throw new TypeError("Unknown value type "+y)}if(p)return l={path:n,value:e,parent:s,parentProperty:r},this._handleCallback(l,i,"value"),l}else if(c[0]==="`"&&e&&Object.hasOwn(e,c.slice(1))){const p=c.slice(1);d(this._trace(u,e[p],nn(n,p),e,p,i,o,!0))}else if(c.includes(",")){const p=c.split(",");for(const y of p)d(this._trace(_o(y,u),e,n,s,r,i,!0))}else!a&&e&&Object.hasOwn(e,c)&&d(this._trace(u,e[c],nn(n,c),e,c,i,o,!0))}if(this._hasParentSelector)for(let p=0;p<f.length;p++){const y=f[p];if(y&&y.isParentSelector){const g=this._trace(y.expr,e,y.path,s,r,i,o);if(Array.isArray(g)){f[p]=g[0];const b=g.length;for(let m=1;m<b;m++)p++,f.splice(p,0,g[m])}else f[p]=g}}return f};oe.prototype._walk=function(t,e){if(Array.isArray(t)){const n=t.length;for(let s=0;s<n;s++)e(s)}else t&&typeof t=="object"&&Object.keys(t).forEach(n=>{e(n)})};oe.prototype._slice=function(t,e,n,s,r,i,o){if(!Array.isArray(n))return;const a=n.length,l=t.split(":"),c=l[2]&&Number.parseInt(l[2])||1;let u=l[0]&&Number.parseInt(l[0])||0,f=l[1]&&Number.parseInt(l[1])||a;u=u<0?Math.max(0,u+a):Math.min(a,u),f=f<0?Math.max(0,f+a):Math.min(a,f);const d=[];for(let p=u;p<f;p+=c)this._trace(_o(p,e),n,s,r,i,o,!0).forEach(g=>{d.push(g)});return d};oe.prototype._eval=function(t,e,n,s,r,i){this.currSandbox._$_parentProperty=i,this.currSandbox._$_parent=r,this.currSandbox._$_property=n,this.currSandbox._$_root=this.json,this.currSandbox._$_v=e;const o=t.includes("@path");o&&(this.currSandbox._$_path=oe.toPathString(s.concat([n])));const a=this.currEval+"Script:"+t;if(!oe.cache[a]){let l=t.replaceAll("@parentProperty","_$_parentProperty").replaceAll("@parent","_$_parent").replaceAll("@property","_$_property").replaceAll("@root","_$_root").replaceAll(/@([.\s)[])/gu,"_$_v$1");if(o&&(l=l.replaceAll("@path","_$_path")),this.currEval==="safe"||this.currEval===!0||this.currEval===void 0)oe.cache[a]=new this.safeVm.Script(l);else if(this.currEval==="native")oe.cache[a]=new this.vm.Script(l);else if(typeof this.currEval=="function"&&this.currEval.prototype&&Object.hasOwn(this.currEval.prototype,"runInNewContext")){const c=this.currEval;oe.cache[a]=new c(l)}else if(typeof this.currEval=="function")oe.cache[a]={runInNewContext:c=>this.currEval(l,c)};else throw new TypeError(`Unknown "eval" property "${this.currEval}"`)}try{return oe.cache[a].runInNewContext(this.currSandbox)}catch(l){if(this.ignoreEvalErrors)return!1;throw new Error("jsonPath: "+l.message+": "+t)}};oe.cache={};oe.toPathString=function(t){const e=t,n=e.length;let s="$";for(let r=1;r<n;r++)/^(~|\^|@.*?\(\))$/u.test(e[r])||(s+=/^[0-9*]+$/u.test(e[r])?"["+e[r]+"]":"['"+e[r]+"']");return s};oe.toPointer=function(t){const e=t,n=e.length;let s="";for(let r=1;r<n;r++)/^(~|\^|@.*?\(\))$/u.test(e[r])||(s+="/"+e[r].toString().replaceAll("~","~0").replaceAll("/","~1"));return s};oe.toPathArray=function(t){const{cache:e}=oe;if(e[t])return e[t].concat();const n=[],r=t.replaceAll(/@(?:null|boolean|number|string|integer|undefined|nonFinite|scalar|array|object|function|other)\(\)/gu,";$&;").replaceAll(/[['](\??\(.*?\))[\]'](?!.\])/gu,function(i,o){return"[#"+(n.push(o)-1)+"]"}).replaceAll(/\[['"]([^'\]]*)['"]\]/gu,function(i,o){return"['"+o.replaceAll(".","%@%").replaceAll("~","%%@@%%")+"']"}).replaceAll("~",";~;").replaceAll(/['"]?\.['"]?(?![^[]*\])|\[['"]?/gu,";").replaceAll("%@%",".").replaceAll("%%@@%%","~").replaceAll(/(?:;)?(\^+)(?:;)?/gu,function(i,o){return";"+o.split("").join(";")+";"}).replaceAll(/;;;|;;/gu,";..;").replaceAll(/;$|'?\]|'$/gu,"").split(";").map(function(i){const o=i.match(/#(\d+)/u);return!o||!o[1]?i:n[o[1]]});return e[t]=r,e[t].concat()};oe.prototype.safeVm={Script:Fb};const Ub=function(t,e,n){const s=t.length;for(let r=0;r<s;r++){const i=t[r];n(i)&&e.push(t.splice(r--,1)[0])}};class Zb{constructor(e){this.code=e}runInNewContext(e){let n=this.code;const s=Object.keys(e),r=[];Ub(s,r,c=>typeof e[c]=="function");const i=s.map(c=>e[c]);n=r.reduce((c,u)=>{let f=e[u].toString();return/function/u.test(f)||(f="function "+f),"var "+u+"="+f+";"+c},"")+n,!/(['"])use strict\1/u.test(n)&&!s.includes("arguments")&&(n="var arguments = undefined;"+n),n=n.replace(/;\s*$/u,"");const a=n.lastIndexOf(";"),l=a!==-1?n.slice(0,a+1)+" return "+n.slice(a+1):" return "+n;return new Function(...s,l)(...i)}}oe.prototype.vm={Script:Zb};const Vb="/tc-animator/assets/blockbench-settings-G7FDEJl4.png";function Wb(){const t=L.c(32),{modelIds:e,selectedObjectPath:n,cart:s,modelFiles:r,setModelFile:i}=pt();let o;e:{if(!n||!s){let A;t[0]===Symbol.for("react.memo_cache_sentinel")?(A=[],t[0]=A):A=t[0],o=A;break e}let v;if(t[1]!==s||t[2]!==n){const A=oe({path:n,json:s,resultType:"value"});if(A.length===0){let O;t[5]===Symbol.for("react.memo_cache_sentinel")?(O=[],t[5]=O):O=t[5],o=O;break e}const N=A[0];if(!N||typeof N!="object"){let O;t[6]===Symbol.for("react.memo_cache_sentinel")?(O=[],t[6]=O):O=t[6],o=O;break e}v=new Set;const C=function(D){if(!D)return;const M=D["minecraft:custom_model_data"];if(M&&typeof M=="object"&&"floats"in M){const R=M.floats;Array.isArray(R)&&R.forEach($=>v.add($))}};if("item"in N){const O=N.item;C(O?.components)}t[1]=s,t[2]=n,t[3]=v,t[4]=o}else v=t[3],o=t[4];let k;t[7]!==v?(k=Array.from(v),t[7]=v,t[8]=k):k=t[8],o=k}const a=o;let l;t[9]!==i?(l=async v=>{try{const k=await Mo({mimeTypes:["model/gltf+json","model/gltf-binary"],extensions:[".gltf",".glb"],multiple:!1,description:"3D Model (GLTF/GLB)",id:"tca-models"}),A=await k.arrayBuffer();let N=A;if(k.name.toLowerCase().endsWith(".gltf"))try{const C=await Tc(A);N=Ql(C.buffer)}catch(C){console.error("Failed to convert GLTF to GLB:",C),alert("Failed to convert GLTF to GLB. See console for details."),i(v,N)}i(v,N)}catch(k){const A=k;A.name!=="AbortError"&&(console.error("Error loading model file:",A),alert("Error loading model file. See console for details."))}},t[9]=i,t[10]=l):l=t[10];const c=l;let u,f;t[11]===Symbol.for("react.memo_cache_sentinel")?(u=h.jsx("br",{}),f=h.jsx("br",{}),t[11]=u,t[12]=f):(u=t[11],f=t[12]);let d;t[13]===Symbol.for("react.memo_cache_sentinel")?(d=h.jsx("b",{children:"GLTF"}),t[13]=d):d=t[13];let p;t[14]===Symbol.for("react.memo_cache_sentinel")?(p=h.jsx("b",{children:"GLB"}),t[14]=p):p=t[14];let y;t[15]===Symbol.for("react.memo_cache_sentinel")?(y=h.jsx(cn,{className:"mx-1 cursor-help font-bold underline underline-offset-2",children:"Blockbench"}),t[15]=y):y=t[15];let g;t[16]===Symbol.for("react.memo_cache_sentinel")?(g=h.jsxs(ln,{children:[y,h.jsxs(un,{children:[h.jsx("p",{className:"mb-2 text-lg",children:"Use these settings when exporting from Blockbench:"}),h.jsx("img",{src:Vb,alt:"Blockbench export settings"})]})]}),t[16]=g):g=t[16];let b,m;t[17]===Symbol.for("react.memo_cache_sentinel")?(b=h.jsx("br",{}),m=h.jsx("br",{}),t[17]=b,t[18]=m):(b=t[17],m=t[18]);let S,x,E;t[19]===Symbol.for("react.memo_cache_sentinel")?(S=h.jsxs("p",{className:"mb-4 text-balance",children:["You can replace the default cubes with your own 3D models to make the cart look like it would *in-game with a resourcepack.",u,f,"Models must be in ",d," or ",p," format. These can be exported from",g,"or most 3D software.",b,m,"Below, you'll see each ",h.jsx("b",{children:"Custom Model ID"})," for your attachments. Select an attachment in the 3D view to highlight the corresponding ID if it has one. Upload your model next to the matching ID to apply it in TC Animator."]}),x=h.jsx("p",{className:"text-xs text-muted-foreground text-balance",children:"* Models are shown just like Item Display Entities in Minecraft. Any automatic scaling based on display mode is not applied here."}),E=h.jsx("hr",{className:"my-4"}),t[19]=S,t[20]=x,t[21]=E):(S=t[19],x=t[20],E=t[21]);let _;t[22]!==e.length?(_=e.length===0&&h.jsx("p",{className:"text-muted-foreground text-sm",children:"No custom models required for this cart."}),t[22]=e.length,t[23]=_):_=t[23];let T;t[24]!==c||t[25]!==r||t[26]!==e||t[27]!==a?(T=e.length>0&&h.jsxs(bu,{children:[h.jsx(wu,{children:h.jsxs(Qr,{children:[h.jsx(rn,{children:"Custom Model ID"}),h.jsx(rn,{children:"Upload Model"})]})}),h.jsx(vu,{children:e.map(v=>h.jsxs(Qr,{children:[h.jsx(on,{className:a.includes(v)?"font-bold text-yellow-500":"",children:v}),h.jsx(on,{children:h.jsx(ze,{variant:"secondary",size:"sm",onClick:()=>c(v),children:r.get(v)?"Change Model":"Upload Model"})})]},v))})]}),t[24]=c,t[25]=r,t[26]=e,t[27]=a,t[28]=T):T=t[28];let w;return t[29]!==_||t[30]!==T?(w=h.jsxs(h.Fragment,{children:[S,x,E,_,T]}),t[29]=_,t[30]=T,t[31]=w):w=t[31],w}function Yb(){const t=L.c(13),e=pt();let n,s,r;t[0]===Symbol.for("react.memo_cache_sentinel")?(n=h.jsx("h2",{className:"text-lg font-medium",children:"Guidelines"}),s=h.jsx("p",{className:"text-balance text-sm",children:"Guidelines allow you to add references grids to the 3D view to help with positioning and scaling models. You can add guidelines for different planes (XY, XZ, YZ) and adjust their spacing and color."}),r=h.jsx(Dl,{className:"my-2"}),t[0]=n,t[1]=s,t[2]=r):(n=t[0],s=t[1],r=t[2]);let i;t[3]===Symbol.for("react.memo_cache_sentinel")?(i=h.jsx(wu,{children:h.jsxs(Qr,{children:[h.jsx(rn,{children:"Plane"}),h.jsx(rn,{children:"Position"}),h.jsx(rn,{children:"Cell Size"}),h.jsx(rn,{children:"Section Size"}),h.jsx(rn,{children:"Cell Color"}),h.jsx(rn,{className:"text-right",children:"Actions"})]})}),t[3]=i):i=t[3];let o;t[4]!==e?(o=e.metadata.guidelines.map((u,f)=>h.jsxs(Qr,{children:[h.jsx(on,{children:h.jsxs(Fr,{onValueChange:d=>{(d==="XY"||d==="XZ"||d==="YZ")&&e.updateGuideline(f,{plane:d})},value:u.plane,children:[h.jsx(Ur,{className:"w-full mt-0",children:h.jsx(Br,{placeholder:"XZ"})}),h.jsxs(Zr,{children:[h.jsx(Mn,{value:"XY",children:"XY"}),h.jsx(Mn,{value:"XZ",children:"XZ"}),h.jsx(Mn,{value:"YZ",children:"YZ"})]})]})}),h.jsx(on,{children:`[${u.position.map(Gb).join(", ")}]`}),h.jsx(on,{children:u.cellSize.toFixed(4)}),h.jsx(on,{children:u.sectionSize.toFixed(4)}),h.jsx(on,{children:h.jsx(sc,{defaultColor:u.cellColor,onChangeComplete:d=>e.updateGuideline(f,{cellColor:d})})}),h.jsxs(on,{className:"text-right gap-2 flex justify-end",children:[h.jsx(ze,{title:"Delete Guideline",size:"icon",variant:"destructive",onClick:()=>e.removeGuideline(f),children:h.jsx(jf,{})}),h.jsx(ze,{title:"Toggle Visibility",size:"icon",variant:"secondary",onClick:()=>e.updateGuideline(f,{visible:!u.visible}),children:u.visible?h.jsx(If,{}):h.jsx(Mf,{})})]})]},f)),t[4]=e,t[5]=o):o=t[5];let a;t[6]!==o?(a=h.jsxs(bu,{className:"w-full h-full",children:[i,h.jsx(vu,{children:o})]}),t[6]=o,t[7]=a):a=t[7];let l;t[8]!==e?(l=h.jsx(ze,{onClick:()=>e.addGuideline({plane:"XZ",position:[.5,0,.5],cellSize:.0625,sectionSize:1,cellColor:"#ff0000",visible:!0}),children:"Add Guideline"}),t[8]=e,t[9]=l):l=t[9];let c;return t[10]!==a||t[11]!==l?(c=h.jsxs("div",{className:"h-full w-full overflow-auto",children:[n,s,r,a,l]}),t[10]=a,t[11]=l,t[12]=c):c=t[12],c}function Gb(t){return t.toFixed(2)}function qb(){const t=L.c(3);let e,n;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=h.jsx(es,{className:"px-4 pb-2",children:h.jsx("div",{className:"h-full w-full overflow-auto",children:h.jsx("h2",{className:"text-lg font-medium",children:"Object Controls (to be implemented)"})})}),n=h.jsx(Xi,{}),t[0]=e,t[1]=n):(e=t[0],n=t[1]);let s;return t[2]===Symbol.for("react.memo_cache_sentinel")?(s=h.jsxs(Hi,{direction:"vertical",autoSaveId:"tca-object-controls",autoSave:"true",children:[e,n,h.jsx(es,{className:"px-4 py-2",children:h.jsx(Yb,{})})]}),t[2]=s):s=t[2],s}function ll(t){const e=L.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=Z("bg-accent animate-pulse rounded-md",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx("div",{"data-slot":"skeleton",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}const cl=P.lazy(()=>Kh(()=>import("./monaco-BWE6UG2u.js"),__vite__mapDeps([0,1,2])));function Kb(){const t=pt(),e=P.useMemo(()=>({...t,cart:void 0,modelFiles:void 0,fileHandle:void 0}),[t]);return h.jsxs(Nb,{defaultValue:"object-controls",className:"-mt-4 h-full w-full",children:[h.jsxs(Cb,{className:"w-full rounded-none",children:[h.jsx(vr,{value:"object-controls",children:"Object Controls"}),h.jsx(vr,{value:"custom-models",children:"Custom Models"}),h.jsx(vr,{value:"cart-debug",children:"Cart Debug"}),h.jsx(vr,{value:"project-debug",children:"Project Debug"})]}),h.jsx(xr,{value:"object-controls",children:h.jsx(qb,{})}),h.jsx(xr,{value:"custom-models",className:"px-4",children:h.jsx(Wb,{})}),h.jsx(xr,{value:"cart-debug",children:h.jsx(P.Suspense,{fallback:h.jsx(ll,{className:"h-full w-full"}),children:h.jsx(cl,{language:"json",theme:"vs-dark",value:JSON.stringify(t.cart,null,2),options:{minimap:{enabled:!0},scrollbar:{alwaysConsumeMouseWheel:!1},wordWrap:"on",automaticLayout:!0},onChange:n=>{if(n)try{const s=JSON.parse(n);t.setCart(s)}catch(s){console.error("Failed to parse JSON:",s)}}})})}),h.jsx(xr,{value:"project-debug",children:h.jsxs(P.Suspense,{fallback:h.jsx(ll,{className:"h-full w-full"}),children:[h.jsx(ze,{className:"mb-2 block w-full",onClick:()=>t.logState(),children:"Log State to Console"}),h.jsx(cl,{language:"json",theme:"vs-dark",value:JSON.stringify(e,null,2),options:{minimap:{enabled:!1},scrollbar:{alwaysConsumeMouseWheel:!1},wordWrap:"off",automaticLayout:!0,readOnly:!0}})]})})]})}let Pr=[],$r=[];function Hb(t){return Pr.push(t),()=>{Pr=Pr.filter(e=>e!==t)}}function Xb(t){return $r.push(t),()=>{$r=$r.filter(e=>e!==t)}}function Qb(){const t=L.c(3),e=P.useRef(0);let n;t[0]===Symbol.for("react.memo_cache_sentinel")?(n=performance.now(),t[0]=n):n=t[0];const s=P.useRef(n),{gl:r}=si();let i;return t[1]!==r?(i=()=>{e.current=e.current+1;const o=performance.now(),a=o-s.current;if(a>500){const l=Math.round(e.current*1e3/a);e.current=0,s.current=o,Pr.forEach(u=>u(l));const c=r.info;$r.forEach(u=>u(c.render))}},t[1]=r,t[2]=i):i=t[2],Oo(i),null}function Jb(t){const e=L.c(24),{position:n}=t,s=n===void 0?"top-right":n,r=Xs(),[i,o]=P.useState(0);let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a={calls:0,frame:0,lines:0,points:0,triangles:0},e[0]=a):a=e[0];const[l,c]=P.useState(a);let u,f;e[1]===Symbol.for("react.memo_cache_sentinel")?(u=()=>Hb(o),f=[],e[1]=u,e[2]=f):(u=e[1],f=e[2]),P.useEffect(u,f);let d,p;e[3]===Symbol.for("react.memo_cache_sentinel")?(d=()=>Xb(c),p=[],e[3]=d,e[4]=p):(d=e[3],p=e[4]),P.useEffect(d,p);const y=s.includes("top")?8:void 0,g=s.includes("bottom")?8:void 0,b=s.includes("left")?8:void 0,m=s.includes("right")?8:void 0;let S;e[5]!==m||e[6]!==y||e[7]!==g||e[8]!==b?(S={top:y,bottom:g,left:b,right:m},e[5]=m,e[6]=y,e[7]=g,e[8]=b,e[9]=S):S=e[9];const x=S;let E;e[10]!==x?(E={...x},e[10]=x,e[11]=E):E=e[11];let _;e[12]!==i?(_=h.jsxs("p",{children:[i," FPS"]}),e[12]=i,e[13]=_):_=e[13];let T;e[14]!==r.DOFEnabled||e[15]!==r.SSAOEnabled||e[16]!==r.controlDamping||e[17]!==r.debugText||e[18]!==l?(T=r.debugText&&h.jsxs(h.Fragment,{children:[h.jsx("hr",{className:"border-border my-1 border-t"}),h.jsxs("p",{children:["Draw Calls: ",l.calls]}),h.jsxs("p",{children:["Frame: ",l.frame]}),h.jsxs("p",{children:["Triangles: ",l.triangles]}),h.jsxs("p",{children:["Lines: ",l.lines]}),h.jsxs("p",{children:["Points: ",l.points]}),h.jsx("hr",{className:"border-border my-1 border-t"}),h.jsxs("p",{children:["Debug Text: ",r.debugText?"On":"Off"]}),h.jsxs("p",{children:["SSAO: ",r.SSAOEnabled?"On":"Off"]}),h.jsxs("p",{children:["Depth of Field: ",r.DOFEnabled?"On":"Off"]}),h.jsxs("p",{children:["Control Damping:"," ",r.controlDamping?"On":"Off"]})]}),e[14]=r.DOFEnabled,e[15]=r.SSAOEnabled,e[16]=r.controlDamping,e[17]=r.debugText,e[18]=l,e[19]=T):T=e[19];let w;return e[20]!==E||e[21]!==_||e[22]!==T?(w=h.jsxs("div",{className:"text-muted-foreground pointer-events-none absolute z-10 text-right font-mono text-sm",style:E,children:[_,T]}),e[20]=E,e[21]=_,e[22]=T,e[23]=w):w=e[23],w}const ew="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAAAXNSR0IArs4c6QAAAHpJREFUOI21kjEKACEMBNdD/IGV/39abMwL0uSKgIiCyRVnETFsMrJsUlWEDxFlu0opIuJWZn4ABNUiAiADuChaawDGGNYB4BDs6yvhuRNsYJ3/n5DXd611c9khbPt8wtw33YwSps5x6dSdhKSq8Sz13r9niYiYOZ7wF+cqCUwV0Ir/AAAAAElFTkSuQmCC",_r=[],tw=5;function nw(){const t=Math.floor(Math.random()*360),e=70+Math.random()*10,n=80+Math.random()*10;return`hsl(${t}, ${e}%, ${n}%)`}function sw(){let t="",e=0;do t=nw(),e++;while(_r.includes(t)&&e<10);return _r.push(t),_r.length>tw&&_r.shift(),t}const ds=P.forwardRef((t,e)=>{const n=L.c(13),s=Hh(ew);let r,i;n[0]!==s?(i=s.clone(),i.magFilter=pa,i.minFilter=pa,n[0]=s,n[1]=i):i=n[1],r=i;const o=r;let a,l;n[2]===Symbol.for("react.memo_cache_sentinel")?(l=sw(),n[2]=l):l=n[2],a=l;const c=a;let u;if(n[3]!==t.position){const g=new Oe(0,.5,0);u=(t.position instanceof Oe?t.position:Array.isArray(t.position)?new Oe(...t.position):new Oe(0,0,0)).clone().add(g),n[3]=t.position,n[4]=u}else u=n[4];const f=u;let d;n[5]===Symbol.for("react.memo_cache_sentinel")?(d=h.jsx("boxGeometry",{args:[1,1,1]}),n[5]=d):d=n[5];let p;n[6]!==o?(p=h.jsx("meshStandardMaterial",{map:o,color:c}),n[6]=o,n[7]=p):p=n[7];let y;return n[8]!==f||n[9]!==t||n[10]!==e||n[11]!==p?(y=h.jsxs("mesh",{ref:e,...t,castShadow:!0,receiveShadow:!0,position:f,children:[d,p]}),n[8]=f,n[9]=t,n[10]=e,n[11]=p,n[12]=y):y=n[12],y}),Jr=new Map;function rw(t,e){const n=Jr.get(t);if(n&&n.buffer===e)return n.url;n&&URL.revokeObjectURL(n.url);const s=new Blob([e]),r=URL.createObjectURL(s);return Jr.set(t,{buffer:e,url:r}),r}function ul(t){const e=Jr.get(t);e&&(URL.revokeObjectURL(e.url),Jr.delete(t))}function xu({jsonPath:t}){const{cart:e,modelFiles:n}=pt(),s=P.useMemo(()=>{if(!t||!e)return[];const r=oe({path:t,json:e,resultType:"value"});if(r.length===0)return[];const i=r[0];if(!i||typeof i!="object")return[];const o=new Set;function a(l){if(!l)return;const c=l["minecraft:custom_model_data"];if(c&&typeof c=="object"&&"floats"in c){const u=c.floats;Array.isArray(u)&&u.forEach(f=>o.add(f))}}if("item"in i){const l=i.item;a(l?.components)}return Array.from(o)},[t,e]);return s.length===0?h.jsx(h.Fragment,{children:h.jsx(ds,{})}):h.jsx(h.Fragment,{children:s.map(r=>{if(!n)return h.jsx(ds,{},r);const i=n.get(r);return i?h.jsx(iw,{modelId:r,arrayBuffer:i},r):h.jsx(ds,{},r)})})}function iw(t){const e=L.c(9),{modelId:n,arrayBuffer:s}=t,[r,i]=P.useState(void 0);let o,a;if(e[0]!==s||e[1]!==n?(o=()=>{if(!s){i(void 0),ul(n);return}const c=rw(n,s);return i(c),()=>{ul(n)}},a=[n,s],e[0]=s,e[1]=n,e[2]=o,e[3]=a):(o=e[2],a=e[3]),P.useEffect(o,a),!r){let c;return e[4]!==n?(c=h.jsx(ds,{},n),e[4]=n,e[5]=c):c=e[5],c}let l;return e[6]!==r||e[7]!==n?(l=h.jsx(ow,{modelId:n,blobUrl:r}),e[6]=r,e[7]=n,e[8]=l):l=e[8],l}function ow({modelId:t,blobUrl:e,scale:n=1,position:s=new Oe(0,0,0)}){const{scene:r}=jo(e),i=P.useMemo(()=>{if(!r)return null;const o=r.clone(!0);o.updateWorldMatrix(!0,!0);const a=new ud().copy(o.matrixWorld).invert();o.traverse(c=>c.applyMatrix4(a)),o.position.set(-.5,-.5,-.5),o.rotation.set(0,0,0),o.scale.set(1,1,1);const l=new fd;return l.add(o),l.scale.setScalar(1),l},[r]);return i?h.jsx("group",{scale:n,position:s,children:h.jsx("primitive",{object:i,rotation:[0,Yt(180),0],castShadow:!0,receiveShadow:!0})}):h.jsx(ds,{},t)}const _u="/tc-animator/assets/dummy-DcMSIvyN.glb";jo.preload(_u);function aw({scale:t=1,position:e=new Oe(0,0,0)}){const{scene:n}=jo(_u),s=P.useMemo(()=>n?hd(n):null,[n]);return s?h.jsx("primitive",{object:s,scale:t,position:e,castShadow:!0,receiveShadow:!0}):h.jsx(ds,{})}function fl(t){const e=L.c(14),n=P.useRef(null),{camera:s}=si();let r;e[0]!==s?(r=()=>{if(!n.current)return;const g=n.current.getWorldPosition(new Oe),b=s.position.clone();b.y=g.y;const m=b.sub(g).normalize();let S=Math.atan2(m.x,m.z);if(n.current.parent){const x=new Vl;n.current.parent.getWorldQuaternion(x);const _=new Io().setFromQuaternion(x,"YXZ").y;S=S-_+Math.PI}else S=S+Math.PI;n.current.rotation.set(0,S+Yt(180),0)},e[0]=s,e[1]=r):r=e[1],Oo(r);let i;e[2]===Symbol.for("react.memo_cache_sentinel")?(i=[.3,.3,.3],e[2]=i):i=e[2];let o,a=0,l=0,c=-.1;const u=t.position;Array.isArray(u)&&u.length===3?(a=u[0]??0,l=u[1]??0,c=(u[2]??0)-.1):u&&typeof u=="object"&&"x"in u&&"y"in u&&"z"in u?(a=u.x??0,l=u.y??0,c=(u.z??0)-.1):typeof u=="number"&&(a=u);let f;e[3]!==a||e[4]!==l||e[5]!==c?(f=new Oe(a,l,c),e[3]=a,e[4]=l,e[5]=c,e[6]=f):f=e[6],o=f;let d;e[7]!==o?(d=h.jsx(Qh,{castShadow:!0,receiveShadow:!0,args:i,position:o}),e[7]=o,e[8]=d):d=e[8];let p;e[9]!==t?(p=h.jsx(Xh,{ref:n,...t,renderOrder:9999,children:t.children}),e[9]=t,e[10]=p):p=e[10];let y;return e[11]!==d||e[12]!==p?(y=h.jsxs(h.Fragment,{children:[d,p]}),e[11]=d,e[12]=p,e[13]=y):y=e[13],y}function lw(t){const e=L.c(33),{onSelect:n,onHover:s}=t,{cart:r,setSelectedObjectPath:i}=pt(),o=P.useRef(null);if(!r?.model)return null;const{position:a}=r.model,l=a?.posX||0,c=a?.posY||0,u=a?.posZ||0;let f;e[0]!==l||e[1]!==c||e[2]!==u?(f=new Oe(l,c,u),e[0]=l,e[1]=c,e[2]=u,e[3]=f):f=e[3];const d=f,p=a?.rotX||0;let y;e[4]!==a?.rotY||e[5]!==a?.rotZ||e[6]!==p?(y=new Io(Yt(p),Yt(a?.rotY||0),Yt(a?.rotZ||0)),e[4]=a?.rotY,e[5]=a?.rotZ,e[6]=p,e[7]=y):y=e[7];const g=y,b=a?.sizeX||1,m=a?.sizeY||1,S=a?.sizeZ||1;let x;e[8]!==b||e[9]!==m||e[10]!==S?(x=new Oe(b,m,S),e[8]=b,e[9]=m,e[10]=S,e[11]=x):x=e[11];const E=x;let _,T;e[12]!==s?(_=C=>{C.stopPropagation(),o.current&&s(o.current)},T=C=>{C.stopPropagation(),s(null)},e[12]=s,e[13]=_,e[14]=T):(_=e[13],T=e[14]);let w;e[15]!==n||e[16]!==i?(w=C=>{C.stopPropagation(),o.current&&(n(o.current),i("$.model"))},e[15]=n,e[16]=i,e[17]=w):w=e[17];let v;e[18]===Symbol.for("react.memo_cache_sentinel")?(v=h.jsx(xu,{jsonPath:"$.model"}),e[18]=v):v=e[18];let k;e[19]!==E?(k=h.jsx("group",{scale:E,children:v}),e[19]=E,e[20]=k):k=e[20];let A;e[21]!==r.model||e[22]!==s||e[23]!==n?(A=h.jsx(Eu,{attachments:r.model,onSelect:n,onHover:s,jsonPath:"$.model"}),e[21]=r.model,e[22]=s,e[23]=n,e[24]=A):A=e[24];let N;return e[25]!==d||e[26]!==g||e[27]!==_||e[28]!==T||e[29]!==w||e[30]!==k||e[31]!==A?(N=h.jsxs("group",{ref:o,position:d,rotation:g,onPointerOver:_,onPointerOut:T,onClick:w,children:[k,A]}),e[25]=d,e[26]=g,e[27]=_,e[28]=T,e[29]=w,e[30]=k,e[31]=A,e[32]=N):N=e[32],N}function Eu({attachments:t,onSelect:e,onHover:n,jsonPath:s}){return Object.entries(t.attachments||{}).map(([r,i])=>h.jsx(cw,{attachment:i,onSelect:e,onHover:n,jsonPath:`${s}.attachments.${r}`},r))}function cw(t){const e=L.c(61),{attachment:n,onSelect:s,onHover:r,jsonPath:i}=t,o=Xs(),{setSelectedObjectPath:a}=pt(),l=P.useRef(null),c=n.position?.posX||0,u=n.position?.posY||0,f=n.position?.posZ||0;let d,p,y,g,b,m,S,x;if(e[0]!==n.names||e[1]!==n.position?.rotX||e[2]!==n.position?.rotY||e[3]!==n.position?.rotZ||e[4]!==n.position?.sizeX||e[5]!==n.position?.sizeY||e[6]!==n.position?.sizeZ||e[7]!==n.type||e[8]!==i||e[9]!==r||e[10]!==s||e[11]!==o.debugText||e[12]!==a||e[13]!==c||e[14]!==u||e[15]!==f){const T=new Oe(c,u,f),w=new Io(Yt(n.position?.rotX||0),Yt(n.position?.rotY||0),Yt(n.position?.rotZ||0)),v=n.position?.sizeX||1,k=n.position?.sizeY||1,A=n.position?.sizeZ||1;let N;e[24]!==v||e[25]!==k||e[26]!==A?(N=new Oe(v,k,A),e[24]=v,e[25]=k,e[26]=A,e[27]=N):N=e[27];const C=N;y=l,g=T,b=w,e[28]!==n.type||e[29]!==r?(m=D=>{l.current&&!["SEAT","HITBOX"].includes(n.type)&&(D.stopPropagation(),r(l.current))},e[28]=n.type,e[29]=r,e[30]=m):m=e[30],e[31]!==r?(S=D=>{D.stopPropagation(),r(null)},e[31]=r,e[32]=S):S=e[32],e[33]!==n.type||e[34]!==i||e[35]!==s||e[36]!==a?(x=D=>{l.current&&!["SEAT","HITBOX"].includes(n.type)&&(D.stopPropagation(),s(l.current),a(i))},e[33]=n.type,e[34]=i,e[35]=s,e[36]=a,e[37]=x):x=e[37];let O;e:switch(n.type){case"SEAT":{const D=o.debugText&&h.jsx(fl,{fontSize:.3,color:"white",anchorX:"center",anchorY:"middle",outlineWidth:.05,outlineColor:"black",position:[0,3.5,0],children:`${n.names&&Array.isArray(n.names)&&n.names.length>0?n.names[0]:"Seat"}
Pos:${T.toArray().map(pw)}`});let M;e[38]===Symbol.for("react.memo_cache_sentinel")?(M=h.jsx(aw,{}),e[38]=M):M=e[38];let R;e[39]!==D?(R=h.jsxs(h.Fragment,{children:[D,M]}),e[39]=D,e[40]=R):R=e[40],O=R;break e}case"HITBOX":{O=null;break e}default:{let D;e[41]!==i?(D=h.jsx(xu,{jsonPath:i}),e[41]=i,e[42]=D):D=e[42],O=D}}e[43]!==C||e[44]!==O?(d=h.jsx("group",{scale:C,children:O}),e[43]=C,e[44]=O,e[45]=d):d=e[45],p=o.debugText&&!["SEAT","HITBOX"].includes(n.type)&&h.jsx(fl,{position:[0,1.5,0],fontSize:.3,color:"yellow",anchorX:"center",anchorY:"middle",scale:[1,1,1],outlineWidth:.05,outlineColor:"black",children:`${n.names&&Array.isArray(n.names)&&n.names.length>0?n.names[0]:""}
Pos:${T.toArray().map(dw)}
rot:${w.toArray().filter(hw).map(fw)}
scale:${C.toArray().map(uw)}`}),e[0]=n.names,e[1]=n.position?.rotX,e[2]=n.position?.rotY,e[3]=n.position?.rotZ,e[4]=n.position?.sizeX,e[5]=n.position?.sizeY,e[6]=n.position?.sizeZ,e[7]=n.type,e[8]=i,e[9]=r,e[10]=s,e[11]=o.debugText,e[12]=a,e[13]=c,e[14]=u,e[15]=f,e[16]=d,e[17]=p,e[18]=y,e[19]=g,e[20]=b,e[21]=m,e[22]=S,e[23]=x}else d=e[16],p=e[17],y=e[18],g=e[19],b=e[20],m=e[21],S=e[22],x=e[23];let E;e[46]!==n||e[47]!==i||e[48]!==r||e[49]!==s?(E=n.attachments&&h.jsx(Eu,{attachments:n,onSelect:s,onHover:r,jsonPath:`${i}`}),e[46]=n,e[47]=i,e[48]=r,e[49]=s,e[50]=E):E=e[50];let _;return e[51]!==d||e[52]!==p||e[53]!==E||e[54]!==y||e[55]!==g||e[56]!==b||e[57]!==m||e[58]!==S||e[59]!==x?(_=h.jsxs("group",{ref:y,position:g,rotation:b,onPointerOver:m,onPointerOut:S,onClick:x,children:[d,p,E]}),e[51]=d,e[52]=p,e[53]=E,e[54]=y,e[55]=g,e[56]=b,e[57]=m,e[58]=S,e[59]=x,e[60]=_):_=e[60],_}function uw(t){return t.toFixed(2)}function fw(t){return t.toFixed(2)}function hw(t){return typeof t=="number"}function dw(t){return t.toFixed(2)}function pw(t){return`
${t.toFixed(2)}`}function hl(t){const e=L.c(13),{selection:n,color:s,scaleFactor:r}=t,i=s===void 0?16753920:s,o=r===void 0?1.05:r,{scene:a}=si(),l=P.useRef(null);let c;e:{if(!n){let g;e[0]===Symbol.for("react.memo_cache_sentinel")?(g=new Oe(1,1,1),e[0]=g):g=e[0],c=g;break e}let y;if(e[1]!==o||e[2]!==n){const g=n.clone(!0);g.rotation.set(0,0,0),g.updateWorldMatrix(!0,!0),y=new Yi().setFromObject(g).getSize(new Oe).multiplyScalar(o),g.remove(),e[1]=o,e[2]=n,e[3]=y}else y=e[3];c=y}const u=c;let f,d;e[4]!==u||e[5]!==i||e[6]!==a||e[7]!==n?(f=()=>{if(n){if(!l.current){const y=new ma(new ga(u.x,u.y,u.z)),g=new dd({color:i});l.current=new pd(y,g),a.add(l.current)}return()=>{l.current&&(a.remove(l.current),l.current.geometry.dispose(),l.current=null)}}},d=[n,a,i,u],e[4]=u,e[5]=i,e[6]=a,e[7]=n,e[8]=f,e[9]=d):(f=e[8],d=e[9]),P.useEffect(f,d);let p;return e[10]!==u||e[11]!==n?(p=()=>{if(!l.current||!n)return;const y=new Yi().setFromObject(n).getCenter(new Oe);l.current.geometry.dispose(),l.current.geometry=new ma(new ga(u.x,u.y,u.z)),l.current.position.copy(y),l.current.quaternion.copy(n.getWorldQuaternion(new Vl))},e[10]=u,e[11]=n,e[12]=p):p=e[12],Oo(p),null}function Su(t){const e=L.c(26);let n,s,r,i,o,a;e[0]!==t?({className:n,defaultValue:s,value:a,min:i,max:o,...r}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r,e[4]=i,e[5]=o,e[6]=a):(n=e[1],s=e[2],r=e[3],i=e[4],o=e[5],a=e[6]);const l=i===void 0?0:i,c=o===void 0?100:o;let u,f;e[7]!==s||e[8]!==c||e[9]!==l||e[10]!==a?(f=Array.isArray(a)?a:Array.isArray(s)?s:[l,c],e[7]=s,e[8]=c,e[9]=l,e[10]=a,e[11]=f):f=e[11],u=f;const d=u;let p;e[12]!==n?(p=Z("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",n),e[12]=n,e[13]=p):p=e[13];let y;e[14]===Symbol.for("react.memo_cache_sentinel")?(y=Z("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),e[14]=y):y=e[14];let g;e[15]===Symbol.for("react.memo_cache_sentinel")?(g=h.jsx(zl,{"data-slot":"slider-track",className:y,children:h.jsx(Fl,{"data-slot":"slider-range",className:Z("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),e[15]=g):g=e[15];let b;e[16]!==d.length?(b=Array.from({length:d.length},mw),e[16]=d.length,e[17]=b):b=e[17];let m;return e[18]!==s||e[19]!==c||e[20]!==l||e[21]!==r||e[22]!==p||e[23]!==b||e[24]!==a?(m=h.jsxs(Ll,{"data-slot":"slider",defaultValue:s,value:a,min:l,max:c,className:p,...r,children:[g,b]}),e[18]=s,e[19]=c,e[20]=l,e[21]=r,e[22]=p,e[23]=b,e[24]=a,e[25]=m):m=e[25],m}function mw(t,e){return h.jsx(Bl,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},e)}function gw(t){const e=L.c(17),{value:n,onChange:s}=t,r=n===void 0?0:n;let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=[0,1,5,11.25,15,22.5,30,45],e[0]=i):i=e[0];const o=i,[a,l]=P.useState(r||0);let c;e[1]!==s?(c=E=>{l(E),s(E)},e[1]=s,e[2]=c):c=e[2];const u=c;let f;e[3]===Symbol.for("react.memo_cache_sentinel")?(f=E=>o.reduce((_,T)=>Math.abs(T-E)<Math.abs(_-E)?T:_),e[3]=f):f=e[3];const d=f;let p;e[4]===Symbol.for("react.memo_cache_sentinel")?(p={minWidth:"5ch"},e[4]=p):p=e[4];const y=a>0?`${a}`:"Off";let g;e[5]!==y?(g=h.jsxs(lt,{className:"flex items-center gap-1 font-semibold whitespace-nowrap",children:["Angle Snap:",h.jsx("span",{className:"inline-block",style:p,children:y})]}),e[5]=y,e[6]=g):g=e[6];let b;e[7]!==a?(b=[a],e[7]=a,e[8]=b):b=e[8];let m;e[9]!==u?(m=E=>{const _=d(E[0]);u(_)},e[9]=u,e[10]=m):m=e[10];let S;e[11]!==b||e[12]!==m?(S=h.jsx(Su,{min:0,max:45,step:.1,value:b,onValueChange:m,className:"w-full"}),e[11]=b,e[12]=m,e[13]=S):S=e[13];let x;return e[14]!==S||e[15]!==g?(x=h.jsxs("div",{className:"flex w-sm flex-row items-center gap-2",children:[g,S]}),e[14]=S,e[15]=g,e[16]=x):x=e[16],x}function yw(t){const e=L.c(17),{value:n,onChange:s}=t,r=n===void 0?0:n;let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=[0,.03125,.0625,.125,.25,.5,1],e[0]=i):i=e[0];const o=i,[a,l]=P.useState(r||0);let c;e[1]!==s?(c=E=>{l(E),s(E)},e[1]=s,e[2]=c):c=e[2];const u=c;let f;e[3]===Symbol.for("react.memo_cache_sentinel")?(f=E=>o.reduce((_,T)=>Math.abs(T-E)<Math.abs(_-E)?T:_),e[3]=f):f=e[3];const d=f;let p;e[4]===Symbol.for("react.memo_cache_sentinel")?(p={minWidth:"5ch"},e[4]=p):p=e[4];const y=a>0?`${Ad(a)}`:"Off";let g;e[5]!==y?(g=h.jsxs(lt,{className:"flex items-center gap-1 font-semibold whitespace-nowrap",children:["Distance Snap:",h.jsx("span",{className:"inline-block",style:p,children:y})]}),e[5]=y,e[6]=g):g=e[6];let b;e[7]!==a?(b=[a],e[7]=a,e[8]=b):b=e[8];let m;e[9]!==u?(m=E=>{const _=d(E[0]);u(_)},e[9]=u,e[10]=m):m=e[10];let S;e[11]!==b||e[12]!==m?(S=h.jsx(Su,{min:0,max:1,step:.01,value:b,onValueChange:m,className:"w-full"}),e[11]=b,e[12]=m,e[13]=S):S=e[13];let x;return e[14]!==S||e[15]!==g?(x=h.jsxs("div",{className:"flex w-sm flex-row items-center gap-2",children:[g,S]}),e[14]=S,e[15]=g,e[16]=x):x=e[16],x}const bw=Jl("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium hover:bg-muted hover:text-muted-foreground disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] outline-none transition-[color,box-shadow] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive whitespace-nowrap",{variants:{variant:{default:"bg-card",outline:"border border-input bg-card shadow-xs hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-2 min-w-9",sm:"h-8 px-1.5 min-w-8",lg:"h-10 px-2.5 min-w-10"}},defaultVariants:{variant:"default",size:"default"}});function dl(t){const e=L.c(12);let n,s,r,i;e[0]!==t?({className:n,variant:i,size:r,...s}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r,e[4]=i):(n=e[1],s=e[2],r=e[3],i=e[4]);let o;e[5]!==n||e[6]!==r||e[7]!==i?(o=Z(bw({variant:i,size:r,className:n})),e[5]=n,e[6]=r,e[7]=i,e[8]=o):o=e[8];let a;return e[9]!==s||e[10]!==o?(a=h.jsx(Dh,{"data-slot":"toggle",className:o,...s}),e[9]=s,e[10]=o,e[11]=a):a=e[11],a}function ww({controlsRef:t}){const e=pt(),{camera:n}=si();return P.useEffect(()=>{const s=t.current,r=e.metadata.orbitControls;!s||!r||(n.position.copy(new Oe(...r.position)),s.target.copy(new Oe(...r.target)),r.zoom&&"zoom"in n&&(n.zoom=r.zoom,n.updateProjectionMatrix()),s.update())},[e.metadata.orbitControls,n,t]),P.useEffect(()=>{const s=t.current;if(!s)return;const r=Ul.debounce(()=>{e.setMetadata({...e.metadata,orbitControls:{position:n.position.toArray(),target:s.target.toArray(),zoom:n.zoom}})},200);return s.addEventListener("change",r),()=>s.removeEventListener("change",r)},[n,e,t]),null}function vw(){const t=L.c(117),e=Xs(),n=pt(),s=P.useRef(null),[r,i]=P.useState(null),[o,a]=P.useState(null),[l,c]=P.useState("translate"),[u,f]=P.useState("world");let d,p;t[0]!==n||t[1]!==r||t[2]!==u?(d=()=>{const it=Ze=>{if(!(Ze.target&&Ze.target.isContentEditable))if(Ze.key==="v"||Ze.key==="V")c("translate");else if(Ze.key==="r"||Ze.key==="R")c("rotate");else if(Ze.key==="x"||Ze.key==="X")f(u==="world"?"local":"world");else if(Ze.key==="f"||Ze.key==="F"){if(r){const Zn=new Yi().setFromObject(r),Qt=Zn.getSize(new Oe).length(),Jt=Zn.getCenter(new Oe),Vn=Qt*1.5,Rt=s.current?.object;if(Rt){const en=new Oe().subVectors(Rt.position,Jt).normalize().multiplyScalar(Vn);Rt.position.copy(en.add(Jt)),s.current?.target.copy(Jt),s.current?.update()}}}else Ze.key==="Escape"&&(n.setSelectedObjectPath(void 0),i(null))};return window.addEventListener("keydown",it),()=>{window.removeEventListener("keydown",it)}},p=[u,n,r],t[0]=n,t[1]=r,t[2]=u,t[3]=d,t[4]=p):(d=t[3],p=t[4]),P.useEffect(d,p);let y,g;if(t[5]!==n.cart||t[6]!==r?(y=()=>{r&&(n.cart||i(null))},g=[n.cart,r],t[5]=n.cart,t[6]=r,t[7]=y,t[8]=g):(y=t[7],g=t[8]),P.useEffect(y,g),!n.cart){let it;return t[9]===Symbol.for("react.memo_cache_sentinel")?(it=h.jsx("div",{className:"flex h-full w-full items-center justify-center bg-black",children:h.jsx("p",{className:"text-muted-foreground",children:"No cart selected. Please create or open a project."})}),t[9]=it):it=t[9],it}let b;t[10]===Symbol.for("react.memo_cache_sentinel")?(b=h.jsx(sd,{},"smaa"),t[10]=b):b=t[10];let m;t[11]!==e.SSAOEnabled?(m=e.SSAOEnabled&&h.jsx(Jh,{},"ssao"),t[11]=e.SSAOEnabled,t[12]=m):m=t[12];let S;t[13]!==e.DOFEnabled?(S=e.DOFEnabled&&h.jsx(ed,{focusDistance:2,focalLength:5,bokehScale:2},"dof"),t[13]=e.DOFEnabled,t[14]=S):S=t[14];let x;t[15]!==m||t[16]!==S?(x=[b,m,S].filter(Boolean),t[15]=m,t[16]=S,t[17]=x):x=t[17];const E=x,_=`three-bg ${o?"cursor-pointer":"cursor-default"}`;let T;t[18]===Symbol.for("react.memo_cache_sentinel")?(T={position:[3,3,3],fov:45},t[18]=T):T=t[18];let w,v;t[19]===Symbol.for("react.memo_cache_sentinel")?(w=[1,2],v={toneMapping:0,powerPreference:"high-performance",alpha:!1,antialias:!0,stencil:!1,autoClear:!1,depth:!0},t[19]=w,t[20]=v):(w=t[19],v=t[20]);let k;t[21]!==n?(k=it=>{it.type==="click"&&(n.setSelectedObjectPath(void 0),i(null))},t[21]=n,t[22]=k):k=t[22];let A;t[23]!==E?(A=h.jsx(rd,{enabled:!0,enableNormalPass:!0,depthBuffer:!0,stencilBuffer:!0,children:E}),t[23]=E,t[24]=A):A=t[24];let N,C,O,D;t[25]===Symbol.for("react.memo_cache_sentinel")?(N=h.jsx(Qb,{}),C=h.jsx(id,{all:!0}),O=h.jsx("ambientLight",{intensity:2}),D=h.jsx("directionalLight",{position:[5,5,5],intensity:3,castShadow:!0}),t[25]=N,t[26]=C,t[27]=O,t[28]=D):(N=t[25],C=t[26],O=t[27],D=t[28]);let M;t[29]===Symbol.for("react.memo_cache_sentinel")?(M=[.5,0,.5],t[29]=M):M=t[29];const R=e.gridColor;let $;t[30]!==e?($=e.getComplementaryGridColor(),t[30]=e,t[31]=$):$=t[31];let B;t[32]!==e.gridColor||t[33]!==$?(B=h.jsx(Zl,{position:M,cellSize:.0625,sectionSize:1,cellThickness:.5,sectionThickness:1.5,cellColor:R,sectionColor:$,infiniteGrid:!0,side:Wl}),t[32]=e.gridColor,t[33]=$,t[34]=B):B=t[34];let z;t[35]===Symbol.for("react.memo_cache_sentinel")?(z=[-.5,0,-.5],t[35]=z):z=t[35];let G;t[36]===Symbol.for("react.memo_cache_sentinel")?(G=h.jsxs("line",{children:[h.jsx("bufferGeometry",{children:h.jsx("bufferAttribute",{attach:"attributes-position",args:[new Float32Array([0,0,0,1,0,0]),3],count:2,itemSize:3})}),h.jsx("lineBasicMaterial",{color:16711680,linewidth:2})]}),t[36]=G):G=t[36];let H;t[37]===Symbol.for("react.memo_cache_sentinel")?(H=h.jsxs("line",{children:[h.jsx("bufferGeometry",{children:h.jsx("bufferAttribute",{attach:"attributes-position",args:[new Float32Array([0,0,0,0,1,0]),3],count:2,itemSize:3})}),h.jsx("lineBasicMaterial",{color:65280,linewidth:2})]}),t[37]=H):H=t[37];let ne;t[38]===Symbol.for("react.memo_cache_sentinel")?(ne=h.jsxs("line",{children:[h.jsx("bufferGeometry",{children:h.jsx("bufferAttribute",{attach:"attributes-position",args:[new Float32Array([0,0,0,0,0,1]),3],count:2,itemSize:3})}),h.jsx("lineBasicMaterial",{color:255,linewidth:2})]}),t[38]=ne):ne=t[38];let W;t[39]!==G||t[40]!==H||t[41]!==ne?(W=h.jsxs("group",{position:z,children:[G,H,ne]}),t[39]=G,t[40]=H,t[41]=ne,t[42]=W):W=t[42];let te;t[43]!==n.metadata.guidelines?(te=n.metadata.guidelines?.map(xw),t[43]=n.metadata.guidelines,t[44]=te):te=t[44];let q;t[45]===Symbol.for("react.memo_cache_sentinel")?(q=h.jsx(P.Suspense,{fallback:h.jsx(od,{center:!0,children:"Loading..."}),children:h.jsx(lw,{onSelect:i,onHover:a})}),t[45]=q):q=t[45];let ie;t[46]!==e.angleSnap||t[47]!==e.distanceSnap||t[48]!==r||t[49]!==l||t[50]!==u?(ie=r&&h.jsx(td,{object:r,mode:l,rotationSnap:Yt(e.angleSnap),translationSnap:e.distanceSnap,onMouseDown:()=>s.current.enabled=!1,onMouseUp:()=>s.current.enabled=!0,space:u}),t[46]=e.angleSnap,t[47]=e.distanceSnap,t[48]=r,t[49]=l,t[50]=u,t[51]=ie):ie=t[51];let Re;t[52]!==e.controlDamping?(Re=h.jsx(nd,{ref:s,makeDefault:!0,enableDamping:e.controlDamping}),t[52]=e.controlDamping,t[53]=Re):Re=t[53];let Fe;t[54]===Symbol.for("react.memo_cache_sentinel")?(Fe=[80,80],t[54]=Fe):Fe=t[54];let He,Qe;t[55]===Symbol.for("react.memo_cache_sentinel")?(He=h.jsx(ad,{alignment:"bottom-right",margin:Fe,children:h.jsx(ld,{axisColors:["#9d4b4b","#2f7f4f","#3b5b9d"],labelColor:"white"})}),Qe=h.jsx(ww,{controlsRef:s}),t[55]=He,t[56]=Qe):(He=t[55],Qe=t[56]);let Be;t[57]!==o?(Be=o&&h.jsx(hl,{selection:o,color:16753920,scaleFactor:1.1}),t[57]=o,t[58]=Be):Be=t[58];let je;t[59]!==r?(je=r&&h.jsx(hl,{selection:r,color:65535,scaleFactor:1.1}),t[59]=r,t[60]=je):je=t[60];let Ce;t[61]!==k||t[62]!==A||t[63]!==B||t[64]!==W||t[65]!==te||t[66]!==ie||t[67]!==Re||t[68]!==Be||t[69]!==je||t[70]!==_?(Ce=h.jsxs(cd,{className:_,camera:T,shadows:!0,dpr:w,gl:v,onPointerMissed:k,children:[A,N,C,O,D,B,W,te,q,ie,Re,He,Qe,Be,je]}),t[61]=k,t[62]=A,t[63]=B,t[64]=W,t[65]=te,t[66]=ie,t[67]=Re,t[68]=Be,t[69]=je,t[70]=_,t[71]=Ce):Ce=t[71];let Ue;t[72]===Symbol.for("react.memo_cache_sentinel")?(Ue=h.jsx(Jb,{}),t[72]=Ue):Ue=t[72];let mt;t[73]!==u?(mt=()=>{f(u==="world"?"local":"world")},t[73]=u,t[74]=mt):mt=t[74];let Je;t[75]!==u?(Je=h.jsx(cn,{children:u==="world"?h.jsx(Rf,{}):h.jsx(Pf,{})}),t[75]=u,t[76]=Je):Je=t[76];let et;t[77]!==mt||t[78]!==Je?(et=h.jsx(ze,{variant:"secondary",size:"icon",asChild:!0,onClick:mt,children:Je}),t[77]=mt,t[78]=Je,t[79]=et):et=t[79];const Ht=u==="world"?"World Space":"Local Space";let gt;t[80]===Symbol.for("react.memo_cache_sentinel")?(gt=h.jsx("kbd",{className:"text-muted-foreground ml-1",children:"X"}),t[80]=gt):gt=t[80];let yt;t[81]!==Ht?(yt=h.jsxs(un,{children:[Ht,gt]}),t[81]=Ht,t[82]=yt):yt=t[82];let tt;t[83]!==et||t[84]!==yt?(tt=h.jsxs(ln,{children:[et,yt]}),t[83]=et,t[84]=yt,t[85]=tt):tt=t[85];const Xt=l==="translate";let Bt;t[86]===Symbol.for("react.memo_cache_sentinel")?(Bt=()=>c("translate"),t[86]=Bt):Bt=t[86];let bt;t[87]===Symbol.for("react.memo_cache_sentinel")?(bt=h.jsx(cn,{children:h.jsx($f,{})}),t[87]=bt):bt=t[87];let Ct;t[88]!==Xt?(Ct=h.jsx(dl,{pressed:Xt,onClick:Bt,asChild:!0,children:bt}),t[88]=Xt,t[89]=Ct):Ct=t[89];let wt;t[90]===Symbol.for("react.memo_cache_sentinel")?(wt=h.jsxs(un,{children:["Translate Mode",h.jsx("kbd",{className:"text-muted-foreground ml-1",children:"V"})]}),t[90]=wt):wt=t[90];let Ot;t[91]!==Ct?(Ot=h.jsxs(ln,{children:[Ct,wt]}),t[91]=Ct,t[92]=Ot):Ot=t[92];const jt=l==="rotate";let vt;t[93]===Symbol.for("react.memo_cache_sentinel")?(vt=()=>c("rotate"),t[93]=vt):vt=t[93];let Ut;t[94]===Symbol.for("react.memo_cache_sentinel")?(Ut=h.jsx(cn,{children:h.jsx(Df,{})}),t[94]=Ut):Ut=t[94];let It;t[95]!==jt?(It=h.jsx(dl,{pressed:jt,onClick:vt,asChild:!0,children:Ut}),t[95]=jt,t[96]=It):It=t[96];let xt;t[97]===Symbol.for("react.memo_cache_sentinel")?(xt=h.jsxs(un,{children:["Rotate Mode",h.jsx("kbd",{className:"text-muted-foreground ml-1",children:"R"})]}),t[97]=xt):xt=t[97];let Mt;t[98]!==It?(Mt=h.jsxs(ln,{children:[It,xt]}),t[98]=It,t[99]=Mt):Mt=t[99];let nt;t[100]!==e.distanceSnap||t[101]!==e.setDistanceSnap||t[102]!==l?(nt=l==="translate"&&h.jsx(yw,{value:e.distanceSnap,onChange:e.setDistanceSnap}),t[100]=e.distanceSnap,t[101]=e.setDistanceSnap,t[102]=l,t[103]=nt):nt=t[103];let st;t[104]!==e.angleSnap||t[105]!==e.setAngleSnap||t[106]!==l?(st=l==="rotate"&&h.jsx(gw,{value:e.angleSnap,onChange:e.setAngleSnap}),t[104]=e.angleSnap,t[105]=e.setAngleSnap,t[106]=l,t[107]=st):st=t[107];let rt;t[108]!==tt||t[109]!==Ot||t[110]!==Mt||t[111]!==nt||t[112]!==st?(rt=h.jsxs("div",{className:"absolute top-[8px] left-[8px] flex flex-row gap-[8px]",children:[tt,Ot,Mt,nt,st]}),t[108]=tt,t[109]=Ot,t[110]=Mt,t[111]=nt,t[112]=st,t[113]=rt):rt=t[113];let _t;return t[114]!==Ce||t[115]!==rt?(_t=h.jsxs("div",{className:"relative h-full w-full",children:[Ce,Ue,rt]}),t[114]=Ce,t[115]=rt,t[116]=_t):_t=t[116],_t}function xw(t,e){return t.visible&&h.jsx(Zl,{position:t.position,cellSize:t.cellSize,sectionSize:t.sectionSize,cellThickness:.5,sectionThickness:1.5,cellColor:t.cellColor,sectionColor:Xl(t.cellColor,.5),infiniteGrid:!0,side:Wl,rotation:Nd(t.plane)},e)}function _w(t){const e=L.c(13),{keyframe:n,trackId:s,zoom:r,onUpdate:i}=t,o=P.useRef(null),a=P.useRef(n.time*r);let l;e[0]!==n.id||e[1]!==n.time||e[2]!==i||e[3]!==s||e[4]!==r?(l=y=>{const{movement:g,first:b,last:m}=y,[S]=g;b&&(a.current=n.time*r);let x=a.current+S;if(x=Math.max(0,x),o.current&&(o.current.style.transform=`translateX(${x-n.time*r}px)`),m){const E=Math.round(x/r*10)/10;i(s,n.id,E),o.current&&(o.current.style.transform="translateX(0px)")}return a.current},e[0]=n.id,e[1]=n.time,e[2]=i,e[3]=s,e[4]=r,e[5]=l):l=e[5];const c=vf(l);let u;e[6]!==c?(u=c(),e[6]=c,e[7]=u):u=e[7];const f=`${n.time*r}px`;let d;e[8]!==f?(d={transition:"transform 0.02s ease",left:f},e[8]=f,e[9]=d):d=e[9];let p;return e[10]!==u||e[11]!==d?(p=h.jsx("div",{ref:o,...u,className:"absolute top-1/2 w-4 h-4 bg-blue-500 rounded cursor-grab -translate-y-1/2",style:d}),e[10]=u,e[11]=d,e[12]=p):p=e[12],p}const ku=6048e5,Ew=864e5,pl=Symbol.for("constructDateFrom");function En(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&pl in t?t[pl](e):t instanceof Date?new t.constructor(e):new Date(e)}function At(t,e){return En(e||t,t)}let Sw={};function pi(){return Sw}function Gs(t,e){const n=pi(),s=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,r=At(t,e?.in),i=r.getDay(),o=(i<s?7:0)+i-s;return r.setDate(r.getDate()-o),r.setHours(0,0,0,0),r}function ei(t,e){return Gs(t,{...e,weekStartsOn:1})}function Tu(t,e){const n=At(t,e?.in),s=n.getFullYear(),r=En(n,0);r.setFullYear(s+1,0,4),r.setHours(0,0,0,0);const i=ei(r),o=En(n,0);o.setFullYear(s,0,4),o.setHours(0,0,0,0);const a=ei(o);return n.getTime()>=i.getTime()?s+1:n.getTime()>=a.getTime()?s:s-1}function ml(t){const e=At(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function kw(t,...e){const n=En.bind(null,e.find(s=>typeof s=="object"));return e.map(n)}function gl(t,e){const n=At(t,e?.in);return n.setHours(0,0,0,0),n}function Tw(t,e,n){const[s,r]=kw(n?.in,t,e),i=gl(s),o=gl(r),a=+i-ml(i),l=+o-ml(o);return Math.round((a-l)/Ew)}function Aw(t,e){const n=Tu(t,e),s=En(t,0);return s.setFullYear(n,0,4),s.setHours(0,0,0,0),ei(s)}function Nw(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Cw(t){return!(!Nw(t)&&typeof t!="number"||isNaN(+At(t)))}function Ow(t,e){const n=At(t,e?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const jw={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Iw=(t,e,n)=>{let s;const r=jw[t];return typeof r=="string"?s=r:e===1?s=r.one:s=r.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+s:s+" ago":s};function Li(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const Mw={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Rw={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Pw={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},$w={date:Li({formats:Mw,defaultWidth:"full"}),time:Li({formats:Rw,defaultWidth:"full"}),dateTime:Li({formats:Pw,defaultWidth:"full"})},Dw={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Lw=(t,e,n,s)=>Dw[t];function Os(t){return(e,n)=>{const s=n?.context?String(n.context):"standalone";let r;if(s==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n?.width?String(n.width):o;r=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n?.width?String(n.width):t.defaultWidth;r=t.values[a]||t.values[o]}const i=t.argumentCallback?t.argumentCallback(e):e;return r[i]}}const zw={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Fw={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Bw={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Uw={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Zw={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Vw={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Ww=(t,e)=>{const n=Number(t),s=n%100;if(s>20||s<10)switch(s%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Yw={ordinalNumber:Ww,era:Os({values:zw,defaultWidth:"wide"}),quarter:Os({values:Fw,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Os({values:Bw,defaultWidth:"wide"}),day:Os({values:Uw,defaultWidth:"wide"}),dayPeriod:Os({values:Zw,defaultWidth:"wide",formattingValues:Vw,defaultFormattingWidth:"wide"})};function js(t){return(e,n={})=>{const s=n.width,r=s&&t.matchPatterns[s]||t.matchPatterns[t.defaultMatchWidth],i=e.match(r);if(!i)return null;const o=i[0],a=s&&t.parsePatterns[s]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?qw(a,f=>f.test(o)):Gw(a,f=>f.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const u=e.slice(o.length);return{value:c,rest:u}}}function Gw(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function qw(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function Kw(t){return(e,n={})=>{const s=e.match(t.matchPattern);if(!s)return null;const r=s[0],i=e.match(t.parsePattern);if(!i)return null;let o=t.valueCallback?t.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(r.length);return{value:o,rest:a}}}const Hw=/^(\d+)(th|st|nd|rd)?/i,Xw=/\d+/i,Qw={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Jw={any:[/^b/i,/^(a|c)/i]},ev={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},tv={any:[/1/i,/2/i,/3/i,/4/i]},nv={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},sv={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},rv={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},iv={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},ov={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},av={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},lv={ordinalNumber:Kw({matchPattern:Hw,parsePattern:Xw,valueCallback:t=>parseInt(t,10)}),era:js({matchPatterns:Qw,defaultMatchWidth:"wide",parsePatterns:Jw,defaultParseWidth:"any"}),quarter:js({matchPatterns:ev,defaultMatchWidth:"wide",parsePatterns:tv,defaultParseWidth:"any",valueCallback:t=>t+1}),month:js({matchPatterns:nv,defaultMatchWidth:"wide",parsePatterns:sv,defaultParseWidth:"any"}),day:js({matchPatterns:rv,defaultMatchWidth:"wide",parsePatterns:iv,defaultParseWidth:"any"}),dayPeriod:js({matchPatterns:ov,defaultMatchWidth:"any",parsePatterns:av,defaultParseWidth:"any"})},cv={code:"en-US",formatDistance:Iw,formatLong:$w,formatRelative:Lw,localize:Yw,match:lv,options:{weekStartsOn:0,firstWeekContainsDate:1}};function uv(t,e){const n=At(t,e?.in);return Tw(n,Ow(n))+1}function fv(t,e){const n=At(t,e?.in),s=+ei(n)-+Aw(n);return Math.round(s/ku)+1}function Au(t,e){const n=At(t,e?.in),s=n.getFullYear(),r=pi(),i=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,o=En(e?.in||t,0);o.setFullYear(s+1,0,i),o.setHours(0,0,0,0);const a=Gs(o,e),l=En(e?.in||t,0);l.setFullYear(s,0,i),l.setHours(0,0,0,0);const c=Gs(l,e);return+n>=+a?s+1:+n>=+c?s:s-1}function hv(t,e){const n=pi(),s=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,r=Au(t,e),i=En(e?.in||t,0);return i.setFullYear(r,0,s),i.setHours(0,0,0,0),Gs(i,e)}function dv(t,e){const n=At(t,e?.in),s=+Gs(n,e)-+hv(n,e);return Math.round(s/ku)+1}function he(t,e){const n=t<0?"-":"",s=Math.abs(t).toString().padStart(e,"0");return n+s}const sn={y(t,e){const n=t.getFullYear(),s=n>0?n:1-n;return he(e==="yy"?s%100:s,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):he(n+1,2)},d(t,e){return he(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return he(t.getHours()%12||12,e.length)},H(t,e){return he(t.getHours(),e.length)},m(t,e){return he(t.getMinutes(),e.length)},s(t,e){return he(t.getSeconds(),e.length)},S(t,e){const n=e.length,s=t.getMilliseconds(),r=Math.trunc(s*Math.pow(10,n-3));return he(r,e.length)}},Hn={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},yl={G:function(t,e,n){const s=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(s,{width:"abbreviated"});case"GGGGG":return n.era(s,{width:"narrow"});case"GGGG":default:return n.era(s,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const s=t.getFullYear(),r=s>0?s:1-s;return n.ordinalNumber(r,{unit:"year"})}return sn.y(t,e)},Y:function(t,e,n,s){const r=Au(t,s),i=r>0?r:1-r;if(e==="YY"){const o=i%100;return he(o,2)}return e==="Yo"?n.ordinalNumber(i,{unit:"year"}):he(i,e.length)},R:function(t,e){const n=Tu(t);return he(n,e.length)},u:function(t,e){const n=t.getFullYear();return he(n,e.length)},Q:function(t,e,n){const s=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(s);case"QQ":return he(s,2);case"Qo":return n.ordinalNumber(s,{unit:"quarter"});case"QQQ":return n.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(s,{width:"wide",context:"formatting"})}},q:function(t,e,n){const s=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(s);case"qq":return he(s,2);case"qo":return n.ordinalNumber(s,{unit:"quarter"});case"qqq":return n.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(s,{width:"wide",context:"standalone"})}},M:function(t,e,n){const s=t.getMonth();switch(e){case"M":case"MM":return sn.M(t,e);case"Mo":return n.ordinalNumber(s+1,{unit:"month"});case"MMM":return n.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(s,{width:"wide",context:"formatting"})}},L:function(t,e,n){const s=t.getMonth();switch(e){case"L":return String(s+1);case"LL":return he(s+1,2);case"Lo":return n.ordinalNumber(s+1,{unit:"month"});case"LLL":return n.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(s,{width:"wide",context:"standalone"})}},w:function(t,e,n,s){const r=dv(t,s);return e==="wo"?n.ordinalNumber(r,{unit:"week"}):he(r,e.length)},I:function(t,e,n){const s=fv(t);return e==="Io"?n.ordinalNumber(s,{unit:"week"}):he(s,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):sn.d(t,e)},D:function(t,e,n){const s=uv(t);return e==="Do"?n.ordinalNumber(s,{unit:"dayOfYear"}):he(s,e.length)},E:function(t,e,n){const s=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(s,{width:"short",context:"formatting"});case"EEEE":default:return n.day(s,{width:"wide",context:"formatting"})}},e:function(t,e,n,s){const r=t.getDay(),i=(r-s.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return he(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(r,{width:"short",context:"formatting"});case"eeee":default:return n.day(r,{width:"wide",context:"formatting"})}},c:function(t,e,n,s){const r=t.getDay(),i=(r-s.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return he(i,e.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(r,{width:"narrow",context:"standalone"});case"cccccc":return n.day(r,{width:"short",context:"standalone"});case"cccc":default:return n.day(r,{width:"wide",context:"standalone"})}},i:function(t,e,n){const s=t.getDay(),r=s===0?7:s;switch(e){case"i":return String(r);case"ii":return he(r,e.length);case"io":return n.ordinalNumber(r,{unit:"day"});case"iii":return n.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(s,{width:"short",context:"formatting"});case"iiii":default:return n.day(s,{width:"wide",context:"formatting"})}},a:function(t,e,n){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(t,e,n){const s=t.getHours();let r;switch(s===12?r=Hn.noon:s===0?r=Hn.midnight:r=s/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(t,e,n){const s=t.getHours();let r;switch(s>=17?r=Hn.evening:s>=12?r=Hn.afternoon:s>=4?r=Hn.morning:r=Hn.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let s=t.getHours()%12;return s===0&&(s=12),n.ordinalNumber(s,{unit:"hour"})}return sn.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):sn.H(t,e)},K:function(t,e,n){const s=t.getHours()%12;return e==="Ko"?n.ordinalNumber(s,{unit:"hour"}):he(s,e.length)},k:function(t,e,n){let s=t.getHours();return s===0&&(s=24),e==="ko"?n.ordinalNumber(s,{unit:"hour"}):he(s,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):sn.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):sn.s(t,e)},S:function(t,e){return sn.S(t,e)},X:function(t,e,n){const s=t.getTimezoneOffset();if(s===0)return"Z";switch(e){case"X":return wl(s);case"XXXX":case"XX":return Tn(s);case"XXXXX":case"XXX":default:return Tn(s,":")}},x:function(t,e,n){const s=t.getTimezoneOffset();switch(e){case"x":return wl(s);case"xxxx":case"xx":return Tn(s);case"xxxxx":case"xxx":default:return Tn(s,":")}},O:function(t,e,n){const s=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+bl(s,":");case"OOOO":default:return"GMT"+Tn(s,":")}},z:function(t,e,n){const s=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+bl(s,":");case"zzzz":default:return"GMT"+Tn(s,":")}},t:function(t,e,n){const s=Math.trunc(+t/1e3);return he(s,e.length)},T:function(t,e,n){return he(+t,e.length)}};function bl(t,e=""){const n=t>0?"-":"+",s=Math.abs(t),r=Math.trunc(s/60),i=s%60;return i===0?n+String(r):n+String(r)+e+he(i,2)}function wl(t,e){return t%60===0?(t>0?"-":"+")+he(Math.abs(t)/60,2):Tn(t,e)}function Tn(t,e=""){const n=t>0?"-":"+",s=Math.abs(t),r=he(Math.trunc(s/60),2),i=he(s%60,2);return n+r+e+i}const vl=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Nu=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},pv=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],s=n[1],r=n[2];if(!r)return vl(t,e);let i;switch(s){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",vl(s,e)).replace("{{time}}",Nu(r,e))},mv={p:Nu,P:pv},gv=/^D+$/,yv=/^Y+$/,bv=["D","DD","YY","YYYY"];function wv(t){return gv.test(t)}function vv(t){return yv.test(t)}function xv(t,e,n){const s=_v(t,e,n);if(console.warn(s),bv.includes(t))throw new RangeError(s)}function _v(t,e,n){const s=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${s} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Ev=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Sv=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,kv=/^'([^]*?)'?$/,Tv=/''/g,Av=/[a-zA-Z]/;function Er(t,e,n){const s=pi(),r=s.locale??cv,i=s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,o=s.weekStartsOn??s.locale?.options?.weekStartsOn??0,a=At(t,n?.in);if(!Cw(a))throw new RangeError("Invalid time value");let l=e.match(Sv).map(u=>{const f=u[0];if(f==="p"||f==="P"){const d=mv[f];return d(u,r.formatLong)}return u}).join("").match(Ev).map(u=>{if(u==="''")return{isToken:!1,value:"'"};const f=u[0];if(f==="'")return{isToken:!1,value:Nv(u)};if(yl[f])return{isToken:!0,value:u};if(f.match(Av))throw new RangeError("Format string contains an unescaped latin alphabet character `"+f+"`");return{isToken:!1,value:u}});r.localize.preprocessor&&(l=r.localize.preprocessor(a,l));const c={firstWeekContainsDate:i,weekStartsOn:o,locale:r};return l.map(u=>{if(!u.isToken)return u.value;const f=u.value;(vv(f)||wv(f))&&xv(f,e,String(t));const d=yl[f[0]];return d(a,f,r.localize,c)}).join("")}function Nv(t){const e=t.match(kv);return e?e[1].replace(Tv,"'"):t}function Le(t,e,n,s){return new(n||(n=Promise))((function(r,i){function o(c){try{l(s.next(c))}catch(u){i(u)}}function a(c){try{l(s.throw(c))}catch(u){i(u)}}function l(c){var u;c.done?r(c.value):(u=c.value,u instanceof n?u:new n((function(f){f(u)}))).then(o,a)}l((s=s.apply(t,e||[])).next())}))}class tr{constructor(){this.listeners={}}on(e,n,s){if(this.listeners[e]||(this.listeners[e]=new Set),s?.once){const r=(...i)=>{this.un(e,r),n(...i)};return this.listeners[e].add(r),()=>this.un(e,r)}return this.listeners[e].add(n),()=>this.un(e,n)}un(e,n){var s;(s=this.listeners[e])===null||s===void 0||s.delete(n)}once(e,n){return this.on(e,n,{once:!0})}unAll(){this.listeners={}}emit(e,...n){this.listeners[e]&&this.listeners[e].forEach((s=>s(...n)))}}const Sr={decode:function(t,e){return Le(this,void 0,void 0,(function*(){const n=new AudioContext({sampleRate:e});try{return yield n.decodeAudioData(t)}finally{n.close()}}))},createBuffer:function(t,e){if(!t||t.length===0)throw new Error("channelData must be a non-empty array");if(e<=0)throw new Error("duration must be greater than 0");if(typeof t[0]=="number"&&(t=[t]),!t[0]||t[0].length===0)throw new Error("channelData must contain non-empty channel arrays");return(function(n){const s=n[0];if(s.some((r=>r>1||r<-1))){const r=s.length;let i=0;for(let o=0;o<r;o++){const a=Math.abs(s[o]);a>i&&(i=a)}for(const o of n)for(let a=0;a<r;a++)o[a]/=i}})(t),{duration:e,length:t[0].length,sampleRate:t[0].length/e,numberOfChannels:t.length,getChannelData:n=>t?.[n],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function Cu(t,e){const n=e.xmlns?document.createElementNS(e.xmlns,t):document.createElement(t);for(const[s,r]of Object.entries(e))if(s==="children"&&r)for(const[i,o]of Object.entries(r))o instanceof Node?n.appendChild(o):typeof o=="string"?n.appendChild(document.createTextNode(o)):n.appendChild(Cu(i,o));else s==="style"?Object.assign(n.style,r):s==="textContent"?n.textContent=r:n.setAttribute(s,r.toString());return n}function xl(t,e,n){const s=Cu(t,e||{});return n?.appendChild(s),s}var Cv=Object.freeze({__proto__:null,createElement:xl,default:xl});const Ov={fetchBlob:function(t,e,n){return Le(this,void 0,void 0,(function*(){const s=yield fetch(t,n);if(s.status>=400)throw new Error(`Failed to fetch ${t}: ${s.status} (${s.statusText})`);return(function(r,i){Le(this,void 0,void 0,(function*(){if(!r.body||!r.headers)return;const o=r.body.getReader(),a=Number(r.headers.get("Content-Length"))||0;let l=0,c=0;const u=d=>Le(this,void 0,void 0,(function*(){l+=d?.length||0;const p=Math.round(l/a*100);i(p)})),f=()=>Le(this,void 0,void 0,(function*(){if(c++>1e5)return void console.error("Fetcher: Maximum iterations reached, stopping read loop");let d;try{d=yield o.read()}catch{return}d.done||(u(d.value),yield f())}));f()}))})(s.clone(),e),s.blob()}))}};class jv extends tr{constructor(e){super(),this.isExternalMedia=!1,e.media?(this.media=e.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),e.mediaControls&&(this.media.controls=!0),e.autoplay&&(this.media.autoplay=!0),e.playbackRate!=null&&this.onMediaEvent("canplay",(()=>{e.playbackRate!=null&&(this.media.playbackRate=e.playbackRate)}),{once:!0})}onMediaEvent(e,n,s){return this.media.addEventListener(e,n,s),()=>this.media.removeEventListener(e,n,s)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const e=this.getSrc();e.startsWith("blob:")&&URL.revokeObjectURL(e)}canPlayType(e){return this.media.canPlayType(e)!==""}setSrc(e,n){const s=this.getSrc();if(e&&s===e)return;this.revokeSrc();const r=n instanceof Blob&&(this.canPlayType(n.type)||!e)?URL.createObjectURL(n):e;if(s&&this.media.removeAttribute("src"),r||e)try{this.media.src=r}catch{this.media.src=e}}destroy(){this.isExternalMedia||(this.media.pause(),this.revokeSrc(),this.media.removeAttribute("src"),this.media.load(),this.media.remove())}setMediaElement(e){this.media=e}play(){return Le(this,void 0,void 0,(function*(){try{return yield this.media.play()}catch(e){if(e instanceof DOMException&&e.name==="AbortError")return;throw e}}))}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(e){this.media.currentTime=Math.max(0,Math.min(e,this.getDuration()))}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(e){this.media.volume=e}getMuted(){return this.media.muted}setMuted(e){this.media.muted=e}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(e,n){n!=null&&(this.media.preservesPitch=n),this.media.playbackRate=e}getMediaElement(){return this.media}setSinkId(e){return this.media.setSinkId(e)}}class vs extends tr{constructor(e,n){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.unsubscribeOnScroll=[],this.dragUnsubscribe=null,this.subscriptions=[],this.options=e;const s=this.parentFromOptionsContainer(e.container);this.parent=s;const[r,i]=this.initHtml();s.appendChild(r),this.container=r,this.scrollContainer=i.querySelector(".scroll"),this.wrapper=i.querySelector(".wrapper"),this.canvasWrapper=i.querySelector(".canvases"),this.progressWrapper=i.querySelector(".progress"),this.cursor=i.querySelector(".cursor"),n&&i.appendChild(n),this.initEvents()}parentFromOptionsContainer(e){let n;if(typeof e=="string"?n=document.querySelector(e):e instanceof HTMLElement&&(n=e),!n)throw new Error("Container not found");return n}initEvents(){const e=n=>{const s=this.wrapper.getBoundingClientRect(),r=n.clientX-s.left,i=n.clientY-s.top;return[r/s.width,i/s.height]};if(this.wrapper.addEventListener("click",(n=>{const[s,r]=e(n);this.emit("click",s,r)})),this.wrapper.addEventListener("dblclick",(n=>{const[s,r]=e(n);this.emit("dblclick",s,r)})),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollContainer.addEventListener("scroll",(()=>{const{scrollLeft:n,scrollWidth:s,clientWidth:r}=this.scrollContainer,i=n/s,o=(n+r)/s;this.emit("scroll",i,o,n,n+r)})),typeof ResizeObserver=="function"){const n=this.createDelay(100);this.resizeObserver=new ResizeObserver((()=>{n().then((()=>this.onContainerResize())).catch((()=>{}))})),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const e=this.parent.clientWidth;e===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=e,this.reRender())}initDrag(){this.dragUnsubscribe||(this.dragUnsubscribe=(function(e,n,s,r,i=3,o=0,a=100){if(!e)return()=>{};const l=matchMedia("(pointer: coarse)").matches;let c=()=>{};const u=f=>{if(f.button!==o)return;f.preventDefault(),f.stopPropagation();let d=f.clientX,p=f.clientY,y=!1;const g=Date.now(),b=_=>{if(_.preventDefault(),_.stopPropagation(),l&&Date.now()-g<a)return;const T=_.clientX,w=_.clientY,v=T-d,k=w-p;if(y||Math.abs(v)>i||Math.abs(k)>i){const A=e.getBoundingClientRect(),{left:N,top:C}=A;y||(s?.(d-N,p-C),y=!0),n(v,k,T-N,w-C),d=T,p=w}},m=_=>{if(y){const T=_.clientX,w=_.clientY,v=e.getBoundingClientRect(),{left:k,top:A}=v;r?.(T-k,w-A)}c()},S=_=>{_.relatedTarget&&_.relatedTarget!==document.documentElement||m(_)},x=_=>{y&&(_.stopPropagation(),_.preventDefault())},E=_=>{y&&_.preventDefault()};document.addEventListener("pointermove",b),document.addEventListener("pointerup",m),document.addEventListener("pointerout",S),document.addEventListener("pointercancel",S),document.addEventListener("touchmove",E,{passive:!1}),document.addEventListener("click",x,{capture:!0}),c=()=>{document.removeEventListener("pointermove",b),document.removeEventListener("pointerup",m),document.removeEventListener("pointerout",S),document.removeEventListener("pointercancel",S),document.removeEventListener("touchmove",E),setTimeout((()=>{document.removeEventListener("click",x,{capture:!0})}),10)}};return e.addEventListener("pointerdown",u),()=>{c(),e.removeEventListener("pointerdown",u)}})(this.wrapper,((e,n,s)=>{this.emit("drag",Math.max(0,Math.min(1,s/this.wrapper.getBoundingClientRect().width)))}),(e=>{this.isDragging=!0,this.emit("dragstart",Math.max(0,Math.min(1,e/this.wrapper.getBoundingClientRect().width)))}),(e=>{this.isDragging=!1,this.emit("dragend",Math.max(0,Math.min(1,e/this.wrapper.getBoundingClientRect().width)))})),this.subscriptions.push(this.dragUnsubscribe))}getHeight(e,n){var s;const r=((s=this.audioData)===null||s===void 0?void 0:s.numberOfChannels)||1;if(e==null)return 128;if(!isNaN(Number(e)))return Number(e);if(e==="auto"){const i=this.parent.clientHeight||128;return n?.every((o=>!o.overlay))?i/r:i}return 128}initHtml(){const e=document.createElement("div"),n=e.attachShadow({mode:"open"}),s=this.options.cspNonce&&typeof this.options.cspNonce=="string"?this.options.cspNonce.replace(/"/g,""):"";return n.innerHTML=`
      <style${s?` nonce="${s}"`:""}>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[e,n]}setOptions(e){if(this.options.container!==e.container){const n=this.parentFromOptionsContainer(e.container);n.appendChild(this.container),this.parent=n}e.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=e,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(e){this.scrollContainer.scrollLeft=e}setScrollPercentage(e){const{scrollWidth:n}=this.scrollContainer,s=n*e;this.setScroll(s)}destroy(){var e;this.subscriptions.forEach((n=>n())),this.container.remove(),this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),(e=this.unsubscribeOnScroll)===null||e===void 0||e.forEach((n=>n())),this.unsubscribeOnScroll=[]}createDelay(e=10){let n,s;const r=()=>{n&&(clearTimeout(n),n=void 0),s&&(s(),s=void 0)};return this.timeouts.push(r),()=>new Promise(((i,o)=>{r(),s=o,n=setTimeout((()=>{n=void 0,s=void 0,i()}),e)}))}convertColorValues(e){if(!Array.isArray(e))return e||"";if(e.length===0)return"#999";if(e.length<2)return e[0]||"";const n=document.createElement("canvas"),s=n.getContext("2d"),r=n.height*(window.devicePixelRatio||1),i=s.createLinearGradient(0,0,0,r),o=1/(e.length-1);return e.forEach(((a,l)=>{const c=l*o;i.addColorStop(c,a)})),i}getPixelRatio(){return Math.max(1,window.devicePixelRatio||1)}renderBarWaveform(e,n,s,r){const i=e[0],o=e[1]||e[0],a=i.length,{width:l,height:c}=s.canvas,u=c/2,f=this.getPixelRatio(),d=n.barWidth?n.barWidth*f:1,p=n.barGap?n.barGap*f:n.barWidth?d/2:0,y=n.barRadius||0,g=l/(d+p)/a,b=y&&"roundRect"in s?"roundRect":"rect";s.beginPath();let m=0,S=0,x=0;for(let E=0;E<=a;E++){const _=Math.round(E*g);if(_>m){const v=Math.round(S*u*r),k=v+Math.round(x*u*r)||1;let A=u-v;n.barAlign==="top"?A=0:n.barAlign==="bottom"&&(A=c-k),s[b](m*(d+p),A,d,k,y),m=_,S=0,x=0}const T=Math.abs(i[E]||0),w=Math.abs(o[E]||0);T>S&&(S=T),w>x&&(x=w)}s.fill(),s.closePath()}renderLineWaveform(e,n,s,r){const i=o=>{const a=e[o]||e[0],l=a.length,{height:c}=s.canvas,u=c/2,f=s.canvas.width/l;s.moveTo(0,u);let d=0,p=0;for(let y=0;y<=l;y++){const g=Math.round(y*f);if(g>d){const m=u+(Math.round(p*u*r)||1)*(o===0?-1:1);s.lineTo(d,m),d=g,p=0}const b=Math.abs(a[y]||0);b>p&&(p=b)}s.lineTo(d,u)};s.beginPath(),i(0),i(1),s.fill(),s.closePath()}renderWaveform(e,n,s){if(s.fillStyle=this.convertColorValues(n.waveColor),n.renderFunction)return void n.renderFunction(e,s);let r=n.barHeight||1;if(n.normalize){const i=Array.from(e[0]).reduce(((o,a)=>Math.max(o,Math.abs(a))),0);r=i?r/i:r}n.barWidth||n.barGap||n.barAlign?this.renderBarWaveform(e,n,s,r):this.renderLineWaveform(e,n,s,r)}renderSingleCanvas(e,n,s,r,i,o,a){const l=this.getPixelRatio(),c=document.createElement("canvas");c.width=Math.round(s*l),c.height=Math.round(r*l),c.style.width=`${s}px`,c.style.height=`${r}px`,c.style.left=`${Math.round(i)}px`,o.appendChild(c);const u=c.getContext("2d");if(this.renderWaveform(e,n,u),c.width>0&&c.height>0){const f=c.cloneNode(),d=f.getContext("2d");d.drawImage(c,0,0),d.globalCompositeOperation="source-in",d.fillStyle=this.convertColorValues(n.progressColor),d.fillRect(0,0,c.width,c.height),a.appendChild(f)}}renderMultiCanvas(e,n,s,r,i,o){const a=this.getPixelRatio(),{clientWidth:l}=this.scrollContainer,c=s/a;let u=Math.min(vs.MAX_CANVAS_WIDTH,l,c),f={};if(n.barWidth||n.barGap){const b=n.barWidth||.5,m=b+(n.barGap||b/2);u%m!=0&&(u=Math.floor(u/m)*m)}if(u===0)return;const d=b=>{if(b<0||b>=p||f[b])return;f[b]=!0;const m=b*u;let S=Math.min(c-m,u);if(n.barWidth||n.barGap){const E=n.barWidth||.5,_=E+(n.barGap||E/2);S=Math.floor(S/_)*_}if(S<=0)return;const x=e.map((E=>{const _=Math.floor(m/c*E.length),T=Math.floor((m+S)/c*E.length);return E.slice(_,T)}));this.renderSingleCanvas(x,n,S,r,m,i,o)},p=Math.ceil(c/u);if(!this.isScrollable){for(let b=0;b<p;b++)d(b);return}const y=this.scrollContainer.scrollLeft/c,g=Math.floor(y*p);if(d(g-1),d(g),d(g+1),p>1){const b=this.on("scroll",(()=>{const{scrollLeft:m}=this.scrollContainer,S=Math.floor(m/c*p);Object.keys(f).length>vs.MAX_NODES&&(i.innerHTML="",o.innerHTML="",f={}),d(S-1),d(S),d(S+1)}));this.unsubscribeOnScroll.push(b)}}renderChannel(e,n,s,r){var{overlay:i}=n,o=(function(u,f){var d={};for(var p in u)Object.prototype.hasOwnProperty.call(u,p)&&f.indexOf(p)<0&&(d[p]=u[p]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function"){var y=0;for(p=Object.getOwnPropertySymbols(u);y<p.length;y++)f.indexOf(p[y])<0&&Object.prototype.propertyIsEnumerable.call(u,p[y])&&(d[p[y]]=u[p[y]])}return d})(n,["overlay"]);const a=document.createElement("div"),l=this.getHeight(o.height,o.splitChannels);a.style.height=`${l}px`,i&&r>0&&(a.style.marginTop=`-${l}px`),this.canvasWrapper.style.minHeight=`${l}px`,this.canvasWrapper.appendChild(a);const c=a.cloneNode();this.progressWrapper.appendChild(c),this.renderMultiCanvas(e,o,s,l,a,c)}render(e){return Le(this,void 0,void 0,(function*(){var n;this.timeouts.forEach((l=>l())),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const s=this.getPixelRatio(),r=this.scrollContainer.clientWidth,i=Math.ceil(e.duration*(this.options.minPxPerSec||0));this.isScrollable=i>r;const o=this.options.fillParent&&!this.isScrollable,a=(o?r:i)*s;if(this.wrapper.style.width=o?"100%":`${i}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=e,this.emit("render"),this.options.splitChannels)for(let l=0;l<e.numberOfChannels;l++){const c=Object.assign(Object.assign({},this.options),(n=this.options.splitChannels)===null||n===void 0?void 0:n[l]);this.renderChannel([e.getChannelData(l)],c,a,l)}else{const l=[e.getChannelData(0)];e.numberOfChannels>1&&l.push(e.getChannelData(1)),this.renderChannel(l,this.options,a,0)}Promise.resolve().then((()=>this.emit("rendered")))}))}reRender(){if(this.unsubscribeOnScroll.forEach((s=>s())),this.unsubscribeOnScroll=[],!this.audioData)return;const{scrollWidth:e}=this.scrollContainer,{right:n}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&e!==this.scrollContainer.scrollWidth){const{right:s}=this.progressWrapper.getBoundingClientRect();let r=s-n;r*=2,r=r<0?Math.floor(r):Math.ceil(r),r/=2,this.scrollContainer.scrollLeft+=r}}zoom(e){this.options.minPxPerSec=e,this.reRender()}scrollIntoView(e,n=!1){const{scrollLeft:s,scrollWidth:r,clientWidth:i}=this.scrollContainer,o=e*r,a=s,l=s+i,c=i/2;if(this.isDragging)o+30>l?this.scrollContainer.scrollLeft+=30:o-30<a&&(this.scrollContainer.scrollLeft-=30);else{(o<a||o>l)&&(this.scrollContainer.scrollLeft=o-(this.options.autoCenter?c:0));const u=o-s-c;n&&this.options.autoCenter&&u>0&&(this.scrollContainer.scrollLeft+=Math.min(u,10))}{const u=this.scrollContainer.scrollLeft,f=u/r,d=(u+i)/r;this.emit("scroll",f,d,u,u+i)}}renderProgress(e,n){if(isNaN(e))return;const s=100*e;this.canvasWrapper.style.clipPath=`polygon(${s}% 0%, 100% 0%, 100% 100%, ${s}% 100%)`,this.progressWrapper.style.width=`${s}%`,this.cursor.style.left=`${s}%`,this.cursor.style.transform=this.options.cursorWidth?`translateX(-${e*this.options.cursorWidth}px)`:"",this.isScrollable&&this.options.autoScroll&&this.scrollIntoView(e,n)}exportImage(e,n,s){return Le(this,void 0,void 0,(function*(){const r=this.canvasWrapper.querySelectorAll("canvas");if(!r.length)throw new Error("No waveform data");if(s==="dataURL"){const i=Array.from(r).map((o=>o.toDataURL(e,n)));return Promise.resolve(i)}return Promise.all(Array.from(r).map((i=>new Promise(((o,a)=>{i.toBlob((l=>{l?o(l):a(new Error("Could not export image"))}),e,n)})))))}))}}vs.MAX_CANVAS_WIDTH=8e3,vs.MAX_NODES=10;class Iv extends tr{constructor(){super(...arguments),this.animationFrameId=null,this.isRunning=!1}start(){if(this.isRunning)return;this.isRunning=!0;const e=()=>{this.isRunning&&(this.emit("tick"),this.animationFrameId=requestAnimationFrame(e))};e()}stop(){this.isRunning=!1,this.animationFrameId!==null&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)}destroy(){this.stop()}}class zi extends tr{constructor(e=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=e,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return Le(this,void 0,void 0,(function*(){}))}get src(){return this.currentSrc}set src(e){if(this.currentSrc=e,this._duration=void 0,!e)return this.buffer=null,void this.emit("emptied");fetch(e).then((n=>{if(n.status>=400)throw new Error(`Failed to fetch ${e}: ${n.status} (${n.statusText})`);return n.arrayBuffer()})).then((n=>this.currentSrc!==e?null:this.audioContext.decodeAudioData(n))).then((n=>{this.currentSrc===e&&(this.buffer=n,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())}))}_play(){if(!this.paused)return;this.paused=!1,this.bufferNode&&(this.bufferNode.onended=null,this.bufferNode.disconnect()),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let e=this.playedDuration*this._playbackRate;(e>=this.duration||e<0)&&(e=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,e),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var e;this.paused=!0,(e=this.bufferNode)===null||e===void 0||e.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return Le(this,void 0,void 0,(function*(){this.paused&&(this._play(),this.emit("play"))}))}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(e){const n=e-this.currentTime,s=this.bufferNode;s?.stop(this.audioContext.currentTime+n),s?.addEventListener("ended",(()=>{s===this.bufferNode&&(this.bufferNode=null,this.pause())}),{once:!0})}setSinkId(e){return Le(this,void 0,void 0,(function*(){return this.audioContext.setSinkId(e)}))}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this.bufferNode&&(this.bufferNode.playbackRate.value=e)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(e){const n=!this.paused;n&&this._pause(),this.playedDuration=e/this._playbackRate,n&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var e,n;return(e=this._duration)!==null&&e!==void 0?e:((n=this.buffer)===null||n===void 0?void 0:n.duration)||0}set duration(e){this._duration=e}get volume(){return this.gainNode.gain.value}set volume(e){this.gainNode.gain.value=e,this.emit("volumechange")}get muted(){return this._muted}set muted(e){this._muted!==e&&(this._muted=e,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(e){return/^(audio|video)\//.test(e)}getGainNode(){return this.gainNode}getChannelData(){const e=[];if(!this.buffer)return e;const n=this.buffer.numberOfChannels;for(let s=0;s<n;s++)e.push(this.buffer.getChannelData(s));return e}removeAttribute(e){switch(e){case"src":this.src="";break;case"playbackRate":this.playbackRate=0;break;case"currentTime":this.currentTime=0;break;case"duration":this.duration=0;break;case"volume":this.volume=0;break;case"muted":this.muted=!1}}}const Mv={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class qs extends jv{static create(e){return new qs(e)}constructor(e){const n=e.media||(e.backend==="WebAudio"?new zi:void 0);super({media:n,mediaControls:e.mediaControls,autoplay:e.autoplay,playbackRate:e.audioRate}),this.plugins=[],this.decodedData=null,this.stopAtPosition=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.options=Object.assign({},Mv,e),this.timer=new Iv;const s=n?void 0:this.getMediaElement();this.renderer=new vs(this.options,s),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const r=this.options.url||this.getSrc()||"";Promise.resolve().then((()=>{this.emit("init");const{peaks:i,duration:o}=this.options;(r||i&&o)&&this.load(r,i,o).catch((a=>{console.error("WaveSurfer initial load error:",a)}))}))}updateProgress(e=this.getCurrentTime()){return this.renderer.renderProgress(e/this.getDuration(),this.isPlaying()),e}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",(()=>{if(!this.isSeeking()){const e=this.updateProgress();this.emit("timeupdate",e),this.emit("audioprocess",e),this.stopAtPosition!=null&&this.isPlaying()&&e>=this.stopAtPosition&&this.pause()}})))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",(()=>{const e=this.updateProgress();this.emit("timeupdate",e)})),this.onMediaEvent("play",(()=>{this.emit("play"),this.timer.start()})),this.onMediaEvent("pause",(()=>{this.emit("pause"),this.timer.stop(),this.stopAtPosition=null})),this.onMediaEvent("emptied",(()=>{this.timer.stop(),this.stopAtPosition=null})),this.onMediaEvent("ended",(()=>{this.emit("timeupdate",this.getDuration()),this.emit("finish"),this.stopAtPosition=null})),this.onMediaEvent("seeking",(()=>{this.emit("seeking",this.getCurrentTime())})),this.onMediaEvent("error",(()=>{var e;this.emit("error",(e=this.getMediaElement().error)!==null&&e!==void 0?e:new Error("Media error")),this.stopAtPosition=null})))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",((e,n)=>{this.options.interact&&(this.seekTo(e),this.emit("interaction",e*this.getDuration()),this.emit("click",e,n))})),this.renderer.on("dblclick",((e,n)=>{this.emit("dblclick",e,n)})),this.renderer.on("scroll",((e,n,s,r)=>{const i=this.getDuration();this.emit("scroll",e*i,n*i,s,r)})),this.renderer.on("render",(()=>{this.emit("redraw")})),this.renderer.on("rendered",(()=>{this.emit("redrawcomplete")})),this.renderer.on("dragstart",(e=>{this.emit("dragstart",e)})),this.renderer.on("dragend",(e=>{this.emit("dragend",e)})));{let e;const n=this.renderer.on("drag",(s=>{if(!this.options.interact)return;let r;this.renderer.renderProgress(s),clearTimeout(e),this.isPlaying()?r=0:this.options.dragToSeek===!0?r=200:typeof this.options.dragToSeek=="object"&&this.options.dragToSeek!==void 0&&(r=this.options.dragToSeek.debounceTime),e=setTimeout((()=>{this.seekTo(s)}),r),this.emit("interaction",s*this.getDuration()),this.emit("drag",s)}));this.subscriptions.push((()=>{clearTimeout(e),n()}))}}initPlugins(){var e;!((e=this.options.plugins)===null||e===void 0)&&e.length&&this.options.plugins.forEach((n=>{this.registerPlugin(n)}))}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach((e=>e())),this.mediaSubscriptions=[]}setOptions(e){this.options=Object.assign({},this.options,e),e.duration&&!e.peaks&&(this.decodedData=Sr.createBuffer(this.exportPeaks(),e.duration)),e.peaks&&e.duration&&(this.decodedData=Sr.createBuffer(e.peaks,e.duration)),this.renderer.setOptions(this.options),e.audioRate&&this.setPlaybackRate(e.audioRate),e.mediaControls!=null&&(this.getMediaElement().controls=e.mediaControls)}registerPlugin(e){if(this.plugins.includes(e))return e;e._init(this),this.plugins.push(e);const n=e.once("destroy",(()=>{this.plugins=this.plugins.filter((s=>s!==e)),this.subscriptions=this.subscriptions.filter((s=>s!==n))}));return this.subscriptions.push(n),e}unregisterPlugin(e){this.plugins=this.plugins.filter((n=>n!==e)),e.destroy()}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(e){return this.renderer.setScroll(e)}setScrollTime(e){const n=e/this.getDuration();this.renderer.setScrollPercentage(n)}getActivePlugins(){return this.plugins}loadAudio(e,n,s,r){return Le(this,void 0,void 0,(function*(){var i;if(this.emit("load",e),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,this.stopAtPosition=null,(i=this.abortController)===null||i===void 0||i.abort(),this.abortController=null,!n&&!s){const a=this.options.fetchParams||{};window.AbortController&&!a.signal&&(this.abortController=new AbortController,a.signal=this.abortController.signal);const l=u=>this.emit("loading",u);n=yield Ov.fetchBlob(e,l,a);const c=this.options.blobMimeType;c&&(n=new Blob([n],{type:c}))}this.setSrc(e,n);const o=yield new Promise((a=>{const l=r||this.getDuration();l?a(l):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",(()=>a(this.getDuration())),{once:!0}))}));if(!e&&!n){const a=this.getMediaElement();a instanceof zi&&(a.duration=o)}if(s)this.decodedData=Sr.createBuffer(s,o||0);else if(n){const a=yield n.arrayBuffer();this.decodedData=yield Sr.decode(a,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())}))}load(e,n,s){return Le(this,void 0,void 0,(function*(){try{return yield this.loadAudio(e,void 0,n,s)}catch(r){throw this.emit("error",r),r}}))}loadBlob(e,n,s){return Le(this,void 0,void 0,(function*(){try{return yield this.loadAudio("",e,n,s)}catch(r){throw this.emit("error",r),r}}))}zoom(e){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(e),this.emit("zoom",e)}getDecodedData(){return this.decodedData}exportPeaks({channels:e=2,maxLength:n=8e3,precision:s=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const r=Math.min(e,this.decodedData.numberOfChannels),i=[];for(let o=0;o<r;o++){const a=this.decodedData.getChannelData(o),l=[],c=a.length/n;for(let u=0;u<n;u++){const f=a.slice(Math.floor(u*c),Math.ceil((u+1)*c));let d=0;for(let p=0;p<f.length;p++){const y=f[p];Math.abs(y)>Math.abs(d)&&(d=y)}l.push(Math.round(d*s)/s)}i.push(l)}return i}getDuration(){let e=super.getDuration()||0;return e!==0&&e!==1/0||!this.decodedData||(e=this.decodedData.duration),e}toggleInteraction(e){this.options.interact=e}setTime(e){this.stopAtPosition=null,super.setTime(e),this.updateProgress(e),this.emit("timeupdate",e)}seekTo(e){const n=this.getDuration()*e;this.setTime(n)}play(e,n){const s=Object.create(null,{play:{get:()=>super.play}});return Le(this,void 0,void 0,(function*(){e!=null&&this.setTime(e);const r=yield s.play.call(this);return n!=null&&(this.media instanceof zi?this.media.stopAt(n):this.stopAtPosition=n),r}))}playPause(){return Le(this,void 0,void 0,(function*(){return this.isPlaying()?this.pause():this.play()}))}stop(){this.pause(),this.setTime(0)}skip(e){this.setTime(this.getCurrentTime()+e)}empty(){this.load("",[[0]],.001)}setMediaElement(e){this.unsubscribePlayerEvents(),super.setMediaElement(e),this.initPlayerEvents()}exportImage(){return Le(this,arguments,void 0,(function*(e="image/png",n=1,s="dataURL"){return this.renderer.exportImage(e,n,s)}))}destroy(){var e;this.emit("destroy"),(e=this.abortController)===null||e===void 0||e.abort(),this.plugins.forEach((n=>n.destroy())),this.subscriptions.forEach((n=>n())),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}}qs.BasePlugin=class extends tr{constructor(t){super(),this.subscriptions=[],this.isDestroyed=!1,this.options=t}onInit(){}_init(t){this.isDestroyed&&(this.subscriptions=[],this.isDestroyed=!1),this.wavesurfer=t,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach((t=>t())),this.subscriptions=[],this.isDestroyed=!0,this.wavesurfer=void 0}},qs.dom=Cv;const Rv=[{id:"track3",name:"Audio",type:"audio",audioUrl:"./sample.mp3"},{id:"track1",name:"Position X",type:"animation",keyframes:[{id:"kf1",time:0,value:0},{id:"kf2",time:2,value:100}]},{id:"track2",name:"Opacity",type:"animation",keyframes:[{id:"kf3",time:1,value:0},{id:"kf4",time:3,value:1}]}],Ve=100,_l=64,El=24,Pv=20,$v=400,Dv=()=>{const t=L.c(112),[e,n]=P.useState(Rv),[s,r]=P.useState(0),[i,o]=P.useState(100),[a,l]=P.useState(5),[c,u]=P.useState(!1),[f,d]=P.useState(!1),[p,y]=P.useState(!0),g=P.useRef(null),b=P.useRef(null),m=P.useRef(null),S=P.useRef(null);let x;t[0]!==a||t[1]!==p?(x=(X,se)=>{o(Q=>{const le=Q,ke=Math.max(Pv,Math.min($v,Q*X));if(!m.current)return ke;const fe=m.current;if(p&&se!==void 0){const As=fe.getBoundingClientRect(),kn=se-As.left-Ve,Ai=a*le,da=Math.max(0,Math.min(kn,Ai));let Ni=(fe.scrollLeft+da)/le*ke-da;const gf=Math.max(0,a*ke-fe.clientWidth);Ni=Math.max(0,Math.min(Ni,gf)),fe.scrollLeft=Ni}else{let kn=(fe.scrollLeft+fe.clientWidth/2-Ve)/le*ke-fe.clientWidth/2+Ve;const Ai=Math.max(0,a*ke-fe.clientWidth);kn=Math.max(0,Math.min(kn,Ai)),fe.scrollLeft=kn}return ke})},t[0]=a,t[1]=p,t[2]=x):x=t[2];const E=x;let _;t[3]!==a||t[4]!==i?(_=X=>{if(!S.current)return;const se=S.current.getBoundingClientRect();let Q=X-se.left-Ve;Q=Math.max(0,Q);let le=Q/i;le=Math.max(0,Math.min(a,le)),r(le),b.current?.seekTo(le/a)},t[3]=a,t[4]=i,t[5]=_):_=t[5];const T=_;let w;t[6]!==e?(w=e.find(Lv)?.audioUrl,t[6]=e,t[7]=w):w=t[7];const v=w;let k,A;t[8]!==v?(k=()=>{if(!v||!g.current)return;let X=!0;const se=qs.create({container:g.current,waveColor:"#888",progressColor:"#f0f",height:55,barWidth:2,cursorColor:"transparent"});return b.current=se,se.load(v),se.on("ready",()=>X&&l(se.getDuration())),se.on("interaction",()=>X&&r(se.getCurrentTime())),se.on("audioprocess",()=>X&&r(se.getCurrentTime())),()=>{if(X=!1,b.current){try{b.current.destroy()}catch(Q){const le=Q;if(le instanceof Error){if(le.name!=="AbortError")throw le}else throw le}b.current=null}}},A=[v],t[8]=v,t[9]=k,t[10]=A):(k=t[9],A=t[10]),P.useEffect(k,A);let N,C;t[11]!==s||t[12]!==f||t[13]!==i?(N=()=>{if(!f)return;const X=m.current;if(!X)return;const se=Ve+s*i,Q=X.scrollLeft+Ve,le=Q+X.clientWidth-Ve;(se<Q||se>le)&&(X.scrollLeft=se-X.clientWidth/2)},C=[s,i,f],t[11]=s,t[12]=f,t[13]=i,t[14]=N,t[15]=C):(N=t[14],C=t[15]),P.useEffect(N,C);let O;t[16]===Symbol.for("react.memo_cache_sentinel")?(O=(X,se,Q)=>{n(le=>le.map(ke=>ke.id===X?{...ke,keyframes:ke.keyframes?.map(fe=>fe.id===se?{...fe,time:Q}:fe)}:ke))},t[16]=O):O=t[16];const D=O;let M;t[17]===Symbol.for("react.memo_cache_sentinel")?(M=()=>{b.current&&b.current.play()},t[17]=M):M=t[17];const R=M;let $;t[18]===Symbol.for("react.memo_cache_sentinel")?($=()=>{b.current?.pause()},t[18]=$):$=t[18];const B=$;let z,G;t[19]===Symbol.for("react.memo_cache_sentinel")?(z=()=>{if(!b.current)return;const X=()=>d(!0),se=()=>d(!1),Q=()=>d(!1);return b.current.on("play",X),b.current.on("pause",se),b.current.on("finish",Q),()=>{b.current?.un("play",X),b.current?.un("pause",se),b.current?.un("finish",Q)}},G=[],t[19]=z,t[20]=G):(z=t[19],G=t[20]),P.useEffect(z,G);let H;t[21]===Symbol.for("react.memo_cache_sentinel")?(H=X=>{u(!0),X.preventDefault()},t[21]=H):H=t[21];const ne=H;let W;t[22]!==a||t[23]!==c||t[24]!==i?(W=X=>{if(!c||!S.current||!m.current)return;const se=S.current.getBoundingClientRect();let Q=X.clientX-se.left-Ve;Q=Math.max(0,Q);let le=Q/i;le=Math.max(0,Math.min(a,le)),r(le),b.current?.seekTo(le/a);const ke=m.current,fe=Ve+le*i,As=ke.scrollLeft+Ve,kn=As+ke.clientWidth-Ve;fe<As+40?ke.scrollLeft=Math.max(0,fe-Ve-40):fe>kn-40&&(ke.scrollLeft=Math.min(a*i-ke.clientWidth,fe-ke.clientWidth+40))},t[22]=a,t[23]=c,t[24]=i,t[25]=W):W=t[25];const te=W;let q,ie;t[26]!==c||t[27]!==te?(q=()=>(c&&(window.addEventListener("mousemove",te),window.addEventListener("mouseup",()=>u(!1))),()=>{window.removeEventListener("mousemove",te),window.removeEventListener("mouseup",()=>u(!1))}),ie=[c,te],t[26]=c,t[27]=te,t[28]=q,t[29]=ie):(q=t[28],ie=t[29]),P.useEffect(q,ie);let Re,Fe;t[30]!==E?(Re=()=>{const X=m.current;if(!X)return;const se=Q=>{if(Q.altKey){Q.preventDefault();const le=Q.deltaY<0?1.1:.9090909090909091;E(le,Q.clientX);return}if(Q.ctrlKey||Q.metaKey){Q.preventDefault(),X.scrollTop=X.scrollTop+Q.deltaY;return}Q.preventDefault(),X.scrollLeft=X.scrollLeft+Q.deltaY};return X.addEventListener("wheel",se,{passive:!1}),()=>X.removeEventListener("wheel",se)},Fe=[E],t[30]=E,t[31]=Re,t[32]=Fe):(Re=t[31],Fe=t[32]),P.useEffect(Re,Fe);let He;t[33]!==a||t[34]!==T||t[35]!==i?(He=()=>{const X=a*i,se=Math.floor(X/40);let Q=a/se;Q=[.05,.1,.25,.5,1,2,5,10,20,50,100].find(fe=>fe>=Q)||Q;const ke=[];for(let fe=0;fe<=a;fe=fe+Q,fe)ke.push(h.jsx("div",{className:"absolute top-0 h-full border-l border-border text-xs text-muted-foreground",style:{left:`${fe*i}px`},children:h.jsxs("span",{className:"absolute left-1 top-1/2 -translate-y-1/2",children:[fe.toFixed(Q<1?2:1),"s"]})},fe));return h.jsx("div",{className:"relative h-full w-full cursor-pointer select-none",onClick:fe=>T(fe.clientX),children:ke})},t[33]=a,t[34]=T,t[35]=i,t[36]=He):He=t[36];const Qe=He,Be=f?B:R;let je;t[37]!==f?(je=f?h.jsxs(h.Fragment,{children:[h.jsx(Lf,{}),"Pause"]}):h.jsxs(h.Fragment,{children:[h.jsx(zf,{}),"Play"]}),t[37]=f,t[38]=je):je=t[38];let Ce;t[39]!==Be||t[40]!==je?(Ce=h.jsx(ze,{onClick:Be,children:je}),t[39]=Be,t[40]=je,t[41]=Ce):Ce=t[41];let Ue;t[42]!==E?(Ue=()=>E(1.2),t[42]=E,t[43]=Ue):Ue=t[43];let mt;t[44]===Symbol.for("react.memo_cache_sentinel")?(mt=h.jsx(Ff,{}),t[44]=mt):mt=t[44];let Je;t[45]!==Ue?(Je=h.jsxs(ze,{onClick:Ue,children:[mt," Zoom In"]}),t[45]=Ue,t[46]=Je):Je=t[46];let et;t[47]!==E?(et=()=>E(.8333333333333334),t[47]=E,t[48]=et):et=t[48];let Ht;t[49]===Symbol.for("react.memo_cache_sentinel")?(Ht=h.jsx(Bf,{}),t[49]=Ht):Ht=t[49];let gt;t[50]!==et?(gt=h.jsxs(ze,{onClick:et,children:[Ht," Zoom Out"]}),t[50]=et,t[51]=gt):gt=t[51];let yt;t[52]===Symbol.for("react.memo_cache_sentinel")?(yt=X=>y(X.target.checked),t[52]=yt):yt=t[52];let tt;t[53]!==p?(tt=h.jsx("input",{type:"checkbox",checked:p,onChange:yt,className:"mr-1 accent-primary"}),t[53]=p,t[54]=tt):tt=t[54];let Xt;t[55]===Symbol.for("react.memo_cache_sentinel")?(Xt=h.jsx("kbd",{children:"Alt"}),t[55]=Xt):Xt=t[55];let Bt;t[56]===Symbol.for("react.memo_cache_sentinel")?(Bt=h.jsxs("span",{children:["[EXPERIMENTAL] Zoom to mouse ",Xt,"+",h.jsx("kbd",{children:"Wheel"})]}),t[56]=Bt):Bt=t[56];let bt;t[57]!==tt?(bt=h.jsx("div",{className:"flex items-center space-x-2",children:h.jsxs("label",{className:"flex items-center text-xs select-none cursor-pointer",children:[tt,Bt]})}),t[57]=tt,t[58]=bt):bt=t[58];const Ct=s*1e3;let wt;t[59]!==Ct?(wt=Er(Ct,"mm:ss.SS"),t[59]=Ct,t[60]=wt):wt=t[60];const Ot=s*1e3;let jt;t[61]!==Ot?(jt=Er(Ot,"mm:ss.SS"),t[61]=Ot,t[62]=jt):jt=t[62];let vt;t[63]!==wt||t[64]!==jt?(vt=h.jsx("time",{dateTime:wt,className:"font-mono w-20 text-right",children:jt}),t[63]=wt,t[64]=jt,t[65]=vt):vt=t[65];let Ut;t[66]===Symbol.for("react.memo_cache_sentinel")?(Ut=h.jsx("span",{className:"mx-1 text-muted-foreground",children:"/"}),t[66]=Ut):Ut=t[66];const It=a*1e3;let xt;t[67]!==It?(xt=Er(It,"mm:ss.SS"),t[67]=It,t[68]=xt):xt=t[68];const Mt=a*1e3;let nt;t[69]!==Mt?(nt=Er(Mt,"mm:ss.SS"),t[69]=Mt,t[70]=nt):nt=t[70];let st;t[71]!==xt||t[72]!==nt?(st=h.jsx("time",{dateTime:xt,className:"font-mono w-20 text-left",children:nt}),t[71]=xt,t[72]=nt,t[73]=st):st=t[73];let rt;t[74]!==vt||t[75]!==st?(rt=h.jsxs("div",{className:"flex-1 flex items-center justify-center",children:[vt,Ut,st]}),t[74]=vt,t[75]=st,t[76]=rt):rt=t[76];let _t;t[77]!==Ce||t[78]!==Je||t[79]!==gt||t[80]!==bt||t[81]!==rt?(_t=h.jsxs("div",{className:"flex space-x-2 m-2",children:[Ce,Je,gt,bt,rt]}),t[77]=Ce,t[78]=Je,t[79]=gt,t[80]=bt,t[81]=rt,t[82]=_t):_t=t[82];const it=`minmax(${Ve}px, 1fr) ${a*i}px`,Ze=`${El}px repeat(${e.length}, ${_l}px)`,Zn=`${Ve+a*i}px`;let Qt;t[83]!==it||t[84]!==Ze||t[85]!==Zn?(Qt={gridTemplateColumns:it,gridTemplateRows:Ze,minWidth:Zn},t[83]=it,t[84]=Ze,t[85]=Zn,t[86]=Qt):Qt=t[86];let Jt;t[87]===Symbol.for("react.memo_cache_sentinel")?(Jt=h.jsx("div",{className:"h-6 sticky left-0 bg-card z-20",style:{gridColumn:"1 / 2",gridRow:"1"}}),t[87]=Jt):Jt=t[87];let Vn;t[88]===Symbol.for("react.memo_cache_sentinel")?(Vn={gridColumn:"2 / 3",gridRow:"1"},t[88]=Vn):Vn=t[88];let Rt;t[89]!==Qe?(Rt=h.jsx("div",{className:"relative border-b border-border bg-card-foreground/10 w-full",style:Vn,children:Qe()}),t[89]=Qe,t[90]=Rt):Rt=t[90];let en;if(t[91]!==T||t[92]!==e||t[93]!==i){let X;t[95]!==T||t[96]!==i?(X=(se,Q)=>h.jsxs(xf.Fragment,{children:[h.jsx("div",{className:"flex items-center h-16 px-2 border-b border-border text-xs text-muted-foreground sticky left-0 bg-card z-20",style:{gridColumn:"1 / 2",gridRow:`${Q+2}`},children:se.name}),h.jsx("div",{className:"relative h-16 border-b border-border flex items-center justify-center cursor-pointer",style:{gridColumn:"2 / 3",gridRow:`${Q+2}`},onClick:le=>T(le.clientX),children:se.type==="audio"?h.jsx("div",{ref:g,className:"absolute left-0 w-full",style:{top:"50%",transform:"translateY(-50%)",height:"55px",pointerEvents:"none"}}):se.keyframes?.map(le=>h.jsx(_w,{keyframe:le,trackId:se.id,zoom:i,onUpdate:D},le.id))})]},se.id),t[95]=T,t[96]=i,t[97]=X):X=t[97],en=[...e].sort(zv).map(X),t[91]=T,t[92]=e,t[93]=i,t[94]=en}else en=t[94];const ki=`${Ve+s*i}px`,Ti=`${El-8+e.length*_l}px`;let Wn;t[98]!==ki||t[99]!==Ti?(Wn={left:ki,top:"8px",height:Ti},t[98]=ki,t[99]=Ti,t[100]=Wn):Wn=t[100];let or;t[101]===Symbol.for("react.memo_cache_sentinel")?(or=h.jsx("div",{className:"absolute left-1/2 w-4 h-4 bg-primary cursor-ew-resize group-hover:bg-primary/80",style:{transform:"translate(-50%, -100%) rotate(45deg)"}}),t[101]=or):or=t[101];let Yn;t[102]!==Wn?(Yn=h.jsx("div",{className:"z-10 absolute w-0.5 bg-primary cursor-ew-resize hover:bg-primary/80 group",style:Wn,onMouseDown:ne,children:or}),t[102]=Wn,t[103]=Yn):Yn=t[103];let Gn;t[104]!==Qt||t[105]!==Rt||t[106]!==en||t[107]!==Yn?(Gn=h.jsx("div",{className:"w-full flex-1 overflow-x-auto relative",ref:m,children:h.jsxs("div",{ref:S,className:"grid w-full relative",style:Qt,children:[Jt,Rt,en,Yn]})}),t[104]=Qt,t[105]=Rt,t[106]=en,t[107]=Yn,t[108]=Gn):Gn=t[108];let ar;return t[109]!==_t||t[110]!==Gn?(ar=h.jsxs("div",{className:"flex flex-col w-full h-full space-y-2 bg-card",children:[_t,Gn]}),t[109]=_t,t[110]=Gn,t[111]=ar):ar=t[111],ar};function Lv(t){return t.type==="audio"}function zv(t,e){return t.type==="audio"?-1:e.type==="audio"?1:0}function Fv(){const t=L.c(15),e=Xs(),n=pt();let s,r;t[0]!==e.theme?(s=()=>{const y=window.document.documentElement;y.classList.remove("light","dark"),y.classList.add(e.theme)},r=[e.theme],t[0]=e.theme,t[1]=s,t[2]=r):(s=t[1],r=t[2]),P.useEffect(s,r);let i,o;t[3]!==n?(i=()=>{const y=g=>{n.saved||!n.cart||(g.preventDefault(),g.returnValue="")};return window.addEventListener("beforeunload",y),()=>{window.removeEventListener("beforeunload",y)}},o=[n],t[3]=n,t[4]=i,t[5]=o):(i=t[4],o=t[5]),P.useEffect(i,o);let a,l;t[6]!==e.saveInterval||t[7]!==n?(a=()=>{const y=setInterval(()=>{!n.saved&&n.cart&&n.saveProject().catch(Bv)},e.saveInterval*1e3);return()=>{clearInterval(y)}},l=[n,e.saveInterval],t[6]=e.saveInterval,t[7]=n,t[8]=a,t[9]=l):(a=t[8],l=t[9]),P.useEffect(a,l);let c,u;t[10]===Symbol.for("react.memo_cache_sentinel")?(c=h.jsxs(es,{minSize:5,defaultSize:25,className:"bg-card flex flex-col gap-4",children:[h.jsx(_b,{}),h.jsx(Kb,{})]}),u=h.jsx(Xi,{}),t[10]=c,t[11]=u):(c=t[10],u=t[11]);let f,d;t[12]===Symbol.for("react.memo_cache_sentinel")?(f=h.jsx(es,{minSize:5,defaultSize:80,children:h.jsxs(Hi,{direction:"horizontal",autoSaveId:"tca-preview",autoSave:"true",children:[c,u,h.jsx(es,{minSize:5,defaultSize:75,children:h.jsx(vw,{})})]})}),d=h.jsx(Xi,{}),t[12]=f,t[13]=d):(f=t[12],d=t[13]);let p;return t[14]===Symbol.for("react.memo_cache_sentinel")?(p=h.jsx("div",{className:"h-screen w-screen",children:h.jsxs(Hi,{direction:"vertical",autoSaveId:"tca-project",autoSave:"true",children:[f,d,h.jsx(es,{minSize:5,defaultSize:20,children:h.jsx(Dv,{})})]})}),t[14]=p):p=t[14],p}function Bv(t){console.error("Auto-save failed:",t)}function Yo(t){const e=L.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let s;return e[2]!==n?(s=h.jsx(zh,{"data-slot":"alert-dialog",...n}),e[2]=n,e[3]=s):s=e[3],s}function Uv(t){const e=L.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let s;return e[2]!==n?(s=h.jsx(Zh,{"data-slot":"alert-dialog-portal",...n}),e[2]=n,e[3]=s):s=e[3],s}function Zv(t){const e=L.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=Z("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50 backdrop-blur",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx(Vh,{"data-slot":"alert-dialog-overlay",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function Go(t){const e=L.c(9);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]===Symbol.for("react.memo_cache_sentinel")?(r=h.jsx(Zv,{}),e[3]=r):r=e[3];let i;e[4]!==n?(i=Z("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",n),e[4]=n,e[5]=i):i=e[5];let o;return e[6]!==s||e[7]!==i?(o=h.jsxs(Uv,{children:[r,h.jsx(Fh,{"data-slot":"alert-dialog-content",className:i,...s})]}),e[6]=s,e[7]=i,e[8]=o):o=e[8],o}function qo(t){const e=L.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=Z("flex flex-col gap-2 text-center sm:text-left",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx("div",{"data-slot":"alert-dialog-header",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function Ko(t){const e=L.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=Z("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx("div",{"data-slot":"alert-dialog-footer",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function Ho(t){const e=L.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=Z("text-lg font-semibold",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx(Bh,{"data-slot":"alert-dialog-title",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function Xo(t){const e=L.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=Z("text-sm",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx(Uh,{"data-slot":"alert-dialog-description",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function Vv(t){const e=L.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=Z(ec({variant:"outline"}),n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx(Lh,{className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function Wv(){const t=[],e=document.createElement("canvas");return!!(e.getContext("webgl")||e.getContext("experimental-webgl"))||t.push("WebGL / 3D Graphics"),"AudioContext"in window||"webkitAudioContext"in window||t.push("Web Audio API (AudioContext)"),"requestAnimationFrame"in window||t.push("Animation Frame API (requestAnimationFrame)"),t}const Yv=()=>{const t=L.c(22);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],t[0]=e):e=t[0];const[n,s]=P.useState(e),[r,i]=P.useState(!1);let o,a;if(t[1]===Symbol.for("react.memo_cache_sentinel")?(o=()=>{const x=Wv();(x.length>0||!us)&&(s(x),setTimeout(()=>{i(!0)},10))},a=[],t[1]=o,t[2]=a):(o=t[1],a=t[2]),P.useEffect(o,a),!r)return null;let l;t[3]===Symbol.for("react.memo_cache_sentinel")?(l=h.jsx(Ho,{children:"Missing Browser Capabilities"}),t[3]=l):l=t[3];let c;t[4]!==n?(c=n.map(Gv),t[4]=n,t[5]=c):c=t[5];let u;t[6]===Symbol.for("react.memo_cache_sentinel")?(u=!us&&h.jsxs("li",{children:["File System Access API",h.jsx("br",{}),h.jsx("span",{className:"text-xs text-muted-foreground",children:"Used for autosave and loading files directly. Without it, you'll need to manually download and upload your files each time."})]}),t[6]=u):u=t[6];let f;t[7]!==c?(f=h.jsxs("ul",{className:"my-2 list-disc list-inside",children:[c,u]}),t[7]=c,t[8]=f):f=t[8];let d;t[9]===Symbol.for("react.memo_cache_sentinel")?(d=h.jsx("strong",{children:"Chrome"}),t[9]=d):d=t[9];let p;t[10]===Symbol.for("react.memo_cache_sentinel")?(p=h.jsx("strong",{children:"Edge"}),t[10]=p):p=t[10];let y;t[11]===Symbol.for("react.memo_cache_sentinel")?(y=h.jsx("strong",{children:"Brave"}),t[11]=y):y=t[11];let g;t[12]!==f?(g=h.jsxs(qo,{children:[l,h.jsxs(Xo,{children:["This app requires certain browser features to work correctly. Your current browser is missing the following capabilities:",f,"To use all features, switch to a modern Chromium-based browser like ",d,","," ",p,", or ",y,"."]})]}),t[12]=f,t[13]=g):g=t[13];let b;t[14]!==n.length?(b=!us&&n.length===0&&h.jsx(Ko,{children:h.jsx(Vv,{children:"Acknowledge"})}),t[14]=n.length,t[15]=b):b=t[15];let m;t[16]!==g||t[17]!==b?(m=h.jsxs(Go,{children:[g,b]}),t[16]=g,t[17]=b,t[18]=m):m=t[18];let S;return t[19]!==r||t[20]!==m?(S=h.jsx(Yo,{open:r,onOpenChange:i,children:m}),t[19]=r,t[20]=m,t[21]=S):S=t[21],S};function Gv(t){return h.jsx("li",{children:t},t)}const Qo=Symbol.for("yaml.alias"),Eo=Symbol.for("yaml.document"),mn=Symbol.for("yaml.map"),Ou=Symbol.for("yaml.pair"),Ft=Symbol.for("yaml.scalar"),Es=Symbol.for("yaml.seq"),ht=Symbol.for("yaml.node.type"),Un=t=>!!t&&typeof t=="object"&&t[ht]===Qo,mi=t=>!!t&&typeof t=="object"&&t[ht]===Eo,nr=t=>!!t&&typeof t=="object"&&t[ht]===mn,Ne=t=>!!t&&typeof t=="object"&&t[ht]===Ou,ge=t=>!!t&&typeof t=="object"&&t[ht]===Ft,sr=t=>!!t&&typeof t=="object"&&t[ht]===Es;function Te(t){if(t&&typeof t=="object")switch(t[ht]){case mn:case Es:return!0}return!1}function Ae(t){if(t&&typeof t=="object")switch(t[ht]){case Qo:case mn:case Ft:case Es:return!0}return!1}const ju=t=>(ge(t)||Te(t))&&!!t.anchor,An=Symbol("break visit"),qv=Symbol("skip children"),Ls=Symbol("remove node");function Ss(t,e){const n=Kv(e);mi(t)?rs(null,t.contents,n,Object.freeze([t]))===Ls&&(t.contents=null):rs(null,t,n,Object.freeze([]))}Ss.BREAK=An;Ss.SKIP=qv;Ss.REMOVE=Ls;function rs(t,e,n,s){const r=Hv(t,e,n,s);if(Ae(r)||Ne(r))return Xv(t,s,r),rs(t,r,n,s);if(typeof r!="symbol"){if(Te(e)){s=Object.freeze(s.concat(e));for(let i=0;i<e.items.length;++i){const o=rs(i,e.items[i],n,s);if(typeof o=="number")i=o-1;else{if(o===An)return An;o===Ls&&(e.items.splice(i,1),i-=1)}}}else if(Ne(e)){s=Object.freeze(s.concat(e));const i=rs("key",e.key,n,s);if(i===An)return An;i===Ls&&(e.key=null);const o=rs("value",e.value,n,s);if(o===An)return An;o===Ls&&(e.value=null)}}return r}function Kv(t){return typeof t=="object"&&(t.Collection||t.Node||t.Value)?Object.assign({Alias:t.Node,Map:t.Node,Scalar:t.Node,Seq:t.Node},t.Value&&{Map:t.Value,Scalar:t.Value,Seq:t.Value},t.Collection&&{Map:t.Collection,Seq:t.Collection},t):t}function Hv(t,e,n,s){if(typeof n=="function")return n(t,e,s);if(nr(e))return n.Map?.(t,e,s);if(sr(e))return n.Seq?.(t,e,s);if(Ne(e))return n.Pair?.(t,e,s);if(ge(e))return n.Scalar?.(t,e,s);if(Un(e))return n.Alias?.(t,e,s)}function Xv(t,e,n){const s=e[e.length-1];if(Te(s))s.items[t]=n;else if(Ne(s))t==="key"?s.key=n:s.value=n;else if(mi(s))s.contents=n;else{const r=Un(s)?"alias":"scalar";throw new Error(`Cannot replace node with ${r} parent`)}}const Qv={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},Jv=t=>t.replace(/[!,[\]{}]/g,e=>Qv[e]);class Ye{constructor(e,n){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},Ye.defaultYaml,e),this.tags=Object.assign({},Ye.defaultTags,n)}clone(){const e=new Ye(this.yaml,this.tags);return e.docStart=this.docStart,e}atDocument(){const e=new Ye(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:Ye.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},Ye.defaultTags);break}return e}add(e,n){this.atNextDocument&&(this.yaml={explicit:Ye.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},Ye.defaultTags),this.atNextDocument=!1);const s=e.trim().split(/[ \t]+/),r=s.shift();switch(r){case"%TAG":{if(s.length!==2&&(n(0,"%TAG directive should contain exactly two parts"),s.length<2))return!1;const[i,o]=s;return this.tags[i]=o,!0}case"%YAML":{if(this.yaml.explicit=!0,s.length!==1)return n(0,"%YAML directive should contain exactly one part"),!1;const[i]=s;if(i==="1.1"||i==="1.2")return this.yaml.version=i,!0;{const o=/^\d+\.\d+$/.test(i);return n(6,`Unsupported YAML version ${i}`,o),!1}}default:return n(0,`Unknown directive ${r}`,!0),!1}}tagName(e,n){if(e==="!")return"!";if(e[0]!=="!")return n(`Not a valid tag: ${e}`),null;if(e[1]==="<"){const o=e.slice(2,-1);return o==="!"||o==="!!"?(n(`Verbatim tags aren't resolved, so ${e} is invalid.`),null):(e[e.length-1]!==">"&&n("Verbatim tags must end with a >"),o)}const[,s,r]=e.match(/^(.*!)([^!]*)$/s);r||n(`The ${e} tag has no suffix`);const i=this.tags[s];if(i)try{return i+decodeURIComponent(r)}catch(o){return n(String(o)),null}return s==="!"?e:(n(`Could not resolve tag: ${e}`),null)}tagString(e){for(const[n,s]of Object.entries(this.tags))if(e.startsWith(s))return n+Jv(e.substring(s.length));return e[0]==="!"?e:`!<${e}>`}toString(e){const n=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],s=Object.entries(this.tags);let r;if(e&&s.length>0&&Ae(e.contents)){const i={};Ss(e.contents,(o,a)=>{Ae(a)&&a.tag&&(i[a.tag]=!0)}),r=Object.keys(i)}else r=[];for(const[i,o]of s)i==="!!"&&o==="tag:yaml.org,2002:"||(!e||r.some(a=>a.startsWith(o)))&&n.push(`%TAG ${i} ${o}`);return n.join(`
`)}}Ye.defaultYaml={explicit:!1,version:"1.2"};Ye.defaultTags={"!!":"tag:yaml.org,2002:"};function Iu(t){if(/[\x00-\x19\s,[\]{}]/.test(t)){const n=`Anchor must not contain whitespace or control characters: ${JSON.stringify(t)}`;throw new Error(n)}return!0}function Mu(t){const e=new Set;return Ss(t,{Value(n,s){s.anchor&&e.add(s.anchor)}}),e}function Ru(t,e){for(let n=1;;++n){const s=`${t}${n}`;if(!e.has(s))return s}}function e2(t,e){const n=[],s=new Map;let r=null;return{onAnchor:i=>{n.push(i),r??(r=Mu(t));const o=Ru(e,r);return r.add(o),o},setAnchors:()=>{for(const i of n){const o=s.get(i);if(typeof o=="object"&&o.anchor&&(ge(o.node)||Te(o.node)))o.node.anchor=o.anchor;else{const a=new Error("Failed to resolve repeated object (this should not happen)");throw a.source=i,a}}},sourceObjects:s}}function is(t,e,n,s){if(s&&typeof s=="object")if(Array.isArray(s))for(let r=0,i=s.length;r<i;++r){const o=s[r],a=is(t,s,String(r),o);a===void 0?delete s[r]:a!==o&&(s[r]=a)}else if(s instanceof Map)for(const r of Array.from(s.keys())){const i=s.get(r),o=is(t,s,r,i);o===void 0?s.delete(r):o!==i&&s.set(r,o)}else if(s instanceof Set)for(const r of Array.from(s)){const i=is(t,s,r,r);i===void 0?s.delete(r):i!==r&&(s.delete(r),s.add(i))}else for(const[r,i]of Object.entries(s)){const o=is(t,s,r,i);o===void 0?delete s[r]:o!==i&&(s[r]=o)}return t.call(e,n,s)}function ft(t,e,n){if(Array.isArray(t))return t.map((s,r)=>ft(s,String(r),n));if(t&&typeof t.toJSON=="function"){if(!n||!ju(t))return t.toJSON(e,n);const s={aliasCount:0,count:1,res:void 0};n.anchors.set(t,s),n.onCreate=i=>{s.res=i,delete n.onCreate};const r=t.toJSON(e,n);return n.onCreate&&n.onCreate(r),r}return typeof t=="bigint"&&!n?.keep?Number(t):t}class Jo{constructor(e){Object.defineProperty(this,ht,{value:e})}clone(){const e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}toJS(e,{mapAsMap:n,maxAliasCount:s,onAnchor:r,reviver:i}={}){if(!mi(e))throw new TypeError("A document argument is required");const o={anchors:new Map,doc:e,keep:!0,mapAsMap:n===!0,mapKeyWarned:!1,maxAliasCount:typeof s=="number"?s:100},a=ft(this,"",o);if(typeof r=="function")for(const{count:l,res:c}of o.anchors.values())r(c,l);return typeof i=="function"?is(i,{"":a},"",a):a}}class ea extends Jo{constructor(e){super(Qo),this.source=e,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(e,n){let s;n?.aliasResolveCache?s=n.aliasResolveCache:(s=[],Ss(e,{Node:(i,o)=>{(Un(o)||ju(o))&&s.push(o)}}),n&&(n.aliasResolveCache=s));let r;for(const i of s){if(i===this)break;i.anchor===this.source&&(r=i)}return r}toJSON(e,n){if(!n)return{source:this.source};const{anchors:s,doc:r,maxAliasCount:i}=n,o=this.resolve(r,n);if(!o){const l=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(l)}let a=s.get(o);if(a||(ft(o,null,n),a=s.get(o)),!a||a.res===void 0){const l="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(l)}if(i>=0&&(a.count+=1,a.aliasCount===0&&(a.aliasCount=Dr(r,o,s)),a.count*a.aliasCount>i)){const l="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(l)}return a.res}toString(e,n,s){const r=`*${this.source}`;if(e){if(Iu(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source)){const i=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(i)}if(e.implicitKey)return`${r} `}return r}}function Dr(t,e,n){if(Un(e)){const s=e.resolve(t),r=n&&s&&n.get(s);return r?r.count*r.aliasCount:0}else if(Te(e)){let s=0;for(const r of e.items){const i=Dr(t,r,n);i>s&&(s=i)}return s}else if(Ne(e)){const s=Dr(t,e.key,n),r=Dr(t,e.value,n);return Math.max(s,r)}return 1}const Pu=t=>!t||typeof t!="function"&&typeof t!="object";class K extends Jo{constructor(e){super(Ft),this.value=e}toJSON(e,n){return n?.keep?this.value:ft(this.value,e,n)}toString(){return String(this.value)}}K.BLOCK_FOLDED="BLOCK_FOLDED";K.BLOCK_LITERAL="BLOCK_LITERAL";K.PLAIN="PLAIN";K.QUOTE_DOUBLE="QUOTE_DOUBLE";K.QUOTE_SINGLE="QUOTE_SINGLE";const t2="tag:yaml.org,2002:";function n2(t,e,n){if(e){const s=n.filter(i=>i.tag===e),r=s.find(i=>!i.format)??s[0];if(!r)throw new Error(`Tag ${e} not found`);return r}return n.find(s=>s.identify?.(t)&&!s.format)}function Ks(t,e,n){if(mi(t)&&(t=t.contents),Ae(t))return t;if(Ne(t)){const f=n.schema[mn].createNode?.(n.schema,null,n);return f.items.push(t),f}(t instanceof String||t instanceof Number||t instanceof Boolean||typeof BigInt<"u"&&t instanceof BigInt)&&(t=t.valueOf());const{aliasDuplicateObjects:s,onAnchor:r,onTagObj:i,schema:o,sourceObjects:a}=n;let l;if(s&&t&&typeof t=="object"){if(l=a.get(t),l)return l.anchor??(l.anchor=r(t)),new ea(l.anchor);l={anchor:null,node:null},a.set(t,l)}e?.startsWith("!!")&&(e=t2+e.slice(2));let c=n2(t,e,o.tags);if(!c){if(t&&typeof t.toJSON=="function"&&(t=t.toJSON()),!t||typeof t!="object"){const f=new K(t);return l&&(l.node=f),f}c=t instanceof Map?o[mn]:Symbol.iterator in Object(t)?o[Es]:o[mn]}i&&(i(c),delete n.onTagObj);const u=c?.createNode?c.createNode(n.schema,t,n):typeof c?.nodeClass?.from=="function"?c.nodeClass.from(n.schema,t,n):new K(t);return e?u.tag=e:c.default||(u.tag=c.tag),l&&(l.node=u),u}function ti(t,e,n){let s=n;for(let r=e.length-1;r>=0;--r){const i=e[r];if(typeof i=="number"&&Number.isInteger(i)&&i>=0){const o=[];o[i]=s,s=o}else s=new Map([[i,s]])}return Ks(s,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:t,sourceObjects:new Map})}const Ms=t=>t==null||typeof t=="object"&&!!t[Symbol.iterator]().next().done;class $u extends Jo{constructor(e,n){super(e),Object.defineProperty(this,"schema",{value:n,configurable:!0,enumerable:!1,writable:!0})}clone(e){const n=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return e&&(n.schema=e),n.items=n.items.map(s=>Ae(s)||Ne(s)?s.clone(e):s),this.range&&(n.range=this.range.slice()),n}addIn(e,n){if(Ms(e))this.add(n);else{const[s,...r]=e,i=this.get(s,!0);if(Te(i))i.addIn(r,n);else if(i===void 0&&this.schema)this.set(s,ti(this.schema,r,n));else throw new Error(`Expected YAML collection at ${s}. Remaining path: ${r}`)}}deleteIn(e){const[n,...s]=e;if(s.length===0)return this.delete(n);const r=this.get(n,!0);if(Te(r))return r.deleteIn(s);throw new Error(`Expected YAML collection at ${n}. Remaining path: ${s}`)}getIn(e,n){const[s,...r]=e,i=this.get(s,!0);return r.length===0?!n&&ge(i)?i.value:i:Te(i)?i.getIn(r,n):void 0}hasAllNullValues(e){return this.items.every(n=>{if(!Ne(n))return!1;const s=n.value;return s==null||e&&ge(s)&&s.value==null&&!s.commentBefore&&!s.comment&&!s.tag})}hasIn(e){const[n,...s]=e;if(s.length===0)return this.has(n);const r=this.get(n,!0);return Te(r)?r.hasIn(s):!1}setIn(e,n){const[s,...r]=e;if(r.length===0)this.set(s,n);else{const i=this.get(s,!0);if(Te(i))i.setIn(r,n);else if(i===void 0&&this.schema)this.set(s,ti(this.schema,r,n));else throw new Error(`Expected YAML collection at ${s}. Remaining path: ${r}`)}}}const s2=t=>t.replace(/^(?!$)(?: $)?/gm,"#");function Vt(t,e){return/^\n+$/.test(t)?t.substring(1):e?t.replace(/^(?! *$)/gm,e):t}const jn=(t,e,n)=>t.endsWith(`
`)?Vt(n,e):n.includes(`
`)?`
`+Vt(n,e):(t.endsWith(" ")?"":" ")+n,Du="flow",So="block",Lr="quoted";function gi(t,e,n="flow",{indentAtStart:s,lineWidth:r=80,minContentWidth:i=20,onFold:o,onOverflow:a}={}){if(!r||r<0)return t;r<i&&(i=0);const l=Math.max(1+i,1+r-e.length);if(t.length<=l)return t;const c=[],u={};let f=r-e.length;typeof s=="number"&&(s>r-Math.max(2,i)?c.push(0):f=r-s);let d,p,y=!1,g=-1,b=-1,m=-1;n===So&&(g=Sl(t,g,e.length),g!==-1&&(f=g+l));for(let x;x=t[g+=1];){if(n===Lr&&x==="\\"){switch(b=g,t[g+1]){case"x":g+=3;break;case"u":g+=5;break;case"U":g+=9;break;default:g+=1}m=g}if(x===`
`)n===So&&(g=Sl(t,g,e.length)),f=g+e.length+l,d=void 0;else{if(x===" "&&p&&p!==" "&&p!==`
`&&p!=="	"){const E=t[g+1];E&&E!==" "&&E!==`
`&&E!=="	"&&(d=g)}if(g>=f)if(d)c.push(d),f=d+l,d=void 0;else if(n===Lr){for(;p===" "||p==="	";)p=x,x=t[g+=1],y=!0;const E=g>m+1?g-2:b-1;if(u[E])return t;c.push(E),u[E]=!0,f=E+l,d=void 0}else y=!0}p=x}if(y&&a&&a(),c.length===0)return t;o&&o();let S=t.slice(0,c[0]);for(let x=0;x<c.length;++x){const E=c[x],_=c[x+1]||t.length;E===0?S=`
${e}${t.slice(0,_)}`:(n===Lr&&u[E]&&(S+=`${t[E]}\\`),S+=`
${e}${t.slice(E+1,_)}`)}return S}function Sl(t,e,n){let s=e,r=e+1,i=t[r];for(;i===" "||i==="	";)if(e<r+n)i=t[++e];else{do i=t[++e];while(i&&i!==`
`);s=e,r=e+1,i=t[r]}return s}const yi=(t,e)=>({indentAtStart:e?t.indent.length:t.indentAtStart,lineWidth:t.options.lineWidth,minContentWidth:t.options.minContentWidth}),bi=t=>/^(%|---|\.\.\.)/m.test(t);function r2(t,e,n){if(!e||e<0)return!1;const s=e-n,r=t.length;if(r<=s)return!1;for(let i=0,o=0;i<r;++i)if(t[i]===`
`){if(i-o>s)return!0;if(o=i+1,r-o<=s)return!1}return!0}function zs(t,e){const n=JSON.stringify(t);if(e.options.doubleQuotedAsJSON)return n;const{implicitKey:s}=e,r=e.options.doubleQuotedMinMultiLineLength,i=e.indent||(bi(t)?"  ":"");let o="",a=0;for(let l=0,c=n[l];c;c=n[++l])if(c===" "&&n[l+1]==="\\"&&n[l+2]==="n"&&(o+=n.slice(a,l)+"\\ ",l+=1,a=l,c="\\"),c==="\\")switch(n[l+1]){case"u":{o+=n.slice(a,l);const u=n.substr(l+2,4);switch(u){case"0000":o+="\\0";break;case"0007":o+="\\a";break;case"000b":o+="\\v";break;case"001b":o+="\\e";break;case"0085":o+="\\N";break;case"00a0":o+="\\_";break;case"2028":o+="\\L";break;case"2029":o+="\\P";break;default:u.substr(0,2)==="00"?o+="\\x"+u.substr(2):o+=n.substr(l,6)}l+=5,a=l+1}break;case"n":if(s||n[l+2]==='"'||n.length<r)l+=1;else{for(o+=n.slice(a,l)+`

`;n[l+2]==="\\"&&n[l+3]==="n"&&n[l+4]!=='"';)o+=`
`,l+=2;o+=i,n[l+2]===" "&&(o+="\\"),l+=1,a=l+1}break;default:l+=1}return o=a?o+n.slice(a):n,s?o:gi(o,i,Lr,yi(e,!1))}function ko(t,e){if(e.options.singleQuote===!1||e.implicitKey&&t.includes(`
`)||/[ \t]\n|\n[ \t]/.test(t))return zs(t,e);const n=e.indent||(bi(t)?"  ":""),s="'"+t.replace(/'/g,"''").replace(/\n+/g,`$&
${n}`)+"'";return e.implicitKey?s:gi(s,n,Du,yi(e,!1))}function os(t,e){const{singleQuote:n}=e.options;let s;if(n===!1)s=zs;else{const r=t.includes('"'),i=t.includes("'");r&&!i?s=ko:i&&!r?s=zs:s=n?ko:zs}return s(t,e)}let To;try{To=new RegExp(`(^|(?<!
))
+(?!
|$)`,"g")}catch{To=/\n+(?!\n|$)/g}function zr({comment:t,type:e,value:n},s,r,i){const{blockQuote:o,commentString:a,lineWidth:l}=s.options;if(!o||/\n[\t ]+$/.test(n))return os(n,s);const c=s.indent||(s.forceBlockIndent||bi(n)?"  ":""),u=o==="literal"?!0:o==="folded"||e===K.BLOCK_FOLDED?!1:e===K.BLOCK_LITERAL?!0:!r2(n,l,c.length);if(!n)return u?`|
`:`>
`;let f,d;for(d=n.length;d>0;--d){const _=n[d-1];if(_!==`
`&&_!=="	"&&_!==" ")break}let p=n.substring(d);const y=p.indexOf(`
`);y===-1?f="-":n===p||y!==p.length-1?(f="+",i&&i()):f="",p&&(n=n.slice(0,-p.length),p[p.length-1]===`
`&&(p=p.slice(0,-1)),p=p.replace(To,`$&${c}`));let g=!1,b,m=-1;for(b=0;b<n.length;++b){const _=n[b];if(_===" ")g=!0;else if(_===`
`)m=b;else break}let S=n.substring(0,m<b?m+1:b);S&&(n=n.substring(S.length),S=S.replace(/\n+/g,`$&${c}`));let E=(g?c?"2":"1":"")+f;if(t&&(E+=" "+a(t.replace(/ ?[\r\n]+/g," ")),r&&r()),!u){const _=n.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${c}`);let T=!1;const w=yi(s,!0);o!=="folded"&&e!==K.BLOCK_FOLDED&&(w.onOverflow=()=>{T=!0});const v=gi(`${S}${_}${p}`,c,So,w);if(!T)return`>${E}
${c}${v}`}return n=n.replace(/\n+/g,`$&${c}`),`|${E}
${c}${S}${n}${p}`}function i2(t,e,n,s){const{type:r,value:i}=t,{actualString:o,implicitKey:a,indent:l,indentStep:c,inFlow:u}=e;if(a&&i.includes(`
`)||u&&/[[\]{},]/.test(i))return os(i,e);if(/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(i))return a||u||!i.includes(`
`)?os(i,e):zr(t,e,n,s);if(!a&&!u&&r!==K.PLAIN&&i.includes(`
`))return zr(t,e,n,s);if(bi(i)){if(l==="")return e.forceBlockIndent=!0,zr(t,e,n,s);if(a&&l===c)return os(i,e)}const f=i.replace(/\n+/g,`$&
${l}`);if(o){const d=g=>g.default&&g.tag!=="tag:yaml.org,2002:str"&&g.test?.test(f),{compat:p,tags:y}=e.doc.schema;if(y.some(d)||p?.some(d))return os(i,e)}return a?f:gi(f,l,Du,yi(e,!1))}function ta(t,e,n,s){const{implicitKey:r,inFlow:i}=e,o=typeof t.value=="string"?t:Object.assign({},t,{value:String(t.value)});let{type:a}=t;a!==K.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(o.value)&&(a=K.QUOTE_DOUBLE);const l=u=>{switch(u){case K.BLOCK_FOLDED:case K.BLOCK_LITERAL:return r||i?os(o.value,e):zr(o,e,n,s);case K.QUOTE_DOUBLE:return zs(o.value,e);case K.QUOTE_SINGLE:return ko(o.value,e);case K.PLAIN:return i2(o,e,n,s);default:return null}};let c=l(a);if(c===null){const{defaultKeyType:u,defaultStringType:f}=e.options,d=r&&u||f;if(c=l(d),c===null)throw new Error(`Unsupported default string type ${d}`)}return c}function Lu(t,e){const n=Object.assign({blockQuote:!0,commentString:s2,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},t.schema.toStringOptions,e);let s;switch(n.collectionStyle){case"block":s=!1;break;case"flow":s=!0;break;default:s=null}return{anchors:new Set,doc:t,flowCollectionPadding:n.flowCollectionPadding?" ":"",indent:"",indentStep:typeof n.indent=="number"?" ".repeat(n.indent):"  ",inFlow:s,options:n}}function o2(t,e){if(e.tag){const r=t.filter(i=>i.tag===e.tag);if(r.length>0)return r.find(i=>i.format===e.format)??r[0]}let n,s;if(ge(e)){s=e.value;let r=t.filter(i=>i.identify?.(s));if(r.length>1){const i=r.filter(o=>o.test);i.length>0&&(r=i)}n=r.find(i=>i.format===e.format)??r.find(i=>!i.format)}else s=e,n=t.find(r=>r.nodeClass&&s instanceof r.nodeClass);if(!n){const r=s?.constructor?.name??(s===null?"null":typeof s);throw new Error(`Tag not resolved for ${r} value`)}return n}function a2(t,e,{anchors:n,doc:s}){if(!s.directives)return"";const r=[],i=(ge(t)||Te(t))&&t.anchor;i&&Iu(i)&&(n.add(i),r.push(`&${i}`));const o=t.tag??(e.default?null:e.tag);return o&&r.push(s.directives.tagString(o)),r.join(" ")}function xs(t,e,n,s){if(Ne(t))return t.toString(e,n,s);if(Un(t)){if(e.doc.directives)return t.toString(e);if(e.resolvedAliases?.has(t))throw new TypeError("Cannot stringify circular structure without alias nodes");e.resolvedAliases?e.resolvedAliases.add(t):e.resolvedAliases=new Set([t]),t=t.resolve(e.doc)}let r;const i=Ae(t)?t:e.doc.createNode(t,{onTagObj:l=>r=l});r??(r=o2(e.doc.schema.tags,i));const o=a2(i,r,e);o.length>0&&(e.indentAtStart=(e.indentAtStart??0)+o.length+1);const a=typeof r.stringify=="function"?r.stringify(i,e,n,s):ge(i)?ta(i,e,n,s):i.toString(e,n,s);return o?ge(i)||a[0]==="{"||a[0]==="["?`${o} ${a}`:`${o}
${e.indent}${a}`:a}function l2({key:t,value:e},n,s,r){const{allNullValues:i,doc:o,indent:a,indentStep:l,options:{commentString:c,indentSeq:u,simpleKeys:f}}=n;let d=Ae(t)&&t.comment||null;if(f){if(d)throw new Error("With simple keys, key nodes cannot have comments");if(Te(t)||!Ae(t)&&typeof t=="object"){const w="With simple keys, collection cannot be used as a key value";throw new Error(w)}}let p=!f&&(!t||d&&e==null&&!n.inFlow||Te(t)||(ge(t)?t.type===K.BLOCK_FOLDED||t.type===K.BLOCK_LITERAL:typeof t=="object"));n=Object.assign({},n,{allNullValues:!1,implicitKey:!p&&(f||!i),indent:a+l});let y=!1,g=!1,b=xs(t,n,()=>y=!0,()=>g=!0);if(!p&&!n.inFlow&&b.length>1024){if(f)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");p=!0}if(n.inFlow){if(i||e==null)return y&&s&&s(),b===""?"?":p?`? ${b}`:b}else if(i&&!f||e==null&&p)return b=`? ${b}`,d&&!y?b+=jn(b,n.indent,c(d)):g&&r&&r(),b;y&&(d=null),p?(d&&(b+=jn(b,n.indent,c(d))),b=`? ${b}
${a}:`):(b=`${b}:`,d&&(b+=jn(b,n.indent,c(d))));let m,S,x;Ae(e)?(m=!!e.spaceBefore,S=e.commentBefore,x=e.comment):(m=!1,S=null,x=null,e&&typeof e=="object"&&(e=o.createNode(e))),n.implicitKey=!1,!p&&!d&&ge(e)&&(n.indentAtStart=b.length+1),g=!1,!u&&l.length>=2&&!n.inFlow&&!p&&sr(e)&&!e.flow&&!e.tag&&!e.anchor&&(n.indent=n.indent.substring(2));let E=!1;const _=xs(e,n,()=>E=!0,()=>g=!0);let T=" ";if(d||m||S){if(T=m?`
`:"",S){const w=c(S);T+=`
${Vt(w,n.indent)}`}_===""&&!n.inFlow?T===`
`&&(T=`

`):T+=`
${n.indent}`}else if(!p&&Te(e)){const w=_[0],v=_.indexOf(`
`),k=v!==-1,A=n.inFlow??e.flow??e.items.length===0;if(k||!A){let N=!1;if(k&&(w==="&"||w==="!")){let C=_.indexOf(" ");w==="&"&&C!==-1&&C<v&&_[C+1]==="!"&&(C=_.indexOf(" ",C+1)),(C===-1||v<C)&&(N=!0)}N||(T=`
${n.indent}`)}}else(_===""||_[0]===`
`)&&(T="");return b+=T+_,n.inFlow?E&&s&&s():x&&!E?b+=jn(b,n.indent,c(x)):g&&r&&r(),b}function zu(t,e){(t==="debug"||t==="warn")&&console.warn(e)}const kr="<<",Gt={identify:t=>t===kr||typeof t=="symbol"&&t.description===kr,default:"key",tag:"tag:yaml.org,2002:merge",test:/^<<$/,resolve:()=>Object.assign(new K(Symbol(kr)),{addToJSMap:Fu}),stringify:()=>kr},c2=(t,e)=>(Gt.identify(e)||ge(e)&&(!e.type||e.type===K.PLAIN)&&Gt.identify(e.value))&&t?.doc.schema.tags.some(n=>n.tag===Gt.tag&&n.default);function Fu(t,e,n){if(n=t&&Un(n)?n.resolve(t.doc):n,sr(n))for(const s of n.items)Fi(t,e,s);else if(Array.isArray(n))for(const s of n)Fi(t,e,s);else Fi(t,e,n)}function Fi(t,e,n){const s=t&&Un(n)?n.resolve(t.doc):n;if(!nr(s))throw new Error("Merge sources must be maps or map aliases");const r=s.toJSON(null,t,Map);for(const[i,o]of r)e instanceof Map?e.has(i)||e.set(i,o):e instanceof Set?e.add(i):Object.prototype.hasOwnProperty.call(e,i)||Object.defineProperty(e,i,{value:o,writable:!0,enumerable:!0,configurable:!0});return e}function Bu(t,e,{key:n,value:s}){if(Ae(n)&&n.addToJSMap)n.addToJSMap(t,e,s);else if(c2(t,n))Fu(t,e,s);else{const r=ft(n,"",t);if(e instanceof Map)e.set(r,ft(s,r,t));else if(e instanceof Set)e.add(r);else{const i=u2(n,r,t),o=ft(s,i,t);i in e?Object.defineProperty(e,i,{value:o,writable:!0,enumerable:!0,configurable:!0}):e[i]=o}}return e}function u2(t,e,n){if(e===null)return"";if(typeof e!="object")return String(e);if(Ae(t)&&n?.doc){const s=Lu(n.doc,{});s.anchors=new Set;for(const i of n.anchors.keys())s.anchors.add(i.anchor);s.inFlow=!0,s.inStringifyKey=!0;const r=t.toString(s);if(!n.mapKeyWarned){let i=JSON.stringify(r);i.length>40&&(i=i.substring(0,36)+'..."'),zu(n.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${i}. Set mapAsMap: true to use object keys.`),n.mapKeyWarned=!0}return r}return JSON.stringify(e)}function na(t,e,n){const s=Ks(t,void 0,n),r=Ks(e,void 0,n);return new qe(s,r)}class qe{constructor(e,n=null){Object.defineProperty(this,ht,{value:Ou}),this.key=e,this.value=n}clone(e){let{key:n,value:s}=this;return Ae(n)&&(n=n.clone(e)),Ae(s)&&(s=s.clone(e)),new qe(n,s)}toJSON(e,n){const s=n?.mapAsMap?new Map:{};return Bu(n,s,this)}toString(e,n,s){return e?.doc?l2(this,e,n,s):JSON.stringify(this)}}function Uu(t,e,n){return(e.inFlow??t.flow?h2:f2)(t,e,n)}function f2({comment:t,items:e},n,{blockItemPrefix:s,flowChars:r,itemIndent:i,onChompKeep:o,onComment:a}){const{indent:l,options:{commentString:c}}=n,u=Object.assign({},n,{indent:i,type:null});let f=!1;const d=[];for(let y=0;y<e.length;++y){const g=e[y];let b=null;if(Ae(g))!f&&g.spaceBefore&&d.push(""),ni(n,d,g.commentBefore,f),g.comment&&(b=g.comment);else if(Ne(g)){const S=Ae(g.key)?g.key:null;S&&(!f&&S.spaceBefore&&d.push(""),ni(n,d,S.commentBefore,f))}f=!1;let m=xs(g,u,()=>b=null,()=>f=!0);b&&(m+=jn(m,i,c(b))),f&&b&&(f=!1),d.push(s+m)}let p;if(d.length===0)p=r.start+r.end;else{p=d[0];for(let y=1;y<d.length;++y){const g=d[y];p+=g?`
${l}${g}`:`
`}}return t?(p+=`
`+Vt(c(t),l),a&&a()):f&&o&&o(),p}function h2({items:t},e,{flowChars:n,itemIndent:s}){const{indent:r,indentStep:i,flowCollectionPadding:o,options:{commentString:a}}=e;s+=i;const l=Object.assign({},e,{indent:s,inFlow:!0,type:null});let c=!1,u=0;const f=[];for(let y=0;y<t.length;++y){const g=t[y];let b=null;if(Ae(g))g.spaceBefore&&f.push(""),ni(e,f,g.commentBefore,!1),g.comment&&(b=g.comment);else if(Ne(g)){const S=Ae(g.key)?g.key:null;S&&(S.spaceBefore&&f.push(""),ni(e,f,S.commentBefore,!1),S.comment&&(c=!0));const x=Ae(g.value)?g.value:null;x?(x.comment&&(b=x.comment),x.commentBefore&&(c=!0)):g.value==null&&S?.comment&&(b=S.comment)}b&&(c=!0);let m=xs(g,l,()=>b=null);y<t.length-1&&(m+=","),b&&(m+=jn(m,s,a(b))),!c&&(f.length>u||m.includes(`
`))&&(c=!0),f.push(m),u=f.length}const{start:d,end:p}=n;if(f.length===0)return d+p;if(!c){const y=f.reduce((g,b)=>g+b.length+2,2);c=e.options.lineWidth>0&&y>e.options.lineWidth}if(c){let y=d;for(const g of f)y+=g?`
${i}${r}${g}`:`
`;return`${y}
${r}${p}`}else return`${d}${o}${f.join(" ")}${o}${p}`}function ni({indent:t,options:{commentString:e}},n,s,r){if(s&&r&&(s=s.replace(/^\n+/,"")),s){const i=Vt(e(s),t);n.push(i.trimStart())}}function In(t,e){const n=ge(e)?e.value:e;for(const s of t)if(Ne(s)&&(s.key===e||s.key===n||ge(s.key)&&s.key.value===n))return s}class ct extends $u{static get tagName(){return"tag:yaml.org,2002:map"}constructor(e){super(mn,e),this.items=[]}static from(e,n,s){const{keepUndefined:r,replacer:i}=s,o=new this(e),a=(l,c)=>{if(typeof i=="function")c=i.call(n,l,c);else if(Array.isArray(i)&&!i.includes(l))return;(c!==void 0||r)&&o.items.push(na(l,c,s))};if(n instanceof Map)for(const[l,c]of n)a(l,c);else if(n&&typeof n=="object")for(const l of Object.keys(n))a(l,n[l]);return typeof e.sortMapEntries=="function"&&o.items.sort(e.sortMapEntries),o}add(e,n){let s;Ne(e)?s=e:!e||typeof e!="object"||!("key"in e)?s=new qe(e,e?.value):s=new qe(e.key,e.value);const r=In(this.items,s.key),i=this.schema?.sortMapEntries;if(r){if(!n)throw new Error(`Key ${s.key} already set`);ge(r.value)&&Pu(s.value)?r.value.value=s.value:r.value=s.value}else if(i){const o=this.items.findIndex(a=>i(s,a)<0);o===-1?this.items.push(s):this.items.splice(o,0,s)}else this.items.push(s)}delete(e){const n=In(this.items,e);return n?this.items.splice(this.items.indexOf(n),1).length>0:!1}get(e,n){const r=In(this.items,e)?.value;return(!n&&ge(r)?r.value:r)??void 0}has(e){return!!In(this.items,e)}set(e,n){this.add(new qe(e,n),!0)}toJSON(e,n,s){const r=s?new s:n?.mapAsMap?new Map:{};n?.onCreate&&n.onCreate(r);for(const i of this.items)Bu(n,r,i);return r}toString(e,n,s){if(!e)return JSON.stringify(this);for(const r of this.items)if(!Ne(r))throw new Error(`Map items must all be pairs; found ${JSON.stringify(r)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),Uu(this,e,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:s,onComment:n})}}const ks={collection:"map",default:!0,nodeClass:ct,tag:"tag:yaml.org,2002:map",resolve(t,e){return nr(t)||e("Expected a mapping for this tag"),t},createNode:(t,e,n)=>ct.from(t,e,n)};class Ln extends $u{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(e){super(Es,e),this.items=[]}add(e){this.items.push(e)}delete(e){const n=Tr(e);return typeof n!="number"?!1:this.items.splice(n,1).length>0}get(e,n){const s=Tr(e);if(typeof s!="number")return;const r=this.items[s];return!n&&ge(r)?r.value:r}has(e){const n=Tr(e);return typeof n=="number"&&n<this.items.length}set(e,n){const s=Tr(e);if(typeof s!="number")throw new Error(`Expected a valid index, not ${e}.`);const r=this.items[s];ge(r)&&Pu(n)?r.value=n:this.items[s]=n}toJSON(e,n){const s=[];n?.onCreate&&n.onCreate(s);let r=0;for(const i of this.items)s.push(ft(i,String(r++),n));return s}toString(e,n,s){return e?Uu(this,e,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:s,onComment:n}):JSON.stringify(this)}static from(e,n,s){const{replacer:r}=s,i=new this(e);if(n&&Symbol.iterator in Object(n)){let o=0;for(let a of n){if(typeof r=="function"){const l=n instanceof Set?a:String(o++);a=r.call(n,l,a)}i.items.push(Ks(a,void 0,s))}}return i}}function Tr(t){let e=ge(t)?t.value:t;return e&&typeof e=="string"&&(e=Number(e)),typeof e=="number"&&Number.isInteger(e)&&e>=0?e:null}const Ts={collection:"seq",default:!0,nodeClass:Ln,tag:"tag:yaml.org,2002:seq",resolve(t,e){return sr(t)||e("Expected a sequence for this tag"),t},createNode:(t,e,n)=>Ln.from(t,e,n)},wi={identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify(t,e,n,s){return e=Object.assign({actualString:!0},e),ta(t,e,n,s)}},vi={identify:t=>t==null,createNode:()=>new K(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new K(null),stringify:({source:t},e)=>typeof t=="string"&&vi.test.test(t)?t:e.options.nullStr},sa={identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:t=>new K(t[0]==="t"||t[0]==="T"),stringify({source:t,value:e},n){if(t&&sa.test.test(t)){const s=t[0]==="t"||t[0]==="T";if(e===s)return t}return e?n.options.trueStr:n.options.falseStr}};function Nt({format:t,minFractionDigits:e,tag:n,value:s}){if(typeof s=="bigint")return String(s);const r=typeof s=="number"?s:Number(s);if(!isFinite(r))return isNaN(r)?".nan":r<0?"-.inf":".inf";let i=JSON.stringify(s);if(!t&&e&&(!n||n==="tag:yaml.org,2002:float")&&/^\d/.test(i)){let o=i.indexOf(".");o<0&&(o=i.length,i+=".");let a=e-(i.length-o-1);for(;a-- >0;)i+="0"}return i}const Zu={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Nt},Vu={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t),stringify(t){const e=Number(t.value);return isFinite(e)?e.toExponential():Nt(t)}},Wu={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(t){const e=new K(parseFloat(t)),n=t.indexOf(".");return n!==-1&&t[t.length-1]==="0"&&(e.minFractionDigits=t.length-n-1),e},stringify:Nt},xi=t=>typeof t=="bigint"||Number.isInteger(t),ra=(t,e,n,{intAsBigInt:s})=>s?BigInt(t):parseInt(t.substring(e),n);function Yu(t,e,n){const{value:s}=t;return xi(s)&&s>=0?n+s.toString(e):Nt(t)}const Gu={identify:t=>xi(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(t,e,n)=>ra(t,2,8,n),stringify:t=>Yu(t,8,"0o")},qu={identify:xi,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(t,e,n)=>ra(t,0,10,n),stringify:Nt},Ku={identify:t=>xi(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(t,e,n)=>ra(t,2,16,n),stringify:t=>Yu(t,16,"0x")},d2=[ks,Ts,wi,vi,sa,Gu,qu,Ku,Zu,Vu,Wu];function kl(t){return typeof t=="bigint"||Number.isInteger(t)}const Ar=({value:t})=>JSON.stringify(t),p2=[{identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify:Ar},{identify:t=>t==null,createNode:()=>new K(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:Ar},{identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^true$|^false$/,resolve:t=>t==="true",stringify:Ar},{identify:kl,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(t,e,{intAsBigInt:n})=>n?BigInt(t):parseInt(t,10),stringify:({value:t})=>kl(t)?t.toString():JSON.stringify(t)},{identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:t=>parseFloat(t),stringify:Ar}],m2={default:!0,tag:"",test:/^/,resolve(t,e){return e(`Unresolved plain scalar ${JSON.stringify(t)}`),t}},g2=[ks,Ts].concat(p2,m2),ia={identify:t=>t instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(t,e){if(typeof atob=="function"){const n=atob(t.replace(/[\n\r]/g,"")),s=new Uint8Array(n.length);for(let r=0;r<n.length;++r)s[r]=n.charCodeAt(r);return s}else return e("This environment does not support reading binary tags; either Buffer or atob is required"),t},stringify({comment:t,type:e,value:n},s,r,i){if(!n)return"";const o=n;let a;if(typeof btoa=="function"){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);a=btoa(l)}else throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(e??(e=K.BLOCK_LITERAL),e!==K.QUOTE_DOUBLE){const l=Math.max(s.options.lineWidth-s.indent.length,s.options.minContentWidth),c=Math.ceil(a.length/l),u=new Array(c);for(let f=0,d=0;f<c;++f,d+=l)u[f]=a.substr(d,l);a=u.join(e===K.BLOCK_LITERAL?`
`:" ")}return ta({comment:t,type:e,value:a},s,r,i)}};function Hu(t,e){if(sr(t))for(let n=0;n<t.items.length;++n){let s=t.items[n];if(!Ne(s)){if(nr(s)){s.items.length>1&&e("Each pair must have its own sequence indicator");const r=s.items[0]||new qe(new K(null));if(s.commentBefore&&(r.key.commentBefore=r.key.commentBefore?`${s.commentBefore}
${r.key.commentBefore}`:s.commentBefore),s.comment){const i=r.value??r.key;i.comment=i.comment?`${s.comment}
${i.comment}`:s.comment}s=r}t.items[n]=Ne(s)?s:new qe(s)}}else e("Expected a sequence for this tag");return t}function Xu(t,e,n){const{replacer:s}=n,r=new Ln(t);r.tag="tag:yaml.org,2002:pairs";let i=0;if(e&&Symbol.iterator in Object(e))for(let o of e){typeof s=="function"&&(o=s.call(e,String(i++),o));let a,l;if(Array.isArray(o))if(o.length===2)a=o[0],l=o[1];else throw new TypeError(`Expected [key, value] tuple: ${o}`);else if(o&&o instanceof Object){const c=Object.keys(o);if(c.length===1)a=c[0],l=o[a];else throw new TypeError(`Expected tuple with one key, not ${c.length} keys`)}else a=o;r.items.push(na(a,l,n))}return r}const oa={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:Hu,createNode:Xu};class ps extends Ln{constructor(){super(),this.add=ct.prototype.add.bind(this),this.delete=ct.prototype.delete.bind(this),this.get=ct.prototype.get.bind(this),this.has=ct.prototype.has.bind(this),this.set=ct.prototype.set.bind(this),this.tag=ps.tag}toJSON(e,n){if(!n)return super.toJSON(e);const s=new Map;n?.onCreate&&n.onCreate(s);for(const r of this.items){let i,o;if(Ne(r)?(i=ft(r.key,"",n),o=ft(r.value,i,n)):i=ft(r,"",n),s.has(i))throw new Error("Ordered maps must not include duplicate keys");s.set(i,o)}return s}static from(e,n,s){const r=Xu(e,n,s),i=new this;return i.items=r.items,i}}ps.tag="tag:yaml.org,2002:omap";const aa={collection:"seq",identify:t=>t instanceof Map,nodeClass:ps,default:!1,tag:"tag:yaml.org,2002:omap",resolve(t,e){const n=Hu(t,e),s=[];for(const{key:r}of n.items)ge(r)&&(s.includes(r.value)?e(`Ordered maps must not include duplicate keys: ${r.value}`):s.push(r.value));return Object.assign(new ps,n)},createNode:(t,e,n)=>ps.from(t,e,n)};function Qu({value:t,source:e},n){return e&&(t?Ju:ef).test.test(e)?e:t?n.options.trueStr:n.options.falseStr}const Ju={identify:t=>t===!0,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new K(!0),stringify:Qu},ef={identify:t=>t===!1,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/,resolve:()=>new K(!1),stringify:Qu},y2={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Nt},b2={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t.replace(/_/g,"")),stringify(t){const e=Number(t.value);return isFinite(e)?e.toExponential():Nt(t)}},w2={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(t){const e=new K(parseFloat(t.replace(/_/g,""))),n=t.indexOf(".");if(n!==-1){const s=t.substring(n+1).replace(/_/g,"");s[s.length-1]==="0"&&(e.minFractionDigits=s.length)}return e},stringify:Nt},rr=t=>typeof t=="bigint"||Number.isInteger(t);function _i(t,e,n,{intAsBigInt:s}){const r=t[0];if((r==="-"||r==="+")&&(e+=1),t=t.substring(e).replace(/_/g,""),s){switch(n){case 2:t=`0b${t}`;break;case 8:t=`0o${t}`;break;case 16:t=`0x${t}`;break}const o=BigInt(t);return r==="-"?BigInt(-1)*o:o}const i=parseInt(t,n);return r==="-"?-1*i:i}function la(t,e,n){const{value:s}=t;if(rr(s)){const r=s.toString(e);return s<0?"-"+n+r.substr(1):n+r}return Nt(t)}const v2={identify:rr,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(t,e,n)=>_i(t,2,2,n),stringify:t=>la(t,2,"0b")},x2={identify:rr,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(t,e,n)=>_i(t,1,8,n),stringify:t=>la(t,8,"0")},_2={identify:rr,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(t,e,n)=>_i(t,0,10,n),stringify:Nt},E2={identify:rr,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(t,e,n)=>_i(t,2,16,n),stringify:t=>la(t,16,"0x")};class ms extends ct{constructor(e){super(e),this.tag=ms.tag}add(e){let n;Ne(e)?n=e:e&&typeof e=="object"&&"key"in e&&"value"in e&&e.value===null?n=new qe(e.key,null):n=new qe(e,null),In(this.items,n.key)||this.items.push(n)}get(e,n){const s=In(this.items,e);return!n&&Ne(s)?ge(s.key)?s.key.value:s.key:s}set(e,n){if(typeof n!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof n}`);const s=In(this.items,e);s&&!n?this.items.splice(this.items.indexOf(s),1):!s&&n&&this.items.push(new qe(e))}toJSON(e,n){return super.toJSON(e,n,Set)}toString(e,n,s){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),n,s);throw new Error("Set items must all have null values")}static from(e,n,s){const{replacer:r}=s,i=new this(e);if(n&&Symbol.iterator in Object(n))for(let o of n)typeof r=="function"&&(o=r.call(n,o,o)),i.items.push(na(o,null,s));return i}}ms.tag="tag:yaml.org,2002:set";const ca={collection:"map",identify:t=>t instanceof Set,nodeClass:ms,default:!1,tag:"tag:yaml.org,2002:set",createNode:(t,e,n)=>ms.from(t,e,n),resolve(t,e){if(nr(t)){if(t.hasAllNullValues(!0))return Object.assign(new ms,t);e("Set items must all have null values")}else e("Expected a mapping for this tag");return t}};function ua(t,e){const n=t[0],s=n==="-"||n==="+"?t.substring(1):t,r=o=>e?BigInt(o):Number(o),i=s.replace(/_/g,"").split(":").reduce((o,a)=>o*r(60)+r(a),r(0));return n==="-"?r(-1)*i:i}function tf(t){let{value:e}=t,n=o=>o;if(typeof e=="bigint")n=o=>BigInt(o);else if(isNaN(e)||!isFinite(e))return Nt(t);let s="";e<0&&(s="-",e*=n(-1));const r=n(60),i=[e%r];return e<60?i.unshift(0):(e=(e-i[0])/r,i.unshift(e%r),e>=60&&(e=(e-i[0])/r,i.unshift(e))),s+i.map(o=>String(o).padStart(2,"0")).join(":").replace(/000000\d*$/,"")}const nf={identify:t=>typeof t=="bigint"||Number.isInteger(t),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(t,e,{intAsBigInt:n})=>ua(t,n),stringify:tf},sf={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:t=>ua(t,!1),stringify:tf},Ei={identify:t=>t instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(t){const e=t.match(Ei.test);if(!e)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");const[,n,s,r,i,o,a]=e.map(Number),l=e[7]?Number((e[7]+"00").substr(1,3)):0;let c=Date.UTC(n,s-1,r,i||0,o||0,a||0,l);const u=e[8];if(u&&u!=="Z"){let f=ua(u,!1);Math.abs(f)<30&&(f*=60),c-=6e4*f}return new Date(c)},stringify:({value:t})=>t?.toISOString().replace(/(T00:00:00)?\.000Z$/,"")??""},Tl=[ks,Ts,wi,vi,Ju,ef,v2,x2,_2,E2,y2,b2,w2,ia,Gt,aa,oa,ca,nf,sf,Ei],Al=new Map([["core",d2],["failsafe",[ks,Ts,wi]],["json",g2],["yaml11",Tl],["yaml-1.1",Tl]]),Nl={binary:ia,bool:sa,float:Wu,floatExp:Vu,floatNaN:Zu,floatTime:sf,int:qu,intHex:Ku,intOct:Gu,intTime:nf,map:ks,merge:Gt,null:vi,omap:aa,pairs:oa,seq:Ts,set:ca,timestamp:Ei},S2={"tag:yaml.org,2002:binary":ia,"tag:yaml.org,2002:merge":Gt,"tag:yaml.org,2002:omap":aa,"tag:yaml.org,2002:pairs":oa,"tag:yaml.org,2002:set":ca,"tag:yaml.org,2002:timestamp":Ei};function Bi(t,e,n){const s=Al.get(e);if(s&&!t)return n&&!s.includes(Gt)?s.concat(Gt):s.slice();let r=s;if(!r)if(Array.isArray(t))r=[];else{const i=Array.from(Al.keys()).filter(o=>o!=="yaml11").map(o=>JSON.stringify(o)).join(", ");throw new Error(`Unknown schema "${e}"; use one of ${i} or define customTags array`)}if(Array.isArray(t))for(const i of t)r=r.concat(i);else typeof t=="function"&&(r=t(r.slice()));return n&&(r=r.concat(Gt)),r.reduce((i,o)=>{const a=typeof o=="string"?Nl[o]:o;if(!a){const l=JSON.stringify(o),c=Object.keys(Nl).map(u=>JSON.stringify(u)).join(", ");throw new Error(`Unknown custom tag ${l}; use one of ${c}`)}return i.includes(a)||i.push(a),i},[])}const k2=(t,e)=>t.key<e.key?-1:t.key>e.key?1:0;class fa{constructor({compat:e,customTags:n,merge:s,resolveKnownTags:r,schema:i,sortMapEntries:o,toStringDefaults:a}){this.compat=Array.isArray(e)?Bi(e,"compat"):e?Bi(null,e):null,this.name=typeof i=="string"&&i||"core",this.knownTags=r?S2:{},this.tags=Bi(n,this.name,s),this.toStringOptions=a??null,Object.defineProperty(this,mn,{value:ks}),Object.defineProperty(this,Ft,{value:wi}),Object.defineProperty(this,Es,{value:Ts}),this.sortMapEntries=typeof o=="function"?o:o===!0?k2:null}clone(){const e=Object.create(fa.prototype,Object.getOwnPropertyDescriptors(this));return e.tags=this.tags.slice(),e}}function T2(t,e){const n=[];let s=e.directives===!0;if(e.directives!==!1&&t.directives){const l=t.directives.toString(t);l?(n.push(l),s=!0):t.directives.docStart&&(s=!0)}s&&n.push("---");const r=Lu(t,e),{commentString:i}=r.options;if(t.commentBefore){n.length!==1&&n.unshift("");const l=i(t.commentBefore);n.unshift(Vt(l,""))}let o=!1,a=null;if(t.contents){if(Ae(t.contents)){if(t.contents.spaceBefore&&s&&n.push(""),t.contents.commentBefore){const u=i(t.contents.commentBefore);n.push(Vt(u,""))}r.forceBlockIndent=!!t.comment,a=t.contents.comment}const l=a?void 0:()=>o=!0;let c=xs(t.contents,r,()=>a=null,l);a&&(c+=jn(c,"",i(a))),(c[0]==="|"||c[0]===">")&&n[n.length-1]==="---"?n[n.length-1]=`--- ${c}`:n.push(c)}else n.push(xs(t.contents,r));if(t.directives?.docEnd)if(t.comment){const l=i(t.comment);l.includes(`
`)?(n.push("..."),n.push(Vt(l,""))):n.push(`... ${l}`)}else n.push("...");else{let l=t.comment;l&&o&&(l=l.replace(/^\n+/,"")),l&&((!o||a)&&n[n.length-1]!==""&&n.push(""),n.push(Vt(i(l),"")))}return n.join(`
`)+`
`}class Si{constructor(e,n,s){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,ht,{value:Eo});let r=null;typeof n=="function"||Array.isArray(n)?r=n:s===void 0&&n&&(s=n,n=void 0);const i=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,stringKeys:!1,uniqueKeys:!0,version:"1.2"},s);this.options=i;let{version:o}=i;s?._directives?(this.directives=s._directives.atDocument(),this.directives.yaml.explicit&&(o=this.directives.yaml.version)):this.directives=new Ye({version:o}),this.setSchema(o,s),this.contents=e===void 0?null:this.createNode(e,r,s)}clone(){const e=Object.create(Si.prototype,{[ht]:{value:Eo}});return e.commentBefore=this.commentBefore,e.comment=this.comment,e.errors=this.errors.slice(),e.warnings=this.warnings.slice(),e.options=Object.assign({},this.options),this.directives&&(e.directives=this.directives.clone()),e.schema=this.schema.clone(),e.contents=Ae(this.contents)?this.contents.clone(e.schema):this.contents,this.range&&(e.range=this.range.slice()),e}add(e){Xn(this.contents)&&this.contents.add(e)}addIn(e,n){Xn(this.contents)&&this.contents.addIn(e,n)}createAlias(e,n){if(!e.anchor){const s=Mu(this);e.anchor=!n||s.has(n)?Ru(n||"a",s):n}return new ea(e.anchor)}createNode(e,n,s){let r;if(typeof n=="function")e=n.call({"":e},"",e),r=n;else if(Array.isArray(n)){const b=S=>typeof S=="number"||S instanceof String||S instanceof Number,m=n.filter(b).map(String);m.length>0&&(n=n.concat(m)),r=n}else s===void 0&&n&&(s=n,n=void 0);const{aliasDuplicateObjects:i,anchorPrefix:o,flow:a,keepUndefined:l,onTagObj:c,tag:u}=s??{},{onAnchor:f,setAnchors:d,sourceObjects:p}=e2(this,o||"a"),y={aliasDuplicateObjects:i??!0,keepUndefined:l??!1,onAnchor:f,onTagObj:c,replacer:r,schema:this.schema,sourceObjects:p},g=Ks(e,u,y);return a&&Te(g)&&(g.flow=!0),d(),g}createPair(e,n,s={}){const r=this.createNode(e,null,s),i=this.createNode(n,null,s);return new qe(r,i)}delete(e){return Xn(this.contents)?this.contents.delete(e):!1}deleteIn(e){return Ms(e)?this.contents==null?!1:(this.contents=null,!0):Xn(this.contents)?this.contents.deleteIn(e):!1}get(e,n){return Te(this.contents)?this.contents.get(e,n):void 0}getIn(e,n){return Ms(e)?!n&&ge(this.contents)?this.contents.value:this.contents:Te(this.contents)?this.contents.getIn(e,n):void 0}has(e){return Te(this.contents)?this.contents.has(e):!1}hasIn(e){return Ms(e)?this.contents!==void 0:Te(this.contents)?this.contents.hasIn(e):!1}set(e,n){this.contents==null?this.contents=ti(this.schema,[e],n):Xn(this.contents)&&this.contents.set(e,n)}setIn(e,n){Ms(e)?this.contents=n:this.contents==null?this.contents=ti(this.schema,Array.from(e),n):Xn(this.contents)&&this.contents.setIn(e,n)}setSchema(e,n={}){typeof e=="number"&&(e=String(e));let s;switch(e){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new Ye({version:"1.1"}),s={resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=e:this.directives=new Ye({version:e}),s={resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,s=null;break;default:{const r=JSON.stringify(e);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${r}`)}}if(n.schema instanceof Object)this.schema=n.schema;else if(s)this.schema=new fa(Object.assign(s,n));else throw new Error("With a null YAML version, the { schema: Schema } option is required")}toJS({json:e,jsonArg:n,mapAsMap:s,maxAliasCount:r,onAnchor:i,reviver:o}={}){const a={anchors:new Map,doc:this,keep:!e,mapAsMap:s===!0,mapKeyWarned:!1,maxAliasCount:typeof r=="number"?r:100},l=ft(this.contents,n??"",a);if(typeof i=="function")for(const{count:c,res:u}of a.anchors.values())i(u,c);return typeof o=="function"?is(o,{"":l},"",l):l}toJSON(e,n){return this.toJS({json:!0,jsonArg:e,mapAsMap:!1,onAnchor:n})}toString(e={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in e&&(!Number.isInteger(e.indent)||Number(e.indent)<=0)){const n=JSON.stringify(e.indent);throw new Error(`"indent" option must be a positive integer, not ${n}`)}return T2(this,e)}}function Xn(t){if(Te(t))return!0;throw new Error("Expected a YAML collection as document contents")}class rf extends Error{constructor(e,n,s,r){super(),this.name=e,this.code=s,this.message=r,this.pos=n}}class Rs extends rf{constructor(e,n,s){super("YAMLParseError",e,n,s)}}class A2 extends rf{constructor(e,n,s){super("YAMLWarning",e,n,s)}}const Cl=(t,e)=>n=>{if(n.pos[0]===-1)return;n.linePos=n.pos.map(a=>e.linePos(a));const{line:s,col:r}=n.linePos[0];n.message+=` at line ${s}, column ${r}`;let i=r-1,o=t.substring(e.lineStarts[s-1],e.lineStarts[s]).replace(/[\n\r]+$/,"");if(i>=60&&o.length>80){const a=Math.min(i-39,o.length-79);o=""+o.substring(a),i-=a-1}if(o.length>80&&(o=o.substring(0,79)+""),s>1&&/^ *$/.test(o.substring(0,i))){let a=t.substring(e.lineStarts[s-2],e.lineStarts[s-1]);a.length>80&&(a=a.substring(0,79)+`
`),o=a+o}if(/[^ ]/.test(o)){let a=1;const l=n.linePos[1];l&&l.line===s&&l.col>r&&(a=Math.max(1,Math.min(l.col-r,80-i)));const c=" ".repeat(i)+"^".repeat(a);n.message+=`:

${o}
${c}
`}};function _s(t,{flow:e,indicator:n,next:s,offset:r,onError:i,parentIndent:o,startOnNewline:a}){let l=!1,c=a,u=a,f="",d="",p=!1,y=!1,g=null,b=null,m=null,S=null,x=null,E=null,_=null;for(const v of t)switch(y&&(v.type!=="space"&&v.type!=="newline"&&v.type!=="comma"&&i(v.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),y=!1),g&&(c&&v.type!=="comment"&&v.type!=="newline"&&i(g,"TAB_AS_INDENT","Tabs are not allowed as indentation"),g=null),v.type){case"space":!e&&(n!=="doc-start"||s?.type!=="flow-collection")&&v.source.includes("	")&&(g=v),u=!0;break;case"comment":{u||i(v,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const k=v.source.substring(1)||" ";f?f+=d+k:f=k,d="",c=!1;break}case"newline":c?f?f+=v.source:(!E||n!=="seq-item-ind")&&(l=!0):d+=v.source,c=!0,p=!0,(b||m)&&(S=v),u=!0;break;case"anchor":b&&i(v,"MULTIPLE_ANCHORS","A node can have at most one anchor"),v.source.endsWith(":")&&i(v.offset+v.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",!0),b=v,_??(_=v.offset),c=!1,u=!1,y=!0;break;case"tag":{m&&i(v,"MULTIPLE_TAGS","A node can have at most one tag"),m=v,_??(_=v.offset),c=!1,u=!1,y=!0;break}case n:(b||m)&&i(v,"BAD_PROP_ORDER",`Anchors and tags must be after the ${v.source} indicator`),E&&i(v,"UNEXPECTED_TOKEN",`Unexpected ${v.source} in ${e??"collection"}`),E=v,c=n==="seq-item-ind"||n==="explicit-key-ind",u=!1;break;case"comma":if(e){x&&i(v,"UNEXPECTED_TOKEN",`Unexpected , in ${e}`),x=v,c=!1,u=!1;break}default:i(v,"UNEXPECTED_TOKEN",`Unexpected ${v.type} token`),c=!1,u=!1}const T=t[t.length-1],w=T?T.offset+T.source.length:r;return y&&s&&s.type!=="space"&&s.type!=="newline"&&s.type!=="comma"&&(s.type!=="scalar"||s.source!=="")&&i(s.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),g&&(c&&g.indent<=o||s?.type==="block-map"||s?.type==="block-seq")&&i(g,"TAB_AS_INDENT","Tabs are not allowed as indentation"),{comma:x,found:E,spaceBefore:l,comment:f,hasNewline:p,anchor:b,tag:m,newlineAfterProp:S,end:w,start:_??w}}function Hs(t){if(!t)return null;switch(t.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(t.source.includes(`
`))return!0;if(t.end){for(const e of t.end)if(e.type==="newline")return!0}return!1;case"flow-collection":for(const e of t.items){for(const n of e.start)if(n.type==="newline")return!0;if(e.sep){for(const n of e.sep)if(n.type==="newline")return!0}if(Hs(e.key)||Hs(e.value))return!0}return!1;default:return!0}}function Ao(t,e,n){if(e?.type==="flow-collection"){const s=e.end[0];s.indent===t&&(s.source==="]"||s.source==="}")&&Hs(e)&&n(s,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}function of(t,e,n){const{uniqueKeys:s}=t.options;if(s===!1)return!1;const r=typeof s=="function"?s:(i,o)=>i===o||ge(i)&&ge(o)&&i.value===o.value;return e.some(i=>r(i.key,n))}const Ol="All mapping items must start at the same column";function N2({composeNode:t,composeEmptyNode:e},n,s,r,i){const o=i?.nodeClass??ct,a=new o(n.schema);n.atRoot&&(n.atRoot=!1);let l=s.offset,c=null;for(const u of s.items){const{start:f,key:d,sep:p,value:y}=u,g=_s(f,{indicator:"explicit-key-ind",next:d??p?.[0],offset:l,onError:r,parentIndent:s.indent,startOnNewline:!0}),b=!g.found;if(b){if(d&&(d.type==="block-seq"?r(l,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in d&&d.indent!==s.indent&&r(l,"BAD_INDENT",Ol)),!g.anchor&&!g.tag&&!p){c=g.end,g.comment&&(a.comment?a.comment+=`
`+g.comment:a.comment=g.comment);continue}(g.newlineAfterProp||Hs(d))&&r(d??f[f.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}else g.found?.indent!==s.indent&&r(l,"BAD_INDENT",Ol);n.atKey=!0;const m=g.end,S=d?t(n,d,g,r):e(n,m,f,null,g,r);n.schema.compat&&Ao(s.indent,d,r),n.atKey=!1,of(n,a.items,S)&&r(m,"DUPLICATE_KEY","Map keys must be unique");const x=_s(p??[],{indicator:"map-value-ind",next:y,offset:S.range[2],onError:r,parentIndent:s.indent,startOnNewline:!d||d.type==="block-scalar"});if(l=x.end,x.found){b&&(y?.type==="block-map"&&!x.hasNewline&&r(l,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),n.options.strict&&g.start<x.found.offset-1024&&r(S.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));const E=y?t(n,y,x,r):e(n,l,p,null,x,r);n.schema.compat&&Ao(s.indent,y,r),l=E.range[2];const _=new qe(S,E);n.options.keepSourceTokens&&(_.srcToken=u),a.items.push(_)}else{b&&r(S.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),x.comment&&(S.comment?S.comment+=`
`+x.comment:S.comment=x.comment);const E=new qe(S);n.options.keepSourceTokens&&(E.srcToken=u),a.items.push(E)}}return c&&c<l&&r(c,"IMPOSSIBLE","Map comment with trailing content"),a.range=[s.offset,l,c??l],a}function C2({composeNode:t,composeEmptyNode:e},n,s,r,i){const o=i?.nodeClass??Ln,a=new o(n.schema);n.atRoot&&(n.atRoot=!1),n.atKey&&(n.atKey=!1);let l=s.offset,c=null;for(const{start:u,value:f}of s.items){const d=_s(u,{indicator:"seq-item-ind",next:f,offset:l,onError:r,parentIndent:s.indent,startOnNewline:!0});if(!d.found)if(d.anchor||d.tag||f)f&&f.type==="block-seq"?r(d.end,"BAD_INDENT","All sequence items must start at the same column"):r(l,"MISSING_CHAR","Sequence item without - indicator");else{c=d.end,d.comment&&(a.comment=d.comment);continue}const p=f?t(n,f,d,r):e(n,d.end,u,null,d,r);n.schema.compat&&Ao(s.indent,f,r),l=p.range[2],a.items.push(p)}return a.range=[s.offset,l,c??l],a}function ir(t,e,n,s){let r="";if(t){let i=!1,o="";for(const a of t){const{source:l,type:c}=a;switch(c){case"space":i=!0;break;case"comment":{n&&!i&&s(a,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const u=l.substring(1)||" ";r?r+=o+u:r=u,o="";break}case"newline":r&&(o+=l),i=!0;break;default:s(a,"UNEXPECTED_TOKEN",`Unexpected ${c} at node end`)}e+=l.length}}return{comment:r,offset:e}}const Ui="Block collections are not allowed within flow collections",Zi=t=>t&&(t.type==="block-map"||t.type==="block-seq");function O2({composeNode:t,composeEmptyNode:e},n,s,r,i){const o=s.start.source==="{",a=o?"flow map":"flow sequence",l=i?.nodeClass??(o?ct:Ln),c=new l(n.schema);c.flow=!0;const u=n.atRoot;u&&(n.atRoot=!1),n.atKey&&(n.atKey=!1);let f=s.offset+s.start.source.length;for(let b=0;b<s.items.length;++b){const m=s.items[b],{start:S,key:x,sep:E,value:_}=m,T=_s(S,{flow:a,indicator:"explicit-key-ind",next:x??E?.[0],offset:f,onError:r,parentIndent:s.indent,startOnNewline:!1});if(!T.found){if(!T.anchor&&!T.tag&&!E&&!_){b===0&&T.comma?r(T.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${a}`):b<s.items.length-1&&r(T.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${a}`),T.comment&&(c.comment?c.comment+=`
`+T.comment:c.comment=T.comment),f=T.end;continue}!o&&n.options.strict&&Hs(x)&&r(x,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(b===0)T.comma&&r(T.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${a}`);else if(T.comma||r(T.start,"MISSING_CHAR",`Missing , between ${a} items`),T.comment){let w="";e:for(const v of S)switch(v.type){case"comma":case"space":break;case"comment":w=v.source.substring(1);break e;default:break e}if(w){let v=c.items[c.items.length-1];Ne(v)&&(v=v.value??v.key),v.comment?v.comment+=`
`+w:v.comment=w,T.comment=T.comment.substring(w.length+1)}}if(!o&&!E&&!T.found){const w=_?t(n,_,T,r):e(n,T.end,E,null,T,r);c.items.push(w),f=w.range[2],Zi(_)&&r(w.range,"BLOCK_IN_FLOW",Ui)}else{n.atKey=!0;const w=T.end,v=x?t(n,x,T,r):e(n,w,S,null,T,r);Zi(x)&&r(v.range,"BLOCK_IN_FLOW",Ui),n.atKey=!1;const k=_s(E??[],{flow:a,indicator:"map-value-ind",next:_,offset:v.range[2],onError:r,parentIndent:s.indent,startOnNewline:!1});if(k.found){if(!o&&!T.found&&n.options.strict){if(E)for(const C of E){if(C===k.found)break;if(C.type==="newline"){r(C,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}T.start<k.found.offset-1024&&r(k.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else _&&("source"in _&&_.source&&_.source[0]===":"?r(_,"MISSING_CHAR",`Missing space after : in ${a}`):r(k.start,"MISSING_CHAR",`Missing , or : between ${a} items`));const A=_?t(n,_,k,r):k.found?e(n,k.end,E,null,k,r):null;A?Zi(_)&&r(A.range,"BLOCK_IN_FLOW",Ui):k.comment&&(v.comment?v.comment+=`
`+k.comment:v.comment=k.comment);const N=new qe(v,A);if(n.options.keepSourceTokens&&(N.srcToken=m),o){const C=c;of(n,C.items,v)&&r(w,"DUPLICATE_KEY","Map keys must be unique"),C.items.push(N)}else{const C=new ct(n.schema);C.flow=!0,C.items.push(N);const O=(A??v).range;C.range=[v.range[0],O[1],O[2]],c.items.push(C)}f=A?A.range[2]:k.end}}const d=o?"}":"]",[p,...y]=s.end;let g=f;if(p&&p.source===d)g=p.offset+p.source.length;else{const b=a[0].toUpperCase()+a.substring(1),m=u?`${b} must end with a ${d}`:`${b} in block collection must be sufficiently indented and end with a ${d}`;r(f,u?"MISSING_CHAR":"BAD_INDENT",m),p&&p.source.length!==1&&y.unshift(p)}if(y.length>0){const b=ir(y,g,n.options.strict,r);b.comment&&(c.comment?c.comment+=`
`+b.comment:c.comment=b.comment),c.range=[s.offset,g,b.offset]}else c.range=[s.offset,g,g];return c}function Vi(t,e,n,s,r,i){const o=n.type==="block-map"?N2(t,e,n,s,i):n.type==="block-seq"?C2(t,e,n,s,i):O2(t,e,n,s,i),a=o.constructor;return r==="!"||r===a.tagName?(o.tag=a.tagName,o):(r&&(o.tag=r),o)}function j2(t,e,n,s,r){const i=s.tag,o=i?e.directives.tagName(i.source,d=>r(i,"TAG_RESOLVE_FAILED",d)):null;if(n.type==="block-seq"){const{anchor:d,newlineAfterProp:p}=s,y=d&&i?d.offset>i.offset?d:i:d??i;y&&(!p||p.offset<y.offset)&&r(y,"MISSING_CHAR","Missing newline after block sequence props")}const a=n.type==="block-map"?"map":n.type==="block-seq"?"seq":n.start.source==="{"?"map":"seq";if(!i||!o||o==="!"||o===ct.tagName&&a==="map"||o===Ln.tagName&&a==="seq")return Vi(t,e,n,r,o);let l=e.schema.tags.find(d=>d.tag===o&&d.collection===a);if(!l){const d=e.schema.knownTags[o];if(d&&d.collection===a)e.schema.tags.push(Object.assign({},d,{default:!1})),l=d;else return d?r(i,"BAD_COLLECTION_TYPE",`${d.tag} used for ${a} collection, but expects ${d.collection??"scalar"}`,!0):r(i,"TAG_RESOLVE_FAILED",`Unresolved tag: ${o}`,!0),Vi(t,e,n,r,o)}const c=Vi(t,e,n,r,o,l),u=l.resolve?.(c,d=>r(i,"TAG_RESOLVE_FAILED",d),e.options)??c,f=Ae(u)?u:new K(u);return f.range=c.range,f.tag=o,l?.format&&(f.format=l.format),f}function I2(t,e,n){const s=e.offset,r=M2(e,t.options.strict,n);if(!r)return{value:"",type:null,comment:"",range:[s,s,s]};const i=r.mode===">"?K.BLOCK_FOLDED:K.BLOCK_LITERAL,o=e.source?R2(e.source):[];let a=o.length;for(let g=o.length-1;g>=0;--g){const b=o[g][1];if(b===""||b==="\r")a=g;else break}if(a===0){const g=r.chomp==="+"&&o.length>0?`
`.repeat(Math.max(1,o.length-1)):"";let b=s+r.length;return e.source&&(b+=e.source.length),{value:g,type:i,comment:r.comment,range:[s,b,b]}}let l=e.indent+r.indent,c=e.offset+r.length,u=0;for(let g=0;g<a;++g){const[b,m]=o[g];if(m===""||m==="\r")r.indent===0&&b.length>l&&(l=b.length);else{b.length<l&&n(c+b.length,"MISSING_CHAR","Block scalars with more-indented leading empty lines must use an explicit indentation indicator"),r.indent===0&&(l=b.length),u=g,l===0&&!t.atRoot&&n(c,"BAD_INDENT","Block scalar values in collections must be indented");break}c+=b.length+m.length+1}for(let g=o.length-1;g>=a;--g)o[g][0].length>l&&(a=g+1);let f="",d="",p=!1;for(let g=0;g<u;++g)f+=o[g][0].slice(l)+`
`;for(let g=u;g<a;++g){let[b,m]=o[g];c+=b.length+m.length+1;const S=m[m.length-1]==="\r";if(S&&(m=m.slice(0,-1)),m&&b.length<l){const E=`Block scalar lines must not be less indented than their ${r.indent?"explicit indentation indicator":"first line"}`;n(c-m.length-(S?2:1),"BAD_INDENT",E),b=""}i===K.BLOCK_LITERAL?(f+=d+b.slice(l)+m,d=`
`):b.length>l||m[0]==="	"?(d===" "?d=`
`:!p&&d===`
`&&(d=`

`),f+=d+b.slice(l)+m,d=`
`,p=!0):m===""?d===`
`?f+=`
`:d=`
`:(f+=d+m,d=" ",p=!1)}switch(r.chomp){case"-":break;case"+":for(let g=a;g<o.length;++g)f+=`
`+o[g][0].slice(l);f[f.length-1]!==`
`&&(f+=`
`);break;default:f+=`
`}const y=s+r.length+e.source.length;return{value:f,type:i,comment:r.comment,range:[s,y,y]}}function M2({offset:t,props:e},n,s){if(e[0].type!=="block-scalar-header")return s(e[0],"IMPOSSIBLE","Block scalar header not found"),null;const{source:r}=e[0],i=r[0];let o=0,a="",l=-1;for(let d=1;d<r.length;++d){const p=r[d];if(!a&&(p==="-"||p==="+"))a=p;else{const y=Number(p);!o&&y?o=y:l===-1&&(l=t+d)}}l!==-1&&s(l,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${r}`);let c=!1,u="",f=r.length;for(let d=1;d<e.length;++d){const p=e[d];switch(p.type){case"space":c=!0;case"newline":f+=p.source.length;break;case"comment":n&&!c&&s(p,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),f+=p.source.length,u=p.source.substring(1);break;case"error":s(p,"UNEXPECTED_TOKEN",p.message),f+=p.source.length;break;default:{const y=`Unexpected token in block scalar header: ${p.type}`;s(p,"UNEXPECTED_TOKEN",y);const g=p.source;g&&typeof g=="string"&&(f+=g.length)}}}return{mode:i,indent:o,chomp:a,comment:u,length:f}}function R2(t){const e=t.split(/\n( *)/),n=e[0],s=n.match(/^( *)/),i=[s?.[1]?[s[1],n.slice(s[1].length)]:["",n]];for(let o=1;o<e.length;o+=2)i.push([e[o],e[o+1]]);return i}function P2(t,e,n){const{offset:s,type:r,source:i,end:o}=t;let a,l;const c=(d,p,y)=>n(s+d,p,y);switch(r){case"scalar":a=K.PLAIN,l=$2(i,c);break;case"single-quoted-scalar":a=K.QUOTE_SINGLE,l=D2(i,c);break;case"double-quoted-scalar":a=K.QUOTE_DOUBLE,l=L2(i,c);break;default:return n(t,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${r}`),{value:"",type:null,comment:"",range:[s,s+i.length,s+i.length]}}const u=s+i.length,f=ir(o,u,e,n);return{value:l,type:a,comment:f.comment,range:[s,u,f.offset]}}function $2(t,e){let n="";switch(t[0]){case"	":n="a tab character";break;case",":n="flow indicator character ,";break;case"%":n="directive indicator character %";break;case"|":case">":{n=`block scalar indicator ${t[0]}`;break}case"@":case"`":{n=`reserved character ${t[0]}`;break}}return n&&e(0,"BAD_SCALAR_START",`Plain value cannot start with ${n}`),af(t)}function D2(t,e){return(t[t.length-1]!=="'"||t.length===1)&&e(t.length,"MISSING_CHAR","Missing closing 'quote"),af(t.slice(1,-1)).replace(/''/g,"'")}function af(t){let e,n;try{e=new RegExp(`(.*?)(?<![ 	])[ 	]*\r?
`,"sy"),n=new RegExp(`[ 	]*(.*?)(?:(?<![ 	])[ 	]*)?\r?
`,"sy")}catch{e=/(.*?)[ \t]*\r?\n/sy,n=/[ \t]*(.*?)[ \t]*\r?\n/sy}let s=e.exec(t);if(!s)return t;let r=s[1],i=" ",o=e.lastIndex;for(n.lastIndex=o;s=n.exec(t);)s[1]===""?i===`
`?r+=i:i=`
`:(r+=i+s[1],i=" "),o=n.lastIndex;const a=/[ \t]*(.*)/sy;return a.lastIndex=o,s=a.exec(t),r+i+(s?.[1]??"")}function L2(t,e){let n="";for(let s=1;s<t.length-1;++s){const r=t[s];if(!(r==="\r"&&t[s+1]===`
`))if(r===`
`){const{fold:i,offset:o}=z2(t,s);n+=i,s=o}else if(r==="\\"){let i=t[++s];const o=F2[i];if(o)n+=o;else if(i===`
`)for(i=t[s+1];i===" "||i==="	";)i=t[++s+1];else if(i==="\r"&&t[s+1]===`
`)for(i=t[++s+1];i===" "||i==="	";)i=t[++s+1];else if(i==="x"||i==="u"||i==="U"){const a={x:2,u:4,U:8}[i];n+=B2(t,s+1,a,e),s+=a}else{const a=t.substr(s-1,2);e(s-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${a}`),n+=a}}else if(r===" "||r==="	"){const i=s;let o=t[s+1];for(;o===" "||o==="	";)o=t[++s+1];o!==`
`&&!(o==="\r"&&t[s+2]===`
`)&&(n+=s>i?t.slice(i,s+1):r)}else n+=r}return(t[t.length-1]!=='"'||t.length===1)&&e(t.length,"MISSING_CHAR",'Missing closing "quote'),n}function z2(t,e){let n="",s=t[e+1];for(;(s===" "||s==="	"||s===`
`||s==="\r")&&!(s==="\r"&&t[e+2]!==`
`);)s===`
`&&(n+=`
`),e+=1,s=t[e+1];return n||(n=" "),{fold:n,offset:e}}const F2={0:"\0",a:"\x07",b:"\b",e:"\x1B",f:"\f",n:`
`,r:"\r",t:"	",v:"\v",N:"",_:"",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","	":"	"};function B2(t,e,n,s){const r=t.substr(e,n),o=r.length===n&&/^[0-9a-fA-F]+$/.test(r)?parseInt(r,16):NaN;if(isNaN(o)){const a=t.substr(e-2,n+2);return s(e-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${a}`),a}return String.fromCodePoint(o)}function lf(t,e,n,s){const{value:r,type:i,comment:o,range:a}=e.type==="block-scalar"?I2(t,e,s):P2(e,t.options.strict,s),l=n?t.directives.tagName(n.source,f=>s(n,"TAG_RESOLVE_FAILED",f)):null;let c;t.options.stringKeys&&t.atKey?c=t.schema[Ft]:l?c=U2(t.schema,r,l,n,s):e.type==="scalar"?c=Z2(t,r,e,s):c=t.schema[Ft];let u;try{const f=c.resolve(r,d=>s(n??e,"TAG_RESOLVE_FAILED",d),t.options);u=ge(f)?f:new K(f)}catch(f){const d=f instanceof Error?f.message:String(f);s(n??e,"TAG_RESOLVE_FAILED",d),u=new K(r)}return u.range=a,u.source=r,i&&(u.type=i),l&&(u.tag=l),c.format&&(u.format=c.format),o&&(u.comment=o),u}function U2(t,e,n,s,r){if(n==="!")return t[Ft];const i=[];for(const a of t.tags)if(!a.collection&&a.tag===n)if(a.default&&a.test)i.push(a);else return a;for(const a of i)if(a.test?.test(e))return a;const o=t.knownTags[n];return o&&!o.collection?(t.tags.push(Object.assign({},o,{default:!1,test:void 0})),o):(r(s,"TAG_RESOLVE_FAILED",`Unresolved tag: ${n}`,n!=="tag:yaml.org,2002:str"),t[Ft])}function Z2({atKey:t,directives:e,schema:n},s,r,i){const o=n.tags.find(a=>(a.default===!0||t&&a.default==="key")&&a.test?.test(s))||n[Ft];if(n.compat){const a=n.compat.find(l=>l.default&&l.test?.test(s))??n[Ft];if(o.tag!==a.tag){const l=e.tagString(o.tag),c=e.tagString(a.tag),u=`Value may be parsed as either ${l} or ${c}`;i(r,"TAG_RESOLVE_FAILED",u,!0)}}return o}function V2(t,e,n){if(e){n??(n=e.length);for(let s=n-1;s>=0;--s){let r=e[s];switch(r.type){case"space":case"comment":case"newline":t-=r.source.length;continue}for(r=e[++s];r?.type==="space";)t+=r.source.length,r=e[++s];break}}return t}const W2={composeNode:cf,composeEmptyNode:ha};function cf(t,e,n,s){const r=t.atKey,{spaceBefore:i,comment:o,anchor:a,tag:l}=n;let c,u=!0;switch(e.type){case"alias":c=Y2(t,e,s),(a||l)&&s(e,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":c=lf(t,e,l,s),a&&(c.anchor=a.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":c=j2(W2,t,e,n,s),a&&(c.anchor=a.source.substring(1));break;default:{const f=e.type==="error"?e.message:`Unsupported token (type: ${e.type})`;s(e,"UNEXPECTED_TOKEN",f),c=ha(t,e.offset,void 0,null,n,s),u=!1}}return a&&c.anchor===""&&s(a,"BAD_ALIAS","Anchor cannot be an empty string"),r&&t.options.stringKeys&&(!ge(c)||typeof c.value!="string"||c.tag&&c.tag!=="tag:yaml.org,2002:str")&&s(l??e,"NON_STRING_KEY","With stringKeys, all keys must be strings"),i&&(c.spaceBefore=!0),o&&(e.type==="scalar"&&e.source===""?c.comment=o:c.commentBefore=o),t.options.keepSourceTokens&&u&&(c.srcToken=e),c}function ha(t,e,n,s,{spaceBefore:r,comment:i,anchor:o,tag:a,end:l},c){const u={type:"scalar",offset:V2(e,n,s),indent:-1,source:""},f=lf(t,u,a,c);return o&&(f.anchor=o.source.substring(1),f.anchor===""&&c(o,"BAD_ALIAS","Anchor cannot be an empty string")),r&&(f.spaceBefore=!0),i&&(f.comment=i,f.range[2]=l),f}function Y2({options:t},{offset:e,source:n,end:s},r){const i=new ea(n.substring(1));i.source===""&&r(e,"BAD_ALIAS","Alias cannot be an empty string"),i.source.endsWith(":")&&r(e+n.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",!0);const o=e+n.length,a=ir(s,o,t.strict,r);return i.range=[e,o,a.offset],a.comment&&(i.comment=a.comment),i}function G2(t,e,{offset:n,start:s,value:r,end:i},o){const a=Object.assign({_directives:e},t),l=new Si(void 0,a),c={atKey:!1,atRoot:!0,directives:l.directives,options:l.options,schema:l.schema},u=_s(s,{indicator:"doc-start",next:r??i?.[0],offset:n,onError:o,parentIndent:0,startOnNewline:!0});u.found&&(l.directives.docStart=!0,r&&(r.type==="block-map"||r.type==="block-seq")&&!u.hasNewline&&o(u.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),l.contents=r?cf(c,r,u,o):ha(c,u.end,s,null,u,o);const f=l.contents.range[2],d=ir(i,f,!1,o);return d.comment&&(l.comment=d.comment),l.range=[n,f,d.offset],l}function Is(t){if(typeof t=="number")return[t,t+1];if(Array.isArray(t))return t.length===2?t:[t[0],t[1]];const{offset:e,source:n}=t;return[e,e+(typeof n=="string"?n.length:1)]}function jl(t){let e="",n=!1,s=!1;for(let r=0;r<t.length;++r){const i=t[r];switch(i[0]){case"#":e+=(e===""?"":s?`

`:`
`)+(i.substring(1)||" "),n=!0,s=!1;break;case"%":t[r+1]?.[0]!=="#"&&(r+=1),n=!1;break;default:n||(s=!0),n=!1}}return{comment:e,afterEmptyLine:s}}class q2{constructor(e={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(n,s,r,i)=>{const o=Is(n);i?this.warnings.push(new A2(o,s,r)):this.errors.push(new Rs(o,s,r))},this.directives=new Ye({version:e.version||"1.2"}),this.options=e}decorate(e,n){const{comment:s,afterEmptyLine:r}=jl(this.prelude);if(s){const i=e.contents;if(n)e.comment=e.comment?`${e.comment}
${s}`:s;else if(r||e.directives.docStart||!i)e.commentBefore=s;else if(Te(i)&&!i.flow&&i.items.length>0){let o=i.items[0];Ne(o)&&(o=o.key);const a=o.commentBefore;o.commentBefore=a?`${s}
${a}`:s}else{const o=i.commentBefore;i.commentBefore=o?`${s}
${o}`:s}}n?(Array.prototype.push.apply(e.errors,this.errors),Array.prototype.push.apply(e.warnings,this.warnings)):(e.errors=this.errors,e.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:jl(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(e,n=!1,s=-1){for(const r of e)yield*this.next(r);yield*this.end(n,s)}*next(e){switch(e.type){case"directive":this.directives.add(e.source,(n,s,r)=>{const i=Is(e);i[0]+=n,this.onError(i,"BAD_DIRECTIVE",s,r)}),this.prelude.push(e.source),this.atDirectives=!0;break;case"document":{const n=G2(this.options,this.directives,e,this.onError);this.atDirectives&&!n.directives.docStart&&this.onError(e,"MISSING_CHAR","Missing directives-end/doc-start indicator line"),this.decorate(n,!1),this.doc&&(yield this.doc),this.doc=n,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(e.source);break;case"error":{const n=e.source?`${e.message}: ${JSON.stringify(e.source)}`:e.message,s=new Rs(Is(e),"UNEXPECTED_TOKEN",n);this.atDirectives||!this.doc?this.errors.push(s):this.doc.errors.push(s);break}case"doc-end":{if(!this.doc){const s="Unexpected doc-end without preceding document";this.errors.push(new Rs(Is(e),"UNEXPECTED_TOKEN",s));break}this.doc.directives.docEnd=!0;const n=ir(e.end,e.offset+e.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),n.comment){const s=this.doc.comment;this.doc.comment=s?`${s}
${n.comment}`:n.comment}this.doc.range[2]=n.offset;break}default:this.errors.push(new Rs(Is(e),"UNEXPECTED_TOKEN",`Unsupported token ${e.type}`))}}*end(e=!1,n=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(e){const s=Object.assign({_directives:this.directives},this.options),r=new Si(void 0,s);this.atDirectives&&this.onError(n,"MISSING_CHAR","Missing directives-end indicator line"),r.range=[0,n,n],this.decorate(r,!1),yield r}}}const uf="\uFEFF",ff="",hf="",No="";function K2(t){switch(t){case uf:return"byte-order-mark";case ff:return"doc-mode";case hf:return"flow-error-end";case No:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case`
`:case`\r
`:return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(t[0]){case" ":case"	":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}function St(t){switch(t){case void 0:case" ":case`
`:case"\r":case"	":return!0;default:return!1}}const Il=new Set("0123456789ABCDEFabcdef"),H2=new Set("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()"),Nr=new Set(",[]{}"),X2=new Set(` ,[]{}
\r	`),Wi=t=>!t||X2.has(t);class Q2{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(e,n=!1){if(e){if(typeof e!="string")throw TypeError("source is not a string");this.buffer=this.buffer?this.buffer+e:e,this.lineEndPos=null}this.atEnd=!n;let s=this.next??"stream";for(;s&&(n||this.hasChars(1));)s=yield*this.parseNext(s)}atLineEnd(){let e=this.pos,n=this.buffer[e];for(;n===" "||n==="	";)n=this.buffer[++e];return!n||n==="#"||n===`
`?!0:n==="\r"?this.buffer[e+1]===`
`:!1}charAt(e){return this.buffer[this.pos+e]}continueScalar(e){let n=this.buffer[e];if(this.indentNext>0){let s=0;for(;n===" ";)n=this.buffer[++s+e];if(n==="\r"){const r=this.buffer[s+e+1];if(r===`
`||!r&&!this.atEnd)return e+s+1}return n===`
`||s>=this.indentNext||!n&&!this.atEnd?e+s:-1}if(n==="-"||n==="."){const s=this.buffer.substr(e,3);if((s==="---"||s==="...")&&St(this.buffer[e+3]))return-1}return e}getLine(){let e=this.lineEndPos;return(typeof e!="number"||e!==-1&&e<this.pos)&&(e=this.buffer.indexOf(`
`,this.pos),this.lineEndPos=e),e===-1?this.atEnd?this.buffer.substring(this.pos):null:(this.buffer[e-1]==="\r"&&(e-=1),this.buffer.substring(this.pos,e))}hasChars(e){return this.pos+e<=this.buffer.length}setNext(e){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=e,null}peek(e){return this.buffer.substr(this.pos,e)}*parseNext(e){switch(e){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let e=this.getLine();if(e===null)return this.setNext("stream");if(e[0]===uf&&(yield*this.pushCount(1),e=e.substring(1)),e[0]==="%"){let n=e.length,s=e.indexOf("#");for(;s!==-1;){const i=e[s-1];if(i===" "||i==="	"){n=s-1;break}else s=e.indexOf("#",s+1)}for(;;){const i=e[n-1];if(i===" "||i==="	")n-=1;else break}const r=(yield*this.pushCount(n))+(yield*this.pushSpaces(!0));return yield*this.pushCount(e.length-r),this.pushNewline(),"stream"}if(this.atLineEnd()){const n=yield*this.pushSpaces(!0);return yield*this.pushCount(e.length-n),yield*this.pushNewline(),"stream"}return yield ff,yield*this.parseLineStart()}*parseLineStart(){const e=this.charAt(0);if(!e&&!this.atEnd)return this.setNext("line-start");if(e==="-"||e==="."){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");const n=this.peek(3);if((n==="---"||n==="...")&&St(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,n==="---"?"doc":"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!St(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){const[e,n]=this.peek(2);if(!n&&!this.atEnd)return this.setNext("block-start");if((e==="-"||e==="?"||e===":")&&St(n)){const s=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=s,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);const e=this.getLine();if(e===null)return this.setNext("doc");let n=yield*this.pushIndicators();switch(e[n]){case"#":yield*this.pushCount(e.length-n);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(Wi),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return n+=yield*this.parseBlockScalarHeader(),n+=yield*this.pushSpaces(!0),yield*this.pushCount(e.length-n),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let e,n,s=-1;do e=yield*this.pushNewline(),e>0?(n=yield*this.pushSpaces(!1),this.indentValue=s=n):n=0,n+=yield*this.pushSpaces(!0);while(e+n>0);const r=this.getLine();if(r===null)return this.setNext("flow");if((s!==-1&&s<this.indentNext&&r[0]!=="#"||s===0&&(r.startsWith("---")||r.startsWith("..."))&&St(r[3]))&&!(s===this.indentNext-1&&this.flowLevel===1&&(r[0]==="]"||r[0]==="}")))return this.flowLevel=0,yield hf,yield*this.parseLineStart();let i=0;for(;r[i]===",";)i+=yield*this.pushCount(1),i+=yield*this.pushSpaces(!0),this.flowKey=!1;switch(i+=yield*this.pushIndicators(),r[i]){case void 0:return"flow";case"#":return yield*this.pushCount(r.length-i),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(Wi),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{const o=this.charAt(1);if(this.flowKey||St(o)||o===",")return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){const e=this.charAt(0);let n=this.buffer.indexOf(e,this.pos+1);if(e==="'")for(;n!==-1&&this.buffer[n+1]==="'";)n=this.buffer.indexOf("'",n+2);else for(;n!==-1;){let i=0;for(;this.buffer[n-1-i]==="\\";)i+=1;if(i%2===0)break;n=this.buffer.indexOf('"',n+1)}const s=this.buffer.substring(0,n);let r=s.indexOf(`
`,this.pos);if(r!==-1){for(;r!==-1;){const i=this.continueScalar(r+1);if(i===-1)break;r=s.indexOf(`
`,i)}r!==-1&&(n=r-(s[r-1]==="\r"?2:1))}if(n===-1){if(!this.atEnd)return this.setNext("quoted-scalar");n=this.buffer.length}return yield*this.pushToIndex(n+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let e=this.pos;for(;;){const n=this.buffer[++e];if(n==="+")this.blockScalarKeep=!0;else if(n>"0"&&n<="9")this.blockScalarIndent=Number(n)-1;else if(n!=="-")break}return yield*this.pushUntil(n=>St(n)||n==="#")}*parseBlockScalar(){let e=this.pos-1,n=0,s;e:for(let i=this.pos;s=this.buffer[i];++i)switch(s){case" ":n+=1;break;case`
`:e=i,n=0;break;case"\r":{const o=this.buffer[i+1];if(!o&&!this.atEnd)return this.setNext("block-scalar");if(o===`
`)break}default:break e}if(!s&&!this.atEnd)return this.setNext("block-scalar");if(n>=this.indentNext){this.blockScalarIndent===-1?this.indentNext=n:this.indentNext=this.blockScalarIndent+(this.indentNext===0?1:this.indentNext);do{const i=this.continueScalar(e+1);if(i===-1)break;e=this.buffer.indexOf(`
`,i)}while(e!==-1);if(e===-1){if(!this.atEnd)return this.setNext("block-scalar");e=this.buffer.length}}let r=e+1;for(s=this.buffer[r];s===" ";)s=this.buffer[++r];if(s==="	"){for(;s==="	"||s===" "||s==="\r"||s===`
`;)s=this.buffer[++r];e=r-1}else if(!this.blockScalarKeep)do{let i=e-1,o=this.buffer[i];o==="\r"&&(o=this.buffer[--i]);const a=i;for(;o===" ";)o=this.buffer[--i];if(o===`
`&&i>=this.pos&&i+1+n>a)e=i;else break}while(!0);return yield No,yield*this.pushToIndex(e+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){const e=this.flowLevel>0;let n=this.pos-1,s=this.pos-1,r;for(;r=this.buffer[++s];)if(r===":"){const i=this.buffer[s+1];if(St(i)||e&&Nr.has(i))break;n=s}else if(St(r)){let i=this.buffer[s+1];if(r==="\r"&&(i===`
`?(s+=1,r=`
`,i=this.buffer[s+1]):n=s),i==="#"||e&&Nr.has(i))break;if(r===`
`){const o=this.continueScalar(s+1);if(o===-1)break;s=Math.max(s,o-2)}}else{if(e&&Nr.has(r))break;n=s}return!r&&!this.atEnd?this.setNext("plain-scalar"):(yield No,yield*this.pushToIndex(n+1,!0),e?"flow":"doc")}*pushCount(e){return e>0?(yield this.buffer.substr(this.pos,e),this.pos+=e,e):0}*pushToIndex(e,n){const s=this.buffer.slice(this.pos,e);return s?(yield s,this.pos+=s.length,s.length):(n&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(Wi))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"-":case"?":case":":{const e=this.flowLevel>0,n=this.charAt(1);if(St(n)||e&&Nr.has(n))return e?this.flowKey&&(this.flowKey=!1):this.indentNext=this.indentValue+1,(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}}return 0}*pushTag(){if(this.charAt(1)==="<"){let e=this.pos+2,n=this.buffer[e];for(;!St(n)&&n!==">";)n=this.buffer[++e];return yield*this.pushToIndex(n===">"?e+1:e,!1)}else{let e=this.pos+1,n=this.buffer[e];for(;n;)if(H2.has(n))n=this.buffer[++e];else if(n==="%"&&Il.has(this.buffer[e+1])&&Il.has(this.buffer[e+2]))n=this.buffer[e+=3];else break;return yield*this.pushToIndex(e,!1)}}*pushNewline(){const e=this.buffer[this.pos];return e===`
`?yield*this.pushCount(1):e==="\r"&&this.charAt(1)===`
`?yield*this.pushCount(2):0}*pushSpaces(e){let n=this.pos-1,s;do s=this.buffer[++n];while(s===" "||e&&s==="	");const r=n-this.pos;return r>0&&(yield this.buffer.substr(this.pos,r),this.pos=n),r}*pushUntil(e){let n=this.pos,s=this.buffer[n];for(;!e(s);)s=this.buffer[++n];return yield*this.pushToIndex(n,!1)}}class J2{constructor(){this.lineStarts=[],this.addNewLine=e=>this.lineStarts.push(e),this.linePos=e=>{let n=0,s=this.lineStarts.length;for(;n<s;){const i=n+s>>1;this.lineStarts[i]<e?n=i+1:s=i}if(this.lineStarts[n]===e)return{line:n+1,col:1};if(n===0)return{line:0,col:e};const r=this.lineStarts[n-1];return{line:n,col:e-r+1}}}}function an(t,e){for(let n=0;n<t.length;++n)if(t[n].type===e)return!0;return!1}function Ml(t){for(let e=0;e<t.length;++e)switch(t[e].type){case"space":case"comment":case"newline":break;default:return e}return-1}function df(t){switch(t?.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function Cr(t){switch(t.type){case"document":return t.start;case"block-map":{const e=t.items[t.items.length-1];return e.sep??e.start}case"block-seq":return t.items[t.items.length-1].start;default:return[]}}function Qn(t){if(t.length===0)return[];let e=t.length;e:for(;--e>=0;)switch(t[e].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;t[++e]?.type==="space";);return t.splice(e,t.length)}function Rl(t){if(t.start.type==="flow-seq-start")for(const e of t.items)e.sep&&!e.value&&!an(e.start,"explicit-key-ind")&&!an(e.sep,"map-value-ind")&&(e.key&&(e.value=e.key),delete e.key,df(e.value)?e.value.end?Array.prototype.push.apply(e.value.end,e.sep):e.value.end=e.sep:Array.prototype.push.apply(e.start,e.sep),delete e.sep)}class ex{constructor(e){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new Q2,this.onNewLine=e}*parse(e,n=!1){this.onNewLine&&this.offset===0&&this.onNewLine(0);for(const s of this.lexer.lex(e,n))yield*this.next(s);n||(yield*this.end())}*next(e){if(this.source=e,this.atScalar){this.atScalar=!1,yield*this.step(),this.offset+=e.length;return}const n=K2(e);if(n)if(n==="scalar")this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=n,yield*this.step(),n){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+e.length);break;case"space":this.atNewLine&&e[0]===" "&&(this.indent+=e.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=e.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=e.length}else{const s=`Not a YAML token: ${e}`;yield*this.pop({type:"error",offset:this.offset,message:s,source:e}),this.offset+=e.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){const e=this.peek(1);if(this.type==="doc-end"&&(!e||e.type!=="doc-end")){for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source});return}if(!e)return yield*this.stream();switch(e.type){case"document":return yield*this.document(e);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(e);case"block-scalar":return yield*this.blockScalar(e);case"block-map":return yield*this.blockMap(e);case"block-seq":return yield*this.blockSequence(e);case"flow-collection":return yield*this.flowCollection(e);case"doc-end":return yield*this.documentEnd(e)}yield*this.pop()}peek(e){return this.stack[this.stack.length-e]}*pop(e){const n=e??this.stack.pop();if(!n)yield{type:"error",offset:this.offset,source:"",message:"Tried to pop an empty stack"};else if(this.stack.length===0)yield n;else{const s=this.peek(1);switch(n.type==="block-scalar"?n.indent="indent"in s?s.indent:0:n.type==="flow-collection"&&s.type==="document"&&(n.indent=0),n.type==="flow-collection"&&Rl(n),s.type){case"document":s.value=n;break;case"block-scalar":s.props.push(n);break;case"block-map":{const r=s.items[s.items.length-1];if(r.value){s.items.push({start:[],key:n,sep:[]}),this.onKeyLine=!0;return}else if(r.sep)r.value=n;else{Object.assign(r,{key:n,sep:[]}),this.onKeyLine=!r.explicitKey;return}break}case"block-seq":{const r=s.items[s.items.length-1];r.value?s.items.push({start:[],value:n}):r.value=n;break}case"flow-collection":{const r=s.items[s.items.length-1];!r||r.value?s.items.push({start:[],key:n,sep:[]}):r.sep?r.value=n:Object.assign(r,{key:n,sep:[]});return}default:yield*this.pop(),yield*this.pop(n)}if((s.type==="document"||s.type==="block-map"||s.type==="block-seq")&&(n.type==="block-map"||n.type==="block-seq")){const r=n.items[n.items.length-1];r&&!r.sep&&!r.value&&r.start.length>0&&Ml(r.start)===-1&&(n.indent===0||r.start.every(i=>i.type!=="comment"||i.indent<n.indent))&&(s.type==="document"?s.end=r.start:s.items.push({start:r.start}),n.items.splice(-1,1))}}}*stream(){switch(this.type){case"directive-line":yield{type:"directive",offset:this.offset,source:this.source};return;case"byte-order-mark":case"space":case"comment":case"newline":yield this.sourceToken;return;case"doc-mode":case"doc-start":{const e={type:"document",offset:this.offset,start:[]};this.type==="doc-start"&&e.start.push(this.sourceToken),this.stack.push(e);return}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(e){if(e.value)return yield*this.lineEnd(e);switch(this.type){case"doc-start":{Ml(e.start)!==-1?(yield*this.pop(),yield*this.step()):e.start.push(this.sourceToken);return}case"anchor":case"tag":case"space":case"comment":case"newline":e.start.push(this.sourceToken);return}const n=this.startBlockValue(e);n?this.stack.push(n):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(e){if(this.type==="map-value-ind"){const n=Cr(this.peek(2)),s=Qn(n);let r;e.end?(r=e.end,r.push(this.sourceToken),delete e.end):r=[this.sourceToken];const i={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:s,key:e,sep:r}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=i}else yield*this.lineEnd(e)}*blockScalar(e){switch(this.type){case"space":case"comment":case"newline":e.props.push(this.sourceToken);return;case"scalar":if(e.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let n=this.source.indexOf(`
`)+1;for(;n!==0;)this.onNewLine(this.offset+n),n=this.source.indexOf(`
`,n)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(e){const n=e.items[e.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,n.value){const s="end"in n.value?n.value.end:void 0;(Array.isArray(s)?s[s.length-1]:void 0)?.type==="comment"?s?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)e.items.push({start:[this.sourceToken]});else if(n.sep)n.sep.push(this.sourceToken);else{if(this.atIndentedComment(n.start,e.indent)){const r=e.items[e.items.length-2]?.value?.end;if(Array.isArray(r)){Array.prototype.push.apply(r,n.start),r.push(this.sourceToken),e.items.pop();return}}n.start.push(this.sourceToken)}return}if(this.indent>=e.indent){const s=!this.onKeyLine&&this.indent===e.indent,r=s&&(n.sep||n.explicitKey)&&this.type!=="seq-item-ind";let i=[];if(r&&n.sep&&!n.value){const o=[];for(let a=0;a<n.sep.length;++a){const l=n.sep[a];switch(l.type){case"newline":o.push(a);break;case"space":break;case"comment":l.indent>e.indent&&(o.length=0);break;default:o.length=0}}o.length>=2&&(i=n.sep.splice(o[1]))}switch(this.type){case"anchor":case"tag":r||n.value?(i.push(this.sourceToken),e.items.push({start:i}),this.onKeyLine=!0):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"explicit-key-ind":!n.sep&&!n.explicitKey?(n.start.push(this.sourceToken),n.explicitKey=!0):r||n.value?(i.push(this.sourceToken),e.items.push({start:i,explicitKey:!0})):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken],explicitKey:!0}]}),this.onKeyLine=!0;return;case"map-value-ind":if(n.explicitKey)if(n.sep)if(n.value)e.items.push({start:[],key:null,sep:[this.sourceToken]});else if(an(n.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:i,key:null,sep:[this.sourceToken]}]});else if(df(n.key)&&!an(n.sep,"newline")){const o=Qn(n.start),a=n.key,l=n.sep;l.push(this.sourceToken),delete n.key,delete n.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:a,sep:l}]})}else i.length>0?n.sep=n.sep.concat(i,this.sourceToken):n.sep.push(this.sourceToken);else if(an(n.start,"newline"))Object.assign(n,{key:null,sep:[this.sourceToken]});else{const o=Qn(n.start);this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:null,sep:[this.sourceToken]}]})}else n.sep?n.value||r?e.items.push({start:i,key:null,sep:[this.sourceToken]}):an(n.sep,"map-value-ind")?this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):n.sep.push(this.sourceToken):Object.assign(n,{key:null,sep:[this.sourceToken]});this.onKeyLine=!0;return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const o=this.flowScalar(this.type);r||n.value?(e.items.push({start:i,key:o,sep:[]}),this.onKeyLine=!0):n.sep?this.stack.push(o):(Object.assign(n,{key:o,sep:[]}),this.onKeyLine=!0);return}default:{const o=this.startBlockValue(e);if(o){if(o.type==="block-seq"){if(!n.explicitKey&&n.sep&&!an(n.sep,"newline")){yield*this.pop({type:"error",offset:this.offset,message:"Unexpected block-seq-ind on same line with key",source:this.source});return}}else s&&e.items.push({start:i});this.stack.push(o);return}}}}yield*this.pop(),yield*this.step()}*blockSequence(e){const n=e.items[e.items.length-1];switch(this.type){case"newline":if(n.value){const s="end"in n.value?n.value.end:void 0;(Array.isArray(s)?s[s.length-1]:void 0)?.type==="comment"?s?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)e.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(n.start,e.indent)){const r=e.items[e.items.length-2]?.value?.end;if(Array.isArray(r)){Array.prototype.push.apply(r,n.start),r.push(this.sourceToken),e.items.pop();return}}n.start.push(this.sourceToken)}return;case"anchor":case"tag":if(n.value||this.indent<=e.indent)break;n.start.push(this.sourceToken);return;case"seq-item-ind":if(this.indent!==e.indent)break;n.value||an(n.start,"seq-item-ind")?e.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken);return}if(this.indent>e.indent){const s=this.startBlockValue(e);if(s){this.stack.push(s);return}}yield*this.pop(),yield*this.step()}*flowCollection(e){const n=e.items[e.items.length-1];if(this.type==="flow-error-end"){let s;do yield*this.pop(),s=this.peek(1);while(s&&s.type==="flow-collection")}else if(e.end.length===0){switch(this.type){case"comma":case"explicit-key-ind":!n||n.sep?e.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken);return;case"map-value-ind":!n||n.value?e.items.push({start:[],key:null,sep:[this.sourceToken]}):n.sep?n.sep.push(this.sourceToken):Object.assign(n,{key:null,sep:[this.sourceToken]});return;case"space":case"comment":case"newline":case"anchor":case"tag":!n||n.value?e.items.push({start:[this.sourceToken]}):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const r=this.flowScalar(this.type);!n||n.value?e.items.push({start:[],key:r,sep:[]}):n.sep?this.stack.push(r):Object.assign(n,{key:r,sep:[]});return}case"flow-map-end":case"flow-seq-end":e.end.push(this.sourceToken);return}const s=this.startBlockValue(e);s?this.stack.push(s):(yield*this.pop(),yield*this.step())}else{const s=this.peek(2);if(s.type==="block-map"&&(this.type==="map-value-ind"&&s.indent===e.indent||this.type==="newline"&&!s.items[s.items.length-1].sep))yield*this.pop(),yield*this.step();else if(this.type==="map-value-ind"&&s.type!=="flow-collection"){const r=Cr(s),i=Qn(r);Rl(e);const o=e.end.splice(1,e.end.length);o.push(this.sourceToken);const a={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:i,key:e,sep:o}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=a}else yield*this.lineEnd(e)}}flowScalar(e){if(this.onNewLine){let n=this.source.indexOf(`
`)+1;for(;n!==0;)this.onNewLine(this.offset+n),n=this.source.indexOf(`
`,n)+1}return{type:e,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(e){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;const n=Cr(e),s=Qn(n);return s.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:s,explicitKey:!0}]}}case"map-value-ind":{this.onKeyLine=!0;const n=Cr(e),s=Qn(n);return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:s,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(e,n){return this.type!=="comment"||this.indent<=n?!1:e.every(s=>s.type==="newline"||s.type==="space")}*documentEnd(e){this.type!=="doc-mode"&&(e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop()))}*lineEnd(e){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;case"space":case"comment":default:e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop())}}}function tx(t){const e=t.prettyErrors!==!1;return{lineCounter:t.lineCounter||e&&new J2||null,prettyErrors:e}}function nx(t,e={}){const{lineCounter:n,prettyErrors:s}=tx(e),r=new ex(n?.addNewLine),i=new q2(e);let o=null;for(const a of i.compose(r.parse(t),!0,t.length))if(!o)o=a;else if(o.options.logLevel!=="silent"){o.errors.push(new Rs(a.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}return s&&n&&(o.errors.forEach(Cl(t,n)),o.warnings.forEach(Cl(t,n))),o}function pf(t,e,n){let s;const r=nx(t,n);if(!r)return null;if(r.warnings.forEach(i=>zu(r.options.logLevel,i)),r.errors.length>0){if(r.options.logLevel!=="silent")throw r.errors[0];r.errors=[]}return r.toJS(Object.assign({reviver:s},n))}const mf=Co((t,e,n)=>({trains:{},currentTrain:void 0,setTrainsFromYml:s=>{try{const r=pf(s),i=Zy(r);i.valid?t({trains:nu.parse(r),parseErrors:void 0}):(console.error("Invalid YAML data:",i.errors),Pe.error("We couldn't load your trains. Please check that you uploaded the SavedTrainProperties YAML file from TrainCarts. See the browser console for more details.",{duration:1e4}),t({trains:{},parseErrors:i.errors}))}catch(r){console.error("Error parsing YAML:",r),Pe.error("We couldn't read your file. Please make sure it's a valid YAML and try again. See the browser console for more details.",{duration:1e4}),t({trains:{},parseErrors:["Failed to parse YAML.",String(r)]});return}},setTrains:s=>t({trains:s}),setCurrentTrain:s=>t({currentTrain:s}),clearCurrentTrain:()=>t({currentTrain:void 0}),reset:()=>t(n.getInitialState())}));function sx(){const t=L.c(61),e=pt(),n=mf(),[s,r]=P.useState(n.currentTrain),[i,o]=P.useState(e.cart),[a,l]=P.useState(e.metadata.projectName);let c;t[0]!==n.trains?(c=Object.keys(n.trains),t[0]=n.trains,t[1]=c):c=t[1];const u=c.length;let f,d;t[2]!==n.currentTrain?(f=()=>{n.currentTrain&&r(n.currentTrain)},d=[n.currentTrain],t[2]=n.currentTrain,t[3]=f,t[4]=d):(f=t[3],d=t[4]),P.useEffect(f,d);let p,y;t[5]!==e.cart?(p=()=>{e.cart&&o(e.cart)},y=[e.cart],t[5]=e.cart,t[6]=p,t[7]=y):(p=t[6],y=t[7]),P.useEffect(p,y);let g,b;t[8]!==s?(g=()=>{if(s&&s.carts){const q=Object.values(s.carts)[0];o(q)}},b=[s],t[8]=s,t[9]=g,t[10]=b):(g=t[9],b=t[10]),P.useEffect(g,b);let m;t[11]===Symbol.for("react.memo_cache_sentinel")?(m=h.jsx(Ho,{children:"New TCA-Project"}),t[11]=m):m=t[11];let S;t[12]===Symbol.for("react.memo_cache_sentinel")?(S=h.jsx(lt,{htmlFor:"projectName",children:"Project name"}),t[12]=S):S=t[12];let x,E,_;t[13]===Symbol.for("react.memo_cache_sentinel")?(_=h.jsx(cs,{id:"projectName",placeholder:"My TCA Project",className:"mt-2",onChange:q=>l(q.target.value)}),x=h.jsx("hr",{className:"my-4"}),E=h.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"TC Animator lets you animate one cart from a single train per project. To work on a different train or cart, create a new project for each one."}),t[13]=x,t[14]=E,t[15]=_):(x=t[13],E=t[14],_=t[15]);let T;t[16]!==s||t[17]!==u||t[18]!==n.trains?(T=u>1&&s==null&&h.jsxs(h.Fragment,{children:[h.jsx(lt,{htmlFor:"train",children:"Train"}),h.jsxs(Fr,{onValueChange:q=>{const ie=n.trains[q];ie&&(r(ie),o(null))},children:[h.jsx(Ur,{className:"w-full",id:"train",children:h.jsx(Br,{placeholder:"Select a train"})}),h.jsx(Zr,{children:h.jsxs(Qi,{children:[h.jsx(Ji,{children:"Trains"}),Object.values(n.trains).filter(ox).map(ix)]})})]})]}),t[16]=s,t[17]=u,t[18]=n.trains,t[19]=T):T=t[19];let w;t[20]===Symbol.for("react.memo_cache_sentinel")?(w=h.jsx(lt,{htmlFor:"cart",className:"mt-4",children:"Cart"}),t[20]=w):w=t[20];let v;t[21]!==i||t[22]!==s?(v=s?.carts?Object.entries(s.carts).find(q=>{const[,ie]=q;return ie===i})?.[0]??"":"",t[21]=i,t[22]=s,t[23]=v):v=t[23];const k=!s?.carts;let A;t[24]!==s?.carts?(A=q=>{const ie=s?.carts?.[q];ie&&o(ie)},t[24]=s?.carts,t[25]=A):A=t[25];let N;t[26]===Symbol.for("react.memo_cache_sentinel")?(N=h.jsx(Ur,{className:"w-full",id:"cart",children:h.jsx(Br,{placeholder:"Select a cart"})}),t[26]=N):N=t[26];let C;t[27]===Symbol.for("react.memo_cache_sentinel")?(C=h.jsx(Ji,{children:"Carts"}),t[27]=C):C=t[27];let O;t[28]!==s?.carts?(O=Object.entries(s?.carts||{}).map(rx),t[28]=s?.carts,t[29]=O):O=t[29];let D;t[30]!==O?(D=h.jsx(Zr,{children:h.jsxs(Qi,{children:[C,O]})}),t[30]=O,t[31]=D):D=t[31];let M;t[32]!==v||t[33]!==k||t[34]!==A||t[35]!==D?(M=h.jsxs(Fr,{value:v,disabled:k,onValueChange:A,children:[N,D]}),t[32]=v,t[33]=k,t[34]=A,t[35]=D,t[36]=M):M=t[36];let R;t[37]!==T||t[38]!==M?(R=h.jsxs(qo,{children:[m,h.jsx(Xo,{asChild:!0,children:h.jsxs("div",{children:[S,_,x,E,T,w,M]})})]}),t[37]=T,t[38]=M,t[39]=R):R=t[39];let $;t[40]!==e||t[41]!==n?($=()=>{e.reset(),n.reset()},t[40]=e,t[41]=n,t[42]=$):$=t[42];let B;t[43]===Symbol.for("react.memo_cache_sentinel")?(B=h.jsx(Wf,{}),t[43]=B):B=t[43];let z;t[44]!==$?(z=h.jsxs(ze,{variant:"secondary",onClick:$,children:[B,"Back"]}),t[44]=$,t[45]=z):z=t[45];let G;t[46]!==i||t[47]!==s||t[48]!==a||t[49]!==e||t[50]!==n?(G=async()=>{a&&s&&i&&(e.setProjectName(a),n.setCurrentTrain(s),e.setCart(i),await e.saveProject(),n.reset())},t[46]=i,t[47]=s,t[48]=a,t[49]=e,t[50]=n,t[51]=G):G=t[51];const H=!(a&&s&&i);let ne;t[52]!==G||t[53]!==H?(ne=h.jsx(ze,{onClick:G,disabled:H,children:"Create Project"}),t[52]=G,t[53]=H,t[54]=ne):ne=t[54];let W;t[55]!==z||t[56]!==ne?(W=h.jsxs(Ko,{className:"flex justify-between",children:[z,ne]}),t[55]=z,t[56]=ne,t[57]=W):W=t[57];let te;return t[58]!==R||t[59]!==W?(te=h.jsx(Yo,{open:!0,children:h.jsxs(Go,{children:[R,W]})}),t[58]=R,t[59]=W,t[60]=te):te=t[60],te}function rx(t){const[e]=t;return h.jsx(Mn,{value:e,children:e},e)}function ix(t){return h.jsx(Mn,{value:t.savedName,children:t.savedName},t.savedName)}function ox(t){return t.carts}function ax(){const t=pt(),e=mf(),[n,s]=P.useState(!1),[r,i]=P.useState(""),o=P.useRef(!1),a=async()=>{s(!0);const u=await Mo({description:"Select a YAML file",mimeTypes:["application/x-yaml","text/yaml"],extensions:[".yaml",".yml"],id:"load-saved-train-properties",startIn:"documents"}).catch(()=>null);if(u){const f=await u.text();e.setTrainsFromYml(f),e.setCurrentTrain(Object.values(e.trains)[0])}s(!1)},l=P.useCallback(async u=>{s(!0),await(async()=>{const d=u??r;if(!d)return;const p=["paste.traincarts.net","hastebin.com","paste.foxxite.com"],y=new URL(d);if(!p.includes(y.hostname)){Pe.error("The provided URL is not from a supported domain.");return}const g=Pe.loading("Importing data...");y.pathname.includes("/raw/")||(y.pathname=`/raw${y.pathname}`);const b=await fetch(y.toString(),{method:"GET",headers:{"Content-Type":"text/plain"}}).catch(S=>(Pe.error(`Failed to fetch data: ${S.message}`,{id:g}),null));if(!b)return;if(!b.ok){Pe.error(`Failed to fetch data: ${b.status} ${b.statusText}`);return}const m=await b.text();try{const S=pf(m);if(!S||typeof S!="object"){Pe.error("The fetched data is not a valid YAML object.",{id:g});return}if(!("carts"in S)){Pe.error("The fetched data does not appear to be a valid TrainCarts export.",{id:g});return}const x=S.carts,_={savedName:"TemporaryTrain",carts:qt(re(),Wo).parse(x)};e.setTrains({TemporaryTrain:_}),e.setCurrentTrain(_)}catch(S){Pe.error(`Failed to parse YAML: ${S}`,{id:g});return}Pe.success("Data imported successfully!",{id:g})})().catch(d=>{console.error("Error during import:",d),Pe.error(`Import failed: ${d}`,{id:"import-error"})}),s(!1)},[r,e]),c=async()=>{s(!0),await Pe.promise(t.loadProjectFromFileDialog(),{loading:"Loading project...",success:"Project loaded successfully!",error:"Failed to load project."}).unwrap().catch(()=>{t.reset()}),s(!1)};return P.useEffect(()=>{const u=async y=>{if(s(!0),!y.name.endsWith(hs)){Pe.error(`Invalid file type. Please select a ${hs} file.`),s(!1);return}try{await Pe.promise(t.loadProjectFromFileHandle(y),{loading:"Loading project...",success:"Project loaded successfully!",error:"Failed to load project."})}catch{t.reset()}s(!1)},f=y=>{if(n||t.metadata.createdAt)return;const g=y.clipboardData?.getData("text");if(g&&/^https?:\/\/\S+$/i.test(g.trim())&&!o.current){o.current=!0,l(g.trim()),setTimeout(()=>{o.current=!1},500);return}const b=y.clipboardData?.items;if(b){for(const m of b)if(m.kind==="file"){const S=m.getAsFile();if(S){u(S);return}}}},d=y=>{if(y.preventDefault(),!(n||t.metadata.createdAt)&&y.dataTransfer?.files&&y.dataTransfer.files.length>0){const g=y.dataTransfer.files[0];u(g)}},p=y=>{y.preventDefault()};return window.addEventListener("paste",f),window.addEventListener("drop",d),window.addEventListener("dragover",p),()=>{window.removeEventListener("paste",f),window.removeEventListener("drop",d),window.removeEventListener("dragover",p)}},[n,l,t]),n?h.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 backdrop-blur"}):Object.entries(e.trains).length>0&&!t.metadata.createdAt?h.jsx(sx,{}):h.jsx(Yo,{open:!t.metadata.createdAt,children:h.jsxs(Go,{children:[h.jsxs(qo,{children:[h.jsx(Ho,{className:"text-3xl font-bold text-center",children:"Welcome to TC Animator!"}),h.jsx(Xo,{asChild:!0,children:h.jsxs("div",{className:"space-y-4 pt-2",children:[h.jsx("p",{className:"text-center text-balance leading-relaxed",children:"Please import a train exported from TrainCarts or open an existing TCA-Project."}),h.jsxs("div",{className:"flex flex-col gap-4",children:[h.jsxs("div",{className:"space-y-4 p-6 rounded-lg border border-zinc-300 bg-zinc-50/50 dark:border-zinc-800 dark:bg-zinc-950/50 hover:border-blue-500/50 dark:hover:border-blue-500/50 transition-colors",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"p-2 rounded-lg bg-blue-500/10",children:h.jsx(Uf,{className:"w-5 h-5 text-blue-400"})}),h.jsx("h2",{className:"text-lg font-semibold",children:"Import from TrainCarts"})]}),h.jsxs("h6",{className:"text-sm text-muted-foreground text-balance -mt-2",children:["Run"," ",h.jsx("code",{className:"font-mono text-primary",children:"/train export"})," ","in your Minecraft server to get a shareable link. Paste it here to import your train."]}),h.jsxs("div",{className:"space-y-3",children:[h.jsx(cs,{type:"url",value:r,onChange:u=>i(u.target.value),placeholder:"https://paste.traincarts.net/"}),h.jsx(ze,{disabled:!r.trim(),onClick:u=>{u.shiftKey?a():l()},className:"w-full",children:"Import from TrainCarts"})]})]}),h.jsxs("div",{className:"space-y-4 p-6 rounded-lg border border-zinc-300 bg-zinc-50/50 dark:border-zinc-800 dark:bg-zinc-950/50 hover:border-emerald-500/50 dark:hover:border-emerald-500/50 transition-colors",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"p-2 rounded-lg bg-blue-500/10",children:h.jsx(Zf,{className:"w-5 h-5 text-emerald-400"})}),h.jsx("h2",{className:"text-lg font-semibold",children:"Open TCA-Project"})]}),h.jsxs("h6",{className:"text-sm text-muted-foreground text-balance -mt-2",children:["Open a previously saved TCA-Project file with the"," ",h.jsx("code",{className:"font-mono text-primary",children:hs})," ","extension."]}),h.jsx(ze,{className:"bg-emerald-500 hover:bg-emerald-500/90 dark:bg-emerald-700  dark:hover:bg-emerald-700/90 w-full",onClick:c,children:"Browse files"})]})]})]})})]}),h.jsx(Ko,{className:"sm:justify-center text-sm text-muted-foreground",children:h.jsxs("a",{href:"https://foxxite.com",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5",children:[h.jsx("span",{children:"Made with  by Foxxite | Articca"}),h.jsx(Vf,{className:"w-4 h-4"})]})})]})})}_f.createRoot(document.getElementById("root")).render(h.jsxs(P.StrictMode,{children:[h.jsx(Yv,{}),h.jsx(ax,{}),h.jsx(Fv,{}),h.jsx(Ef,{position:"top-center",richColors:!0})]}));
