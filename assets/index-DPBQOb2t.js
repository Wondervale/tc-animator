const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/monaco-CbMVoGlP.js","assets/react-B3YLhEea.js","assets/lodash-W3B35fIs.js"])))=>i.map(i=>d[i]);
import{B as D,j as h,P as $f,C as zf,D as Df,r as z,E as ze,F as Wl,G as Lf,W as Ff,z as Bf,T as Uf}from"./react-B3YLhEea.js";import{t as Zf}from"./tailwind-COJ8Fh6m.js";import{G as Vf,X as Yl,C as Gl,a as Wf,b as Yf,P as Gf,M as qf,c as Hf,I as dr,T as Kf,E as Xf,d as Qf,e as Jf,B as eh,f as th,R as nh,g as sh,h as rh,Z as ih,i as oh,j as ah,F as lh,k as ch,l as uh}from"./lucide-CUIc6jcq.js";import{T as fh,C as hh,D as dh,R as ph,P as mh,a as gh,O as yh,b as bh,I as vh,S as ql,M as wh,c as xh,d as _h,e as Sh,f as Eh,g as kh,V as Th,h as Nh,i as Oh,G as Ah,L as Ch,j as jh,k as Ih,l as Mh,m as Ph,n as Rh,o as $h,p as zh,q as Dh,r as Lh,s as Fh,t as Bh,u as Uh,A as Zh,v as Hl,w as Vh,x as Wh,y as Yh,z as Gh,B as Kl,E as Xl,F as Ql,H as Jl,J as qh,K as Hh,N as Kh,Q as Xh,U as Qh,W as Jh,X as ed,Y as td,Z as nd,_ as sd,$ as rd,a0 as id,a1 as od,a2 as ad,a3 as ld,a4 as cd,a5 as ud,a6 as fd,a7 as hd}from"./radix-Cj-SN5EG.js";import{l as ec,g as dd}from"./lodash-W3B35fIs.js";import{a as Ro,p as pd,b as md}from"./zustand-D_oqGXAC.js";import{N as gd}from"./nbt-Cjfk9cys.js";import{_ as yd,u as li,a as $o,b as bd,c as zo,T as vd,B as wd,I as xd,d as _d,e as Sd,O as Ed,G as tc,L as kd,f as Td,P as Nd,H as Od,g as Ad,h as Cd,C as jd}from"./react-three-DAmMU702.js";import{a7 as xa,e as Ie,z as Id,a8 as Md,a9 as Pd,Q as nc,aa as Do,ab as Xi,ac as _a,ad as Sa,ae as Rd,af as $d,D as sc}from"./three-7cJnBXsX.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function rc(t){var e,n,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=rc(t[e]))&&(s&&(s+=" "),s+=n)}else for(n in t)t[n]&&(s&&(s+=" "),s+=n);return s}function ic(){for(var t,e,n=0,s="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=rc(t))&&(s&&(s+=" "),s+=e);return s}const Qi={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};for(const t in Qi)Object.freeze(Qi[t]);const Bt=Object.freeze(Qi),oc=Object.create(null);for(const t in Bt)Object.hasOwn(Bt,t)&&(oc[Bt[t]]=t);const Re={to:{},get:{}};Re.get=function(t){const e=t.slice(0,3).toLowerCase();let n,s;switch(e){case"hsl":{n=Re.get.hsl(t),s="hsl";break}case"hwb":{n=Re.get.hwb(t),s="hwb";break}default:{n=Re.get.rgb(t),s="rgb";break}}return n?{model:s,value:n}:null};Re.get.rgb=function(t){if(!t)return null;const e=/^#([a-f\d]{3,4})$/i,n=/^#([a-f\d]{6})([a-f\d]{2})?$/i,s=/^rgba?\(\s*([+-]?(?:\d*\.)?\d+(?:e\d+)?)(?=[\s,])\s*(?:,\s*)?([+-]?(?:\d*\.)?\d+(?:e\d+)?)(?=[\s,])\s*(?:,\s*)?([+-]?(?:\d*\.)?\d+(?:e\d+)?)\s*(?:[\s,|/]\s*([+-]?(?:\d*\.)?\d+(?:e\d+)?)(%?)\s*)?\)$/i,r=/^rgba?\(\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[\s,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/i,i=/^(\w+)$/;let o=[0,0,0,1],a,l,c;if(a=t.match(n)){for(c=a[2],a=a[1],l=0;l<3;l++){const u=l*2;o[l]=Number.parseInt(a.slice(u,u+2),16)}c&&(o[3]=Number.parseInt(c,16)/255)}else if(a=t.match(e)){for(a=a[1],c=a[3],l=0;l<3;l++)o[l]=Number.parseInt(a[l]+a[l],16);c&&(o[3]=Number.parseInt(c+c,16)/255)}else if(a=t.match(s)){for(l=0;l<3;l++)o[l]=Number.parseFloat(a[l+1]);a[4]&&(o[3]=a[5]?Number.parseFloat(a[4])*.01:Number.parseFloat(a[4]))}else if(a=t.match(r)){for(l=0;l<3;l++)o[l]=Math.round(Number.parseFloat(a[l+1])*2.55);a[4]&&(o[3]=a[5]?Number.parseFloat(a[4])*.01:Number.parseFloat(a[4]))}else return(a=t.toLowerCase().match(i))?a[1]==="transparent"?[0,0,0,0]:Object.hasOwn(Bt,a[1])?(o=Bt[a[1]].slice(),o[3]=1,o):null:null;for(l=0;l<3;l++)o[l]=gn(o[l],0,255);return o[3]=gn(o[3],0,1),o};Re.get.hsl=function(t){if(!t)return null;const e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[,|/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:e[+-]?\d+)?)\s*)?\)$/i,n=t.match(e);if(n){const s=Number.parseFloat(n[4]),r=(Number.parseFloat(n[1])%360+360)%360,i=gn(Number.parseFloat(n[2]),0,100),o=gn(Number.parseFloat(n[3]),0,100),a=gn(Number.isNaN(s)?1:s,0,1);return[r,i,o,a]}return null};Re.get.hwb=function(t){if(!t)return null;const e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*[\s,]\s*([+-]?[\d.]+)%\s*[\s,]\s*([+-]?[\d.]+)%\s*(?:[\s,]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:e[+-]?\d+)?)\s*)?\)$/i,n=t.match(e);if(n){const s=Number.parseFloat(n[4]),r=(Number.parseFloat(n[1])%360+360)%360,i=gn(Number.parseFloat(n[2]),0,100),o=gn(Number.parseFloat(n[3]),0,100),a=gn(Number.isNaN(s)?1:s,0,1);return[r,i,o,a]}return null};Re.to.hex=function(...t){return"#"+pr(t[0])+pr(t[1])+pr(t[2])+(t[3]<1?pr(Math.round(t[3]*255)):"")};Re.to.rgb=function(...t){return t.length<4||t[3]===1?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"};Re.to.rgb.percent=function(...t){const e=Math.round(t[0]/255*100),n=Math.round(t[1]/255*100),s=Math.round(t[2]/255*100);return t.length<4||t[3]===1?"rgb("+e+"%, "+n+"%, "+s+"%)":"rgba("+e+"%, "+n+"%, "+s+"%, "+t[3]+")"};Re.to.hsl=function(...t){return t.length<4||t[3]===1?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"};Re.to.hwb=function(...t){let e="";return t.length>=4&&t[3]!==1&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"};Re.to.keyword=function(...t){return oc[t.slice(0,3)]};function gn(t,e,n){return Math.min(Math.max(e,t),n)}function pr(t){const e=Math.round(t).toString(16).toUpperCase();return e.length<2?"0"+e:e}const ac={};for(const t of Object.keys(Bt))ac[Bt[t]]=t;const B={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},oklab:{channels:3,labels:["okl","oka","okb"]},lch:{channels:3,labels:"lch"},oklch:{channels:3,labels:["okl","okc","okh"]},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}},qt=(6/29)**3;function hs(t){const e=t>.0031308?1.055*t**.4166666666666667-.055:t*12.92;return Math.min(Math.max(0,e),1)}function ds(t){return t>.04045?((t+.055)/1.055)**2.4:t/12.92}for(const t of Object.keys(B)){if(!("channels"in B[t]))throw new Error("missing channels property: "+t);if(!("labels"in B[t]))throw new Error("missing channel labels property: "+t);if(B[t].labels.length!==B[t].channels)throw new Error("channel and label counts mismatch: "+t);const{channels:e,labels:n}=B[t];delete B[t].channels,delete B[t].labels,Object.defineProperty(B[t],"channels",{value:e}),Object.defineProperty(B[t],"labels",{value:n})}B.rgb.hsl=function(t){const e=t[0]/255,n=t[1]/255,s=t[2]/255,r=Math.min(e,n,s),i=Math.max(e,n,s),o=i-r;let a,l;switch(i){case r:{a=0;break}case e:{a=(n-s)/o;break}case n:{a=2+(s-e)/o;break}case s:{a=4+(e-n)/o;break}}a=Math.min(a*60,360),a<0&&(a+=360);const c=(r+i)/2;return i===r?l=0:c<=.5?l=o/(i+r):l=o/(2-i-r),[a,l*100,c*100]};B.rgb.hsv=function(t){let e,n,s,r,i;const o=t[0]/255,a=t[1]/255,l=t[2]/255,c=Math.max(o,a,l),u=c-Math.min(o,a,l),f=function(d){return(c-d)/6/u+1/2};if(u===0)r=0,i=0;else{switch(i=u/c,e=f(o),n=f(a),s=f(l),c){case o:{r=s-n;break}case a:{r=1/3+e-s;break}case l:{r=2/3+n-e;break}}r<0?r+=1:r>1&&(r-=1)}return[r*360,i*100,c*100]};B.rgb.hwb=function(t){const e=t[0],n=t[1];let s=t[2];const r=B.rgb.hsl(t)[0],i=1/255*Math.min(e,Math.min(n,s));return s=1-1/255*Math.max(e,Math.max(n,s)),[r,i*100,s*100]};B.rgb.oklab=function(t){const e=ds(t[0]/255),n=ds(t[1]/255),s=ds(t[2]/255),r=Math.cbrt(.4122214708*e+.5363325363*n+.0514459929*s),i=Math.cbrt(.2119034982*e+.6806995451*n+.1073969566*s),o=Math.cbrt(.0883024619*e+.2817188376*n+.6299787005*s),a=.2104542553*r+.793617785*i-.0040720468*o,l=1.9779984951*r-2.428592205*i+.4505937099*o,c=.0259040371*r+.7827717662*i-.808675766*o;return[a*100,l*100,c*100]};B.rgb.cmyk=function(t){const e=t[0]/255,n=t[1]/255,s=t[2]/255,r=Math.min(1-e,1-n,1-s),i=(1-e-r)/(1-r)||0,o=(1-n-r)/(1-r)||0,a=(1-s-r)/(1-r)||0;return[i*100,o*100,a*100,r*100]};function zd(t,e){return(t[0]-e[0])**2+(t[1]-e[1])**2+(t[2]-e[2])**2}B.rgb.keyword=function(t){const e=ac[t];if(e)return e;let n=Number.POSITIVE_INFINITY,s;for(const r of Object.keys(Bt)){const i=Bt[r],o=zd(t,i);o<n&&(n=o,s=r)}return s};B.keyword.rgb=function(t){return[...Bt[t]]};B.rgb.xyz=function(t){const e=ds(t[0]/255),n=ds(t[1]/255),s=ds(t[2]/255),r=e*.4124564+n*.3575761+s*.1804375,i=e*.2126729+n*.7151522+s*.072175,o=e*.0193339+n*.119192+s*.9503041;return[r*100,i*100,o*100]};B.rgb.lab=function(t){const e=B.rgb.xyz(t);let n=e[0],s=e[1],r=e[2];n/=95.047,s/=100,r/=108.883,n=n>qt?n**(1/3):7.787*n+16/116,s=s>qt?s**(1/3):7.787*s+16/116,r=r>qt?r**(1/3):7.787*r+16/116;const i=116*s-16,o=500*(n-s),a=200*(s-r);return[i,o,a]};B.hsl.rgb=function(t){const e=t[0]/360,n=t[1]/100,s=t[2]/100;let r,i;if(n===0)return i=s*255,[i,i,i];const o=s<.5?s*(1+n):s+n-s*n,a=2*s-o,l=[0,0,0];for(let c=0;c<3;c++)r=e+1/3*-(c-1),r<0&&r++,r>1&&r--,6*r<1?i=a+(o-a)*6*r:2*r<1?i=o:3*r<2?i=a+(o-a)*(2/3-r)*6:i=a,l[c]=i*255;return l};B.hsl.hsv=function(t){const e=t[0];let n=t[1]/100,s=t[2]/100,r=n;const i=Math.max(s,.01);s*=2,n*=s<=1?s:2-s,r*=i<=1?i:2-i;const o=(s+n)/2,a=s===0?2*r/(i+r):2*n/(s+n);return[e,a*100,o*100]};B.hsv.rgb=function(t){const e=t[0]/60,n=t[1]/100;let s=t[2]/100;const r=Math.floor(e)%6,i=e-Math.floor(e),o=255*s*(1-n),a=255*s*(1-n*i),l=255*s*(1-n*(1-i));switch(s*=255,r){case 0:return[s,l,o];case 1:return[a,s,o];case 2:return[o,s,l];case 3:return[o,a,s];case 4:return[l,o,s];case 5:return[s,o,a]}};B.hsv.hsl=function(t){const e=t[0],n=t[1]/100,s=t[2]/100,r=Math.max(s,.01);let i,o;o=(2-n)*s;const a=(2-n)*r;return i=n*r,i/=a<=1?a:2-a,i=i||0,o/=2,[e,i*100,o*100]};B.hwb.rgb=function(t){const e=t[0]/360;let n=t[1]/100,s=t[2]/100;const r=n+s;let i;r>1&&(n/=r,s/=r);const o=Math.floor(6*e),a=1-s;i=6*e-o,(o&1)!==0&&(i=1-i);const l=n+i*(a-n);let c,u,f;switch(o){default:case 6:case 0:{c=a,u=l,f=n;break}case 1:{c=l,u=a,f=n;break}case 2:{c=n,u=a,f=l;break}case 3:{c=n,u=l,f=a;break}case 4:{c=l,u=n,f=a;break}case 5:{c=a,u=n,f=l;break}}return[c*255,u*255,f*255]};B.cmyk.rgb=function(t){const e=t[0]/100,n=t[1]/100,s=t[2]/100,r=t[3]/100,i=1-Math.min(1,e*(1-r)+r),o=1-Math.min(1,n*(1-r)+r),a=1-Math.min(1,s*(1-r)+r);return[i*255,o*255,a*255]};B.xyz.rgb=function(t){const e=t[0]/100,n=t[1]/100,s=t[2]/100;let r,i,o;return r=e*3.2404542+n*-1.5371385+s*-.4985314,i=e*-.969266+n*1.8760108+s*.041556,o=e*.0556434+n*-.2040259+s*1.0572252,r=hs(r),i=hs(i),o=hs(o),[r*255,i*255,o*255]};B.xyz.lab=function(t){let e=t[0],n=t[1],s=t[2];e/=95.047,n/=100,s/=108.883,e=e>qt?e**(1/3):7.787*e+16/116,n=n>qt?n**(1/3):7.787*n+16/116,s=s>qt?s**(1/3):7.787*s+16/116;const r=116*n-16,i=500*(e-n),o=200*(n-s);return[r,i,o]};B.xyz.oklab=function(t){const e=t[0]/100,n=t[1]/100,s=t[2]/100,r=Math.cbrt(.8189330101*e+.3618667424*n-.1288597137*s),i=Math.cbrt(.0329845436*e+.9293118715*n+.0361456387*s),o=Math.cbrt(.0482003018*e+.2643662691*n+.633851707*s),a=.2104542553*r+.793617785*i-.0040720468*o,l=1.9779984951*r-2.428592205*i+.4505937099*o,c=.0259040371*r+.7827717662*i-.808675766*o;return[a*100,l*100,c*100]};B.oklab.oklch=function(t){return B.lab.lch(t)};B.oklab.xyz=function(t){const e=t[0]/100,n=t[1]/100,s=t[2]/100,r=(.999999998*e+.396337792*n+.215803758*s)**3,i=(1.000000008*e-.105561342*n-.063854175*s)**3,o=(1.000000055*e-.089484182*n-1.291485538*s)**3,a=1.227013851*r-.55779998*i+.281256149*o,l=-.040580178*r+1.11225687*i-.071676679*o,c=-.076381285*r-.421481978*i+1.58616322*o;return[a*100,l*100,c*100]};B.oklab.rgb=function(t){const e=t[0]/100,n=t[1]/100,s=t[2]/100,r=(e+.3963377774*n+.2158037573*s)**3,i=(e-.1055613458*n-.0638541728*s)**3,o=(e-.0894841775*n-1.291485548*s)**3,a=hs(4.0767416621*r-3.3077115913*i+.2309699292*o),l=hs(-1.2684380046*r+2.6097574011*i-.3413193965*o),c=hs(-.0041960863*r-.7034186147*i+1.707614701*o);return[a*255,l*255,c*255]};B.oklch.oklab=function(t){return B.lch.lab(t)};B.lab.xyz=function(t){const e=t[0],n=t[1],s=t[2];let r,i,o;i=(e+16)/116,r=n/500+i,o=i-s/200;const a=i**3,l=r**3,c=o**3;return i=a>qt?a:(i-16/116)/7.787,r=l>qt?l:(r-16/116)/7.787,o=c>qt?c:(o-16/116)/7.787,r*=95.047,i*=100,o*=108.883,[r,i,o]};B.lab.lch=function(t){const e=t[0],n=t[1],s=t[2];let r;r=Math.atan2(s,n)*360/2/Math.PI,r<0&&(r+=360);const o=Math.sqrt(n*n+s*s);return[e,o,r]};B.lch.lab=function(t){const e=t[0],n=t[1],r=t[2]/360*2*Math.PI,i=n*Math.cos(r),o=n*Math.sin(r);return[e,i,o]};B.rgb.ansi16=function(t,e=null){const[n,s,r]=t;let i=e===null?B.rgb.hsv(t)[2]:e;if(i=Math.round(i/50),i===0)return 30;let o=30+(Math.round(r/255)<<2|Math.round(s/255)<<1|Math.round(n/255));return i===2&&(o+=60),o};B.hsv.ansi16=function(t){return B.rgb.ansi16(B.hsv.rgb(t),t[2])};B.rgb.ansi256=function(t){const e=t[0],n=t[1],s=t[2];return e>>4===n>>4&&n>>4===s>>4?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(n/255*5)+Math.round(s/255*5)};B.ansi16.rgb=function(t){t=t[0];let e=t%10;if(e===0||e===7)return t>50&&(e+=3.5),e=e/10.5*255,[e,e,e];const n=(Math.trunc(t>50)+1)*.5,s=(e&1)*n*255,r=(e>>1&1)*n*255,i=(e>>2&1)*n*255;return[s,r,i]};B.ansi256.rgb=function(t){if(t=t[0],t>=232){const i=(t-232)*10+8;return[i,i,i]}t-=16;let e;const n=Math.floor(t/36)/5*255,s=Math.floor((e=t%36)/6)/5*255,r=e%6/5*255;return[n,s,r]};B.rgb.hex=function(t){const n=(((Math.round(t[0])&255)<<16)+((Math.round(t[1])&255)<<8)+(Math.round(t[2])&255)).toString(16).toUpperCase();return"000000".slice(n.length)+n};B.hex.rgb=function(t){const e=t.toString(16).match(/[a-f\d]{6}|[a-f\d]{3}/i);if(!e)return[0,0,0];let n=e[0];e[0].length===3&&(n=[...n].map(a=>a+a).join(""));const s=Number.parseInt(n,16),r=s>>16&255,i=s>>8&255,o=s&255;return[r,i,o]};B.rgb.hcg=function(t){const e=t[0]/255,n=t[1]/255,s=t[2]/255,r=Math.max(Math.max(e,n),s),i=Math.min(Math.min(e,n),s),o=r-i;let a;const l=o<1?i/(1-o):0;return o<=0?a=0:r===e?a=(n-s)/o%6:r===n?a=2+(s-e)/o:a=4+(e-n)/o,a/=6,a%=1,[a*360,o*100,l*100]};B.hsl.hcg=function(t){const e=t[1]/100,n=t[2]/100,s=n<.5?2*e*n:2*e*(1-n);let r=0;return s<1&&(r=(n-.5*s)/(1-s)),[t[0],s*100,r*100]};B.hsv.hcg=function(t){const e=t[1]/100,n=t[2]/100,s=e*n;let r=0;return s<1&&(r=(n-s)/(1-s)),[t[0],s*100,r*100]};B.hcg.rgb=function(t){const e=t[0]/360,n=t[1]/100,s=t[2]/100;if(n===0)return[s*255,s*255,s*255];const r=[0,0,0],i=e%1*6,o=i%1,a=1-o;let l=0;switch(Math.floor(i)){case 0:{r[0]=1,r[1]=o,r[2]=0;break}case 1:{r[0]=a,r[1]=1,r[2]=0;break}case 2:{r[0]=0,r[1]=1,r[2]=o;break}case 3:{r[0]=0,r[1]=a,r[2]=1;break}case 4:{r[0]=o,r[1]=0,r[2]=1;break}default:r[0]=1,r[1]=0,r[2]=a}return l=(1-n)*s,[(n*r[0]+l)*255,(n*r[1]+l)*255,(n*r[2]+l)*255]};B.hcg.hsv=function(t){const e=t[1]/100,n=t[2]/100,s=e+n*(1-e);let r=0;return s>0&&(r=e/s),[t[0],r*100,s*100]};B.hcg.hsl=function(t){const e=t[1]/100,s=t[2]/100*(1-e)+.5*e;let r=0;return s>0&&s<.5?r=e/(2*s):s>=.5&&s<1&&(r=e/(2*(1-s))),[t[0],r*100,s*100]};B.hcg.hwb=function(t){const e=t[1]/100,n=t[2]/100,s=e+n*(1-e);return[t[0],(s-e)*100,(1-s)*100]};B.hwb.hcg=function(t){const e=t[1]/100,s=1-t[2]/100,r=s-e;let i=0;return r<1&&(i=(s-r)/(1-r)),[t[0],r*100,i*100]};B.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]};B.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]};B.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]};B.gray.hsl=function(t){return[0,0,t[0]]};B.gray.hsv=B.gray.hsl;B.gray.hwb=function(t){return[0,100,t[0]]};B.gray.cmyk=function(t){return[0,0,0,t[0]]};B.gray.lab=function(t){return[t[0],0,0]};B.gray.hex=function(t){const e=Math.round(t[0]/100*255)&255,s=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".slice(s.length)+s};B.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]};function Dd(){const t={},e=Object.keys(B);for(let{length:n}=e,s=0;s<n;s++)t[e[s]]={distance:-1,parent:null};return t}function Ld(t){const e=Dd(),n=[t];for(e[t].distance=0;n.length>0;){const s=n.pop(),r=Object.keys(B[s]);for(let{length:i}=r,o=0;o<i;o++){const a=r[o],l=e[a];l.distance===-1&&(l.distance=e[s].distance+1,l.parent=s,n.unshift(a))}}return e}function Fd(t,e){return function(n){return e(t(n))}}function Bd(t,e){const n=[e[t].parent,t];let s=B[e[t].parent][t],r=e[t].parent;for(;e[r].parent;)n.unshift(e[r].parent),s=Fd(B[e[r].parent][r],s),r=e[r].parent;return s.conversion=n,s}function Ud(t){const e=Ld(t),n={},s=Object.keys(e);for(let{length:r}=s,i=0;i<r;i++){const o=s[i];e[o].parent!==null&&(n[o]=Bd(o,e))}return n}const De={},Zd=Object.keys(B);function Vd(t){const e=function(...n){const s=n[0];return s==null?s:(s.length>1&&(n=s),t(n))};return"conversion"in t&&(e.conversion=t.conversion),e}function Wd(t){const e=function(...n){const s=n[0];if(s==null)return s;s.length>1&&(n=s);const r=t(n);if(typeof r=="object")for(let{length:i}=r,o=0;o<i;o++)r[o]=Math.round(r[o]);return r};return"conversion"in t&&(e.conversion=t.conversion),e}for(const t of Zd){De[t]={},Object.defineProperty(De[t],"channels",{value:B[t].channels}),Object.defineProperty(De[t],"labels",{value:B[t].labels});const e=Ud(t),n=Object.keys(e);for(const s of n){const r=e[s];De[t][s]=Wd(r),De[t][s].raw=Vd(r)}}const lc=["keyword","gray","hex"],Ji={};for(const t of Object.keys(De))Ji[[...De[t].labels].sort().join("")]=t;const eo={};function pe(t,e){if(!(this instanceof pe))return new pe(t,e);if(e&&e in lc&&(e=null),e&&!(e in De))throw new Error("Unknown model: "+e);let n,s;if(t==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(t instanceof pe)this.model=t.model,this.color=[...t.color],this.valpha=t.valpha;else if(typeof t=="string"){const r=Re.get(t);if(r===null)throw new Error("Unable to parse color from string: "+t);this.model=r.model,s=De[this.model].channels,this.color=r.value.slice(0,s),this.valpha=typeof r.value[s]=="number"?r.value[s]:1}else if(t.length>0){this.model=e||"rgb",s=De[this.model].channels;const r=Array.prototype.slice.call(t,0,s);this.color=to(r,s),this.valpha=typeof t[s]=="number"?t[s]:1}else if(typeof t=="number")this.model="rgb",this.color=[t>>16&255,t>>8&255,t&255],this.valpha=1;else{this.valpha=1;const r=Object.keys(t);"alpha"in t&&(r.splice(r.indexOf("alpha"),1),this.valpha=typeof t.alpha=="number"?t.alpha:0);const i=r.sort().join("");if(!(i in Ji))throw new Error("Unable to parse color from object: "+JSON.stringify(t));this.model=Ji[i];const{labels:o}=De[this.model],a=[];for(n=0;n<o.length;n++)a.push(t[o[n]]);this.color=to(a)}if(eo[this.model])for(s=De[this.model].channels,n=0;n<s;n++){const r=eo[this.model][n];r&&(this.color[n]=r(this.color[n]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}pe.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(t){let e=this.model in Re.to?this:this.rgb();e=e.round(typeof t=="number"?t:1);const n=e.valpha===1?e.color:[...e.color,this.valpha];return Re.to[e.model](...n)},percentString(t){const e=this.rgb().round(typeof t=="number"?t:1),n=e.valpha===1?e.color:[...e.color,this.valpha];return Re.to.rgb.percent(...n)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const t={},{channels:e}=De[this.model],{labels:n}=De[this.model];for(let s=0;s<e;s++)t[n[s]]=this.color[s];return this.valpha!==1&&(t.alpha=this.valpha),t},unitArray(){const t=this.rgb().color;return t[0]/=255,t[1]/=255,t[2]/=255,this.valpha!==1&&t.push(this.valpha),t},unitObject(){const t=this.rgb().object();return t.r/=255,t.g/=255,t.b/=255,this.valpha!==1&&(t.alpha=this.valpha),t},round(t){return t=Math.max(t||0,0),new pe([...this.color.map(Gd(t)),this.valpha],this.model)},alpha(t){return t!==void 0?new pe([...this.color,Math.max(0,Math.min(1,t))],this.model):this.valpha},red:Se("rgb",0,Pe(255)),green:Se("rgb",1,Pe(255)),blue:Se("rgb",2,Pe(255)),hue:Se(["hsl","hsv","hsl","hwb","hcg"],0,t=>(t%360+360)%360),saturationl:Se("hsl",1,Pe(100)),lightness:Se("hsl",2,Pe(100)),saturationv:Se("hsv",1,Pe(100)),value:Se("hsv",2,Pe(100)),chroma:Se("hcg",1,Pe(100)),gray:Se("hcg",2,Pe(100)),white:Se("hwb",1,Pe(100)),wblack:Se("hwb",2,Pe(100)),cyan:Se("cmyk",0,Pe(100)),magenta:Se("cmyk",1,Pe(100)),yellow:Se("cmyk",2,Pe(100)),black:Se("cmyk",3,Pe(100)),x:Se("xyz",0,Pe(95.047)),y:Se("xyz",1,Pe(100)),z:Se("xyz",2,Pe(108.833)),l:Se("lab",0,Pe(100)),a:Se("lab",1),b:Se("lab",2),keyword(t){return t!==void 0?new pe(t):De[this.model].keyword(this.color)},hex(t){return t!==void 0?new pe(t):Re.to.hex(...this.rgb().round().color)},hexa(t){if(t!==void 0)return new pe(t);const e=this.rgb().round().color;let n=Math.round(this.valpha*255).toString(16).toUpperCase();return n.length===1&&(n="0"+n),Re.to.hex(...e)+n},rgbNumber(){const t=this.rgb().color;return(t[0]&255)<<16|(t[1]&255)<<8|t[2]&255},luminosity(){const t=this.rgb().color,e=[];for(const[n,s]of t.entries()){const r=s/255;e[n]=r<=.04045?r/12.92:((r+.055)/1.055)**2.4}return .2126*e[0]+.7152*e[1]+.0722*e[2]},contrast(t){const e=this.luminosity(),n=t.luminosity();return e>n?(e+.05)/(n+.05):(n+.05)/(e+.05)},level(t){const e=this.contrast(t);return e>=7?"AAA":e>=4.5?"AA":""},isDark(){const t=this.rgb().color;return(t[0]*2126+t[1]*7152+t[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const t=this.rgb();for(let e=0;e<3;e++)t.color[e]=255-t.color[e];return t},lighten(t){const e=this.hsl();return e.color[2]+=e.color[2]*t,e},darken(t){const e=this.hsl();return e.color[2]-=e.color[2]*t,e},saturate(t){const e=this.hsl();return e.color[1]+=e.color[1]*t,e},desaturate(t){const e=this.hsl();return e.color[1]-=e.color[1]*t,e},whiten(t){const e=this.hwb();return e.color[1]+=e.color[1]*t,e},blacken(t){const e=this.hwb();return e.color[2]+=e.color[2]*t,e},grayscale(){const t=this.rgb().color,e=t[0]*.3+t[1]*.59+t[2]*.11;return pe.rgb(e,e,e)},fade(t){return this.alpha(this.valpha-this.valpha*t)},opaquer(t){return this.alpha(this.valpha+this.valpha*t)},rotate(t){const e=this.hsl();let n=e.color[0];return n=(n+t)%360,n=n<0?360+n:n,e.color[0]=n,e},mix(t,e){if(!t||!t.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof t);const n=t.rgb(),s=this.rgb(),r=e===void 0?.5:e,i=2*r-1,o=n.alpha()-s.alpha(),a=((i*o===-1?i:(i+o)/(1+i*o))+1)/2,l=1-a;return pe.rgb(a*n.red()+l*s.red(),a*n.green()+l*s.green(),a*n.blue()+l*s.blue(),n.alpha()*r+s.alpha()*(1-r))}};for(const t of Object.keys(De)){if(lc.includes(t))continue;const{channels:e}=De[t];pe.prototype[t]=function(...n){return this.model===t?new pe(this):n.length>0?new pe(n,t):new pe([...qd(De[this.model][t].raw(this.color)),this.valpha],t)},pe[t]=function(...n){let s=n[0];return typeof s=="number"&&(s=to(n,e)),new pe(s,t)}}function Yd(t,e){return Number(t.toFixed(e))}function Gd(t){return function(e){return Yd(e,t)}}function Se(t,e,n){t=Array.isArray(t)?t:[t];for(const s of t)(eo[s]||=[])[e]=n;return t=t[0],function(s){let r;return s!==void 0?(n&&(s=n(s)),r=this[t](),r.color[e]=s,r):(r=this[t]().color[e],n&&(r=n(r)),r)}}function Pe(t){return function(e){return Math.max(0,Math.min(t,e))}}function qd(t){return Array.isArray(t)?t:[t]}function to(t,e){for(let n=0;n<e;n++)typeof t[n]!="number"&&(t[n]=0);return t}function U(...t){return Zf(ic(t))}function cc(t,e=.5){return pe(t).darken(e).hex()}function Ht(t){return-t*(Math.PI/180)}function uc(t){const e=new ArrayBuffer(t.byteLength);return new Uint8Array(e).set(new Uint8Array(t)),e}function Hd(t){if(t===0)return"0";const e=1e-6;let n=1,s=0,r=0,i=1,o=t;do{const a=Math.floor(o);let l=n;n=a*n+s,s=l,l=r,r=a*r+i,i=l,o=1/(o-a)}while(Math.abs(t-n/r)>t*e);return`${n}/${r}`}function Kd(t){switch(t){case"XZ":return[0,0,0];case"XY":return[-Math.PI/2,0,0];case"YZ":return[0,0,Math.PI/2];default:return[0,0,0]}}function no(t){const e=D.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=U("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx(Df,{"data-slot":"resizable-panel-group",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function is(t){const e=D.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let s;return e[2]!==n?(s=h.jsx($f,{"data-slot":"resizable-panel",...n}),e[2]=n,e[3]=s):s=e[3],s}function so(t){const e=D.c(12);let n,s,r;e[0]!==t?({withHandle:r,className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r):(n=e[1],s=e[2],r=e[3]);let i;e[4]!==n?(i=U("bg-border focus-visible:ring-ring relative flex w-px items-center justify-center after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:ring-1 focus-visible:ring-offset-1 focus-visible:outline-hidden data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:translate-x-0 data-[panel-group-direction=vertical]:after:-translate-y-1/2 [&[data-panel-group-direction=vertical]>div]:rotate-90 hover:bg-primary",n),e[4]=n,e[5]=i):i=e[5];let o;e[6]!==r?(o=r&&h.jsx("div",{className:"bg-border z-10 flex h-4 w-3 items-center justify-center rounded-xs border",children:h.jsx(Vf,{className:"size-2.5"})}),e[6]=r,e[7]=o):o=e[7];let a;return e[8]!==s||e[9]!==i||e[10]!==o?(a=h.jsx(zf,{"data-slot":"resizable-handle",className:i,...s,children:o}),e[8]=s,e[9]=i,e[10]=o,e[11]=a):a=e[11],a}function Xd(t){const e=D.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let s;return e[2]!==n?(s=h.jsx(ph,{"data-slot":"dialog",...n}),e[2]=n,e[3]=s):s=e[3],s}function Qd(t){const e=D.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let s;return e[2]!==n?(s=h.jsx(mh,{"data-slot":"dialog-portal",...n}),e[2]=n,e[3]=s):s=e[3],s}function Jd(t){const e=D.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=U("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50 backdrop-blur",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx(yh,{"data-slot":"dialog-overlay",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function ep(t){const e=D.c(15);let n,s,r,i;e[0]!==t?({className:s,children:n,showCloseButton:i,...r}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r,e[4]=i):(n=e[1],s=e[2],r=e[3],i=e[4]);const o=i===void 0?!0:i;let a;e[5]===Symbol.for("react.memo_cache_sentinel")?(a=h.jsx(Jd,{}),e[5]=a):a=e[5];let l;e[6]!==s?(l=U("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",s),e[6]=s,e[7]=l):l=e[7];let c;e[8]!==o?(c=o&&h.jsxs(gh,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[h.jsx(Yl,{}),h.jsx("span",{className:"sr-only",children:"Close"})]}),e[8]=o,e[9]=c):c=e[9];let u;return e[10]!==n||e[11]!==r||e[12]!==l||e[13]!==c?(u=h.jsxs(Qd,{"data-slot":"dialog-portal",children:[a,h.jsxs(hh,{"data-slot":"dialog-content",className:l,...r,children:[n,c]})]}),e[10]=n,e[11]=r,e[12]=l,e[13]=c,e[14]=u):u=e[14],u}function tp(t){const e=D.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=U("flex flex-col gap-2 text-center sm:text-left",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx("div",{"data-slot":"dialog-header",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function np(t){const e=D.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=U("text-lg leading-none font-semibold",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx(fh,{"data-slot":"dialog-title",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function sp(t){const e=D.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=U("text-muted-foreground text-sm",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx(dh,{"data-slot":"dialog-description",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function rp(t){const e=D.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=U("bg-background flex h-9 items-center gap-1 rounded-md border p-1 shadow-xs",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx(_h,{"data-slot":"menubar",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function Ea(t){const e=D.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let s;return e[2]!==n?(s=h.jsx(wh,{"data-slot":"menubar-menu",...n}),e[2]=n,e[3]=s):s=e[3],s}function ip(t){const e=D.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let s;return e[2]!==n?(s=h.jsx(Sh,{"data-slot":"menubar-portal",...n}),e[2]=n,e[3]=s):s=e[3],s}function op(t){const e=D.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=U("focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground flex items-center rounded-sm px-2 py-1 text-sm font-medium outline-hidden select-none",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx(bh,{"data-slot":"menubar-trigger",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function ap(t){const e=D.c(14);let n,s,r,i,o;e[0]!==t?({className:n,align:r,alignOffset:i,sideOffset:o,...s}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r,e[4]=i,e[5]=o):(n=e[1],s=e[2],r=e[3],i=e[4],o=e[5]);const a=r===void 0?"start":r,l=i===void 0?-4:i,c=o===void 0?8:o;let u;e[6]!==n?(u=U("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[12rem] origin-(--radix-menubar-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-md",n),e[6]=n,e[7]=u):u=e[7];let f;return e[8]!==a||e[9]!==l||e[10]!==s||e[11]!==c||e[12]!==u?(f=h.jsx(ip,{children:h.jsx(xh,{"data-slot":"menubar-content",align:a,alignOffset:l,sideOffset:c,className:u,...s})}),e[8]=a,e[9]=l,e[10]=s,e[11]=c,e[12]=u,e[13]=f):f=e[13],f}function Jn(t){const e=D.c(12);let n,s,r,i;e[0]!==t?({className:n,inset:s,variant:i,...r}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r,e[4]=i):(n=e[1],s=e[2],r=e[3],i=e[4]);const o=i===void 0?"default":i;let a;e[5]!==n?(a=U("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",n),e[5]=n,e[6]=a):a=e[6];let l;return e[7]!==s||e[8]!==r||e[9]!==a||e[10]!==o?(l=h.jsx(vh,{"data-slot":"menubar-item","data-inset":s,"data-variant":o,className:a,...r}),e[7]=s,e[8]=r,e[9]=a,e[10]=o,e[11]=l):l=e[11],l}function Pi(t){const e=D.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=U("bg-border -mx-1 my-1 h-px",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx(ql,{"data-slot":"menubar-separator",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function ka(t){const e=D.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=U("text-muted-foreground ml-auto text-xs tracking-widest",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx("span",{"data-slot":"menubar-shortcut",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function Wr(t){const e=D.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let s;return e[2]!==n?(s=h.jsx(Eh,{"data-slot":"select",...n}),e[2]=n,e[3]=s):s=e[3],s}function ro(t){const e=D.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let s;return e[2]!==n?(s=h.jsx(Ah,{"data-slot":"select-group",...n}),e[2]=n,e[3]=s):s=e[3],s}function Yr(t){const e=D.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let s;return e[2]!==n?(s=h.jsx(Th,{"data-slot":"select-value",...n}),e[2]=n,e[3]=s):s=e[3],s}function Gr(t){const e=D.c(13);let n,s,r,i;e[0]!==t?({className:s,size:i,children:n,...r}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r,e[4]=i):(n=e[1],s=e[2],r=e[3],i=e[4]);const o=i===void 0?"default":i;let a;e[5]!==s?(a=U("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 mt-2",s),e[5]=s,e[6]=a):a=e[6];let l;e[7]===Symbol.for("react.memo_cache_sentinel")?(l=h.jsx(Ih,{asChild:!0,children:h.jsx(Gl,{className:"size-4 opacity-50"})}),e[7]=l):l=e[7];let c;return e[8]!==n||e[9]!==r||e[10]!==o||e[11]!==a?(c=h.jsxs(kh,{"data-slot":"select-trigger","data-size":o,className:a,...r,children:[n,l]}),e[8]=n,e[9]=r,e[10]=o,e[11]=a,e[12]=c):c=e[12],c}function qr(t){const e=D.c(20);let n,s,r,i;e[0]!==t?({className:s,children:n,position:i,...r}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r,e[4]=i):(n=e[1],s=e[2],r=e[3],i=e[4]);const o=i===void 0?"popper":i,a=o==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1";let l;e[5]!==s||e[6]!==a?(l=U("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",a,s),e[5]=s,e[6]=a,e[7]=l):l=e[7];let c;e[8]===Symbol.for("react.memo_cache_sentinel")?(c=h.jsx(lp,{}),e[8]=c):c=e[8];const u=o==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1";let f;e[9]!==u?(f=U("p-1",u),e[9]=u,e[10]=f):f=e[10];let d;e[11]!==n||e[12]!==f?(d=h.jsx(Mh,{className:f,children:n}),e[11]=n,e[12]=f,e[13]=d):d=e[13];let p;e[14]===Symbol.for("react.memo_cache_sentinel")?(p=h.jsx(cp,{}),e[14]=p):p=e[14];let g;return e[15]!==o||e[16]!==r||e[17]!==l||e[18]!==d?(g=h.jsx(Nh,{children:h.jsxs(Oh,{"data-slot":"select-content",className:l,position:o,...r,children:[c,d,p]})}),e[15]=o,e[16]=r,e[17]=l,e[18]=d,e[19]=g):g=e[19],g}function io(t){const e=D.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=U("text-muted-foreground px-2 py-1.5 text-xs",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx(Ch,{"data-slot":"select-label",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function Dn(t){const e=D.c(13);let n,s,r;e[0]!==t?({className:s,children:n,...r}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r):(n=e[1],s=e[2],r=e[3]);let i;e[4]!==s?(i=U("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",s),e[4]=s,e[5]=i):i=e[5];let o;e[6]===Symbol.for("react.memo_cache_sentinel")?(o=h.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:h.jsx(Ph,{children:h.jsx(Wf,{className:"size-4"})})}),e[6]=o):o=e[6];let a;e[7]!==n?(a=h.jsx(Rh,{children:n}),e[7]=n,e[8]=a):a=e[8];let l;return e[9]!==r||e[10]!==i||e[11]!==a?(l=h.jsxs(jh,{"data-slot":"select-item",className:i,...r,children:[o,a]}),e[9]=r,e[10]=i,e[11]=a,e[12]=l):l=e[12],l}function lp(t){const e=D.c(9);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=U("flex cursor-default items-center justify-center py-1",n),e[3]=n,e[4]=r):r=e[4];let i;e[5]===Symbol.for("react.memo_cache_sentinel")?(i=h.jsx(Yf,{className:"size-4"}),e[5]=i):i=e[5];let o;return e[6]!==s||e[7]!==r?(o=h.jsx($h,{"data-slot":"select-scroll-up-button",className:r,...s,children:i}),e[6]=s,e[7]=r,e[8]=o):o=e[8],o}function cp(t){const e=D.c(9);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=U("flex cursor-default items-center justify-center py-1",n),e[3]=n,e[4]=r):r=e[4];let i;e[5]===Symbol.for("react.memo_cache_sentinel")?(i=h.jsx(Gl,{className:"size-4"}),e[5]=i):i=e[5];let o;return e[6]!==s||e[7]!==r?(o=h.jsx(zh,{"data-slot":"select-scroll-down-button",className:r,...s,children:i}),e[6]=s,e[7]=r,e[8]=o):o=e[8],o}function up(t){const e=D.c(6);let n,s;e[0]!==t?({delayDuration:s,...n}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);const r=s===void 0?0:s;let i;return e[3]!==r||e[4]!==n?(i=h.jsx(Uh,{"data-slot":"tooltip-provider",delayDuration:r,...n}),e[3]=r,e[4]=n,e[5]=i):i=e[5],i}function hn(t){const e=D.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let s;return e[2]!==n?(s=h.jsx(up,{children:h.jsx(Lh,{"data-slot":"tooltip",...n})}),e[2]=n,e[3]=s):s=e[3],s}function dn(t){const e=D.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let s;return e[2]!==n?(s=h.jsx(Dh,{"data-slot":"tooltip-trigger",...n}),e[2]=n,e[3]=s):s=e[3],s}function pn(t){const e=D.c(13);let n,s,r,i;e[0]!==t?({className:s,sideOffset:i,children:n,...r}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r,e[4]=i):(n=e[1],s=e[2],r=e[3],i=e[4]);const o=i===void 0?0:i;let a;e[5]!==s?(a=U("bg-secondary text-secondary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",s),e[5]=s,e[6]=a):a=e[6];let l;e[7]===Symbol.for("react.memo_cache_sentinel")?(l=h.jsx(Zh,{className:"bg-secondary fill-secondary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"}),e[7]=l):l=e[7];let c;return e[8]!==n||e[9]!==r||e[10]!==o||e[11]!==a?(c=h.jsx(Fh,{children:h.jsxs(Bh,{"data-slot":"tooltip-content",sideOffset:o,className:a,...r,children:[n,l]})}),e[8]=n,e[9]=r,e[10]=o,e[11]=a,e[12]=c):c=e[12],c}const Ta=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Na=ic,Lo=(t,e)=>n=>{var s;if(e?.variants==null)return Na(t,n?.class,n?.className);const{variants:r,defaultVariants:i}=e,o=Object.keys(r).map(c=>{const u=n?.[c],f=i?.[c];if(u===null)return null;const d=Ta(u)||Ta(f);return r[c][d]}),a=n&&Object.entries(n).reduce((c,u)=>{let[f,d]=u;return d===void 0||(c[f]=d),c},{}),l=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((c,u)=>{let{class:f,className:d,...p}=u;return Object.entries(p).every(g=>{let[m,b]=g;return Array.isArray(b)?b.includes({...i,...a}[m]):{...i,...a}[m]===b})?[...c,f,d]:c},[]);return Na(t,o,l,n?.class,n?.className)},fc=Lo("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive cursor-pointer",{variants:{variant:{default:"bg-primary text-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function Fe(t){const e=D.c(14);let n,s,r,i,o;e[0]!==t?({className:n,variant:o,size:r,asChild:i,...s}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r,e[4]=i,e[5]=o):(n=e[1],s=e[2],r=e[3],i=e[4],o=e[5]);const l=(i===void 0?!1:i)?Hl:"button";let c;e[6]!==n||e[7]!==r||e[8]!==o?(c=U(fc({variant:o,size:r,className:n})),e[6]=n,e[7]=r,e[8]=o,e[9]=c):c=e[9];let u;return e[10]!==l||e[11]!==s||e[12]!==c?(u=h.jsx(l,{"data-slot":"button",className:c,...s}),e[10]=l,e[11]=s,e[12]=c,e[13]=u):u=e[13],u}function fp(t){const e=D.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let s;return e[2]!==n?(s=h.jsx(Gh,{"data-slot":"popover",...n}),e[2]=n,e[3]=s):s=e[3],s}function hp(t){const e=D.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let s;return e[2]!==n?(s=h.jsx(Vh,{"data-slot":"popover-trigger",...n}),e[2]=n,e[3]=s):s=e[3],s}function dp(t){const e=D.c(12);let n,s,r,i;e[0]!==t?({className:n,align:r,sideOffset:i,...s}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r,e[4]=i):(n=e[1],s=e[2],r=e[3],i=e[4]);const o=r===void 0?"center":r,a=i===void 0?4:i;let l;e[5]!==n?(l=U("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",n),e[5]=n,e[6]=l):l=e[6];let c;return e[7]!==o||e[8]!==s||e[9]!==a||e[10]!==l?(c=h.jsx(Wh,{children:h.jsx(Yh,{"data-slot":"popover-content",align:o,sideOffset:a,className:l,...s})}),e[7]=o,e[8]=s,e[9]=a,e[10]=l,e[11]=c):c=e[11],c}function ps(t){const e=D.c(10);let n,s,r;e[0]!==t?({className:n,type:r,...s}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r):(n=e[1],s=e[2],r=e[3]);let i;e[4]!==n?(i=U("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm mt-2","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",n),e[4]=n,e[5]=i):i=e[5];let o;return e[6]!==s||e[7]!==i||e[8]!==r?(o=h.jsx("input",{type:r,"data-slot":"input",className:i,...s}),e[6]=s,e[7]=i,e[8]=r,e[9]=o):o=e[9],o}const hc=z.createContext(void 0),ci=()=>{const t=z.useContext(hc);if(!t)throw new Error("useColorPicker must be used within a ColorPickerProvider");return t},pp=t=>{const e=D.c(37);let n,s,r,i,o;e[0]!==t?({value:o,defaultValue:i,onChange:s,className:n,...r}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r,e[4]=i,e[5]=o):(n=e[1],s=e[2],r=e[3],i=e[4],o=e[5]);const a=i===void 0?"#000000":i,l=pe(o),c=pe(a),[u,f]=z.useState(l.hue()||c.hue()||0),[d,p]=z.useState(l.saturationl()||c.saturationl()||100),[g,m]=z.useState(l.lightness()||c.lightness()||50),[b,y]=z.useState(l.alpha()*100||c.alpha()*100),[k,x]=z.useState("hex");let _;e[6]!==f||e[7]!==m||e[8]!==p||e[9]!==o?(_=()=>{if(o){const A=pe.rgb(o).rgb().object();f(A.r),p(A.g),m(A.b),y(A.a)}},e[6]=f,e[7]=m,e[8]=p,e[9]=o,e[10]=_):_=e[10];let E;e[11]!==o?(E=[o],e[11]=o,e[12]=E):E=e[12],z.useEffect(_,E);let T,v;e[13]!==b||e[14]!==u||e[15]!==g||e[16]!==s||e[17]!==d?(T=()=>{if(s){const C=pe.hsl(u,d,g).alpha(b/100).rgb().array();s([C[0],C[1],C[2],b/100])}},v=[u,d,g,b,s],e[13]=b,e[14]=u,e[15]=g,e[16]=s,e[17]=d,e[18]=T,e[19]=v):(T=e[18],v=e[19]),z.useEffect(T,v);let w;e[20]!==b||e[21]!==u||e[22]!==g||e[23]!==k||e[24]!==d||e[25]!==f||e[26]!==m||e[27]!==p?(w={hue:u,saturation:d,lightness:g,alpha:b,mode:k,setHue:f,setSaturation:p,setLightness:m,setAlpha:y,setMode:x},e[20]=b,e[21]=u,e[22]=g,e[23]=k,e[24]=d,e[25]=f,e[26]=m,e[27]=p,e[28]=w):w=e[28];let S;e[29]!==n?(S=U("flex size-full flex-col gap-4",n),e[29]=n,e[30]=S):S=e[30];let N;e[31]!==r||e[32]!==S?(N=h.jsx("div",{className:S,...r}),e[31]=r,e[32]=S,e[33]=N):N=e[33];let O;return e[34]!==w||e[35]!==N?(O=h.jsx(hc.Provider,{value:w,children:N}),e[34]=w,e[35]=N,e[36]=O):O=e[36],O},dc=z.memo(t=>{const e=D.c(34);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);const r=z.useRef(null),{hue:i,saturation:o,lightness:a,setSaturation:l,setLightness:c}=ci(),[u,f]=z.useState(!1),[d,p]=z.useState(0),[g,m]=z.useState(0);let b;b=`linear-gradient(0deg, oklch(0 0 0), oklch(0 0 0 / 0%)),
			linear-gradient(90deg, oklch(1 0 0), oklch(1 0 0 / 0%)),
			hsl(${i}, 100%, 50%)`;const y=b;let k,x;e[3]!==a||e[4]!==o?(k=()=>{const F=o/100,L=F<.01?100:50+50*(1-F),W=1-a/L;p(F),m(W)},x=[o,a],e[3]=a,e[4]=o,e[5]=k,e[6]=x):(k=e[5],x=e[6]),z.useEffect(k,x);let _;e[7]!==c||e[8]!==l?(_=F=>{if(!r.current)return;const L=r.current.getBoundingClientRect(),W=Math.max(0,Math.min(1,(F.clientX-L.left)/L.width)),K=Math.max(0,Math.min(1,(F.clientY-L.top)/L.height));p(W),m(K),l(W*100);const Y=(W<.01?100:50+50*(1-W))*(1-K);c(Y)},e[7]=c,e[8]=l,e[9]=_):_=e[9];const E=_;let T;e[10]!==u||e[11]!==E?(T=F=>{u&&E(F)},e[10]=u,e[11]=E,e[12]=T):T=e[12];const v=T;let w,S;e[13]!==v||e[14]!==u?(w=()=>{const F=()=>f(!1);return u&&(window.addEventListener("pointermove",v),window.addEventListener("pointerup",F)),()=>{window.removeEventListener("pointermove",v),window.removeEventListener("pointerup",F)}},S=[u,v],e[13]=v,e[14]=u,e[15]=w,e[16]=S):(w=e[15],S=e[16]),z.useEffect(w,S);let N;e[17]!==n?(N=U("relative size-full cursor-crosshair rounded",n),e[17]=n,e[18]=N):N=e[18];let O,A;e[19]!==E?(A=F=>{F.preventDefault(),f(!0),E(F)},O=F=>{E(F)},e[19]=E,e[20]=O,e[21]=A):(O=e[20],A=e[21]);let C;e[22]!==y?(C={background:y},e[22]=y,e[23]=C):C=e[23];const M=`${d*100}%`,P=`${g*100}%`;let R;e[24]!==M||e[25]!==P?(R=h.jsx("div",{className:"-translate-x-1/2 -translate-y-1/2 pointer-events-none absolute h-4 w-4 rounded-full border-2 border-white",style:{left:M,top:P,boxShadow:"0 0 0 1px rgba(0,0,0,0.5)"}}),e[24]=M,e[25]=P,e[26]=R):R=e[26];let $;return e[27]!==s||e[28]!==O||e[29]!==C||e[30]!==R||e[31]!==N||e[32]!==A?($=h.jsx("div",{className:N,onPointerDown:A,onClick:O,ref:r,style:C,...s,children:R}),e[27]=s,e[28]=O,e[29]=C,e[30]=R,e[31]=N,e[32]=A,e[33]=$):$=e[33],$});dc.displayName="ColorPickerSelection";const mp=t=>{const e=D.c(16);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);const{hue:r,setHue:i}=ci();let o;e[3]!==n?(o=U("relative flex h-4 w-full touch-none",n),e[3]=n,e[4]=o):o=e[4];let a;e[5]!==i?(a=d=>{const[p]=d;return i(p)},e[5]=i,e[6]=a):a=e[6];let l;e[7]!==r?(l=[r],e[7]=r,e[8]=l):l=e[8];let c,u;e[9]===Symbol.for("react.memo_cache_sentinel")?(c=h.jsx(Xl,{className:"relative my-0.5 h-3 w-full grow rounded-full bg-[linear-gradient(90deg,#FF0000,#FFFF00,#00FF00,#00FFFF,#0000FF,#FF00FF,#FF0000)]",children:h.jsx(Ql,{className:"absolute h-full"})}),u=h.jsx(Jl,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"}),e[9]=c,e[10]=u):(c=e[9],u=e[10]);let f;return e[11]!==s||e[12]!==o||e[13]!==a||e[14]!==l?(f=h.jsxs(Kl,{className:o,max:360,onValueChange:a,step:1,value:l,...s,children:[c,u]}),e[11]=s,e[12]=o,e[13]=a,e[14]=l,e[15]=f):f=e[15],f},gp=t=>{const e=D.c(15);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);const{setHue:r,setSaturation:i,setLightness:o,setAlpha:a}=ci();let l;e[3]!==a||e[4]!==r||e[5]!==o||e[6]!==i?(l=async()=>{try{const g=await new EyeDropper().open(),m=pe(g.sRGBHex),[b,y,k]=m.hsl().array();r(b),i(y),o(k),a(100)}catch(p){console.error("EyeDropper failed:",p)}},e[3]=a,e[4]=r,e[5]=o,e[6]=i,e[7]=l):l=e[7];const c=l;let u;e[8]!==n?(u=U("shrink-0 text-muted-foreground",n),e[8]=n,e[9]=u):u=e[9];let f;e[10]===Symbol.for("react.memo_cache_sentinel")?(f=h.jsx(Gf,{size:16}),e[10]=f):f=e[10];let d;return e[11]!==c||e[12]!==s||e[13]!==u?(d=h.jsx(Fe,{className:u,onClick:c,size:"icon",variant:"outline",type:"button",...s,children:f}),e[11]=c,e[12]=s,e[13]=u,e[14]=d):d=e[14],d},yp=t=>{const e=D.c(86);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);const{hue:r,saturation:i,lightness:o,alpha:a,mode:l,setHue:c,setSaturation:u,setLightness:f}=ci();let d,p,g;e[3]!==a||e[4]!==r||e[5]!==o||e[6]!==i?(d=pe.hsl(r,i,o,a/100),p=z.useState,g=d.hex(),e[3]=a,e[4]=r,e[5]=o,e[6]=i,e[7]=d,e[8]=p,e[9]=g):(d=e[7],p=e[8],g=e[9]);const[m,b]=p(g);let y,k;e[10]!==d||e[11]!==l?(y=()=>{l==="hex"&&b(d.hex())},k=[d,l],e[10]=d,e[11]=l,e[12]=y,e[13]=k):(y=e[12],k=e[13]),z.useEffect(y,k);let x;e[14]!==c||e[15]!==f||e[16]!==u?(x=S=>{b(S);try{const O=pe(S).hsl();c(O.hue()),u(O.saturationl()),f(O.lightness())}catch{}},e[14]=c,e[15]=f,e[16]=u,e[17]=x):x=e[17];const _=x;let E;e[18]!==d||e[19]!==l||e[20]!==c||e[21]!==f||e[22]!==u?(E=(S,N)=>{e:switch(l){case"rgb":{const O=d.rgb().array();O[S]=N;const A=pe.rgb(O).hsl();c(A.hue()),u(A.saturationl()),f(A.lightness());break e}case"hsl":{const O=d.hsl().array();O[S]=N,c(O[0]),u(O[1]),f(O[2])}}},e[18]=d,e[19]=l,e[20]=c,e[21]=f,e[22]=u,e[23]=E):E=e[23];const T=E;let v;e[24]!==n||e[25]!==T?(v=S=>S.map((N,O)=>h.jsx(ps,{className:U("h-8 rounded-r-none bg-secondary px-2 text-xs shadow-none",O&&"rounded-l-none",n),type:"number",value:N,onChange:A=>T(O,Number(A.target.value))},O)),e[24]=n,e[25]=T,e[26]=v):v=e[26];const w=v;if(l==="hex"){let S;e[27]!==n?(S=U("-space-x-px relative flex w-full items-center rounded-md shadow-sm",n),e[27]=n,e[28]=S):S=e[28];let N;e[29]!==_?(N=C=>_(C.target.value),e[29]=_,e[30]=N):N=e[30];let O;e[31]!==m||e[32]!==N?(O=h.jsx(ps,{className:"h-8 rounded-r-none bg-secondary px-2 text-xs shadow-none",type:"text",value:m,onChange:N}),e[31]=m,e[32]=N,e[33]=O):O=e[33];let A;return e[34]!==s||e[35]!==O||e[36]!==S?(A=h.jsx("div",{className:S,...s,children:O}),e[34]=s,e[35]=O,e[36]=S,e[37]=A):A=e[37],A}if(l==="rgb"){let S,N,O;if(e[38]!==n||e[39]!==d||e[40]!==s||e[41]!==w){const C=d.rgb().array().map(bp);e[45]!==n?(N=U("-space-x-px flex items-center rounded-md shadow-sm",n),e[45]=n,e[46]=N):N=e[46],O=s,S=w(C),e[38]=n,e[39]=d,e[40]=s,e[41]=w,e[42]=S,e[43]=N,e[44]=O}else S=e[42],N=e[43],O=e[44];let A;return e[47]!==S||e[48]!==N||e[49]!==O?(A=h.jsx("div",{className:N,...O,children:S}),e[47]=S,e[48]=N,e[49]=O,e[50]=A):A=e[50],A}if(l==="hsl"){let S,N,O;if(e[51]!==n||e[52]!==d||e[53]!==s||e[54]!==w){const C=d.hsl().array().map(vp);e[58]!==n?(N=U("-space-x-px flex items-center rounded-md shadow-sm",n),e[58]=n,e[59]=N):N=e[59],O=s,S=w(C),e[51]=n,e[52]=d,e[53]=s,e[54]=w,e[55]=S,e[56]=N,e[57]=O}else S=e[55],N=e[56],O=e[57];let A;return e[60]!==S||e[61]!==N||e[62]!==O?(A=h.jsx("div",{className:N,...O,children:S}),e[60]=S,e[61]=N,e[62]=O,e[63]=A):A=e[63],A}if(l==="css"){let S,N,O,A,C,M,P;if(e[64]!==n||e[65]!==d||e[66]!==s){const L=d.rgb().array().map(wp);e[74]!==n?(A=U("w-full rounded-md shadow-sm",n),e[74]=n,e[75]=A):A=e[75],C=s,S=ps,P="h-8 w-full bg-secondary px-2 text-xs shadow-none",N=!0,O="text",M=L.join(", "),e[64]=n,e[65]=d,e[66]=s,e[67]=S,e[68]=N,e[69]=O,e[70]=A,e[71]=C,e[72]=M,e[73]=P}else S=e[67],N=e[68],O=e[69],A=e[70],C=e[71],M=e[72],P=e[73];const R=`rgba(${M}, ${a}%)`;let $;e[76]!==S||e[77]!==N||e[78]!==O||e[79]!==R||e[80]!==P?($=h.jsx(S,{className:P,readOnly:N,type:O,value:R}),e[76]=S,e[77]=N,e[78]=O,e[79]=R,e[80]=P,e[81]=$):$=e[81];let F;return e[82]!==A||e[83]!==C||e[84]!==$?(F=h.jsx("div",{className:A,...C,children:$}),e[82]=A,e[83]=C,e[84]=$,e[85]=F):F=e[85],F}return null};function bp(t){return Math.round(t)}function vp(t){return Math.round(t)}function wp(t){return Math.round(t)}function pc(t){const e=D.c(16),{defaultColor:n,onChangeComplete:s}=t;let r;e[0]!==n?(r=pe(n).hex(),e[0]=n,e[1]=r):r=e[1];const[i,o]=z.useState(r);let a,l;e[2]!==i||e[3]!==s?(l=ec.debounce(b=>{const y=pe(b).hex();y!==i&&(o(y),s(y))},300),e[2]=i,e[3]=s,e[4]=l):l=e[4],a=l;const c=a;let u;e[5]!==i?(u=h.jsx(hp,{asChild:!0,children:h.jsx(Fe,{variant:"secondary",className:"w-full",children:h.jsx("div",{className:"h-full w-full rounded-md",style:{background:i}})})}),e[5]=i,e[6]=u):u=e[6];let f;e[7]===Symbol.for("react.memo_cache_sentinel")?(f=h.jsx(dc,{className:"aspect-square"}),e[7]=f):f=e[7];let d;e[8]===Symbol.for("react.memo_cache_sentinel")?(d=h.jsx("div",{className:"flex items-center gap-4",children:h.jsx(mp,{})}),e[8]=d):d=e[8];let p;e[9]===Symbol.for("react.memo_cache_sentinel")?(p=h.jsxs("div",{className:"flex items-baseline gap-2",children:[h.jsx(gp,{}),h.jsx(yp,{})]}),e[9]=p):p=e[9];let g;e[10]!==i||e[11]!==c?(g=h.jsx(dp,{asChild:!0,children:h.jsxs(pp,{className:"rounded-md border w-full shadow-md",defaultValue:i,onChange:c,children:[f,d,p]})}),e[10]=i,e[11]=c,e[12]=g):g=e[12];let m;return e[13]!==u||e[14]!==g?(m=h.jsxs(fp,{children:[u,g]}),e[13]=u,e[14]=g,e[15]=m):m=e[15],m}function ft(t){const e=D.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=U("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx(qh,{"data-slot":"label",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function mr(t){const e=D.c(9);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=U("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",n),e[3]=n,e[4]=r):r=e[4];let i;e[5]===Symbol.for("react.memo_cache_sentinel")?(i=h.jsx(Hh,{"data-slot":"switch-thumb",className:U("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")}),e[5]=i):i=e[5];let o;return e[6]!==s||e[7]!==r?(o=h.jsx(Kh,{"data-slot":"switch",className:r,...s,children:i}),e[6]=s,e[7]=r,e[8]=o):o=e[8],o}const sr=Ro()(pd((t,e)=>({theme:"dark",saveInterval:300,debugText:!1,gridColor:"#92a3bb",SSAOEnabled:!0,DOFEnabled:!0,controlDamping:!1,angleSnap:11.25,distanceSnap:1/16,setTheme:n=>t({theme:n}),setSaveInterval:n=>t({saveInterval:n}),setDebugText:n=>t({debugText:n}),setGridColor:n=>t({gridColor:n}),setSSAOEnabled:n=>t({SSAOEnabled:n}),setDOFEnabled:n=>t({DOFEnabled:n}),setControlDamping:n=>t({controlDamping:n}),setAngleSnap:n=>t({angleSnap:n}),setDistanceSnap:n=>t({distanceSnap:n}),getComplementaryGridColor:()=>cc(e().gridColor,.5)}),{version:0,name:"preferences",storage:md(()=>localStorage)})),ms=(()=>{if(typeof self>"u")return!1;if("top"in self&&self!==top)try{top.window.document._=0}catch{return!1}return"showOpenFilePicker"in self})(),xp=ms?Promise.resolve().then(function(){return Tp}):Promise.resolve().then(function(){return Ip});async function Fo(...t){return(await xp).default(...t)}ms?Promise.resolve().then(function(){return Op}):Promise.resolve().then(function(){return Pp});const _p=ms?Promise.resolve().then(function(){return Cp}):Promise.resolve().then(function(){return $p});async function Sp(...t){return(await _p).default(...t)}const Ep=async t=>{const e=await t.getFile();return e.handle=t,e};var kp=async(t=[{}])=>{Array.isArray(t)||(t=[t]);const e=[];t.forEach((r,i)=>{e[i]={description:r.description||"Files",accept:{}},r.mimeTypes?r.mimeTypes.map(o=>{e[i].accept[o]=r.extensions||[]}):e[i].accept["*/*"]=r.extensions||[]});const n=await window.showOpenFilePicker({id:t[0].id,startIn:t[0].startIn,types:e,multiple:t[0].multiple||!1,excludeAcceptAllOption:t[0].excludeAcceptAllOption||!1}),s=await Promise.all(n.map(Ep));return t[0].multiple?s:s[0]},Tp={__proto__:null,default:kp};function Rr(t){function e(n){if(Object(n)!==n)return Promise.reject(new TypeError(n+" is not an object."));var s=n.done;return Promise.resolve(n.value).then(function(r){return{value:r,done:s}})}return Rr=function(n){this.s=n,this.n=n.next},Rr.prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(n){var s=this.s.return;return s===void 0?Promise.resolve({value:n,done:!0}):e(s.apply(this.s,arguments))},throw:function(n){var s=this.s.return;return s===void 0?Promise.reject(n):e(s.apply(this.s,arguments))}},new Rr(t)}const mc=async(t,e,n=t.name,s)=>{const r=[],i=[];var o,a=!1,l=!1;try{for(var c,u=(function(f){var d,p,g,m=2;for(typeof Symbol<"u"&&(p=Symbol.asyncIterator,g=Symbol.iterator);m--;){if(p&&(d=f[p])!=null)return d.call(f);if(g&&(d=f[g])!=null)return new Rr(d.call(f));p="@@asyncIterator",g="@@iterator"}throw new TypeError("Object is not async iterable")})(t.values());a=!(c=await u.next()).done;a=!1){const f=c.value,d=`${n}/${f.name}`;f.kind==="file"?i.push(f.getFile().then(p=>(p.directoryHandle=t,p.handle=f,Object.defineProperty(p,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>d})))):f.kind!=="directory"||!e||s&&s(f)||r.push(mc(f,e,d,s))}}catch(f){l=!0,o=f}finally{try{a&&u.return!=null&&await u.return()}finally{if(l)throw o}}return[...(await Promise.all(r)).flat(),...await Promise.all(i)]};var Np=async(t={})=>{t.recursive=t.recursive||!1,t.mode=t.mode||"read";const e=await window.showDirectoryPicker({id:t.id,startIn:t.startIn,mode:t.mode});return(await(await e.values()).next()).done?[e]:mc(e,t.recursive,void 0,t.skipDirectory)},Op={__proto__:null,default:Np},Ap=async(t,e=[{}],n=null,s=!1,r=null)=>{Array.isArray(e)||(e=[e]),e[0].fileName=e[0].fileName||"Untitled";const i=[];let o=null;if(t instanceof Blob&&t.type?o=t.type:t.headers&&t.headers.get("content-type")&&(o=t.headers.get("content-type")),e.forEach((c,u)=>{i[u]={description:c.description||"Files",accept:{}},c.mimeTypes?(u===0&&o&&c.mimeTypes.push(o),c.mimeTypes.map(f=>{i[u].accept[f]=c.extensions||[]})):o?i[u].accept[o]=c.extensions||[]:i[u].accept["*/*"]=c.extensions||[]}),n)try{await n.getFile()}catch(c){if(n=null,s)throw c}const a=n||await window.showSaveFilePicker({suggestedName:e[0].fileName,id:e[0].id,startIn:e[0].startIn,types:i,excludeAcceptAllOption:e[0].excludeAcceptAllOption||!1});!n&&r&&r(a);const l=await a.createWritable();return"stream"in t?(await t.stream().pipeTo(l),a):"body"in t?(await t.body.pipeTo(l),a):(await l.write(await t),await l.close(),a)},Cp={__proto__:null,default:Ap},jp=async(t=[{}])=>(Array.isArray(t)||(t=[t]),new Promise((e,n)=>{const s=document.createElement("input");s.type="file";const r=[...t.map(i=>i.mimeTypes||[]),...t.map(i=>i.extensions||[])].join();s.multiple=t[0].multiple||!1,s.accept=r||"",s.style.display="none",document.body.append(s),s.addEventListener("cancel",()=>{s.remove(),n(new DOMException("The user aborted a request.","AbortError"))}),s.addEventListener("change",()=>{s.remove(),e(s.multiple?Array.from(s.files):s.files[0])}),"showPicker"in HTMLInputElement.prototype?s.showPicker():s.click()})),Ip={__proto__:null,default:jp},Mp=async(t=[{}])=>(Array.isArray(t)||(t=[t]),t[0].recursive=t[0].recursive||!1,new Promise((e,n)=>{const s=document.createElement("input");s.type="file",s.webkitdirectory=!0,s.style.display="none",document.body.append(s),s.addEventListener("cancel",()=>{s.remove(),n(new DOMException("The user aborted a request.","AbortError"))}),s.addEventListener("change",()=>{s.remove();let r=Array.from(s.files);t[0].recursive?t[0].recursive&&t[0].skipDirectory&&(r=r.filter(i=>i.webkitRelativePath.split("/").every(o=>!t[0].skipDirectory({name:o,kind:"directory"})))):r=r.filter(i=>i.webkitRelativePath.split("/").length===2),e(r)}),"showPicker"in HTMLInputElement.prototype?s.showPicker():s.click()})),Pp={__proto__:null,default:Mp},Rp=async(t,e={})=>{Array.isArray(e)&&(e=e[0]);const n=document.createElement("a");let s=t;"body"in t&&(s=await(async function(o,a){const l=o.getReader(),c=new ReadableStream({start:d=>(async function p(){return l.read().then(({done:g,value:m})=>{if(!g)return d.enqueue(m),p();d.close()})})()}),u=new Response(c),f=await u.blob();return l.releaseLock(),new Blob([f],{type:a})})(t.body,t.headers.get("content-type"))),n.download=e.fileName||"Untitled",n.href=URL.createObjectURL(await s);const r=()=>{typeof i=="function"&&i()},i=e.legacySetup&&e.legacySetup(r,()=>i(),n);return n.addEventListener("click",()=>{setTimeout(()=>URL.revokeObjectURL(n.href),3e4),r()}),n.click(),null},$p={__proto__:null,default:Rp},Ee=Uint8Array,ct=Uint16Array,Bo=Int32Array,ui=new Ee([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fi=new Ee([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),oo=new Ee([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),gc=function(t,e){for(var n=new ct(31),s=0;s<31;++s)n[s]=e+=1<<t[s-1];for(var r=new Bo(n[30]),s=1;s<30;++s)for(var i=n[s];i<n[s+1];++i)r[i]=i-n[s]<<5|s;return{b:n,r}},yc=gc(ui,2),bc=yc.b,ao=yc.r;bc[28]=258,ao[258]=28;var vc=gc(fi,0),zp=vc.b,Oa=vc.r,lo=new ct(32768);for(var ye=0;ye<32768;++ye){var rn=(ye&43690)>>1|(ye&21845)<<1;rn=(rn&52428)>>2|(rn&13107)<<2,rn=(rn&61680)>>4|(rn&3855)<<4,lo[ye]=((rn&65280)>>8|(rn&255)<<8)>>1}var Ut=(function(t,e,n){for(var s=t.length,r=0,i=new ct(e);r<s;++r)t[r]&&++i[t[r]-1];var o=new ct(e);for(r=1;r<e;++r)o[r]=o[r-1]+i[r-1]<<1;var a;if(n){a=new ct(1<<e);var l=15-e;for(r=0;r<s;++r)if(t[r])for(var c=r<<4|t[r],u=e-t[r],f=o[t[r]-1]++<<u,d=f|(1<<u)-1;f<=d;++f)a[lo[f]>>l]=c}else for(a=new ct(s),r=0;r<s;++r)t[r]&&(a[r]=lo[o[t[r]-1]++]>>15-t[r]);return a}),wn=new Ee(288);for(var ye=0;ye<144;++ye)wn[ye]=8;for(var ye=144;ye<256;++ye)wn[ye]=9;for(var ye=256;ye<280;++ye)wn[ye]=7;for(var ye=280;ye<288;++ye)wn[ye]=8;var Ys=new Ee(32);for(var ye=0;ye<32;++ye)Ys[ye]=5;var Dp=Ut(wn,9,0),Lp=Ut(wn,9,1),Fp=Ut(Ys,5,0),Bp=Ut(Ys,5,1),Ri=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},Tt=function(t,e,n){var s=e/8|0;return(t[s]|t[s+1]<<8)>>(e&7)&n},$i=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},Uo=function(t){return(t+7)/8|0},rr=function(t,e,n){return(e==null||e<0)&&(e=0),(n==null||n>t.length)&&(n=t.length),new Ee(t.subarray(e,n))},Up=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ge=function(t,e,n){var s=new Error(e||Up[t]);if(s.code=t,Error.captureStackTrace&&Error.captureStackTrace(s,Ge),!n)throw s;return s},Zp=function(t,e,n,s){var r=t.length,i=s?s.length:0;if(!r||e.f&&!e.l)return n||new Ee(0);var o=!n,a=o||e.i!=2,l=e.i;o&&(n=new Ee(r*3));var c=function(Ue){var Me=n.length;if(Ue>Me){var je=new Ee(Math.max(Me*2,Ue));je.set(n),n=je}},u=e.f||0,f=e.p||0,d=e.b||0,p=e.l,g=e.d,m=e.m,b=e.n,y=r*8;do{if(!p){u=Tt(t,f,1);var k=Tt(t,f+1,3);if(f+=3,k)if(k==1)p=Lp,g=Bp,m=9,b=5;else if(k==2){var T=Tt(t,f,31)+257,v=Tt(t,f+10,15)+4,w=T+Tt(t,f+5,31)+1;f+=14;for(var S=new Ee(w),N=new Ee(19),O=0;O<v;++O)N[oo[O]]=Tt(t,f+O*3,7);f+=v*3;for(var A=Ri(N),C=(1<<A)-1,M=Ut(N,A,1),O=0;O<w;){var P=M[Tt(t,f,C)];f+=P&15;var x=P>>4;if(x<16)S[O++]=x;else{var R=0,$=0;for(x==16?($=3+Tt(t,f,3),f+=2,R=S[O-1]):x==17?($=3+Tt(t,f,7),f+=3):x==18&&($=11+Tt(t,f,127),f+=7);$--;)S[O++]=R}}var F=S.subarray(0,T),L=S.subarray(T);m=Ri(F),b=Ri(L),p=Ut(F,m,1),g=Ut(L,b,1)}else Ge(1);else{var x=Uo(f)+4,_=t[x-4]|t[x-3]<<8,E=x+_;if(E>r){l&&Ge(0);break}a&&c(d+_),n.set(t.subarray(x,E),d),e.b=d+=_,e.p=f=E*8,e.f=u;continue}if(f>y){l&&Ge(0);break}}a&&c(d+131072);for(var W=(1<<m)-1,K=(1<<b)-1,ne=f;;ne=f){var R=p[$i(t,f)&W],Y=R>>4;if(f+=R&15,f>y){l&&Ge(0);break}if(R||Ge(2),Y<256)n[d++]=Y;else if(Y==256){ne=f,p=null;break}else{var te=Y-254;if(Y>264){var O=Y-257,q=ui[O];te=Tt(t,f,(1<<q)-1)+bc[O],f+=q}var ie=g[$i(t,f)&K],$e=ie>>4;ie||Ge(3),f+=ie&15;var L=zp[$e];if($e>3){var q=fi[$e];L+=$i(t,f)&(1<<q)-1,f+=q}if(f>y){l&&Ge(0);break}a&&c(d+131072);var Be=d+te;if(d<L){var Je=i-L,tt=Math.min(L,Be);for(Je+d<0&&Ge(3);d<tt;++d)n[d]=s[Je+d]}for(;d<Be;++d)n[d]=n[d-L]}}e.l=p,e.p=ne,e.b=d,e.f=u,p&&(u=1,e.m=m,e.d=g,e.n=b)}while(!u);return d!=n.length&&o?rr(n,0,d):n.subarray(0,d)},Yt=function(t,e,n){n<<=e&7;var s=e/8|0;t[s]|=n,t[s+1]|=n>>8},Is=function(t,e,n){n<<=e&7;var s=e/8|0;t[s]|=n,t[s+1]|=n>>8,t[s+2]|=n>>16},zi=function(t,e){for(var n=[],s=0;s<t.length;++s)t[s]&&n.push({s,f:t[s]});var r=n.length,i=n.slice();if(!r)return{t:xc,l:0};if(r==1){var o=new Ee(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(E,T){return E.f-T.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,u=1,f=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};u!=r-1;)a=n[n[c].f<n[f].f?c++:f++],l=n[c!=u&&n[c].f<n[f].f?c++:f++],n[u++]={s:-1,f:a.f+l.f,l:a,r:l};for(var d=i[0].s,s=1;s<r;++s)i[s].s>d&&(d=i[s].s);var p=new ct(d+1),g=co(n[u-1],p,0);if(g>e){var s=0,m=0,b=g-e,y=1<<b;for(i.sort(function(T,v){return p[v.s]-p[T.s]||T.f-v.f});s<r;++s){var k=i[s].s;if(p[k]>e)m+=y-(1<<g-p[k]),p[k]=e;else break}for(m>>=b;m>0;){var x=i[s].s;p[x]<e?m-=1<<e-p[x]++-1:++s}for(;s>=0&&m;--s){var _=i[s].s;p[_]==e&&(--p[_],++m)}g=e}return{t:new Ee(p),l:g}},co=function(t,e,n){return t.s==-1?Math.max(co(t.l,e,n+1),co(t.r,e,n+1)):e[t.s]=n},Aa=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new ct(++e),s=0,r=t[0],i=1,o=function(l){n[s++]=l},a=1;a<=e;++a)if(t[a]==r&&a!=e)++i;else{if(!r&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(r),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(r);i=1,r=t[a]}return{c:n.subarray(0,s),n:e}},Ms=function(t,e){for(var n=0,s=0;s<e.length;++s)n+=t[s]*e[s];return n},wc=function(t,e,n){var s=n.length,r=Uo(e+2);t[r]=s&255,t[r+1]=s>>8,t[r+2]=t[r]^255,t[r+3]=t[r+1]^255;for(var i=0;i<s;++i)t[r+i+4]=n[i];return(r+4+s)*8},Ca=function(t,e,n,s,r,i,o,a,l,c,u){Yt(e,u++,n),++r[256];for(var f=zi(r,15),d=f.t,p=f.l,g=zi(i,15),m=g.t,b=g.l,y=Aa(d),k=y.c,x=y.n,_=Aa(m),E=_.c,T=_.n,v=new ct(19),w=0;w<k.length;++w)++v[k[w]&31];for(var w=0;w<E.length;++w)++v[E[w]&31];for(var S=zi(v,7),N=S.t,O=S.l,A=19;A>4&&!N[oo[A-1]];--A);var C=c+5<<3,M=Ms(r,wn)+Ms(i,Ys)+o,P=Ms(r,d)+Ms(i,m)+o+14+3*A+Ms(v,N)+2*v[16]+3*v[17]+7*v[18];if(l>=0&&C<=M&&C<=P)return wc(e,u,t.subarray(l,l+c));var R,$,F,L;if(Yt(e,u,1+(P<M)),u+=2,P<M){R=Ut(d,p,0),$=d,F=Ut(m,b,0),L=m;var W=Ut(N,O,0);Yt(e,u,x-257),Yt(e,u+5,T-1),Yt(e,u+10,A-4),u+=14;for(var w=0;w<A;++w)Yt(e,u+3*w,N[oo[w]]);u+=3*A;for(var K=[k,E],ne=0;ne<2;++ne)for(var Y=K[ne],w=0;w<Y.length;++w){var te=Y[w]&31;Yt(e,u,W[te]),u+=N[te],te>15&&(Yt(e,u,Y[w]>>5&127),u+=Y[w]>>12)}}else R=Dp,$=wn,F=Fp,L=Ys;for(var w=0;w<a;++w){var q=s[w];if(q>255){var te=q>>18&31;Is(e,u,R[te+257]),u+=$[te+257],te>7&&(Yt(e,u,q>>23&31),u+=ui[te]);var ie=q&31;Is(e,u,F[ie]),u+=L[ie],ie>3&&(Is(e,u,q>>5&8191),u+=fi[ie])}else Is(e,u,R[q]),u+=$[q]}return Is(e,u,R[256]),u+$[256]},Vp=new Bo([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),xc=new Ee(0),Wp=function(t,e,n,s,r,i){var o=i.z||t.length,a=new Ee(s+o+5*(1+Math.ceil(o/7e3))+r),l=a.subarray(s,a.length-r),c=i.l,u=(i.r||0)&7;if(e){u&&(l[0]=i.r>>3);for(var f=Vp[e-1],d=f>>13,p=f&8191,g=(1<<n)-1,m=i.p||new ct(32768),b=i.h||new ct(g+1),y=Math.ceil(n/3),k=2*y,x=function(Ze){return(t[Ze]^t[Ze+1]<<y^t[Ze+2]<<k)&g},_=new Bo(25e3),E=new ct(288),T=new ct(32),v=0,w=0,S=i.i||0,N=0,O=i.w||0,A=0;S+2<o;++S){var C=x(S),M=S&32767,P=b[C];if(m[M]=P,b[C]=M,O<=S){var R=o-S;if((v>7e3||N>24576)&&(R>423||!c)){u=Ca(t,l,0,_,E,T,w,N,A,S-A,u),N=v=w=0,A=S;for(var $=0;$<286;++$)E[$]=0;for(var $=0;$<30;++$)T[$]=0}var F=2,L=0,W=p,K=M-P&32767;if(R>2&&C==x(S-K))for(var ne=Math.min(d,R)-1,Y=Math.min(32767,S),te=Math.min(258,R);K<=Y&&--W&&M!=P;){if(t[S+F]==t[S+F-K]){for(var q=0;q<te&&t[S+q]==t[S+q-K];++q);if(q>F){if(F=q,L=K,q>ne)break;for(var ie=Math.min(K,q-2),$e=0,$=0;$<ie;++$){var Be=S-K+$&32767,Je=m[Be],tt=Be-Je&32767;tt>$e&&($e=tt,P=Be)}}}M=P,P=m[M],K+=M-P&32767}if(L){_[N++]=268435456|ao[F]<<18|Oa[L];var Ue=ao[F]&31,Me=Oa[L]&31;w+=ui[Ue]+fi[Me],++E[257+Ue],++T[Me],O=S+F,++v}else _[N++]=t[S],++E[t[S]]}}for(S=Math.max(S,O);S<o;++S)_[N++]=t[S],++E[t[S]];u=Ca(t,l,c,_,E,T,w,N,A,S-A,u),c||(i.r=u&7|l[u/8|0]<<3,u-=7,i.h=b,i.p=m,i.i=S,i.w=O)}else{for(var S=i.w||0;S<o+c;S+=65535){var je=S+65535;je>=o&&(l[u/8|0]=c,je=o),u=wc(l,u+1,t.subarray(S,je))}i.i=o}return rr(a,0,s+Uo(u)+r)},Yp=(function(){for(var t=new Int32Array(256),e=0;e<256;++e){for(var n=e,s=9;--s;)n=(n&1&&-306674912)^n>>>1;t[e]=n}return t})(),Gp=function(){var t=-1;return{p:function(e){for(var n=t,s=0;s<e.length;++s)n=Yp[n&255^e[s]]^n>>>8;t=n},d:function(){return~t}}},qp=function(t,e,n,s,r){if(!r&&(r={l:1},e.dictionary)){var i=e.dictionary.subarray(-32768),o=new Ee(i.length+t.length);o.set(i),o.set(t,i.length),t=o,r.w=i.length}return Wp(t,e.level==null?6:e.level,e.mem==null?r.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,s,r)},_c=function(t,e){var n={};for(var s in t)n[s]=t[s];for(var s in e)n[s]=e[s];return n},Lt=function(t,e){return t[e]|t[e+1]<<8},Ot=function(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0},Di=function(t,e){return Ot(t,e)+Ot(t,e+4)*4294967296},Le=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8};function Hp(t,e){return qp(t,e||{},0,0)}function Kp(t,e){return Zp(t,{i:2},e&&e.out,e&&e.dictionary)}var Sc=function(t,e,n,s){for(var r in t){var i=t[r],o=e+r,a=s;Array.isArray(i)&&(a=_c(s,i[1]),i=i[0]),i instanceof Ee?n[o]=[i,a]:(n[o+="/"]=[new Ee(0),a],Sc(i,o,n,s))}},ja=typeof TextEncoder<"u"&&new TextEncoder,uo=typeof TextDecoder<"u"&&new TextDecoder,Xp=0;try{uo.decode(xc,{stream:!0}),Xp=1}catch{}var Qp=function(t){for(var e="",n=0;;){var s=t[n++],r=(s>127)+(s>223)+(s>239);if(n+r>t.length)return{s:e,r:rr(t,n-1)};r?r==3?(s=((s&15)<<18|(t[n++]&63)<<12|(t[n++]&63)<<6|t[n++]&63)-65536,e+=String.fromCharCode(55296|s>>10,56320|s&1023)):r&1?e+=String.fromCharCode((s&31)<<6|t[n++]&63):e+=String.fromCharCode((s&15)<<12|(t[n++]&63)<<6|t[n++]&63):e+=String.fromCharCode(s)}};function Gs(t,e){var n;if(ja)return ja.encode(t);for(var s=t.length,r=new Ee(t.length+(t.length>>1)),i=0,o=function(c){r[i++]=c},n=0;n<s;++n){if(i+5>r.length){var a=new Ee(i+8+(s-n<<1));a.set(r),r=a}var l=t.charCodeAt(n);l<128||e?o(l):l<2048?(o(192|l>>6),o(128|l&63)):l>55295&&l<57344?(l=65536+(l&1047552)|t.charCodeAt(++n)&1023,o(240|l>>18),o(128|l>>12&63),o(128|l>>6&63),o(128|l&63)):(o(224|l>>12),o(128|l>>6&63),o(128|l&63))}return rr(r,0,i)}function fo(t,e){if(e){for(var n="",s=0;s<t.length;s+=16384)n+=String.fromCharCode.apply(null,t.subarray(s,s+16384));return n}else{if(uo)return uo.decode(t);var r=Qp(t),i=r.s,n=r.r;return n.length&&Ge(8),i}}var Jp=function(t,e){return e+30+Lt(t,e+26)+Lt(t,e+28)},em=function(t,e,n){var s=Lt(t,e+28),r=fo(t.subarray(e+46,e+46+s),!(Lt(t,e+8)&2048)),i=e+46+s,o=Ot(t,e+20),a=n&&o==4294967295?tm(t,i):[o,Ot(t,e+24),Ot(t,e+42)],l=a[0],c=a[1],u=a[2];return[Lt(t,e+10),l,c,r,i+Lt(t,e+30)+Lt(t,e+32),u]},tm=function(t,e){for(;Lt(t,e)!=1;e+=4+Lt(t,e+2));return[Di(t,e+12),Di(t,e+4),Di(t,e+20)]},ho=function(t){var e=0;if(t)for(var n in t){var s=t[n].length;s>65535&&Ge(9),e+=s+4}return e},Ia=function(t,e,n,s,r,i,o,a){var l=s.length,c=n.extra,u=a&&a.length,f=ho(c);Le(t,e,o!=null?33639248:67324752),e+=4,o!=null&&(t[e++]=20,t[e++]=n.os),t[e]=20,e+=2,t[e++]=n.flag<<1|(i<0&&8),t[e++]=r&&8,t[e++]=n.compression&255,t[e++]=n.compression>>8;var d=new Date(n.mtime==null?Date.now():n.mtime),p=d.getFullYear()-1980;if((p<0||p>119)&&Ge(10),Le(t,e,p<<25|d.getMonth()+1<<21|d.getDate()<<16|d.getHours()<<11|d.getMinutes()<<5|d.getSeconds()>>1),e+=4,i!=-1&&(Le(t,e,n.crc),Le(t,e+4,i<0?-i-2:i),Le(t,e+8,n.size)),Le(t,e+12,l),Le(t,e+14,f),e+=16,o!=null&&(Le(t,e,u),Le(t,e+6,n.attrs),Le(t,e+10,o),e+=14),t.set(s,e),e+=l,f)for(var g in c){var m=c[g],b=m.length;Le(t,e,+g),Le(t,e+2,b),t.set(m,e+4),e+=4+b}return u&&(t.set(a,e),e+=u),e},nm=function(t,e,n,s,r){Le(t,e,101010256),Le(t,e+8,n),Le(t,e+10,n),Le(t,e+12,s),Le(t,e+16,r)};function sm(t,e){e||(e={});var n={},s=[];Sc(t,"",n,e);var r=0,i=0;for(var o in n){var a=n[o],l=a[0],c=a[1],u=c.level==0?0:8,f=Gs(o),d=f.length,p=c.comment,g=p&&Gs(p),m=g&&g.length,b=ho(c.extra);d>65535&&Ge(11);var y=u?Hp(l,c):l,k=y.length,x=Gp();x.p(l),s.push(_c(c,{size:l.length,crc:x.d(),c:y,f,m:g,u:d!=o.length||g&&p.length!=m,o:r,compression:u})),r+=30+d+b+k,i+=76+2*(d+b)+(m||0)+k}for(var _=new Ee(i+22),E=r,T=i-r,v=0;v<s.length;++v){var f=s[v];Ia(_,f.o,f,f.f,f.u,f.c.length);var w=30+f.f.length+ho(f.extra);_.set(f.c,f.o+w),Ia(_,r,f,f.f,f.u,f.c.length,f.o,f.m),r+=16+w+(f.m?f.m.length:0)}return nm(_,r,s.length,T,E),_}function rm(t,e){for(var n={},s=t.length-22;Ot(t,s)!=101010256;--s)(!s||t.length-s>65558)&&Ge(13);var r=Lt(t,s+8);if(!r)return{};var i=Ot(t,s+16),o=i==4294967295||r==65535;if(o){var a=Ot(t,s-12);o=Ot(t,a)==101075792,o&&(r=Ot(t,a+32),i=Ot(t,a+48))}for(var l=0;l<r;++l){var c=em(t,i,o),u=c[0],f=c[1],d=c[2],p=c[3],g=c[4],m=c[5],b=Jp(t,m);i=g,u?u==8?n[p]=Kp(t.subarray(b,b+f),{out:new Ee(d)}):Ge(14,"unknown compression type "+u):n[p]=rr(t,b,b+f)}return n}class Ec{constructor(){this._listeners={}}addEventListener(e,n){const s=this._listeners;return s[e]===void 0&&(s[e]=[]),s[e].indexOf(n)===-1&&s[e].push(n),this}removeEventListener(e,n){const r=this._listeners[e];if(r!==void 0){const i=r.indexOf(n);i!==-1&&r.splice(i,1)}return this}dispatchEvent(e){const s=this._listeners[e.type];if(s!==void 0){const r=s.slice(0);for(let i=0,o=r.length;i<o;i++)r[i].call(this,e)}return this}dispose(){for(const e in this._listeners)delete this._listeners[e]}}class os{constructor(e,n,s,r={}){if(this._name=void 0,this._parent=void 0,this._child=void 0,this._attributes=void 0,this._disposed=!1,this._name=e,this._parent=n,this._child=s,this._attributes=r,!n.isOnGraph(s))throw new Error("Cannot connect disconnected graphs.")}getName(){return this._name}getParent(){return this._parent}getChild(){return this._child}setChild(e){return this._child=e,this}getAttributes(){return this._attributes}dispose(){this._disposed||(this._parent._destroyRef(this),this._disposed=!0)}isDisposed(){return this._disposed}}class im extends Ec{constructor(...e){super(...e),this._emptySet=new Set,this._edges=new Set,this._parentEdges=new Map,this._childEdges=new Map}listEdges(){return Array.from(this._edges)}listParentEdges(e){return Array.from(this._childEdges.get(e)||this._emptySet)}listParents(e){const n=new Set;for(const s of this.listParentEdges(e))n.add(s.getParent());return Array.from(n)}listChildEdges(e){return Array.from(this._parentEdges.get(e)||this._emptySet)}listChildren(e){const n=new Set;for(const s of this.listChildEdges(e))n.add(s.getChild());return Array.from(n)}disconnectParents(e,n){for(const s of this.listParentEdges(e))(!n||n(s.getParent()))&&s.dispose();return this}_createEdge(e,n,s,r){const i=new os(e,n,s,r);this._edges.add(i);const o=i.getParent();this._parentEdges.has(o)||this._parentEdges.set(o,new Set),this._parentEdges.get(o).add(i);const a=i.getChild();return this._childEdges.has(a)||this._childEdges.set(a,new Set),this._childEdges.get(a).add(i),i}_destroyEdge(e){return this._edges.delete(e),this._parentEdges.get(e.getParent()).delete(e),this._childEdges.get(e.getChild()).delete(e),this}}function Fs(){return Fs=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Fs.apply(this,arguments)}class mn{constructor(e){if(this.list=[],e)for(const n of e)this.list.push(n)}add(e){this.list.push(e)}remove(e){const n=this.list.indexOf(e);n>=0&&this.list.splice(n,1)}removeChild(e){const n=[];for(const s of this.list)s.getChild()===e&&n.push(s);for(const s of n)this.remove(s);return n}listRefsByChild(e){const n=[];for(const s of this.list)s.getChild()===e&&n.push(s);return n}values(){return this.list}}class ve{constructor(e){if(this.set=new Set,this.map=new Map,e)for(const n of e)this.add(n)}add(e){const n=e.getChild();this.removeChild(n),this.set.add(e),this.map.set(n,e)}remove(e){this.set.delete(e),this.map.delete(e.getChild())}removeChild(e){const n=this.map.get(e)||null;return n&&this.remove(n),n}getRefByChild(e){return this.map.get(e)||null}values(){return Array.from(this.set)}}class Ft{constructor(e){this.map={},e&&Object.assign(this.map,e)}set(e,n){this.map[e]=n}delete(e){delete this.map[e]}get(e){return this.map[e]||null}keys(){return Object.keys(this.map)}values(){return Object.values(this.map)}}const ce=Symbol("attributes"),In=Symbol("immutableKeys");class Zo extends Ec{constructor(e){super(),this._disposed=!1,this.graph=void 0,this[ce]=void 0,this[In]=void 0,this.graph=e,this[In]=new Set,this[ce]=this._createAttributes()}getDefaults(){return{}}_createAttributes(){const e=this.getDefaults(),n={};for(const s in e){const r=e[s];if(r instanceof Zo){const i=this.graph._createEdge(s,this,r);this[In].add(s),n[s]=i}else n[s]=r}return n}isOnGraph(e){return this.graph===e.graph}isDisposed(){return this._disposed}dispose(){this._disposed||(this.graph.listChildEdges(this).forEach(e=>e.dispose()),this.graph.disconnectParents(this),this._disposed=!0,this.dispatchEvent({type:"dispose"}))}detach(){return this.graph.disconnectParents(this),this}swap(e,n){for(const s in this[ce]){const r=this[ce][s];if(r instanceof os){const i=r;i.getChild()===e&&this.setRef(s,n,i.getAttributes())}else if(r instanceof mn)for(const i of r.listRefsByChild(e)){const o=i.getAttributes();this.removeRef(s,e),this.addRef(s,n,o)}else if(r instanceof ve){const i=r.getRefByChild(e);if(i){const o=i.getAttributes();this.removeRef(s,e),this.addRef(s,n,o)}}else if(r instanceof Ft)for(const i of r.keys()){const o=r.get(i);o.getChild()===e&&this.setRefMap(s,i,n,o.getAttributes())}}return this}get(e){return this[ce][e]}set(e,n){return this[ce][e]=n,this.dispatchEvent({type:"change",attribute:e})}getRef(e){const n=this[ce][e];return n?n.getChild():null}setRef(e,n,s){if(this[In].has(e))throw new Error(`Cannot overwrite immutable attribute, "${e}".`);const r=this[ce][e];if(r&&r.dispose(),!n)return this;const i=this.graph._createEdge(e,this,n,s);return this[ce][e]=i,this.dispatchEvent({type:"change",attribute:e})}listRefs(e){return this.assertRefList(e).values().map(s=>s.getChild())}addRef(e,n,s){const r=this.graph._createEdge(e,this,n,s);return this.assertRefList(e).add(r),this.dispatchEvent({type:"change",attribute:e})}removeRef(e,n){const s=this.assertRefList(e);if(s instanceof mn)for(const r of s.listRefsByChild(n))r.dispose();else{const r=s.getRefByChild(n);r&&r.dispose()}return this}assertRefList(e){const n=this[ce][e];if(n instanceof mn||n instanceof ve)return n;throw new Error(`Expected RefList or RefSet for attribute "${e}"`)}listRefMapKeys(e){return this.assertRefMap(e).keys()}listRefMapValues(e){return this.assertRefMap(e).values().map(n=>n.getChild())}getRefMap(e,n){const r=this.assertRefMap(e).get(n);return r?r.getChild():null}setRefMap(e,n,s,r){const i=this.assertRefMap(e),o=i.get(n);if(o&&o.dispose(),!s)return this;r=Object.assign(r||{},{key:n});const a=this.graph._createEdge(e,this,s,Fs({},r,{key:n}));return i.set(n,a),this.dispatchEvent({type:"change",attribute:e,key:n})}assertRefMap(e){const n=this[ce][e];if(n instanceof Ft)return n;throw new Error(`Expected RefMap for attribute "${e}"`)}dispatchEvent(e){return super.dispatchEvent(Fs({},e,{target:this})),this.graph.dispatchEvent(Fs({},e,{target:this,type:`node:${e.type}`})),this}_destroyRef(e){const n=e.getName();if(this[ce][n]===e)this[ce][n]=null,this[In].has(n)&&e.getChild().dispose();else if(this[ce][n]instanceof mn)this[ce][n].remove(e);else if(this[ce][n]instanceof ve)this[ce][n].remove(e);else if(this[ce][n]instanceof Ft){const s=this[ce][n];for(const r of s.keys())s.get(r)===e&&s.delete(r)}else return;this.graph._destroyEdge(e),this.dispatchEvent({type:"change",attribute:n})}}const kc="v4.2.1",Hr="@glb.bin";var V;(function(t){t.ACCESSOR="Accessor",t.ANIMATION="Animation",t.ANIMATION_CHANNEL="AnimationChannel",t.ANIMATION_SAMPLER="AnimationSampler",t.BUFFER="Buffer",t.CAMERA="Camera",t.MATERIAL="Material",t.MESH="Mesh",t.PRIMITIVE="Primitive",t.PRIMITIVE_TARGET="PrimitiveTarget",t.NODE="Node",t.ROOT="Root",t.SCENE="Scene",t.SKIN="Skin",t.TEXTURE="Texture",t.TEXTURE_INFO="TextureInfo"})(V||(V={}));var Kr;(function(t){t.INTERLEAVED="interleaved",t.SEPARATE="separate"})(Kr||(Kr={}));var ut;(function(t){t.ARRAY_BUFFER="ARRAY_BUFFER",t.ELEMENT_ARRAY_BUFFER="ELEMENT_ARRAY_BUFFER",t.INVERSE_BIND_MATRICES="INVERSE_BIND_MATRICES",t.OTHER="OTHER",t.SPARSE="SPARSE"})(ut||(ut={}));var po;(function(t){t[t.R=4096]="R",t[t.G=256]="G",t[t.B=16]="B",t[t.A=1]="A"})(po||(po={}));var yn;(function(t){t.GLTF="GLTF",t.GLB="GLB"})(yn||(yn={}));const hi={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};class ae{static createBufferFromDataURI(e){if(typeof Buffer>"u"){const n=atob(e.split(",")[1]),s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}else{const n=e.split(",")[1],s=e.indexOf("base64")>=0;return Buffer.from(n,s?"base64":"utf8")}}static encodeText(e){return new TextEncoder().encode(e)}static decodeText(e){return new TextDecoder().decode(e)}static concat(e){let n=0;for(const i of e)n+=i.byteLength;const s=new Uint8Array(n);let r=0;for(const i of e)s.set(i,r),r+=i.byteLength;return s}static pad(e,n=0){const s=this.padNumber(e.byteLength);if(s===e.byteLength)return e;const r=new Uint8Array(s);if(r.set(e),n!==0)for(let i=e.byteLength;i<s;i++)r[i]=n;return r}static padNumber(e){return Math.ceil(e/4)*4}static equals(e,n){if(e===n)return!0;if(e.byteLength!==n.byteLength)return!1;let s=e.byteLength;for(;s--;)if(e[s]!==n[s])return!1;return!0}static toView(e,n=0,s=1/0){return new Uint8Array(e.buffer,e.byteOffset+n,Math.min(e.byteLength,s))}static assertView(e){if(e&&!ArrayBuffer.isView(e))throw new Error(`Method requires Uint8Array parameter; received "${typeof e}".`);return e}}class om{match(e){return e.length>=3&&e[0]===255&&e[1]===216&&e[2]===255}getSize(e){let n=new DataView(e.buffer,e.byteOffset+4),s,r;for(;n.byteLength;){if(s=n.getUint16(0,!1),am(n,s),r=n.getUint8(s+1),r===192||r===193||r===194)return[n.getUint16(s+7,!1),n.getUint16(s+5,!1)];n=new DataView(e.buffer,n.byteOffset+s+2)}throw new TypeError("Invalid JPG, no size found")}getChannels(e){return 3}}class di{match(e){return e.length>=8&&e[0]===137&&e[1]===80&&e[2]===78&&e[3]===71&&e[4]===13&&e[5]===10&&e[6]===26&&e[7]===10}getSize(e){const n=new DataView(e.buffer,e.byteOffset);return ae.decodeText(e.slice(12,16))===di.PNG_FRIED_CHUNK_NAME?[n.getUint32(32,!1),n.getUint32(36,!1)]:[n.getUint32(16,!1),n.getUint32(20,!1)]}getChannels(e){return 4}}di.PNG_FRIED_CHUNK_NAME="CgBI";class Ln{static registerFormat(e,n){this.impls[e]=n}static getMimeType(e){for(const n in this.impls)if(this.impls[n].match(e))return n;return null}static getSize(e,n){return this.impls[n]?this.impls[n].getSize(e):null}static getChannels(e,n){return this.impls[n]?this.impls[n].getChannels(e):null}static getVRAMByteLength(e,n){if(!this.impls[n])return null;if(this.impls[n].getVRAMByteLength)return this.impls[n].getVRAMByteLength(e);let s=0;const r=4,i=this.getSize(e,n);if(!i)return null;for(;i[0]>1||i[1]>1;)s+=i[0]*i[1]*r,i[0]=Math.max(Math.floor(i[0]/2),1),i[1]=Math.max(Math.floor(i[1]/2),1);return s+=1*r,s}static mimeTypeToExtension(e){return e==="image/jpeg"?"jpg":e.split("/").pop()}static extensionToMimeType(e){return e==="jpg"?"image/jpeg":e?`image/${e}`:""}}Ln.impls={"image/jpeg":new om,"image/png":new di};function am(t,e){if(e>t.byteLength)throw new TypeError("Corrupt JPG, exceeded buffer limits");if(t.getUint8(e)!==255)throw new TypeError("Invalid JPG, marker table corrupted");return t}class ws{static basename(e){const n=e.split(/[\\/]/).pop();return n.substring(0,n.lastIndexOf("."))}static extension(e){if(e.startsWith("data:image/")){const n=e.match(/data:(image\/\w+)/)[1];return Ln.mimeTypeToExtension(n)}else{if(e.startsWith("data:model/gltf+json"))return"gltf";if(e.startsWith("data:model/gltf-binary"))return"glb";if(e.startsWith("data:application/"))return"bin"}return e.split(/[\\/]/).pop().split(/[.]/).pop()}}var mo=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function lm(){var t=new mo(3);return mo!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Li(t){var e=t[0],n=t[1],s=t[2];return Math.hypot(e,n,s)}(function(){var t=lm();return function(e,n,s,r,i,o){var a,l;for(n||(n=3),s||(s=0),r?l=Math.min(r*n+s,e.length):l=e.length,a=s;a<l;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],i(t,t,o),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2];return e}})();const Ma="https://null.example";class Bs{static dirname(e){const n=e.lastIndexOf("/");return n===-1?"./":e.substring(0,n+1)}static basename(e){return ws.basename(new URL(e,Ma).pathname)}static extension(e){return ws.extension(new URL(e,Ma).pathname)}static resolve(e,n){if(!this.isRelativePath(n))return n;const s=e.split("/"),r=n.split("/");s.pop();for(let i=0;i<r.length;i++)r[i]!=="."&&(r[i]===".."?s.pop():s.push(r[i]));return s.join("/")}static isAbsoluteURL(e){return this.PROTOCOL_REGEXP.test(e)}static isRelativePath(e){return!/^(?:[a-zA-Z]+:)?\//.test(e)}}Bs.DEFAULT_INIT={};Bs.PROTOCOL_REGEXP=/^[a-zA-Z]+:\/\//;function Pa(t){return Object.prototype.toString.call(t)==="[object Object]"}function Pn(t){if(Pa(t)===!1)return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(Pa(n)===!1||Object.hasOwn(n,"isPrototypeOf")===!1)}var go,yo;(function(t){t[t.SILENT=4]="SILENT",t[t.ERROR=3]="ERROR",t[t.WARN=2]="WARN",t[t.INFO=1]="INFO",t[t.DEBUG=0]="DEBUG"})(yo||(yo={}));class dt{constructor(e){this.verbosity=void 0,this.verbosity=e}debug(e){this.verbosity<=dt.Verbosity.DEBUG&&console.debug(e)}info(e){this.verbosity<=dt.Verbosity.INFO&&console.info(e)}warn(e){this.verbosity<=dt.Verbosity.WARN&&console.warn(e)}error(e){this.verbosity<=dt.Verbosity.ERROR&&console.error(e)}}go=dt;dt.Verbosity=yo;dt.DEFAULT_INSTANCE=new go(go.Verbosity.INFO);function cm(t){var e=t[0],n=t[1],s=t[2],r=t[3],i=t[4],o=t[5],a=t[6],l=t[7],c=t[8],u=t[9],f=t[10],d=t[11],p=t[12],g=t[13],m=t[14],b=t[15],y=e*o-n*i,k=e*a-s*i,x=e*l-r*i,_=n*a-s*o,E=n*l-r*o,T=s*l-r*a,v=c*g-u*p,w=c*m-f*p,S=c*b-d*p,N=u*m-f*g,O=u*b-d*g,A=f*b-d*m;return y*A-k*O+x*N+_*S-E*w+T*v}function um(t,e,n){var s=e[0],r=e[1],i=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],f=e[8],d=e[9],p=e[10],g=e[11],m=e[12],b=e[13],y=e[14],k=e[15],x=n[0],_=n[1],E=n[2],T=n[3];return t[0]=x*s+_*a+E*f+T*m,t[1]=x*r+_*l+E*d+T*b,t[2]=x*i+_*c+E*p+T*y,t[3]=x*o+_*u+E*g+T*k,x=n[4],_=n[5],E=n[6],T=n[7],t[4]=x*s+_*a+E*f+T*m,t[5]=x*r+_*l+E*d+T*b,t[6]=x*i+_*c+E*p+T*y,t[7]=x*o+_*u+E*g+T*k,x=n[8],_=n[9],E=n[10],T=n[11],t[8]=x*s+_*a+E*f+T*m,t[9]=x*r+_*l+E*d+T*b,t[10]=x*i+_*c+E*p+T*y,t[11]=x*o+_*u+E*g+T*k,x=n[12],_=n[13],E=n[14],T=n[15],t[12]=x*s+_*a+E*f+T*m,t[13]=x*r+_*l+E*d+T*b,t[14]=x*i+_*c+E*p+T*y,t[15]=x*o+_*u+E*g+T*k,t}function fm(t,e){var n=e[0],s=e[1],r=e[2],i=e[4],o=e[5],a=e[6],l=e[8],c=e[9],u=e[10];return t[0]=Math.hypot(n,s,r),t[1]=Math.hypot(i,o,a),t[2]=Math.hypot(l,c,u),t}function hm(t,e){var n=new mo(3);fm(n,e);var s=1/n[0],r=1/n[1],i=1/n[2],o=e[0]*s,a=e[1]*r,l=e[2]*i,c=e[4]*s,u=e[5]*r,f=e[6]*i,d=e[8]*s,p=e[9]*r,g=e[10]*i,m=o+u+g,b=0;return m>0?(b=Math.sqrt(m+1)*2,t[3]=.25*b,t[0]=(f-p)/b,t[1]=(d-l)/b,t[2]=(a-c)/b):o>u&&o>g?(b=Math.sqrt(1+o-u-g)*2,t[3]=(f-p)/b,t[0]=.25*b,t[1]=(a+c)/b,t[2]=(d+l)/b):u>g?(b=Math.sqrt(1+u-o-g)*2,t[3]=(d-l)/b,t[0]=(a+c)/b,t[1]=.25*b,t[2]=(f+p)/b):(b=Math.sqrt(1+g-o-u)*2,t[3]=(a-c)/b,t[0]=(d+l)/b,t[1]=(f+p)/b,t[2]=.25*b),t}class xe{static identity(e){return e}static eq(e,n,s=1e-5){if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(Math.abs(e[r]-n[r])>s)return!1;return!0}static clamp(e,n,s){return e<n?n:e>s?s:e}static decodeNormalizedInt(e,n){switch(n){case 5126:return e;case 5123:return e/65535;case 5121:return e/255;case 5122:return Math.max(e/32767,-1);case 5120:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}static encodeNormalizedInt(e,n){switch(n){case 5126:return e;case 5123:return Math.round(xe.clamp(e,0,1)*65535);case 5121:return Math.round(xe.clamp(e,0,1)*255);case 5122:return Math.round(xe.clamp(e,-1,1)*32767);case 5120:return Math.round(xe.clamp(e,-1,1)*127);default:throw new Error("Invalid component type.")}}static decompose(e,n,s,r){let i=Li([e[0],e[1],e[2]]);const o=Li([e[4],e[5],e[6]]),a=Li([e[8],e[9],e[10]]);cm(e)<0&&(i=-i),n[0]=e[12],n[1]=e[13],n[2]=e[14];const c=e.slice(),u=1/i,f=1/o,d=1/a;c[0]*=u,c[1]*=u,c[2]*=u,c[4]*=f,c[5]*=f,c[6]*=f,c[8]*=d,c[9]*=d,c[10]*=d,hm(s,c),r[0]=i,r[1]=o,r[2]=a}static compose(e,n,s,r){const i=r,o=n[0],a=n[1],l=n[2],c=n[3],u=o+o,f=a+a,d=l+l,p=o*u,g=o*f,m=o*d,b=a*f,y=a*d,k=l*d,x=c*u,_=c*f,E=c*d,T=s[0],v=s[1],w=s[2];return i[0]=(1-(b+k))*T,i[1]=(g+E)*T,i[2]=(m-_)*T,i[3]=0,i[4]=(g-E)*v,i[5]=(1-(p+k))*v,i[6]=(y+x)*v,i[7]=0,i[8]=(m+_)*w,i[9]=(y-x)*w,i[10]=(1-(p+b))*w,i[11]=0,i[12]=e[0],i[13]=e[1],i[14]=e[2],i[15]=1,i}}function dm(t,e){if(!!t!=!!e)return!1;const n=t.getChild(),s=e.getChild();return n===s||n.equals(s)}function pm(t,e){if(!!t!=!!e)return!1;const n=t.values(),s=e.values();if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++){const i=n[r],o=s[r];if(i.getChild()!==o.getChild()&&!i.getChild().equals(o.getChild()))return!1}return!0}function mm(t,e){if(!!t!=!!e)return!1;const n=t.keys(),s=e.keys();if(n.length!==s.length)return!1;for(const r of n){const i=t.get(r),o=e.get(r);if(!!i!=!!o)return!1;const a=i.getChild(),l=o.getChild();if(a!==l&&!a.equals(l))return!1}return!0}function Tc(t,e){if(t===e)return!0;if(!!t!=!!e||!t||!e||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Nc(t,e){if(t===e)return!0;if(!!t!=!!e)return!1;if(!Pn(t)||!Pn(e))return t===e;const n=t,s=e;let r=0,i=0,o;for(o in n)r++;for(o in s)i++;if(r!==i)return!1;for(o in n){const a=n[o],l=s[o];if(Xr(a)&&Xr(l)){if(!Tc(a,l))return!1}else if(Pn(a)&&Pn(l)){if(!Nc(a,l))return!1}else if(a!==l)return!1}return!0}function Xr(t){return Array.isArray(t)||ArrayBuffer.isView(t)}const Ra="23456789abdegjkmnpqrvwxyzABDEGJKMNPQRVWXYZ",gm=999,ym=6,$a=new Set,bm=function(){let e="";for(let n=0;n<ym;n++)e+=Ra.charAt(Math.floor(Math.random()*Ra.length));return e},vm=function(){for(let e=0;e<gm;e++){const n=bm();if(!$a.has(n))return $a.add(n),n}return""},xn=t=>t,wm=new Set;class Vo extends Zo{constructor(e,n=""){super(e),this[ce].name=n,this.init(),this.dispatchEvent({type:"create"})}getGraph(){return this.graph}getDefaults(){return Object.assign(super.getDefaults(),{name:"",extras:{}})}set(e,n){return Array.isArray(n)&&(n=n.slice()),super.set(e,n)}getName(){return this.get("name")}setName(e){return this.set("name",e)}getExtras(){return this.get("extras")}setExtras(e){return this.set("extras",e)}clone(){const e=this.constructor;return new e(this.graph).copy(this,xn)}copy(e,n=xn){for(const s in this[ce]){const r=this[ce][s];if(r instanceof os)this[In].has(s)||r.dispose();else if(r instanceof mn||r instanceof ve)for(const i of r.values())i.dispose();else if(r instanceof Ft)for(const i of r.values())i.dispose()}for(const s in e[ce]){const r=this[ce][s],i=e[ce][s];if(i instanceof os)this[In].has(s)?r.getChild().copy(n(i.getChild()),n):this.setRef(s,n(i.getChild()),i.getAttributes());else if(i instanceof ve||i instanceof mn)for(const o of i.values())this.addRef(s,n(o.getChild()),o.getAttributes());else if(i instanceof Ft)for(const o of i.keys()){const a=i.get(o);this.setRefMap(s,o,n(a.getChild()),a.getAttributes())}else Pn(i)?this[ce][s]=JSON.parse(JSON.stringify(i)):Array.isArray(i)||i instanceof ArrayBuffer||ArrayBuffer.isView(i)?this[ce][s]=i.slice():this[ce][s]=i}return this}equals(e,n=wm){if(this===e)return!0;if(this.propertyType!==e.propertyType)return!1;for(const s in this[ce]){if(n.has(s))continue;const r=this[ce][s],i=e[ce][s];if(r instanceof os||i instanceof os){if(!dm(r,i))return!1}else if(r instanceof ve||i instanceof ve||r instanceof mn||i instanceof mn){if(!pm(r,i))return!1}else if(r instanceof Ft||i instanceof Ft){if(!mm(r,i))return!1}else if(Pn(r)||Pn(i)){if(!Nc(r,i))return!1}else if(Xr(r)||Xr(i)){if(!Tc(r,i))return!1}else if(r!==i)return!1}return!0}detach(){return this.graph.disconnectParents(this,e=>e.propertyType!=="Root"),this}listParents(){return this.graph.listParents(this)}}class Qe extends Vo{getDefaults(){return Object.assign(super.getDefaults(),{extensions:new Ft})}getExtension(e){return this.getRefMap("extensions",e)}setExtension(e,n){return n&&n._validateParent(this),this.setRefMap("extensions",e,n)}listExtensions(){return this.listRefMapValues("extensions")}}class G extends Qe{init(){this.propertyType=V.ACCESSOR}getDefaults(){return Object.assign(super.getDefaults(),{array:null,type:G.Type.SCALAR,componentType:G.ComponentType.FLOAT,normalized:!1,sparse:!1,buffer:null})}static getElementSize(e){switch(e){case G.Type.SCALAR:return 1;case G.Type.VEC2:return 2;case G.Type.VEC3:return 3;case G.Type.VEC4:return 4;case G.Type.MAT2:return 4;case G.Type.MAT3:return 9;case G.Type.MAT4:return 16;default:throw new Error("Unexpected type: "+e)}}static getComponentSize(e){switch(e){case G.ComponentType.BYTE:return 1;case G.ComponentType.UNSIGNED_BYTE:return 1;case G.ComponentType.SHORT:return 2;case G.ComponentType.UNSIGNED_SHORT:return 2;case G.ComponentType.UNSIGNED_INT:return 4;case G.ComponentType.FLOAT:return 4;default:throw new Error("Unexpected component type: "+e)}}getMinNormalized(e){const n=this.getNormalized(),s=this.getElementSize(),r=this.getComponentType();if(this.getMin(e),n)for(let i=0;i<s;i++)e[i]=xe.decodeNormalizedInt(e[i],r);return e}getMin(e){const n=this.getArray(),s=this.getCount(),r=this.getElementSize();for(let i=0;i<r;i++)e[i]=1/0;for(let i=0;i<s*r;i+=r)for(let o=0;o<r;o++){const a=n[i+o];Number.isFinite(a)&&(e[o]=Math.min(e[o],a))}return e}getMaxNormalized(e){const n=this.getNormalized(),s=this.getElementSize(),r=this.getComponentType();if(this.getMax(e),n)for(let i=0;i<s;i++)e[i]=xe.decodeNormalizedInt(e[i],r);return e}getMax(e){const n=this.get("array"),s=this.getCount(),r=this.getElementSize();for(let i=0;i<r;i++)e[i]=-1/0;for(let i=0;i<s*r;i+=r)for(let o=0;o<r;o++){const a=n[i+o];Number.isFinite(a)&&(e[o]=Math.max(e[o],a))}return e}getCount(){const e=this.get("array");return e?e.length/this.getElementSize():0}getType(){return this.get("type")}setType(e){return this.set("type",e)}getElementSize(){return G.getElementSize(this.get("type"))}getComponentSize(){return this.get("array").BYTES_PER_ELEMENT}getComponentType(){return this.get("componentType")}getNormalized(){return this.get("normalized")}setNormalized(e){return this.set("normalized",e)}getScalar(e){const n=this.getElementSize(),s=this.getComponentType(),r=this.getArray();return this.getNormalized()?xe.decodeNormalizedInt(r[e*n],s):r[e*n]}setScalar(e,n){const s=this.getElementSize(),r=this.getComponentType(),i=this.getArray();return this.getNormalized()?i[e*s]=xe.encodeNormalizedInt(n,r):i[e*s]=n,this}getElement(e,n){const s=this.getNormalized(),r=this.getElementSize(),i=this.getComponentType(),o=this.getArray();for(let a=0;a<r;a++)s?n[a]=xe.decodeNormalizedInt(o[e*r+a],i):n[a]=o[e*r+a];return n}setElement(e,n){const s=this.getNormalized(),r=this.getElementSize(),i=this.getComponentType(),o=this.getArray();for(let a=0;a<r;a++)s?o[e*r+a]=xe.encodeNormalizedInt(n[a],i):o[e*r+a]=n[a];return this}getSparse(){return this.get("sparse")}setSparse(e){return this.set("sparse",e)}getBuffer(){return this.getRef("buffer")}setBuffer(e){return this.setRef("buffer",e)}getArray(){return this.get("array")}setArray(e){return this.set("componentType",e?xm(e):G.ComponentType.FLOAT),this.set("array",e),this}getByteLength(){const e=this.get("array");return e?e.byteLength:0}}G.Type={SCALAR:"SCALAR",VEC2:"VEC2",VEC3:"VEC3",VEC4:"VEC4",MAT2:"MAT2",MAT3:"MAT3",MAT4:"MAT4"};G.ComponentType={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125,FLOAT:5126};function xm(t){switch(t.constructor){case Float32Array:return G.ComponentType.FLOAT;case Uint32Array:return G.ComponentType.UNSIGNED_INT;case Uint16Array:return G.ComponentType.UNSIGNED_SHORT;case Uint8Array:return G.ComponentType.UNSIGNED_BYTE;case Int16Array:return G.ComponentType.SHORT;case Int8Array:return G.ComponentType.BYTE;default:throw new Error("Unknown accessor componentType.")}}class Oc extends Qe{init(){this.propertyType=V.ANIMATION}getDefaults(){return Object.assign(super.getDefaults(),{channels:new ve,samplers:new ve})}addChannel(e){return this.addRef("channels",e)}removeChannel(e){return this.removeRef("channels",e)}listChannels(){return this.listRefs("channels")}addSampler(e){return this.addRef("samplers",e)}removeSampler(e){return this.removeRef("samplers",e)}listSamplers(){return this.listRefs("samplers")}}class Ac extends Qe{init(){this.propertyType=V.ANIMATION_CHANNEL}getDefaults(){return Object.assign(super.getDefaults(),{targetPath:null,targetNode:null,sampler:null})}getTargetPath(){return this.get("targetPath")}setTargetPath(e){return this.set("targetPath",e)}getTargetNode(){return this.getRef("targetNode")}setTargetNode(e){return this.setRef("targetNode",e)}getSampler(){return this.getRef("sampler")}setSampler(e){return this.setRef("sampler",e)}}Ac.TargetPath={TRANSLATION:"translation",ROTATION:"rotation",SCALE:"scale",WEIGHTS:"weights"};class ir extends Qe{init(){this.propertyType=V.ANIMATION_SAMPLER}getDefaultAttributes(){return Object.assign(super.getDefaults(),{interpolation:ir.Interpolation.LINEAR,input:null,output:null})}getInterpolation(){return this.get("interpolation")}setInterpolation(e){return this.set("interpolation",e)}getInput(){return this.getRef("input")}setInput(e){return this.setRef("input",e,{usage:ut.OTHER})}getOutput(){return this.getRef("output")}setOutput(e){return this.setRef("output",e,{usage:ut.OTHER})}}ir.Interpolation={LINEAR:"LINEAR",STEP:"STEP",CUBICSPLINE:"CUBICSPLINE"};class Cc extends Qe{init(){this.propertyType=V.BUFFER}getDefaults(){return Object.assign(super.getDefaults(),{uri:""})}getURI(){return this.get("uri")}setURI(e){return this.set("uri",e)}}class Vn extends Qe{init(){this.propertyType=V.CAMERA}getDefaults(){return Object.assign(super.getDefaults(),{type:Vn.Type.PERSPECTIVE,znear:.1,zfar:100,aspectRatio:null,yfov:Math.PI*2*50/360,xmag:1,ymag:1})}getType(){return this.get("type")}setType(e){return this.set("type",e)}getZNear(){return this.get("znear")}setZNear(e){return this.set("znear",e)}getZFar(){return this.get("zfar")}setZFar(e){return this.set("zfar",e)}getAspectRatio(){return this.get("aspectRatio")}setAspectRatio(e){return this.set("aspectRatio",e)}getYFov(){return this.get("yfov")}setYFov(e){return this.set("yfov",e)}getXMag(){return this.get("xmag")}setXMag(e){return this.set("xmag",e)}getYMag(){return this.get("ymag")}setYMag(e){return this.set("ymag",e)}}Vn.Type={PERSPECTIVE:"perspective",ORTHOGRAPHIC:"orthographic"};class _m extends Vo{_validateParent(e){if(!this.parentTypes.includes(e.propertyType))throw new Error(`Parent "${e.propertyType}" invalid for child "${this.propertyType}".`)}}_m.EXTENSION_NAME=void 0;class At extends Qe{init(){this.propertyType=V.TEXTURE_INFO}getDefaults(){return Object.assign(super.getDefaults(),{texCoord:0,magFilter:null,minFilter:null,wrapS:At.WrapMode.REPEAT,wrapT:At.WrapMode.REPEAT})}getTexCoord(){return this.get("texCoord")}setTexCoord(e){return this.set("texCoord",e)}getMagFilter(){return this.get("magFilter")}setMagFilter(e){return this.set("magFilter",e)}getMinFilter(){return this.get("minFilter")}setMinFilter(e){return this.set("minFilter",e)}getWrapS(){return this.get("wrapS")}setWrapS(e){return this.set("wrapS",e)}getWrapT(){return this.get("wrapT")}setWrapT(e){return this.set("wrapT",e)}}At.WrapMode={CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497};At.MagFilter={NEAREST:9728,LINEAR:9729};At.MinFilter={NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987};const{R:gr,G:yr,B:br,A:Sm}=po;class Bn extends Qe{init(){this.propertyType=V.MATERIAL}getDefaults(){return Object.assign(super.getDefaults(),{alphaMode:Bn.AlphaMode.OPAQUE,alphaCutoff:.5,doubleSided:!1,baseColorFactor:[1,1,1,1],baseColorTexture:null,baseColorTextureInfo:new At(this.graph,"baseColorTextureInfo"),emissiveFactor:[0,0,0],emissiveTexture:null,emissiveTextureInfo:new At(this.graph,"emissiveTextureInfo"),normalScale:1,normalTexture:null,normalTextureInfo:new At(this.graph,"normalTextureInfo"),occlusionStrength:1,occlusionTexture:null,occlusionTextureInfo:new At(this.graph,"occlusionTextureInfo"),roughnessFactor:1,metallicFactor:1,metallicRoughnessTexture:null,metallicRoughnessTextureInfo:new At(this.graph,"metallicRoughnessTextureInfo")})}getDoubleSided(){return this.get("doubleSided")}setDoubleSided(e){return this.set("doubleSided",e)}getAlpha(){return this.get("baseColorFactor")[3]}setAlpha(e){const n=this.get("baseColorFactor").slice();return n[3]=e,this.set("baseColorFactor",n)}getAlphaMode(){return this.get("alphaMode")}setAlphaMode(e){return this.set("alphaMode",e)}getAlphaCutoff(){return this.get("alphaCutoff")}setAlphaCutoff(e){return this.set("alphaCutoff",e)}getBaseColorFactor(){return this.get("baseColorFactor")}setBaseColorFactor(e){return this.set("baseColorFactor",e)}getBaseColorTexture(){return this.getRef("baseColorTexture")}getBaseColorTextureInfo(){return this.getRef("baseColorTexture")?this.getRef("baseColorTextureInfo"):null}setBaseColorTexture(e){return this.setRef("baseColorTexture",e,{channels:gr|yr|br|Sm,isColor:!0})}getEmissiveFactor(){return this.get("emissiveFactor")}setEmissiveFactor(e){return this.set("emissiveFactor",e)}getEmissiveTexture(){return this.getRef("emissiveTexture")}getEmissiveTextureInfo(){return this.getRef("emissiveTexture")?this.getRef("emissiveTextureInfo"):null}setEmissiveTexture(e){return this.setRef("emissiveTexture",e,{channels:gr|yr|br,isColor:!0})}getNormalScale(){return this.get("normalScale")}setNormalScale(e){return this.set("normalScale",e)}getNormalTexture(){return this.getRef("normalTexture")}getNormalTextureInfo(){return this.getRef("normalTexture")?this.getRef("normalTextureInfo"):null}setNormalTexture(e){return this.setRef("normalTexture",e,{channels:gr|yr|br})}getOcclusionStrength(){return this.get("occlusionStrength")}setOcclusionStrength(e){return this.set("occlusionStrength",e)}getOcclusionTexture(){return this.getRef("occlusionTexture")}getOcclusionTextureInfo(){return this.getRef("occlusionTexture")?this.getRef("occlusionTextureInfo"):null}setOcclusionTexture(e){return this.setRef("occlusionTexture",e,{channels:gr})}getRoughnessFactor(){return this.get("roughnessFactor")}setRoughnessFactor(e){return this.set("roughnessFactor",e)}getMetallicFactor(){return this.get("metallicFactor")}setMetallicFactor(e){return this.set("metallicFactor",e)}getMetallicRoughnessTexture(){return this.getRef("metallicRoughnessTexture")}getMetallicRoughnessTextureInfo(){return this.getRef("metallicRoughnessTexture")?this.getRef("metallicRoughnessTextureInfo"):null}setMetallicRoughnessTexture(e){return this.setRef("metallicRoughnessTexture",e,{channels:yr|br})}}Bn.AlphaMode={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};class jc extends Qe{init(){this.propertyType=V.MESH}getDefaults(){return Object.assign(super.getDefaults(),{weights:[],primitives:new ve})}addPrimitive(e){return this.addRef("primitives",e)}removePrimitive(e){return this.removeRef("primitives",e)}listPrimitives(){return this.listRefs("primitives")}getWeights(){return this.get("weights")}setWeights(e){return this.set("weights",e)}}let Ic=class extends Qe{init(){this.propertyType=V.NODE}getDefaults(){return Object.assign(super.getDefaults(),{translation:[0,0,0],rotation:[0,0,0,1],scale:[1,1,1],weights:[],camera:null,mesh:null,skin:null,children:new ve})}copy(e,n=xn){if(n===xn)throw new Error("Node cannot be copied.");return super.copy(e,n)}getTranslation(){return this.get("translation")}getRotation(){return this.get("rotation")}getScale(){return this.get("scale")}setTranslation(e){return this.set("translation",e)}setRotation(e){return this.set("rotation",e)}setScale(e){return this.set("scale",e)}getMatrix(){return xe.compose(this.get("translation"),this.get("rotation"),this.get("scale"),[])}setMatrix(e){const n=this.get("translation").slice(),s=this.get("rotation").slice(),r=this.get("scale").slice();return xe.decompose(e,n,s,r),this.set("translation",n).set("rotation",s).set("scale",r)}getWorldTranslation(){const e=[0,0,0];return xe.decompose(this.getWorldMatrix(),e,[0,0,0,1],[1,1,1]),e}getWorldRotation(){const e=[0,0,0,1];return xe.decompose(this.getWorldMatrix(),[0,0,0],e,[1,1,1]),e}getWorldScale(){const e=[1,1,1];return xe.decompose(this.getWorldMatrix(),[0,0,0],[0,0,0,1],e),e}getWorldMatrix(){const e=[];for(let r=this;r!=null;r=r.getParentNode())e.push(r);let n;const s=e.pop().getMatrix();for(;n=e.pop();)um(s,s,n.getMatrix());return s}addChild(e){const n=e.getParentNode();n&&n.removeChild(e);for(const s of e.listParents())s.propertyType===V.SCENE&&s.removeChild(e);return this.addRef("children",e)}removeChild(e){return this.removeRef("children",e)}listChildren(){return this.listRefs("children")}getParentNode(){for(const e of this.listParents())if(e.propertyType===V.NODE)return e;return null}getMesh(){return this.getRef("mesh")}setMesh(e){return this.setRef("mesh",e)}getCamera(){return this.getRef("camera")}setCamera(e){return this.setRef("camera",e)}getSkin(){return this.getRef("skin")}setSkin(e){return this.setRef("skin",e)}getWeights(){return this.get("weights")}setWeights(e){return this.set("weights",e)}traverse(e){e(this);for(const n of this.listChildren())n.traverse(e);return this}};class pi extends Qe{init(){this.propertyType=V.PRIMITIVE}getDefaults(){return Object.assign(super.getDefaults(),{mode:pi.Mode.TRIANGLES,material:null,indices:null,attributes:new Ft,targets:new ve})}getIndices(){return this.getRef("indices")}setIndices(e){return this.setRef("indices",e,{usage:ut.ELEMENT_ARRAY_BUFFER})}getAttribute(e){return this.getRefMap("attributes",e)}setAttribute(e,n){return this.setRefMap("attributes",e,n,{usage:ut.ARRAY_BUFFER})}listAttributes(){return this.listRefMapValues("attributes")}listSemantics(){return this.listRefMapKeys("attributes")}getMaterial(){return this.getRef("material")}setMaterial(e){return this.setRef("material",e)}getMode(){return this.get("mode")}setMode(e){return this.set("mode",e)}listTargets(){return this.listRefs("targets")}addTarget(e){return this.addRef("targets",e)}removeTarget(e){return this.removeRef("targets",e)}}pi.Mode={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class Em extends Vo{init(){this.propertyType=V.PRIMITIVE_TARGET}getDefaults(){return Object.assign(super.getDefaults(),{attributes:new Ft})}getAttribute(e){return this.getRefMap("attributes",e)}setAttribute(e,n){return this.setRefMap("attributes",e,n,{usage:ut.ARRAY_BUFFER})}listAttributes(){return this.listRefMapValues("attributes")}listSemantics(){return this.listRefMapKeys("attributes")}}function Ke(){return Ke=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Ke.apply(null,arguments)}class Mc extends Qe{init(){this.propertyType=V.SCENE}getDefaults(){return Object.assign(super.getDefaults(),{children:new ve})}copy(e,n=xn){if(n===xn)throw new Error("Scene cannot be copied.");return super.copy(e,n)}addChild(e){const n=e.getParentNode();return n&&n.removeChild(e),this.addRef("children",e)}removeChild(e){return this.removeRef("children",e)}listChildren(){return this.listRefs("children")}traverse(e){for(const n of this.listChildren())n.traverse(e);return this}}class Pc extends Qe{init(){this.propertyType=V.SKIN}getDefaults(){return Object.assign(super.getDefaults(),{skeleton:null,inverseBindMatrices:null,joints:new ve})}getSkeleton(){return this.getRef("skeleton")}setSkeleton(e){return this.setRef("skeleton",e)}getInverseBindMatrices(){return this.getRef("inverseBindMatrices")}setInverseBindMatrices(e){return this.setRef("inverseBindMatrices",e,{usage:ut.INVERSE_BIND_MATRICES})}addJoint(e){return this.addRef("joints",e)}removeJoint(e){return this.removeRef("joints",e)}listJoints(){return this.listRefs("joints")}}class Rc extends Qe{init(){this.propertyType=V.TEXTURE}getDefaults(){return Object.assign(super.getDefaults(),{image:null,mimeType:"",uri:""})}getMimeType(){return this.get("mimeType")||Ln.extensionToMimeType(ws.extension(this.get("uri")))}setMimeType(e){return this.set("mimeType",e)}getURI(){return this.get("uri")}setURI(e){this.set("uri",e);const n=Ln.extensionToMimeType(ws.extension(e));return n&&this.set("mimeType",n),this}getImage(){return this.get("image")}setImage(e){return this.set("image",ae.assertView(e))}getSize(){const e=this.get("image");return e?Ln.getSize(e,this.getMimeType()):null}}class km extends Qe{init(){this.propertyType=V.ROOT}getDefaults(){return Object.assign(super.getDefaults(),{asset:{generator:`glTF-Transform ${kc}`,version:"2.0"},defaultScene:null,accessors:new ve,animations:new ve,buffers:new ve,cameras:new ve,materials:new ve,meshes:new ve,nodes:new ve,scenes:new ve,skins:new ve,textures:new ve})}constructor(e){super(e),this._extensions=new Set,e.addEventListener("node:create",n=>{this._addChildOfRoot(n.target)})}clone(){throw new Error("Root cannot be cloned.")}copy(e,n=xn){if(n===xn)throw new Error("Root cannot be copied.");this.set("asset",Ke({},e.get("asset"))),this.setName(e.getName()),this.setExtras(Ke({},e.getExtras())),this.setDefaultScene(e.getDefaultScene()?n(e.getDefaultScene()):null);for(const s of e.listRefMapKeys("extensions")){const r=e.getExtension(s);this.setExtension(s,n(r))}return this}_addChildOfRoot(e){return e instanceof Mc?this.addRef("scenes",e):e instanceof Ic?this.addRef("nodes",e):e instanceof Vn?this.addRef("cameras",e):e instanceof Pc?this.addRef("skins",e):e instanceof jc?this.addRef("meshes",e):e instanceof Bn?this.addRef("materials",e):e instanceof Rc?this.addRef("textures",e):e instanceof Oc?this.addRef("animations",e):e instanceof G?this.addRef("accessors",e):e instanceof Cc&&this.addRef("buffers",e),this}getAsset(){return this.get("asset")}listExtensionsUsed(){return Array.from(this._extensions)}listExtensionsRequired(){return this.listExtensionsUsed().filter(e=>e.isRequired())}_enableExtension(e){return this._extensions.add(e),this}_disableExtension(e){return this._extensions.delete(e),this}listScenes(){return this.listRefs("scenes")}setDefaultScene(e){return this.setRef("defaultScene",e)}getDefaultScene(){return this.getRef("defaultScene")}listNodes(){return this.listRefs("nodes")}listCameras(){return this.listRefs("cameras")}listSkins(){return this.listRefs("skins")}listMeshes(){return this.listRefs("meshes")}listMaterials(){return this.listRefs("materials")}listTextures(){return this.listRefs("textures")}listAnimations(){return this.listRefs("animations")}listAccessors(){return this.listRefs("accessors")}listBuffers(){return this.listRefs("buffers")}}let $c=class bo{static fromGraph(e){return bo._GRAPH_DOCUMENTS.get(e)||null}constructor(){this._graph=new im,this._root=new km(this._graph),this._logger=dt.DEFAULT_INSTANCE,bo._GRAPH_DOCUMENTS.set(this._graph,this)}getRoot(){return this._root}getGraph(){return this._graph}getLogger(){return this._logger}setLogger(e){return this._logger=e,this}clone(){throw new Error("Use 'cloneDocument(source)' from '@gltf-transform/functions'.")}merge(e){throw new Error("Use 'mergeDocuments(target, source)' from '@gltf-transform/functions'.")}async transform(...e){const n=e.map(s=>s.name);for(const s of e)await s(this,{stack:n});return this}createExtension(e){const n=e.EXTENSION_NAME;return this.getRoot().listExtensionsUsed().find(r=>r.extensionName===n)||new e(this)}createScene(e=""){return new Mc(this._graph,e)}createNode(e=""){return new Ic(this._graph,e)}createCamera(e=""){return new Vn(this._graph,e)}createSkin(e=""){return new Pc(this._graph,e)}createMesh(e=""){return new jc(this._graph,e)}createPrimitive(){return new pi(this._graph)}createPrimitiveTarget(e=""){return new Em(this._graph,e)}createMaterial(e=""){return new Bn(this._graph,e)}createTexture(e=""){return new Rc(this._graph,e)}createAnimation(e=""){return new Oc(this._graph,e)}createAnimationChannel(e=""){return new Ac(this._graph,e)}createAnimationSampler(e=""){return new ir(this._graph,e)}createAccessor(e="",n=null){return n||(n=this.getRoot().listBuffers()[0]),new G(this._graph,e).setBuffer(n)}createBuffer(e=""){return new Cc(this._graph,e)}};$c._GRAPH_DOCUMENTS=new WeakMap;class Tm{constructor(e){this.jsonDoc=void 0,this.buffers=[],this.bufferViews=[],this.bufferViewBuffers=[],this.accessors=[],this.textures=[],this.textureInfos=new Map,this.materials=[],this.meshes=[],this.cameras=[],this.nodes=[],this.skins=[],this.animations=[],this.scenes=[],this.jsonDoc=e}setTextureInfo(e,n){this.textureInfos.set(e,n),n.texCoord!==void 0&&e.setTexCoord(n.texCoord),n.extras!==void 0&&e.setExtras(n.extras);const s=this.jsonDoc.json.textures[n.index];if(s.sampler===void 0)return;const r=this.jsonDoc.json.samplers[s.sampler];r.magFilter!==void 0&&e.setMagFilter(r.magFilter),r.minFilter!==void 0&&e.setMinFilter(r.minFilter),r.wrapS!==void 0&&e.setWrapS(r.wrapS),r.wrapT!==void 0&&e.setWrapT(r.wrapT)}}const za={logger:dt.DEFAULT_INSTANCE,extensions:[],dependencies:{}},Nm=new Set([V.BUFFER,V.TEXTURE,V.MATERIAL,V.MESH,V.PRIMITIVE,V.NODE,V.SCENE]);class Om{static read(e,n=za){const s=Ke({},za,n),{json:r}=e,i=new $c().setLogger(s.logger);this.validate(e,s);const o=new Tm(e),a=r.asset,l=i.getRoot().getAsset();a.copyright&&(l.copyright=a.copyright),a.extras&&(l.extras=a.extras),r.extras!==void 0&&i.getRoot().setExtras(Ke({},r.extras));const c=r.extensionsUsed||[],u=r.extensionsRequired||[];s.extensions.sort((v,w)=>v.EXTENSION_NAME>w.EXTENSION_NAME?1:-1);for(const v of s.extensions)if(c.includes(v.EXTENSION_NAME)){const w=i.createExtension(v).setRequired(u.includes(v.EXTENSION_NAME)),S=w.prereadTypes.filter(N=>!Nm.has(N));S.length&&s.logger.warn(`Preread hooks for some types (${S.join()}), requested by extension ${w.extensionName}, are unsupported. Please file an issue or a PR.`);for(const N of w.readDependencies)w.install(N,s.dependencies[N])}const f=r.buffers||[];i.getRoot().listExtensionsUsed().filter(v=>v.prereadTypes.includes(V.BUFFER)).forEach(v=>v.preread(o,V.BUFFER)),o.buffers=f.map(v=>{const w=i.createBuffer(v.name);return v.extras&&w.setExtras(v.extras),v.uri&&v.uri.indexOf("__")!==0&&w.setURI(v.uri),w});const d=r.bufferViews||[];o.bufferViewBuffers=d.map((v,w)=>{if(!o.bufferViews[w]){const S=e.json.buffers[v.buffer],N=S.uri?e.resources[S.uri]:e.resources[Hr],O=v.byteOffset||0;o.bufferViews[w]=ae.toView(N,O,v.byteLength)}return o.buffers[v.buffer]});const p=r.accessors||[];o.accessors=p.map(v=>{const w=o.bufferViewBuffers[v.bufferView],S=i.createAccessor(v.name,w).setType(v.type);return v.extras&&S.setExtras(v.extras),v.normalized!==void 0&&S.setNormalized(v.normalized),v.bufferView===void 0||S.setArray($r(v,o)),S});const g=r.images||[],m=r.textures||[];i.getRoot().listExtensionsUsed().filter(v=>v.prereadTypes.includes(V.TEXTURE)).forEach(v=>v.preread(o,V.TEXTURE)),o.textures=g.map(v=>{const w=i.createTexture(v.name);if(v.extras&&w.setExtras(v.extras),v.bufferView!==void 0){const S=r.bufferViews[v.bufferView],N=e.json.buffers[S.buffer],O=N.uri?e.resources[N.uri]:e.resources[Hr],A=S.byteOffset||0,C=S.byteLength,M=O.slice(A,A+C);w.setImage(M)}else v.uri!==void 0&&(w.setImage(e.resources[v.uri]),v.uri.indexOf("__")!==0&&w.setURI(v.uri));if(v.mimeType!==void 0)w.setMimeType(v.mimeType);else if(v.uri){const S=ws.extension(v.uri);w.setMimeType(Ln.extensionToMimeType(S))}return w}),i.getRoot().listExtensionsUsed().filter(v=>v.prereadTypes.includes(V.MATERIAL)).forEach(v=>v.preread(o,V.MATERIAL));const b=r.materials||[];o.materials=b.map(v=>{const w=i.createMaterial(v.name);v.extras&&w.setExtras(v.extras),v.alphaMode!==void 0&&w.setAlphaMode(v.alphaMode),v.alphaCutoff!==void 0&&w.setAlphaCutoff(v.alphaCutoff),v.doubleSided!==void 0&&w.setDoubleSided(v.doubleSided);const S=v.pbrMetallicRoughness||{};if(S.baseColorFactor!==void 0&&w.setBaseColorFactor(S.baseColorFactor),v.emissiveFactor!==void 0&&w.setEmissiveFactor(v.emissiveFactor),S.metallicFactor!==void 0&&w.setMetallicFactor(S.metallicFactor),S.roughnessFactor!==void 0&&w.setRoughnessFactor(S.roughnessFactor),S.baseColorTexture!==void 0){const N=S.baseColorTexture,O=o.textures[m[N.index].source];w.setBaseColorTexture(O),o.setTextureInfo(w.getBaseColorTextureInfo(),N)}if(v.emissiveTexture!==void 0){const N=v.emissiveTexture,O=o.textures[m[N.index].source];w.setEmissiveTexture(O),o.setTextureInfo(w.getEmissiveTextureInfo(),N)}if(v.normalTexture!==void 0){const N=v.normalTexture,O=o.textures[m[N.index].source];w.setNormalTexture(O),o.setTextureInfo(w.getNormalTextureInfo(),N),v.normalTexture.scale!==void 0&&w.setNormalScale(v.normalTexture.scale)}if(v.occlusionTexture!==void 0){const N=v.occlusionTexture,O=o.textures[m[N.index].source];w.setOcclusionTexture(O),o.setTextureInfo(w.getOcclusionTextureInfo(),N),v.occlusionTexture.strength!==void 0&&w.setOcclusionStrength(v.occlusionTexture.strength)}if(S.metallicRoughnessTexture!==void 0){const N=S.metallicRoughnessTexture,O=o.textures[m[N.index].source];w.setMetallicRoughnessTexture(O),o.setTextureInfo(w.getMetallicRoughnessTextureInfo(),N)}return w}),i.getRoot().listExtensionsUsed().filter(v=>v.prereadTypes.includes(V.MESH)).forEach(v=>v.preread(o,V.MESH));const y=r.meshes||[];i.getRoot().listExtensionsUsed().filter(v=>v.prereadTypes.includes(V.PRIMITIVE)).forEach(v=>v.preread(o,V.PRIMITIVE)),o.meshes=y.map(v=>{const w=i.createMesh(v.name);return v.extras&&w.setExtras(v.extras),v.weights!==void 0&&w.setWeights(v.weights),(v.primitives||[]).forEach(N=>{const O=i.createPrimitive();N.extras&&O.setExtras(N.extras),N.material!==void 0&&O.setMaterial(o.materials[N.material]),N.mode!==void 0&&O.setMode(N.mode);for(const[M,P]of Object.entries(N.attributes||{}))O.setAttribute(M,o.accessors[P]);N.indices!==void 0&&O.setIndices(o.accessors[N.indices]);const A=v.extras&&v.extras.targetNames||[];(N.targets||[]).forEach((M,P)=>{const R=A[P]||P.toString(),$=i.createPrimitiveTarget(R);for(const[F,L]of Object.entries(M))$.setAttribute(F,o.accessors[L]);O.addTarget($)}),w.addPrimitive(O)}),w});const k=r.cameras||[];o.cameras=k.map(v=>{const w=i.createCamera(v.name).setType(v.type);if(v.extras&&w.setExtras(v.extras),v.type===Vn.Type.PERSPECTIVE){const S=v.perspective;w.setYFov(S.yfov),w.setZNear(S.znear),S.zfar!==void 0&&w.setZFar(S.zfar),S.aspectRatio!==void 0&&w.setAspectRatio(S.aspectRatio)}else{const S=v.orthographic;w.setZNear(S.znear).setZFar(S.zfar).setXMag(S.xmag).setYMag(S.ymag)}return w});const x=r.nodes||[];i.getRoot().listExtensionsUsed().filter(v=>v.prereadTypes.includes(V.NODE)).forEach(v=>v.preread(o,V.NODE)),o.nodes=x.map(v=>{const w=i.createNode(v.name);if(v.extras&&w.setExtras(v.extras),v.translation!==void 0&&w.setTranslation(v.translation),v.rotation!==void 0&&w.setRotation(v.rotation),v.scale!==void 0&&w.setScale(v.scale),v.matrix!==void 0){const S=[0,0,0],N=[0,0,0,1],O=[1,1,1];xe.decompose(v.matrix,S,N,O),w.setTranslation(S),w.setRotation(N),w.setScale(O)}return v.weights!==void 0&&w.setWeights(v.weights),w});const _=r.skins||[];o.skins=_.map(v=>{const w=i.createSkin(v.name);v.extras&&w.setExtras(v.extras),v.inverseBindMatrices!==void 0&&w.setInverseBindMatrices(o.accessors[v.inverseBindMatrices]),v.skeleton!==void 0&&w.setSkeleton(o.nodes[v.skeleton]);for(const S of v.joints)w.addJoint(o.nodes[S]);return w}),x.map((v,w)=>{const S=o.nodes[w];(v.children||[]).forEach(O=>S.addChild(o.nodes[O])),v.mesh!==void 0&&S.setMesh(o.meshes[v.mesh]),v.camera!==void 0&&S.setCamera(o.cameras[v.camera]),v.skin!==void 0&&S.setSkin(o.skins[v.skin])});const E=r.animations||[];o.animations=E.map(v=>{const w=i.createAnimation(v.name);v.extras&&w.setExtras(v.extras);const N=(v.samplers||[]).map(A=>{const C=i.createAnimationSampler().setInput(o.accessors[A.input]).setOutput(o.accessors[A.output]).setInterpolation(A.interpolation||ir.Interpolation.LINEAR);return A.extras&&C.setExtras(A.extras),w.addSampler(C),C});return(v.channels||[]).forEach(A=>{const C=i.createAnimationChannel().setSampler(N[A.sampler]).setTargetPath(A.target.path);A.target.node!==void 0&&C.setTargetNode(o.nodes[A.target.node]),A.extras&&C.setExtras(A.extras),w.addChannel(C)}),w});const T=r.scenes||[];return i.getRoot().listExtensionsUsed().filter(v=>v.prereadTypes.includes(V.SCENE)).forEach(v=>v.preread(o,V.SCENE)),o.scenes=T.map(v=>{const w=i.createScene(v.name);return v.extras&&w.setExtras(v.extras),(v.nodes||[]).map(N=>o.nodes[N]).forEach(N=>w.addChild(N)),w}),r.scene!==void 0&&i.getRoot().setDefaultScene(o.scenes[r.scene]),i.getRoot().listExtensionsUsed().forEach(v=>v.read(o)),p.forEach((v,w)=>{const S=o.accessors[w],N=!!v.sparse,O=!v.bufferView&&!S.getArray();(N||O)&&S.setSparse(!0).setArray(Cm(v,o))}),i}static validate(e,n){const s=e.json;if(s.asset.version!=="2.0")throw new Error(`Unsupported glTF version, "${s.asset.version}".`);if(s.extensionsRequired){for(const r of s.extensionsRequired)if(!n.extensions.find(i=>i.EXTENSION_NAME===r))throw new Error(`Missing required extension, "${r}".`)}if(s.extensionsUsed)for(const r of s.extensionsUsed)n.extensions.find(i=>i.EXTENSION_NAME===r)||n.logger.warn(`Missing optional extension, "${r}".`)}}function Am(t,e){const n=e.jsonDoc,s=e.bufferViews[t.bufferView],r=n.json.bufferViews[t.bufferView],i=hi[t.componentType],o=G.getElementSize(t.type),a=i.BYTES_PER_ELEMENT,l=t.byteOffset||0,c=new i(t.count*o),u=new DataView(s.buffer,s.byteOffset,s.byteLength),f=r.byteStride;for(let d=0;d<t.count;d++)for(let p=0;p<o;p++){const g=l+d*f+p*a;let m;switch(t.componentType){case G.ComponentType.FLOAT:m=u.getFloat32(g,!0);break;case G.ComponentType.UNSIGNED_INT:m=u.getUint32(g,!0);break;case G.ComponentType.UNSIGNED_SHORT:m=u.getUint16(g,!0);break;case G.ComponentType.UNSIGNED_BYTE:m=u.getUint8(g);break;case G.ComponentType.SHORT:m=u.getInt16(g,!0);break;case G.ComponentType.BYTE:m=u.getInt8(g);break;default:throw new Error(`Unexpected componentType "${t.componentType}".`)}c[d*o+p]=m}return c}function $r(t,e){const n=e.jsonDoc,s=e.bufferViews[t.bufferView],r=n.json.bufferViews[t.bufferView],i=hi[t.componentType],o=G.getElementSize(t.type),a=i.BYTES_PER_ELEMENT,l=o*a;if(r.byteStride!==void 0&&r.byteStride!==l)return Am(t,e);const c=s.byteOffset+(t.byteOffset||0),u=t.count*o*a;return new i(s.buffer.slice(c,c+u))}function Cm(t,e){const n=hi[t.componentType],s=G.getElementSize(t.type);let r;t.bufferView!==void 0?r=$r(t,e):r=new n(t.count*s);const i=t.sparse;if(!i)return r;const o=i.count,a=Ke({},t,i.indices,{count:o,type:"SCALAR"}),l=Ke({},t,i.values,{count:o}),c=$r(a,e),u=$r(l,e);for(let f=0;f<a.count;f++)for(let d=0;d<s;d++)r[c[f]*s+d]=u[f*s+d];return r}var qs;(function(t){t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER"})(qs||(qs={}));class Fn{constructor(e,n,s){this._doc=void 0,this.jsonDoc=void 0,this.options=void 0,this.accessorIndexMap=new Map,this.animationIndexMap=new Map,this.bufferIndexMap=new Map,this.cameraIndexMap=new Map,this.skinIndexMap=new Map,this.materialIndexMap=new Map,this.meshIndexMap=new Map,this.nodeIndexMap=new Map,this.imageIndexMap=new Map,this.textureDefIndexMap=new Map,this.textureInfoDefMap=new Map,this.samplerDefIndexMap=new Map,this.sceneIndexMap=new Map,this.imageBufferViews=[],this.otherBufferViews=new Map,this.otherBufferViewsIndexMap=new Map,this.extensionData={},this.bufferURIGenerator=void 0,this.imageURIGenerator=void 0,this.logger=void 0,this._accessorUsageMap=new Map,this.accessorUsageGroupedByParent=new Set(["ARRAY_BUFFER"]),this.accessorParents=new Map,this._doc=e,this.jsonDoc=n,this.options=s;const r=e.getRoot(),i=r.listBuffers().length,o=r.listTextures().length;this.bufferURIGenerator=new Da(i>1,()=>s.basename||"buffer"),this.imageURIGenerator=new Da(o>1,a=>jm(e,a)||s.basename||"texture"),this.logger=e.getLogger()}createTextureInfoDef(e,n){const s={magFilter:n.getMagFilter()||void 0,minFilter:n.getMinFilter()||void 0,wrapS:n.getWrapS(),wrapT:n.getWrapT()},r=JSON.stringify(s);this.samplerDefIndexMap.has(r)||(this.samplerDefIndexMap.set(r,this.jsonDoc.json.samplers.length),this.jsonDoc.json.samplers.push(s));const i={source:this.imageIndexMap.get(e),sampler:this.samplerDefIndexMap.get(r)},o=JSON.stringify(i);this.textureDefIndexMap.has(o)||(this.textureDefIndexMap.set(o,this.jsonDoc.json.textures.length),this.jsonDoc.json.textures.push(i));const a={index:this.textureDefIndexMap.get(o)};return n.getTexCoord()!==0&&(a.texCoord=n.getTexCoord()),Object.keys(n.getExtras()).length>0&&(a.extras=n.getExtras()),this.textureInfoDefMap.set(n,a),a}createPropertyDef(e){const n={};return e.getName()&&(n.name=e.getName()),Object.keys(e.getExtras()).length>0&&(n.extras=e.getExtras()),n}createAccessorDef(e){const n=this.createPropertyDef(e);return n.type=e.getType(),n.componentType=e.getComponentType(),n.count=e.getCount(),this._doc.getGraph().listParentEdges(e).some(r=>r.getName()==="attributes"&&r.getAttributes().key==="POSITION"||r.getName()==="input")&&(n.max=e.getMax([]).map(Math.fround),n.min=e.getMin([]).map(Math.fround)),e.getNormalized()&&(n.normalized=e.getNormalized()),n}createImageData(e,n,s){if(this.options.format===yn.GLB)this.imageBufferViews.push(n),e.bufferView=this.jsonDoc.json.bufferViews.length,this.jsonDoc.json.bufferViews.push({buffer:0,byteOffset:-1,byteLength:n.byteLength});else{const r=Ln.mimeTypeToExtension(s.getMimeType());e.uri=this.imageURIGenerator.createURI(s,r),this.assignResourceURI(e.uri,n,!1)}}assignResourceURI(e,n,s){const r=this.jsonDoc.resources;if(!(e in r)){r[e]=n;return}if(n===r[e]){this.logger.warn(`Duplicate resource URI, "${e}".`);return}const i=`Resource URI "${e}" already assigned to different data.`;if(!s){this.logger.warn(i);return}throw new Error(i)}getAccessorUsage(e){const n=this._accessorUsageMap.get(e);if(n)return n;if(e.getSparse())return ut.SPARSE;for(const s of this._doc.getGraph().listParentEdges(e)){const{usage:r}=s.getAttributes();if(r)return r;s.getParent().propertyType!==V.ROOT&&this.logger.warn(`Missing attribute ".usage" on edge, "${s.getName()}".`)}return ut.OTHER}addAccessorToUsageGroup(e,n){const s=this._accessorUsageMap.get(e);if(s&&s!==n)throw new Error(`Accessor with usage "${s}" cannot be reused as "${n}".`);return this._accessorUsageMap.set(e,n),this}}Fn.BufferViewTarget=qs;Fn.BufferViewUsage=ut;Fn.USAGE_TO_TARGET={[ut.ARRAY_BUFFER]:qs.ARRAY_BUFFER,[ut.ELEMENT_ARRAY_BUFFER]:qs.ELEMENT_ARRAY_BUFFER};class Da{constructor(e,n){this.multiple=void 0,this.basename=void 0,this.counter={},this.multiple=e,this.basename=n}createURI(e,n){if(e.getURI())return e.getURI();if(this.multiple){const s=this.basename(e);return this.counter[s]=this.counter[s]||1,`${s}_${this.counter[s]++}.${n}`}else return`${this.basename(e)}.${n}`}}function jm(t,e){const n=t.getGraph().listParentEdges(e).find(s=>s.getParent()!==t.getRoot());return n?n.getName().replace(/texture$/i,""):""}const{BufferViewUsage:vr}=Fn,{UNSIGNED_INT:Im,UNSIGNED_SHORT:Mm,UNSIGNED_BYTE:Pm}=G.ComponentType,Rm=new Set([V.ACCESSOR,V.BUFFER,V.MATERIAL,V.MESH]);class $m{static write(e,n){const s=e.getGraph(),r=e.getRoot(),i={asset:Ke({generator:`glTF-Transform ${kc}`},r.getAsset()),extras:Ke({},r.getExtras())},o={json:i,resources:{}},a=new Fn(e,o,n),l=n.logger||dt.DEFAULT_INSTANCE,c=new Set(n.extensions.map(y=>y.EXTENSION_NAME)),u=e.getRoot().listExtensionsUsed().filter(y=>c.has(y.extensionName)).sort((y,k)=>y.extensionName>k.extensionName?1:-1),f=e.getRoot().listExtensionsRequired().filter(y=>c.has(y.extensionName)).sort((y,k)=>y.extensionName>k.extensionName?1:-1);u.length<e.getRoot().listExtensionsUsed().length&&l.warn("Some extensions were not registered for I/O, and will not be written.");for(const y of u){const k=y.prewriteTypes.filter(x=>!Rm.has(x));k.length&&l.warn(`Prewrite hooks for some types (${k.join()}), requested by extension ${y.extensionName}, are unsupported. Please file an issue or a PR.`);for(const x of y.writeDependencies)y.install(x,n.dependencies[x])}function d(y,k,x,_){const E=[];let T=0;for(const S of y){const N=a.createAccessorDef(S);N.bufferView=i.bufferViews.length;const O=S.getArray(),A=ae.pad(ae.toView(O));N.byteOffset=T,T+=A.byteLength,E.push(A),a.accessorIndexMap.set(S,i.accessors.length),i.accessors.push(N)}const v=ae.concat(E),w={buffer:k,byteOffset:x,byteLength:v.byteLength};return _&&(w.target=_),i.bufferViews.push(w),{buffers:E,byteLength:T}}function p(y,k,x){const _=y[0].getCount();let E=0;for(const N of y){const O=a.createAccessorDef(N);O.bufferView=i.bufferViews.length,O.byteOffset=E;const A=N.getElementSize(),C=N.getComponentSize();E+=ae.padNumber(A*C),a.accessorIndexMap.set(N,i.accessors.length),i.accessors.push(O)}const T=_*E,v=new ArrayBuffer(T),w=new DataView(v);for(let N=0;N<_;N++){let O=0;for(const A of y){const C=A.getElementSize(),M=A.getComponentSize(),P=A.getComponentType(),R=A.getArray();for(let $=0;$<C;$++){const F=N*E+O+$*M,L=R[N*C+$];switch(P){case G.ComponentType.FLOAT:w.setFloat32(F,L,!0);break;case G.ComponentType.BYTE:w.setInt8(F,L);break;case G.ComponentType.SHORT:w.setInt16(F,L,!0);break;case G.ComponentType.UNSIGNED_BYTE:w.setUint8(F,L);break;case G.ComponentType.UNSIGNED_SHORT:w.setUint16(F,L,!0);break;case G.ComponentType.UNSIGNED_INT:w.setUint32(F,L,!0);break;default:throw new Error("Unexpected component type: "+P)}}O+=ae.padNumber(C*M)}}const S={buffer:k,byteOffset:x,byteLength:T,byteStride:E,target:Fn.BufferViewTarget.ARRAY_BUFFER};return i.bufferViews.push(S),{byteLength:T,buffers:[new Uint8Array(v)]}}function g(y,k,x){const _=[];let E=0;const T=new Map;let v=-1/0,w=!1;for(const P of y){const R=a.createAccessorDef(P);i.accessors.push(R),a.accessorIndexMap.set(P,i.accessors.length-1);const $=[],F=[],L=[],W=new Array(P.getElementSize()).fill(0);for(let te=0,q=P.getCount();te<q;te++)if(P.getElement(te,L),!xe.eq(L,W,0)){v=Math.max(te,v),$.push(te);for(let ie=0;ie<L.length;ie++)F.push(L[ie])}const K=$.length,ne={accessorDef:R,count:K};if(T.set(P,ne),K===0)continue;K>P.getCount()/2&&(w=!0);const Y=hi[P.getComponentType()];ne.indices=$,ne.values=new Y(F)}if(!Number.isFinite(v))return{buffers:_,byteLength:E};w&&l.warn("Some sparse accessors have >50% non-zero elements, which may increase file size.");const S=v<255?Uint8Array:v<65535?Uint16Array:Uint32Array,N=v<255?Pm:v<65535?Mm:Im,O={buffer:k,byteOffset:x+E,byteLength:0};for(const P of y){const R=T.get(P);if(R.count===0)continue;R.indicesByteOffset=O.byteLength;const $=ae.pad(ae.toView(new S(R.indices)));_.push($),E+=$.byteLength,O.byteLength+=$.byteLength}i.bufferViews.push(O);const A=i.bufferViews.length-1,C={buffer:k,byteOffset:x+E,byteLength:0};for(const P of y){const R=T.get(P);if(R.count===0)continue;R.valuesByteOffset=C.byteLength;const $=ae.pad(ae.toView(R.values));_.push($),E+=$.byteLength,C.byteLength+=$.byteLength}i.bufferViews.push(C);const M=i.bufferViews.length-1;for(const P of y){const R=T.get(P);R.count!==0&&(R.accessorDef.sparse={count:R.count,indices:{bufferView:A,byteOffset:R.indicesByteOffset,componentType:N},values:{bufferView:M,byteOffset:R.valuesByteOffset}})}return{buffers:_,byteLength:E}}if(i.accessors=[],i.bufferViews=[],i.samplers=[],i.textures=[],i.images=r.listTextures().map((y,k)=>{const x=a.createPropertyDef(y);y.getMimeType()&&(x.mimeType=y.getMimeType());const _=y.getImage();return _&&a.createImageData(x,_,y),a.imageIndexMap.set(y,k),x}),u.filter(y=>y.prewriteTypes.includes(V.ACCESSOR)).forEach(y=>y.prewrite(a,V.ACCESSOR)),r.listAccessors().forEach(y=>{const k=a.accessorUsageGroupedByParent,x=a.accessorParents;if(a.accessorIndexMap.has(y))return;const _=a.getAccessorUsage(y);if(a.addAccessorToUsageGroup(y,_),k.has(_)){const E=s.listParents(y).find(T=>T.propertyType!==V.ROOT);x.set(y,E)}}),u.filter(y=>y.prewriteTypes.includes(V.BUFFER)).forEach(y=>y.prewrite(a,V.BUFFER)),(r.listAccessors().length>0||a.otherBufferViews.size>0||r.listTextures().length>0&&n.format===yn.GLB)&&r.listBuffers().length===0)throw new Error("Buffer required for Document resources, but none was found.");i.buffers=[],r.listBuffers().forEach((y,k)=>{const x=a.createPropertyDef(y),_=a.accessorUsageGroupedByParent,E=y.listParents().filter(C=>C instanceof G),T=new Set(E.map(C=>a.accessorParents.get(C))),v=new Map(Array.from(T).map((C,M)=>[C,M])),w={};for(const C of E){var S;if(a.accessorIndexMap.has(C))continue;const M=a.getAccessorUsage(C);let P=M;if(_.has(M)){const R=a.accessorParents.get(C);P+=`:${v.get(R)}`}w[S=P]||(w[S]={usage:M,accessors:[]}),w[P].accessors.push(C)}const N=[],O=i.buffers.length;let A=0;for(const{usage:C,accessors:M}of Object.values(w))if(C===vr.ARRAY_BUFFER&&n.vertexLayout===Kr.INTERLEAVED){const P=p(M,O,A);A+=P.byteLength;for(const R of P.buffers)N.push(R)}else if(C===vr.ARRAY_BUFFER)for(const P of M){const R=p([P],O,A);A+=R.byteLength;for(const $ of R.buffers)N.push($)}else if(C===vr.SPARSE){const P=g(M,O,A);A+=P.byteLength;for(const R of P.buffers)N.push(R)}else if(C===vr.ELEMENT_ARRAY_BUFFER){const P=Fn.BufferViewTarget.ELEMENT_ARRAY_BUFFER,R=d(M,O,A,P);A+=R.byteLength;for(const $ of R.buffers)N.push($)}else{const P=d(M,O,A);A+=P.byteLength;for(const R of P.buffers)N.push(R)}if(a.imageBufferViews.length&&k===0){for(let C=0;C<a.imageBufferViews.length;C++)if(i.bufferViews[i.images[C].bufferView].byteOffset=A,A+=a.imageBufferViews[C].byteLength,N.push(a.imageBufferViews[C]),A%8){const M=8-A%8;A+=M,N.push(new Uint8Array(M))}}if(a.otherBufferViews.has(y))for(const C of a.otherBufferViews.get(y))i.bufferViews.push({buffer:O,byteOffset:A,byteLength:C.byteLength}),a.otherBufferViewsIndexMap.set(C,i.bufferViews.length-1),A+=C.byteLength,N.push(C);if(A){let C;n.format===yn.GLB?C=Hr:(C=a.bufferURIGenerator.createURI(y,"bin"),x.uri=C),x.byteLength=A,a.assignResourceURI(C,ae.concat(N),!0)}i.buffers.push(x),a.bufferIndexMap.set(y,k)}),r.listAccessors().find(y=>!y.getBuffer())&&l.warn("Skipped writing one or more Accessors: no Buffer assigned."),u.filter(y=>y.prewriteTypes.includes(V.MATERIAL)).forEach(y=>y.prewrite(a,V.MATERIAL)),i.materials=r.listMaterials().map((y,k)=>{const x=a.createPropertyDef(y);if(y.getAlphaMode()!==Bn.AlphaMode.OPAQUE&&(x.alphaMode=y.getAlphaMode()),y.getAlphaMode()===Bn.AlphaMode.MASK&&(x.alphaCutoff=y.getAlphaCutoff()),y.getDoubleSided()&&(x.doubleSided=!0),x.pbrMetallicRoughness={},xe.eq(y.getBaseColorFactor(),[1,1,1,1])||(x.pbrMetallicRoughness.baseColorFactor=y.getBaseColorFactor()),xe.eq(y.getEmissiveFactor(),[0,0,0])||(x.emissiveFactor=y.getEmissiveFactor()),y.getRoughnessFactor()!==1&&(x.pbrMetallicRoughness.roughnessFactor=y.getRoughnessFactor()),y.getMetallicFactor()!==1&&(x.pbrMetallicRoughness.metallicFactor=y.getMetallicFactor()),y.getBaseColorTexture()){const _=y.getBaseColorTexture(),E=y.getBaseColorTextureInfo();x.pbrMetallicRoughness.baseColorTexture=a.createTextureInfoDef(_,E)}if(y.getEmissiveTexture()){const _=y.getEmissiveTexture(),E=y.getEmissiveTextureInfo();x.emissiveTexture=a.createTextureInfoDef(_,E)}if(y.getNormalTexture()){const _=y.getNormalTexture(),E=y.getNormalTextureInfo(),T=a.createTextureInfoDef(_,E);y.getNormalScale()!==1&&(T.scale=y.getNormalScale()),x.normalTexture=T}if(y.getOcclusionTexture()){const _=y.getOcclusionTexture(),E=y.getOcclusionTextureInfo(),T=a.createTextureInfoDef(_,E);y.getOcclusionStrength()!==1&&(T.strength=y.getOcclusionStrength()),x.occlusionTexture=T}if(y.getMetallicRoughnessTexture()){const _=y.getMetallicRoughnessTexture(),E=y.getMetallicRoughnessTextureInfo();x.pbrMetallicRoughness.metallicRoughnessTexture=a.createTextureInfoDef(_,E)}return a.materialIndexMap.set(y,k),x}),u.filter(y=>y.prewriteTypes.includes(V.MESH)).forEach(y=>y.prewrite(a,V.MESH)),i.meshes=r.listMeshes().map((y,k)=>{const x=a.createPropertyDef(y);let _=null;return x.primitives=y.listPrimitives().map(E=>{const T={attributes:{}};T.mode=E.getMode();const v=E.getMaterial();v&&(T.material=a.materialIndexMap.get(v)),Object.keys(E.getExtras()).length&&(T.extras=E.getExtras());const w=E.getIndices();w&&(T.indices=a.accessorIndexMap.get(w));for(const S of E.listSemantics())T.attributes[S]=a.accessorIndexMap.get(E.getAttribute(S));for(const S of E.listTargets()){const N={};for(const O of S.listSemantics())N[O]=a.accessorIndexMap.get(S.getAttribute(O));T.targets=T.targets||[],T.targets.push(N)}return E.listTargets().length&&!_&&(_=E.listTargets().map(S=>S.getName())),T}),y.getWeights().length&&(x.weights=y.getWeights()),_&&(x.extras=x.extras||{},x.extras.targetNames=_),a.meshIndexMap.set(y,k),x}),i.cameras=r.listCameras().map((y,k)=>{const x=a.createPropertyDef(y);if(x.type=y.getType(),x.type===Vn.Type.PERSPECTIVE){x.perspective={znear:y.getZNear(),zfar:y.getZFar(),yfov:y.getYFov()};const _=y.getAspectRatio();_!==null&&(x.perspective.aspectRatio=_)}else x.orthographic={znear:y.getZNear(),zfar:y.getZFar(),xmag:y.getXMag(),ymag:y.getYMag()};return a.cameraIndexMap.set(y,k),x}),i.nodes=r.listNodes().map((y,k)=>{const x=a.createPropertyDef(y);return xe.eq(y.getTranslation(),[0,0,0])||(x.translation=y.getTranslation()),xe.eq(y.getRotation(),[0,0,0,1])||(x.rotation=y.getRotation()),xe.eq(y.getScale(),[1,1,1])||(x.scale=y.getScale()),y.getWeights().length&&(x.weights=y.getWeights()),a.nodeIndexMap.set(y,k),x}),i.skins=r.listSkins().map((y,k)=>{const x=a.createPropertyDef(y),_=y.getInverseBindMatrices();_&&(x.inverseBindMatrices=a.accessorIndexMap.get(_));const E=y.getSkeleton();return E&&(x.skeleton=a.nodeIndexMap.get(E)),x.joints=y.listJoints().map(T=>a.nodeIndexMap.get(T)),a.skinIndexMap.set(y,k),x}),r.listNodes().forEach((y,k)=>{const x=i.nodes[k],_=y.getMesh();_&&(x.mesh=a.meshIndexMap.get(_));const E=y.getCamera();E&&(x.camera=a.cameraIndexMap.get(E));const T=y.getSkin();T&&(x.skin=a.skinIndexMap.get(T)),y.listChildren().length>0&&(x.children=y.listChildren().map(v=>a.nodeIndexMap.get(v)))}),i.animations=r.listAnimations().map((y,k)=>{const x=a.createPropertyDef(y),_=new Map;return x.samplers=y.listSamplers().map((E,T)=>{const v=a.createPropertyDef(E);return v.input=a.accessorIndexMap.get(E.getInput()),v.output=a.accessorIndexMap.get(E.getOutput()),v.interpolation=E.getInterpolation(),_.set(E,T),v}),x.channels=y.listChannels().map(E=>{const T=a.createPropertyDef(E);return T.sampler=_.get(E.getSampler()),T.target={node:a.nodeIndexMap.get(E.getTargetNode()),path:E.getTargetPath()},T}),a.animationIndexMap.set(y,k),x}),i.scenes=r.listScenes().map((y,k)=>{const x=a.createPropertyDef(y);return x.nodes=y.listChildren().map(_=>a.nodeIndexMap.get(_)),a.sceneIndexMap.set(y,k),x});const b=r.getDefaultScene();return b&&(i.scene=r.listScenes().indexOf(b)),i.extensionsUsed=u.map(y=>y.extensionName),i.extensionsRequired=f.map(y=>y.extensionName),u.forEach(y=>y.write(a)),zm(i),o}}function zm(t){const e=[];for(const n in t){const s=t[n];(Array.isArray(s)&&s.length===0||s===null||s===""||s&&typeof s=="object"&&Object.keys(s).length===0)&&e.push(n)}for(const n of e)delete t[n]}var Qr;(function(t){t[t.JSON=1313821514]="JSON",t[t.BIN=5130562]="BIN"})(Qr||(Qr={}));class Dm{constructor(){this._logger=dt.DEFAULT_INSTANCE,this._extensions=new Set,this._dependencies={},this._vertexLayout=Kr.INTERLEAVED,this.lastReadBytes=0,this.lastWriteBytes=0}setLogger(e){return this._logger=e,this}registerExtensions(e){for(const n of e)this._extensions.add(n),n.register();return this}registerDependencies(e){return Object.assign(this._dependencies,e),this}setVertexLayout(e){return this._vertexLayout=e,this}async read(e){return await this.readJSON(await this.readAsJSON(e))}async readAsJSON(e){const n=await this.readURI(e,"view");this.lastReadBytes=n.byteLength;const s=La(n)?this._binaryToJSON(n):{json:JSON.parse(ae.decodeText(n)),resources:{}};return await this._readResourcesExternal(s,this.dirname(e)),this._readResourcesInternal(s),s}async readJSON(e){return e=this._copyJSON(e),this._readResourcesInternal(e),Om.read(e,{extensions:Array.from(this._extensions),dependencies:this._dependencies,logger:this._logger})}async binaryToJSON(e){const n=this._binaryToJSON(ae.assertView(e));this._readResourcesInternal(n);const s=n.json;if(s.buffers&&s.buffers.some(r=>Lm(n,r)))throw new Error("Cannot resolve external buffers with binaryToJSON().");if(s.images&&s.images.some(r=>Fm(n,r)))throw new Error("Cannot resolve external images with binaryToJSON().");return n}async readBinary(e){return this.readJSON(await this.binaryToJSON(ae.assertView(e)))}async writeJSON(e,n={}){if(n.format===yn.GLB&&e.getRoot().listBuffers().length>1)throw new Error("GLB must have 01 buffers.");return $m.write(e,{format:n.format||yn.GLTF,basename:n.basename||"",logger:this._logger,vertexLayout:this._vertexLayout,dependencies:Ke({},this._dependencies),extensions:Array.from(this._extensions)})}async writeBinary(e){const{json:n,resources:s}=await this.writeJSON(e,{format:yn.GLB}),r=new Uint32Array([1179937895,2,12]),i=JSON.stringify(n),o=ae.pad(ae.encodeText(i),32),a=ae.toView(new Uint32Array([o.byteLength,1313821514])),l=ae.concat([a,o]);r[r.length-1]+=l.byteLength;const c=Object.values(s)[0];if(!c||!c.byteLength)return ae.concat([ae.toView(r),l]);const u=ae.pad(c,0),f=ae.toView(new Uint32Array([u.byteLength,5130562])),d=ae.concat([f,u]);return r[r.length-1]+=d.byteLength,ae.concat([ae.toView(r),l,d])}async _readResourcesExternal(e,n){var s=this;const r=e.json.images||[],i=e.json.buffers||[],o=[...r,...i].map(async function(a){const l=a.uri;if(!l||l.match(/data:/))return Promise.resolve();e.resources[l]=await s.readURI(s.resolve(n,l),"view"),s.lastReadBytes+=e.resources[l].byteLength});await Promise.all(o)}_readResourcesInternal(e){function n(i){if(i.uri){if(i.uri in e.resources){ae.assertView(e.resources[i.uri]);return}if(i.uri.match(/data:/)){const o=`__${vm()}.${ws.extension(i.uri)}`;e.resources[o]=ae.createBufferFromDataURI(i.uri),i.uri=o}}}(e.json.images||[]).forEach(i=>{if(i.bufferView===void 0&&i.uri===void 0)throw new Error("Missing resource URI or buffer view.");n(i)}),(e.json.buffers||[]).forEach(n)}_copyJSON(e){const{images:n,buffers:s}=e.json;return e={json:Ke({},e.json),resources:Ke({},e.resources)},n&&(e.json.images=n.map(r=>Ke({},r))),s&&(e.json.buffers=s.map(r=>Ke({},r))),e}_binaryToJSON(e){if(!La(e))throw new Error("Invalid glTF 2.0 binary.");const n=new Uint32Array(e.buffer,e.byteOffset+12,2);if(n[1]!==Qr.JSON)throw new Error("Missing required GLB JSON chunk.");const s=20,r=n[0],i=ae.decodeText(ae.toView(e,s,r)),o=JSON.parse(i),a=s+r;if(e.byteLength<=a)return{json:o,resources:{}};const l=new Uint32Array(e.buffer,e.byteOffset+a,2);if(l[1]!==Qr.BIN)return{json:o,resources:{}};const c=l[0],u=ae.toView(e,a+8,c);return{json:o,resources:{[Hr]:u}}}}function Lm(t,e){return e.uri!==void 0&&!(e.uri in t.resources)}function Fm(t,e){return e.uri!==void 0&&!(e.uri in t.resources)&&e.bufferView===void 0}function La(t){if(t.byteLength<3*Uint32Array.BYTES_PER_ELEMENT)return!1;const e=new Uint32Array(t.buffer,t.byteOffset,3);return e[0]===1179937895&&e[1]===2}class Bm extends Dm{constructor(e=Bs.DEFAULT_INIT){super(),this._fetchConfig=void 0,this._fetchConfig=e}async readURI(e,n){const s=await fetch(e,this._fetchConfig);switch(n){case"view":return new Uint8Array(await s.arrayBuffer());case"text":return s.text()}}resolve(e,n){return Bs.resolve(e,n)}dirname(e){return Bs.dirname(e)}}async function zc(t){const e=URL.createObjectURL(new Blob([t])),n=new Bm,s=await n.read(e);return await n.writeBinary(s)}function I(t,e,n){function s(a,l){if(a._zod||Object.defineProperty(a,"_zod",{value:{def:l,constr:o,traits:new Set},enumerable:!1}),a._zod.traits.has(t))return;a._zod.traits.add(t),e(a,l);const c=o.prototype,u=Object.keys(c);for(let f=0;f<u.length;f++){const d=u[f];d in a||(a[d]=c[d].bind(a))}}const r=n?.Parent??Object;class i extends r{}Object.defineProperty(i,"name",{value:t});function o(a){var l;const c=n?.Parent?new i:this;s(c,a),(l=c._zod).deferred??(l.deferred=[]);for(const u of c._zod.deferred)u();return c}return Object.defineProperty(o,"init",{value:s}),Object.defineProperty(o,Symbol.hasInstance,{value:a=>n?.Parent&&a instanceof n.Parent?!0:a?._zod?.traits?.has(t)}),Object.defineProperty(o,"name",{value:t}),o}class gs extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class Dc extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const Lc={};function _n(t){return Lc}function Fc(t){const e=Object.values(t).filter(s=>typeof s=="number");return Object.entries(t).filter(([s,r])=>e.indexOf(+s)===-1).map(([s,r])=>r)}function vo(t,e){return typeof e=="bigint"?e.toString():e}function Wo(t){return{get value(){{const e=t();return Object.defineProperty(this,"value",{value:e}),e}}}}function Yo(t){return t==null}function Go(t){const e=t.startsWith("^")?1:0,n=t.endsWith("$")?t.length-1:t.length;return t.slice(e,n)}function Um(t,e){const n=(t.toString().split(".")[1]||"").length,s=e.toString();let r=(s.split(".")[1]||"").length;if(r===0&&/\d?e-\d?/.test(s)){const l=s.match(/\d?e-(\d?)/);l?.[1]&&(r=Number.parseInt(l[1]))}const i=n>r?n:r,o=Number.parseInt(t.toFixed(i).replace(".","")),a=Number.parseInt(e.toFixed(i).replace(".",""));return o%a/10**i}const Fa=Symbol("evaluating");function ue(t,e,n){let s;Object.defineProperty(t,e,{get(){if(s!==Fa)return s===void 0&&(s=Fa,s=n()),s},set(r){Object.defineProperty(t,e,{value:r})},configurable:!0})}function Wn(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0})}function Yn(...t){const e={};for(const n of t){const s=Object.getOwnPropertyDescriptors(n);Object.assign(e,s)}return Object.defineProperties({},e)}function Ba(t){return JSON.stringify(t)}function Zm(t){return t.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const Bc="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function Jr(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}const Vm=Wo(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function xs(t){if(Jr(t)===!1)return!1;const e=t.constructor;if(e===void 0||typeof e!="function")return!0;const n=e.prototype;return!(Jr(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function Uc(t){return xs(t)?{...t}:Array.isArray(t)?[...t]:t}const Wm=new Set(["string","number","symbol"]);function _s(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function On(t,e,n){const s=new t._zod.constr(e??t._zod.def);return(!e||n?.parent)&&(s._zod.parent=t),s}function Z(t){const e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function Ym(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}const Gm={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function qm(t,e){const n=t._zod.def,s=Yn(t._zod.def,{get shape(){const r={};for(const i in e){if(!(i in n.shape))throw new Error(`Unrecognized key: "${i}"`);e[i]&&(r[i]=n.shape[i])}return Wn(this,"shape",r),r},checks:[]});return On(t,s)}function Hm(t,e){const n=t._zod.def,s=Yn(t._zod.def,{get shape(){const r={...t._zod.def.shape};for(const i in e){if(!(i in n.shape))throw new Error(`Unrecognized key: "${i}"`);e[i]&&delete r[i]}return Wn(this,"shape",r),r},checks:[]});return On(t,s)}function Km(t,e){if(!xs(e))throw new Error("Invalid input to extend: expected a plain object");const n=t._zod.def.checks;if(n&&n.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const r=Yn(t._zod.def,{get shape(){const i={...t._zod.def.shape,...e};return Wn(this,"shape",i),i},checks:[]});return On(t,r)}function Xm(t,e){if(!xs(e))throw new Error("Invalid input to safeExtend: expected a plain object");const n={...t._zod.def,get shape(){const s={...t._zod.def.shape,...e};return Wn(this,"shape",s),s},checks:t._zod.def.checks};return On(t,n)}function Qm(t,e){const n=Yn(t._zod.def,{get shape(){const s={...t._zod.def.shape,...e._zod.def.shape};return Wn(this,"shape",s),s},get catchall(){return e._zod.def.catchall},checks:[]});return On(t,n)}function Jm(t,e,n){const s=Yn(e._zod.def,{get shape(){const r=e._zod.def.shape,i={...r};if(n)for(const o in n){if(!(o in r))throw new Error(`Unrecognized key: "${o}"`);n[o]&&(i[o]=t?new t({type:"optional",innerType:r[o]}):r[o])}else for(const o in r)i[o]=t?new t({type:"optional",innerType:r[o]}):r[o];return Wn(this,"shape",i),i},checks:[]});return On(e,s)}function eg(t,e,n){const s=Yn(e._zod.def,{get shape(){const r=e._zod.def.shape,i={...r};if(n)for(const o in n){if(!(o in i))throw new Error(`Unrecognized key: "${o}"`);n[o]&&(i[o]=new t({type:"nonoptional",innerType:r[o]}))}else for(const o in r)i[o]=new t({type:"nonoptional",innerType:r[o]});return Wn(this,"shape",i),i},checks:[]});return On(e,s)}function as(t,e=0){if(t.aborted===!0)return!0;for(let n=e;n<t.issues.length;n++)if(t.issues[n]?.continue!==!0)return!0;return!1}function Rn(t,e){return e.map(n=>{var s;return(s=n).path??(s.path=[]),n.path.unshift(t),n})}function wr(t){return typeof t=="string"?t:t?.message}function Sn(t,e,n){const s={...t,path:t.path??[]};if(!t.message){const r=wr(t.inst?._zod.def?.error?.(t))??wr(e?.error?.(t))??wr(n.customError?.(t))??wr(n.localeError?.(t))??"Invalid input";s.message=r}return delete s.inst,delete s.continue,e?.reportInput||delete s.input,s}function qo(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function Hs(...t){const[e,n,s]=t;return typeof e=="string"?{message:e,code:"custom",input:n,inst:s}:{...e}}const Zc=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,vo,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},Vc=I("$ZodError",Zc),Wc=I("$ZodError",Zc,{Parent:Error});function tg(t,e=n=>n.message){const n={},s=[];for(const r of t.issues)r.path.length>0?(n[r.path[0]]=n[r.path[0]]||[],n[r.path[0]].push(e(r))):s.push(e(r));return{formErrors:s,fieldErrors:n}}function ng(t,e=n=>n.message){const n={_errors:[]},s=r=>{for(const i of r.issues)if(i.code==="invalid_union"&&i.errors.length)i.errors.map(o=>s({issues:o}));else if(i.code==="invalid_key")s({issues:i.issues});else if(i.code==="invalid_element")s({issues:i.issues});else if(i.path.length===0)n._errors.push(e(i));else{let o=n,a=0;for(;a<i.path.length;){const l=i.path[a];a===i.path.length-1?(o[l]=o[l]||{_errors:[]},o[l]._errors.push(e(i))):o[l]=o[l]||{_errors:[]},o=o[l],a++}}};return s(t),n}const Ho=t=>(e,n,s,r)=>{const i=s?Object.assign(s,{async:!1}):{async:!1},o=e._zod.run({value:n,issues:[]},i);if(o instanceof Promise)throw new gs;if(o.issues.length){const a=new(r?.Err??t)(o.issues.map(l=>Sn(l,i,_n())));throw Bc(a,r?.callee),a}return o.value},Ko=t=>async(e,n,s,r)=>{const i=s?Object.assign(s,{async:!0}):{async:!0};let o=e._zod.run({value:n,issues:[]},i);if(o instanceof Promise&&(o=await o),o.issues.length){const a=new(r?.Err??t)(o.issues.map(l=>Sn(l,i,_n())));throw Bc(a,r?.callee),a}return o.value},mi=t=>(e,n,s)=>{const r=s?{...s,async:!1}:{async:!1},i=e._zod.run({value:n,issues:[]},r);if(i instanceof Promise)throw new gs;return i.issues.length?{success:!1,error:new(t??Vc)(i.issues.map(o=>Sn(o,r,_n())))}:{success:!0,data:i.value}},sg=mi(Wc),gi=t=>async(e,n,s)=>{const r=s?Object.assign(s,{async:!0}):{async:!0};let i=e._zod.run({value:n,issues:[]},r);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new t(i.issues.map(o=>Sn(o,r,_n())))}:{success:!0,data:i.value}},rg=gi(Wc),ig=t=>(e,n,s)=>{const r=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return Ho(t)(e,n,r)},og=t=>(e,n,s)=>Ho(t)(e,n,s),ag=t=>async(e,n,s)=>{const r=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return Ko(t)(e,n,r)},lg=t=>async(e,n,s)=>Ko(t)(e,n,s),cg=t=>(e,n,s)=>{const r=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return mi(t)(e,n,r)},ug=t=>(e,n,s)=>mi(t)(e,n,s),fg=t=>async(e,n,s)=>{const r=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return gi(t)(e,n,r)},hg=t=>async(e,n,s)=>gi(t)(e,n,s),dg=/^[cC][^\s-]{8,}$/,pg=/^[0-9a-z]+$/,mg=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,gg=/^[0-9a-vA-V]{20}$/,yg=/^[A-Za-z0-9]{27}$/,bg=/^[a-zA-Z0-9_-]{21}$/,vg=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,wg=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Ua=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,xg=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,_g="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function Sg(){return new RegExp(_g,"u")}const Eg=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,kg=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,Tg=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Ng=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Og=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Yc=/^[A-Za-z0-9_-]*$/,Ag=/^\+(?:[0-9]){6,14}[0-9]$/,Gc="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",Cg=new RegExp(`^${Gc}$`);function qc(t){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function jg(t){return new RegExp(`^${qc(t)}$`)}function Ig(t){const e=qc({precision:t.precision}),n=["Z"];t.local&&n.push(""),t.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const s=`${e}(?:${n.join("|")})`;return new RegExp(`^${Gc}T(?:${s})$`)}const Mg=t=>{const e=t?`[\\s\\S]{${t?.minimum??0},${t?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},Pg=/^-?\d+$/,Rg=/^-?\d+(?:\.\d+)?/,$g=/^(?:true|false)$/i,zg=/^[^A-Z]*$/,Dg=/^[^a-z]*$/,et=I("$ZodCheck",(t,e)=>{var n;t._zod??(t._zod={}),t._zod.def=e,(n=t._zod).onattach??(n.onattach=[])}),Hc={number:"number",bigint:"bigint",object:"date"},Kc=I("$ZodCheckLessThan",(t,e)=>{et.init(t,e);const n=Hc[typeof e.value];t._zod.onattach.push(s=>{const r=s._zod.bag,i=(e.inclusive?r.maximum:r.exclusiveMaximum)??Number.POSITIVE_INFINITY;e.value<i&&(e.inclusive?r.maximum=e.value:r.exclusiveMaximum=e.value)}),t._zod.check=s=>{(e.inclusive?s.value<=e.value:s.value<e.value)||s.issues.push({origin:n,code:"too_big",maximum:e.value,input:s.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),Xc=I("$ZodCheckGreaterThan",(t,e)=>{et.init(t,e);const n=Hc[typeof e.value];t._zod.onattach.push(s=>{const r=s._zod.bag,i=(e.inclusive?r.minimum:r.exclusiveMinimum)??Number.NEGATIVE_INFINITY;e.value>i&&(e.inclusive?r.minimum=e.value:r.exclusiveMinimum=e.value)}),t._zod.check=s=>{(e.inclusive?s.value>=e.value:s.value>e.value)||s.issues.push({origin:n,code:"too_small",minimum:e.value,input:s.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),Lg=I("$ZodCheckMultipleOf",(t,e)=>{et.init(t,e),t._zod.onattach.push(n=>{var s;(s=n._zod.bag).multipleOf??(s.multipleOf=e.value)}),t._zod.check=n=>{if(typeof n.value!=typeof e.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%e.value===BigInt(0):Um(n.value,e.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:e.value,input:n.value,inst:t,continue:!e.abort})}}),Fg=I("$ZodCheckNumberFormat",(t,e)=>{et.init(t,e),e.format=e.format||"float64";const n=e.format?.includes("int"),s=n?"int":"number",[r,i]=Gm[e.format];t._zod.onattach.push(o=>{const a=o._zod.bag;a.format=e.format,a.minimum=r,a.maximum=i,n&&(a.pattern=Pg)}),t._zod.check=o=>{const a=o.value;if(n){if(!Number.isInteger(a)){o.issues.push({expected:s,format:e.format,code:"invalid_type",continue:!1,input:a,inst:t});return}if(!Number.isSafeInteger(a)){a>0?o.issues.push({input:a,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:s,continue:!e.abort}):o.issues.push({input:a,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:s,continue:!e.abort});return}}a<r&&o.issues.push({origin:"number",input:a,code:"too_small",minimum:r,inclusive:!0,inst:t,continue:!e.abort}),a>i&&o.issues.push({origin:"number",input:a,code:"too_big",maximum:i,inst:t})}}),Bg=I("$ZodCheckMaxLength",(t,e)=>{var n;et.init(t,e),(n=t._zod.def).when??(n.when=s=>{const r=s.value;return!Yo(r)&&r.length!==void 0}),t._zod.onattach.push(s=>{const r=s._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<r&&(s._zod.bag.maximum=e.maximum)}),t._zod.check=s=>{const r=s.value;if(r.length<=e.maximum)return;const o=qo(r);s.issues.push({origin:o,code:"too_big",maximum:e.maximum,inclusive:!0,input:r,inst:t,continue:!e.abort})}}),Ug=I("$ZodCheckMinLength",(t,e)=>{var n;et.init(t,e),(n=t._zod.def).when??(n.when=s=>{const r=s.value;return!Yo(r)&&r.length!==void 0}),t._zod.onattach.push(s=>{const r=s._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>r&&(s._zod.bag.minimum=e.minimum)}),t._zod.check=s=>{const r=s.value;if(r.length>=e.minimum)return;const o=qo(r);s.issues.push({origin:o,code:"too_small",minimum:e.minimum,inclusive:!0,input:r,inst:t,continue:!e.abort})}}),Zg=I("$ZodCheckLengthEquals",(t,e)=>{var n;et.init(t,e),(n=t._zod.def).when??(n.when=s=>{const r=s.value;return!Yo(r)&&r.length!==void 0}),t._zod.onattach.push(s=>{const r=s._zod.bag;r.minimum=e.length,r.maximum=e.length,r.length=e.length}),t._zod.check=s=>{const r=s.value,i=r.length;if(i===e.length)return;const o=qo(r),a=i>e.length;s.issues.push({origin:o,...a?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:s.value,inst:t,continue:!e.abort})}}),yi=I("$ZodCheckStringFormat",(t,e)=>{var n,s;et.init(t,e),t._zod.onattach.push(r=>{const i=r._zod.bag;i.format=e.format,e.pattern&&(i.patterns??(i.patterns=new Set),i.patterns.add(e.pattern))}),e.pattern?(n=t._zod).check??(n.check=r=>{e.pattern.lastIndex=0,!e.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:e.format,input:r.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(s=t._zod).check??(s.check=()=>{})}),Vg=I("$ZodCheckRegex",(t,e)=>{yi.init(t,e),t._zod.check=n=>{e.pattern.lastIndex=0,!e.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),Wg=I("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=zg),yi.init(t,e)}),Yg=I("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=Dg),yi.init(t,e)}),Gg=I("$ZodCheckIncludes",(t,e)=>{et.init(t,e);const n=_s(e.includes),s=new RegExp(typeof e.position=="number"?`^.{${e.position}}${n}`:n);e.pattern=s,t._zod.onattach.push(r=>{const i=r._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(s)}),t._zod.check=r=>{r.value.includes(e.includes,e.position)||r.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:r.value,inst:t,continue:!e.abort})}}),qg=I("$ZodCheckStartsWith",(t,e)=>{et.init(t,e);const n=new RegExp(`^${_s(e.prefix)}.*`);e.pattern??(e.pattern=n),t._zod.onattach.push(s=>{const r=s._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(n)}),t._zod.check=s=>{s.value.startsWith(e.prefix)||s.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:s.value,inst:t,continue:!e.abort})}}),Hg=I("$ZodCheckEndsWith",(t,e)=>{et.init(t,e);const n=new RegExp(`.*${_s(e.suffix)}$`);e.pattern??(e.pattern=n),t._zod.onattach.push(s=>{const r=s._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(n)}),t._zod.check=s=>{s.value.endsWith(e.suffix)||s.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:s.value,inst:t,continue:!e.abort})}}),Kg=I("$ZodCheckOverwrite",(t,e)=>{et.init(t,e),t._zod.check=n=>{n.value=e.tx(n.value)}});class Xg{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const s=e.split(`
`).filter(o=>o),r=Math.min(...s.map(o=>o.length-o.trimStart().length)),i=s.map(o=>o.slice(r)).map(o=>" ".repeat(this.indent*2)+o);for(const o of i)this.content.push(o)}compile(){const e=Function,n=this?.args,r=[...(this?.content??[""]).map(i=>`  ${i}`)];return new e(...n,r.join(`
`))}}const Qg={major:4,minor:2,patch:1},me=I("$ZodType",(t,e)=>{var n;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=Qg;const s=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&s.unshift(t);for(const r of s)for(const i of r._zod.onattach)i(t);if(s.length===0)(n=t._zod).deferred??(n.deferred=[]),t._zod.deferred?.push(()=>{t._zod.run=t._zod.parse});else{const r=(o,a,l)=>{let c=as(o),u;for(const f of a){if(f._zod.def.when){if(!f._zod.def.when(o))continue}else if(c)continue;const d=o.issues.length,p=f._zod.check(o);if(p instanceof Promise&&l?.async===!1)throw new gs;if(u||p instanceof Promise)u=(u??Promise.resolve()).then(async()=>{await p,o.issues.length!==d&&(c||(c=as(o,d)))});else{if(o.issues.length===d)continue;c||(c=as(o,d))}}return u?u.then(()=>o):o},i=(o,a,l)=>{if(as(o))return o.aborted=!0,o;const c=r(a,s,l);if(c instanceof Promise){if(l.async===!1)throw new gs;return c.then(u=>t._zod.parse(u,l))}return t._zod.parse(c,l)};t._zod.run=(o,a)=>{if(a.skipChecks)return t._zod.parse(o,a);if(a.direction==="backward"){const c=t._zod.parse({value:o.value,issues:[]},{...a,skipChecks:!0});return c instanceof Promise?c.then(u=>i(u,o,a)):i(c,o,a)}const l=t._zod.parse(o,a);if(l instanceof Promise){if(a.async===!1)throw new gs;return l.then(c=>r(c,s,a))}return r(l,s,a)}}t["~standard"]={validate:r=>{try{const i=sg(t,r);return i.success?{value:i.data}:{issues:i.error?.issues}}catch{return rg(t,r).then(o=>o.success?{value:o.data}:{issues:o.error?.issues})}},vendor:"zod",version:1}}),Xo=I("$ZodString",(t,e)=>{me.init(t,e),t._zod.pattern=[...t?._zod.bag?.patterns??[]].pop()??Mg(t._zod.bag),t._zod.parse=(n,s)=>{if(e.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:t}),n}}),we=I("$ZodStringFormat",(t,e)=>{yi.init(t,e),Xo.init(t,e)}),Jg=I("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=wg),we.init(t,e)}),e0=I("$ZodUUID",(t,e)=>{if(e.version){const s={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(s===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=Ua(s))}else e.pattern??(e.pattern=Ua());we.init(t,e)}),t0=I("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=xg),we.init(t,e)}),n0=I("$ZodURL",(t,e)=>{we.init(t,e),t._zod.check=n=>{try{const s=n.value.trim(),r=new URL(s);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(r.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:e.hostname.source,input:n.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(r.protocol.endsWith(":")?r.protocol.slice(0,-1):r.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:n.value,inst:t,continue:!e.abort})),e.normalize?n.value=r.href:n.value=s;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:t,continue:!e.abort})}}}),s0=I("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=Sg()),we.init(t,e)}),r0=I("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=bg),we.init(t,e)}),i0=I("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=dg),we.init(t,e)}),o0=I("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=pg),we.init(t,e)}),a0=I("$ZodULID",(t,e)=>{e.pattern??(e.pattern=mg),we.init(t,e)}),l0=I("$ZodXID",(t,e)=>{e.pattern??(e.pattern=gg),we.init(t,e)}),c0=I("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=yg),we.init(t,e)}),u0=I("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=Ig(e)),we.init(t,e)}),f0=I("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=Cg),we.init(t,e)}),h0=I("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=jg(e)),we.init(t,e)}),d0=I("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=vg),we.init(t,e)}),p0=I("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=Eg),we.init(t,e),t._zod.bag.format="ipv4"}),m0=I("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=kg),we.init(t,e),t._zod.bag.format="ipv6",t._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:t,continue:!e.abort})}}}),g0=I("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=Tg),we.init(t,e)}),y0=I("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=Ng),we.init(t,e),t._zod.check=n=>{const s=n.value.split("/");try{if(s.length!==2)throw new Error;const[r,i]=s;if(!i)throw new Error;const o=Number(i);if(`${o}`!==i)throw new Error;if(o<0||o>128)throw new Error;new URL(`http://[${r}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:t,continue:!e.abort})}}});function Qc(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}const b0=I("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=Og),we.init(t,e),t._zod.bag.contentEncoding="base64",t._zod.check=n=>{Qc(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:t,continue:!e.abort})}});function v0(t){if(!Yc.test(t))return!1;const e=t.replace(/[-_]/g,s=>s==="-"?"+":"/"),n=e.padEnd(Math.ceil(e.length/4)*4,"=");return Qc(n)}const w0=I("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=Yc),we.init(t,e),t._zod.bag.contentEncoding="base64url",t._zod.check=n=>{v0(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:t,continue:!e.abort})}}),x0=I("$ZodE164",(t,e)=>{e.pattern??(e.pattern=Ag),we.init(t,e)});function _0(t,e=null){try{const n=t.split(".");if(n.length!==3)return!1;const[s]=n;if(!s)return!1;const r=JSON.parse(atob(s));return!("typ"in r&&r?.typ!=="JWT"||!r.alg||e&&(!("alg"in r)||r.alg!==e))}catch{return!1}}const S0=I("$ZodJWT",(t,e)=>{we.init(t,e),t._zod.check=n=>{_0(n.value,e.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:t,continue:!e.abort})}}),Jc=I("$ZodNumber",(t,e)=>{me.init(t,e),t._zod.pattern=t._zod.bag.pattern??Rg,t._zod.parse=(n,s)=>{if(e.coerce)try{n.value=Number(n.value)}catch{}const r=n.value;if(typeof r=="number"&&!Number.isNaN(r)&&Number.isFinite(r))return n;const i=typeof r=="number"?Number.isNaN(r)?"NaN":Number.isFinite(r)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:r,inst:t,...i?{received:i}:{}}),n}}),E0=I("$ZodNumberFormat",(t,e)=>{Fg.init(t,e),Jc.init(t,e)}),k0=I("$ZodBoolean",(t,e)=>{me.init(t,e),t._zod.pattern=$g,t._zod.parse=(n,s)=>{if(e.coerce)try{n.value=!!n.value}catch{}const r=n.value;return typeof r=="boolean"||n.issues.push({expected:"boolean",code:"invalid_type",input:r,inst:t}),n}}),T0=I("$ZodUnknown",(t,e)=>{me.init(t,e),t._zod.parse=n=>n}),N0=I("$ZodNever",(t,e)=>{me.init(t,e),t._zod.parse=(n,s)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:t}),n)}),O0=I("$ZodDate",(t,e)=>{me.init(t,e),t._zod.parse=(n,s)=>{if(e.coerce)try{n.value=new Date(n.value)}catch{}const r=n.value,i=r instanceof Date;return i&&!Number.isNaN(r.getTime())||n.issues.push({expected:"date",code:"invalid_type",input:r,...i?{received:"Invalid Date"}:{},inst:t}),n}});function Za(t,e,n){t.issues.length&&e.issues.push(...Rn(n,t.issues)),e.value[n]=t.value}const A0=I("$ZodArray",(t,e)=>{me.init(t,e),t._zod.parse=(n,s)=>{const r=n.value;if(!Array.isArray(r))return n.issues.push({expected:"array",code:"invalid_type",input:r,inst:t}),n;n.value=Array(r.length);const i=[];for(let o=0;o<r.length;o++){const a=r[o],l=e.element._zod.run({value:a,issues:[]},s);l instanceof Promise?i.push(l.then(c=>Za(c,n,o))):Za(l,n,o)}return i.length?Promise.all(i).then(()=>n):n}});function ei(t,e,n,s){t.issues.length&&e.issues.push(...Rn(n,t.issues)),t.value===void 0?n in s&&(e.value[n]=void 0):e.value[n]=t.value}function eu(t){const e=Object.keys(t.shape);for(const s of e)if(!t.shape?.[s]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${s}": expected a Zod schema`);const n=Ym(t.shape);return{...t,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(n)}}function tu(t,e,n,s,r,i){const o=[],a=r.keySet,l=r.catchall._zod,c=l.def.type;for(const u in e){if(a.has(u))continue;if(c==="never"){o.push(u);continue}const f=l.run({value:e[u],issues:[]},s);f instanceof Promise?t.push(f.then(d=>ei(d,n,u,e))):ei(f,n,u,e)}return o.length&&n.issues.push({code:"unrecognized_keys",keys:o,input:e,inst:i}),t.length?Promise.all(t).then(()=>n):n}const C0=I("$ZodObject",(t,e)=>{if(me.init(t,e),!Object.getOwnPropertyDescriptor(e,"shape")?.get){const a=e.shape;Object.defineProperty(e,"shape",{get:()=>{const l={...a};return Object.defineProperty(e,"shape",{value:l}),l}})}const s=Wo(()=>eu(e));ue(t._zod,"propValues",()=>{const a=e.shape,l={};for(const c in a){const u=a[c]._zod;if(u.values){l[c]??(l[c]=new Set);for(const f of u.values)l[c].add(f)}}return l});const r=Jr,i=e.catchall;let o;t._zod.parse=(a,l)=>{o??(o=s.value);const c=a.value;if(!r(c))return a.issues.push({expected:"object",code:"invalid_type",input:c,inst:t}),a;a.value={};const u=[],f=o.shape;for(const d of o.keys){const g=f[d]._zod.run({value:c[d],issues:[]},l);g instanceof Promise?u.push(g.then(m=>ei(m,a,d,c))):ei(g,a,d,c)}return i?tu(u,c,a,l,s.value,t):u.length?Promise.all(u).then(()=>a):a}}),j0=I("$ZodObjectJIT",(t,e)=>{C0.init(t,e);const n=t._zod.parse,s=Wo(()=>eu(e)),r=d=>{const p=new Xg(["shape","payload","ctx"]),g=s.value,m=x=>{const _=Ba(x);return`shape[${_}]._zod.run({ value: input[${_}], issues: [] }, ctx)`};p.write("const input = payload.value;");const b=Object.create(null);let y=0;for(const x of g.keys)b[x]=`key_${y++}`;p.write("const newResult = {};");for(const x of g.keys){const _=b[x],E=Ba(x);p.write(`const ${_} = ${m(x)};`),p.write(`
        if (${_}.issues.length) {
          payload.issues = payload.issues.concat(${_}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${E}, ...iss.path] : [${E}]
          })));
        }
        
        
        if (${_}.value === undefined) {
          if (${E} in input) {
            newResult[${E}] = undefined;
          }
        } else {
          newResult[${E}] = ${_}.value;
        }
        
      `)}p.write("payload.value = newResult;"),p.write("return payload;");const k=p.compile();return(x,_)=>k(d,x,_)};let i;const o=Jr,a=!Lc.jitless,c=a&&Vm.value,u=e.catchall;let f;t._zod.parse=(d,p)=>{f??(f=s.value);const g=d.value;return o(g)?a&&c&&p?.async===!1&&p.jitless!==!0?(i||(i=r(e.shape)),d=i(d,p),u?tu([],g,d,p,f,t):d):n(d,p):(d.issues.push({expected:"object",code:"invalid_type",input:g,inst:t}),d)}});function Va(t,e,n,s){for(const i of t)if(i.issues.length===0)return e.value=i.value,e;const r=t.filter(i=>!as(i));return r.length===1?(e.value=r[0].value,r[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:n,errors:t.map(i=>i.issues.map(o=>Sn(o,s,_n())))}),e)}const I0=I("$ZodUnion",(t,e)=>{me.init(t,e),ue(t._zod,"optin",()=>e.options.some(r=>r._zod.optin==="optional")?"optional":void 0),ue(t._zod,"optout",()=>e.options.some(r=>r._zod.optout==="optional")?"optional":void 0),ue(t._zod,"values",()=>{if(e.options.every(r=>r._zod.values))return new Set(e.options.flatMap(r=>Array.from(r._zod.values)))}),ue(t._zod,"pattern",()=>{if(e.options.every(r=>r._zod.pattern)){const r=e.options.map(i=>i._zod.pattern);return new RegExp(`^(${r.map(i=>Go(i.source)).join("|")})$`)}});const n=e.options.length===1,s=e.options[0]._zod.run;t._zod.parse=(r,i)=>{if(n)return s(r,i);let o=!1;const a=[];for(const l of e.options){const c=l._zod.run({value:r.value,issues:[]},i);if(c instanceof Promise)a.push(c),o=!0;else{if(c.issues.length===0)return c;a.push(c)}}return o?Promise.all(a).then(l=>Va(l,r,t,i)):Va(a,r,t,i)}}),M0=I("$ZodIntersection",(t,e)=>{me.init(t,e),t._zod.parse=(n,s)=>{const r=n.value,i=e.left._zod.run({value:r,issues:[]},s),o=e.right._zod.run({value:r,issues:[]},s);return i instanceof Promise||o instanceof Promise?Promise.all([i,o]).then(([l,c])=>Wa(n,l,c)):Wa(n,i,o)}});function wo(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(xs(t)&&xs(e)){const n=Object.keys(e),s=Object.keys(t).filter(i=>n.indexOf(i)!==-1),r={...t,...e};for(const i of s){const o=wo(t[i],e[i]);if(!o.valid)return{valid:!1,mergeErrorPath:[i,...o.mergeErrorPath]};r[i]=o.data}return{valid:!0,data:r}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let s=0;s<t.length;s++){const r=t[s],i=e[s],o=wo(r,i);if(!o.valid)return{valid:!1,mergeErrorPath:[s,...o.mergeErrorPath]};n.push(o.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function Wa(t,e,n){if(e.issues.length&&t.issues.push(...e.issues),n.issues.length&&t.issues.push(...n.issues),as(t))return t;const s=wo(e.value,n.value);if(!s.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(s.mergeErrorPath)}`);return t.value=s.data,t}const P0=I("$ZodTuple",(t,e)=>{me.init(t,e);const n=e.items;t._zod.parse=(s,r)=>{const i=s.value;if(!Array.isArray(i))return s.issues.push({input:i,inst:t,expected:"tuple",code:"invalid_type"}),s;s.value=[];const o=[],a=[...n].reverse().findIndex(u=>u._zod.optin!=="optional"),l=a===-1?0:n.length-a;if(!e.rest){const u=i.length>n.length,f=i.length<l-1;if(u||f)return s.issues.push({...u?{code:"too_big",maximum:n.length}:{code:"too_small",minimum:n.length},input:i,inst:t,origin:"array"}),s}let c=-1;for(const u of n){if(c++,c>=i.length&&c>=l)continue;const f=u._zod.run({value:i[c],issues:[]},r);f instanceof Promise?o.push(f.then(d=>xr(d,s,c))):xr(f,s,c)}if(e.rest){const u=i.slice(n.length);for(const f of u){c++;const d=e.rest._zod.run({value:f,issues:[]},r);d instanceof Promise?o.push(d.then(p=>xr(p,s,c))):xr(d,s,c)}}return o.length?Promise.all(o).then(()=>s):s}});function xr(t,e,n){t.issues.length&&e.issues.push(...Rn(n,t.issues)),e.value[n]=t.value}const R0=I("$ZodRecord",(t,e)=>{me.init(t,e),t._zod.parse=(n,s)=>{const r=n.value;if(!xs(r))return n.issues.push({expected:"record",code:"invalid_type",input:r,inst:t}),n;const i=[],o=e.keyType._zod.values;if(o){n.value={};const a=new Set;for(const c of o)if(typeof c=="string"||typeof c=="number"||typeof c=="symbol"){a.add(typeof c=="number"?c.toString():c);const u=e.valueType._zod.run({value:r[c],issues:[]},s);u instanceof Promise?i.push(u.then(f=>{f.issues.length&&n.issues.push(...Rn(c,f.issues)),n.value[c]=f.value})):(u.issues.length&&n.issues.push(...Rn(c,u.issues)),n.value[c]=u.value)}let l;for(const c in r)a.has(c)||(l=l??[],l.push(c));l&&l.length>0&&n.issues.push({code:"unrecognized_keys",input:r,inst:t,keys:l})}else{n.value={};for(const a of Reflect.ownKeys(r)){if(a==="__proto__")continue;const l=e.keyType._zod.run({value:a,issues:[]},s);if(l instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(l.issues.length){e.mode==="loose"?n.value[a]=r[a]:n.issues.push({code:"invalid_key",origin:"record",issues:l.issues.map(u=>Sn(u,s,_n())),input:a,path:[a],inst:t});continue}const c=e.valueType._zod.run({value:r[a],issues:[]},s);c instanceof Promise?i.push(c.then(u=>{u.issues.length&&n.issues.push(...Rn(a,u.issues)),n.value[l.value]=u.value})):(c.issues.length&&n.issues.push(...Rn(a,c.issues)),n.value[l.value]=c.value)}}return i.length?Promise.all(i).then(()=>n):n}}),$0=I("$ZodEnum",(t,e)=>{me.init(t,e);const n=Fc(e.entries),s=new Set(n);t._zod.values=s,t._zod.pattern=new RegExp(`^(${n.filter(r=>Wm.has(typeof r)).map(r=>typeof r=="string"?_s(r):r.toString()).join("|")})$`),t._zod.parse=(r,i)=>{const o=r.value;return s.has(o)||r.issues.push({code:"invalid_value",values:n,input:o,inst:t}),r}}),z0=I("$ZodLiteral",(t,e)=>{if(me.init(t,e),e.values.length===0)throw new Error("Cannot create literal schema with no valid values");const n=new Set(e.values);t._zod.values=n,t._zod.pattern=new RegExp(`^(${e.values.map(s=>typeof s=="string"?_s(s):s?_s(s.toString()):String(s)).join("|")})$`),t._zod.parse=(s,r)=>{const i=s.value;return n.has(i)||s.issues.push({code:"invalid_value",values:e.values,input:i,inst:t}),s}}),D0=I("$ZodTransform",(t,e)=>{me.init(t,e),t._zod.parse=(n,s)=>{if(s.direction==="backward")throw new Dc(t.constructor.name);const r=e.transform(n.value,n);if(s.async)return(r instanceof Promise?r:Promise.resolve(r)).then(o=>(n.value=o,n));if(r instanceof Promise)throw new gs;return n.value=r,n}});function Ya(t,e){return t.issues.length&&e===void 0?{issues:[],value:void 0}:t}const L0=I("$ZodOptional",(t,e)=>{me.init(t,e),t._zod.optin="optional",t._zod.optout="optional",ue(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),ue(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${Go(n.source)})?$`):void 0}),t._zod.parse=(n,s)=>{if(e.innerType._zod.optin==="optional"){const r=e.innerType._zod.run(n,s);return r instanceof Promise?r.then(i=>Ya(i,n.value)):Ya(r,n.value)}return n.value===void 0?n:e.innerType._zod.run(n,s)}}),F0=I("$ZodNullable",(t,e)=>{me.init(t,e),ue(t._zod,"optin",()=>e.innerType._zod.optin),ue(t._zod,"optout",()=>e.innerType._zod.optout),ue(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${Go(n.source)}|null)$`):void 0}),ue(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(n,s)=>n.value===null?n:e.innerType._zod.run(n,s)}),B0=I("$ZodDefault",(t,e)=>{me.init(t,e),t._zod.optin="optional",ue(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,s)=>{if(s.direction==="backward")return e.innerType._zod.run(n,s);if(n.value===void 0)return n.value=e.defaultValue,n;const r=e.innerType._zod.run(n,s);return r instanceof Promise?r.then(i=>Ga(i,e)):Ga(r,e)}});function Ga(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}const U0=I("$ZodPrefault",(t,e)=>{me.init(t,e),t._zod.optin="optional",ue(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,s)=>(s.direction==="backward"||n.value===void 0&&(n.value=e.defaultValue),e.innerType._zod.run(n,s))}),Z0=I("$ZodNonOptional",(t,e)=>{me.init(t,e),ue(t._zod,"values",()=>{const n=e.innerType._zod.values;return n?new Set([...n].filter(s=>s!==void 0)):void 0}),t._zod.parse=(n,s)=>{const r=e.innerType._zod.run(n,s);return r instanceof Promise?r.then(i=>qa(i,t)):qa(r,t)}});function qa(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}const V0=I("$ZodCatch",(t,e)=>{me.init(t,e),ue(t._zod,"optin",()=>e.innerType._zod.optin),ue(t._zod,"optout",()=>e.innerType._zod.optout),ue(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,s)=>{if(s.direction==="backward")return e.innerType._zod.run(n,s);const r=e.innerType._zod.run(n,s);return r instanceof Promise?r.then(i=>(n.value=i.value,i.issues.length&&(n.value=e.catchValue({...n,error:{issues:i.issues.map(o=>Sn(o,s,_n()))},input:n.value}),n.issues=[]),n)):(n.value=r.value,r.issues.length&&(n.value=e.catchValue({...n,error:{issues:r.issues.map(i=>Sn(i,s,_n()))},input:n.value}),n.issues=[]),n)}}),W0=I("$ZodPipe",(t,e)=>{me.init(t,e),ue(t._zod,"values",()=>e.in._zod.values),ue(t._zod,"optin",()=>e.in._zod.optin),ue(t._zod,"optout",()=>e.out._zod.optout),ue(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(n,s)=>{if(s.direction==="backward"){const i=e.out._zod.run(n,s);return i instanceof Promise?i.then(o=>_r(o,e.in,s)):_r(i,e.in,s)}const r=e.in._zod.run(n,s);return r instanceof Promise?r.then(i=>_r(i,e.out,s)):_r(r,e.out,s)}});function _r(t,e,n){return t.issues.length?(t.aborted=!0,t):e._zod.run({value:t.value,issues:t.issues},n)}const Y0=I("$ZodReadonly",(t,e)=>{me.init(t,e),ue(t._zod,"propValues",()=>e.innerType._zod.propValues),ue(t._zod,"values",()=>e.innerType._zod.values),ue(t._zod,"optin",()=>e.innerType?._zod?.optin),ue(t._zod,"optout",()=>e.innerType?._zod?.optout),t._zod.parse=(n,s)=>{if(s.direction==="backward")return e.innerType._zod.run(n,s);const r=e.innerType._zod.run(n,s);return r instanceof Promise?r.then(Ha):Ha(r)}});function Ha(t){return t.value=Object.freeze(t.value),t}const G0=I("$ZodLazy",(t,e)=>{me.init(t,e),ue(t._zod,"innerType",()=>e.getter()),ue(t._zod,"pattern",()=>t._zod.innerType?._zod?.pattern),ue(t._zod,"propValues",()=>t._zod.innerType?._zod?.propValues),ue(t._zod,"optin",()=>t._zod.innerType?._zod?.optin??void 0),ue(t._zod,"optout",()=>t._zod.innerType?._zod?.optout??void 0),t._zod.parse=(n,s)=>t._zod.innerType._zod.run(n,s)}),q0=I("$ZodCustom",(t,e)=>{et.init(t,e),me.init(t,e),t._zod.parse=(n,s)=>n,t._zod.check=n=>{const s=n.value,r=e.fn(s);if(r instanceof Promise)return r.then(i=>Ka(i,n,s,t));Ka(r,n,s,t)}});function Ka(t,e,n,s){if(!t){const r={code:"custom",input:n,inst:s,path:[...s._zod.def.path??[]],continue:!s._zod.def.abort};s._zod.def.params&&(r.params=s._zod.def.params),e.issues.push(Hs(r))}}var Xa;class H0{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...n){const s=n[0];if(this._map.set(e,s),s&&typeof s=="object"&&"id"in s){if(this._idmap.has(s.id))throw new Error(`ID ${s.id} already exists in the registry`);this._idmap.set(s.id,e)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const n=this._map.get(e);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(e),this}get(e){const n=e._zod.parent;if(n){const s={...this.get(n)??{}};delete s.id;const r={...s,...this._map.get(e)};return Object.keys(r).length?r:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function K0(){return new H0}(Xa=globalThis).__zod_globalRegistry??(Xa.__zod_globalRegistry=K0());const zs=globalThis.__zod_globalRegistry;function X0(t,e){return new t({type:"string",...Z(e)})}function Q0(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...Z(e)})}function Qa(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...Z(e)})}function J0(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...Z(e)})}function e1(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Z(e)})}function t1(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Z(e)})}function n1(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Z(e)})}function s1(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...Z(e)})}function r1(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...Z(e)})}function i1(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...Z(e)})}function o1(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...Z(e)})}function a1(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...Z(e)})}function l1(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...Z(e)})}function c1(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...Z(e)})}function u1(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...Z(e)})}function f1(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...Z(e)})}function h1(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...Z(e)})}function d1(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Z(e)})}function p1(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Z(e)})}function m1(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...Z(e)})}function g1(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...Z(e)})}function y1(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...Z(e)})}function b1(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...Z(e)})}function v1(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Z(e)})}function w1(t,e){return new t({type:"string",format:"date",check:"string_format",...Z(e)})}function x1(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...Z(e)})}function _1(t,e){return new t({type:"string",format:"duration",check:"string_format",...Z(e)})}function S1(t,e){return new t({type:"number",checks:[],...Z(e)})}function E1(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"safeint",...Z(e)})}function k1(t,e){return new t({type:"boolean",...Z(e)})}function T1(t){return new t({type:"unknown"})}function N1(t,e){return new t({type:"never",...Z(e)})}function O1(t,e){return new t({type:"date",...Z(e)})}function Ja(t,e){return new Kc({check:"less_than",...Z(e),value:t,inclusive:!1})}function zr(t,e){return new Kc({check:"less_than",...Z(e),value:t,inclusive:!0})}function el(t,e){return new Xc({check:"greater_than",...Z(e),value:t,inclusive:!1})}function Dr(t,e){return new Xc({check:"greater_than",...Z(e),value:t,inclusive:!0})}function tl(t,e){return new Lg({check:"multiple_of",...Z(e),value:t})}function nu(t,e){return new Bg({check:"max_length",...Z(e),maximum:t})}function ti(t,e){return new Ug({check:"min_length",...Z(e),minimum:t})}function su(t,e){return new Zg({check:"length_equals",...Z(e),length:t})}function A1(t,e){return new Vg({check:"string_format",format:"regex",...Z(e),pattern:t})}function C1(t){return new Wg({check:"string_format",format:"lowercase",...Z(t)})}function j1(t){return new Yg({check:"string_format",format:"uppercase",...Z(t)})}function I1(t,e){return new Gg({check:"string_format",format:"includes",...Z(e),includes:t})}function M1(t,e){return new qg({check:"string_format",format:"starts_with",...Z(e),prefix:t})}function P1(t,e){return new Hg({check:"string_format",format:"ends_with",...Z(e),suffix:t})}function Ts(t){return new Kg({check:"overwrite",tx:t})}function R1(t){return Ts(e=>e.normalize(t))}function $1(){return Ts(t=>t.trim())}function z1(){return Ts(t=>t.toLowerCase())}function D1(){return Ts(t=>t.toUpperCase())}function L1(){return Ts(t=>Zm(t))}function F1(t,e,n){return new t({type:"array",element:e,...Z(n)})}function B1(t,e,n){return new t({type:"custom",check:"custom",fn:e,...Z(n)})}function U1(t){const e=Z1(n=>(n.addIssue=s=>{if(typeof s=="string")n.issues.push(Hs(s,n.value,e._zod.def));else{const r=s;r.fatal&&(r.continue=!1),r.code??(r.code="custom"),r.input??(r.input=n.value),r.inst??(r.inst=e),r.continue??(r.continue=!e._zod.def.abort),n.issues.push(Hs(r))}},t(n.value,n)));return e}function Z1(t,e){const n=new et({check:"custom",...Z(e)});return n._zod.check=t,n}function ru(t){let e=t?.target??"draft-2020-12";return e==="draft-4"&&(e="draft-04"),e==="draft-7"&&(e="draft-07"),{processors:t.processors??{},metadataRegistry:t?.metadata??zs,target:e,unrepresentable:t?.unrepresentable??"throw",override:t?.override??(()=>{}),io:t?.io??"output",counter:0,seen:new Map,cycles:t?.cycles??"ref",reused:t?.reused??"inline",external:t?.external??void 0}}function ke(t,e,n={path:[],schemaPath:[]}){var s;const r=t._zod.def,i=e.seen.get(t);if(i)return i.count++,n.schemaPath.includes(t)&&(i.cycle=n.path),i.schema;const o={schema:{},count:1,cycle:void 0,path:n.path};e.seen.set(t,o);const a=t._zod.toJSONSchema?.();if(a)o.schema=a;else{const u={...n,schemaPath:[...n.schemaPath,t],path:n.path},f=t._zod.parent;if(f)o.ref=f,ke(f,e,u),e.seen.get(f).isParent=!0;else if(t._zod.processJSONSchema)t._zod.processJSONSchema(e,o.schema,u);else{const d=o.schema,p=e.processors[r.type];if(!p)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${r.type}`);p(t,e,d,u)}}const l=e.metadataRegistry.get(t);return l&&Object.assign(o.schema,l),e.io==="input"&&Ye(t)&&(delete o.schema.examples,delete o.schema.default),e.io==="input"&&o.schema._prefault&&((s=o.schema).default??(s.default=o.schema._prefault)),delete o.schema._prefault,e.seen.get(t).schema}function iu(t,e){const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const s=i=>{const o=t.target==="draft-2020-12"?"$defs":"definitions";if(t.external){const u=t.external.registry.get(i[0])?.id,f=t.external.uri??(p=>p);if(u)return{ref:f(u)};const d=i[1].defId??i[1].schema.id??`schema${t.counter++}`;return i[1].defId=d,{defId:d,ref:`${f("__shared")}#/${o}/${d}`}}if(i[1]===n)return{ref:"#"};const l=`#/${o}/`,c=i[1].schema.id??`__schema${t.counter++}`;return{defId:c,ref:l+c}},r=i=>{if(i[1].schema.$ref)return;const o=i[1],{ref:a,defId:l}=s(i);o.def={...o.schema},l&&(o.defId=l);const c=o.schema;for(const u in c)delete c[u];c.$ref=a};if(t.cycles==="throw")for(const i of t.seen.entries()){const o=i[1];if(o.cycle)throw new Error(`Cycle detected: #/${o.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const i of t.seen.entries()){const o=i[1];if(e===i[0]){r(i);continue}if(t.external){const l=t.external.registry.get(i[0])?.id;if(e!==i[0]&&l){r(i);continue}}if(t.metadataRegistry.get(i[0])?.id){r(i);continue}if(o.cycle){r(i);continue}if(o.count>1&&t.reused==="ref"){r(i);continue}}}function ou(t,e){const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const s=o=>{const a=t.seen.get(o),l=a.def??a.schema,c={...l};if(a.ref===null)return;const u=a.ref;if(a.ref=null,u){s(u);const f=t.seen.get(u).schema;f.$ref&&(t.target==="draft-07"||t.target==="draft-04"||t.target==="openapi-3.0")?(l.allOf=l.allOf??[],l.allOf.push(f)):(Object.assign(l,f),Object.assign(l,c))}a.isParent||t.override({zodSchema:o,jsonSchema:l,path:a.path??[]})};for(const o of[...t.seen.entries()].reverse())s(o[0]);const r={};if(t.target==="draft-2020-12"?r.$schema="https://json-schema.org/draft/2020-12/schema":t.target==="draft-07"?r.$schema="http://json-schema.org/draft-07/schema#":t.target==="draft-04"?r.$schema="http://json-schema.org/draft-04/schema#":t.target,t.external?.uri){const o=t.external.registry.get(e)?.id;if(!o)throw new Error("Schema is missing an `id` property");r.$id=t.external.uri(o)}Object.assign(r,n.def??n.schema);const i=t.external?.defs??{};for(const o of t.seen.entries()){const a=o[1];a.def&&a.defId&&(i[a.defId]=a.def)}t.external||Object.keys(i).length>0&&(t.target==="draft-2020-12"?r.$defs=i:r.definitions=i);try{const o=JSON.parse(JSON.stringify(r));return Object.defineProperty(o,"~standard",{value:{...e["~standard"],jsonSchema:{input:ni(e,"input"),output:ni(e,"output")}},enumerable:!1,writable:!1}),o}catch{throw new Error("Error converting schema to JSON.")}}function Ye(t,e){const n=e??{seen:new Set};if(n.seen.has(t))return!1;n.seen.add(t);const s=t._zod.def;if(s.type==="transform")return!0;if(s.type==="array")return Ye(s.element,n);if(s.type==="set")return Ye(s.valueType,n);if(s.type==="lazy")return Ye(s.getter(),n);if(s.type==="promise"||s.type==="optional"||s.type==="nonoptional"||s.type==="nullable"||s.type==="readonly"||s.type==="default"||s.type==="prefault")return Ye(s.innerType,n);if(s.type==="intersection")return Ye(s.left,n)||Ye(s.right,n);if(s.type==="record"||s.type==="map")return Ye(s.keyType,n)||Ye(s.valueType,n);if(s.type==="pipe")return Ye(s.in,n)||Ye(s.out,n);if(s.type==="object"){for(const r in s.shape)if(Ye(s.shape[r],n))return!0;return!1}if(s.type==="union"){for(const r of s.options)if(Ye(r,n))return!0;return!1}if(s.type==="tuple"){for(const r of s.items)if(Ye(r,n))return!0;return!!(s.rest&&Ye(s.rest,n))}return!1}const V1=(t,e={})=>n=>{const s=ru({...n,processors:e});return ke(t,s),iu(s,t),ou(s,t)},ni=(t,e)=>n=>{const{libraryOptions:s,target:r}=n??{},i=ru({...s??{},target:r,io:e,processors:{}});return ke(t,i),iu(i,t),ou(i,t)},W1={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},Y1=(t,e,n,s)=>{const r=n;r.type="string";const{minimum:i,maximum:o,format:a,patterns:l,contentEncoding:c}=t._zod.bag;if(typeof i=="number"&&(r.minLength=i),typeof o=="number"&&(r.maxLength=o),a&&(r.format=W1[a]??a,r.format===""&&delete r.format),c&&(r.contentEncoding=c),l&&l.size>0){const u=[...l];u.length===1?r.pattern=u[0].source:u.length>1&&(r.allOf=[...u.map(f=>({...e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0"?{type:"string"}:{},pattern:f.source}))])}},G1=(t,e,n,s)=>{const r=n,{minimum:i,maximum:o,format:a,multipleOf:l,exclusiveMaximum:c,exclusiveMinimum:u}=t._zod.bag;typeof a=="string"&&a.includes("int")?r.type="integer":r.type="number",typeof u=="number"&&(e.target==="draft-04"||e.target==="openapi-3.0"?(r.minimum=u,r.exclusiveMinimum=!0):r.exclusiveMinimum=u),typeof i=="number"&&(r.minimum=i,typeof u=="number"&&e.target!=="draft-04"&&(u>=i?delete r.minimum:delete r.exclusiveMinimum)),typeof c=="number"&&(e.target==="draft-04"||e.target==="openapi-3.0"?(r.maximum=c,r.exclusiveMaximum=!0):r.exclusiveMaximum=c),typeof o=="number"&&(r.maximum=o,typeof c=="number"&&e.target!=="draft-04"&&(c<=o?delete r.maximum:delete r.exclusiveMaximum)),typeof l=="number"&&(r.multipleOf=l)},q1=(t,e,n,s)=>{n.type="boolean"},H1=(t,e,n,s)=>{n.not={}},K1=(t,e,n,s)=>{},X1=(t,e,n,s)=>{if(e.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema")},Q1=(t,e,n,s)=>{const r=t._zod.def,i=Fc(r.entries);i.every(o=>typeof o=="number")&&(n.type="number"),i.every(o=>typeof o=="string")&&(n.type="string"),n.enum=i},J1=(t,e,n,s)=>{const r=t._zod.def,i=[];for(const o of r.values)if(o===void 0){if(e.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof o=="bigint"){if(e.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");i.push(Number(o))}else i.push(o);if(i.length!==0)if(i.length===1){const o=i[0];n.type=o===null?"null":typeof o,e.target==="draft-04"||e.target==="openapi-3.0"?n.enum=[o]:n.const=o}else i.every(o=>typeof o=="number")&&(n.type="number"),i.every(o=>typeof o=="string")&&(n.type="string"),i.every(o=>typeof o=="boolean")&&(n.type="boolean"),i.every(o=>o===null)&&(n.type="null"),n.enum=i},ey=(t,e,n,s)=>{if(e.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},ty=(t,e,n,s)=>{if(e.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},ny=(t,e,n,s)=>{const r=n,i=t._zod.def,{minimum:o,maximum:a}=t._zod.bag;typeof o=="number"&&(r.minItems=o),typeof a=="number"&&(r.maxItems=a),r.type="array",r.items=ke(i.element,e,{...s,path:[...s.path,"items"]})},sy=(t,e,n,s)=>{const r=n,i=t._zod.def;r.type="object",r.properties={};const o=i.shape;for(const c in o)r.properties[c]=ke(o[c],e,{...s,path:[...s.path,"properties",c]});const a=new Set(Object.keys(o)),l=new Set([...a].filter(c=>{const u=i.shape[c]._zod;return e.io==="input"?u.optin===void 0:u.optout===void 0}));l.size>0&&(r.required=Array.from(l)),i.catchall?._zod.def.type==="never"?r.additionalProperties=!1:i.catchall?i.catchall&&(r.additionalProperties=ke(i.catchall,e,{...s,path:[...s.path,"additionalProperties"]})):e.io==="output"&&(r.additionalProperties=!1)},ry=(t,e,n,s)=>{const r=t._zod.def,i=r.inclusive===!1,o=r.options.map((a,l)=>ke(a,e,{...s,path:[...s.path,i?"oneOf":"anyOf",l]}));i?n.oneOf=o:n.anyOf=o},iy=(t,e,n,s)=>{const r=t._zod.def,i=ke(r.left,e,{...s,path:[...s.path,"allOf",0]}),o=ke(r.right,e,{...s,path:[...s.path,"allOf",1]}),a=c=>"allOf"in c&&Object.keys(c).length===1,l=[...a(i)?i.allOf:[i],...a(o)?o.allOf:[o]];n.allOf=l},oy=(t,e,n,s)=>{const r=n,i=t._zod.def;r.type="array";const o=e.target==="draft-2020-12"?"prefixItems":"items",a=e.target==="draft-2020-12"||e.target==="openapi-3.0"?"items":"additionalItems",l=i.items.map((d,p)=>ke(d,e,{...s,path:[...s.path,o,p]})),c=i.rest?ke(i.rest,e,{...s,path:[...s.path,a,...e.target==="openapi-3.0"?[i.items.length]:[]]}):null;e.target==="draft-2020-12"?(r.prefixItems=l,c&&(r.items=c)):e.target==="openapi-3.0"?(r.items={anyOf:l},c&&r.items.anyOf.push(c),r.minItems=l.length,c||(r.maxItems=l.length)):(r.items=l,c&&(r.additionalItems=c));const{minimum:u,maximum:f}=t._zod.bag;typeof u=="number"&&(r.minItems=u),typeof f=="number"&&(r.maxItems=f)},ay=(t,e,n,s)=>{const r=n,i=t._zod.def;r.type="object",(e.target==="draft-07"||e.target==="draft-2020-12")&&(r.propertyNames=ke(i.keyType,e,{...s,path:[...s.path,"propertyNames"]})),r.additionalProperties=ke(i.valueType,e,{...s,path:[...s.path,"additionalProperties"]})},ly=(t,e,n,s)=>{const r=t._zod.def,i=ke(r.innerType,e,s),o=e.seen.get(t);e.target==="openapi-3.0"?(o.ref=r.innerType,n.nullable=!0):n.anyOf=[i,{type:"null"}]},cy=(t,e,n,s)=>{const r=t._zod.def;ke(r.innerType,e,s);const i=e.seen.get(t);i.ref=r.innerType},uy=(t,e,n,s)=>{const r=t._zod.def;ke(r.innerType,e,s);const i=e.seen.get(t);i.ref=r.innerType,n.default=JSON.parse(JSON.stringify(r.defaultValue))},fy=(t,e,n,s)=>{const r=t._zod.def;ke(r.innerType,e,s);const i=e.seen.get(t);i.ref=r.innerType,e.io==="input"&&(n._prefault=JSON.parse(JSON.stringify(r.defaultValue)))},hy=(t,e,n,s)=>{const r=t._zod.def;ke(r.innerType,e,s);const i=e.seen.get(t);i.ref=r.innerType;let o;try{o=r.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}n.default=o},dy=(t,e,n,s)=>{const r=t._zod.def,i=e.io==="input"?r.in._zod.def.type==="transform"?r.out:r.in:r.out;ke(i,e,s);const o=e.seen.get(t);o.ref=i},py=(t,e,n,s)=>{const r=t._zod.def;ke(r.innerType,e,s);const i=e.seen.get(t);i.ref=r.innerType,n.readOnly=!0},my=(t,e,n,s)=>{const r=t._zod.def;ke(r.innerType,e,s);const i=e.seen.get(t);i.ref=r.innerType},gy=(t,e,n,s)=>{const r=t._zod.innerType;ke(r,e,s);const i=e.seen.get(t);i.ref=r},yy=I("ZodISODateTime",(t,e)=>{u0.init(t,e),_e.init(t,e)});function by(t){return v1(yy,t)}const vy=I("ZodISODate",(t,e)=>{f0.init(t,e),_e.init(t,e)});function wy(t){return w1(vy,t)}const xy=I("ZodISOTime",(t,e)=>{h0.init(t,e),_e.init(t,e)});function _y(t){return x1(xy,t)}const Sy=I("ZodISODuration",(t,e)=>{d0.init(t,e),_e.init(t,e)});function Ey(t){return _1(Sy,t)}const ky=(t,e)=>{Vc.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:n=>ng(t,n)},flatten:{value:n=>tg(t,n)},addIssue:{value:n=>{t.issues.push(n),t.message=JSON.stringify(t.issues,vo,2)}},addIssues:{value:n=>{t.issues.push(...n),t.message=JSON.stringify(t.issues,vo,2)}},isEmpty:{get(){return t.issues.length===0}}})},gt=I("ZodError",ky,{Parent:Error}),Ty=Ho(gt),Ny=Ko(gt),Oy=mi(gt),Ay=gi(gt),Cy=ig(gt),jy=og(gt),Iy=ag(gt),My=lg(gt),Py=cg(gt),Ry=ug(gt),$y=fg(gt),zy=hg(gt),be=I("ZodType",(t,e)=>(me.init(t,e),Object.assign(t["~standard"],{jsonSchema:{input:ni(t,"input"),output:ni(t,"output")}}),t.toJSONSchema=V1(t,{}),t.def=e,t.type=e.type,Object.defineProperty(t,"_def",{value:e}),t.check=(...n)=>t.clone(Yn(e,{checks:[...e.checks??[],...n.map(s=>typeof s=="function"?{_zod:{check:s,def:{check:"custom"},onattach:[]}}:s)]})),t.clone=(n,s)=>On(t,n,s),t.brand=()=>t,t.register=((n,s)=>(n.add(t,s),t)),t.parse=(n,s)=>Ty(t,n,s,{callee:t.parse}),t.safeParse=(n,s)=>Oy(t,n,s),t.parseAsync=async(n,s)=>Ny(t,n,s,{callee:t.parseAsync}),t.safeParseAsync=async(n,s)=>Ay(t,n,s),t.spa=t.safeParseAsync,t.encode=(n,s)=>Cy(t,n,s),t.decode=(n,s)=>jy(t,n,s),t.encodeAsync=async(n,s)=>Iy(t,n,s),t.decodeAsync=async(n,s)=>My(t,n,s),t.safeEncode=(n,s)=>Py(t,n,s),t.safeDecode=(n,s)=>Ry(t,n,s),t.safeEncodeAsync=async(n,s)=>$y(t,n,s),t.safeDecodeAsync=async(n,s)=>zy(t,n,s),t.refine=(n,s)=>t.check(jb(n,s)),t.superRefine=n=>t.check(Ib(n)),t.overwrite=n=>t.check(Ts(n)),t.optional=()=>il(t),t.nullable=()=>ol(t),t.nullish=()=>il(ol(t)),t.nonoptional=n=>_b(t,n),t.array=()=>Un(t),t.or=n=>uu([t,n]),t.and=n=>fb(t,n),t.transform=n=>al(t,gb(n)),t.default=n=>vb(t,n),t.prefault=n=>xb(t,n),t.catch=n=>Eb(t,n),t.pipe=n=>al(t,n),t.readonly=()=>Nb(t),t.describe=n=>{const s=t.clone();return zs.add(s,{description:n}),s},Object.defineProperty(t,"description",{get(){return zs.get(t)?.description},configurable:!0}),t.meta=(...n)=>{if(n.length===0)return zs.get(t);const s=t.clone();return zs.add(s,n[0]),s},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t)),au=I("_ZodString",(t,e)=>{Xo.init(t,e),be.init(t,e),t._zod.processJSONSchema=(s,r,i)=>Y1(t,s,r);const n=t._zod.bag;t.format=n.format??null,t.minLength=n.minimum??null,t.maxLength=n.maximum??null,t.regex=(...s)=>t.check(A1(...s)),t.includes=(...s)=>t.check(I1(...s)),t.startsWith=(...s)=>t.check(M1(...s)),t.endsWith=(...s)=>t.check(P1(...s)),t.min=(...s)=>t.check(ti(...s)),t.max=(...s)=>t.check(nu(...s)),t.length=(...s)=>t.check(su(...s)),t.nonempty=(...s)=>t.check(ti(1,...s)),t.lowercase=s=>t.check(C1(s)),t.uppercase=s=>t.check(j1(s)),t.trim=()=>t.check($1()),t.normalize=(...s)=>t.check(R1(...s)),t.toLowerCase=()=>t.check(z1()),t.toUpperCase=()=>t.check(D1()),t.slugify=()=>t.check(L1())}),Dy=I("ZodString",(t,e)=>{Xo.init(t,e),au.init(t,e),t.email=n=>t.check(Q0(Ly,n)),t.url=n=>t.check(s1(Fy,n)),t.jwt=n=>t.check(b1(tb,n)),t.emoji=n=>t.check(r1(By,n)),t.guid=n=>t.check(Qa(nl,n)),t.uuid=n=>t.check(J0(Sr,n)),t.uuidv4=n=>t.check(e1(Sr,n)),t.uuidv6=n=>t.check(t1(Sr,n)),t.uuidv7=n=>t.check(n1(Sr,n)),t.nanoid=n=>t.check(i1(Uy,n)),t.guid=n=>t.check(Qa(nl,n)),t.cuid=n=>t.check(o1(Zy,n)),t.cuid2=n=>t.check(a1(Vy,n)),t.ulid=n=>t.check(l1(Wy,n)),t.base64=n=>t.check(m1(Qy,n)),t.base64url=n=>t.check(g1(Jy,n)),t.xid=n=>t.check(c1(Yy,n)),t.ksuid=n=>t.check(u1(Gy,n)),t.ipv4=n=>t.check(f1(qy,n)),t.ipv6=n=>t.check(h1(Hy,n)),t.cidrv4=n=>t.check(d1(Ky,n)),t.cidrv6=n=>t.check(p1(Xy,n)),t.e164=n=>t.check(y1(eb,n)),t.datetime=n=>t.check(by(n)),t.date=n=>t.check(wy(n)),t.time=n=>t.check(_y(n)),t.duration=n=>t.check(Ey(n))});function re(t){return X0(Dy,t)}const _e=I("ZodStringFormat",(t,e)=>{we.init(t,e),au.init(t,e)}),Ly=I("ZodEmail",(t,e)=>{t0.init(t,e),_e.init(t,e)}),nl=I("ZodGUID",(t,e)=>{Jg.init(t,e),_e.init(t,e)}),Sr=I("ZodUUID",(t,e)=>{e0.init(t,e),_e.init(t,e)}),Fy=I("ZodURL",(t,e)=>{n0.init(t,e),_e.init(t,e)}),By=I("ZodEmoji",(t,e)=>{s0.init(t,e),_e.init(t,e)}),Uy=I("ZodNanoID",(t,e)=>{r0.init(t,e),_e.init(t,e)}),Zy=I("ZodCUID",(t,e)=>{i0.init(t,e),_e.init(t,e)}),Vy=I("ZodCUID2",(t,e)=>{o0.init(t,e),_e.init(t,e)}),Wy=I("ZodULID",(t,e)=>{a0.init(t,e),_e.init(t,e)}),Yy=I("ZodXID",(t,e)=>{l0.init(t,e),_e.init(t,e)}),Gy=I("ZodKSUID",(t,e)=>{c0.init(t,e),_e.init(t,e)}),qy=I("ZodIPv4",(t,e)=>{p0.init(t,e),_e.init(t,e)}),Hy=I("ZodIPv6",(t,e)=>{m0.init(t,e),_e.init(t,e)}),Ky=I("ZodCIDRv4",(t,e)=>{g0.init(t,e),_e.init(t,e)}),Xy=I("ZodCIDRv6",(t,e)=>{y0.init(t,e),_e.init(t,e)}),Qy=I("ZodBase64",(t,e)=>{b0.init(t,e),_e.init(t,e)}),Jy=I("ZodBase64URL",(t,e)=>{w0.init(t,e),_e.init(t,e)}),eb=I("ZodE164",(t,e)=>{x0.init(t,e),_e.init(t,e)}),tb=I("ZodJWT",(t,e)=>{S0.init(t,e),_e.init(t,e)}),lu=I("ZodNumber",(t,e)=>{Jc.init(t,e),be.init(t,e),t._zod.processJSONSchema=(s,r,i)=>G1(t,s,r),t.gt=(s,r)=>t.check(el(s,r)),t.gte=(s,r)=>t.check(Dr(s,r)),t.min=(s,r)=>t.check(Dr(s,r)),t.lt=(s,r)=>t.check(Ja(s,r)),t.lte=(s,r)=>t.check(zr(s,r)),t.max=(s,r)=>t.check(zr(s,r)),t.int=s=>t.check(sl(s)),t.safe=s=>t.check(sl(s)),t.positive=s=>t.check(el(0,s)),t.nonnegative=s=>t.check(Dr(0,s)),t.negative=s=>t.check(Ja(0,s)),t.nonpositive=s=>t.check(zr(0,s)),t.multipleOf=(s,r)=>t.check(tl(s,r)),t.step=(s,r)=>t.check(tl(s,r)),t.finite=()=>t;const n=t._zod.bag;t.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,t.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,t.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),t.isFinite=!0,t.format=n.format??null});function J(t){return S1(lu,t)}const nb=I("ZodNumberFormat",(t,e)=>{E0.init(t,e),lu.init(t,e)});function sl(t){return E1(nb,t)}const sb=I("ZodBoolean",(t,e)=>{k0.init(t,e),be.init(t,e),t._zod.processJSONSchema=(n,s,r)=>q1(t,n,s)});function En(t){return k1(sb,t)}const rb=I("ZodUnknown",(t,e)=>{T0.init(t,e),be.init(t,e),t._zod.processJSONSchema=(n,s,r)=>K1()});function si(){return T1(rb)}const ib=I("ZodNever",(t,e)=>{N0.init(t,e),be.init(t,e),t._zod.processJSONSchema=(n,s,r)=>H1(t,n,s)});function ob(t){return N1(ib,t)}const ab=I("ZodDate",(t,e)=>{O0.init(t,e),be.init(t,e),t._zod.processJSONSchema=(s,r,i)=>X1(t,s),t.min=(s,r)=>t.check(Dr(s,r)),t.max=(s,r)=>t.check(zr(s,r));const n=t._zod.bag;t.minDate=n.minimum?new Date(n.minimum):null,t.maxDate=n.maximum?new Date(n.maximum):null});function rl(t){return O1(ab,t)}const lb=I("ZodArray",(t,e)=>{A0.init(t,e),be.init(t,e),t._zod.processJSONSchema=(n,s,r)=>ny(t,n,s,r),t.element=e.element,t.min=(n,s)=>t.check(ti(n,s)),t.nonempty=n=>t.check(ti(1,n)),t.max=(n,s)=>t.check(nu(n,s)),t.length=(n,s)=>t.check(su(n,s)),t.unwrap=()=>t.element});function Un(t,e){return F1(lb,t,e)}const cu=I("ZodObject",(t,e)=>{j0.init(t,e),be.init(t,e),t._zod.processJSONSchema=(n,s,r)=>sy(t,n,s,r),ue(t,"shape",()=>e.shape),t.keyof=()=>fu(Object.keys(t._zod.def.shape)),t.catchall=n=>t.clone({...t._zod.def,catchall:n}),t.passthrough=()=>t.clone({...t._zod.def,catchall:si()}),t.loose=()=>t.clone({...t._zod.def,catchall:si()}),t.strict=()=>t.clone({...t._zod.def,catchall:ob()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=n=>Km(t,n),t.safeExtend=n=>Xm(t,n),t.merge=n=>Qm(t,n),t.pick=n=>qm(t,n),t.omit=n=>Hm(t,n),t.partial=(...n)=>Jm(hu,t,n[0]),t.required=(...n)=>eg(du,t,n[0])});function bn(t,e){const n={type:"object",shape:t??{},...Z(e)};return new cu(n)}function kn(t,e){return new cu({type:"object",shape:t,catchall:si(),...Z(e)})}const cb=I("ZodUnion",(t,e)=>{I0.init(t,e),be.init(t,e),t._zod.processJSONSchema=(n,s,r)=>ry(t,n,s,r),t.options=e.options});function uu(t,e){return new cb({type:"union",options:t,...Z(e)})}const ub=I("ZodIntersection",(t,e)=>{M0.init(t,e),be.init(t,e),t._zod.processJSONSchema=(n,s,r)=>iy(t,n,s,r)});function fb(t,e){return new ub({type:"intersection",left:t,right:e})}const hb=I("ZodTuple",(t,e)=>{P0.init(t,e),be.init(t,e),t._zod.processJSONSchema=(n,s,r)=>oy(t,n,s,r),t.rest=n=>t.clone({...t._zod.def,rest:n})});function xo(t,e,n){const s=e instanceof me,r=s?n:e,i=s?e:null;return new hb({type:"tuple",items:t,rest:i,...Z(r)})}const db=I("ZodRecord",(t,e)=>{R0.init(t,e),be.init(t,e),t._zod.processJSONSchema=(n,s,r)=>ay(t,n,s,r),t.keyType=e.keyType,t.valueType=e.valueType});function Xt(t,e,n){return new db({type:"record",keyType:t,valueType:e,...Z(n)})}const _o=I("ZodEnum",(t,e)=>{$0.init(t,e),be.init(t,e),t._zod.processJSONSchema=(s,r,i)=>Q1(t,s,r),t.enum=e.entries,t.options=Object.values(e.entries);const n=new Set(Object.keys(e.entries));t.extract=(s,r)=>{const i={};for(const o of s)if(n.has(o))i[o]=e.entries[o];else throw new Error(`Key ${o} not found in enum`);return new _o({...e,checks:[],...Z(r),entries:i})},t.exclude=(s,r)=>{const i={...e.entries};for(const o of s)if(n.has(o))delete i[o];else throw new Error(`Key ${o} not found in enum`);return new _o({...e,checks:[],...Z(r),entries:i})}});function fu(t,e){const n=Array.isArray(t)?Object.fromEntries(t.map(s=>[s,s])):t;return new _o({type:"enum",entries:n,...Z(e)})}const pb=I("ZodLiteral",(t,e)=>{z0.init(t,e),be.init(t,e),t._zod.processJSONSchema=(n,s,r)=>J1(t,n,s),t.values=new Set(e.values),Object.defineProperty(t,"value",{get(){if(e.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return e.values[0]}})});function Er(t,e){return new pb({type:"literal",values:Array.isArray(t)?t:[t],...Z(e)})}const mb=I("ZodTransform",(t,e)=>{D0.init(t,e),be.init(t,e),t._zod.processJSONSchema=(n,s,r)=>ty(t,n),t._zod.parse=(n,s)=>{if(s.direction==="backward")throw new Dc(t.constructor.name);n.addIssue=i=>{if(typeof i=="string")n.issues.push(Hs(i,n.value,e));else{const o=i;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=n.value),o.inst??(o.inst=t),n.issues.push(Hs(o))}};const r=e.transform(n.value,n);return r instanceof Promise?r.then(i=>(n.value=i,n)):(n.value=r,n)}});function gb(t){return new mb({type:"transform",transform:t})}const hu=I("ZodOptional",(t,e)=>{L0.init(t,e),be.init(t,e),t._zod.processJSONSchema=(n,s,r)=>my(t,n,s,r),t.unwrap=()=>t._zod.def.innerType});function il(t){return new hu({type:"optional",innerType:t})}const yb=I("ZodNullable",(t,e)=>{F0.init(t,e),be.init(t,e),t._zod.processJSONSchema=(n,s,r)=>ly(t,n,s,r),t.unwrap=()=>t._zod.def.innerType});function ol(t){return new yb({type:"nullable",innerType:t})}const bb=I("ZodDefault",(t,e)=>{B0.init(t,e),be.init(t,e),t._zod.processJSONSchema=(n,s,r)=>uy(t,n,s,r),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function vb(t,e){return new bb({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():Uc(e)}})}const wb=I("ZodPrefault",(t,e)=>{U0.init(t,e),be.init(t,e),t._zod.processJSONSchema=(n,s,r)=>fy(t,n,s,r),t.unwrap=()=>t._zod.def.innerType});function xb(t,e){return new wb({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():Uc(e)}})}const du=I("ZodNonOptional",(t,e)=>{Z0.init(t,e),be.init(t,e),t._zod.processJSONSchema=(n,s,r)=>cy(t,n,s,r),t.unwrap=()=>t._zod.def.innerType});function _b(t,e){return new du({type:"nonoptional",innerType:t,...Z(e)})}const Sb=I("ZodCatch",(t,e)=>{V0.init(t,e),be.init(t,e),t._zod.processJSONSchema=(n,s,r)=>hy(t,n,s,r),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function Eb(t,e){return new Sb({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}const kb=I("ZodPipe",(t,e)=>{W0.init(t,e),be.init(t,e),t._zod.processJSONSchema=(n,s,r)=>dy(t,n,s,r),t.in=e.in,t.out=e.out});function al(t,e){return new kb({type:"pipe",in:t,out:e})}const Tb=I("ZodReadonly",(t,e)=>{Y0.init(t,e),be.init(t,e),t._zod.processJSONSchema=(n,s,r)=>py(t,n,s,r),t.unwrap=()=>t._zod.def.innerType});function Nb(t){return new Tb({type:"readonly",innerType:t})}const Ob=I("ZodLazy",(t,e)=>{G0.init(t,e),be.init(t,e),t._zod.processJSONSchema=(n,s,r)=>gy(t,n,s,r),t.unwrap=()=>t._zod.def.getter()});function Ab(t){return new Ob({type:"lazy",getter:t})}const Cb=I("ZodCustom",(t,e)=>{q0.init(t,e),be.init(t,e),t._zod.processJSONSchema=(n,s,r)=>ey(t,n)});function jb(t,e={}){return B1(Cb,t,e)}function Ib(t){return U1(t)}const Mb=bn({plane:fu(["XY","XZ","YZ"]).default("XZ"),position:xo([J(),J(),J()]).default([.5,0,.5]),cellSize:J().default(1/16),sectionSize:J().default(1),cellColor:re().regex(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,"Invalid hex color").default("#ff0000"),visible:En().default(!0)}),Pb=bn({schemaVersion:J().min(0).default(0),projectName:re(),createdAt:rl().optional().nullable(),lastModifiedAt:rl().optional().nullable(),orbitControls:bn({position:xo([J(),J(),J()]),target:xo([J(),J(),J()]),zoom:J().optional()}).optional(),guidelines:Un(Mb).default([])}),pu=kn({transform:re().optional(),posX:J(),posY:J(),posZ:J(),rotX:J(),rotY:J(),rotZ:J(),sizeX:J().optional(),sizeY:J().optional(),sizeZ:J().optional(),anchor:re().optional()}),Rb=kn({enabled:En()}),mu=uu([kn({"==":Er("org.bukkit.inventory.ItemStack"),DataVersion:J(),id:re(),count:J(),components:Xt(re(),re()).transform(t=>{const e={};for(const[n,s]of Object.entries(t))try{e[n]=gd.parseSNBT(s).toJSON()}catch{e[n]=s}return e}).optional(),schema_version:Er(1,{message:"Only schema_version 1 is supported"})}),kn({"==":Er("org.bukkit.inventory.ItemStack"),DataVersion:J(),id:re(),count:J(),components:Xt(re(),si()).optional(),schema_version:Er(1,{message:"Only schema_version 1 is supported"})})]),gu=Ab(()=>bn({type:re(),item:mu.optional(),position:pu,attachments:Xt(re(),gu).optional(),displayItem:Rb.optional(),shulkerColor:re().optional(),schematic:re().optional(),displayMode:re().optional(),firstPersonViewMode:re().optional(),firstPersonViewLockMode:re().optional(),lockRotation:En().optional(),names:Un(re()).optional(),text:re().optional(),animations:Xt(re(),kn({nodes:Un(re()),looped:En().optional(),speed:J().optional()})).optional(),brightness:bn({block:J(),sky:J()}).optional()})),$b=kn({type:re(),entityType:re(),attachments:Xt(re(),gu),position:pu.optional(),item:mu.optional(),shulkerColor:re().optional(),editor:bn({selectedIndex:J().optional(),animNodeSelectedOption:J().optional(),scrollOffset:J().optional(),expanded:En().optional()}).passthrough().optional(),animations:Xt(re(),bn({nodes:Un(re()),looped:En().optional(),speed:J().optional()}).passthrough()).optional(),physical:bn({cartLength:J().optional(),wheelCenter:J().optional(),wheelDistance:J().optional(),cartCouplerLength:J().optional()}).passthrough().optional()}),Qo=kn({model:$b.optional(),entityType:re(),flipped:En().optional()}),zb=kn({savedName:re(),name:re().optional(),carts:Xt(re(),Qo).optional(),claims:Un(re()).optional(),spawnPattern:re().optional(),flipped:En().optional(),spawnLimit:J().optional(),usedModels:Un(re()).optional()}),yu=Xt(re(),zb);function Db(t){const e=yu.safeParse(t);return e.success?{valid:!0}:{valid:!1,errors:e.error.issues.map(n=>`${n.path.join(".")}: ${n.message}`)}}var Fi,ll;function Lb(){return ll||(ll=1,Fi=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var s,r,i;if(Array.isArray(e)){if(s=e.length,s!=n.length)return!1;for(r=s;r--!==0;)if(!t(e[r],n[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(i=Object.keys(e),s=i.length,s!==Object.keys(n).length)return!1;for(r=s;r--!==0;)if(!Object.prototype.hasOwnProperty.call(n,i[r]))return!1;for(r=s;r--!==0;){var o=i[r];if(!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n}),Fi}var Fb=Lb();const Bb=dd(Fb);class Ub{constructor(){this.keyToValue=new Map,this.valueToKey=new Map}set(e,n){this.keyToValue.set(e,n),this.valueToKey.set(n,e)}getByKey(e){return this.keyToValue.get(e)}getByValue(e){return this.valueToKey.get(e)}clear(){this.keyToValue.clear(),this.valueToKey.clear()}}class bu{constructor(e){this.generateIdentifier=e,this.kv=new Ub}register(e,n){this.kv.getByValue(e)||(n||(n=this.generateIdentifier(e)),this.kv.set(n,e))}clear(){this.kv.clear()}getIdentifier(e){return this.kv.getByValue(e)}getValue(e){return this.kv.getByKey(e)}}class Zb extends bu{constructor(){super(e=>e.name),this.classToAllowedProps=new Map}register(e,n){typeof n=="object"?(n.allowProps&&this.classToAllowedProps.set(e,n.allowProps),super.register(e,n.identifier)):super.register(e,n)}getAllowedProps(e){return this.classToAllowedProps.get(e)}}function Vb(t){if("values"in Object)return Object.values(t);const e=[];for(const n in t)t.hasOwnProperty(n)&&e.push(t[n]);return e}function Wb(t,e){const n=Vb(t);if("find"in n)return n.find(e);const s=n;for(let r=0;r<s.length;r++){const i=s[r];if(e(i))return i}}function Ss(t,e){Object.entries(t).forEach(([n,s])=>e(s,n))}function Lr(t,e){return t.indexOf(e)!==-1}function cl(t,e){for(let n=0;n<t.length;n++){const s=t[n];if(e(s))return s}}class Yb{constructor(){this.transfomers={}}register(e){this.transfomers[e.name]=e}findApplicable(e){return Wb(this.transfomers,n=>n.isApplicable(e))}findByName(e){return this.transfomers[e]}}const Gb=t=>Object.prototype.toString.call(t).slice(8,-1),vu=t=>typeof t>"u",qb=t=>t===null,Ks=t=>typeof t!="object"||t===null||t===Object.prototype?!1:Object.getPrototypeOf(t)===null?!0:Object.getPrototypeOf(t)===Object.prototype,So=t=>Ks(t)&&Object.keys(t).length===0,Tn=t=>Array.isArray(t),Hb=t=>typeof t=="string",Kb=t=>typeof t=="number"&&!isNaN(t),Xb=t=>typeof t=="boolean",Qb=t=>t instanceof RegExp,Xs=t=>t instanceof Map,Qs=t=>t instanceof Set,wu=t=>Gb(t)==="Symbol",Jb=t=>t instanceof Date&&!isNaN(t.valueOf()),xu=t=>t instanceof Error,ul=t=>typeof t=="number"&&isNaN(t),ev=t=>Xb(t)||qb(t)||vu(t)||Kb(t)||Hb(t)||wu(t),tv=t=>typeof t=="bigint",nv=t=>t===1/0||t===-1/0,sv=t=>ArrayBuffer.isView(t)&&!(t instanceof DataView),rv=t=>t instanceof URL,Eo=t=>t.replace(/\\/g,"\\\\").replace(/\./g,"\\."),Bi=t=>t.map(String).map(Eo).join("."),Us=(t,e)=>{const n=[];let s="";for(let i=0;i<t.length;i++){let o=t.charAt(i);if(!e&&o==="\\"){const c=t.charAt(i+1);if(c==="\\"){s+="\\",i++;continue}else if(c!==".")throw Error("invalid path")}if(o==="\\"&&t.charAt(i+1)==="."){s+=".",i++;continue}if(o==="."){n.push(s),s="";continue}s+=o}const r=s;return n.push(r),n};function Dt(t,e,n,s){return{isApplicable:t,annotation:e,transform:n,untransform:s}}const _u=[Dt(vu,"undefined",()=>null,()=>{}),Dt(tv,"bigint",t=>t.toString(),t=>typeof BigInt<"u"?BigInt(t):(console.error("Please add a BigInt polyfill."),t)),Dt(Jb,"Date",t=>t.toISOString(),t=>new Date(t)),Dt(xu,"Error",(t,e)=>{const n={name:t.name,message:t.message};return"cause"in t&&(n.cause=t.cause),e.allowedErrorProps.forEach(s=>{n[s]=t[s]}),n},(t,e)=>{const n=new Error(t.message,{cause:t.cause});return n.name=t.name,n.stack=t.stack,e.allowedErrorProps.forEach(s=>{n[s]=t[s]}),n}),Dt(Qb,"regexp",t=>""+t,t=>{const e=t.slice(1,t.lastIndexOf("/")),n=t.slice(t.lastIndexOf("/")+1);return new RegExp(e,n)}),Dt(Qs,"set",t=>[...t.values()],t=>new Set(t)),Dt(Xs,"map",t=>[...t.entries()],t=>new Map(t)),Dt(t=>ul(t)||nv(t),"number",t=>ul(t)?"NaN":t>0?"Infinity":"-Infinity",Number),Dt(t=>t===0&&1/t===-1/0,"number",()=>"-0",Number),Dt(rv,"URL",t=>t.toString(),t=>new URL(t))];function bi(t,e,n,s){return{isApplicable:t,annotation:e,transform:n,untransform:s}}const Su=bi((t,e)=>wu(t)?!!e.symbolRegistry.getIdentifier(t):!1,(t,e)=>["symbol",e.symbolRegistry.getIdentifier(t)],t=>t.description,(t,e,n)=>{const s=n.symbolRegistry.getValue(e[1]);if(!s)throw new Error("Trying to deserialize unknown symbol");return s}),iv=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,Uint8ClampedArray].reduce((t,e)=>(t[e.name]=e,t),{}),Eu=bi(sv,t=>["typed-array",t.constructor.name],t=>[...t],(t,e)=>{const n=iv[e[1]];if(!n)throw new Error("Trying to deserialize unknown typed array");return new n(t)});function ku(t,e){return t?.constructor?!!e.classRegistry.getIdentifier(t.constructor):!1}const Tu=bi(ku,(t,e)=>["class",e.classRegistry.getIdentifier(t.constructor)],(t,e)=>{const n=e.classRegistry.getAllowedProps(t.constructor);if(!n)return{...t};const s={};return n.forEach(r=>{s[r]=t[r]}),s},(t,e,n)=>{const s=n.classRegistry.getValue(e[1]);if(!s)throw new Error(`Trying to deserialize unknown class '${e[1]}' - check https://github.com/blitz-js/superjson/issues/116#issuecomment-773996564`);return Object.assign(Object.create(s.prototype),t)}),Nu=bi((t,e)=>!!e.customTransformerRegistry.findApplicable(t),(t,e)=>["custom",e.customTransformerRegistry.findApplicable(t).name],(t,e)=>e.customTransformerRegistry.findApplicable(t).serialize(t),(t,e,n)=>{const s=n.customTransformerRegistry.findByName(e[1]);if(!s)throw new Error("Trying to deserialize unknown custom value");return s.deserialize(t)}),ov=[Tu,Su,Nu,Eu],fl=(t,e)=>{const n=cl(ov,r=>r.isApplicable(t,e));if(n)return{value:n.transform(t,e),type:n.annotation(t,e)};const s=cl(_u,r=>r.isApplicable(t,e));if(s)return{value:s.transform(t,e),type:s.annotation}},Ou={};_u.forEach(t=>{Ou[t.annotation]=t});const av=(t,e,n)=>{if(Tn(e))switch(e[0]){case"symbol":return Su.untransform(t,e,n);case"class":return Tu.untransform(t,e,n);case"custom":return Nu.untransform(t,e,n);case"typed-array":return Eu.untransform(t,e,n);default:throw new Error("Unknown transformation: "+e)}else{const s=Ou[e];if(!s)throw new Error("Unknown transformation: "+e);return s.untransform(t,n)}},ls=(t,e)=>{if(e>t.size)throw new Error("index out of bounds");const n=t.keys();for(;e>0;)n.next(),e--;return n.next().value};function Au(t){if(Lr(t,"__proto__"))throw new Error("__proto__ is not allowed as a property");if(Lr(t,"prototype"))throw new Error("prototype is not allowed as a property");if(Lr(t,"constructor"))throw new Error("constructor is not allowed as a property")}const lv=(t,e)=>{Au(e);for(let n=0;n<e.length;n++){const s=e[n];if(Qs(t))t=ls(t,+s);else if(Xs(t)){const r=+s,i=+e[++n]==0?"key":"value",o=ls(t,r);switch(i){case"key":t=o;break;case"value":t=t.get(o);break}}else t=t[s]}return t},ko=(t,e,n)=>{if(Au(e),e.length===0)return n(t);let s=t;for(let i=0;i<e.length-1;i++){const o=e[i];if(Tn(s)){const a=+o;s=s[a]}else if(Ks(s))s=s[o];else if(Qs(s)){const a=+o;s=ls(s,a)}else if(Xs(s)){if(i===e.length-2)break;const l=+o,c=+e[++i]==0?"key":"value",u=ls(s,l);switch(c){case"key":s=u;break;case"value":s=s.get(u);break}}}const r=e[e.length-1];if(Tn(s)?s[+r]=n(s[+r]):Ks(s)&&(s[r]=n(s[r])),Qs(s)){const i=ls(s,+r),o=n(i);i!==o&&(s.delete(i),s.add(o))}if(Xs(s)){const i=+e[e.length-2],o=ls(s,i);switch(+r==0?"key":"value"){case"key":{const l=n(o);s.set(l,s.get(o)),l!==o&&s.delete(o);break}case"value":{s.set(o,n(s.get(o)));break}}}return t},Cu=t=>t<1;function To(t,e,n,s=[]){if(!t)return;const r=Cu(n);if(!Tn(t)){Ss(t,(a,l)=>To(a,e,n,[...s,...Us(l,r)]));return}const[i,o]=t;o&&Ss(o,(a,l)=>{To(a,e,n,[...s,...Us(l,r)])}),e(i,s)}function cv(t,e,n,s){return To(e,(r,i)=>{t=ko(t,i,o=>av(o,r,s))},n),t}function uv(t,e,n){const s=Cu(n);function r(i,o){const a=lv(t,Us(o,s));i.map(l=>Us(l,s)).forEach(l=>{t=ko(t,l,()=>a)})}if(Tn(e)){const[i,o]=e;i.forEach(a=>{t=ko(t,Us(a,s),()=>t)}),o&&Ss(o,r)}else Ss(e,r);return t}const fv=(t,e)=>Ks(t)||Tn(t)||Xs(t)||Qs(t)||xu(t)||ku(t,e);function hv(t,e,n){const s=n.get(t);s?s.push(e):n.set(t,[e])}function dv(t,e){const n={};let s;return t.forEach(r=>{if(r.length<=1)return;e||(r=r.map(a=>a.map(String)).sort((a,l)=>a.length-l.length));const[i,...o]=r;i.length===0?s=o.map(Bi):n[Bi(i)]=o.map(Bi)}),s?So(n)?[s]:[s,n]:So(n)?void 0:n}const ju=(t,e,n,s,r=[],i=[],o=new Map)=>{const a=ev(t);if(!a){hv(t,r,e);const p=o.get(t);if(p)return s?{transformedValue:null}:p}if(!fv(t,n)){const p=fl(t,n),g=p?{transformedValue:p.value,annotations:[p.type]}:{transformedValue:t};return a||o.set(t,g),g}if(Lr(i,t))return{transformedValue:null};const l=fl(t,n),c=l?.value??t,u=Tn(c)?[]:{},f={};Ss(c,(p,g)=>{if(g==="__proto__"||g==="constructor"||g==="prototype")throw new Error(`Detected property ${g}. This is a prototype pollution risk, please remove it from your object.`);const m=ju(p,e,n,s,[...r,g],[...i,t],o);u[g]=m.transformedValue,Tn(m.annotations)?f[Eo(g)]=m.annotations:Ks(m.annotations)&&Ss(m.annotations,(b,y)=>{f[Eo(g)+"."+y]=b})});const d=So(f)?{transformedValue:u,annotations:l?[l.type]:void 0}:{transformedValue:u,annotations:l?[l.type,f]:f};return a||o.set(t,d),d};function Iu(t){return Object.prototype.toString.call(t).slice(8,-1)}function hl(t){return Iu(t)==="Array"}function pv(t){if(Iu(t)!=="Object")return!1;const e=Object.getPrototypeOf(t);return!!e&&e.constructor===Object&&e===Object.prototype}function mv(t,e,n,s,r){const i={}.propertyIsEnumerable.call(s,e)?"enumerable":"nonenumerable";i==="enumerable"&&(t[e]=n),r&&i==="nonenumerable"&&Object.defineProperty(t,e,{value:n,enumerable:!1,writable:!0,configurable:!0})}function No(t,e={}){if(hl(t))return t.map(r=>No(r,e));if(!pv(t))return t;const n=Object.getOwnPropertyNames(t),s=Object.getOwnPropertySymbols(t);return[...n,...s].reduce((r,i)=>{if(i==="__proto__"||hl(e.props)&&!e.props.includes(i))return r;const o=t[i],a=No(o,e);return mv(r,i,a,t,e.nonenumerable),r},{})}class ee{constructor({dedupe:e=!1}={}){this.classRegistry=new Zb,this.symbolRegistry=new bu(n=>n.description??""),this.customTransformerRegistry=new Yb,this.allowedErrorProps=[],this.dedupe=e}serialize(e){const n=new Map,s=ju(e,n,this,this.dedupe),r={json:s.transformedValue};s.annotations&&(r.meta={...r.meta,values:s.annotations});const i=dv(n,this.dedupe);return i&&(r.meta={...r.meta,referentialEqualities:i}),r.meta&&(r.meta.v=1),r}deserialize(e,n){const{json:s,meta:r}=e;let i=n?.inPlace?s:No(s);return r?.values&&(i=cv(i,r.values,r.v??0,this)),r?.referentialEqualities&&(i=uv(i,r.referentialEqualities,r.v??0)),i}stringify(e){return JSON.stringify(this.serialize(e))}parse(e){return this.deserialize(JSON.parse(e),{inPlace:!0})}registerClass(e,n){this.classRegistry.register(e,n)}registerSymbol(e,n){this.symbolRegistry.register(e,n)}registerCustom(e,n){this.customTransformerRegistry.register({name:n,...e})}allowErrorProps(...e){this.allowedErrorProps.push(...e)}}ee.defaultInstance=new ee;ee.serialize=ee.defaultInstance.serialize.bind(ee.defaultInstance);ee.deserialize=ee.defaultInstance.deserialize.bind(ee.defaultInstance);ee.stringify=ee.defaultInstance.stringify.bind(ee.defaultInstance);ee.parse=ee.defaultInstance.parse.bind(ee.defaultInstance);ee.registerClass=ee.defaultInstance.registerClass.bind(ee.defaultInstance);ee.registerSymbol=ee.defaultInstance.registerSymbol.bind(ee.defaultInstance);ee.registerCustom=ee.defaultInstance.registerCustom.bind(ee.defaultInstance);ee.allowErrorProps=ee.defaultInstance.allowErrorProps.bind(ee.defaultInstance);ee.serialize;ee.deserialize;ee.stringify;ee.parse;ee.registerClass;ee.registerCustom;ee.registerSymbol;ee.allowErrorProps;const ys=".tcaproj",es=Gs(""),gv=0;function dl(t){if(!t)return[];const e=new Set;function n(r){if(r&&typeof r=="object"&&"minecraft:custom_model_data"in r){const i=r["minecraft:custom_model_data"];if(i?.floats)for(const o of i.floats)e.add(o)}}function s(r){for(const i of Object.keys(r)){const o=r[i];n(o.item?.components),o.attachments&&s(o.attachments)}}return t.model&&(n(t.model.item?.components),t.model.attachments&&s(t.model.attachments)),Array.from(e).sort((r,i)=>r-i)}function Mu(t){const e=new Uint8Array(t.slice(0,4));return e[0]===103&&e[1]===108&&e[2]===84&&e[3]===70?"model/gltf-binary":"model/gltf+json"}function pl(t){const e=new Blob([t],{type:Mu(t)}),n=URL.createObjectURL(e);return{arrayBuffer:t,blob:e,url:n}}const yt=Ro((t,e,n)=>{const s=r=>{const i=typeof r=="function"?r(e()):r,o=e(),a={...i};let l=!1;if("metadata"in a&&a.metadata){const c={...o.metadata},u={...a.metadata};delete c.orbitControls,delete u.orbitControls,Bb(c,u)||(l=!0)}return"saved"in a&&a.saved===!0?a.saved=!0:l&&(a.saved=!1),t(a)};return{saved:!1,metadata:{schemaVersion:gv,projectName:"",createdAt:null,lastModifiedAt:null,orbitControls:void 0,guidelines:[]},cart:null,modelIds:[],modelFiles:new Map,selectedObjectPath:void 0,setSelectedObjectPath:r=>s({selectedObjectPath:r}),setMetadata:r=>s({metadata:r}),setProjectName:r=>s(i=>({metadata:{...i.metadata,projectName:r}})),setCart:r=>s({cart:r,modelIds:dl(r)}),clearCart:()=>s({cart:null}),addGuideline:r=>s(i=>({metadata:{...i.metadata,guidelines:[...i.metadata.guidelines,r]}})),removeGuideline:r=>s(i=>({metadata:{...i.metadata,guidelines:i.metadata.guidelines.filter((o,a)=>a!==r)}})),updateGuideline:(r,i)=>s(o=>({metadata:{...o.metadata,guidelines:o.metadata.guidelines.map((a,l)=>l===r?{...a,...i}:a)}})),resetGuidelines:()=>s(r=>({metadata:{...r.metadata,guidelines:[]}})),saveProject:async r=>{const i=e();if(!i.cart)throw new Error("No cart data to save.");const o=`${i.metadata.projectName||"TCA-Project"}${ys}`,a={...i.metadata,createdAt:i.metadata.createdAt||new Date},l={"metadata.json":Gs(ee.stringify(a)),"cart.json":Gs(ee.stringify(i.cart))};for(const g of i.modelIds){const m=i.modelFiles.get(g);if(!m)continue;if((Mu(m.arrayBuffer)==="model/gltf-binary"?".glb":".gltf")===".gltf"){const y=await zc(m.arrayBuffer);l[`models/${g}.glb`]=y}else l[`models/${g}.glb`]=new Uint8Array(m.arrayBuffer)}const c=sm(l,{level:9,mem:8}),u=new Uint8Array(es.length+c.length);u.set(es),u.set(c,es.length);const f=new Uint8Array(u.length);f.set(u);const d=new Blob([f],{type:"application/binary"}),p=i.fileHandle;if(!p||r){const g=await ze.promise(Sp(d,{fileName:o,extensions:[ys],mimeTypes:["application/binary"],id:"tca-project"}),{loading:"Saving project...",success:"Project saved successfully!",error:"Failed to save the project."}).unwrap();g&&s({saved:!0,fileHandle:g,metadata:{...a}})}else await ze.promise(p.createWritable().then(async g=>{await g.write(f),await g.close()}),{loading:"Saving project...",success:"Project saved successfully!",error:"Failed to save the project."}).unwrap(),s({saved:!0,fileHandle:p,metadata:{...a,lastModifiedAt:new Date}})},loadProjectFromFileDialog:async()=>{const r=await Fo({description:"Select a TCA-Project file",extensions:[ys],mimeTypes:["application/binary"],id:"tca-project",startIn:"documents"}).catch(()=>null);if(!r)throw new Error("No file selected.");await e().loadProjectFromFileHandle(r)},loadProjectFromFileHandle:async r=>{if(!r)throw new Error("No file handle.");await e().reset();const i=await r.arrayBuffer();if(!new Uint8Array(i.slice(0,es.length)).every((c,u)=>c===es[u]))throw new Error("Invalid TCA-Project file format.");const a=new Uint8Array(i.slice(es.length)),l=rm(a);for(const[c,u]of Object.entries(l))if(c==="metadata.json"){const f=Pb.safeParse(ee.parse(fo(u)));f.success?s({metadata:f.data}):(ze.error("Invalid metadata in project file."),e().reset())}else if(c==="cart.json"){const f=Qo.safeParse(ee.parse(fo(u)));f.success?s({cart:f.data,modelIds:dl(f.data)}):(ze.error("Invalid cart data in project file."),e().reset())}else if(c.startsWith("models/")&&c.endsWith(".glb")){const f=parseInt(c.replace("models/","").replace(".glb",""));isNaN(f)||s(d=>{const p=new Map(d.modelFiles);return p.set(f,pl(uc(u.buffer))),{modelFiles:p}})}s({saved:!0,fileHandle:r.handle})},reset:()=>s(n.getInitialState()),setModelFile:(r,i)=>s(o=>{const a=new Map(o.modelFiles);return i?a.set(r,pl(i)):a.delete(r),{modelFiles:a,saved:!1}}),removeModelFile:r=>s(i=>{const o=new Map(i.modelFiles);return o.delete(r),{modelFiles:o,saved:!1}}),logState:()=>console.log("ProjectStore state:",e())}});function yv(){const t=D.c(56),e=yt(),[n,s]=z.useState(document.fullscreenElement),[r,i]=z.useState(!1),[o,a]=z.useState(!1),l=vv;let c,u;t[0]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{const ne=()=>{s(document.fullscreenElement)};return document.addEventListener("fullscreenchange",ne),()=>{document.removeEventListener("fullscreenchange",ne)}},u=[],t[0]=c,t[1]=u):(c=t[0],u=t[1]),z.useEffect(c,u);let f;t[2]!==e?(f=async()=>{i(!0),await e.saveProject(),e.reset(),i(!1)},t[2]=e,t[3]=f):f=t[3];const d=f;let p,g;t[4]!==e?(p=()=>{const ne=Y=>{Y.key==="s"&&(Y.ctrlKey||Y.metaKey)&&e.cart?(Y.preventDefault(),e.saveProject().catch(bv)):Y.key===","&&(Y.ctrlKey||Y.metaKey)&&(Y.preventDefault(),a(!0))};return window.addEventListener("keydown",ne),()=>{window.removeEventListener("keydown",ne)}},g=[e],t[4]=e,t[5]=p,t[6]=g):(p=t[5],g=t[6]),z.useEffect(p,g);const m=e.metadata.projectName||"Untitled Project";let b;t[7]!==e.saved?(b=e.saved?h.jsx(Yl,{}):h.jsx("span",{style:{display:"inline-block",width:10,height:10,borderRadius:"50%",background:"currentColor",marginRight:4,aspectRatio:"1 / 1"}}),t[7]=e.saved,t[8]=b):b=t[8];let y;t[9]!==d||t[10]!==r||t[11]!==b?(y=h.jsx(Fe,{className:"h-4 w-4",variant:"ghost",size:"icon",disabled:r,onClick:d,children:b}),t[9]=d,t[10]=r,t[11]=b,t[12]=y):y=t[12];let k;t[13]!==m||t[14]!==y?(k=h.jsxs("div",{className:"bg-card flex items-center gap-2 px-2",children:[m,y]}),t[13]=m,t[14]=y,t[15]=k):k=t[15];let x;t[16]===Symbol.for("react.memo_cache_sentinel")?(x=h.jsx(op,{children:"File"}),t[16]=x):x=t[16];let _;t[17]!==e?(_=async()=>e.saveProject(),t[17]=e,t[18]=_):_=t[18];let E;t[19]===Symbol.for("react.memo_cache_sentinel")?(E=h.jsx(ka,{children:"CTRL + S"}),t[19]=E):E=t[19];let T;t[20]!==r||t[21]!==_?(T=h.jsxs(Jn,{disabled:r,onClick:_,children:["Save Project ",E]}),t[20]=r,t[21]=_,t[22]=T):T=t[22];let v;t[23]!==e?(v=async()=>e.saveProject(!0),t[23]=e,t[24]=v):v=t[24];let w;t[25]!==r||t[26]!==v?(w=h.jsx(Jn,{disabled:r,onClick:v,children:"Save Project As"}),t[25]=r,t[26]=v,t[27]=w):w=t[27];let S;t[28]===Symbol.for("react.memo_cache_sentinel")?(S=h.jsx(Pi,{}),t[28]=S):S=t[28];let N;t[29]!==e?(N=async()=>e.loadProjectFromFileDialog(),t[29]=e,t[30]=N):N=t[30];let O;t[31]!==r||t[32]!==N?(O=h.jsx(Jn,{disabled:r,onClick:N,children:"Load Project"}),t[31]=r,t[32]=N,t[33]=O):O=t[33];let A;t[34]!==d||t[35]!==r?(A=h.jsx(Jn,{disabled:r,onClick:d,children:"New Project"}),t[34]=d,t[35]=r,t[36]=A):A=t[36];let C;t[37]===Symbol.for("react.memo_cache_sentinel")?(C=h.jsx(Pi,{}),t[37]=C):C=t[37];let M;t[38]===Symbol.for("react.memo_cache_sentinel")?(M=()=>a(!0),t[38]=M):M=t[38];let P,R,$;t[39]===Symbol.for("react.memo_cache_sentinel")?(P=h.jsxs(Jn,{onClick:M,children:["Preferences",h.jsx(ka,{children:"CTRL + ,"})]}),R=h.jsx(Pi,{}),$=h.jsx(Jn,{children:"Print"}),t[39]=P,t[40]=R,t[41]=$):(P=t[39],R=t[40],$=t[41]);let F;t[42]!==T||t[43]!==w||t[44]!==O||t[45]!==A?(F=h.jsxs(Ea,{children:[x,h.jsxs(ap,{children:[T,w,S,O,A,C,P,R,$]})]}),t[42]=T,t[43]=w,t[44]=O,t[45]=A,t[46]=F):F=t[46];let L;t[47]!==n?(L=h.jsx(Ea,{children:h.jsx(Fe,{className:"ml-auto",variant:"ghost",size:"icon",onClick:l,children:n?h.jsx(Hf,{}):h.jsx(qf,{})})}),t[47]=n,t[48]=L):L=t[48];let W;t[49]!==o?(W=h.jsx(_v,{open:o,setOpen:a}),t[49]=o,t[50]=W):W=t[50];let K;return t[51]!==F||t[52]!==L||t[53]!==W||t[54]!==k?(K=h.jsxs(rp,{className:"rounded-none",children:[k,F,L,W]}),t[51]=F,t[52]=L,t[53]=W,t[54]=k,t[55]=K):K=t[55],K}function bv(t){console.error("Save failed:",t)}function vv(){document.fullscreenElement?document.exitFullscreen().catch(wv):document.documentElement.requestFullscreen().catch(xv)}function wv(t){console.error("Error exiting fullscreen mode:",t)}function xv(t){console.error("Error entering fullscreen mode:",t)}function _v(t){const e=D.c(61),{open:n,setOpen:s}=t,r=sr();let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=h.jsx(np,{children:"Preferences"}),e[0]=i):i=e[0];let o;e[1]===Symbol.for("react.memo_cache_sentinel")?(o=h.jsx(ft,{htmlFor:"theme-select",children:"Theme:"}),e[1]=o):o=e[1];let a;e[2]!==r?(a=L=>{if(L!=="light"&&L!=="dark"){console.warn("Invalid theme selected:",L);return}r.setTheme(L)},e[2]=r,e[3]=a):a=e[3];let l;e[4]===Symbol.for("react.memo_cache_sentinel")?(l=h.jsx(Gr,{className:"h-10 w-full",id:"theme-select",children:h.jsx(Yr,{placeholder:"Select theme"})}),e[4]=l):l=e[4];let c;e[5]===Symbol.for("react.memo_cache_sentinel")?(c=h.jsx(qr,{children:h.jsxs(ro,{children:[h.jsx(io,{children:"Available Themes"}),h.jsx(Dn,{value:"light",children:"Light"}),h.jsx(Dn,{value:"dark",children:"Dark"})]})}),e[5]=c):c=e[5];let u;e[6]!==r.theme||e[7]!==a?(u=h.jsxs("div",{className:"flex flex-col",children:[o,h.jsxs(Wr,{value:r.theme,onValueChange:a,children:[l,c]})]}),e[6]=r.theme,e[7]=a,e[8]=u):u=e[8];let f;e[9]===Symbol.for("react.memo_cache_sentinel")?(f=h.jsx(ft,{htmlFor:"save-interval",children:"Auto-save Interval (seconds):"}),e[9]=f):f=e[9];let d;e[10]!==r?(d=L=>{const W=parseInt(L.target.value,10);if(isNaN(W)||W<1){console.warn("Invalid save interval:",L.target.value);return}r.setSaveInterval(W)},e[10]=r,e[11]=d):d=e[11];let p;e[12]!==r.saveInterval||e[13]!==d?(p=h.jsxs("div",{className:"flex flex-col",children:[f,h.jsx(ps,{id:"save-interval",type:"number",min:1,value:r.saveInterval,onChange:d,className:"h-10 w-full"})]}),e[12]=r.saveInterval,e[13]=d,e[14]=p):p=e[14];let g;e[15]===Symbol.for("react.memo_cache_sentinel")?(g=h.jsx(ft,{htmlFor:"grid-color",className:"mb-2 block",children:"Grid Color:"}),e[15]=g):g=e[15];let m;e[16]!==r?(m=L=>{r.setGridColor(L)},e[16]=r,e[17]=m):m=e[17];let b;e[18]!==r.gridColor||e[19]!==m?(b=h.jsxs("div",{className:"flex flex-col",children:[g,h.jsx(pc,{defaultColor:r.gridColor,onChangeComplete:m})]}),e[18]=r.gridColor,e[19]=m,e[20]=b):b=e[20];let y;e[21]===Symbol.for("react.memo_cache_sentinel")?(y=h.jsx(dn,{asChild:!0,children:h.jsx(dr,{className:"mr-[0.5] inline h-3"})}),e[21]=y):y=e[21];let k;e[22]===Symbol.for("react.memo_cache_sentinel")?(k=h.jsxs(ft,{htmlFor:"debug-text",className:"mb-2 block",children:[h.jsxs(hn,{children:[y,h.jsx(pn,{children:h.jsx("p",{children:"Debug text displays additional information about the 3D scene, such as object coordinates and rendering details. It can be useful for troubleshooting but may clutter the view."})})]}),"Debug Text:"]}),e[22]=k):k=e[22];let x;e[23]!==r?(x=L=>r.setDebugText(L),e[23]=r,e[24]=x):x=e[24];let _;e[25]!==r.debugText||e[26]!==x?(_=h.jsxs("div",{className:"flex flex-row gap-2",children:[k,h.jsx(mr,{id:"debug-text",checked:r.debugText,onCheckedChange:x})]}),e[25]=r.debugText,e[26]=x,e[27]=_):_=e[27];let E;e[28]===Symbol.for("react.memo_cache_sentinel")?(E=h.jsx(dn,{asChild:!0,children:h.jsx(dr,{className:"mr-[0.5] inline h-3"})}),e[28]=E):E=e[28];let T;e[29]===Symbol.for("react.memo_cache_sentinel")?(T=h.jsxs(ft,{htmlFor:"ssao-enabled",className:"mb-2 block",children:[h.jsxs(hn,{children:[E,h.jsx(pn,{children:h.jsx("p",{children:"Screen Space Ambient Occlusion (SSAO) is a shading method that adds soft shadows to enhance depth perception in 3D scenes. It can improve visual realism but may impact performance."})})]}),"SSAO Enabled:"]}),e[29]=T):T=e[29];let v;e[30]!==r?(v=L=>r.setSSAOEnabled(L),e[30]=r,e[31]=v):v=e[31];let w;e[32]!==r.SSAOEnabled||e[33]!==v?(w=h.jsxs("div",{className:"flex flex-row gap-2",children:[T,h.jsx(mr,{id:"ssao-enabled",checked:r.SSAOEnabled,onCheckedChange:v})]}),e[32]=r.SSAOEnabled,e[33]=v,e[34]=w):w=e[34];let S;e[35]===Symbol.for("react.memo_cache_sentinel")?(S=h.jsx(dn,{asChild:!0,children:h.jsx(dr,{className:"mr-[0.5] inline h-3"})}),e[35]=S):S=e[35];let N;e[36]===Symbol.for("react.memo_cache_sentinel")?(N=h.jsxs(ft,{htmlFor:"dof-enabled",className:"mb-2 block",children:[h.jsxs(hn,{children:[S,h.jsx(pn,{children:h.jsx("p",{children:"Depth of Field (DOF) creates a blurred effect on objects outside the focus area, simulating camera lens behavior. It enhances realism but can be resource-intensive and may affect performance."})})]}),"Depth of Field Enabled:"]}),e[36]=N):N=e[36];let O;e[37]!==r?(O=L=>r.setDOFEnabled(L),e[37]=r,e[38]=O):O=e[38];let A;e[39]!==r.DOFEnabled||e[40]!==O?(A=h.jsxs("div",{className:"flex flex-row gap-2",children:[N,h.jsx(mr,{id:"dof-enabled",checked:r.DOFEnabled,onCheckedChange:O})]}),e[39]=r.DOFEnabled,e[40]=O,e[41]=A):A=e[41];let C;e[42]===Symbol.for("react.memo_cache_sentinel")?(C=h.jsx(dn,{asChild:!0,children:h.jsx(dr,{className:"mr-[0.5] inline h-3"})}),e[42]=C):C=e[42];let M;e[43]===Symbol.for("react.memo_cache_sentinel")?(M=h.jsxs(ft,{htmlFor:"control-damping-enabled",className:"mb-2 block",children:[h.jsxs(hn,{children:[C,h.jsx(pn,{children:h.jsx("p",{children:"Enabling control damping makes camera movements smoother by adding inertia. This results in a more natural feel when orbiting or panning the view, but may introduce a slight delay in responsiveness."})})]}),"Orbit Controls Damping:"]}),e[43]=M):M=e[43];let P;e[44]!==r?(P=L=>r.setControlDamping(L),e[44]=r,e[45]=P):P=e[45];let R;e[46]!==r.controlDamping||e[47]!==P?(R=h.jsxs("div",{className:"flex flex-row gap-2",children:[M,h.jsx(mr,{id:"control-damping",checked:r.controlDamping,onCheckedChange:P})]}),e[46]=r.controlDamping,e[47]=P,e[48]=R):R=e[48];let $;e[49]!==b||e[50]!==_||e[51]!==w||e[52]!==A||e[53]!==R||e[54]!==u||e[55]!==p?($=h.jsx(ep,{children:h.jsxs(tp,{children:[i,h.jsx(sp,{asChild:!0,children:h.jsxs("div",{children:["Here you can adjust your preferences for the application.",h.jsxs("div",{className:"mt-4 flex flex-col gap-4",children:[u,p,b,_,w,A,R]})]})})]})}),e[49]=b,e[50]=_,e[51]=w,e[52]=A,e[53]=R,e[54]=u,e[55]=p,e[56]=$):$=e[56];let F;return e[57]!==n||e[58]!==s||e[59]!==$?(F=h.jsx(Xd,{open:n,onOpenChange:s,children:$}),e[57]=n,e[58]=s,e[59]=$,e[60]=F):F=e[60],F}function Pu(t){const e=D.c(4),{error:n}=t;let s,r;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=h.jsx("p",{children:"Something went wrong:"}),r={color:"red"},e[0]=s,e[1]=r):(s=e[0],r=e[1]);let i;return e[2]!==n.message?(i=h.jsxs("div",{role:"alert",children:[s,h.jsx("pre",{style:r,children:n.message})]}),e[2]=n.message,e[3]=i):i=e[3],i}function Sv(t){const e=D.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=U("flex flex-col gap-2",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx(Xh,{"data-slot":"tabs",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function Ev(t){const e=D.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=U("bg-muted text-muted-foreground inline-flex flex-wrap w-fit items-center justify-center rounded-lg p-[3px]",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx(Qh,{"data-slot":"tabs-list",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function kr(t){const e=D.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=U("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-9  items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 flex-1",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx(Jh,{"data-slot":"tabs-trigger",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function Tr(t){const e=D.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=U("flex-1 outline-none",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx(ed,{"data-slot":"tabs-content",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function Ru(t){const e=D.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=U("w-full caption-bottom text-sm",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:h.jsx("table",{"data-slot":"table",className:r,...s})}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function $u(t){const e=D.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=U("[&_tr]:border-b",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx("thead",{"data-slot":"table-header",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function zu(t){const e=D.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=U("[&_tr:last-child]:border-0",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx("tbody",{"data-slot":"table-body",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function ri(t){const e=D.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=U("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx("tr",{"data-slot":"table-row",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function ln(t){const e=D.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=U("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx("th",{"data-slot":"table-head",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function cn(t){const e=D.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=U("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx("td",{"data-slot":"table-cell",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}class kv{add(e,n,s){if(typeof arguments[0]!="string")for(let r in arguments[0])this.add(r,arguments[0][r],arguments[1]);else(Array.isArray(e)?e:[e]).forEach(function(r){this[r]=this[r]||[],n&&this[r][s?"unshift":"push"](n)},this)}run(e,n){this[e]=this[e]||[],this[e].forEach(function(s){s.call(n&&n.context?n.context:n,n)})}}class Tv{constructor(e){this.jsep=e,this.registered={}}register(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];n.forEach(r=>{if(typeof r!="object"||!r.name||!r.init)throw new Error("Invalid JSEP plugin format");this.registered[r.name]||(r.init(this.jsep),this.registered[r.name]=r)})}}class j{static get version(){return"1.4.0"}static toString(){return"JavaScript Expression Parser (JSEP) v"+j.version}static addUnaryOp(e){return j.max_unop_len=Math.max(e.length,j.max_unop_len),j.unary_ops[e]=1,j}static addBinaryOp(e,n,s){return j.max_binop_len=Math.max(e.length,j.max_binop_len),j.binary_ops[e]=n,s?j.right_associative.add(e):j.right_associative.delete(e),j}static addIdentifierChar(e){return j.additional_identifier_chars.add(e),j}static addLiteral(e,n){return j.literals[e]=n,j}static removeUnaryOp(e){return delete j.unary_ops[e],e.length===j.max_unop_len&&(j.max_unop_len=j.getMaxKeyLen(j.unary_ops)),j}static removeAllUnaryOps(){return j.unary_ops={},j.max_unop_len=0,j}static removeIdentifierChar(e){return j.additional_identifier_chars.delete(e),j}static removeBinaryOp(e){return delete j.binary_ops[e],e.length===j.max_binop_len&&(j.max_binop_len=j.getMaxKeyLen(j.binary_ops)),j.right_associative.delete(e),j}static removeAllBinaryOps(){return j.binary_ops={},j.max_binop_len=0,j}static removeLiteral(e){return delete j.literals[e],j}static removeAllLiterals(){return j.literals={},j}get char(){return this.expr.charAt(this.index)}get code(){return this.expr.charCodeAt(this.index)}constructor(e){this.expr=e,this.index=0}static parse(e){return new j(e).parse()}static getMaxKeyLen(e){return Math.max(0,...Object.keys(e).map(n=>n.length))}static isDecimalDigit(e){return e>=48&&e<=57}static binaryPrecedence(e){return j.binary_ops[e]||0}static isIdentifierStart(e){return e>=65&&e<=90||e>=97&&e<=122||e>=128&&!j.binary_ops[String.fromCharCode(e)]||j.additional_identifier_chars.has(String.fromCharCode(e))}static isIdentifierPart(e){return j.isIdentifierStart(e)||j.isDecimalDigit(e)}throwError(e){const n=new Error(e+" at character "+this.index);throw n.index=this.index,n.description=e,n}runHook(e,n){if(j.hooks[e]){const s={context:this,node:n};return j.hooks.run(e,s),s.node}return n}searchHook(e){if(j.hooks[e]){const n={context:this};return j.hooks[e].find(function(s){return s.call(n.context,n),n.node}),n.node}}gobbleSpaces(){let e=this.code;for(;e===j.SPACE_CODE||e===j.TAB_CODE||e===j.LF_CODE||e===j.CR_CODE;)e=this.expr.charCodeAt(++this.index);this.runHook("gobble-spaces")}parse(){this.runHook("before-all");const e=this.gobbleExpressions(),n=e.length===1?e[0]:{type:j.COMPOUND,body:e};return this.runHook("after-all",n)}gobbleExpressions(e){let n=[],s,r;for(;this.index<this.expr.length;)if(s=this.code,s===j.SEMCOL_CODE||s===j.COMMA_CODE)this.index++;else if(r=this.gobbleExpression())n.push(r);else if(this.index<this.expr.length){if(s===e)break;this.throwError('Unexpected "'+this.char+'"')}return n}gobbleExpression(){const e=this.searchHook("gobble-expression")||this.gobbleBinaryExpression();return this.gobbleSpaces(),this.runHook("after-expression",e)}gobbleBinaryOp(){this.gobbleSpaces();let e=this.expr.substr(this.index,j.max_binop_len),n=e.length;for(;n>0;){if(j.binary_ops.hasOwnProperty(e)&&(!j.isIdentifierStart(this.code)||this.index+e.length<this.expr.length&&!j.isIdentifierPart(this.expr.charCodeAt(this.index+e.length))))return this.index+=n,e;e=e.substr(0,--n)}return!1}gobbleBinaryExpression(){let e,n,s,r,i,o,a,l,c;if(o=this.gobbleToken(),!o||(n=this.gobbleBinaryOp(),!n))return o;for(i={value:n,prec:j.binaryPrecedence(n),right_a:j.right_associative.has(n)},a=this.gobbleToken(),a||this.throwError("Expected expression after "+n),r=[o,i,a];n=this.gobbleBinaryOp();){if(s=j.binaryPrecedence(n),s===0){this.index-=n.length;break}i={value:n,prec:s,right_a:j.right_associative.has(n)},c=n;const u=f=>i.right_a&&f.right_a?s>f.prec:s<=f.prec;for(;r.length>2&&u(r[r.length-2]);)a=r.pop(),n=r.pop().value,o=r.pop(),e={type:j.BINARY_EXP,operator:n,left:o,right:a},r.push(e);e=this.gobbleToken(),e||this.throwError("Expected expression after "+c),r.push(i,e)}for(l=r.length-1,e=r[l];l>1;)e={type:j.BINARY_EXP,operator:r[l-1].value,left:r[l-2],right:e},l-=2;return e}gobbleToken(){let e,n,s,r;if(this.gobbleSpaces(),r=this.searchHook("gobble-token"),r)return this.runHook("after-token",r);if(e=this.code,j.isDecimalDigit(e)||e===j.PERIOD_CODE)return this.gobbleNumericLiteral();if(e===j.SQUOTE_CODE||e===j.DQUOTE_CODE)r=this.gobbleStringLiteral();else if(e===j.OBRACK_CODE)r=this.gobbleArray();else{for(n=this.expr.substr(this.index,j.max_unop_len),s=n.length;s>0;){if(j.unary_ops.hasOwnProperty(n)&&(!j.isIdentifierStart(this.code)||this.index+n.length<this.expr.length&&!j.isIdentifierPart(this.expr.charCodeAt(this.index+n.length)))){this.index+=s;const i=this.gobbleToken();return i||this.throwError("missing unaryOp argument"),this.runHook("after-token",{type:j.UNARY_EXP,operator:n,argument:i,prefix:!0})}n=n.substr(0,--s)}j.isIdentifierStart(e)?(r=this.gobbleIdentifier(),j.literals.hasOwnProperty(r.name)?r={type:j.LITERAL,value:j.literals[r.name],raw:r.name}:r.name===j.this_str&&(r={type:j.THIS_EXP})):e===j.OPAREN_CODE&&(r=this.gobbleGroup())}return r?(r=this.gobbleTokenProperty(r),this.runHook("after-token",r)):this.runHook("after-token",!1)}gobbleTokenProperty(e){this.gobbleSpaces();let n=this.code;for(;n===j.PERIOD_CODE||n===j.OBRACK_CODE||n===j.OPAREN_CODE||n===j.QUMARK_CODE;){let s;if(n===j.QUMARK_CODE){if(this.expr.charCodeAt(this.index+1)!==j.PERIOD_CODE)break;s=!0,this.index+=2,this.gobbleSpaces(),n=this.code}this.index++,n===j.OBRACK_CODE?(e={type:j.MEMBER_EXP,computed:!0,object:e,property:this.gobbleExpression()},e.property||this.throwError('Unexpected "'+this.char+'"'),this.gobbleSpaces(),n=this.code,n!==j.CBRACK_CODE&&this.throwError("Unclosed ["),this.index++):n===j.OPAREN_CODE?e={type:j.CALL_EXP,arguments:this.gobbleArguments(j.CPAREN_CODE),callee:e}:(n===j.PERIOD_CODE||s)&&(s&&this.index--,this.gobbleSpaces(),e={type:j.MEMBER_EXP,computed:!1,object:e,property:this.gobbleIdentifier()}),s&&(e.optional=!0),this.gobbleSpaces(),n=this.code}return e}gobbleNumericLiteral(){let e="",n,s;for(;j.isDecimalDigit(this.code);)e+=this.expr.charAt(this.index++);if(this.code===j.PERIOD_CODE)for(e+=this.expr.charAt(this.index++);j.isDecimalDigit(this.code);)e+=this.expr.charAt(this.index++);if(n=this.char,n==="e"||n==="E"){for(e+=this.expr.charAt(this.index++),n=this.char,(n==="+"||n==="-")&&(e+=this.expr.charAt(this.index++));j.isDecimalDigit(this.code);)e+=this.expr.charAt(this.index++);j.isDecimalDigit(this.expr.charCodeAt(this.index-1))||this.throwError("Expected exponent ("+e+this.char+")")}return s=this.code,j.isIdentifierStart(s)?this.throwError("Variable names cannot start with a number ("+e+this.char+")"):(s===j.PERIOD_CODE||e.length===1&&e.charCodeAt(0)===j.PERIOD_CODE)&&this.throwError("Unexpected period"),{type:j.LITERAL,value:parseFloat(e),raw:e}}gobbleStringLiteral(){let e="";const n=this.index,s=this.expr.charAt(this.index++);let r=!1;for(;this.index<this.expr.length;){let i=this.expr.charAt(this.index++);if(i===s){r=!0;break}else if(i==="\\")switch(i=this.expr.charAt(this.index++),i){case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:e+=i}else e+=i}return r||this.throwError('Unclosed quote after "'+e+'"'),{type:j.LITERAL,value:e,raw:this.expr.substring(n,this.index)}}gobbleIdentifier(){let e=this.code,n=this.index;for(j.isIdentifierStart(e)?this.index++:this.throwError("Unexpected "+this.char);this.index<this.expr.length&&(e=this.code,j.isIdentifierPart(e));)this.index++;return{type:j.IDENTIFIER,name:this.expr.slice(n,this.index)}}gobbleArguments(e){const n=[];let s=!1,r=0;for(;this.index<this.expr.length;){this.gobbleSpaces();let i=this.code;if(i===e){s=!0,this.index++,e===j.CPAREN_CODE&&r&&r>=n.length&&this.throwError("Unexpected token "+String.fromCharCode(e));break}else if(i===j.COMMA_CODE){if(this.index++,r++,r!==n.length){if(e===j.CPAREN_CODE)this.throwError("Unexpected token ,");else if(e===j.CBRACK_CODE)for(let o=n.length;o<r;o++)n.push(null)}}else if(n.length!==r&&r!==0)this.throwError("Expected comma");else{const o=this.gobbleExpression();(!o||o.type===j.COMPOUND)&&this.throwError("Expected comma"),n.push(o)}}return s||this.throwError("Expected "+String.fromCharCode(e)),n}gobbleGroup(){this.index++;let e=this.gobbleExpressions(j.CPAREN_CODE);if(this.code===j.CPAREN_CODE)return this.index++,e.length===1?e[0]:e.length?{type:j.SEQUENCE_EXP,expressions:e}:!1;this.throwError("Unclosed (")}gobbleArray(){return this.index++,{type:j.ARRAY_EXP,elements:this.gobbleArguments(j.CBRACK_CODE)}}}const Nv=new kv;Object.assign(j,{hooks:Nv,plugins:new Tv(j),COMPOUND:"Compound",SEQUENCE_EXP:"SequenceExpression",IDENTIFIER:"Identifier",MEMBER_EXP:"MemberExpression",LITERAL:"Literal",THIS_EXP:"ThisExpression",CALL_EXP:"CallExpression",UNARY_EXP:"UnaryExpression",BINARY_EXP:"BinaryExpression",ARRAY_EXP:"ArrayExpression",TAB_CODE:9,LF_CODE:10,CR_CODE:13,SPACE_CODE:32,PERIOD_CODE:46,COMMA_CODE:44,SQUOTE_CODE:39,DQUOTE_CODE:34,OPAREN_CODE:40,CPAREN_CODE:41,OBRACK_CODE:91,CBRACK_CODE:93,QUMARK_CODE:63,SEMCOL_CODE:59,COLON_CODE:58,unary_ops:{"-":1,"!":1,"~":1,"+":1},binary_ops:{"||":1,"??":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10,"**":11},right_associative:new Set(["**"]),additional_identifier_chars:new Set(["$","_"]),literals:{true:!0,false:!1,null:null},this_str:"this"});j.max_unop_len=j.getMaxKeyLen(j.unary_ops);j.max_binop_len=j.getMaxKeyLen(j.binary_ops);const Qt=t=>new j(t).parse(),Ov=Object.getOwnPropertyNames(class{});Object.getOwnPropertyNames(j).filter(t=>!Ov.includes(t)&&Qt[t]===void 0).forEach(t=>{Qt[t]=j[t]});Qt.Jsep=j;const Av="ConditionalExpression";var Cv={name:"ternary",init(t){t.hooks.add("after-expression",function(n){if(n.node&&this.code===t.QUMARK_CODE){this.index++;const s=n.node,r=this.gobbleExpression();if(r||this.throwError("Expected expression"),this.gobbleSpaces(),this.code===t.COLON_CODE){this.index++;const i=this.gobbleExpression();if(i||this.throwError("Expected expression"),n.node={type:Av,test:s,consequent:r,alternate:i},s.operator&&t.binary_ops[s.operator]<=.9){let o=s;for(;o.right.operator&&t.binary_ops[o.right.operator]<=.9;)o=o.right;n.node.test=o.right,o.right=n.node,n.node=s}}else this.throwError("Expected :")}})}};Qt.plugins.register(Cv);const ml=47,jv=92;var Iv={name:"regex",init(t){t.hooks.add("gobble-token",function(n){if(this.code===ml){const s=++this.index;let r=!1;for(;this.index<this.expr.length;){if(this.code===ml&&!r){const i=this.expr.slice(s,this.index);let o="";for(;++this.index<this.expr.length;){const l=this.code;if(l>=97&&l<=122||l>=65&&l<=90||l>=48&&l<=57)o+=this.char;else break}let a;try{a=new RegExp(i,o)}catch(l){this.throwError(l.message)}return n.node={type:t.LITERAL,value:a,raw:this.expr.slice(s-1,this.index)},n.node=this.gobbleTokenProperty(n.node),n.node}this.code===t.OBRACK_CODE?r=!0:r&&this.code===t.CBRACK_CODE&&(r=!1),this.index+=this.code===jv?2:1}this.throwError("Unclosed Regex")}})}};const Ui=43,Mv=45,rs={name:"assignment",assignmentOperators:new Set(["=","*=","**=","/=","%=","+=","-=","<<=",">>=",">>>=","&=","^=","|=","||=","&&=","??="]),updateOperators:[Ui,Mv],assignmentPrecedence:.9,init(t){const e=[t.IDENTIFIER,t.MEMBER_EXP];rs.assignmentOperators.forEach(s=>t.addBinaryOp(s,rs.assignmentPrecedence,!0)),t.hooks.add("gobble-token",function(r){const i=this.code;rs.updateOperators.some(o=>o===i&&o===this.expr.charCodeAt(this.index+1))&&(this.index+=2,r.node={type:"UpdateExpression",operator:i===Ui?"++":"--",argument:this.gobbleTokenProperty(this.gobbleIdentifier()),prefix:!0},(!r.node.argument||!e.includes(r.node.argument.type))&&this.throwError(`Unexpected ${r.node.operator}`))}),t.hooks.add("after-token",function(r){if(r.node){const i=this.code;rs.updateOperators.some(o=>o===i&&o===this.expr.charCodeAt(this.index+1))&&(e.includes(r.node.type)||this.throwError(`Unexpected ${r.node.operator}`),this.index+=2,r.node={type:"UpdateExpression",operator:i===Ui?"++":"--",argument:r.node,prefix:!1})}}),t.hooks.add("after-expression",function(r){r.node&&n(r.node)});function n(s){rs.assignmentOperators.has(s.operator)?(s.type="AssignmentExpression",n(s.left),n(s.right)):s.operator||Object.values(s).forEach(r=>{r&&typeof r=="object"&&n(r)})}}};Qt.plugins.register(Iv,rs);Qt.addUnaryOp("typeof");Qt.addLiteral("null",null);Qt.addLiteral("undefined",void 0);const Pv=new Set(["constructor","__proto__","__defineGetter__","__defineSetter__"]),de={evalAst(t,e){switch(t.type){case"BinaryExpression":case"LogicalExpression":return de.evalBinaryExpression(t,e);case"Compound":return de.evalCompound(t,e);case"ConditionalExpression":return de.evalConditionalExpression(t,e);case"Identifier":return de.evalIdentifier(t,e);case"Literal":return de.evalLiteral(t,e);case"MemberExpression":return de.evalMemberExpression(t,e);case"UnaryExpression":return de.evalUnaryExpression(t,e);case"ArrayExpression":return de.evalArrayExpression(t,e);case"CallExpression":return de.evalCallExpression(t,e);case"AssignmentExpression":return de.evalAssignmentExpression(t,e);default:throw SyntaxError("Unexpected expression",t)}},evalBinaryExpression(t,e){return{"||":(s,r)=>s||r(),"&&":(s,r)=>s&&r(),"|":(s,r)=>s|r(),"^":(s,r)=>s^r(),"&":(s,r)=>s&r(),"==":(s,r)=>s==r(),"!=":(s,r)=>s!=r(),"===":(s,r)=>s===r(),"!==":(s,r)=>s!==r(),"<":(s,r)=>s<r(),">":(s,r)=>s>r(),"<=":(s,r)=>s<=r(),">=":(s,r)=>s>=r(),"<<":(s,r)=>s<<r(),">>":(s,r)=>s>>r(),">>>":(s,r)=>s>>>r(),"+":(s,r)=>s+r(),"-":(s,r)=>s-r(),"*":(s,r)=>s*r(),"/":(s,r)=>s/r(),"%":(s,r)=>s%r()}[t.operator](de.evalAst(t.left,e),()=>de.evalAst(t.right,e))},evalCompound(t,e){let n;for(let s=0;s<t.body.length;s++){t.body[s].type==="Identifier"&&["var","let","const"].includes(t.body[s].name)&&t.body[s+1]&&t.body[s+1].type==="AssignmentExpression"&&(s+=1);const r=t.body[s];n=de.evalAst(r,e)}return n},evalConditionalExpression(t,e){return de.evalAst(t.test,e)?de.evalAst(t.consequent,e):de.evalAst(t.alternate,e)},evalIdentifier(t,e){if(Object.hasOwn(e,t.name))return e[t.name];throw ReferenceError(`${t.name} is not defined`)},evalLiteral(t){return t.value},evalMemberExpression(t,e){const n=String(t.computed?de.evalAst(t.property):t.property.name),s=de.evalAst(t.object,e);if(s==null)throw TypeError(`Cannot read properties of ${s} (reading '${n}')`);if(!Object.hasOwn(s,n)&&Pv.has(n))throw TypeError(`Cannot read properties of ${s} (reading '${n}')`);const r=s[n];return typeof r=="function"?r.bind(s):r},evalUnaryExpression(t,e){return{"-":s=>-de.evalAst(s,e),"!":s=>!de.evalAst(s,e),"~":s=>~de.evalAst(s,e),"+":s=>+de.evalAst(s,e),typeof:s=>typeof de.evalAst(s,e)}[t.operator](t.argument)},evalArrayExpression(t,e){return t.elements.map(n=>de.evalAst(n,e))},evalCallExpression(t,e){const n=t.arguments.map(r=>de.evalAst(r,e));return de.evalAst(t.callee,e)(...n)},evalAssignmentExpression(t,e){if(t.left.type!=="Identifier")throw SyntaxError("Invalid left-hand side in assignment");const n=t.left.name,s=de.evalAst(t.right,e);return e[n]=s,e[n]}};class Rv{constructor(e){this.code=e,this.ast=Qt(this.code)}runInNewContext(e){const n=Object.assign(Object.create(null),e);return de.evalAst(this.ast,n)}}function on(t,e){return t=t.slice(),t.push(e),t}function Oo(t,e){return e=e.slice(),e.unshift(t),e}class $v extends Error{constructor(e){super('JSONPath should not be called with "new" (it prevents return of (unwrapped) scalar values)'),this.avoidNew=!0,this.value=e,this.name="NewError"}}function oe(t,e,n,s,r){if(!(this instanceof oe))try{return new oe(t,e,n,s,r)}catch(o){if(!o.avoidNew)throw o;return o.value}typeof t=="string"&&(r=s,s=n,n=e,e=t,t=null);const i=t&&typeof t=="object";if(t=t||{},this.json=t.json||n,this.path=t.path||e,this.resultType=t.resultType||"value",this.flatten=t.flatten||!1,this.wrap=Object.hasOwn(t,"wrap")?t.wrap:!0,this.sandbox=t.sandbox||{},this.eval=t.eval===void 0?"safe":t.eval,this.ignoreEvalErrors=typeof t.ignoreEvalErrors>"u"?!1:t.ignoreEvalErrors,this.parent=t.parent||null,this.parentProperty=t.parentProperty||null,this.callback=t.callback||s||null,this.otherTypeCallback=t.otherTypeCallback||r||function(){throw new TypeError("You must supply an otherTypeCallback callback option with the @other() operator.")},t.autostart!==!1){const o={path:i?t.path:e};i?"json"in t&&(o.json=t.json):o.json=n;const a=this.evaluate(o);if(!a||typeof a!="object")throw new $v(a);return a}}oe.prototype.evaluate=function(t,e,n,s){let r=this.parent,i=this.parentProperty,{flatten:o,wrap:a}=this;if(this.currResultType=this.resultType,this.currEval=this.eval,this.currSandbox=this.sandbox,n=n||this.callback,this.currOtherTypeCallback=s||this.otherTypeCallback,e=e||this.json,t=t||this.path,t&&typeof t=="object"&&!Array.isArray(t)){if(!t.path&&t.path!=="")throw new TypeError('You must supply a "path" property when providing an object argument to JSONPath.evaluate().');if(!Object.hasOwn(t,"json"))throw new TypeError('You must supply a "json" property when providing an object argument to JSONPath.evaluate().');({json:e}=t),o=Object.hasOwn(t,"flatten")?t.flatten:o,this.currResultType=Object.hasOwn(t,"resultType")?t.resultType:this.currResultType,this.currSandbox=Object.hasOwn(t,"sandbox")?t.sandbox:this.currSandbox,a=Object.hasOwn(t,"wrap")?t.wrap:a,this.currEval=Object.hasOwn(t,"eval")?t.eval:this.currEval,n=Object.hasOwn(t,"callback")?t.callback:n,this.currOtherTypeCallback=Object.hasOwn(t,"otherTypeCallback")?t.otherTypeCallback:this.currOtherTypeCallback,r=Object.hasOwn(t,"parent")?t.parent:r,i=Object.hasOwn(t,"parentProperty")?t.parentProperty:i,t=t.path}if(r=r||null,i=i||null,Array.isArray(t)&&(t=oe.toPathString(t)),!t&&t!==""||!e)return;const l=oe.toPathArray(t);l[0]==="$"&&l.length>1&&l.shift(),this._hasParentSelector=null;const c=this._trace(l,e,["$"],r,i,n).filter(function(u){return u&&!u.isParentSelector});return c.length?!a&&c.length===1&&!c[0].hasArrExpr?this._getPreferredOutput(c[0]):c.reduce((u,f)=>{const d=this._getPreferredOutput(f);return o&&Array.isArray(d)?u=u.concat(d):u.push(d),u},[]):a?[]:void 0};oe.prototype._getPreferredOutput=function(t){const e=this.currResultType;switch(e){case"all":{const n=Array.isArray(t.path)?t.path:oe.toPathArray(t.path);return t.pointer=oe.toPointer(n),t.path=typeof t.path=="string"?t.path:oe.toPathString(t.path),t}case"value":case"parent":case"parentProperty":return t[e];case"path":return oe.toPathString(t[e]);case"pointer":return oe.toPointer(t.path);default:throw new TypeError("Unknown result type")}};oe.prototype._handleCallback=function(t,e,n){if(e){const s=this._getPreferredOutput(t);t.path=typeof t.path=="string"?t.path:oe.toPathString(t.path),e(s,n,t)}};oe.prototype._trace=function(t,e,n,s,r,i,o,a){let l;if(!t.length)return l={path:n,value:e,parent:s,parentProperty:r,hasArrExpr:o},this._handleCallback(l,i,"value"),l;const c=t[0],u=t.slice(1),f=[];function d(p){Array.isArray(p)?p.forEach(g=>{f.push(g)}):f.push(p)}if((typeof c!="string"||a)&&e&&Object.hasOwn(e,c))d(this._trace(u,e[c],on(n,c),e,c,i,o));else if(c==="*")this._walk(e,p=>{d(this._trace(u,e[p],on(n,p),e,p,i,!0,!0))});else if(c==="..")d(this._trace(u,e,n,s,r,i,o)),this._walk(e,p=>{typeof e[p]=="object"&&d(this._trace(t.slice(),e[p],on(n,p),e,p,i,!0))});else{if(c==="^")return this._hasParentSelector=!0,{path:n.slice(0,-1),expr:u,isParentSelector:!0};if(c==="~")return l={path:on(n,c),value:r,parent:s,parentProperty:null},this._handleCallback(l,i,"property"),l;if(c==="$")d(this._trace(u,e,n,null,null,i,o));else if(/^(-?\d*):(-?\d*):?(\d*)$/u.test(c))d(this._slice(c,u,e,n,s,r,i));else if(c.indexOf("?(")===0){if(this.currEval===!1)throw new Error("Eval [?(expr)] prevented in JSONPath expression.");const p=c.replace(/^\?\((.*?)\)$/u,"$1"),g=/@.?([^?]*)[['](\??\(.*?\))(?!.\)\])[\]']/gu.exec(p);g?this._walk(e,m=>{const b=[g[2]],y=g[1]?e[m][g[1]]:e[m];this._trace(b,y,n,s,r,i,!0).length>0&&d(this._trace(u,e[m],on(n,m),e,m,i,!0))}):this._walk(e,m=>{this._eval(p,e[m],m,n,s,r)&&d(this._trace(u,e[m],on(n,m),e,m,i,!0))})}else if(c[0]==="("){if(this.currEval===!1)throw new Error("Eval [(expr)] prevented in JSONPath expression.");d(this._trace(Oo(this._eval(c,e,n.at(-1),n.slice(0,-1),s,r),u),e,n,s,r,i,o))}else if(c[0]==="@"){let p=!1;const g=c.slice(1,-2);switch(g){case"scalar":(!e||!["object","function"].includes(typeof e))&&(p=!0);break;case"boolean":case"string":case"undefined":case"function":typeof e===g&&(p=!0);break;case"integer":Number.isFinite(e)&&!(e%1)&&(p=!0);break;case"number":Number.isFinite(e)&&(p=!0);break;case"nonFinite":typeof e=="number"&&!Number.isFinite(e)&&(p=!0);break;case"object":e&&typeof e===g&&(p=!0);break;case"array":Array.isArray(e)&&(p=!0);break;case"other":p=this.currOtherTypeCallback(e,n,s,r);break;case"null":e===null&&(p=!0);break;default:throw new TypeError("Unknown value type "+g)}if(p)return l={path:n,value:e,parent:s,parentProperty:r},this._handleCallback(l,i,"value"),l}else if(c[0]==="`"&&e&&Object.hasOwn(e,c.slice(1))){const p=c.slice(1);d(this._trace(u,e[p],on(n,p),e,p,i,o,!0))}else if(c.includes(",")){const p=c.split(",");for(const g of p)d(this._trace(Oo(g,u),e,n,s,r,i,!0))}else!a&&e&&Object.hasOwn(e,c)&&d(this._trace(u,e[c],on(n,c),e,c,i,o,!0))}if(this._hasParentSelector)for(let p=0;p<f.length;p++){const g=f[p];if(g&&g.isParentSelector){const m=this._trace(g.expr,e,g.path,s,r,i,o);if(Array.isArray(m)){f[p]=m[0];const b=m.length;for(let y=1;y<b;y++)p++,f.splice(p,0,m[y])}else f[p]=m}}return f};oe.prototype._walk=function(t,e){if(Array.isArray(t)){const n=t.length;for(let s=0;s<n;s++)e(s)}else t&&typeof t=="object"&&Object.keys(t).forEach(n=>{e(n)})};oe.prototype._slice=function(t,e,n,s,r,i,o){if(!Array.isArray(n))return;const a=n.length,l=t.split(":"),c=l[2]&&Number.parseInt(l[2])||1;let u=l[0]&&Number.parseInt(l[0])||0,f=l[1]&&Number.parseInt(l[1])||a;u=u<0?Math.max(0,u+a):Math.min(a,u),f=f<0?Math.max(0,f+a):Math.min(a,f);const d=[];for(let p=u;p<f;p+=c)this._trace(Oo(p,e),n,s,r,i,o,!0).forEach(m=>{d.push(m)});return d};oe.prototype._eval=function(t,e,n,s,r,i){this.currSandbox._$_parentProperty=i,this.currSandbox._$_parent=r,this.currSandbox._$_property=n,this.currSandbox._$_root=this.json,this.currSandbox._$_v=e;const o=t.includes("@path");o&&(this.currSandbox._$_path=oe.toPathString(s.concat([n])));const a=this.currEval+"Script:"+t;if(!oe.cache[a]){let l=t.replaceAll("@parentProperty","_$_parentProperty").replaceAll("@parent","_$_parent").replaceAll("@property","_$_property").replaceAll("@root","_$_root").replaceAll(/@([.\s)[])/gu,"_$_v$1");if(o&&(l=l.replaceAll("@path","_$_path")),this.currEval==="safe"||this.currEval===!0||this.currEval===void 0)oe.cache[a]=new this.safeVm.Script(l);else if(this.currEval==="native")oe.cache[a]=new this.vm.Script(l);else if(typeof this.currEval=="function"&&this.currEval.prototype&&Object.hasOwn(this.currEval.prototype,"runInNewContext")){const c=this.currEval;oe.cache[a]=new c(l)}else if(typeof this.currEval=="function")oe.cache[a]={runInNewContext:c=>this.currEval(l,c)};else throw new TypeError(`Unknown "eval" property "${this.currEval}"`)}try{return oe.cache[a].runInNewContext(this.currSandbox)}catch(l){if(this.ignoreEvalErrors)return!1;throw new Error("jsonPath: "+l.message+": "+t)}};oe.cache={};oe.toPathString=function(t){const e=t,n=e.length;let s="$";for(let r=1;r<n;r++)/^(~|\^|@.*?\(\))$/u.test(e[r])||(s+=/^[0-9*]+$/u.test(e[r])?"["+e[r]+"]":"['"+e[r]+"']");return s};oe.toPointer=function(t){const e=t,n=e.length;let s="";for(let r=1;r<n;r++)/^(~|\^|@.*?\(\))$/u.test(e[r])||(s+="/"+e[r].toString().replaceAll("~","~0").replaceAll("/","~1"));return s};oe.toPathArray=function(t){const{cache:e}=oe;if(e[t])return e[t].concat();const n=[],r=t.replaceAll(/@(?:null|boolean|number|string|integer|undefined|nonFinite|scalar|array|object|function|other)\(\)/gu,";$&;").replaceAll(/[['](\??\(.*?\))[\]'](?!.\])/gu,function(i,o){return"[#"+(n.push(o)-1)+"]"}).replaceAll(/\[['"]([^'\]]*)['"]\]/gu,function(i,o){return"['"+o.replaceAll(".","%@%").replaceAll("~","%%@@%%")+"']"}).replaceAll("~",";~;").replaceAll(/['"]?\.['"]?(?![^[]*\])|\[['"]?/gu,";").replaceAll("%@%",".").replaceAll("%%@@%%","~").replaceAll(/(?:;)?(\^+)(?:;)?/gu,function(i,o){return";"+o.split("").join(";")+";"}).replaceAll(/;;;|;;/gu,";..;").replaceAll(/;$|'?\]|'$/gu,"").split(";").map(function(i){const o=i.match(/#(\d+)/u);return!o||!o[1]?i:n[o[1]]});return e[t]=r,e[t].concat()};oe.prototype.safeVm={Script:Rv};const zv=function(t,e,n){const s=t.length;for(let r=0;r<s;r++){const i=t[r];n(i)&&e.push(t.splice(r--,1)[0])}};class Dv{constructor(e){this.code=e}runInNewContext(e){let n=this.code;const s=Object.keys(e),r=[];zv(s,r,c=>typeof e[c]=="function");const i=s.map(c=>e[c]);n=r.reduce((c,u)=>{let f=e[u].toString();return/function/u.test(f)||(f="function "+f),"var "+u+"="+f+";"+c},"")+n,!/(['"])use strict\1/u.test(n)&&!s.includes("arguments")&&(n="var arguments = undefined;"+n),n=n.replace(/;\s*$/u,"");const a=n.lastIndexOf(";"),l=a!==-1?n.slice(0,a+1)+" return "+n.slice(a+1):" return "+n;return new Function(...s,l)(...i)}}oe.prototype.vm={Script:Dv};const Lv="/tc-animator/assets/blockbench-settings-G7FDEJl4.png";function Fv(){const t=D.c(32),{modelIds:e,selectedObjectPath:n,cart:s,modelFiles:r,setModelFile:i}=yt();let o;e:{if(!n||!s){let N;t[0]===Symbol.for("react.memo_cache_sentinel")?(N=[],t[0]=N):N=t[0],o=N;break e}let w;if(t[1]!==s||t[2]!==n){const N=oe({path:n,json:s,resultType:"value"});if(N.length===0){let C;t[5]===Symbol.for("react.memo_cache_sentinel")?(C=[],t[5]=C):C=t[5],o=C;break e}const O=N[0];if(!O||typeof O!="object"){let C;t[6]===Symbol.for("react.memo_cache_sentinel")?(C=[],t[6]=C):C=t[6],o=C;break e}w=new Set;const A=function(M){if(!M)return;const P=M["minecraft:custom_model_data"];if(P&&typeof P=="object"&&"floats"in P){const R=P.floats;Array.isArray(R)&&R.forEach($=>w.add($))}};if("item"in O){const C=O.item;A(C?.components)}t[1]=s,t[2]=n,t[3]=w,t[4]=o}else w=t[3],o=t[4];let S;t[7]!==w?(S=Array.from(w),t[7]=w,t[8]=S):S=t[8],o=S}const a=o;let l;t[9]!==i?(l=async w=>{try{const S=await Fo({mimeTypes:["model/gltf+json","model/gltf-binary"],extensions:[".gltf",".glb"],multiple:!1,description:"3D Model (GLTF/GLB)",id:"tca-models"}),N=await S.arrayBuffer();let O=N;if(S.name.toLowerCase().endsWith(".gltf"))try{const A=await zc(N);O=uc(A.buffer)}catch(A){console.error("Failed to convert GLTF to GLB:",A),alert("Failed to convert GLTF to GLB. See console for details.")}i(w,O)}catch(S){const N=S;N.name!=="AbortError"&&(console.error("Error loading model file:",N),alert("Error loading model file. See console for details."))}},t[9]=i,t[10]=l):l=t[10];const c=l;let u,f;t[11]===Symbol.for("react.memo_cache_sentinel")?(u=h.jsx("br",{}),f=h.jsx("br",{}),t[11]=u,t[12]=f):(u=t[11],f=t[12]);let d;t[13]===Symbol.for("react.memo_cache_sentinel")?(d=h.jsx("b",{children:"GLTF"}),t[13]=d):d=t[13];let p;t[14]===Symbol.for("react.memo_cache_sentinel")?(p=h.jsx("b",{children:"GLB"}),t[14]=p):p=t[14];let g;t[15]===Symbol.for("react.memo_cache_sentinel")?(g=h.jsx(dn,{className:"mx-1 cursor-help font-bold underline underline-offset-2",children:"Blockbench"}),t[15]=g):g=t[15];let m;t[16]===Symbol.for("react.memo_cache_sentinel")?(m=h.jsxs(hn,{children:[g,h.jsxs(pn,{children:[h.jsx("p",{className:"mb-2 text-lg",children:"Use these settings when exporting from Blockbench:"}),h.jsx("img",{src:Lv,alt:"Blockbench export settings"})]})]}),t[16]=m):m=t[16];let b,y;t[17]===Symbol.for("react.memo_cache_sentinel")?(b=h.jsx("br",{}),y=h.jsx("br",{}),t[17]=b,t[18]=y):(b=t[17],y=t[18]);let k,x,_;t[19]===Symbol.for("react.memo_cache_sentinel")?(k=h.jsxs("p",{className:"mb-4 text-balance",children:["You can replace the default cubes with your own 3D models to make the cart look like it would *in-game with a resourcepack.",u,f,"Models must be in ",d," or ",p," format. These can be exported from",m,"or most 3D software.",b,y,"Below, you'll see each ",h.jsx("b",{children:"Custom Model ID"})," for your attachments. Select an attachment in the 3D view to highlight the corresponding ID if it has one. Upload your model next to the matching ID to apply it in TC Animator."]}),x=h.jsx("p",{className:"text-xs text-muted-foreground text-balance",children:"* Models are shown just like Item Display Entities in Minecraft. Any automatic scaling based on display mode is not applied here."}),_=h.jsx("hr",{className:"my-4"}),t[19]=k,t[20]=x,t[21]=_):(k=t[19],x=t[20],_=t[21]);let E;t[22]!==e.length?(E=e.length===0&&h.jsx("p",{className:"text-muted-foreground text-sm",children:"No custom models required for this cart."}),t[22]=e.length,t[23]=E):E=t[23];let T;t[24]!==c||t[25]!==r||t[26]!==e||t[27]!==a?(T=e.length>0&&h.jsxs(Ru,{children:[h.jsx($u,{children:h.jsxs(ri,{children:[h.jsx(ln,{children:"Custom Model ID"}),h.jsx(ln,{children:"Upload Model"})]})}),h.jsx(zu,{children:e.map(w=>h.jsxs(ri,{children:[h.jsx(cn,{className:a.includes(w)?"font-bold text-primary":"",children:w}),h.jsx(cn,{children:h.jsx(Fe,{variant:"secondary",size:"sm",onClick:()=>c(w),children:r.get(w)?"Change Model":"Upload Model"})})]},w))})]}),t[24]=c,t[25]=r,t[26]=e,t[27]=a,t[28]=T):T=t[28];let v;return t[29]!==E||t[30]!==T?(v=h.jsxs("div",{className:"overflow-y-auto",children:[k,x,_,h.jsxs(Wl,{FallbackComponent:Pu,children:[E,T]})]}),t[29]=E,t[30]=T,t[31]=v):v=t[31],v}function Bv(){const t=D.c(13),e=yt();let n,s,r;t[0]===Symbol.for("react.memo_cache_sentinel")?(n=h.jsx("h2",{className:"text-lg font-medium",children:"Guidelines"}),s=h.jsx("p",{className:"text-balance text-sm",children:"Guidelines allow you to add references grids to the 3D view to help with positioning and scaling models. You can add guidelines for different planes (XY, XZ, YZ) and adjust their spacing and color."}),r=h.jsx(ql,{className:"my-2"}),t[0]=n,t[1]=s,t[2]=r):(n=t[0],s=t[1],r=t[2]);let i;t[3]===Symbol.for("react.memo_cache_sentinel")?(i=h.jsx($u,{children:h.jsxs(ri,{children:[h.jsx(ln,{children:"Plane"}),h.jsx(ln,{children:"Position"}),h.jsx(ln,{children:"Cell Size"}),h.jsx(ln,{children:"Section Size"}),h.jsx(ln,{children:"Cell Color"}),h.jsx(ln,{className:"text-right",children:"Actions"})]})}),t[3]=i):i=t[3];let o;t[4]!==e?(o=e.metadata.guidelines.map((u,f)=>h.jsxs(ri,{children:[h.jsx(cn,{children:h.jsxs(Wr,{onValueChange:d=>{(d==="XY"||d==="XZ"||d==="YZ")&&e.updateGuideline(f,{plane:d})},value:u.plane,children:[h.jsx(Gr,{className:"w-full mt-0",children:h.jsx(Yr,{placeholder:"XZ"})}),h.jsxs(qr,{children:[h.jsx(Dn,{value:"XY",children:"XY"}),h.jsx(Dn,{value:"XZ",children:"XZ"}),h.jsx(Dn,{value:"YZ",children:"YZ"})]})]})}),h.jsx(cn,{children:`[${u.position.map(Uv).join(", ")}]`}),h.jsx(cn,{children:u.cellSize.toFixed(4)}),h.jsx(cn,{children:u.sectionSize.toFixed(4)}),h.jsx(cn,{children:h.jsx(pc,{defaultColor:u.cellColor,onChangeComplete:d=>e.updateGuideline(f,{cellColor:d})})}),h.jsxs(cn,{className:"text-right gap-2 flex justify-end",children:[h.jsx(Fe,{title:"Delete Guideline",size:"icon",variant:"destructive",onClick:()=>e.removeGuideline(f),children:h.jsx(Kf,{})}),h.jsx(Fe,{title:"Toggle Visibility",size:"icon",variant:"secondary",onClick:()=>e.updateGuideline(f,{visible:!u.visible}),children:u.visible?h.jsx(Xf,{}):h.jsx(Qf,{})})]})]},f)),t[4]=e,t[5]=o):o=t[5];let a;t[6]!==o?(a=h.jsxs(Ru,{className:"w-full h-full",children:[i,h.jsx(zu,{children:o})]}),t[6]=o,t[7]=a):a=t[7];let l;t[8]!==e?(l=h.jsx(Fe,{onClick:()=>e.addGuideline({plane:"XZ",position:[.5,0,.5],cellSize:.0625,sectionSize:1,cellColor:"#ff0000",visible:!0}),children:"Add Guideline"}),t[8]=e,t[9]=l):l=t[9];let c;return t[10]!==a||t[11]!==l?(c=h.jsxs("div",{className:"h-full w-full overflow-auto",children:[n,s,r,a,l]}),t[10]=a,t[11]=l,t[12]=c):c=t[12],c}function Uv(t){return t.toFixed(2)}function Zv(){const t=D.c(3);let e,n;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=h.jsx(is,{className:"px-4 pb-2",children:h.jsx("div",{className:"h-full w-full overflow-auto",children:h.jsx("h2",{className:"text-lg font-medium",children:"Object Controls (to be implemented)"})})}),n=h.jsx(so,{}),t[0]=e,t[1]=n):(e=t[0],n=t[1]);let s;return t[2]===Symbol.for("react.memo_cache_sentinel")?(s=h.jsxs(no,{direction:"vertical",autoSaveId:"tca-object-controls",autoSave:"true",children:[e,n,h.jsx(is,{className:"px-4 py-2",children:h.jsx(Bv,{})})]}),t[2]=s):s=t[2],s}function gl(t){const e=D.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=U("bg-accent animate-pulse rounded-md",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx("div",{"data-slot":"skeleton",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}const yl=z.lazy(()=>yd(()=>import("./monaco-CbMVoGlP.js"),__vite__mapDeps([0,1,2])));function Vv(){const t=yt(),e=z.useMemo(()=>({...t,cart:void 0,modelFiles:void 0,fileHandle:void 0}),[t]);return h.jsxs(Sv,{defaultValue:"object-controls",className:"-mt-4 h-full w-full overflow-auto",children:[h.jsxs(Ev,{className:"w-full rounded-none",children:[h.jsx(kr,{value:"object-controls",children:"Object Controls"}),h.jsx(kr,{value:"custom-models",children:"Custom Models"}),h.jsx(kr,{value:"cart-debug",children:"Cart Debug"}),h.jsx(kr,{value:"project-debug",children:"Project Debug"})]}),h.jsx(Tr,{value:"object-controls",className:"overflow-auto",children:h.jsx(Zv,{})}),h.jsx(Tr,{value:"custom-models",className:"px-4 overflow-auto",children:h.jsx(Fv,{})}),h.jsx(Tr,{value:"cart-debug",className:"overflow-auto",children:h.jsx(z.Suspense,{fallback:h.jsx(gl,{className:"h-full w-full"}),children:h.jsx(yl,{language:"json",theme:"vs-dark",value:JSON.stringify(t.cart,null,2),options:{minimap:{enabled:!0},scrollbar:{alwaysConsumeMouseWheel:!1},wordWrap:"on",automaticLayout:!0},onChange:n=>{if(n)try{const s=JSON.parse(n);t.setCart(s)}catch(s){console.error("Failed to parse JSON:",s)}}})})}),h.jsx(Tr,{value:"project-debug",className:"overflow-auto",children:h.jsxs(z.Suspense,{fallback:h.jsx(gl,{className:"h-full w-full"}),children:[h.jsx(Fe,{className:"mb-2 block w-full",onClick:()=>t.logState(),children:"Log State to Console"}),h.jsx(yl,{language:"json",theme:"vs-dark",value:JSON.stringify(e,null,2),options:{minimap:{enabled:!1},scrollbar:{alwaysConsumeMouseWheel:!1},wordWrap:"off",automaticLayout:!0,readOnly:!0}})]})})]})}let Fr=[],Br=[];function Wv(t){return Fr.push(t),()=>{Fr=Fr.filter(e=>e!==t)}}function Yv(t){return Br.push(t),()=>{Br=Br.filter(e=>e!==t)}}function Gv(){const t=D.c(3),e=z.useRef(0);let n;t[0]===Symbol.for("react.memo_cache_sentinel")?(n=performance.now(),t[0]=n):n=t[0];const s=z.useRef(n),{gl:r}=li();let i;return t[1]!==r?(i=()=>{e.current=e.current+1;const o=performance.now(),a=o-s.current;if(a>500){const l=Math.round(e.current*1e3/a);e.current=0,s.current=o,Fr.forEach(u=>u(l));const c=r.info;Br.forEach(u=>u(c.render))}},t[1]=r,t[2]=i):i=t[2],$o(i),null}function qv(t){const e=D.c(24),{position:n}=t,s=n===void 0?"top-right":n,r=sr(),[i,o]=z.useState(0);let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a={calls:0,frame:0,lines:0,points:0,triangles:0},e[0]=a):a=e[0];const[l,c]=z.useState(a);let u,f;e[1]===Symbol.for("react.memo_cache_sentinel")?(u=()=>Wv(o),f=[],e[1]=u,e[2]=f):(u=e[1],f=e[2]),z.useEffect(u,f);let d,p;e[3]===Symbol.for("react.memo_cache_sentinel")?(d=()=>Yv(c),p=[],e[3]=d,e[4]=p):(d=e[3],p=e[4]),z.useEffect(d,p);const g=s.includes("top")?8:void 0,m=s.includes("bottom")?8:void 0,b=s.includes("left")?8:void 0,y=s.includes("right")?8:void 0;let k;e[5]!==y||e[6]!==g||e[7]!==m||e[8]!==b?(k={top:g,bottom:m,left:b,right:y},e[5]=y,e[6]=g,e[7]=m,e[8]=b,e[9]=k):k=e[9];const x=k;let _;e[10]!==x?(_={...x},e[10]=x,e[11]=_):_=e[11];let E;e[12]!==i?(E=h.jsxs("p",{children:[i," FPS"]}),e[12]=i,e[13]=E):E=e[13];let T;e[14]!==r.DOFEnabled||e[15]!==r.SSAOEnabled||e[16]!==r.controlDamping||e[17]!==r.debugText||e[18]!==l?(T=r.debugText&&h.jsxs(h.Fragment,{children:[h.jsx("hr",{className:"border-border my-1 border-t"}),h.jsxs("p",{children:["Draw Calls: ",l.calls]}),h.jsxs("p",{children:["Frame: ",l.frame]}),h.jsxs("p",{children:["Triangles: ",l.triangles]}),h.jsxs("p",{children:["Lines: ",l.lines]}),h.jsxs("p",{children:["Points: ",l.points]}),h.jsx("hr",{className:"border-border my-1 border-t"}),h.jsxs("p",{children:["Debug Text: ",r.debugText?"On":"Off"]}),h.jsxs("p",{children:["SSAO: ",r.SSAOEnabled?"On":"Off"]}),h.jsxs("p",{children:["Depth of Field: ",r.DOFEnabled?"On":"Off"]}),h.jsxs("p",{children:["Control Damping:"," ",r.controlDamping?"On":"Off"]})]}),e[14]=r.DOFEnabled,e[15]=r.SSAOEnabled,e[16]=r.controlDamping,e[17]=r.debugText,e[18]=l,e[19]=T):T=e[19];let v;return e[20]!==_||e[21]!==E||e[22]!==T?(v=h.jsxs("div",{className:"text-muted-foreground pointer-events-none absolute z-10 text-right font-mono text-sm",style:_,children:[E,T]}),e[20]=_,e[21]=E,e[22]=T,e[23]=v):v=e[23],v}const Hv="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAAAXNSR0IArs4c6QAAAHpJREFUOI21kjEKACEMBNdD/IGV/39abMwL0uSKgIiCyRVnETFsMrJsUlWEDxFlu0opIuJWZn4ABNUiAiADuChaawDGGNYB4BDs6yvhuRNsYJ3/n5DXd611c9khbPt8wtw33YwSps5x6dSdhKSq8Sz13r9niYiYOZ7wF+cqCUwV0Ir/AAAAAElFTkSuQmCC",Nr=[],Kv=5;function Xv(){const t=Math.floor(Math.random()*360),e=70+Math.random()*10,n=80+Math.random()*10;return`hsl(${t}, ${e}%, ${n}%)`}function Qv(){let t="",e=0;do t=Xv(),e++;while(Nr.includes(t)&&e<10);return Nr.push(t),Nr.length>Kv&&Nr.shift(),t}const Zs=z.forwardRef((t,e)=>{const n=D.c(13),s=bd(Hv);let r,i;n[0]!==s?(i=s.clone(),i.magFilter=xa,i.minFilter=xa,n[0]=s,n[1]=i):i=n[1],r=i;const o=r;let a,l;n[2]===Symbol.for("react.memo_cache_sentinel")?(l=Qv(),n[2]=l):l=n[2],a=l;const c=a;let u;if(n[3]!==t.position){const m=new Ie(0,.5,0);u=(t.position instanceof Ie?t.position:Array.isArray(t.position)?new Ie(...t.position):new Ie(0,0,0)).clone().add(m),n[3]=t.position,n[4]=u}else u=n[4];const f=u;let d;n[5]===Symbol.for("react.memo_cache_sentinel")?(d=h.jsx("boxGeometry",{args:[1,1,1]}),n[5]=d):d=n[5];let p;n[6]!==o?(p=h.jsx("meshStandardMaterial",{map:o,color:c}),n[6]=o,n[7]=p):p=n[7];let g;return n[8]!==f||n[9]!==t||n[10]!==e||n[11]!==p?(g=h.jsxs("mesh",{ref:e,...t,castShadow:!0,receiveShadow:!0,position:f,children:[d,p]}),n[8]=f,n[9]=t,n[10]=e,n[11]=p,n[12]=g):g=n[12],g});function Du({jsonPath:t}){const{cart:e,modelFiles:n}=yt(),s=z.useMemo(()=>{if(!t||!e)return[];const r=oe({path:t,json:e,resultType:"value"});if(r.length===0)return[];const i=r[0];if(!i||typeof i!="object")return[];const o=new Set;function a(l){if(!l)return;const c=l["minecraft:custom_model_data"];if(c&&typeof c=="object"&&"floats"in c){const u=c.floats;Array.isArray(u)&&u.forEach(f=>o.add(f))}}if("item"in i){const l=i.item;a(l?.components)}return Array.from(o)},[t,e]);return s.length===0?h.jsx(h.Fragment,{children:h.jsx(Zs,{})}):h.jsx(h.Fragment,{children:s.map(r=>{if(!n)return h.jsx(Zs,{},r);const i=n.get(r);return!i||!i.url?h.jsx(Zs,{},r):h.jsx(Jv,{modelId:r,blobUrl:i.url},r)})})}function Jv({modelId:t,blobUrl:e,scale:n=1,position:s=new Ie(0,0,0)}){const{scene:r}=zo(e),i=z.useMemo(()=>{if(!r)return null;const o=r.clone(!0);o.updateWorldMatrix(!0,!0);const a=new Id().copy(o.matrixWorld).invert();o.traverse(c=>c.applyMatrix4(a)),o.position.set(-.5,-.5,-.5),o.rotation.set(0,0,0),o.scale.set(1,1,1);const l=new Md;return l.add(o),l.scale.setScalar(1),l},[r]);return i?h.jsx("group",{scale:n,position:s,children:h.jsx("primitive",{object:i,rotation:[0,Ht(180),0],castShadow:!0,receiveShadow:!0})}):h.jsx(Zs,{},t)}const Lu="/tc-animator/assets/dummy-DcMSIvyN.glb";zo.preload(Lu);function ew({scale:t=1,position:e=new Ie(0,0,0)}){const{scene:n}=zo(Lu),s=z.useMemo(()=>n?Pd(n):null,[n]);return s?h.jsx("primitive",{object:s,scale:t,position:e,castShadow:!0,receiveShadow:!0}):h.jsx(Zs,{})}function bl(t){const e=D.c(14),n=z.useRef(null),{camera:s}=li();let r;e[0]!==s?(r=()=>{if(!n.current)return;const m=n.current.getWorldPosition(new Ie),b=s.position.clone();b.y=m.y;const y=b.sub(m).normalize();let k=Math.atan2(y.x,y.z);if(n.current.parent){const x=new nc;n.current.parent.getWorldQuaternion(x);const E=new Do().setFromQuaternion(x,"YXZ").y;k=k-E+Math.PI}else k=k+Math.PI;n.current.rotation.set(0,k+Ht(180),0)},e[0]=s,e[1]=r):r=e[1],$o(r);let i;e[2]===Symbol.for("react.memo_cache_sentinel")?(i=[.3,.3,.3],e[2]=i):i=e[2];let o,a=0,l=0,c=-.1;const u=t.position;Array.isArray(u)&&u.length===3?(a=u[0]??0,l=u[1]??0,c=(u[2]??0)-.1):u&&typeof u=="object"&&"x"in u&&"y"in u&&"z"in u?(a=u.x??0,l=u.y??0,c=(u.z??0)-.1):typeof u=="number"&&(a=u);let f;e[3]!==a||e[4]!==l||e[5]!==c?(f=new Ie(a,l,c),e[3]=a,e[4]=l,e[5]=c,e[6]=f):f=e[6],o=f;let d;e[7]!==o?(d=h.jsx(wd,{castShadow:!0,receiveShadow:!0,args:i,position:o}),e[7]=o,e[8]=d):d=e[8];let p;e[9]!==t?(p=h.jsx(vd,{ref:n,...t,renderOrder:9999,children:t.children}),e[9]=t,e[10]=p):p=e[10];let g;return e[11]!==d||e[12]!==p?(g=h.jsxs(h.Fragment,{children:[d,p]}),e[11]=d,e[12]=p,e[13]=g):g=e[13],g}function tw(t){const e=D.c(33),{onSelect:n,onHover:s}=t,{cart:r,setSelectedObjectPath:i}=yt(),o=z.useRef(null);if(!r?.model)return null;const{position:a}=r.model,l=a?.posX||0,c=a?.posY||0,u=a?.posZ||0;let f;e[0]!==l||e[1]!==c||e[2]!==u?(f=new Ie(l,c,u),e[0]=l,e[1]=c,e[2]=u,e[3]=f):f=e[3];const d=f,p=a?.rotX||0;let g;e[4]!==a?.rotY||e[5]!==a?.rotZ||e[6]!==p?(g=new Do(Ht(p),Ht(a?.rotY||0),Ht(a?.rotZ||0)),e[4]=a?.rotY,e[5]=a?.rotZ,e[6]=p,e[7]=g):g=e[7];const m=g,b=a?.sizeX||1,y=a?.sizeY||1,k=a?.sizeZ||1;let x;e[8]!==b||e[9]!==y||e[10]!==k?(x=new Ie(b,y,k),e[8]=b,e[9]=y,e[10]=k,e[11]=x):x=e[11];const _=x;let E,T;e[12]!==s?(E=A=>{A.stopPropagation(),o.current&&s(o.current)},T=A=>{A.stopPropagation(),s(null)},e[12]=s,e[13]=E,e[14]=T):(E=e[13],T=e[14]);let v;e[15]!==n||e[16]!==i?(v=A=>{A.stopPropagation(),o.current&&(n(o.current),i("$.model"))},e[15]=n,e[16]=i,e[17]=v):v=e[17];let w;e[18]===Symbol.for("react.memo_cache_sentinel")?(w=h.jsx(Du,{jsonPath:"$.model"}),e[18]=w):w=e[18];let S;e[19]!==_?(S=h.jsx("group",{scale:_,children:w}),e[19]=_,e[20]=S):S=e[20];let N;e[21]!==r.model||e[22]!==s||e[23]!==n?(N=h.jsx(Fu,{attachments:r.model,onSelect:n,onHover:s,jsonPath:"$.model"}),e[21]=r.model,e[22]=s,e[23]=n,e[24]=N):N=e[24];let O;return e[25]!==d||e[26]!==m||e[27]!==E||e[28]!==T||e[29]!==v||e[30]!==S||e[31]!==N?(O=h.jsxs("group",{ref:o,position:d,rotation:m,onPointerOver:E,onPointerOut:T,onClick:v,children:[S,N]}),e[25]=d,e[26]=m,e[27]=E,e[28]=T,e[29]=v,e[30]=S,e[31]=N,e[32]=O):O=e[32],O}function Fu({attachments:t,onSelect:e,onHover:n,jsonPath:s}){return Object.entries(t.attachments||{}).map(([r,i])=>h.jsx(nw,{attachment:i,onSelect:e,onHover:n,jsonPath:`${s}.attachments.${r}`},r))}function nw(t){const e=D.c(61),{attachment:n,onSelect:s,onHover:r,jsonPath:i}=t,o=sr(),{setSelectedObjectPath:a}=yt(),l=z.useRef(null),c=n.position?.posX||0,u=n.position?.posY||0,f=n.position?.posZ||0;let d,p,g,m,b,y,k,x;if(e[0]!==n.names||e[1]!==n.position?.rotX||e[2]!==n.position?.rotY||e[3]!==n.position?.rotZ||e[4]!==n.position?.sizeX||e[5]!==n.position?.sizeY||e[6]!==n.position?.sizeZ||e[7]!==n.type||e[8]!==i||e[9]!==r||e[10]!==s||e[11]!==o.debugText||e[12]!==a||e[13]!==c||e[14]!==u||e[15]!==f){const T=new Ie(c,u,f),v=new Do(Ht(n.position?.rotX||0),Ht(n.position?.rotY||0),Ht(n.position?.rotZ||0)),w=n.position?.sizeX||1,S=n.position?.sizeY||1,N=n.position?.sizeZ||1;let O;e[24]!==w||e[25]!==S||e[26]!==N?(O=new Ie(w,S,N),e[24]=w,e[25]=S,e[26]=N,e[27]=O):O=e[27];const A=O;g=l,m=T,b=v,e[28]!==n.type||e[29]!==r?(y=M=>{l.current&&!["SEAT","HITBOX"].includes(n.type)&&(M.stopPropagation(),r(l.current))},e[28]=n.type,e[29]=r,e[30]=y):y=e[30],e[31]!==r?(k=M=>{M.stopPropagation(),r(null)},e[31]=r,e[32]=k):k=e[32],e[33]!==n.type||e[34]!==i||e[35]!==s||e[36]!==a?(x=M=>{l.current&&!["SEAT","HITBOX"].includes(n.type)&&(M.stopPropagation(),s(l.current),a(i))},e[33]=n.type,e[34]=i,e[35]=s,e[36]=a,e[37]=x):x=e[37];let C;e:switch(n.type){case"SEAT":{const M=o.debugText&&h.jsx(bl,{fontSize:.3,color:"white",anchorX:"center",anchorY:"middle",outlineWidth:.05,outlineColor:"black",position:[0,3.5,0],children:`${n.names&&Array.isArray(n.names)&&n.names.length>0?n.names[0]:"Seat"}
Pos:${T.toArray().map(aw)}`});let P;e[38]===Symbol.for("react.memo_cache_sentinel")?(P=h.jsx(ew,{}),e[38]=P):P=e[38];let R;e[39]!==M?(R=h.jsxs(h.Fragment,{children:[M,P]}),e[39]=M,e[40]=R):R=e[40],C=R;break e}case"HITBOX":{C=null;break e}default:{let M;e[41]!==i?(M=h.jsx(Du,{jsonPath:i}),e[41]=i,e[42]=M):M=e[42],C=M}}e[43]!==A||e[44]!==C?(d=h.jsx("group",{scale:A,children:C}),e[43]=A,e[44]=C,e[45]=d):d=e[45],p=o.debugText&&!["SEAT","HITBOX"].includes(n.type)&&h.jsx(bl,{position:[0,1.5,0],fontSize:.3,color:"yellow",anchorX:"center",anchorY:"middle",scale:[1,1,1],outlineWidth:.05,outlineColor:"black",children:`${n.names&&Array.isArray(n.names)&&n.names.length>0?n.names[0]:""}
Pos:${T.toArray().map(ow)}
rot:${v.toArray().filter(iw).map(rw)}
scale:${A.toArray().map(sw)}`}),e[0]=n.names,e[1]=n.position?.rotX,e[2]=n.position?.rotY,e[3]=n.position?.rotZ,e[4]=n.position?.sizeX,e[5]=n.position?.sizeY,e[6]=n.position?.sizeZ,e[7]=n.type,e[8]=i,e[9]=r,e[10]=s,e[11]=o.debugText,e[12]=a,e[13]=c,e[14]=u,e[15]=f,e[16]=d,e[17]=p,e[18]=g,e[19]=m,e[20]=b,e[21]=y,e[22]=k,e[23]=x}else d=e[16],p=e[17],g=e[18],m=e[19],b=e[20],y=e[21],k=e[22],x=e[23];let _;e[46]!==n||e[47]!==i||e[48]!==r||e[49]!==s?(_=n.attachments&&h.jsx(Fu,{attachments:n,onSelect:s,onHover:r,jsonPath:`${i}`}),e[46]=n,e[47]=i,e[48]=r,e[49]=s,e[50]=_):_=e[50];let E;return e[51]!==d||e[52]!==p||e[53]!==_||e[54]!==g||e[55]!==m||e[56]!==b||e[57]!==y||e[58]!==k||e[59]!==x?(E=h.jsxs("group",{ref:g,position:m,rotation:b,onPointerOver:y,onPointerOut:k,onClick:x,children:[d,p,_]}),e[51]=d,e[52]=p,e[53]=_,e[54]=g,e[55]=m,e[56]=b,e[57]=y,e[58]=k,e[59]=x,e[60]=E):E=e[60],E}function sw(t){return t.toFixed(2)}function rw(t){return t.toFixed(2)}function iw(t){return typeof t=="number"}function ow(t){return t.toFixed(2)}function aw(t){return`
${t.toFixed(2)}`}function vl(t){const e=D.c(13),{selection:n,color:s,scaleFactor:r}=t,i=s===void 0?16753920:s,o=r===void 0?1.05:r,{scene:a}=li(),l=z.useRef(null);let c;e:{if(!n){let m;e[0]===Symbol.for("react.memo_cache_sentinel")?(m=new Ie(1,1,1),e[0]=m):m=e[0],c=m;break e}let g;if(e[1]!==o||e[2]!==n){const m=n.clone(!0);m.rotation.set(0,0,0),m.updateWorldMatrix(!0,!0),g=new Xi().setFromObject(m).getSize(new Ie).multiplyScalar(o),m.remove(),e[1]=o,e[2]=n,e[3]=g}else g=e[3];c=g}const u=c;let f,d;e[4]!==u||e[5]!==i||e[6]!==a||e[7]!==n?(f=()=>{if(n){if(!l.current){const g=new _a(new Sa(u.x,u.y,u.z)),m=new Rd({color:i});l.current=new $d(g,m),a.add(l.current)}return()=>{l.current&&(a.remove(l.current),l.current.geometry.dispose(),l.current=null)}}},d=[n,a,i,u],e[4]=u,e[5]=i,e[6]=a,e[7]=n,e[8]=f,e[9]=d):(f=e[8],d=e[9]),z.useEffect(f,d);let p;return e[10]!==u||e[11]!==n?(p=()=>{if(!l.current||!n)return;const g=new Xi().setFromObject(n).getCenter(new Ie);l.current.geometry.dispose(),l.current.geometry=new _a(new Sa(u.x,u.y,u.z)),l.current.position.copy(g),l.current.quaternion.copy(n.getWorldQuaternion(new nc))},e[10]=u,e[11]=n,e[12]=p):p=e[12],$o(p),null}function Bu(t){const e=D.c(26);let n,s,r,i,o,a;e[0]!==t?({className:n,defaultValue:s,value:a,min:i,max:o,...r}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r,e[4]=i,e[5]=o,e[6]=a):(n=e[1],s=e[2],r=e[3],i=e[4],o=e[5],a=e[6]);const l=i===void 0?0:i,c=o===void 0?100:o;let u,f;e[7]!==s||e[8]!==c||e[9]!==l||e[10]!==a?(f=Array.isArray(a)?a:Array.isArray(s)?s:[l,c],e[7]=s,e[8]=c,e[9]=l,e[10]=a,e[11]=f):f=e[11],u=f;const d=u;let p;e[12]!==n?(p=U("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",n),e[12]=n,e[13]=p):p=e[13];let g;e[14]===Symbol.for("react.memo_cache_sentinel")?(g=U("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),e[14]=g):g=e[14];let m;e[15]===Symbol.for("react.memo_cache_sentinel")?(m=h.jsx(Xl,{"data-slot":"slider-track",className:g,children:h.jsx(Ql,{"data-slot":"slider-range",className:U("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),e[15]=m):m=e[15];let b;e[16]!==d.length?(b=Array.from({length:d.length},lw),e[16]=d.length,e[17]=b):b=e[17];let y;return e[18]!==s||e[19]!==c||e[20]!==l||e[21]!==r||e[22]!==p||e[23]!==b||e[24]!==a?(y=h.jsxs(Kl,{"data-slot":"slider",defaultValue:s,value:a,min:l,max:c,className:p,...r,children:[m,b]}),e[18]=s,e[19]=c,e[20]=l,e[21]=r,e[22]=p,e[23]=b,e[24]=a,e[25]=y):y=e[25],y}function lw(t,e){return h.jsx(Jl,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},e)}function cw(t){const e=D.c(17),{value:n,onChange:s}=t,r=n===void 0?0:n;let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=[0,1,5,11.25,15,22.5,30,45],e[0]=i):i=e[0];const o=i,[a,l]=z.useState(r||0);let c;e[1]!==s?(c=_=>{l(_),s(_)},e[1]=s,e[2]=c):c=e[2];const u=c;let f;e[3]===Symbol.for("react.memo_cache_sentinel")?(f=_=>o.reduce((E,T)=>Math.abs(T-_)<Math.abs(E-_)?T:E),e[3]=f):f=e[3];const d=f;let p;e[4]===Symbol.for("react.memo_cache_sentinel")?(p={minWidth:"5ch"},e[4]=p):p=e[4];const g=a>0?`${a}`:"Off";let m;e[5]!==g?(m=h.jsxs(ft,{className:"flex items-center gap-1 font-semibold whitespace-nowrap",children:["Angle Snap:",h.jsx("span",{className:"inline-block",style:p,children:g})]}),e[5]=g,e[6]=m):m=e[6];let b;e[7]!==a?(b=[a],e[7]=a,e[8]=b):b=e[8];let y;e[9]!==u?(y=_=>{const E=d(_[0]);u(E)},e[9]=u,e[10]=y):y=e[10];let k;e[11]!==b||e[12]!==y?(k=h.jsx(Bu,{min:0,max:45,step:.1,value:b,onValueChange:y,className:"w-full"}),e[11]=b,e[12]=y,e[13]=k):k=e[13];let x;return e[14]!==k||e[15]!==m?(x=h.jsxs("div",{className:"flex w-sm flex-row items-center gap-2",children:[m,k]}),e[14]=k,e[15]=m,e[16]=x):x=e[16],x}function uw(t){const e=D.c(17),{value:n,onChange:s}=t,r=n===void 0?0:n;let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=[0,.03125,.0625,.125,.25,.5,1],e[0]=i):i=e[0];const o=i,[a,l]=z.useState(r||0);let c;e[1]!==s?(c=_=>{l(_),s(_)},e[1]=s,e[2]=c):c=e[2];const u=c;let f;e[3]===Symbol.for("react.memo_cache_sentinel")?(f=_=>o.reduce((E,T)=>Math.abs(T-_)<Math.abs(E-_)?T:E),e[3]=f):f=e[3];const d=f;let p;e[4]===Symbol.for("react.memo_cache_sentinel")?(p={minWidth:"5ch"},e[4]=p):p=e[4];const g=a>0?`${Hd(a)}`:"Off";let m;e[5]!==g?(m=h.jsxs(ft,{className:"flex items-center gap-1 font-semibold whitespace-nowrap",children:["Distance Snap:",h.jsx("span",{className:"inline-block",style:p,children:g})]}),e[5]=g,e[6]=m):m=e[6];let b;e[7]!==a?(b=[a],e[7]=a,e[8]=b):b=e[8];let y;e[9]!==u?(y=_=>{const E=d(_[0]);u(E)},e[9]=u,e[10]=y):y=e[10];let k;e[11]!==b||e[12]!==y?(k=h.jsx(Bu,{min:0,max:1,step:.01,value:b,onValueChange:y,className:"w-full"}),e[11]=b,e[12]=y,e[13]=k):k=e[13];let x;return e[14]!==k||e[15]!==m?(x=h.jsxs("div",{className:"flex w-sm flex-row items-center gap-2",children:[m,k]}),e[14]=k,e[15]=m,e[16]=x):x=e[16],x}const fw=Lo("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium hover:bg-muted hover:text-muted-foreground disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] outline-none transition-[color,box-shadow] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive whitespace-nowrap",{variants:{variant:{default:"bg-card",outline:"border border-input bg-card shadow-xs hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-2 min-w-9",sm:"h-8 px-1.5 min-w-8",lg:"h-10 px-2.5 min-w-10"}},defaultVariants:{variant:"default",size:"default"}});function wl(t){const e=D.c(12);let n,s,r,i;e[0]!==t?({className:n,variant:i,size:r,...s}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r,e[4]=i):(n=e[1],s=e[2],r=e[3],i=e[4]);let o;e[5]!==n||e[6]!==r||e[7]!==i?(o=U(fw({variant:i,size:r,className:n})),e[5]=n,e[6]=r,e[7]=i,e[8]=o):o=e[8];let a;return e[9]!==s||e[10]!==o?(a=h.jsx(td,{"data-slot":"toggle",className:o,...s}),e[9]=s,e[10]=o,e[11]=a):a=e[11],a}function hw({controlsRef:t}){const e=yt(),{camera:n}=li();return z.useEffect(()=>{const s=t.current,r=e.metadata.orbitControls;!s||!r||(n.position.copy(new Ie(...r.position)),s.target.copy(new Ie(...r.target)),r.zoom&&"zoom"in n&&(n.zoom=r.zoom,n.updateProjectionMatrix()),s.update())},[e.metadata.orbitControls,n,t]),z.useEffect(()=>{const s=t.current;if(!s)return;const r=ec.debounce(()=>{e.setMetadata({...e.metadata,orbitControls:{position:n.position.toArray(),target:s.target.toArray(),zoom:n.zoom}})},200);return s.addEventListener("change",r),()=>s.removeEventListener("change",r)},[n,e,t]),null}function dw(){const t=D.c(117),e=sr(),n=yt(),s=z.useRef(null),[r,i]=z.useState(null),[o,a]=z.useState(null),[l,c]=z.useState("translate"),[u,f]=z.useState("world");let d,p;t[0]!==n||t[1]!==r||t[2]!==u?(d=()=>{const lt=Ve=>{if(!(Ve.target&&Ve.target.isContentEditable))if(Ve.key==="v"||Ve.key==="V")c("translate");else if(Ve.key==="r"||Ve.key==="R")c("rotate");else if(Ve.key==="x"||Ve.key==="X")f(u==="world"?"local":"world");else if(Ve.key==="f"||Ve.key==="F"){if(r){const qn=new Xi().setFromObject(r),tn=qn.getSize(new Ie).length(),nn=qn.getCenter(new Ie),Hn=tn*1.5,zt=s.current?.object;if(zt){const sn=new Ie().subVectors(zt.position,nn).normalize().multiplyScalar(Hn);zt.position.copy(sn.add(nn)),s.current?.target.copy(nn),s.current?.update()}}}else Ve.key==="Escape"&&(n.setSelectedObjectPath(void 0),i(null))};return window.addEventListener("keydown",lt),()=>{window.removeEventListener("keydown",lt)}},p=[u,n,r],t[0]=n,t[1]=r,t[2]=u,t[3]=d,t[4]=p):(d=t[3],p=t[4]),z.useEffect(d,p);let g,m;if(t[5]!==n.cart||t[6]!==r?(g=()=>{r&&(n.cart||i(null))},m=[n.cart,r],t[5]=n.cart,t[6]=r,t[7]=g,t[8]=m):(g=t[7],m=t[8]),z.useEffect(g,m),!n.cart){let lt;return t[9]===Symbol.for("react.memo_cache_sentinel")?(lt=h.jsx("div",{className:"flex h-full w-full items-center justify-center bg-black",children:h.jsx("p",{className:"text-muted-foreground",children:"No cart selected. Please create or open a project."})}),t[9]=lt):lt=t[9],lt}let b;t[10]===Symbol.for("react.memo_cache_sentinel")?(b=h.jsx(kd,{},"smaa"),t[10]=b):b=t[10];let y;t[11]!==e.SSAOEnabled?(y=e.SSAOEnabled&&h.jsx(xd,{},"ssao"),t[11]=e.SSAOEnabled,t[12]=y):y=t[12];let k;t[13]!==e.DOFEnabled?(k=e.DOFEnabled&&h.jsx(_d,{focusDistance:2,focalLength:5,bokehScale:2},"dof"),t[13]=e.DOFEnabled,t[14]=k):k=t[14];let x;t[15]!==y||t[16]!==k?(x=[b,y,k].filter(Boolean),t[15]=y,t[16]=k,t[17]=x):x=t[17];const _=x,E=`three-bg ${o?"cursor-pointer":"cursor-default"}`;let T;t[18]===Symbol.for("react.memo_cache_sentinel")?(T={position:[3,3,3],fov:45},t[18]=T):T=t[18];let v,w;t[19]===Symbol.for("react.memo_cache_sentinel")?(v=[1,2],w={toneMapping:0,powerPreference:"high-performance",alpha:!1,antialias:!0,stencil:!1,autoClear:!1,depth:!0},t[19]=v,t[20]=w):(v=t[19],w=t[20]);let S;t[21]!==n?(S=lt=>{lt.type==="click"&&(n.setSelectedObjectPath(void 0),i(null))},t[21]=n,t[22]=S):S=t[22];let N;t[23]!==_?(N=h.jsx(Td,{enabled:!0,enableNormalPass:!0,depthBuffer:!0,stencilBuffer:!0,children:_}),t[23]=_,t[24]=N):N=t[24];let O,A,C,M;t[25]===Symbol.for("react.memo_cache_sentinel")?(O=h.jsx(Gv,{}),A=h.jsx(Nd,{all:!0}),C=h.jsx("ambientLight",{intensity:2}),M=h.jsx("directionalLight",{position:[5,5,5],intensity:3,castShadow:!0}),t[25]=O,t[26]=A,t[27]=C,t[28]=M):(O=t[25],A=t[26],C=t[27],M=t[28]);let P;t[29]===Symbol.for("react.memo_cache_sentinel")?(P=[.5,0,.5],t[29]=P):P=t[29];const R=e.gridColor;let $;t[30]!==e?($=e.getComplementaryGridColor(),t[30]=e,t[31]=$):$=t[31];let F;t[32]!==e.gridColor||t[33]!==$?(F=h.jsx(tc,{position:P,cellSize:.0625,sectionSize:1,cellThickness:.5,sectionThickness:1.5,cellColor:R,sectionColor:$,infiniteGrid:!0,side:sc}),t[32]=e.gridColor,t[33]=$,t[34]=F):F=t[34];let L;t[35]===Symbol.for("react.memo_cache_sentinel")?(L=[-.5,0,-.5],t[35]=L):L=t[35];let W;t[36]===Symbol.for("react.memo_cache_sentinel")?(W=h.jsxs("line",{children:[h.jsx("bufferGeometry",{children:h.jsx("bufferAttribute",{attach:"attributes-position",args:[new Float32Array([0,0,0,1,0,0]),3],count:2,itemSize:3})}),h.jsx("lineBasicMaterial",{color:16711680,linewidth:2})]}),t[36]=W):W=t[36];let K;t[37]===Symbol.for("react.memo_cache_sentinel")?(K=h.jsxs("line",{children:[h.jsx("bufferGeometry",{children:h.jsx("bufferAttribute",{attach:"attributes-position",args:[new Float32Array([0,0,0,0,1,0]),3],count:2,itemSize:3})}),h.jsx("lineBasicMaterial",{color:65280,linewidth:2})]}),t[37]=K):K=t[37];let ne;t[38]===Symbol.for("react.memo_cache_sentinel")?(ne=h.jsxs("line",{children:[h.jsx("bufferGeometry",{children:h.jsx("bufferAttribute",{attach:"attributes-position",args:[new Float32Array([0,0,0,0,0,1]),3],count:2,itemSize:3})}),h.jsx("lineBasicMaterial",{color:255,linewidth:2})]}),t[38]=ne):ne=t[38];let Y;t[39]!==W||t[40]!==K||t[41]!==ne?(Y=h.jsxs("group",{position:L,children:[W,K,ne]}),t[39]=W,t[40]=K,t[41]=ne,t[42]=Y):Y=t[42];let te;t[43]!==n.metadata.guidelines?(te=n.metadata.guidelines?.map(pw),t[43]=n.metadata.guidelines,t[44]=te):te=t[44];let q;t[45]===Symbol.for("react.memo_cache_sentinel")?(q=h.jsx(z.Suspense,{fallback:h.jsx(Od,{center:!0,children:"Loading..."}),children:h.jsx(tw,{onSelect:i,onHover:a})}),t[45]=q):q=t[45];let ie;t[46]!==e.angleSnap||t[47]!==e.distanceSnap||t[48]!==r||t[49]!==l||t[50]!==u?(ie=r&&h.jsx(Sd,{object:r,mode:l,rotationSnap:Ht(e.angleSnap),translationSnap:e.distanceSnap,onMouseDown:()=>s.current.enabled=!1,onMouseUp:()=>s.current.enabled=!0,space:u}),t[46]=e.angleSnap,t[47]=e.distanceSnap,t[48]=r,t[49]=l,t[50]=u,t[51]=ie):ie=t[51];let $e;t[52]!==e.controlDamping?($e=h.jsx(Ed,{ref:s,makeDefault:!0,enableDamping:e.controlDamping}),t[52]=e.controlDamping,t[53]=$e):$e=t[53];let Be;t[54]===Symbol.for("react.memo_cache_sentinel")?(Be=[80,80],t[54]=Be):Be=t[54];let Je,tt;t[55]===Symbol.for("react.memo_cache_sentinel")?(Je=h.jsx(Ad,{alignment:"bottom-right",margin:Be,children:h.jsx(Cd,{axisColors:["#9d4b4b","#2f7f4f","#3b5b9d"],labelColor:"white"})}),tt=h.jsx(hw,{controlsRef:s}),t[55]=Je,t[56]=tt):(Je=t[55],tt=t[56]);let Ue;t[57]!==o?(Ue=o&&h.jsx(vl,{selection:o,color:16753920,scaleFactor:1.1}),t[57]=o,t[58]=Ue):Ue=t[58];let Me;t[59]!==r?(Me=r&&h.jsx(vl,{selection:r,color:65535,scaleFactor:1.1}),t[59]=r,t[60]=Me):Me=t[60];let je;t[61]!==S||t[62]!==N||t[63]!==F||t[64]!==Y||t[65]!==te||t[66]!==ie||t[67]!==$e||t[68]!==Ue||t[69]!==Me||t[70]!==E?(je=h.jsxs(jd,{className:E,camera:T,shadows:!0,dpr:v,gl:w,onPointerMissed:S,children:[N,O,A,C,M,F,Y,te,q,ie,$e,Je,tt,Ue,Me]}),t[61]=S,t[62]=N,t[63]=F,t[64]=Y,t[65]=te,t[66]=ie,t[67]=$e,t[68]=Ue,t[69]=Me,t[70]=E,t[71]=je):je=t[71];let Ze;t[72]===Symbol.for("react.memo_cache_sentinel")?(Ze=h.jsx(qv,{}),t[72]=Ze):Ze=t[72];let bt;t[73]!==u?(bt=()=>{f(u==="world"?"local":"world")},t[73]=u,t[74]=bt):bt=t[74];let nt;t[75]!==u?(nt=h.jsx(dn,{children:u==="world"?h.jsx(Jf,{}):h.jsx(eh,{})}),t[75]=u,t[76]=nt):nt=t[76];let st;t[77]!==bt||t[78]!==nt?(st=h.jsx(Fe,{variant:"secondary",size:"icon",asChild:!0,onClick:bt,children:nt}),t[77]=bt,t[78]=nt,t[79]=st):st=t[79];const Jt=u==="world"?"World Space":"Local Space";let vt;t[80]===Symbol.for("react.memo_cache_sentinel")?(vt=h.jsx("kbd",{className:"text-muted-foreground ml-1",children:"X"}),t[80]=vt):vt=t[80];let wt;t[81]!==Jt?(wt=h.jsxs(pn,{children:[Jt,vt]}),t[81]=Jt,t[82]=wt):wt=t[82];let rt;t[83]!==st||t[84]!==wt?(rt=h.jsxs(hn,{children:[st,wt]}),t[83]=st,t[84]=wt,t[85]=rt):rt=t[85];const en=l==="translate";let Vt;t[86]===Symbol.for("react.memo_cache_sentinel")?(Vt=()=>c("translate"),t[86]=Vt):Vt=t[86];let xt;t[87]===Symbol.for("react.memo_cache_sentinel")?(xt=h.jsx(dn,{children:h.jsx(th,{})}),t[87]=xt):xt=t[87];let It;t[88]!==en?(It=h.jsx(wl,{pressed:en,onClick:Vt,asChild:!0,children:xt}),t[88]=en,t[89]=It):It=t[89];let _t;t[90]===Symbol.for("react.memo_cache_sentinel")?(_t=h.jsxs(pn,{children:["Translate Mode",h.jsx("kbd",{className:"text-muted-foreground ml-1",children:"V"})]}),t[90]=_t):_t=t[90];let Mt;t[91]!==It?(Mt=h.jsxs(hn,{children:[It,_t]}),t[91]=It,t[92]=Mt):Mt=t[92];const Pt=l==="rotate";let St;t[93]===Symbol.for("react.memo_cache_sentinel")?(St=()=>c("rotate"),t[93]=St):St=t[93];let Wt;t[94]===Symbol.for("react.memo_cache_sentinel")?(Wt=h.jsx(dn,{children:h.jsx(nh,{})}),t[94]=Wt):Wt=t[94];let Rt;t[95]!==Pt?(Rt=h.jsx(wl,{pressed:Pt,onClick:St,asChild:!0,children:Wt}),t[95]=Pt,t[96]=Rt):Rt=t[96];let Et;t[97]===Symbol.for("react.memo_cache_sentinel")?(Et=h.jsxs(pn,{children:["Rotate Mode",h.jsx("kbd",{className:"text-muted-foreground ml-1",children:"R"})]}),t[97]=Et):Et=t[97];let $t;t[98]!==Rt?($t=h.jsxs(hn,{children:[Rt,Et]}),t[98]=Rt,t[99]=$t):$t=t[99];let it;t[100]!==e.distanceSnap||t[101]!==e.setDistanceSnap||t[102]!==l?(it=l==="translate"&&h.jsx(uw,{value:e.distanceSnap,onChange:e.setDistanceSnap}),t[100]=e.distanceSnap,t[101]=e.setDistanceSnap,t[102]=l,t[103]=it):it=t[103];let ot;t[104]!==e.angleSnap||t[105]!==e.setAngleSnap||t[106]!==l?(ot=l==="rotate"&&h.jsx(cw,{value:e.angleSnap,onChange:e.setAngleSnap}),t[104]=e.angleSnap,t[105]=e.setAngleSnap,t[106]=l,t[107]=ot):ot=t[107];let at;t[108]!==rt||t[109]!==Mt||t[110]!==$t||t[111]!==it||t[112]!==ot?(at=h.jsxs("div",{className:"absolute top-[8px] left-[8px] flex flex-row gap-[8px]",children:[rt,Mt,$t,it,ot]}),t[108]=rt,t[109]=Mt,t[110]=$t,t[111]=it,t[112]=ot,t[113]=at):at=t[113];let kt;return t[114]!==je||t[115]!==at?(kt=h.jsxs("div",{className:"relative h-full w-full",children:[je,Ze,at]}),t[114]=je,t[115]=at,t[116]=kt):kt=t[116],kt}function pw(t,e){return t.visible&&h.jsx(tc,{position:t.position,cellSize:t.cellSize,sectionSize:t.sectionSize,cellThickness:.5,sectionThickness:1.5,cellColor:t.cellColor,sectionColor:cc(t.cellColor,.5),infiniteGrid:!0,side:sc,rotation:Kd(t.plane)},e)}function mw(t){const e=D.c(13),{keyframe:n,trackId:s,zoom:r,onUpdate:i}=t,o=z.useRef(null),a=z.useRef(n.time*r);let l;e[0]!==n.id||e[1]!==n.time||e[2]!==i||e[3]!==s||e[4]!==r?(l=g=>{const{movement:m,first:b,last:y}=g,[k]=m;b&&(a.current=n.time*r);let x=a.current+k;if(x=Math.max(0,x),o.current&&(o.current.style.transform=`translateX(${x-n.time*r}px)`),y){const _=Math.round(x/r*10)/10;i(s,n.id,_),o.current&&(o.current.style.transform="translateX(0px)")}return a.current},e[0]=n.id,e[1]=n.time,e[2]=i,e[3]=s,e[4]=r,e[5]=l):l=e[5];const c=Lf(l);let u;e[6]!==c?(u=c(),e[6]=c,e[7]=u):u=e[7];const f=`${n.time*r}px`;let d;e[8]!==f?(d={transition:"transform 0.02s ease",left:f},e[8]=f,e[9]=d):d=e[9];let p;return e[10]!==u||e[11]!==d?(p=h.jsx("div",{ref:o,...u,className:"absolute top-1/2 w-4 h-4 bg-blue-500 rounded cursor-grab -translate-y-1/2",style:d}),e[10]=u,e[11]=d,e[12]=p):p=e[12],p}const Uu=6048e5,gw=864e5,xl=Symbol.for("constructDateFrom");function Nn(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&xl in t?t[xl](e):t instanceof Date?new t.constructor(e):new Date(e)}function Ct(t,e){return Nn(e||t,t)}let yw={};function vi(){return yw}function Js(t,e){const n=vi(),s=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,r=Ct(t,e?.in),i=r.getDay(),o=(i<s?7:0)+i-s;return r.setDate(r.getDate()-o),r.setHours(0,0,0,0),r}function ii(t,e){return Js(t,{...e,weekStartsOn:1})}function Zu(t,e){const n=Ct(t,e?.in),s=n.getFullYear(),r=Nn(n,0);r.setFullYear(s+1,0,4),r.setHours(0,0,0,0);const i=ii(r),o=Nn(n,0);o.setFullYear(s,0,4),o.setHours(0,0,0,0);const a=ii(o);return n.getTime()>=i.getTime()?s+1:n.getTime()>=a.getTime()?s:s-1}function _l(t){const e=Ct(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function bw(t,...e){const n=Nn.bind(null,e.find(s=>typeof s=="object"));return e.map(n)}function Sl(t,e){const n=Ct(t,e?.in);return n.setHours(0,0,0,0),n}function vw(t,e,n){const[s,r]=bw(n?.in,t,e),i=Sl(s),o=Sl(r),a=+i-_l(i),l=+o-_l(o);return Math.round((a-l)/gw)}function ww(t,e){const n=Zu(t,e),s=Nn(t,0);return s.setFullYear(n,0,4),s.setHours(0,0,0,0),ii(s)}function xw(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function _w(t){return!(!xw(t)&&typeof t!="number"||isNaN(+Ct(t)))}function Sw(t,e){const n=Ct(t,e?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const Ew={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},kw=(t,e,n)=>{let s;const r=Ew[t];return typeof r=="string"?s=r:e===1?s=r.one:s=r.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+s:s+" ago":s};function Zi(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const Tw={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Nw={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Ow={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Aw={date:Zi({formats:Tw,defaultWidth:"full"}),time:Zi({formats:Nw,defaultWidth:"full"}),dateTime:Zi({formats:Ow,defaultWidth:"full"})},Cw={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},jw=(t,e,n,s)=>Cw[t];function Ps(t){return(e,n)=>{const s=n?.context?String(n.context):"standalone";let r;if(s==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n?.width?String(n.width):o;r=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n?.width?String(n.width):t.defaultWidth;r=t.values[a]||t.values[o]}const i=t.argumentCallback?t.argumentCallback(e):e;return r[i]}}const Iw={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Mw={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Pw={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Rw={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},$w={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},zw={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Dw=(t,e)=>{const n=Number(t),s=n%100;if(s>20||s<10)switch(s%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Lw={ordinalNumber:Dw,era:Ps({values:Iw,defaultWidth:"wide"}),quarter:Ps({values:Mw,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Ps({values:Pw,defaultWidth:"wide"}),day:Ps({values:Rw,defaultWidth:"wide"}),dayPeriod:Ps({values:$w,defaultWidth:"wide",formattingValues:zw,defaultFormattingWidth:"wide"})};function Rs(t){return(e,n={})=>{const s=n.width,r=s&&t.matchPatterns[s]||t.matchPatterns[t.defaultMatchWidth],i=e.match(r);if(!i)return null;const o=i[0],a=s&&t.parsePatterns[s]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?Bw(a,f=>f.test(o)):Fw(a,f=>f.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const u=e.slice(o.length);return{value:c,rest:u}}}function Fw(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function Bw(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function Uw(t){return(e,n={})=>{const s=e.match(t.matchPattern);if(!s)return null;const r=s[0],i=e.match(t.parsePattern);if(!i)return null;let o=t.valueCallback?t.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(r.length);return{value:o,rest:a}}}const Zw=/^(\d+)(th|st|nd|rd)?/i,Vw=/\d+/i,Ww={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Yw={any:[/^b/i,/^(a|c)/i]},Gw={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},qw={any:[/1/i,/2/i,/3/i,/4/i]},Hw={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Kw={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Xw={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Qw={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Jw={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},e2={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},t2={ordinalNumber:Uw({matchPattern:Zw,parsePattern:Vw,valueCallback:t=>parseInt(t,10)}),era:Rs({matchPatterns:Ww,defaultMatchWidth:"wide",parsePatterns:Yw,defaultParseWidth:"any"}),quarter:Rs({matchPatterns:Gw,defaultMatchWidth:"wide",parsePatterns:qw,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Rs({matchPatterns:Hw,defaultMatchWidth:"wide",parsePatterns:Kw,defaultParseWidth:"any"}),day:Rs({matchPatterns:Xw,defaultMatchWidth:"wide",parsePatterns:Qw,defaultParseWidth:"any"}),dayPeriod:Rs({matchPatterns:Jw,defaultMatchWidth:"any",parsePatterns:e2,defaultParseWidth:"any"})},n2={code:"en-US",formatDistance:kw,formatLong:Aw,formatRelative:jw,localize:Lw,match:t2,options:{weekStartsOn:0,firstWeekContainsDate:1}};function s2(t,e){const n=Ct(t,e?.in);return vw(n,Sw(n))+1}function r2(t,e){const n=Ct(t,e?.in),s=+ii(n)-+ww(n);return Math.round(s/Uu)+1}function Vu(t,e){const n=Ct(t,e?.in),s=n.getFullYear(),r=vi(),i=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,o=Nn(e?.in||t,0);o.setFullYear(s+1,0,i),o.setHours(0,0,0,0);const a=Js(o,e),l=Nn(e?.in||t,0);l.setFullYear(s,0,i),l.setHours(0,0,0,0);const c=Js(l,e);return+n>=+a?s+1:+n>=+c?s:s-1}function i2(t,e){const n=vi(),s=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,r=Vu(t,e),i=Nn(e?.in||t,0);return i.setFullYear(r,0,s),i.setHours(0,0,0,0),Js(i,e)}function o2(t,e){const n=Ct(t,e?.in),s=+Js(n,e)-+i2(n,e);return Math.round(s/Uu)+1}function he(t,e){const n=t<0?"-":"",s=Math.abs(t).toString().padStart(e,"0");return n+s}const an={y(t,e){const n=t.getFullYear(),s=n>0?n:1-n;return he(e==="yy"?s%100:s,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):he(n+1,2)},d(t,e){return he(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return n==="am"?"a.m.":"p.m."}},h(t,e){return he(t.getHours()%12||12,e.length)},H(t,e){return he(t.getHours(),e.length)},m(t,e){return he(t.getMinutes(),e.length)},s(t,e){return he(t.getSeconds(),e.length)},S(t,e){const n=e.length,s=t.getMilliseconds(),r=Math.trunc(s*Math.pow(10,n-3));return he(r,e.length)}},ts={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},El={G:function(t,e,n){const s=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(s,{width:"abbreviated"});case"GGGGG":return n.era(s,{width:"narrow"});default:return n.era(s,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const s=t.getFullYear(),r=s>0?s:1-s;return n.ordinalNumber(r,{unit:"year"})}return an.y(t,e)},Y:function(t,e,n,s){const r=Vu(t,s),i=r>0?r:1-r;if(e==="YY"){const o=i%100;return he(o,2)}return e==="Yo"?n.ordinalNumber(i,{unit:"year"}):he(i,e.length)},R:function(t,e){const n=Zu(t);return he(n,e.length)},u:function(t,e){const n=t.getFullYear();return he(n,e.length)},Q:function(t,e,n){const s=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(s);case"QQ":return he(s,2);case"Qo":return n.ordinalNumber(s,{unit:"quarter"});case"QQQ":return n.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(s,{width:"narrow",context:"formatting"});default:return n.quarter(s,{width:"wide",context:"formatting"})}},q:function(t,e,n){const s=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(s);case"qq":return he(s,2);case"qo":return n.ordinalNumber(s,{unit:"quarter"});case"qqq":return n.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(s,{width:"narrow",context:"standalone"});default:return n.quarter(s,{width:"wide",context:"standalone"})}},M:function(t,e,n){const s=t.getMonth();switch(e){case"M":case"MM":return an.M(t,e);case"Mo":return n.ordinalNumber(s+1,{unit:"month"});case"MMM":return n.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(s,{width:"narrow",context:"formatting"});default:return n.month(s,{width:"wide",context:"formatting"})}},L:function(t,e,n){const s=t.getMonth();switch(e){case"L":return String(s+1);case"LL":return he(s+1,2);case"Lo":return n.ordinalNumber(s+1,{unit:"month"});case"LLL":return n.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(s,{width:"narrow",context:"standalone"});default:return n.month(s,{width:"wide",context:"standalone"})}},w:function(t,e,n,s){const r=o2(t,s);return e==="wo"?n.ordinalNumber(r,{unit:"week"}):he(r,e.length)},I:function(t,e,n){const s=r2(t);return e==="Io"?n.ordinalNumber(s,{unit:"week"}):he(s,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):an.d(t,e)},D:function(t,e,n){const s=s2(t);return e==="Do"?n.ordinalNumber(s,{unit:"dayOfYear"}):he(s,e.length)},E:function(t,e,n){const s=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(s,{width:"short",context:"formatting"});default:return n.day(s,{width:"wide",context:"formatting"})}},e:function(t,e,n,s){const r=t.getDay(),i=(r-s.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return he(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},c:function(t,e,n,s){const r=t.getDay(),i=(r-s.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return he(i,e.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(r,{width:"narrow",context:"standalone"});case"cccccc":return n.day(r,{width:"short",context:"standalone"});default:return n.day(r,{width:"wide",context:"standalone"})}},i:function(t,e,n){const s=t.getDay(),r=s===0?7:s;switch(e){case"i":return String(r);case"ii":return he(r,e.length);case"io":return n.ordinalNumber(r,{unit:"day"});case"iii":return n.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(s,{width:"short",context:"formatting"});default:return n.day(s,{width:"wide",context:"formatting"})}},a:function(t,e,n){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(t,e,n){const s=t.getHours();let r;switch(s===12?r=ts.noon:s===0?r=ts.midnight:r=s/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(t,e,n){const s=t.getHours();let r;switch(s>=17?r=ts.evening:s>=12?r=ts.afternoon:s>=4?r=ts.morning:r=ts.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let s=t.getHours()%12;return s===0&&(s=12),n.ordinalNumber(s,{unit:"hour"})}return an.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):an.H(t,e)},K:function(t,e,n){const s=t.getHours()%12;return e==="Ko"?n.ordinalNumber(s,{unit:"hour"}):he(s,e.length)},k:function(t,e,n){let s=t.getHours();return s===0&&(s=24),e==="ko"?n.ordinalNumber(s,{unit:"hour"}):he(s,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):an.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):an.s(t,e)},S:function(t,e){return an.S(t,e)},X:function(t,e,n){const s=t.getTimezoneOffset();if(s===0)return"Z";switch(e){case"X":return Tl(s);case"XXXX":case"XX":return Cn(s);default:return Cn(s,":")}},x:function(t,e,n){const s=t.getTimezoneOffset();switch(e){case"x":return Tl(s);case"xxxx":case"xx":return Cn(s);default:return Cn(s,":")}},O:function(t,e,n){const s=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+kl(s,":");default:return"GMT"+Cn(s,":")}},z:function(t,e,n){const s=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+kl(s,":");default:return"GMT"+Cn(s,":")}},t:function(t,e,n){const s=Math.trunc(+t/1e3);return he(s,e.length)},T:function(t,e,n){return he(+t,e.length)}};function kl(t,e=""){const n=t>0?"-":"+",s=Math.abs(t),r=Math.trunc(s/60),i=s%60;return i===0?n+String(r):n+String(r)+e+he(i,2)}function Tl(t,e){return t%60===0?(t>0?"-":"+")+he(Math.abs(t)/60,2):Cn(t,e)}function Cn(t,e=""){const n=t>0?"-":"+",s=Math.abs(t),r=he(Math.trunc(s/60),2),i=he(s%60,2);return n+r+e+i}const Nl=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});default:return e.date({width:"full"})}},Wu=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});default:return e.time({width:"full"})}},a2=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],s=n[1],r=n[2];if(!r)return Nl(t,e);let i;switch(s){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",Nl(s,e)).replace("{{time}}",Wu(r,e))},l2={p:Wu,P:a2},c2=/^D+$/,u2=/^Y+$/,f2=["D","DD","YY","YYYY"];function h2(t){return c2.test(t)}function d2(t){return u2.test(t)}function p2(t,e,n){const s=m2(t,e,n);if(console.warn(s),f2.includes(t))throw new RangeError(s)}function m2(t,e,n){const s=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${s} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const g2=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,y2=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,b2=/^'([^]*?)'?$/,v2=/''/g,w2=/[a-zA-Z]/;function Or(t,e,n){const s=vi(),r=s.locale??n2,i=s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,o=s.weekStartsOn??s.locale?.options?.weekStartsOn??0,a=Ct(t,n?.in);if(!_w(a))throw new RangeError("Invalid time value");let l=e.match(y2).map(u=>{const f=u[0];if(f==="p"||f==="P"){const d=l2[f];return d(u,r.formatLong)}return u}).join("").match(g2).map(u=>{if(u==="''")return{isToken:!1,value:"'"};const f=u[0];if(f==="'")return{isToken:!1,value:x2(u)};if(El[f])return{isToken:!0,value:u};if(f.match(w2))throw new RangeError("Format string contains an unescaped latin alphabet character `"+f+"`");return{isToken:!1,value:u}});r.localize.preprocessor&&(l=r.localize.preprocessor(a,l));const c={firstWeekContainsDate:i,weekStartsOn:o,locale:r};return l.map(u=>{if(!u.isToken)return u.value;const f=u.value;(d2(f)||h2(f))&&p2(f,e,String(t));const d=El[f[0]];return d(a,f,r.localize,c)}).join("")}function x2(t){const e=t.match(b2);return e?e[1].replace(v2,"'"):t}function He(t,e,n,s){return new(n||(n=Promise))((function(r,i){function o(c){try{l(s.next(c))}catch(u){i(u)}}function a(c){try{l(s.throw(c))}catch(u){i(u)}}function l(c){var u;c.done?r(c.value):(u=c.value,u instanceof n?u:new n((function(f){f(u)}))).then(o,a)}l((s=s.apply(t,e||[])).next())}))}class or{constructor(){this.listeners={}}on(e,n,s){if(this.listeners[e]||(this.listeners[e]=new Set),s?.once){const r=(...i)=>{this.un(e,r),n(...i)};return this.listeners[e].add(r),()=>this.un(e,r)}return this.listeners[e].add(n),()=>this.un(e,n)}un(e,n){var s;(s=this.listeners[e])===null||s===void 0||s.delete(n)}once(e,n){return this.on(e,n,{once:!0})}unAll(){this.listeners={}}emit(e,...n){this.listeners[e]&&this.listeners[e].forEach((s=>s(...n)))}}const Ar={decode:function(t,e){return He(this,void 0,void 0,(function*(){const n=new AudioContext({sampleRate:e});try{return yield n.decodeAudioData(t)}finally{n.close()}}))},createBuffer:function(t,e){if(!t||t.length===0)throw new Error("channelData must be a non-empty array");if(e<=0)throw new Error("duration must be greater than 0");if(typeof t[0]=="number"&&(t=[t]),!t[0]||t[0].length===0)throw new Error("channelData must contain non-empty channel arrays");(function(s){const r=s[0];if(r.some((i=>i>1||i<-1))){const i=r.length;let o=0;for(let a=0;a<i;a++){const l=Math.abs(r[a]);l>o&&(o=l)}for(const a of s)for(let l=0;l<i;l++)a[l]/=o}})(t);const n=t.map((s=>s instanceof Float32Array?s:Float32Array.from(s)));return{duration:e,length:n[0].length,sampleRate:n[0].length/e,numberOfChannels:n.length,getChannelData:s=>{const r=n[s];if(!r)throw new Error(`Channel ${s} not found`);return r},copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function Yu(t,e){const n=e.xmlns?document.createElementNS(e.xmlns,t):document.createElement(t);for(const[s,r]of Object.entries(e))if(s==="children"&&r)for(const[i,o]of Object.entries(r))o instanceof Node?n.appendChild(o):typeof o=="string"?n.appendChild(document.createTextNode(o)):n.appendChild(Yu(i,o));else s==="style"?Object.assign(n.style,r):s==="textContent"?n.textContent=r:n.setAttribute(s,r.toString());return n}function Ol(t,e,n){const s=Yu(t,e||{});return n?.appendChild(s),s}var _2=Object.freeze({__proto__:null,createElement:Ol,default:Ol});const S2={fetchBlob:function(t,e,n){return He(this,void 0,void 0,(function*(){const s=yield fetch(t,n);if(s.status>=400)throw new Error(`Failed to fetch ${t}: ${s.status} (${s.statusText})`);return(function(r,i){He(this,void 0,void 0,(function*(){if(!r.body||!r.headers)return;const o=r.body.getReader(),a=Number(r.headers.get("Content-Length"))||0;let l=0;const c=u=>{l+=u?.length||0;const f=Math.round(l/a*100);i(f)};try{for(;;){const u=yield o.read();if(u.done)break;c(u.value)}}catch(u){console.warn("Progress tracking error:",u)}}))})(s.clone(),e),s.blob()}))}};function Ne(t){let e=t;const n=new Set;return{get value(){return e},set(s){Object.is(e,s)||(e=s,n.forEach((r=>r(e))))},update(s){this.set(s(e))},subscribe:s=>(n.add(s),()=>n.delete(s))}}function Mn(t,e){const n=Ne(t());return e.forEach((s=>s.subscribe((()=>{const r=t();Object.is(n.value,r)||n.set(r)})))),{get value(){return n.value},subscribe:s=>n.subscribe(s)}}function un(t,e){let n;const s=()=>{n&&(n(),n=void 0),n=t()},r=e.map((i=>i.subscribe(s)));return s(),()=>{n&&(n(),n=void 0),r.forEach((i=>i()))}}class E2 extends or{get isPlayingSignal(){return this._isPlaying}get currentTimeSignal(){return this._currentTime}get durationSignal(){return this._duration}get volumeSignal(){return this._volume}get mutedSignal(){return this._muted}get playbackRateSignal(){return this._playbackRate}get seekingSignal(){return this._seeking}constructor(e){super(),this.isExternalMedia=!1,this.reactiveMediaEventCleanups=[],e.media?(this.media=e.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),this._isPlaying=Ne(!1),this._currentTime=Ne(0),this._duration=Ne(0),this._volume=Ne(this.media.volume),this._muted=Ne(this.media.muted),this._playbackRate=Ne(this.media.playbackRate||1),this._seeking=Ne(!1),this.setupReactiveMediaEvents(),e.mediaControls&&(this.media.controls=!0),e.autoplay&&(this.media.autoplay=!0),e.playbackRate!=null&&this.onMediaEvent("canplay",(()=>{e.playbackRate!=null&&(this.media.playbackRate=e.playbackRate)}),{once:!0})}setupReactiveMediaEvents(){this.reactiveMediaEventCleanups.push(this.onMediaEvent("play",(()=>{this._isPlaying.set(!0)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("pause",(()=>{this._isPlaying.set(!1)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("ended",(()=>{this._isPlaying.set(!1)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("timeupdate",(()=>{this._currentTime.set(this.media.currentTime)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("durationchange",(()=>{this._duration.set(this.media.duration||0)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("loadedmetadata",(()=>{this._duration.set(this.media.duration||0)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("seeking",(()=>{this._seeking.set(!0)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("seeked",(()=>{this._seeking.set(!1)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("volumechange",(()=>{this._volume.set(this.media.volume),this._muted.set(this.media.muted)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("ratechange",(()=>{this._playbackRate.set(this.media.playbackRate)})))}onMediaEvent(e,n,s){return this.media.addEventListener(e,n,s),()=>this.media.removeEventListener(e,n,s)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const e=this.getSrc();e.startsWith("blob:")&&URL.revokeObjectURL(e)}canPlayType(e){return this.media.canPlayType(e)!==""}setSrc(e,n){const s=this.getSrc();if(e&&s===e)return;this.revokeSrc();const r=n instanceof Blob&&(this.canPlayType(n.type)||!e)?URL.createObjectURL(n):e;if(s&&this.media.removeAttribute("src"),r||e)try{this.media.src=r}catch{this.media.src=e}}destroy(){this.reactiveMediaEventCleanups.forEach((e=>e())),this.reactiveMediaEventCleanups=[],this.isExternalMedia||(this.media.pause(),this.revokeSrc(),this.media.removeAttribute("src"),this.media.load(),this.media.remove())}setMediaElement(e){this.reactiveMediaEventCleanups.forEach((n=>n())),this.reactiveMediaEventCleanups=[],this.media=e,this.setupReactiveMediaEvents()}play(){return He(this,void 0,void 0,(function*(){try{return yield this.media.play()}catch(e){if(e instanceof DOMException&&e.name==="AbortError")return;throw e}}))}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(e){this.media.currentTime=Math.max(0,Math.min(e,this.getDuration()))}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(e){this.media.volume=e}getMuted(){return this.media.muted}setMuted(e){this.media.muted=e}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(e,n){n!=null&&(this.media.preservesPitch=n),this.media.playbackRate=e}getMediaElement(){return this.media}setSinkId(e){return this.media.setSinkId(e)}}function k2({maxTop:t,maxBottom:e,halfHeight:n,vScale:s,barMinHeight:r=0,barAlign:i}){let o=Math.round(t*n*s),a=o+Math.round(e*n*s)||1;return a<r&&(a=r,i||(o=a/2)),{topHeight:o,totalHeight:a}}function T2({barAlign:t,halfHeight:e,topHeight:n,totalHeight:s,canvasHeight:r}){return t==="top"?0:t==="bottom"?r-s:e-n}function Al(t,e,n){const s=e-t.left,r=n-t.top;return[s/t.width,r/t.height]}function Gu(t){return!!(t.barWidth||t.barGap||t.barAlign)}function Cl(t,e){if(!Gu(e))return t;const n=e.barWidth||.5,s=n+(e.barGap||n/2);return s===0?t:Math.floor(t/s)*s}function jl({scrollLeft:t,totalWidth:e,numCanvases:n}){if(e===0)return[0];const s=t/e,r=Math.floor(s*n);return[r-1,r,r+1]}function qu(t){const e=t._cleanup;typeof e=="function"&&e()}function N2(t){const e=Ne({scrollLeft:t.scrollLeft,scrollWidth:t.scrollWidth,clientWidth:t.clientWidth}),n=Mn((()=>(function(i){const{scrollLeft:o,scrollWidth:a,clientWidth:l}=i;if(a===0)return{startX:0,endX:1};const c=o/a,u=(o+l)/a;return{startX:Math.max(0,Math.min(1,c)),endX:Math.max(0,Math.min(1,u))}})(e.value)),[e]),s=Mn((()=>(function(i){return{left:i.scrollLeft,right:i.scrollLeft+i.clientWidth}})(e.value)),[e]),r=()=>{e.set({scrollLeft:t.scrollLeft,scrollWidth:t.scrollWidth,clientWidth:t.clientWidth})};return t.addEventListener("scroll",r,{passive:!0}),{scrollData:e,percentages:n,bounds:s,cleanup:()=>{t.removeEventListener("scroll",r),qu(e)}}}class O2 extends or{constructor(e,n){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.unsubscribeOnScroll=[],this.dragStream=null,this.scrollStream=null,this.subscriptions=[],this.options=e;const s=this.parentFromOptionsContainer(e.container);this.parent=s;const[r,i]=this.initHtml();s.appendChild(r),this.container=r,this.scrollContainer=i.querySelector(".scroll"),this.wrapper=i.querySelector(".wrapper"),this.canvasWrapper=i.querySelector(".canvases"),this.progressWrapper=i.querySelector(".progress"),this.cursor=i.querySelector(".cursor"),n&&i.appendChild(n),this.initEvents()}parentFromOptionsContainer(e){let n;if(typeof e=="string"?n=document.querySelector(e):e instanceof HTMLElement&&(n=e),!n)throw new Error("Container not found");return n}initEvents(){this.wrapper.addEventListener("click",(n=>{const s=this.wrapper.getBoundingClientRect(),[r,i]=Al(s,n.clientX,n.clientY);this.emit("click",r,i)})),this.wrapper.addEventListener("dblclick",(n=>{const s=this.wrapper.getBoundingClientRect(),[r,i]=Al(s,n.clientX,n.clientY);this.emit("dblclick",r,i)})),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollStream=N2(this.scrollContainer);const e=un((()=>{const{startX:n,endX:s}=this.scrollStream.percentages.value,{left:r,right:i}=this.scrollStream.bounds.value;this.emit("scroll",n,s,r,i)}),[this.scrollStream.percentages,this.scrollStream.bounds]);if(this.subscriptions.push(e),typeof ResizeObserver=="function"){const n=this.createDelay(100);this.resizeObserver=new ResizeObserver((()=>{n().then((()=>this.onContainerResize())).catch((()=>{}))})),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const e=this.parent.clientWidth;e===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=e,this.reRender(),this.emit("resize"))}initDrag(){if(this.dragStream)return;this.dragStream=(function(n,s={}){const{threshold:r=3,mouseButton:i=0,touchDelay:o=100}=s,a=Ne(null),l=new Map,c=matchMedia("(pointer: coarse)").matches;let u=()=>{};const f=d=>{if(d.button!==i||(l.set(d.pointerId,d),l.size>1))return;let p=d.clientX,g=d.clientY,m=!1;const b=Date.now(),y=n.getBoundingClientRect(),{left:k,top:x}=y,_=S=>{if(S.defaultPrevented||l.size>1||c&&Date.now()-b<o)return;const N=S.clientX,O=S.clientY,A=N-p,C=O-g;(m||Math.abs(A)>r||Math.abs(C)>r)&&(S.preventDefault(),S.stopPropagation(),m||(a.set({type:"start",x:p-k,y:g-x}),m=!0),a.set({type:"move",x:N-k,y:O-x,deltaX:A,deltaY:C}),p=N,g=O)},E=S=>{if(l.delete(S.pointerId),m){const N=S.clientX,O=S.clientY;a.set({type:"end",x:N-k,y:O-x})}u()},T=S=>{l.delete(S.pointerId),S.relatedTarget&&S.relatedTarget!==document.documentElement||E(S)},v=S=>{m&&(S.stopPropagation(),S.preventDefault())},w=S=>{S.defaultPrevented||l.size>1||m&&S.preventDefault()};document.addEventListener("pointermove",_),document.addEventListener("pointerup",E),document.addEventListener("pointerout",T),document.addEventListener("pointercancel",T),document.addEventListener("touchmove",w,{passive:!1}),document.addEventListener("click",v,{capture:!0}),u=()=>{document.removeEventListener("pointermove",_),document.removeEventListener("pointerup",E),document.removeEventListener("pointerout",T),document.removeEventListener("pointercancel",T),document.removeEventListener("touchmove",w),setTimeout((()=>{document.removeEventListener("click",v,{capture:!0})}),10)}};return n.addEventListener("pointerdown",f),{signal:a,cleanup:()=>{u(),n.removeEventListener("pointerdown",f),l.clear(),qu(a)}}})(this.wrapper);const e=un((()=>{const n=this.dragStream.signal.value;if(!n)return;const s=this.wrapper.getBoundingClientRect().width,r=(i=n.x/s)<0?0:i>1?1:i;var i;n.type==="start"?(this.isDragging=!0,this.emit("dragstart",r)):n.type==="move"?this.emit("drag",r):n.type==="end"&&(this.isDragging=!1,this.emit("dragend",r))}),[this.dragStream.signal]);this.subscriptions.push(e)}initHtml(){const e=document.createElement("div"),n=e.attachShadow({mode:"open"}),s=this.options.cspNonce&&typeof this.options.cspNonce=="string"?this.options.cspNonce.replace(/"/g,""):"";return n.innerHTML=`
      <style${s?` nonce="${s}"`:""}>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
          pointer-events: none;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[e,n]}setOptions(e){if(this.options.container!==e.container){const n=this.parentFromOptionsContainer(e.container);n.appendChild(this.container),this.parent=n}e.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=e,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(e){this.scrollContainer.scrollLeft=e}setScrollPercentage(e){const{scrollWidth:n}=this.scrollContainer,s=n*e;this.setScroll(s)}destroy(){var e;this.subscriptions.forEach((n=>n())),this.container.remove(),this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),(e=this.unsubscribeOnScroll)===null||e===void 0||e.forEach((n=>n())),this.unsubscribeOnScroll=[],this.dragStream&&(this.dragStream.cleanup(),this.dragStream=null),this.scrollStream&&(this.scrollStream.cleanup(),this.scrollStream=null)}createDelay(e=10){let n,s;const r=()=>{n&&(clearTimeout(n),n=void 0),s&&(s(),s=void 0)};return this.timeouts.push(r),()=>new Promise(((i,o)=>{r(),s=o,n=setTimeout((()=>{n=void 0,s=void 0,i()}),e)}))}getHeight(e,n){var s;const r=((s=this.audioData)===null||s===void 0?void 0:s.numberOfChannels)||1;return(function({optionsHeight:i,optionsSplitChannels:o,parentHeight:a,numberOfChannels:l,defaultHeight:c=128}){if(i==null)return c;const u=Number(i);if(!isNaN(u))return u;if(i==="auto"){const f=a||c;return o?.every((d=>!d.overlay))?f/l:f}return c})({optionsHeight:e,optionsSplitChannels:n,parentHeight:this.parent.clientHeight,numberOfChannels:r,defaultHeight:128})}convertColorValues(e,n){return(function(s,r,i){if(!Array.isArray(s))return s||"";if(s.length===0)return"#999";if(s.length<2)return s[0]||"";const o=document.createElement("canvas"),a=o.getContext("2d"),l=i??o.height*r,c=a.createLinearGradient(0,0,0,l||r),u=1/(s.length-1);return s.forEach(((f,d)=>{c.addColorStop(d*u,f)})),c})(e,this.getPixelRatio(),n?.canvas.height)}getPixelRatio(){return e=window.devicePixelRatio,Math.max(1,e||1);var e}renderBarWaveform(e,n,s,r){const{width:i,height:o}=s.canvas,{halfHeight:a,barWidth:l,barRadius:c,barIndexScale:u,barSpacing:f,barMinHeight:d}=(function({width:g,height:m,length:b,options:y,pixelRatio:k}){const x=m/2,_=y.barWidth?y.barWidth*k:1,E=y.barGap?y.barGap*k:y.barWidth?_/2:0,T=_+E||1;return{halfHeight:x,barWidth:_,barGap:E,barRadius:y.barRadius||0,barMinHeight:y.barMinHeight?y.barMinHeight*k:0,barIndexScale:b>0?g/T/b:0,barSpacing:T}})({width:i,height:o,length:(e[0]||[]).length,options:n,pixelRatio:this.getPixelRatio()}),p=(function({channelData:g,barIndexScale:m,barSpacing:b,barWidth:y,halfHeight:k,vScale:x,canvasHeight:_,barAlign:E,barMinHeight:T}){const v=g[0]||[],w=g[1]||v,S=v.length,N=[];let O=0,A=0,C=0;for(let M=0;M<=S;M++){const P=Math.round(M*m);if(P>O){const{topHeight:F,totalHeight:L}=k2({maxTop:A,maxBottom:C,halfHeight:k,vScale:x,barMinHeight:T,barAlign:E}),W=T2({barAlign:E,halfHeight:k,topHeight:F,totalHeight:L,canvasHeight:_});N.push({x:O*b,y:W,width:y,height:L}),O=P,A=0,C=0}const R=Math.abs(v[M]||0),$=Math.abs(w[M]||0);R>A&&(A=R),$>C&&(C=$)}return N})({channelData:e,barIndexScale:u,barSpacing:f,barWidth:l,halfHeight:a,vScale:r,canvasHeight:o,barAlign:n.barAlign,barMinHeight:d});s.beginPath();for(const g of p)c&&"roundRect"in s?s.roundRect(g.x,g.y,g.width,g.height,c):s.rect(g.x,g.y,g.width,g.height);s.fill(),s.closePath()}renderLineWaveform(e,n,s,r){const{width:i,height:o}=s.canvas,a=(function({channelData:l,width:c,height:u,vScale:f}){const d=u/2,p=l[0]||[];return[p,l[1]||p].map(((g,m)=>{const b=g.length,y=b?c/b:0,k=d,x=m===0?-1:1,_=[{x:0,y:k}];let E=0,T=0;for(let v=0;v<=b;v++){const w=Math.round(v*y);if(w>E){const N=k+(Math.round(T*d*f)||1)*x;_.push({x:E,y:N}),E=w,T=0}const S=Math.abs(g[v]||0);S>T&&(T=S)}return _.push({x:E,y:k}),_}))})({channelData:e,width:i,height:o,vScale:r});s.beginPath();for(const l of a)if(l.length){s.moveTo(l[0].x,l[0].y);for(let c=1;c<l.length;c++){const u=l[c];s.lineTo(u.x,u.y)}}s.fill(),s.closePath()}renderWaveform(e,n,s){if(s.fillStyle=this.convertColorValues(n.waveColor,s),n.renderFunction)return void n.renderFunction(e,s);const r=(function({channelData:i,barHeight:o,normalize:a,maxPeak:l}){var c;const u=o||1;if(!a)return u;const f=i[0];if(!f||f.length===0)return u;let d=l??0;if(!l)for(let p=0;p<f.length;p++){const g=(c=f[p])!==null&&c!==void 0?c:0,m=Math.abs(g);m>d&&(d=m)}return d?u/d:u})({channelData:e,barHeight:n.barHeight,normalize:n.normalize,maxPeak:n.maxPeak});Gu(n)?this.renderBarWaveform(e,n,s,r):this.renderLineWaveform(e,n,s,r)}renderSingleCanvas(e,n,s,r,i,o,a){const l=this.getPixelRatio(),c=document.createElement("canvas");c.width=Math.round(s*l),c.height=Math.round(r*l),c.style.width=`${s}px`,c.style.height=`${r}px`,c.style.left=`${Math.round(i)}px`,o.appendChild(c);const u=c.getContext("2d");if(n.renderFunction?(u.fillStyle=this.convertColorValues(n.waveColor,u),n.renderFunction(e,u)):this.renderWaveform(e,n,u),c.width>0&&c.height>0){const f=c.cloneNode(),d=f.getContext("2d");d.drawImage(c,0,0),d.globalCompositeOperation="source-in",d.fillStyle=this.convertColorValues(n.progressColor,d),d.fillRect(0,0,c.width,c.height),a.appendChild(f)}}renderMultiCanvas(e,n,s,r,i,o){const a=this.getPixelRatio(),{clientWidth:l}=this.scrollContainer,c=s/a,u=(function({clientWidth:g,totalWidth:m,options:b}){return Cl(Math.min(8e3,g,m),b)})({clientWidth:l,totalWidth:c,options:n});let f={};if(u===0)return;const d=g=>{if(g<0||g>=p||f[g])return;f[g]=!0;const m=g*u;let b=Math.min(c-m,u);if(b=Cl(b,n),b<=0)return;const y=(function({channelData:k,offset:x,clampedWidth:_,totalWidth:E}){return k.map((T=>{const v=Math.floor(x/E*T.length),w=Math.floor((x+_)/E*T.length);return T.slice(v,w)}))})({channelData:e,offset:m,clampedWidth:b,totalWidth:c});this.renderSingleCanvas(y,n,b,r,m,i,o)},p=Math.ceil(c/u);if(!this.isScrollable){for(let g=0;g<p;g++)d(g);return}if(jl({scrollLeft:this.scrollContainer.scrollLeft,totalWidth:c,numCanvases:p}).forEach((g=>d(g))),p>1){const g=this.on("scroll",(()=>{const{scrollLeft:m}=this.scrollContainer;Object.keys(f).length>10&&(i.innerHTML="",o.innerHTML="",f={}),jl({scrollLeft:m,totalWidth:c,numCanvases:p}).forEach((b=>d(b)))}));this.unsubscribeOnScroll.push(g)}}renderChannel(e,n,s,r){var{overlay:i}=n,o=(function(u,f){var d={};for(var p in u)Object.prototype.hasOwnProperty.call(u,p)&&f.indexOf(p)<0&&(d[p]=u[p]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function"){var g=0;for(p=Object.getOwnPropertySymbols(u);g<p.length;g++)f.indexOf(p[g])<0&&Object.prototype.propertyIsEnumerable.call(u,p[g])&&(d[p[g]]=u[p[g]])}return d})(n,["overlay"]);const a=document.createElement("div"),l=this.getHeight(o.height,o.splitChannels);a.style.height=`${l}px`,i&&r>0&&(a.style.marginTop=`-${l}px`),this.canvasWrapper.style.minHeight=`${l}px`,this.canvasWrapper.appendChild(a);const c=a.cloneNode();this.progressWrapper.appendChild(c),this.renderMultiCanvas(e,o,s,l,a,c)}render(e){return He(this,void 0,void 0,(function*(){var n;this.timeouts.forEach((c=>c())),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const s=this.getPixelRatio(),r=this.scrollContainer.clientWidth,{scrollWidth:i,isScrollable:o,useParentWidth:a,width:l}=(function({duration:c,minPxPerSec:u=0,parentWidth:f,fillParent:d,pixelRatio:p}){const g=Math.ceil(c*u),m=g>f,b=!!(d&&!m);return{scrollWidth:g,isScrollable:m,useParentWidth:b,width:(b?f:g)*p}})({duration:e.duration,minPxPerSec:this.options.minPxPerSec||0,parentWidth:r,fillParent:this.options.fillParent,pixelRatio:s});if(this.isScrollable=o,this.wrapper.style.width=a?"100%":`${i}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=e,this.emit("render"),this.options.splitChannels)for(let c=0;c<e.numberOfChannels;c++){const u=Object.assign(Object.assign({},this.options),(n=this.options.splitChannels)===null||n===void 0?void 0:n[c]);this.renderChannel([e.getChannelData(c)],u,l,c)}else{const c=[e.getChannelData(0)];e.numberOfChannels>1&&c.push(e.getChannelData(1)),this.renderChannel(c,this.options,l,0)}Promise.resolve().then((()=>this.emit("rendered")))}))}reRender(){if(this.unsubscribeOnScroll.forEach((s=>s())),this.unsubscribeOnScroll=[],!this.audioData)return;const{scrollWidth:e}=this.scrollContainer,{right:n}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&e!==this.scrollContainer.scrollWidth){const{right:s}=this.progressWrapper.getBoundingClientRect(),r=(function(i){const o=2*i;return(o<0?Math.floor(o):Math.ceil(o))/2})(s-n);this.scrollContainer.scrollLeft+=r}}zoom(e){this.options.minPxPerSec=e,this.reRender()}scrollIntoView(e,n=!1){const{scrollLeft:s,scrollWidth:r,clientWidth:i}=this.scrollContainer,o=e*r,a=s,l=s+i,c=i/2;if(this.isDragging)o+30>l?this.scrollContainer.scrollLeft+=30:o-30<a&&(this.scrollContainer.scrollLeft-=30);else{(o<a||o>l)&&(this.scrollContainer.scrollLeft=o-(this.options.autoCenter?c:0));const u=o-s-c;n&&this.options.autoCenter&&u>0&&(this.scrollContainer.scrollLeft+=u)}}renderProgress(e,n){if(isNaN(e))return;const s=100*e;this.canvasWrapper.style.clipPath=`polygon(${s}% 0%, 100% 0%, 100% 100%, ${s}% 100%)`,this.progressWrapper.style.width=`${s}%`,this.cursor.style.left=`${s}%`,this.cursor.style.transform=this.options.cursorWidth?`translateX(-${e*this.options.cursorWidth}px)`:"",this.isScrollable&&this.options.autoScroll&&this.audioData&&this.audioData.duration>0&&this.scrollIntoView(e,n)}exportImage(e,n,s){return He(this,void 0,void 0,(function*(){const r=this.canvasWrapper.querySelectorAll("canvas");if(!r.length)throw new Error("No waveform data");if(s==="dataURL"){const i=Array.from(r).map((o=>o.toDataURL(e,n)));return Promise.resolve(i)}return Promise.all(Array.from(r).map((i=>new Promise(((o,a)=>{i.toBlob((l=>{l?o(l):a(new Error("Could not export image"))}),e,n)})))))}))}}class A2 extends or{constructor(){super(...arguments),this.animationFrameId=null,this.isRunning=!1}start(){if(this.isRunning)return;this.isRunning=!0;const e=()=>{this.isRunning&&(this.emit("tick"),this.animationFrameId=requestAnimationFrame(e))};e()}stop(){this.isRunning=!1,this.animationFrameId!==null&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)}destroy(){this.stop()}}class Vi extends or{constructor(e=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=e,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return He(this,void 0,void 0,(function*(){}))}get src(){return this.currentSrc}set src(e){if(this.currentSrc=e,this._duration=void 0,!e)return this.buffer=null,void this.emit("emptied");fetch(e).then((n=>{if(n.status>=400)throw new Error(`Failed to fetch ${e}: ${n.status} (${n.statusText})`);return n.arrayBuffer()})).then((n=>this.currentSrc!==e?null:this.audioContext.decodeAudioData(n))).then((n=>{this.currentSrc===e&&(this.buffer=n,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())})).catch((n=>{console.error("WebAudioPlayer load error:",n)}))}_play(){if(!this.paused)return;this.paused=!1,this.bufferNode&&(this.bufferNode.onended=null,this.bufferNode.disconnect()),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let e=this.playedDuration*this._playbackRate;(e>=this.duration||e<0)&&(e=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,e),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var e;this.paused=!0,(e=this.bufferNode)===null||e===void 0||e.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return He(this,void 0,void 0,(function*(){this.paused&&(this._play(),this.emit("play"))}))}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(e){const n=e-this.currentTime,s=this.bufferNode;s?.stop(this.audioContext.currentTime+n),s?.addEventListener("ended",(()=>{s===this.bufferNode&&(this.bufferNode=null,this.pause())}),{once:!0})}setSinkId(e){return He(this,void 0,void 0,(function*(){return this.audioContext.setSinkId(e)}))}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this.bufferNode&&(this.bufferNode.playbackRate.value=e)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(e){const n=!this.paused;n&&this._pause(),this.playedDuration=e/this._playbackRate,n&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var e,n;return(e=this._duration)!==null&&e!==void 0?e:((n=this.buffer)===null||n===void 0?void 0:n.duration)||0}set duration(e){this._duration=e}get volume(){return this.gainNode.gain.value}set volume(e){this.gainNode.gain.value=e,this.emit("volumechange")}get muted(){return this._muted}set muted(e){this._muted!==e&&(this._muted=e,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(e){return/^(audio|video)\//.test(e)}getGainNode(){return this.gainNode}getChannelData(){const e=[];if(!this.buffer)return e;const n=this.buffer.numberOfChannels;for(let s=0;s<n;s++)e.push(this.buffer.getChannelData(s));return e}removeAttribute(e){switch(e){case"src":this.src="";break;case"playbackRate":this.playbackRate=0;break;case"currentTime":this.currentTime=0;break;case"duration":this.duration=0;break;case"volume":this.volume=0;break;case"muted":this.muted=!1}}}const C2={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class er extends E2{static create(e){return new er(e)}getState(){return this.wavesurferState}getRenderer(){return this.renderer}constructor(e){const n=e.media||(e.backend==="WebAudio"?new Vi:void 0);super({media:n,mediaControls:e.mediaControls,autoplay:e.autoplay,playbackRate:e.audioRate}),this.plugins=[],this.decodedData=null,this.stopAtPosition=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.reactiveCleanups=[],this.options=Object.assign({},C2,e);const{state:s,actions:r}=(function(a){var l,c,u,f,d,p;const g=(l=a?.currentTime)!==null&&l!==void 0?l:Ne(0),m=(c=a?.duration)!==null&&c!==void 0?c:Ne(0),b=(u=a?.isPlaying)!==null&&u!==void 0?u:Ne(!1),y=(f=a?.isSeeking)!==null&&f!==void 0?f:Ne(!1),k=(d=a?.volume)!==null&&d!==void 0?d:Ne(1),x=(p=a?.playbackRate)!==null&&p!==void 0?p:Ne(1),_=Ne(null),E=Ne(null),T=Ne(""),v=Ne(0),w=Ne(0),S=Mn((()=>!b.value),[b]),N=Mn((()=>_.value!==null),[_]),O=Mn((()=>N.value&&m.value>0),[N,m]),A=Mn((()=>g.value),[g]),C=Mn((()=>m.value>0?g.value/m.value:0),[g,m]);return{state:{currentTime:g,duration:m,isPlaying:b,isPaused:S,isSeeking:y,volume:k,playbackRate:x,audioBuffer:_,peaks:E,url:T,zoom:v,scrollPosition:w,canPlay:N,isReady:O,progress:A,progressPercent:C},actions:{setCurrentTime:M=>{const P=Math.max(0,Math.min(m.value||1/0,M));g.set(P)},setDuration:M=>{m.set(Math.max(0,M))},setPlaying:M=>{b.set(M)},setSeeking:M=>{y.set(M)},setVolume:M=>{const P=Math.max(0,Math.min(1,M));k.set(P)},setPlaybackRate:M=>{const P=Math.max(.1,Math.min(16,M));x.set(P)},setAudioBuffer:M=>{_.set(M),M&&m.set(M.duration)},setPeaks:M=>{E.set(M)},setUrl:M=>{T.set(M)},setZoom:M=>{v.set(Math.max(0,M))},setScrollPosition:M=>{w.set(Math.max(0,M))}}}})({isPlaying:this.isPlayingSignal,currentTime:this.currentTimeSignal,duration:this.durationSignal,volume:this.volumeSignal,playbackRate:this.playbackRateSignal,isSeeking:this.seekingSignal});this.wavesurferState=s,this.wavesurferActions=r,this.timer=new A2;const i=n?void 0:this.getMediaElement();this.renderer=new O2(this.options,i),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initReactiveState(),this.initPlugins();const o=this.options.url||this.getSrc()||"";Promise.resolve().then((()=>{this.emit("init");const{peaks:a,duration:l}=this.options;(o||a&&l)&&this.load(o,a,l).catch((c=>{this.emit("error",c instanceof Error?c:new Error(String(c)))}))}))}updateProgress(e=this.getCurrentTime()){return this.renderer.renderProgress(e/this.getDuration(),this.isPlaying()),e}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",(()=>{if(!this.isSeeking()){const e=this.updateProgress();this.emit("timeupdate",e),this.emit("audioprocess",e),this.stopAtPosition!=null&&this.isPlaying()&&e>=this.stopAtPosition&&this.pause()}})))}initReactiveState(){this.reactiveCleanups.push((function(e,n){const s=[];s.push(un((()=>{const o=e.isPlaying.value;n.emit(o?"play":"pause")}),[e.isPlaying])),s.push(un((()=>{const o=e.currentTime.value;n.emit("timeupdate",o),e.isPlaying.value&&n.emit("audioprocess",o)}),[e.currentTime,e.isPlaying])),s.push(un((()=>{e.isSeeking.value&&n.emit("seeking",e.currentTime.value)}),[e.isSeeking,e.currentTime]));let r=!1;s.push(un((()=>{e.isReady.value&&!r&&(r=!0,n.emit("ready",e.duration.value))}),[e.isReady,e.duration]));let i=!1;return s.push(un((()=>{const o=e.isPlaying.value,a=e.currentTime.value,l=e.duration.value,c=l>0&&a>=l;i&&!o&&c&&n.emit("finish"),i=o&&c}),[e.isPlaying,e.currentTime,e.duration])),s.push(un((()=>{const o=e.zoom.value;o>0&&n.emit("zoom",o)}),[e.zoom])),()=>{s.forEach((o=>o()))}})(this.wavesurferState,{emit:this.emit.bind(this)}))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",(()=>{const e=this.updateProgress();this.emit("timeupdate",e)})),this.onMediaEvent("play",(()=>{this.emit("play"),this.timer.start()})),this.onMediaEvent("pause",(()=>{this.emit("pause"),this.timer.stop(),this.stopAtPosition=null})),this.onMediaEvent("emptied",(()=>{this.timer.stop(),this.stopAtPosition=null})),this.onMediaEvent("ended",(()=>{this.emit("timeupdate",this.getDuration()),this.emit("finish"),this.stopAtPosition=null})),this.onMediaEvent("seeking",(()=>{this.emit("seeking",this.getCurrentTime())})),this.onMediaEvent("error",(()=>{var e;this.emit("error",(e=this.getMediaElement().error)!==null&&e!==void 0?e:new Error("Media error")),this.stopAtPosition=null})))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",((e,n)=>{this.options.interact&&(this.seekTo(e),this.emit("interaction",e*this.getDuration()),this.emit("click",e,n))})),this.renderer.on("dblclick",((e,n)=>{this.emit("dblclick",e,n)})),this.renderer.on("scroll",((e,n,s,r)=>{const i=this.getDuration();this.emit("scroll",e*i,n*i,s,r)})),this.renderer.on("render",(()=>{this.emit("redraw")})),this.renderer.on("rendered",(()=>{this.emit("redrawcomplete")})),this.renderer.on("dragstart",(e=>{this.emit("dragstart",e)})),this.renderer.on("dragend",(e=>{this.emit("dragend",e)})),this.renderer.on("resize",(()=>{this.emit("resize")})));{let e;const n=this.renderer.on("drag",(s=>{var r;if(!this.options.interact)return;this.renderer.renderProgress(s),clearTimeout(e);let i=0;const o=this.options.dragToSeek;this.isPlaying()?i=0:o===!0?i=200:o&&typeof o=="object"&&(i=(r=o.debounceTime)!==null&&r!==void 0?r:200),e=setTimeout((()=>{this.seekTo(s)}),i),this.emit("interaction",s*this.getDuration()),this.emit("drag",s)}));this.subscriptions.push((()=>{clearTimeout(e),n()}))}}initPlugins(){var e;!((e=this.options.plugins)===null||e===void 0)&&e.length&&this.options.plugins.forEach((n=>{this.registerPlugin(n)}))}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach((e=>e())),this.mediaSubscriptions=[]}setOptions(e){this.options=Object.assign({},this.options,e),e.duration&&!e.peaks&&(this.decodedData=Ar.createBuffer(this.exportPeaks(),e.duration)),e.peaks&&e.duration&&(this.decodedData=Ar.createBuffer(e.peaks,e.duration)),this.renderer.setOptions(this.options),e.audioRate&&this.setPlaybackRate(e.audioRate),e.mediaControls!=null&&(this.getMediaElement().controls=e.mediaControls)}registerPlugin(e){if(this.plugins.includes(e))return e;e._init(this),this.plugins.push(e);const n=e.once("destroy",(()=>{this.plugins=this.plugins.filter((s=>s!==e)),this.subscriptions=this.subscriptions.filter((s=>s!==n))}));return this.subscriptions.push(n),e}unregisterPlugin(e){this.plugins=this.plugins.filter((n=>n!==e)),e.destroy()}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(e){return this.renderer.setScroll(e)}setScrollTime(e){const n=e/this.getDuration();this.renderer.setScrollPercentage(n)}getActivePlugins(){return this.plugins}loadAudio(e,n,s,r){return He(this,void 0,void 0,(function*(){var i;if(this.emit("load",e),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,this.stopAtPosition=null,(i=this.abortController)===null||i===void 0||i.abort(),this.abortController=null,!n&&!s){const a=this.options.fetchParams||{};window.AbortController&&!a.signal&&(this.abortController=new AbortController,a.signal=this.abortController.signal);const l=u=>this.emit("loading",u);n=yield S2.fetchBlob(e,l,a);const c=this.options.blobMimeType;c&&(n=new Blob([n],{type:c}))}this.setSrc(e,n);const o=yield new Promise((a=>{const l=r||this.getDuration();l?a(l):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",(()=>a(this.getDuration())),{once:!0}))}));if(!e&&!n){const a=this.getMediaElement();a instanceof Vi&&(a.duration=o)}if(s)this.decodedData=Ar.createBuffer(s,o||0);else if(n){const a=yield n.arrayBuffer();this.decodedData=yield Ar.decode(a,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())}))}load(e,n,s){return He(this,void 0,void 0,(function*(){try{return yield this.loadAudio(e,void 0,n,s)}catch(r){throw this.emit("error",r),r}}))}loadBlob(e,n,s){return He(this,void 0,void 0,(function*(){try{return yield this.loadAudio("",e,n,s)}catch(r){throw this.emit("error",r),r}}))}zoom(e){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(e),this.emit("zoom",e)}getDecodedData(){return this.decodedData}exportPeaks({channels:e=2,maxLength:n=8e3,precision:s=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const r=Math.min(e,this.decodedData.numberOfChannels),i=[];for(let o=0;o<r;o++){const a=this.decodedData.getChannelData(o),l=[],c=a.length/n;for(let u=0;u<n;u++){const f=a.slice(Math.floor(u*c),Math.ceil((u+1)*c));let d=0;for(let p=0;p<f.length;p++){const g=f[p];Math.abs(g)>Math.abs(d)&&(d=g)}l.push(Math.round(d*s)/s)}i.push(l)}return i}getDuration(){let e=super.getDuration()||0;return e!==0&&e!==1/0||!this.decodedData||(e=this.decodedData.duration),e}toggleInteraction(e){this.options.interact=e}setTime(e){this.stopAtPosition=null,super.setTime(e),this.updateProgress(e),this.emit("timeupdate",e)}seekTo(e){const n=this.getDuration()*e;this.setTime(n)}play(e,n){const s=Object.create(null,{play:{get:()=>super.play}});return He(this,void 0,void 0,(function*(){e!=null&&this.setTime(e);const r=yield s.play.call(this);return n!=null&&(this.media instanceof Vi?this.media.stopAt(n):this.stopAtPosition=n),r}))}playPause(){return He(this,void 0,void 0,(function*(){return this.isPlaying()?this.pause():this.play()}))}stop(){this.pause(),this.setTime(0)}skip(e){this.setTime(this.getCurrentTime()+e)}empty(){this.load("",[[0]],.001)}setMediaElement(e){this.unsubscribePlayerEvents(),super.setMediaElement(e),this.initPlayerEvents()}exportImage(){return He(this,arguments,void 0,(function*(e="image/png",n=1,s="dataURL"){return this.renderer.exportImage(e,n,s)}))}destroy(){var e;this.emit("destroy"),(e=this.abortController)===null||e===void 0||e.abort(),this.plugins.forEach((n=>n.destroy())),this.subscriptions.forEach((n=>n())),this.unsubscribePlayerEvents(),this.reactiveCleanups.forEach((n=>n())),this.reactiveCleanups=[],this.timer.destroy(),this.renderer.destroy(),super.destroy()}}er.BasePlugin=class extends or{constructor(t){super(),this.subscriptions=[],this.isDestroyed=!1,this.options=t}onInit(){}_init(t){this.isDestroyed&&(this.subscriptions=[],this.isDestroyed=!1),this.wavesurfer=t,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach((t=>t())),this.subscriptions=[],this.isDestroyed=!0,this.wavesurfer=void 0}},er.dom=_2;const j2=[{id:"track3",name:"Audio",type:"audio",audioUrl:"./sample.mp3"},{id:"track1",name:"Position X",type:"animation",keyframes:[{id:"kf1",time:0,value:0},{id:"kf2",time:2,value:100}]},{id:"track2",name:"Opacity",type:"animation",keyframes:[{id:"kf3",time:1,value:0},{id:"kf4",time:3,value:1}]}],We=100,Il=64,Ml=24,I2=20,M2=400,P2=()=>{const t=D.c(112),[e,n]=z.useState(j2),[s,r]=z.useState(0),[i,o]=z.useState(100),[a,l]=z.useState(5),[c,u]=z.useState(!1),[f,d]=z.useState(!1),[p,g]=z.useState(!0),m=z.useRef(null),b=z.useRef(null),y=z.useRef(null),k=z.useRef(null);let x;t[0]!==a||t[1]!==p?(x=(X,se)=>{o(Q=>{const le=Q,Te=Math.max(I2,Math.min(M2,Q*X));if(!y.current)return Te;const fe=y.current;if(p&&se!==void 0){const js=fe.getBoundingClientRect(),An=se-js.left-We,Ii=a*le,wa=Math.max(0,Math.min(An,Ii));let Mi=(fe.scrollLeft+wa)/le*Te-wa;const Rf=Math.max(0,a*Te-fe.clientWidth);Mi=Math.max(0,Math.min(Mi,Rf)),fe.scrollLeft=Mi}else{let An=(fe.scrollLeft+fe.clientWidth/2-We)/le*Te-fe.clientWidth/2+We;const Ii=Math.max(0,a*Te-fe.clientWidth);An=Math.max(0,Math.min(An,Ii)),fe.scrollLeft=An}return Te})},t[0]=a,t[1]=p,t[2]=x):x=t[2];const _=x;let E;t[3]!==a||t[4]!==i?(E=X=>{if(!k.current)return;const se=k.current.getBoundingClientRect();let Q=X-se.left-We;Q=Math.max(0,Q);let le=Q/i;le=Math.max(0,Math.min(a,le)),r(le),b.current?.seekTo(le/a)},t[3]=a,t[4]=i,t[5]=E):E=t[5];const T=E;let v;t[6]!==e?(v=e.find(R2)?.audioUrl,t[6]=e,t[7]=v):v=t[7];const w=v;let S,N;t[8]!==w?(S=()=>{if(!w||!m.current)return;let X=!0;const se=er.create({container:m.current,waveColor:"#888",progressColor:"#f0f",height:55,barWidth:2,cursorColor:"transparent"});return b.current=se,se.load(w),se.on("ready",()=>X&&l(se.getDuration())),se.on("interaction",()=>X&&r(se.getCurrentTime())),se.on("audioprocess",()=>X&&r(se.getCurrentTime())),()=>{if(X=!1,b.current){try{b.current.destroy()}catch(Q){const le=Q;if(le instanceof Error){if(le.name!=="AbortError")throw le}else throw le}b.current=null}}},N=[w],t[8]=w,t[9]=S,t[10]=N):(S=t[9],N=t[10]),z.useEffect(S,N);let O,A;t[11]!==s||t[12]!==f||t[13]!==i?(O=()=>{if(!f)return;const X=y.current;if(!X)return;const se=We+s*i,Q=X.scrollLeft+We,le=Q+X.clientWidth-We;(se<Q||se>le)&&(X.scrollLeft=se-X.clientWidth/2)},A=[s,i,f],t[11]=s,t[12]=f,t[13]=i,t[14]=O,t[15]=A):(O=t[14],A=t[15]),z.useEffect(O,A);let C;t[16]===Symbol.for("react.memo_cache_sentinel")?(C=(X,se,Q)=>{n(le=>le.map(Te=>Te.id===X?{...Te,keyframes:Te.keyframes?.map(fe=>fe.id===se?{...fe,time:Q}:fe)}:Te))},t[16]=C):C=t[16];const M=C;let P;t[17]===Symbol.for("react.memo_cache_sentinel")?(P=()=>{b.current&&b.current.play()},t[17]=P):P=t[17];const R=P;let $;t[18]===Symbol.for("react.memo_cache_sentinel")?($=()=>{b.current?.pause()},t[18]=$):$=t[18];const F=$;let L,W;t[19]===Symbol.for("react.memo_cache_sentinel")?(L=()=>{if(!b.current)return;const X=()=>d(!0),se=()=>d(!1),Q=()=>d(!1);return b.current.on("play",X),b.current.on("pause",se),b.current.on("finish",Q),()=>{b.current?.un("play",X),b.current?.un("pause",se),b.current?.un("finish",Q)}},W=[],t[19]=L,t[20]=W):(L=t[19],W=t[20]),z.useEffect(L,W);let K;t[21]===Symbol.for("react.memo_cache_sentinel")?(K=X=>{u(!0),X.preventDefault()},t[21]=K):K=t[21];const ne=K;let Y;t[22]!==a||t[23]!==c||t[24]!==i?(Y=X=>{if(!c||!k.current||!y.current)return;const se=k.current.getBoundingClientRect();let Q=X.clientX-se.left-We;Q=Math.max(0,Q);let le=Q/i;le=Math.max(0,Math.min(a,le)),r(le),b.current?.seekTo(le/a);const Te=y.current,fe=We+le*i,js=Te.scrollLeft+We,An=js+Te.clientWidth-We;fe<js+40?Te.scrollLeft=Math.max(0,fe-We-40):fe>An-40&&(Te.scrollLeft=Math.min(a*i-Te.clientWidth,fe-Te.clientWidth+40))},t[22]=a,t[23]=c,t[24]=i,t[25]=Y):Y=t[25];const te=Y;let q,ie;t[26]!==c||t[27]!==te?(q=()=>(c&&(window.addEventListener("mousemove",te),window.addEventListener("mouseup",()=>u(!1))),()=>{window.removeEventListener("mousemove",te),window.removeEventListener("mouseup",()=>u(!1))}),ie=[c,te],t[26]=c,t[27]=te,t[28]=q,t[29]=ie):(q=t[28],ie=t[29]),z.useEffect(q,ie);let $e,Be;t[30]!==_?($e=()=>{const X=y.current;if(!X)return;const se=Q=>{if(Q.altKey){Q.preventDefault();const le=Q.deltaY<0?1.1:.9090909090909091;_(le,Q.clientX);return}if(Q.ctrlKey||Q.metaKey){Q.preventDefault(),X.scrollTop=X.scrollTop+Q.deltaY;return}Q.preventDefault(),X.scrollLeft=X.scrollLeft+Q.deltaY};return X.addEventListener("wheel",se,{passive:!1}),()=>X.removeEventListener("wheel",se)},Be=[_],t[30]=_,t[31]=$e,t[32]=Be):($e=t[31],Be=t[32]),z.useEffect($e,Be);let Je;t[33]!==a||t[34]!==T||t[35]!==i?(Je=()=>{const X=a*i,se=Math.floor(X/40);let Q=a/se;Q=[.05,.1,.25,.5,1,2,5,10,20,50,100].find(fe=>fe>=Q)||Q;const Te=[];for(let fe=0;fe<=a;fe=fe+Q,fe)Te.push(h.jsx("div",{className:"absolute top-0 h-full border-l border-border text-xs text-muted-foreground",style:{left:`${fe*i}px`},children:h.jsxs("span",{className:"absolute left-1 top-1/2 -translate-y-1/2",children:[fe.toFixed(Q<1?2:1),"s"]})},fe));return h.jsx("div",{className:"relative h-full w-full cursor-pointer select-none",onClick:fe=>T(fe.clientX),children:Te})},t[33]=a,t[34]=T,t[35]=i,t[36]=Je):Je=t[36];const tt=Je,Ue=f?F:R;let Me;t[37]!==f?(Me=f?h.jsxs(h.Fragment,{children:[h.jsx(sh,{}),"Pause"]}):h.jsxs(h.Fragment,{children:[h.jsx(rh,{}),"Play"]}),t[37]=f,t[38]=Me):Me=t[38];let je;t[39]!==Ue||t[40]!==Me?(je=h.jsx(Fe,{onClick:Ue,children:Me}),t[39]=Ue,t[40]=Me,t[41]=je):je=t[41];let Ze;t[42]!==_?(Ze=()=>_(1.2),t[42]=_,t[43]=Ze):Ze=t[43];let bt;t[44]===Symbol.for("react.memo_cache_sentinel")?(bt=h.jsx(ih,{}),t[44]=bt):bt=t[44];let nt;t[45]!==Ze?(nt=h.jsxs(Fe,{onClick:Ze,children:[bt," Zoom In"]}),t[45]=Ze,t[46]=nt):nt=t[46];let st;t[47]!==_?(st=()=>_(.8333333333333334),t[47]=_,t[48]=st):st=t[48];let Jt;t[49]===Symbol.for("react.memo_cache_sentinel")?(Jt=h.jsx(oh,{}),t[49]=Jt):Jt=t[49];let vt;t[50]!==st?(vt=h.jsxs(Fe,{onClick:st,children:[Jt," Zoom Out"]}),t[50]=st,t[51]=vt):vt=t[51];let wt;t[52]===Symbol.for("react.memo_cache_sentinel")?(wt=X=>g(X.target.checked),t[52]=wt):wt=t[52];let rt;t[53]!==p?(rt=h.jsx("input",{type:"checkbox",checked:p,onChange:wt,className:"mr-1 accent-primary"}),t[53]=p,t[54]=rt):rt=t[54];let en;t[55]===Symbol.for("react.memo_cache_sentinel")?(en=h.jsx("kbd",{children:"Alt"}),t[55]=en):en=t[55];let Vt;t[56]===Symbol.for("react.memo_cache_sentinel")?(Vt=h.jsxs("span",{children:["[EXPERIMENTAL] Zoom to mouse ",en,"+",h.jsx("kbd",{children:"Wheel"})]}),t[56]=Vt):Vt=t[56];let xt;t[57]!==rt?(xt=h.jsx("div",{className:"flex items-center space-x-2",children:h.jsxs("label",{className:"flex items-center text-xs select-none cursor-pointer",children:[rt,Vt]})}),t[57]=rt,t[58]=xt):xt=t[58];const It=s*1e3;let _t;t[59]!==It?(_t=Or(It,"mm:ss.SS"),t[59]=It,t[60]=_t):_t=t[60];const Mt=s*1e3;let Pt;t[61]!==Mt?(Pt=Or(Mt,"mm:ss.SS"),t[61]=Mt,t[62]=Pt):Pt=t[62];let St;t[63]!==_t||t[64]!==Pt?(St=h.jsx("time",{dateTime:_t,className:"font-mono w-20 text-right",children:Pt}),t[63]=_t,t[64]=Pt,t[65]=St):St=t[65];let Wt;t[66]===Symbol.for("react.memo_cache_sentinel")?(Wt=h.jsx("span",{className:"mx-1 text-muted-foreground",children:"/"}),t[66]=Wt):Wt=t[66];const Rt=a*1e3;let Et;t[67]!==Rt?(Et=Or(Rt,"mm:ss.SS"),t[67]=Rt,t[68]=Et):Et=t[68];const $t=a*1e3;let it;t[69]!==$t?(it=Or($t,"mm:ss.SS"),t[69]=$t,t[70]=it):it=t[70];let ot;t[71]!==Et||t[72]!==it?(ot=h.jsx("time",{dateTime:Et,className:"font-mono w-20 text-left",children:it}),t[71]=Et,t[72]=it,t[73]=ot):ot=t[73];let at;t[74]!==St||t[75]!==ot?(at=h.jsxs("div",{className:"flex-1 flex items-center justify-center",children:[St,Wt,ot]}),t[74]=St,t[75]=ot,t[76]=at):at=t[76];let kt;t[77]!==je||t[78]!==nt||t[79]!==vt||t[80]!==xt||t[81]!==at?(kt=h.jsxs("div",{className:"flex space-x-2 m-2",children:[je,nt,vt,xt,at]}),t[77]=je,t[78]=nt,t[79]=vt,t[80]=xt,t[81]=at,t[82]=kt):kt=t[82];const lt=`minmax(${We}px, 1fr) ${a*i}px`,Ve=`${Ml}px repeat(${e.length}, ${Il}px)`,qn=`${We+a*i}px`;let tn;t[83]!==lt||t[84]!==Ve||t[85]!==qn?(tn={gridTemplateColumns:lt,gridTemplateRows:Ve,minWidth:qn},t[83]=lt,t[84]=Ve,t[85]=qn,t[86]=tn):tn=t[86];let nn;t[87]===Symbol.for("react.memo_cache_sentinel")?(nn=h.jsx("div",{className:"h-6 sticky left-0 bg-card z-20",style:{gridColumn:"1 / 2",gridRow:"1"}}),t[87]=nn):nn=t[87];let Hn;t[88]===Symbol.for("react.memo_cache_sentinel")?(Hn={gridColumn:"2 / 3",gridRow:"1"},t[88]=Hn):Hn=t[88];let zt;t[89]!==tt?(zt=h.jsx("div",{className:"relative border-b border-border bg-card-foreground/10 w-full",style:Hn,children:tt()}),t[89]=tt,t[90]=zt):zt=t[90];let sn;if(t[91]!==T||t[92]!==e||t[93]!==i){let X;t[95]!==T||t[96]!==i?(X=(se,Q)=>h.jsxs(Ff.Fragment,{children:[h.jsx("div",{className:"flex items-center h-16 px-2 border-b border-border text-xs text-muted-foreground sticky left-0 bg-card z-20",style:{gridColumn:"1 / 2",gridRow:`${Q+2}`},children:se.name}),h.jsx("div",{className:"relative h-16 border-b border-border flex items-center justify-center cursor-pointer",style:{gridColumn:"2 / 3",gridRow:`${Q+2}`},onClick:le=>T(le.clientX),children:se.type==="audio"?h.jsx("div",{ref:m,className:"absolute left-0 w-full",style:{top:"50%",transform:"translateY(-50%)",height:"55px",pointerEvents:"none"}}):se.keyframes?.map(le=>h.jsx(mw,{keyframe:le,trackId:se.id,zoom:i,onUpdate:M},le.id))})]},se.id),t[95]=T,t[96]=i,t[97]=X):X=t[97],sn=[...e].sort($2).map(X),t[91]=T,t[92]=e,t[93]=i,t[94]=sn}else sn=t[94];const Ci=`${We+s*i}px`,ji=`${Ml-8+e.length*Il}px`;let Kn;t[98]!==Ci||t[99]!==ji?(Kn={left:Ci,top:"8px",height:ji},t[98]=Ci,t[99]=ji,t[100]=Kn):Kn=t[100];let fr;t[101]===Symbol.for("react.memo_cache_sentinel")?(fr=h.jsx("div",{className:"absolute left-1/2 w-4 h-4 bg-primary cursor-ew-resize group-hover:bg-primary/80",style:{transform:"translate(-50%, -100%) rotate(45deg)"}}),t[101]=fr):fr=t[101];let Xn;t[102]!==Kn?(Xn=h.jsx("div",{className:"z-10 absolute w-0.5 bg-primary cursor-ew-resize hover:bg-primary/80 group",style:Kn,onMouseDown:ne,children:fr}),t[102]=Kn,t[103]=Xn):Xn=t[103];let Qn;t[104]!==tn||t[105]!==zt||t[106]!==sn||t[107]!==Xn?(Qn=h.jsx("div",{className:"w-full flex-1 overflow-x-auto relative",ref:y,children:h.jsxs("div",{ref:k,className:"grid w-full relative",style:tn,children:[nn,zt,sn,Xn]})}),t[104]=tn,t[105]=zt,t[106]=sn,t[107]=Xn,t[108]=Qn):Qn=t[108];let hr;return t[109]!==kt||t[110]!==Qn?(hr=h.jsxs("div",{className:"flex flex-col w-full h-full space-y-2 bg-card",children:[kt,Qn]}),t[109]=kt,t[110]=Qn,t[111]=hr):hr=t[111],hr};function R2(t){return t.type==="audio"}function $2(t,e){return t.type==="audio"?-1:e.type==="audio"?1:0}function z2(){const t=D.c(15),e=sr(),n=yt();let s,r;t[0]!==e.theme?(s=()=>{const g=window.document.documentElement;g.classList.remove("light","dark"),g.classList.add(e.theme)},r=[e.theme],t[0]=e.theme,t[1]=s,t[2]=r):(s=t[1],r=t[2]),z.useEffect(s,r);let i,o;t[3]!==n?(i=()=>{const g=m=>{n.saved||!n.cart||(m.preventDefault(),m.returnValue="")};return window.addEventListener("beforeunload",g),()=>{window.removeEventListener("beforeunload",g)}},o=[n],t[3]=n,t[4]=i,t[5]=o):(i=t[4],o=t[5]),z.useEffect(i,o);let a,l;t[6]!==e.saveInterval||t[7]!==n?(a=()=>{const g=setInterval(()=>{!n.saved&&n.cart&&n.saveProject().catch(D2)},e.saveInterval*1e3);return()=>{clearInterval(g)}},l=[n,e.saveInterval],t[6]=e.saveInterval,t[7]=n,t[8]=a,t[9]=l):(a=t[8],l=t[9]),z.useEffect(a,l);let c,u;t[10]===Symbol.for("react.memo_cache_sentinel")?(c=h.jsxs(is,{minSize:5,defaultSize:25,className:"bg-card flex flex-col gap-4",children:[h.jsx(yv,{}),h.jsx(Vv,{})]}),u=h.jsx(so,{}),t[10]=c,t[11]=u):(c=t[10],u=t[11]);let f,d;t[12]===Symbol.for("react.memo_cache_sentinel")?(f=h.jsx(is,{minSize:5,defaultSize:80,children:h.jsxs(no,{direction:"horizontal",autoSaveId:"tca-preview",autoSave:"true",children:[c,u,h.jsx(is,{minSize:5,defaultSize:75,children:h.jsx(Wl,{FallbackComponent:Pu,children:h.jsx(dw,{})})})]})}),d=h.jsx(so,{}),t[12]=f,t[13]=d):(f=t[12],d=t[13]);let p;return t[14]===Symbol.for("react.memo_cache_sentinel")?(p=h.jsx("div",{className:"h-screen w-screen",children:h.jsxs(no,{direction:"vertical",autoSaveId:"tca-project",autoSave:"true",children:[f,d,h.jsx(is,{minSize:5,defaultSize:20,children:h.jsx(P2,{})})]})}),t[14]=p):p=t[14],p}function D2(t){console.error("Auto-save failed:",t)}function Jo(t){const e=D.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let s;return e[2]!==n?(s=h.jsx(sd,{"data-slot":"alert-dialog",...n}),e[2]=n,e[3]=s):s=e[3],s}function L2(t){const e=D.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let s;return e[2]!==n?(s=h.jsx(ad,{"data-slot":"alert-dialog-portal",...n}),e[2]=n,e[3]=s):s=e[3],s}function F2(t){const e=D.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=U("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50 backdrop-blur",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx(ld,{"data-slot":"alert-dialog-overlay",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function ea(t){const e=D.c(9);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]===Symbol.for("react.memo_cache_sentinel")?(r=h.jsx(F2,{}),e[3]=r):r=e[3];let i;e[4]!==n?(i=U("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",n),e[4]=n,e[5]=i):i=e[5];let o;return e[6]!==s||e[7]!==i?(o=h.jsxs(L2,{children:[r,h.jsx(rd,{"data-slot":"alert-dialog-content",className:i,...s})]}),e[6]=s,e[7]=i,e[8]=o):o=e[8],o}function ta(t){const e=D.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=U("flex flex-col gap-2 text-center sm:text-left",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx("div",{"data-slot":"alert-dialog-header",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function na(t){const e=D.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=U("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx("div",{"data-slot":"alert-dialog-footer",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function sa(t){const e=D.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=U("text-lg font-semibold",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx(id,{"data-slot":"alert-dialog-title",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function ra(t){const e=D.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=U("text-sm",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx(od,{"data-slot":"alert-dialog-description",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function B2(t){const e=D.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=U(fc({variant:"outline"}),n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=h.jsx(nd,{className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function U2(){const t=[],e=document.createElement("canvas");return e.getContext("webgl")||e.getContext("experimental-webgl")||t.push("WebGL / 3D Graphics"),"AudioContext"in window||"webkitAudioContext"in window||t.push("Web Audio API (AudioContext)"),"requestAnimationFrame"in window||t.push("Animation Frame API (requestAnimationFrame)"),t}const Z2=()=>{const t=D.c(22);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],t[0]=e):e=t[0];const[n,s]=z.useState(e),[r,i]=z.useState(!1);let o,a;if(t[1]===Symbol.for("react.memo_cache_sentinel")?(o=()=>{const x=U2();(x.length>0||!ms)&&(s(x),setTimeout(()=>{i(!0)},10))},a=[],t[1]=o,t[2]=a):(o=t[1],a=t[2]),z.useEffect(o,a),!r)return null;let l;t[3]===Symbol.for("react.memo_cache_sentinel")?(l=h.jsx(sa,{children:"Missing Browser Capabilities"}),t[3]=l):l=t[3];let c;t[4]!==n?(c=n.map(V2),t[4]=n,t[5]=c):c=t[5];let u;t[6]===Symbol.for("react.memo_cache_sentinel")?(u=!ms&&h.jsxs("li",{children:["File System Access API",h.jsx("br",{}),h.jsx("span",{className:"text-xs text-muted-foreground",children:"Used for autosave and loading files directly. Without it, you'll need to manually download and upload your files each time."})]}),t[6]=u):u=t[6];let f;t[7]!==c?(f=h.jsxs("ul",{className:"my-2 list-disc list-inside",children:[c,u]}),t[7]=c,t[8]=f):f=t[8];let d;t[9]===Symbol.for("react.memo_cache_sentinel")?(d=h.jsx("strong",{children:"Chrome"}),t[9]=d):d=t[9];let p;t[10]===Symbol.for("react.memo_cache_sentinel")?(p=h.jsx("strong",{children:"Edge"}),t[10]=p):p=t[10];let g;t[11]===Symbol.for("react.memo_cache_sentinel")?(g=h.jsx("strong",{children:"Brave"}),t[11]=g):g=t[11];let m;t[12]!==f?(m=h.jsxs(ta,{children:[l,h.jsxs(ra,{children:["This app requires certain browser features to work correctly. Your current browser is missing the following capabilities:",f,"To use all features, switch to a modern Chromium-based browser like ",d,","," ",p,", or ",g,"."]})]}),t[12]=f,t[13]=m):m=t[13];let b;t[14]!==n.length?(b=!ms&&n.length===0&&h.jsx(na,{children:h.jsx(B2,{children:"Acknowledge"})}),t[14]=n.length,t[15]=b):b=t[15];let y;t[16]!==m||t[17]!==b?(y=h.jsxs(ea,{children:[m,b]}),t[16]=m,t[17]=b,t[18]=y):y=t[18];let k;return t[19]!==r||t[20]!==y?(k=h.jsx(Jo,{open:r,onOpenChange:i,children:y}),t[19]=r,t[20]=y,t[21]=k):k=t[21],k};function V2(t){return h.jsx("li",{children:t},t)}const ia=Symbol.for("yaml.alias"),Ao=Symbol.for("yaml.document"),vn=Symbol.for("yaml.map"),Hu=Symbol.for("yaml.pair"),Zt=Symbol.for("yaml.scalar"),Ns=Symbol.for("yaml.seq"),mt=Symbol.for("yaml.node.type"),Gn=t=>!!t&&typeof t=="object"&&t[mt]===ia,wi=t=>!!t&&typeof t=="object"&&t[mt]===Ao,ar=t=>!!t&&typeof t=="object"&&t[mt]===vn,Ce=t=>!!t&&typeof t=="object"&&t[mt]===Hu,ge=t=>!!t&&typeof t=="object"&&t[mt]===Zt,lr=t=>!!t&&typeof t=="object"&&t[mt]===Ns;function Oe(t){if(t&&typeof t=="object")switch(t[mt]){case vn:case Ns:return!0}return!1}function Ae(t){if(t&&typeof t=="object")switch(t[mt]){case ia:case vn:case Zt:case Ns:return!0}return!1}const Ku=t=>(ge(t)||Oe(t))&&!!t.anchor,jn=Symbol("break visit"),W2=Symbol("skip children"),Vs=Symbol("remove node");function Os(t,e){const n=Y2(e);wi(t)?cs(null,t.contents,n,Object.freeze([t]))===Vs&&(t.contents=null):cs(null,t,n,Object.freeze([]))}Os.BREAK=jn;Os.SKIP=W2;Os.REMOVE=Vs;function cs(t,e,n,s){const r=G2(t,e,n,s);if(Ae(r)||Ce(r))return q2(t,s,r),cs(t,r,n,s);if(typeof r!="symbol"){if(Oe(e)){s=Object.freeze(s.concat(e));for(let i=0;i<e.items.length;++i){const o=cs(i,e.items[i],n,s);if(typeof o=="number")i=o-1;else{if(o===jn)return jn;o===Vs&&(e.items.splice(i,1),i-=1)}}}else if(Ce(e)){s=Object.freeze(s.concat(e));const i=cs("key",e.key,n,s);if(i===jn)return jn;i===Vs&&(e.key=null);const o=cs("value",e.value,n,s);if(o===jn)return jn;o===Vs&&(e.value=null)}}return r}function Y2(t){return typeof t=="object"&&(t.Collection||t.Node||t.Value)?Object.assign({Alias:t.Node,Map:t.Node,Scalar:t.Node,Seq:t.Node},t.Value&&{Map:t.Value,Scalar:t.Value,Seq:t.Value},t.Collection&&{Map:t.Collection,Seq:t.Collection},t):t}function G2(t,e,n,s){if(typeof n=="function")return n(t,e,s);if(ar(e))return n.Map?.(t,e,s);if(lr(e))return n.Seq?.(t,e,s);if(Ce(e))return n.Pair?.(t,e,s);if(ge(e))return n.Scalar?.(t,e,s);if(Gn(e))return n.Alias?.(t,e,s)}function q2(t,e,n){const s=e[e.length-1];if(Oe(s))s.items[t]=n;else if(Ce(s))t==="key"?s.key=n:s.value=n;else if(wi(s))s.contents=n;else{const r=Gn(s)?"alias":"scalar";throw new Error(`Cannot replace node with ${r} parent`)}}const H2={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},K2=t=>t.replace(/[!,[\]{}]/g,e=>H2[e]);class qe{constructor(e,n){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},qe.defaultYaml,e),this.tags=Object.assign({},qe.defaultTags,n)}clone(){const e=new qe(this.yaml,this.tags);return e.docStart=this.docStart,e}atDocument(){const e=new qe(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:qe.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},qe.defaultTags);break}return e}add(e,n){this.atNextDocument&&(this.yaml={explicit:qe.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},qe.defaultTags),this.atNextDocument=!1);const s=e.trim().split(/[ \t]+/),r=s.shift();switch(r){case"%TAG":{if(s.length!==2&&(n(0,"%TAG directive should contain exactly two parts"),s.length<2))return!1;const[i,o]=s;return this.tags[i]=o,!0}case"%YAML":{if(this.yaml.explicit=!0,s.length!==1)return n(0,"%YAML directive should contain exactly one part"),!1;const[i]=s;if(i==="1.1"||i==="1.2")return this.yaml.version=i,!0;{const o=/^\d+\.\d+$/.test(i);return n(6,`Unsupported YAML version ${i}`,o),!1}}default:return n(0,`Unknown directive ${r}`,!0),!1}}tagName(e,n){if(e==="!")return"!";if(e[0]!=="!")return n(`Not a valid tag: ${e}`),null;if(e[1]==="<"){const o=e.slice(2,-1);return o==="!"||o==="!!"?(n(`Verbatim tags aren't resolved, so ${e} is invalid.`),null):(e[e.length-1]!==">"&&n("Verbatim tags must end with a >"),o)}const[,s,r]=e.match(/^(.*!)([^!]*)$/s);r||n(`The ${e} tag has no suffix`);const i=this.tags[s];if(i)try{return i+decodeURIComponent(r)}catch(o){return n(String(o)),null}return s==="!"?e:(n(`Could not resolve tag: ${e}`),null)}tagString(e){for(const[n,s]of Object.entries(this.tags))if(e.startsWith(s))return n+K2(e.substring(s.length));return e[0]==="!"?e:`!<${e}>`}toString(e){const n=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],s=Object.entries(this.tags);let r;if(e&&s.length>0&&Ae(e.contents)){const i={};Os(e.contents,(o,a)=>{Ae(a)&&a.tag&&(i[a.tag]=!0)}),r=Object.keys(i)}else r=[];for(const[i,o]of s)i==="!!"&&o==="tag:yaml.org,2002:"||(!e||r.some(a=>a.startsWith(o)))&&n.push(`%TAG ${i} ${o}`);return n.join(`
`)}}qe.defaultYaml={explicit:!1,version:"1.2"};qe.defaultTags={"!!":"tag:yaml.org,2002:"};function Xu(t){if(/[\x00-\x19\s,[\]{}]/.test(t)){const n=`Anchor must not contain whitespace or control characters: ${JSON.stringify(t)}`;throw new Error(n)}return!0}function Qu(t){const e=new Set;return Os(t,{Value(n,s){s.anchor&&e.add(s.anchor)}}),e}function Ju(t,e){for(let n=1;;++n){const s=`${t}${n}`;if(!e.has(s))return s}}function X2(t,e){const n=[],s=new Map;let r=null;return{onAnchor:i=>{n.push(i),r??(r=Qu(t));const o=Ju(e,r);return r.add(o),o},setAnchors:()=>{for(const i of n){const o=s.get(i);if(typeof o=="object"&&o.anchor&&(ge(o.node)||Oe(o.node)))o.node.anchor=o.anchor;else{const a=new Error("Failed to resolve repeated object (this should not happen)");throw a.source=i,a}}},sourceObjects:s}}function us(t,e,n,s){if(s&&typeof s=="object")if(Array.isArray(s))for(let r=0,i=s.length;r<i;++r){const o=s[r],a=us(t,s,String(r),o);a===void 0?delete s[r]:a!==o&&(s[r]=a)}else if(s instanceof Map)for(const r of Array.from(s.keys())){const i=s.get(r),o=us(t,s,r,i);o===void 0?s.delete(r):o!==i&&s.set(r,o)}else if(s instanceof Set)for(const r of Array.from(s)){const i=us(t,s,r,r);i===void 0?s.delete(r):i!==r&&(s.delete(r),s.add(i))}else for(const[r,i]of Object.entries(s)){const o=us(t,s,r,i);o===void 0?delete s[r]:o!==i&&(s[r]=o)}return t.call(e,n,s)}function pt(t,e,n){if(Array.isArray(t))return t.map((s,r)=>pt(s,String(r),n));if(t&&typeof t.toJSON=="function"){if(!n||!Ku(t))return t.toJSON(e,n);const s={aliasCount:0,count:1,res:void 0};n.anchors.set(t,s),n.onCreate=i=>{s.res=i,delete n.onCreate};const r=t.toJSON(e,n);return n.onCreate&&n.onCreate(r),r}return typeof t=="bigint"&&!n?.keep?Number(t):t}class oa{constructor(e){Object.defineProperty(this,mt,{value:e})}clone(){const e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}toJS(e,{mapAsMap:n,maxAliasCount:s,onAnchor:r,reviver:i}={}){if(!wi(e))throw new TypeError("A document argument is required");const o={anchors:new Map,doc:e,keep:!0,mapAsMap:n===!0,mapKeyWarned:!1,maxAliasCount:typeof s=="number"?s:100},a=pt(this,"",o);if(typeof r=="function")for(const{count:l,res:c}of o.anchors.values())r(c,l);return typeof i=="function"?us(i,{"":a},"",a):a}}class aa extends oa{constructor(e){super(ia),this.source=e,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(e,n){let s;n?.aliasResolveCache?s=n.aliasResolveCache:(s=[],Os(e,{Node:(i,o)=>{(Gn(o)||Ku(o))&&s.push(o)}}),n&&(n.aliasResolveCache=s));let r;for(const i of s){if(i===this)break;i.anchor===this.source&&(r=i)}return r}toJSON(e,n){if(!n)return{source:this.source};const{anchors:s,doc:r,maxAliasCount:i}=n,o=this.resolve(r,n);if(!o){const l=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(l)}let a=s.get(o);if(a||(pt(o,null,n),a=s.get(o)),a?.res===void 0){const l="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(l)}if(i>=0&&(a.count+=1,a.aliasCount===0&&(a.aliasCount=Ur(r,o,s)),a.count*a.aliasCount>i)){const l="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(l)}return a.res}toString(e,n,s){const r=`*${this.source}`;if(e){if(Xu(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source)){const i=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(i)}if(e.implicitKey)return`${r} `}return r}}function Ur(t,e,n){if(Gn(e)){const s=e.resolve(t),r=n&&s&&n.get(s);return r?r.count*r.aliasCount:0}else if(Oe(e)){let s=0;for(const r of e.items){const i=Ur(t,r,n);i>s&&(s=i)}return s}else if(Ce(e)){const s=Ur(t,e.key,n),r=Ur(t,e.value,n);return Math.max(s,r)}return 1}const ef=t=>!t||typeof t!="function"&&typeof t!="object";class H extends oa{constructor(e){super(Zt),this.value=e}toJSON(e,n){return n?.keep?this.value:pt(this.value,e,n)}toString(){return String(this.value)}}H.BLOCK_FOLDED="BLOCK_FOLDED";H.BLOCK_LITERAL="BLOCK_LITERAL";H.PLAIN="PLAIN";H.QUOTE_DOUBLE="QUOTE_DOUBLE";H.QUOTE_SINGLE="QUOTE_SINGLE";const Q2="tag:yaml.org,2002:";function J2(t,e,n){if(e){const s=n.filter(i=>i.tag===e),r=s.find(i=>!i.format)??s[0];if(!r)throw new Error(`Tag ${e} not found`);return r}return n.find(s=>s.identify?.(t)&&!s.format)}function tr(t,e,n){if(wi(t)&&(t=t.contents),Ae(t))return t;if(Ce(t)){const f=n.schema[vn].createNode?.(n.schema,null,n);return f.items.push(t),f}(t instanceof String||t instanceof Number||t instanceof Boolean||typeof BigInt<"u"&&t instanceof BigInt)&&(t=t.valueOf());const{aliasDuplicateObjects:s,onAnchor:r,onTagObj:i,schema:o,sourceObjects:a}=n;let l;if(s&&t&&typeof t=="object"){if(l=a.get(t),l)return l.anchor??(l.anchor=r(t)),new aa(l.anchor);l={anchor:null,node:null},a.set(t,l)}e?.startsWith("!!")&&(e=Q2+e.slice(2));let c=J2(t,e,o.tags);if(!c){if(t&&typeof t.toJSON=="function"&&(t=t.toJSON()),!t||typeof t!="object"){const f=new H(t);return l&&(l.node=f),f}c=t instanceof Map?o[vn]:Symbol.iterator in Object(t)?o[Ns]:o[vn]}i&&(i(c),delete n.onTagObj);const u=c?.createNode?c.createNode(n.schema,t,n):typeof c?.nodeClass?.from=="function"?c.nodeClass.from(n.schema,t,n):new H(t);return e?u.tag=e:c.default||(u.tag=c.tag),l&&(l.node=u),u}function oi(t,e,n){let s=n;for(let r=e.length-1;r>=0;--r){const i=e[r];if(typeof i=="number"&&Number.isInteger(i)&&i>=0){const o=[];o[i]=s,s=o}else s=new Map([[i,s]])}return tr(s,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:t,sourceObjects:new Map})}const Ds=t=>t==null||typeof t=="object"&&!!t[Symbol.iterator]().next().done;class tf extends oa{constructor(e,n){super(e),Object.defineProperty(this,"schema",{value:n,configurable:!0,enumerable:!1,writable:!0})}clone(e){const n=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return e&&(n.schema=e),n.items=n.items.map(s=>Ae(s)||Ce(s)?s.clone(e):s),this.range&&(n.range=this.range.slice()),n}addIn(e,n){if(Ds(e))this.add(n);else{const[s,...r]=e,i=this.get(s,!0);if(Oe(i))i.addIn(r,n);else if(i===void 0&&this.schema)this.set(s,oi(this.schema,r,n));else throw new Error(`Expected YAML collection at ${s}. Remaining path: ${r}`)}}deleteIn(e){const[n,...s]=e;if(s.length===0)return this.delete(n);const r=this.get(n,!0);if(Oe(r))return r.deleteIn(s);throw new Error(`Expected YAML collection at ${n}. Remaining path: ${s}`)}getIn(e,n){const[s,...r]=e,i=this.get(s,!0);return r.length===0?!n&&ge(i)?i.value:i:Oe(i)?i.getIn(r,n):void 0}hasAllNullValues(e){return this.items.every(n=>{if(!Ce(n))return!1;const s=n.value;return s==null||e&&ge(s)&&s.value==null&&!s.commentBefore&&!s.comment&&!s.tag})}hasIn(e){const[n,...s]=e;if(s.length===0)return this.has(n);const r=this.get(n,!0);return Oe(r)?r.hasIn(s):!1}setIn(e,n){const[s,...r]=e;if(r.length===0)this.set(s,n);else{const i=this.get(s,!0);if(Oe(i))i.setIn(r,n);else if(i===void 0&&this.schema)this.set(s,oi(this.schema,r,n));else throw new Error(`Expected YAML collection at ${s}. Remaining path: ${r}`)}}}const ex=t=>t.replace(/^(?!$)(?: $)?/gm,"#");function Gt(t,e){return/^\n+$/.test(t)?t.substring(1):e?t.replace(/^(?! *$)/gm,e):t}const $n=(t,e,n)=>t.endsWith(`
`)?Gt(n,e):n.includes(`
`)?`
`+Gt(n,e):(t.endsWith(" ")?"":" ")+n,nf="flow",Co="block",Zr="quoted";function xi(t,e,n="flow",{indentAtStart:s,lineWidth:r=80,minContentWidth:i=20,onFold:o,onOverflow:a}={}){if(!r||r<0)return t;r<i&&(i=0);const l=Math.max(1+i,1+r-e.length);if(t.length<=l)return t;const c=[],u={};let f=r-e.length;typeof s=="number"&&(s>r-Math.max(2,i)?c.push(0):f=r-s);let d,p,g=!1,m=-1,b=-1,y=-1;n===Co&&(m=Pl(t,m,e.length),m!==-1&&(f=m+l));for(let x;x=t[m+=1];){if(n===Zr&&x==="\\"){switch(b=m,t[m+1]){case"x":m+=3;break;case"u":m+=5;break;case"U":m+=9;break;default:m+=1}y=m}if(x===`
`)n===Co&&(m=Pl(t,m,e.length)),f=m+e.length+l,d=void 0;else{if(x===" "&&p&&p!==" "&&p!==`
`&&p!=="	"){const _=t[m+1];_&&_!==" "&&_!==`
`&&_!=="	"&&(d=m)}if(m>=f)if(d)c.push(d),f=d+l,d=void 0;else if(n===Zr){for(;p===" "||p==="	";)p=x,x=t[m+=1],g=!0;const _=m>y+1?m-2:b-1;if(u[_])return t;c.push(_),u[_]=!0,f=_+l,d=void 0}else g=!0}p=x}if(g&&a&&a(),c.length===0)return t;o&&o();let k=t.slice(0,c[0]);for(let x=0;x<c.length;++x){const _=c[x],E=c[x+1]||t.length;_===0?k=`
${e}${t.slice(0,E)}`:(n===Zr&&u[_]&&(k+=`${t[_]}\\`),k+=`
${e}${t.slice(_+1,E)}`)}return k}function Pl(t,e,n){let s=e,r=e+1,i=t[r];for(;i===" "||i==="	";)if(e<r+n)i=t[++e];else{do i=t[++e];while(i&&i!==`
`);s=e,r=e+1,i=t[r]}return s}const _i=(t,e)=>({indentAtStart:e?t.indent.length:t.indentAtStart,lineWidth:t.options.lineWidth,minContentWidth:t.options.minContentWidth}),Si=t=>/^(%|---|\.\.\.)/m.test(t);function tx(t,e,n){if(!e||e<0)return!1;const s=e-n,r=t.length;if(r<=s)return!1;for(let i=0,o=0;i<r;++i)if(t[i]===`
`){if(i-o>s)return!0;if(o=i+1,r-o<=s)return!1}return!0}function Ws(t,e){const n=JSON.stringify(t);if(e.options.doubleQuotedAsJSON)return n;const{implicitKey:s}=e,r=e.options.doubleQuotedMinMultiLineLength,i=e.indent||(Si(t)?"  ":"");let o="",a=0;for(let l=0,c=n[l];c;c=n[++l])if(c===" "&&n[l+1]==="\\"&&n[l+2]==="n"&&(o+=n.slice(a,l)+"\\ ",l+=1,a=l,c="\\"),c==="\\")switch(n[l+1]){case"u":{o+=n.slice(a,l);const u=n.substr(l+2,4);switch(u){case"0000":o+="\\0";break;case"0007":o+="\\a";break;case"000b":o+="\\v";break;case"001b":o+="\\e";break;case"0085":o+="\\N";break;case"00a0":o+="\\_";break;case"2028":o+="\\L";break;case"2029":o+="\\P";break;default:u.substr(0,2)==="00"?o+="\\x"+u.substr(2):o+=n.substr(l,6)}l+=5,a=l+1}break;case"n":if(s||n[l+2]==='"'||n.length<r)l+=1;else{for(o+=n.slice(a,l)+`

`;n[l+2]==="\\"&&n[l+3]==="n"&&n[l+4]!=='"';)o+=`
`,l+=2;o+=i,n[l+2]===" "&&(o+="\\"),l+=1,a=l+1}break;default:l+=1}return o=a?o+n.slice(a):n,s?o:xi(o,i,Zr,_i(e,!1))}function jo(t,e){if(e.options.singleQuote===!1||e.implicitKey&&t.includes(`
`)||/[ \t]\n|\n[ \t]/.test(t))return Ws(t,e);const n=e.indent||(Si(t)?"  ":""),s="'"+t.replace(/'/g,"''").replace(/\n+/g,`$&
${n}`)+"'";return e.implicitKey?s:xi(s,n,nf,_i(e,!1))}function fs(t,e){const{singleQuote:n}=e.options;let s;if(n===!1)s=Ws;else{const r=t.includes('"'),i=t.includes("'");r&&!i?s=jo:i&&!r?s=Ws:s=n?jo:Ws}return s(t,e)}let Io;try{Io=new RegExp(`(^|(?<!
))
+(?!
|$)`,"g")}catch{Io=/\n+(?!\n|$)/g}function Vr({comment:t,type:e,value:n},s,r,i){const{blockQuote:o,commentString:a,lineWidth:l}=s.options;if(!o||/\n[\t ]+$/.test(n))return fs(n,s);const c=s.indent||(s.forceBlockIndent||Si(n)?"  ":""),u=o==="literal"?!0:o==="folded"||e===H.BLOCK_FOLDED?!1:e===H.BLOCK_LITERAL?!0:!tx(n,l,c.length);if(!n)return u?`|
`:`>
`;let f,d;for(d=n.length;d>0;--d){const E=n[d-1];if(E!==`
`&&E!=="	"&&E!==" ")break}let p=n.substring(d);const g=p.indexOf(`
`);g===-1?f="-":n===p||g!==p.length-1?(f="+",i&&i()):f="",p&&(n=n.slice(0,-p.length),p[p.length-1]===`
`&&(p=p.slice(0,-1)),p=p.replace(Io,`$&${c}`));let m=!1,b,y=-1;for(b=0;b<n.length;++b){const E=n[b];if(E===" ")m=!0;else if(E===`
`)y=b;else break}let k=n.substring(0,y<b?y+1:b);k&&(n=n.substring(k.length),k=k.replace(/\n+/g,`$&${c}`));let _=(m?c?"2":"1":"")+f;if(t&&(_+=" "+a(t.replace(/ ?[\r\n]+/g," ")),r&&r()),!u){const E=n.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${c}`);let T=!1;const v=_i(s,!0);o!=="folded"&&e!==H.BLOCK_FOLDED&&(v.onOverflow=()=>{T=!0});const w=xi(`${k}${E}${p}`,c,Co,v);if(!T)return`>${_}
${c}${w}`}return n=n.replace(/\n+/g,`$&${c}`),`|${_}
${c}${k}${n}${p}`}function nx(t,e,n,s){const{type:r,value:i}=t,{actualString:o,implicitKey:a,indent:l,indentStep:c,inFlow:u}=e;if(a&&i.includes(`
`)||u&&/[[\]{},]/.test(i))return fs(i,e);if(/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(i))return a||u||!i.includes(`
`)?fs(i,e):Vr(t,e,n,s);if(!a&&!u&&r!==H.PLAIN&&i.includes(`
`))return Vr(t,e,n,s);if(Si(i)){if(l==="")return e.forceBlockIndent=!0,Vr(t,e,n,s);if(a&&l===c)return fs(i,e)}const f=i.replace(/\n+/g,`$&
${l}`);if(o){const d=m=>m.default&&m.tag!=="tag:yaml.org,2002:str"&&m.test?.test(f),{compat:p,tags:g}=e.doc.schema;if(g.some(d)||p?.some(d))return fs(i,e)}return a?f:xi(f,l,nf,_i(e,!1))}function la(t,e,n,s){const{implicitKey:r,inFlow:i}=e,o=typeof t.value=="string"?t:Object.assign({},t,{value:String(t.value)});let{type:a}=t;a!==H.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(o.value)&&(a=H.QUOTE_DOUBLE);const l=u=>{switch(u){case H.BLOCK_FOLDED:case H.BLOCK_LITERAL:return r||i?fs(o.value,e):Vr(o,e,n,s);case H.QUOTE_DOUBLE:return Ws(o.value,e);case H.QUOTE_SINGLE:return jo(o.value,e);case H.PLAIN:return nx(o,e,n,s);default:return null}};let c=l(a);if(c===null){const{defaultKeyType:u,defaultStringType:f}=e.options,d=r&&u||f;if(c=l(d),c===null)throw new Error(`Unsupported default string type ${d}`)}return c}function sf(t,e){const n=Object.assign({blockQuote:!0,commentString:ex,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},t.schema.toStringOptions,e);let s;switch(n.collectionStyle){case"block":s=!1;break;case"flow":s=!0;break;default:s=null}return{anchors:new Set,doc:t,flowCollectionPadding:n.flowCollectionPadding?" ":"",indent:"",indentStep:typeof n.indent=="number"?" ".repeat(n.indent):"  ",inFlow:s,options:n}}function sx(t,e){if(e.tag){const r=t.filter(i=>i.tag===e.tag);if(r.length>0)return r.find(i=>i.format===e.format)??r[0]}let n,s;if(ge(e)){s=e.value;let r=t.filter(i=>i.identify?.(s));if(r.length>1){const i=r.filter(o=>o.test);i.length>0&&(r=i)}n=r.find(i=>i.format===e.format)??r.find(i=>!i.format)}else s=e,n=t.find(r=>r.nodeClass&&s instanceof r.nodeClass);if(!n){const r=s?.constructor?.name??(s===null?"null":typeof s);throw new Error(`Tag not resolved for ${r} value`)}return n}function rx(t,e,{anchors:n,doc:s}){if(!s.directives)return"";const r=[],i=(ge(t)||Oe(t))&&t.anchor;i&&Xu(i)&&(n.add(i),r.push(`&${i}`));const o=t.tag??(e.default?null:e.tag);return o&&r.push(s.directives.tagString(o)),r.join(" ")}function Es(t,e,n,s){if(Ce(t))return t.toString(e,n,s);if(Gn(t)){if(e.doc.directives)return t.toString(e);if(e.resolvedAliases?.has(t))throw new TypeError("Cannot stringify circular structure without alias nodes");e.resolvedAliases?e.resolvedAliases.add(t):e.resolvedAliases=new Set([t]),t=t.resolve(e.doc)}let r;const i=Ae(t)?t:e.doc.createNode(t,{onTagObj:l=>r=l});r??(r=sx(e.doc.schema.tags,i));const o=rx(i,r,e);o.length>0&&(e.indentAtStart=(e.indentAtStart??0)+o.length+1);const a=typeof r.stringify=="function"?r.stringify(i,e,n,s):ge(i)?la(i,e,n,s):i.toString(e,n,s);return o?ge(i)||a[0]==="{"||a[0]==="["?`${o} ${a}`:`${o}
${e.indent}${a}`:a}function ix({key:t,value:e},n,s,r){const{allNullValues:i,doc:o,indent:a,indentStep:l,options:{commentString:c,indentSeq:u,simpleKeys:f}}=n;let d=Ae(t)&&t.comment||null;if(f){if(d)throw new Error("With simple keys, key nodes cannot have comments");if(Oe(t)||!Ae(t)&&typeof t=="object"){const v="With simple keys, collection cannot be used as a key value";throw new Error(v)}}let p=!f&&(!t||d&&e==null&&!n.inFlow||Oe(t)||(ge(t)?t.type===H.BLOCK_FOLDED||t.type===H.BLOCK_LITERAL:typeof t=="object"));n=Object.assign({},n,{allNullValues:!1,implicitKey:!p&&(f||!i),indent:a+l});let g=!1,m=!1,b=Es(t,n,()=>g=!0,()=>m=!0);if(!p&&!n.inFlow&&b.length>1024){if(f)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");p=!0}if(n.inFlow){if(i||e==null)return g&&s&&s(),b===""?"?":p?`? ${b}`:b}else if(i&&!f||e==null&&p)return b=`? ${b}`,d&&!g?b+=$n(b,n.indent,c(d)):m&&r&&r(),b;g&&(d=null),p?(d&&(b+=$n(b,n.indent,c(d))),b=`? ${b}
${a}:`):(b=`${b}:`,d&&(b+=$n(b,n.indent,c(d))));let y,k,x;Ae(e)?(y=!!e.spaceBefore,k=e.commentBefore,x=e.comment):(y=!1,k=null,x=null,e&&typeof e=="object"&&(e=o.createNode(e))),n.implicitKey=!1,!p&&!d&&ge(e)&&(n.indentAtStart=b.length+1),m=!1,!u&&l.length>=2&&!n.inFlow&&!p&&lr(e)&&!e.flow&&!e.tag&&!e.anchor&&(n.indent=n.indent.substring(2));let _=!1;const E=Es(e,n,()=>_=!0,()=>m=!0);let T=" ";if(d||y||k){if(T=y?`
`:"",k){const v=c(k);T+=`
${Gt(v,n.indent)}`}E===""&&!n.inFlow?T===`
`&&x&&(T=`

`):T+=`
${n.indent}`}else if(!p&&Oe(e)){const v=E[0],w=E.indexOf(`
`),S=w!==-1,N=n.inFlow??e.flow??e.items.length===0;if(S||!N){let O=!1;if(S&&(v==="&"||v==="!")){let A=E.indexOf(" ");v==="&"&&A!==-1&&A<w&&E[A+1]==="!"&&(A=E.indexOf(" ",A+1)),(A===-1||w<A)&&(O=!0)}O||(T=`
${n.indent}`)}}else(E===""||E[0]===`
`)&&(T="");return b+=T+E,n.inFlow?_&&s&&s():x&&!_?b+=$n(b,n.indent,c(x)):m&&r&&r(),b}function rf(t,e){(t==="debug"||t==="warn")&&console.warn(e)}const Cr="<<",Kt={identify:t=>t===Cr||typeof t=="symbol"&&t.description===Cr,default:"key",tag:"tag:yaml.org,2002:merge",test:/^<<$/,resolve:()=>Object.assign(new H(Symbol(Cr)),{addToJSMap:of}),stringify:()=>Cr},ox=(t,e)=>(Kt.identify(e)||ge(e)&&(!e.type||e.type===H.PLAIN)&&Kt.identify(e.value))&&t?.doc.schema.tags.some(n=>n.tag===Kt.tag&&n.default);function of(t,e,n){if(n=t&&Gn(n)?n.resolve(t.doc):n,lr(n))for(const s of n.items)Wi(t,e,s);else if(Array.isArray(n))for(const s of n)Wi(t,e,s);else Wi(t,e,n)}function Wi(t,e,n){const s=t&&Gn(n)?n.resolve(t.doc):n;if(!ar(s))throw new Error("Merge sources must be maps or map aliases");const r=s.toJSON(null,t,Map);for(const[i,o]of r)e instanceof Map?e.has(i)||e.set(i,o):e instanceof Set?e.add(i):Object.prototype.hasOwnProperty.call(e,i)||Object.defineProperty(e,i,{value:o,writable:!0,enumerable:!0,configurable:!0});return e}function af(t,e,{key:n,value:s}){if(Ae(n)&&n.addToJSMap)n.addToJSMap(t,e,s);else if(ox(t,n))of(t,e,s);else{const r=pt(n,"",t);if(e instanceof Map)e.set(r,pt(s,r,t));else if(e instanceof Set)e.add(r);else{const i=ax(n,r,t),o=pt(s,i,t);i in e?Object.defineProperty(e,i,{value:o,writable:!0,enumerable:!0,configurable:!0}):e[i]=o}}return e}function ax(t,e,n){if(e===null)return"";if(typeof e!="object")return String(e);if(Ae(t)&&n?.doc){const s=sf(n.doc,{});s.anchors=new Set;for(const i of n.anchors.keys())s.anchors.add(i.anchor);s.inFlow=!0,s.inStringifyKey=!0;const r=t.toString(s);if(!n.mapKeyWarned){let i=JSON.stringify(r);i.length>40&&(i=i.substring(0,36)+'..."'),rf(n.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${i}. Set mapAsMap: true to use object keys.`),n.mapKeyWarned=!0}return r}return JSON.stringify(e)}function ca(t,e,n){const s=tr(t,void 0,n),r=tr(e,void 0,n);return new Xe(s,r)}class Xe{constructor(e,n=null){Object.defineProperty(this,mt,{value:Hu}),this.key=e,this.value=n}clone(e){let{key:n,value:s}=this;return Ae(n)&&(n=n.clone(e)),Ae(s)&&(s=s.clone(e)),new Xe(n,s)}toJSON(e,n){const s=n?.mapAsMap?new Map:{};return af(n,s,this)}toString(e,n,s){return e?.doc?ix(this,e,n,s):JSON.stringify(this)}}function lf(t,e,n){return(e.inFlow??t.flow?cx:lx)(t,e,n)}function lx({comment:t,items:e},n,{blockItemPrefix:s,flowChars:r,itemIndent:i,onChompKeep:o,onComment:a}){const{indent:l,options:{commentString:c}}=n,u=Object.assign({},n,{indent:i,type:null});let f=!1;const d=[];for(let g=0;g<e.length;++g){const m=e[g];let b=null;if(Ae(m))!f&&m.spaceBefore&&d.push(""),ai(n,d,m.commentBefore,f),m.comment&&(b=m.comment);else if(Ce(m)){const k=Ae(m.key)?m.key:null;k&&(!f&&k.spaceBefore&&d.push(""),ai(n,d,k.commentBefore,f))}f=!1;let y=Es(m,u,()=>b=null,()=>f=!0);b&&(y+=$n(y,i,c(b))),f&&b&&(f=!1),d.push(s+y)}let p;if(d.length===0)p=r.start+r.end;else{p=d[0];for(let g=1;g<d.length;++g){const m=d[g];p+=m?`
${l}${m}`:`
`}}return t?(p+=`
`+Gt(c(t),l),a&&a()):f&&o&&o(),p}function cx({items:t},e,{flowChars:n,itemIndent:s}){const{indent:r,indentStep:i,flowCollectionPadding:o,options:{commentString:a}}=e;s+=i;const l=Object.assign({},e,{indent:s,inFlow:!0,type:null});let c=!1,u=0;const f=[];for(let g=0;g<t.length;++g){const m=t[g];let b=null;if(Ae(m))m.spaceBefore&&f.push(""),ai(e,f,m.commentBefore,!1),m.comment&&(b=m.comment);else if(Ce(m)){const k=Ae(m.key)?m.key:null;k&&(k.spaceBefore&&f.push(""),ai(e,f,k.commentBefore,!1),k.comment&&(c=!0));const x=Ae(m.value)?m.value:null;x?(x.comment&&(b=x.comment),x.commentBefore&&(c=!0)):m.value==null&&k?.comment&&(b=k.comment)}b&&(c=!0);let y=Es(m,l,()=>b=null);g<t.length-1&&(y+=","),b&&(y+=$n(y,s,a(b))),!c&&(f.length>u||y.includes(`
`))&&(c=!0),f.push(y),u=f.length}const{start:d,end:p}=n;if(f.length===0)return d+p;if(!c){const g=f.reduce((m,b)=>m+b.length+2,2);c=e.options.lineWidth>0&&g>e.options.lineWidth}if(c){let g=d;for(const m of f)g+=m?`
${i}${r}${m}`:`
`;return`${g}
${r}${p}`}else return`${d}${o}${f.join(" ")}${o}${p}`}function ai({indent:t,options:{commentString:e}},n,s,r){if(s&&r&&(s=s.replace(/^\n+/,"")),s){const i=Gt(e(s),t);n.push(i.trimStart())}}function zn(t,e){const n=ge(e)?e.value:e;for(const s of t)if(Ce(s)&&(s.key===e||s.key===n||ge(s.key)&&s.key.value===n))return s}class ht extends tf{static get tagName(){return"tag:yaml.org,2002:map"}constructor(e){super(vn,e),this.items=[]}static from(e,n,s){const{keepUndefined:r,replacer:i}=s,o=new this(e),a=(l,c)=>{if(typeof i=="function")c=i.call(n,l,c);else if(Array.isArray(i)&&!i.includes(l))return;(c!==void 0||r)&&o.items.push(ca(l,c,s))};if(n instanceof Map)for(const[l,c]of n)a(l,c);else if(n&&typeof n=="object")for(const l of Object.keys(n))a(l,n[l]);return typeof e.sortMapEntries=="function"&&o.items.sort(e.sortMapEntries),o}add(e,n){let s;Ce(e)?s=e:!e||typeof e!="object"||!("key"in e)?s=new Xe(e,e?.value):s=new Xe(e.key,e.value);const r=zn(this.items,s.key),i=this.schema?.sortMapEntries;if(r){if(!n)throw new Error(`Key ${s.key} already set`);ge(r.value)&&ef(s.value)?r.value.value=s.value:r.value=s.value}else if(i){const o=this.items.findIndex(a=>i(s,a)<0);o===-1?this.items.push(s):this.items.splice(o,0,s)}else this.items.push(s)}delete(e){const n=zn(this.items,e);return n?this.items.splice(this.items.indexOf(n),1).length>0:!1}get(e,n){const r=zn(this.items,e)?.value;return(!n&&ge(r)?r.value:r)??void 0}has(e){return!!zn(this.items,e)}set(e,n){this.add(new Xe(e,n),!0)}toJSON(e,n,s){const r=s?new s:n?.mapAsMap?new Map:{};n?.onCreate&&n.onCreate(r);for(const i of this.items)af(n,r,i);return r}toString(e,n,s){if(!e)return JSON.stringify(this);for(const r of this.items)if(!Ce(r))throw new Error(`Map items must all be pairs; found ${JSON.stringify(r)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),lf(this,e,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:s,onComment:n})}}const As={collection:"map",default:!0,nodeClass:ht,tag:"tag:yaml.org,2002:map",resolve(t,e){return ar(t)||e("Expected a mapping for this tag"),t},createNode:(t,e,n)=>ht.from(t,e,n)};class Zn extends tf{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(e){super(Ns,e),this.items=[]}add(e){this.items.push(e)}delete(e){const n=jr(e);return typeof n!="number"?!1:this.items.splice(n,1).length>0}get(e,n){const s=jr(e);if(typeof s!="number")return;const r=this.items[s];return!n&&ge(r)?r.value:r}has(e){const n=jr(e);return typeof n=="number"&&n<this.items.length}set(e,n){const s=jr(e);if(typeof s!="number")throw new Error(`Expected a valid index, not ${e}.`);const r=this.items[s];ge(r)&&ef(n)?r.value=n:this.items[s]=n}toJSON(e,n){const s=[];n?.onCreate&&n.onCreate(s);let r=0;for(const i of this.items)s.push(pt(i,String(r++),n));return s}toString(e,n,s){return e?lf(this,e,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:s,onComment:n}):JSON.stringify(this)}static from(e,n,s){const{replacer:r}=s,i=new this(e);if(n&&Symbol.iterator in Object(n)){let o=0;for(let a of n){if(typeof r=="function"){const l=n instanceof Set?a:String(o++);a=r.call(n,l,a)}i.items.push(tr(a,void 0,s))}}return i}}function jr(t){let e=ge(t)?t.value:t;return e&&typeof e=="string"&&(e=Number(e)),typeof e=="number"&&Number.isInteger(e)&&e>=0?e:null}const Cs={collection:"seq",default:!0,nodeClass:Zn,tag:"tag:yaml.org,2002:seq",resolve(t,e){return lr(t)||e("Expected a sequence for this tag"),t},createNode:(t,e,n)=>Zn.from(t,e,n)},Ei={identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify(t,e,n,s){return e=Object.assign({actualString:!0},e),la(t,e,n,s)}},ki={identify:t=>t==null,createNode:()=>new H(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new H(null),stringify:({source:t},e)=>typeof t=="string"&&ki.test.test(t)?t:e.options.nullStr},ua={identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:t=>new H(t[0]==="t"||t[0]==="T"),stringify({source:t,value:e},n){if(t&&ua.test.test(t)){const s=t[0]==="t"||t[0]==="T";if(e===s)return t}return e?n.options.trueStr:n.options.falseStr}};function jt({format:t,minFractionDigits:e,tag:n,value:s}){if(typeof s=="bigint")return String(s);const r=typeof s=="number"?s:Number(s);if(!isFinite(r))return isNaN(r)?".nan":r<0?"-.inf":".inf";let i=Object.is(s,-0)?"-0":JSON.stringify(s);if(!t&&e&&(!n||n==="tag:yaml.org,2002:float")&&/^\d/.test(i)){let o=i.indexOf(".");o<0&&(o=i.length,i+=".");let a=e-(i.length-o-1);for(;a-- >0;)i+="0"}return i}const cf={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:jt},uf={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t),stringify(t){const e=Number(t.value);return isFinite(e)?e.toExponential():jt(t)}},ff={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(t){const e=new H(parseFloat(t)),n=t.indexOf(".");return n!==-1&&t[t.length-1]==="0"&&(e.minFractionDigits=t.length-n-1),e},stringify:jt},Ti=t=>typeof t=="bigint"||Number.isInteger(t),fa=(t,e,n,{intAsBigInt:s})=>s?BigInt(t):parseInt(t.substring(e),n);function hf(t,e,n){const{value:s}=t;return Ti(s)&&s>=0?n+s.toString(e):jt(t)}const df={identify:t=>Ti(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(t,e,n)=>fa(t,2,8,n),stringify:t=>hf(t,8,"0o")},pf={identify:Ti,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(t,e,n)=>fa(t,0,10,n),stringify:jt},mf={identify:t=>Ti(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(t,e,n)=>fa(t,2,16,n),stringify:t=>hf(t,16,"0x")},ux=[As,Cs,Ei,ki,ua,df,pf,mf,cf,uf,ff];function Rl(t){return typeof t=="bigint"||Number.isInteger(t)}const Ir=({value:t})=>JSON.stringify(t),fx=[{identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify:Ir},{identify:t=>t==null,createNode:()=>new H(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:Ir},{identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^true$|^false$/,resolve:t=>t==="true",stringify:Ir},{identify:Rl,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(t,e,{intAsBigInt:n})=>n?BigInt(t):parseInt(t,10),stringify:({value:t})=>Rl(t)?t.toString():JSON.stringify(t)},{identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:t=>parseFloat(t),stringify:Ir}],hx={default:!0,tag:"",test:/^/,resolve(t,e){return e(`Unresolved plain scalar ${JSON.stringify(t)}`),t}},dx=[As,Cs].concat(fx,hx),ha={identify:t=>t instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(t,e){if(typeof atob=="function"){const n=atob(t.replace(/[\n\r]/g,"")),s=new Uint8Array(n.length);for(let r=0;r<n.length;++r)s[r]=n.charCodeAt(r);return s}else return e("This environment does not support reading binary tags; either Buffer or atob is required"),t},stringify({comment:t,type:e,value:n},s,r,i){if(!n)return"";const o=n;let a;if(typeof btoa=="function"){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);a=btoa(l)}else throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(e??(e=H.BLOCK_LITERAL),e!==H.QUOTE_DOUBLE){const l=Math.max(s.options.lineWidth-s.indent.length,s.options.minContentWidth),c=Math.ceil(a.length/l),u=new Array(c);for(let f=0,d=0;f<c;++f,d+=l)u[f]=a.substr(d,l);a=u.join(e===H.BLOCK_LITERAL?`
`:" ")}return la({comment:t,type:e,value:a},s,r,i)}};function gf(t,e){if(lr(t))for(let n=0;n<t.items.length;++n){let s=t.items[n];if(!Ce(s)){if(ar(s)){s.items.length>1&&e("Each pair must have its own sequence indicator");const r=s.items[0]||new Xe(new H(null));if(s.commentBefore&&(r.key.commentBefore=r.key.commentBefore?`${s.commentBefore}
${r.key.commentBefore}`:s.commentBefore),s.comment){const i=r.value??r.key;i.comment=i.comment?`${s.comment}
${i.comment}`:s.comment}s=r}t.items[n]=Ce(s)?s:new Xe(s)}}else e("Expected a sequence for this tag");return t}function yf(t,e,n){const{replacer:s}=n,r=new Zn(t);r.tag="tag:yaml.org,2002:pairs";let i=0;if(e&&Symbol.iterator in Object(e))for(let o of e){typeof s=="function"&&(o=s.call(e,String(i++),o));let a,l;if(Array.isArray(o))if(o.length===2)a=o[0],l=o[1];else throw new TypeError(`Expected [key, value] tuple: ${o}`);else if(o&&o instanceof Object){const c=Object.keys(o);if(c.length===1)a=c[0],l=o[a];else throw new TypeError(`Expected tuple with one key, not ${c.length} keys`)}else a=o;r.items.push(ca(a,l,n))}return r}const da={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:gf,createNode:yf};class bs extends Zn{constructor(){super(),this.add=ht.prototype.add.bind(this),this.delete=ht.prototype.delete.bind(this),this.get=ht.prototype.get.bind(this),this.has=ht.prototype.has.bind(this),this.set=ht.prototype.set.bind(this),this.tag=bs.tag}toJSON(e,n){if(!n)return super.toJSON(e);const s=new Map;n?.onCreate&&n.onCreate(s);for(const r of this.items){let i,o;if(Ce(r)?(i=pt(r.key,"",n),o=pt(r.value,i,n)):i=pt(r,"",n),s.has(i))throw new Error("Ordered maps must not include duplicate keys");s.set(i,o)}return s}static from(e,n,s){const r=yf(e,n,s),i=new this;return i.items=r.items,i}}bs.tag="tag:yaml.org,2002:omap";const pa={collection:"seq",identify:t=>t instanceof Map,nodeClass:bs,default:!1,tag:"tag:yaml.org,2002:omap",resolve(t,e){const n=gf(t,e),s=[];for(const{key:r}of n.items)ge(r)&&(s.includes(r.value)?e(`Ordered maps must not include duplicate keys: ${r.value}`):s.push(r.value));return Object.assign(new bs,n)},createNode:(t,e,n)=>bs.from(t,e,n)};function bf({value:t,source:e},n){return e&&(t?vf:wf).test.test(e)?e:t?n.options.trueStr:n.options.falseStr}const vf={identify:t=>t===!0,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new H(!0),stringify:bf},wf={identify:t=>t===!1,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/,resolve:()=>new H(!1),stringify:bf},px={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:jt},mx={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t.replace(/_/g,"")),stringify(t){const e=Number(t.value);return isFinite(e)?e.toExponential():jt(t)}},gx={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(t){const e=new H(parseFloat(t.replace(/_/g,""))),n=t.indexOf(".");if(n!==-1){const s=t.substring(n+1).replace(/_/g,"");s[s.length-1]==="0"&&(e.minFractionDigits=s.length)}return e},stringify:jt},cr=t=>typeof t=="bigint"||Number.isInteger(t);function Ni(t,e,n,{intAsBigInt:s}){const r=t[0];if((r==="-"||r==="+")&&(e+=1),t=t.substring(e).replace(/_/g,""),s){switch(n){case 2:t=`0b${t}`;break;case 8:t=`0o${t}`;break;case 16:t=`0x${t}`;break}const o=BigInt(t);return r==="-"?BigInt(-1)*o:o}const i=parseInt(t,n);return r==="-"?-1*i:i}function ma(t,e,n){const{value:s}=t;if(cr(s)){const r=s.toString(e);return s<0?"-"+n+r.substr(1):n+r}return jt(t)}const yx={identify:cr,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(t,e,n)=>Ni(t,2,2,n),stringify:t=>ma(t,2,"0b")},bx={identify:cr,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(t,e,n)=>Ni(t,1,8,n),stringify:t=>ma(t,8,"0")},vx={identify:cr,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(t,e,n)=>Ni(t,0,10,n),stringify:jt},wx={identify:cr,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(t,e,n)=>Ni(t,2,16,n),stringify:t=>ma(t,16,"0x")};class vs extends ht{constructor(e){super(e),this.tag=vs.tag}add(e){let n;Ce(e)?n=e:e&&typeof e=="object"&&"key"in e&&"value"in e&&e.value===null?n=new Xe(e.key,null):n=new Xe(e,null),zn(this.items,n.key)||this.items.push(n)}get(e,n){const s=zn(this.items,e);return!n&&Ce(s)?ge(s.key)?s.key.value:s.key:s}set(e,n){if(typeof n!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof n}`);const s=zn(this.items,e);s&&!n?this.items.splice(this.items.indexOf(s),1):!s&&n&&this.items.push(new Xe(e))}toJSON(e,n){return super.toJSON(e,n,Set)}toString(e,n,s){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),n,s);throw new Error("Set items must all have null values")}static from(e,n,s){const{replacer:r}=s,i=new this(e);if(n&&Symbol.iterator in Object(n))for(let o of n)typeof r=="function"&&(o=r.call(n,o,o)),i.items.push(ca(o,null,s));return i}}vs.tag="tag:yaml.org,2002:set";const ga={collection:"map",identify:t=>t instanceof Set,nodeClass:vs,default:!1,tag:"tag:yaml.org,2002:set",createNode:(t,e,n)=>vs.from(t,e,n),resolve(t,e){if(ar(t)){if(t.hasAllNullValues(!0))return Object.assign(new vs,t);e("Set items must all have null values")}else e("Expected a mapping for this tag");return t}};function ya(t,e){const n=t[0],s=n==="-"||n==="+"?t.substring(1):t,r=o=>e?BigInt(o):Number(o),i=s.replace(/_/g,"").split(":").reduce((o,a)=>o*r(60)+r(a),r(0));return n==="-"?r(-1)*i:i}function xf(t){let{value:e}=t,n=o=>o;if(typeof e=="bigint")n=o=>BigInt(o);else if(isNaN(e)||!isFinite(e))return jt(t);let s="";e<0&&(s="-",e*=n(-1));const r=n(60),i=[e%r];return e<60?i.unshift(0):(e=(e-i[0])/r,i.unshift(e%r),e>=60&&(e=(e-i[0])/r,i.unshift(e))),s+i.map(o=>String(o).padStart(2,"0")).join(":").replace(/000000\d*$/,"")}const _f={identify:t=>typeof t=="bigint"||Number.isInteger(t),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(t,e,{intAsBigInt:n})=>ya(t,n),stringify:xf},Sf={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:t=>ya(t,!1),stringify:xf},Oi={identify:t=>t instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(t){const e=t.match(Oi.test);if(!e)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");const[,n,s,r,i,o,a]=e.map(Number),l=e[7]?Number((e[7]+"00").substr(1,3)):0;let c=Date.UTC(n,s-1,r,i||0,o||0,a||0,l);const u=e[8];if(u&&u!=="Z"){let f=ya(u,!1);Math.abs(f)<30&&(f*=60),c-=6e4*f}return new Date(c)},stringify:({value:t})=>t?.toISOString().replace(/(T00:00:00)?\.000Z$/,"")??""},$l=[As,Cs,Ei,ki,vf,wf,yx,bx,vx,wx,px,mx,gx,ha,Kt,pa,da,ga,_f,Sf,Oi],zl=new Map([["core",ux],["failsafe",[As,Cs,Ei]],["json",dx],["yaml11",$l],["yaml-1.1",$l]]),Dl={binary:ha,bool:ua,float:ff,floatExp:uf,floatNaN:cf,floatTime:Sf,int:pf,intHex:mf,intOct:df,intTime:_f,map:As,merge:Kt,null:ki,omap:pa,pairs:da,seq:Cs,set:ga,timestamp:Oi},xx={"tag:yaml.org,2002:binary":ha,"tag:yaml.org,2002:merge":Kt,"tag:yaml.org,2002:omap":pa,"tag:yaml.org,2002:pairs":da,"tag:yaml.org,2002:set":ga,"tag:yaml.org,2002:timestamp":Oi};function Yi(t,e,n){const s=zl.get(e);if(s&&!t)return n&&!s.includes(Kt)?s.concat(Kt):s.slice();let r=s;if(!r)if(Array.isArray(t))r=[];else{const i=Array.from(zl.keys()).filter(o=>o!=="yaml11").map(o=>JSON.stringify(o)).join(", ");throw new Error(`Unknown schema "${e}"; use one of ${i} or define customTags array`)}if(Array.isArray(t))for(const i of t)r=r.concat(i);else typeof t=="function"&&(r=t(r.slice()));return n&&(r=r.concat(Kt)),r.reduce((i,o)=>{const a=typeof o=="string"?Dl[o]:o;if(!a){const l=JSON.stringify(o),c=Object.keys(Dl).map(u=>JSON.stringify(u)).join(", ");throw new Error(`Unknown custom tag ${l}; use one of ${c}`)}return i.includes(a)||i.push(a),i},[])}const _x=(t,e)=>t.key<e.key?-1:t.key>e.key?1:0;class ba{constructor({compat:e,customTags:n,merge:s,resolveKnownTags:r,schema:i,sortMapEntries:o,toStringDefaults:a}){this.compat=Array.isArray(e)?Yi(e,"compat"):e?Yi(null,e):null,this.name=typeof i=="string"&&i||"core",this.knownTags=r?xx:{},this.tags=Yi(n,this.name,s),this.toStringOptions=a??null,Object.defineProperty(this,vn,{value:As}),Object.defineProperty(this,Zt,{value:Ei}),Object.defineProperty(this,Ns,{value:Cs}),this.sortMapEntries=typeof o=="function"?o:o===!0?_x:null}clone(){const e=Object.create(ba.prototype,Object.getOwnPropertyDescriptors(this));return e.tags=this.tags.slice(),e}}function Sx(t,e){const n=[];let s=e.directives===!0;if(e.directives!==!1&&t.directives){const l=t.directives.toString(t);l?(n.push(l),s=!0):t.directives.docStart&&(s=!0)}s&&n.push("---");const r=sf(t,e),{commentString:i}=r.options;if(t.commentBefore){n.length!==1&&n.unshift("");const l=i(t.commentBefore);n.unshift(Gt(l,""))}let o=!1,a=null;if(t.contents){if(Ae(t.contents)){if(t.contents.spaceBefore&&s&&n.push(""),t.contents.commentBefore){const u=i(t.contents.commentBefore);n.push(Gt(u,""))}r.forceBlockIndent=!!t.comment,a=t.contents.comment}const l=a?void 0:()=>o=!0;let c=Es(t.contents,r,()=>a=null,l);a&&(c+=$n(c,"",i(a))),(c[0]==="|"||c[0]===">")&&n[n.length-1]==="---"?n[n.length-1]=`--- ${c}`:n.push(c)}else n.push(Es(t.contents,r));if(t.directives?.docEnd)if(t.comment){const l=i(t.comment);l.includes(`
`)?(n.push("..."),n.push(Gt(l,""))):n.push(`... ${l}`)}else n.push("...");else{let l=t.comment;l&&o&&(l=l.replace(/^\n+/,"")),l&&((!o||a)&&n[n.length-1]!==""&&n.push(""),n.push(Gt(i(l),"")))}return n.join(`
`)+`
`}class Ai{constructor(e,n,s){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,mt,{value:Ao});let r=null;typeof n=="function"||Array.isArray(n)?r=n:s===void 0&&n&&(s=n,n=void 0);const i=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,stringKeys:!1,uniqueKeys:!0,version:"1.2"},s);this.options=i;let{version:o}=i;s?._directives?(this.directives=s._directives.atDocument(),this.directives.yaml.explicit&&(o=this.directives.yaml.version)):this.directives=new qe({version:o}),this.setSchema(o,s),this.contents=e===void 0?null:this.createNode(e,r,s)}clone(){const e=Object.create(Ai.prototype,{[mt]:{value:Ao}});return e.commentBefore=this.commentBefore,e.comment=this.comment,e.errors=this.errors.slice(),e.warnings=this.warnings.slice(),e.options=Object.assign({},this.options),this.directives&&(e.directives=this.directives.clone()),e.schema=this.schema.clone(),e.contents=Ae(this.contents)?this.contents.clone(e.schema):this.contents,this.range&&(e.range=this.range.slice()),e}add(e){ns(this.contents)&&this.contents.add(e)}addIn(e,n){ns(this.contents)&&this.contents.addIn(e,n)}createAlias(e,n){if(!e.anchor){const s=Qu(this);e.anchor=!n||s.has(n)?Ju(n||"a",s):n}return new aa(e.anchor)}createNode(e,n,s){let r;if(typeof n=="function")e=n.call({"":e},"",e),r=n;else if(Array.isArray(n)){const b=k=>typeof k=="number"||k instanceof String||k instanceof Number,y=n.filter(b).map(String);y.length>0&&(n=n.concat(y)),r=n}else s===void 0&&n&&(s=n,n=void 0);const{aliasDuplicateObjects:i,anchorPrefix:o,flow:a,keepUndefined:l,onTagObj:c,tag:u}=s??{},{onAnchor:f,setAnchors:d,sourceObjects:p}=X2(this,o||"a"),g={aliasDuplicateObjects:i??!0,keepUndefined:l??!1,onAnchor:f,onTagObj:c,replacer:r,schema:this.schema,sourceObjects:p},m=tr(e,u,g);return a&&Oe(m)&&(m.flow=!0),d(),m}createPair(e,n,s={}){const r=this.createNode(e,null,s),i=this.createNode(n,null,s);return new Xe(r,i)}delete(e){return ns(this.contents)?this.contents.delete(e):!1}deleteIn(e){return Ds(e)?this.contents==null?!1:(this.contents=null,!0):ns(this.contents)?this.contents.deleteIn(e):!1}get(e,n){return Oe(this.contents)?this.contents.get(e,n):void 0}getIn(e,n){return Ds(e)?!n&&ge(this.contents)?this.contents.value:this.contents:Oe(this.contents)?this.contents.getIn(e,n):void 0}has(e){return Oe(this.contents)?this.contents.has(e):!1}hasIn(e){return Ds(e)?this.contents!==void 0:Oe(this.contents)?this.contents.hasIn(e):!1}set(e,n){this.contents==null?this.contents=oi(this.schema,[e],n):ns(this.contents)&&this.contents.set(e,n)}setIn(e,n){Ds(e)?this.contents=n:this.contents==null?this.contents=oi(this.schema,Array.from(e),n):ns(this.contents)&&this.contents.setIn(e,n)}setSchema(e,n={}){typeof e=="number"&&(e=String(e));let s;switch(e){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new qe({version:"1.1"}),s={resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=e:this.directives=new qe({version:e}),s={resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,s=null;break;default:{const r=JSON.stringify(e);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${r}`)}}if(n.schema instanceof Object)this.schema=n.schema;else if(s)this.schema=new ba(Object.assign(s,n));else throw new Error("With a null YAML version, the { schema: Schema } option is required")}toJS({json:e,jsonArg:n,mapAsMap:s,maxAliasCount:r,onAnchor:i,reviver:o}={}){const a={anchors:new Map,doc:this,keep:!e,mapAsMap:s===!0,mapKeyWarned:!1,maxAliasCount:typeof r=="number"?r:100},l=pt(this.contents,n??"",a);if(typeof i=="function")for(const{count:c,res:u}of a.anchors.values())i(u,c);return typeof o=="function"?us(o,{"":l},"",l):l}toJSON(e,n){return this.toJS({json:!0,jsonArg:e,mapAsMap:!1,onAnchor:n})}toString(e={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in e&&(!Number.isInteger(e.indent)||Number(e.indent)<=0)){const n=JSON.stringify(e.indent);throw new Error(`"indent" option must be a positive integer, not ${n}`)}return Sx(this,e)}}function ns(t){if(Oe(t))return!0;throw new Error("Expected a YAML collection as document contents")}class Ef extends Error{constructor(e,n,s,r){super(),this.name=e,this.code=s,this.message=r,this.pos=n}}class Ls extends Ef{constructor(e,n,s){super("YAMLParseError",e,n,s)}}class Ex extends Ef{constructor(e,n,s){super("YAMLWarning",e,n,s)}}const Ll=(t,e)=>n=>{if(n.pos[0]===-1)return;n.linePos=n.pos.map(a=>e.linePos(a));const{line:s,col:r}=n.linePos[0];n.message+=` at line ${s}, column ${r}`;let i=r-1,o=t.substring(e.lineStarts[s-1],e.lineStarts[s]).replace(/[\n\r]+$/,"");if(i>=60&&o.length>80){const a=Math.min(i-39,o.length-79);o=""+o.substring(a),i-=a-1}if(o.length>80&&(o=o.substring(0,79)+""),s>1&&/^ *$/.test(o.substring(0,i))){let a=t.substring(e.lineStarts[s-2],e.lineStarts[s-1]);a.length>80&&(a=a.substring(0,79)+`
`),o=a+o}if(/[^ ]/.test(o)){let a=1;const l=n.linePos[1];l?.line===s&&l.col>r&&(a=Math.max(1,Math.min(l.col-r,80-i)));const c=" ".repeat(i)+"^".repeat(a);n.message+=`:

${o}
${c}
`}};function ks(t,{flow:e,indicator:n,next:s,offset:r,onError:i,parentIndent:o,startOnNewline:a}){let l=!1,c=a,u=a,f="",d="",p=!1,g=!1,m=null,b=null,y=null,k=null,x=null,_=null,E=null;for(const w of t)switch(g&&(w.type!=="space"&&w.type!=="newline"&&w.type!=="comma"&&i(w.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),g=!1),m&&(c&&w.type!=="comment"&&w.type!=="newline"&&i(m,"TAB_AS_INDENT","Tabs are not allowed as indentation"),m=null),w.type){case"space":!e&&(n!=="doc-start"||s?.type!=="flow-collection")&&w.source.includes("	")&&(m=w),u=!0;break;case"comment":{u||i(w,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const S=w.source.substring(1)||" ";f?f+=d+S:f=S,d="",c=!1;break}case"newline":c?f?f+=w.source:(!_||n!=="seq-item-ind")&&(l=!0):d+=w.source,c=!0,p=!0,(b||y)&&(k=w),u=!0;break;case"anchor":b&&i(w,"MULTIPLE_ANCHORS","A node can have at most one anchor"),w.source.endsWith(":")&&i(w.offset+w.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",!0),b=w,E??(E=w.offset),c=!1,u=!1,g=!0;break;case"tag":{y&&i(w,"MULTIPLE_TAGS","A node can have at most one tag"),y=w,E??(E=w.offset),c=!1,u=!1,g=!0;break}case n:(b||y)&&i(w,"BAD_PROP_ORDER",`Anchors and tags must be after the ${w.source} indicator`),_&&i(w,"UNEXPECTED_TOKEN",`Unexpected ${w.source} in ${e??"collection"}`),_=w,c=n==="seq-item-ind"||n==="explicit-key-ind",u=!1;break;case"comma":if(e){x&&i(w,"UNEXPECTED_TOKEN",`Unexpected , in ${e}`),x=w,c=!1,u=!1;break}default:i(w,"UNEXPECTED_TOKEN",`Unexpected ${w.type} token`),c=!1,u=!1}const T=t[t.length-1],v=T?T.offset+T.source.length:r;return g&&s&&s.type!=="space"&&s.type!=="newline"&&s.type!=="comma"&&(s.type!=="scalar"||s.source!=="")&&i(s.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),m&&(c&&m.indent<=o||s?.type==="block-map"||s?.type==="block-seq")&&i(m,"TAB_AS_INDENT","Tabs are not allowed as indentation"),{comma:x,found:_,spaceBefore:l,comment:f,hasNewline:p,anchor:b,tag:y,newlineAfterProp:k,end:v,start:E??v}}function nr(t){if(!t)return null;switch(t.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(t.source.includes(`
`))return!0;if(t.end){for(const e of t.end)if(e.type==="newline")return!0}return!1;case"flow-collection":for(const e of t.items){for(const n of e.start)if(n.type==="newline")return!0;if(e.sep){for(const n of e.sep)if(n.type==="newline")return!0}if(nr(e.key)||nr(e.value))return!0}return!1;default:return!0}}function Mo(t,e,n){if(e?.type==="flow-collection"){const s=e.end[0];s.indent===t&&(s.source==="]"||s.source==="}")&&nr(e)&&n(s,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}function kf(t,e,n){const{uniqueKeys:s}=t.options;if(s===!1)return!1;const r=typeof s=="function"?s:(i,o)=>i===o||ge(i)&&ge(o)&&i.value===o.value;return e.some(i=>r(i.key,n))}const Fl="All mapping items must start at the same column";function kx({composeNode:t,composeEmptyNode:e},n,s,r,i){const o=i?.nodeClass??ht,a=new o(n.schema);n.atRoot&&(n.atRoot=!1);let l=s.offset,c=null;for(const u of s.items){const{start:f,key:d,sep:p,value:g}=u,m=ks(f,{indicator:"explicit-key-ind",next:d??p?.[0],offset:l,onError:r,parentIndent:s.indent,startOnNewline:!0}),b=!m.found;if(b){if(d&&(d.type==="block-seq"?r(l,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in d&&d.indent!==s.indent&&r(l,"BAD_INDENT",Fl)),!m.anchor&&!m.tag&&!p){c=m.end,m.comment&&(a.comment?a.comment+=`
`+m.comment:a.comment=m.comment);continue}(m.newlineAfterProp||nr(d))&&r(d??f[f.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}else m.found?.indent!==s.indent&&r(l,"BAD_INDENT",Fl);n.atKey=!0;const y=m.end,k=d?t(n,d,m,r):e(n,y,f,null,m,r);n.schema.compat&&Mo(s.indent,d,r),n.atKey=!1,kf(n,a.items,k)&&r(y,"DUPLICATE_KEY","Map keys must be unique");const x=ks(p??[],{indicator:"map-value-ind",next:g,offset:k.range[2],onError:r,parentIndent:s.indent,startOnNewline:!d||d.type==="block-scalar"});if(l=x.end,x.found){b&&(g?.type==="block-map"&&!x.hasNewline&&r(l,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),n.options.strict&&m.start<x.found.offset-1024&&r(k.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));const _=g?t(n,g,x,r):e(n,l,p,null,x,r);n.schema.compat&&Mo(s.indent,g,r),l=_.range[2];const E=new Xe(k,_);n.options.keepSourceTokens&&(E.srcToken=u),a.items.push(E)}else{b&&r(k.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),x.comment&&(k.comment?k.comment+=`
`+x.comment:k.comment=x.comment);const _=new Xe(k);n.options.keepSourceTokens&&(_.srcToken=u),a.items.push(_)}}return c&&c<l&&r(c,"IMPOSSIBLE","Map comment with trailing content"),a.range=[s.offset,l,c??l],a}function Tx({composeNode:t,composeEmptyNode:e},n,s,r,i){const o=i?.nodeClass??Zn,a=new o(n.schema);n.atRoot&&(n.atRoot=!1),n.atKey&&(n.atKey=!1);let l=s.offset,c=null;for(const{start:u,value:f}of s.items){const d=ks(u,{indicator:"seq-item-ind",next:f,offset:l,onError:r,parentIndent:s.indent,startOnNewline:!0});if(!d.found)if(d.anchor||d.tag||f)f?.type==="block-seq"?r(d.end,"BAD_INDENT","All sequence items must start at the same column"):r(l,"MISSING_CHAR","Sequence item without - indicator");else{c=d.end,d.comment&&(a.comment=d.comment);continue}const p=f?t(n,f,d,r):e(n,d.end,u,null,d,r);n.schema.compat&&Mo(s.indent,f,r),l=p.range[2],a.items.push(p)}return a.range=[s.offset,l,c??l],a}function ur(t,e,n,s){let r="";if(t){let i=!1,o="";for(const a of t){const{source:l,type:c}=a;switch(c){case"space":i=!0;break;case"comment":{n&&!i&&s(a,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const u=l.substring(1)||" ";r?r+=o+u:r=u,o="";break}case"newline":r&&(o+=l),i=!0;break;default:s(a,"UNEXPECTED_TOKEN",`Unexpected ${c} at node end`)}e+=l.length}}return{comment:r,offset:e}}const Gi="Block collections are not allowed within flow collections",qi=t=>t&&(t.type==="block-map"||t.type==="block-seq");function Nx({composeNode:t,composeEmptyNode:e},n,s,r,i){const o=s.start.source==="{",a=o?"flow map":"flow sequence",l=i?.nodeClass??(o?ht:Zn),c=new l(n.schema);c.flow=!0;const u=n.atRoot;u&&(n.atRoot=!1),n.atKey&&(n.atKey=!1);let f=s.offset+s.start.source.length;for(let b=0;b<s.items.length;++b){const y=s.items[b],{start:k,key:x,sep:_,value:E}=y,T=ks(k,{flow:a,indicator:"explicit-key-ind",next:x??_?.[0],offset:f,onError:r,parentIndent:s.indent,startOnNewline:!1});if(!T.found){if(!T.anchor&&!T.tag&&!_&&!E){b===0&&T.comma?r(T.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${a}`):b<s.items.length-1&&r(T.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${a}`),T.comment&&(c.comment?c.comment+=`
`+T.comment:c.comment=T.comment),f=T.end;continue}!o&&n.options.strict&&nr(x)&&r(x,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(b===0)T.comma&&r(T.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${a}`);else if(T.comma||r(T.start,"MISSING_CHAR",`Missing , between ${a} items`),T.comment){let v="";e:for(const w of k)switch(w.type){case"comma":case"space":break;case"comment":v=w.source.substring(1);break e;default:break e}if(v){let w=c.items[c.items.length-1];Ce(w)&&(w=w.value??w.key),w.comment?w.comment+=`
`+v:w.comment=v,T.comment=T.comment.substring(v.length+1)}}if(!o&&!_&&!T.found){const v=E?t(n,E,T,r):e(n,T.end,_,null,T,r);c.items.push(v),f=v.range[2],qi(E)&&r(v.range,"BLOCK_IN_FLOW",Gi)}else{n.atKey=!0;const v=T.end,w=x?t(n,x,T,r):e(n,v,k,null,T,r);qi(x)&&r(w.range,"BLOCK_IN_FLOW",Gi),n.atKey=!1;const S=ks(_??[],{flow:a,indicator:"map-value-ind",next:E,offset:w.range[2],onError:r,parentIndent:s.indent,startOnNewline:!1});if(S.found){if(!o&&!T.found&&n.options.strict){if(_)for(const A of _){if(A===S.found)break;if(A.type==="newline"){r(A,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}T.start<S.found.offset-1024&&r(S.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else E&&("source"in E&&E.source?.[0]===":"?r(E,"MISSING_CHAR",`Missing space after : in ${a}`):r(S.start,"MISSING_CHAR",`Missing , or : between ${a} items`));const N=E?t(n,E,S,r):S.found?e(n,S.end,_,null,S,r):null;N?qi(E)&&r(N.range,"BLOCK_IN_FLOW",Gi):S.comment&&(w.comment?w.comment+=`
`+S.comment:w.comment=S.comment);const O=new Xe(w,N);if(n.options.keepSourceTokens&&(O.srcToken=y),o){const A=c;kf(n,A.items,w)&&r(v,"DUPLICATE_KEY","Map keys must be unique"),A.items.push(O)}else{const A=new ht(n.schema);A.flow=!0,A.items.push(O);const C=(N??w).range;A.range=[w.range[0],C[1],C[2]],c.items.push(A)}f=N?N.range[2]:S.end}}const d=o?"}":"]",[p,...g]=s.end;let m=f;if(p?.source===d)m=p.offset+p.source.length;else{const b=a[0].toUpperCase()+a.substring(1),y=u?`${b} must end with a ${d}`:`${b} in block collection must be sufficiently indented and end with a ${d}`;r(f,u?"MISSING_CHAR":"BAD_INDENT",y),p&&p.source.length!==1&&g.unshift(p)}if(g.length>0){const b=ur(g,m,n.options.strict,r);b.comment&&(c.comment?c.comment+=`
`+b.comment:c.comment=b.comment),c.range=[s.offset,m,b.offset]}else c.range=[s.offset,m,m];return c}function Hi(t,e,n,s,r,i){const o=n.type==="block-map"?kx(t,e,n,s,i):n.type==="block-seq"?Tx(t,e,n,s,i):Nx(t,e,n,s,i),a=o.constructor;return r==="!"||r===a.tagName?(o.tag=a.tagName,o):(r&&(o.tag=r),o)}function Ox(t,e,n,s,r){const i=s.tag,o=i?e.directives.tagName(i.source,d=>r(i,"TAG_RESOLVE_FAILED",d)):null;if(n.type==="block-seq"){const{anchor:d,newlineAfterProp:p}=s,g=d&&i?d.offset>i.offset?d:i:d??i;g&&(!p||p.offset<g.offset)&&r(g,"MISSING_CHAR","Missing newline after block sequence props")}const a=n.type==="block-map"?"map":n.type==="block-seq"?"seq":n.start.source==="{"?"map":"seq";if(!i||!o||o==="!"||o===ht.tagName&&a==="map"||o===Zn.tagName&&a==="seq")return Hi(t,e,n,r,o);let l=e.schema.tags.find(d=>d.tag===o&&d.collection===a);if(!l){const d=e.schema.knownTags[o];if(d?.collection===a)e.schema.tags.push(Object.assign({},d,{default:!1})),l=d;else return d?r(i,"BAD_COLLECTION_TYPE",`${d.tag} used for ${a} collection, but expects ${d.collection??"scalar"}`,!0):r(i,"TAG_RESOLVE_FAILED",`Unresolved tag: ${o}`,!0),Hi(t,e,n,r,o)}const c=Hi(t,e,n,r,o,l),u=l.resolve?.(c,d=>r(i,"TAG_RESOLVE_FAILED",d),e.options)??c,f=Ae(u)?u:new H(u);return f.range=c.range,f.tag=o,l?.format&&(f.format=l.format),f}function Ax(t,e,n){const s=e.offset,r=Cx(e,t.options.strict,n);if(!r)return{value:"",type:null,comment:"",range:[s,s,s]};const i=r.mode===">"?H.BLOCK_FOLDED:H.BLOCK_LITERAL,o=e.source?jx(e.source):[];let a=o.length;for(let m=o.length-1;m>=0;--m){const b=o[m][1];if(b===""||b==="\r")a=m;else break}if(a===0){const m=r.chomp==="+"&&o.length>0?`
`.repeat(Math.max(1,o.length-1)):"";let b=s+r.length;return e.source&&(b+=e.source.length),{value:m,type:i,comment:r.comment,range:[s,b,b]}}let l=e.indent+r.indent,c=e.offset+r.length,u=0;for(let m=0;m<a;++m){const[b,y]=o[m];if(y===""||y==="\r")r.indent===0&&b.length>l&&(l=b.length);else{b.length<l&&n(c+b.length,"MISSING_CHAR","Block scalars with more-indented leading empty lines must use an explicit indentation indicator"),r.indent===0&&(l=b.length),u=m,l===0&&!t.atRoot&&n(c,"BAD_INDENT","Block scalar values in collections must be indented");break}c+=b.length+y.length+1}for(let m=o.length-1;m>=a;--m)o[m][0].length>l&&(a=m+1);let f="",d="",p=!1;for(let m=0;m<u;++m)f+=o[m][0].slice(l)+`
`;for(let m=u;m<a;++m){let[b,y]=o[m];c+=b.length+y.length+1;const k=y[y.length-1]==="\r";if(k&&(y=y.slice(0,-1)),y&&b.length<l){const _=`Block scalar lines must not be less indented than their ${r.indent?"explicit indentation indicator":"first line"}`;n(c-y.length-(k?2:1),"BAD_INDENT",_),b=""}i===H.BLOCK_LITERAL?(f+=d+b.slice(l)+y,d=`
`):b.length>l||y[0]==="	"?(d===" "?d=`
`:!p&&d===`
`&&(d=`

`),f+=d+b.slice(l)+y,d=`
`,p=!0):y===""?d===`
`?f+=`
`:d=`
`:(f+=d+y,d=" ",p=!1)}switch(r.chomp){case"-":break;case"+":for(let m=a;m<o.length;++m)f+=`
`+o[m][0].slice(l);f[f.length-1]!==`
`&&(f+=`
`);break;default:f+=`
`}const g=s+r.length+e.source.length;return{value:f,type:i,comment:r.comment,range:[s,g,g]}}function Cx({offset:t,props:e},n,s){if(e[0].type!=="block-scalar-header")return s(e[0],"IMPOSSIBLE","Block scalar header not found"),null;const{source:r}=e[0],i=r[0];let o=0,a="",l=-1;for(let d=1;d<r.length;++d){const p=r[d];if(!a&&(p==="-"||p==="+"))a=p;else{const g=Number(p);!o&&g?o=g:l===-1&&(l=t+d)}}l!==-1&&s(l,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${r}`);let c=!1,u="",f=r.length;for(let d=1;d<e.length;++d){const p=e[d];switch(p.type){case"space":c=!0;case"newline":f+=p.source.length;break;case"comment":n&&!c&&s(p,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),f+=p.source.length,u=p.source.substring(1);break;case"error":s(p,"UNEXPECTED_TOKEN",p.message),f+=p.source.length;break;default:{const g=`Unexpected token in block scalar header: ${p.type}`;s(p,"UNEXPECTED_TOKEN",g);const m=p.source;m&&typeof m=="string"&&(f+=m.length)}}}return{mode:i,indent:o,chomp:a,comment:u,length:f}}function jx(t){const e=t.split(/\n( *)/),n=e[0],s=n.match(/^( *)/),i=[s?.[1]?[s[1],n.slice(s[1].length)]:["",n]];for(let o=1;o<e.length;o+=2)i.push([e[o],e[o+1]]);return i}function Ix(t,e,n){const{offset:s,type:r,source:i,end:o}=t;let a,l;const c=(d,p,g)=>n(s+d,p,g);switch(r){case"scalar":a=H.PLAIN,l=Mx(i,c);break;case"single-quoted-scalar":a=H.QUOTE_SINGLE,l=Px(i,c);break;case"double-quoted-scalar":a=H.QUOTE_DOUBLE,l=Rx(i,c);break;default:return n(t,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${r}`),{value:"",type:null,comment:"",range:[s,s+i.length,s+i.length]}}const u=s+i.length,f=ur(o,u,e,n);return{value:l,type:a,comment:f.comment,range:[s,u,f.offset]}}function Mx(t,e){let n="";switch(t[0]){case"	":n="a tab character";break;case",":n="flow indicator character ,";break;case"%":n="directive indicator character %";break;case"|":case">":{n=`block scalar indicator ${t[0]}`;break}case"@":case"`":{n=`reserved character ${t[0]}`;break}}return n&&e(0,"BAD_SCALAR_START",`Plain value cannot start with ${n}`),Tf(t)}function Px(t,e){return(t[t.length-1]!=="'"||t.length===1)&&e(t.length,"MISSING_CHAR","Missing closing 'quote"),Tf(t.slice(1,-1)).replace(/''/g,"'")}function Tf(t){let e,n;try{e=new RegExp(`(.*?)(?<![ 	])[ 	]*\r?
`,"sy"),n=new RegExp(`[ 	]*(.*?)(?:(?<![ 	])[ 	]*)?\r?
`,"sy")}catch{e=/(.*?)[ \t]*\r?\n/sy,n=/[ \t]*(.*?)[ \t]*\r?\n/sy}let s=e.exec(t);if(!s)return t;let r=s[1],i=" ",o=e.lastIndex;for(n.lastIndex=o;s=n.exec(t);)s[1]===""?i===`
`?r+=i:i=`
`:(r+=i+s[1],i=" "),o=n.lastIndex;const a=/[ \t]*(.*)/sy;return a.lastIndex=o,s=a.exec(t),r+i+(s?.[1]??"")}function Rx(t,e){let n="";for(let s=1;s<t.length-1;++s){const r=t[s];if(!(r==="\r"&&t[s+1]===`
`))if(r===`
`){const{fold:i,offset:o}=$x(t,s);n+=i,s=o}else if(r==="\\"){let i=t[++s];const o=zx[i];if(o)n+=o;else if(i===`
`)for(i=t[s+1];i===" "||i==="	";)i=t[++s+1];else if(i==="\r"&&t[s+1]===`
`)for(i=t[++s+1];i===" "||i==="	";)i=t[++s+1];else if(i==="x"||i==="u"||i==="U"){const a={x:2,u:4,U:8}[i];n+=Dx(t,s+1,a,e),s+=a}else{const a=t.substr(s-1,2);e(s-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${a}`),n+=a}}else if(r===" "||r==="	"){const i=s;let o=t[s+1];for(;o===" "||o==="	";)o=t[++s+1];o!==`
`&&!(o==="\r"&&t[s+2]===`
`)&&(n+=s>i?t.slice(i,s+1):r)}else n+=r}return(t[t.length-1]!=='"'||t.length===1)&&e(t.length,"MISSING_CHAR",'Missing closing "quote'),n}function $x(t,e){let n="",s=t[e+1];for(;(s===" "||s==="	"||s===`
`||s==="\r")&&!(s==="\r"&&t[e+2]!==`
`);)s===`
`&&(n+=`
`),e+=1,s=t[e+1];return n||(n=" "),{fold:n,offset:e}}const zx={0:"\0",a:"\x07",b:"\b",e:"\x1B",f:"\f",n:`
`,r:"\r",t:"	",v:"\v",N:"",_:"",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","	":"	"};function Dx(t,e,n,s){const r=t.substr(e,n),o=r.length===n&&/^[0-9a-fA-F]+$/.test(r)?parseInt(r,16):NaN;if(isNaN(o)){const a=t.substr(e-2,n+2);return s(e-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${a}`),a}return String.fromCodePoint(o)}function Nf(t,e,n,s){const{value:r,type:i,comment:o,range:a}=e.type==="block-scalar"?Ax(t,e,s):Ix(e,t.options.strict,s),l=n?t.directives.tagName(n.source,f=>s(n,"TAG_RESOLVE_FAILED",f)):null;let c;t.options.stringKeys&&t.atKey?c=t.schema[Zt]:l?c=Lx(t.schema,r,l,n,s):e.type==="scalar"?c=Fx(t,r,e,s):c=t.schema[Zt];let u;try{const f=c.resolve(r,d=>s(n??e,"TAG_RESOLVE_FAILED",d),t.options);u=ge(f)?f:new H(f)}catch(f){const d=f instanceof Error?f.message:String(f);s(n??e,"TAG_RESOLVE_FAILED",d),u=new H(r)}return u.range=a,u.source=r,i&&(u.type=i),l&&(u.tag=l),c.format&&(u.format=c.format),o&&(u.comment=o),u}function Lx(t,e,n,s,r){if(n==="!")return t[Zt];const i=[];for(const a of t.tags)if(!a.collection&&a.tag===n)if(a.default&&a.test)i.push(a);else return a;for(const a of i)if(a.test?.test(e))return a;const o=t.knownTags[n];return o&&!o.collection?(t.tags.push(Object.assign({},o,{default:!1,test:void 0})),o):(r(s,"TAG_RESOLVE_FAILED",`Unresolved tag: ${n}`,n!=="tag:yaml.org,2002:str"),t[Zt])}function Fx({atKey:t,directives:e,schema:n},s,r,i){const o=n.tags.find(a=>(a.default===!0||t&&a.default==="key")&&a.test?.test(s))||n[Zt];if(n.compat){const a=n.compat.find(l=>l.default&&l.test?.test(s))??n[Zt];if(o.tag!==a.tag){const l=e.tagString(o.tag),c=e.tagString(a.tag),u=`Value may be parsed as either ${l} or ${c}`;i(r,"TAG_RESOLVE_FAILED",u,!0)}}return o}function Bx(t,e,n){if(e){n??(n=e.length);for(let s=n-1;s>=0;--s){let r=e[s];switch(r.type){case"space":case"comment":case"newline":t-=r.source.length;continue}for(r=e[++s];r?.type==="space";)t+=r.source.length,r=e[++s];break}}return t}const Ux={composeNode:Of,composeEmptyNode:va};function Of(t,e,n,s){const r=t.atKey,{spaceBefore:i,comment:o,anchor:a,tag:l}=n;let c,u=!0;switch(e.type){case"alias":c=Zx(t,e,s),(a||l)&&s(e,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":c=Nf(t,e,l,s),a&&(c.anchor=a.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":c=Ox(Ux,t,e,n,s),a&&(c.anchor=a.source.substring(1));break;default:{const f=e.type==="error"?e.message:`Unsupported token (type: ${e.type})`;s(e,"UNEXPECTED_TOKEN",f),c=va(t,e.offset,void 0,null,n,s),u=!1}}return a&&c.anchor===""&&s(a,"BAD_ALIAS","Anchor cannot be an empty string"),r&&t.options.stringKeys&&(!ge(c)||typeof c.value!="string"||c.tag&&c.tag!=="tag:yaml.org,2002:str")&&s(l??e,"NON_STRING_KEY","With stringKeys, all keys must be strings"),i&&(c.spaceBefore=!0),o&&(e.type==="scalar"&&e.source===""?c.comment=o:c.commentBefore=o),t.options.keepSourceTokens&&u&&(c.srcToken=e),c}function va(t,e,n,s,{spaceBefore:r,comment:i,anchor:o,tag:a,end:l},c){const u={type:"scalar",offset:Bx(e,n,s),indent:-1,source:""},f=Nf(t,u,a,c);return o&&(f.anchor=o.source.substring(1),f.anchor===""&&c(o,"BAD_ALIAS","Anchor cannot be an empty string")),r&&(f.spaceBefore=!0),i&&(f.comment=i,f.range[2]=l),f}function Zx({options:t},{offset:e,source:n,end:s},r){const i=new aa(n.substring(1));i.source===""&&r(e,"BAD_ALIAS","Alias cannot be an empty string"),i.source.endsWith(":")&&r(e+n.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",!0);const o=e+n.length,a=ur(s,o,t.strict,r);return i.range=[e,o,a.offset],a.comment&&(i.comment=a.comment),i}function Vx(t,e,{offset:n,start:s,value:r,end:i},o){const a=Object.assign({_directives:e},t),l=new Ai(void 0,a),c={atKey:!1,atRoot:!0,directives:l.directives,options:l.options,schema:l.schema},u=ks(s,{indicator:"doc-start",next:r??i?.[0],offset:n,onError:o,parentIndent:0,startOnNewline:!0});u.found&&(l.directives.docStart=!0,r&&(r.type==="block-map"||r.type==="block-seq")&&!u.hasNewline&&o(u.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),l.contents=r?Of(c,r,u,o):va(c,u.end,s,null,u,o);const f=l.contents.range[2],d=ur(i,f,!1,o);return d.comment&&(l.comment=d.comment),l.range=[n,f,d.offset],l}function $s(t){if(typeof t=="number")return[t,t+1];if(Array.isArray(t))return t.length===2?t:[t[0],t[1]];const{offset:e,source:n}=t;return[e,e+(typeof n=="string"?n.length:1)]}function Bl(t){let e="",n=!1,s=!1;for(let r=0;r<t.length;++r){const i=t[r];switch(i[0]){case"#":e+=(e===""?"":s?`

`:`
`)+(i.substring(1)||" "),n=!0,s=!1;break;case"%":t[r+1]?.[0]!=="#"&&(r+=1),n=!1;break;default:n||(s=!0),n=!1}}return{comment:e,afterEmptyLine:s}}class Wx{constructor(e={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(n,s,r,i)=>{const o=$s(n);i?this.warnings.push(new Ex(o,s,r)):this.errors.push(new Ls(o,s,r))},this.directives=new qe({version:e.version||"1.2"}),this.options=e}decorate(e,n){const{comment:s,afterEmptyLine:r}=Bl(this.prelude);if(s){const i=e.contents;if(n)e.comment=e.comment?`${e.comment}
${s}`:s;else if(r||e.directives.docStart||!i)e.commentBefore=s;else if(Oe(i)&&!i.flow&&i.items.length>0){let o=i.items[0];Ce(o)&&(o=o.key);const a=o.commentBefore;o.commentBefore=a?`${s}
${a}`:s}else{const o=i.commentBefore;i.commentBefore=o?`${s}
${o}`:s}}n?(Array.prototype.push.apply(e.errors,this.errors),Array.prototype.push.apply(e.warnings,this.warnings)):(e.errors=this.errors,e.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:Bl(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(e,n=!1,s=-1){for(const r of e)yield*this.next(r);yield*this.end(n,s)}*next(e){switch(e.type){case"directive":this.directives.add(e.source,(n,s,r)=>{const i=$s(e);i[0]+=n,this.onError(i,"BAD_DIRECTIVE",s,r)}),this.prelude.push(e.source),this.atDirectives=!0;break;case"document":{const n=Vx(this.options,this.directives,e,this.onError);this.atDirectives&&!n.directives.docStart&&this.onError(e,"MISSING_CHAR","Missing directives-end/doc-start indicator line"),this.decorate(n,!1),this.doc&&(yield this.doc),this.doc=n,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(e.source);break;case"error":{const n=e.source?`${e.message}: ${JSON.stringify(e.source)}`:e.message,s=new Ls($s(e),"UNEXPECTED_TOKEN",n);this.atDirectives||!this.doc?this.errors.push(s):this.doc.errors.push(s);break}case"doc-end":{if(!this.doc){const s="Unexpected doc-end without preceding document";this.errors.push(new Ls($s(e),"UNEXPECTED_TOKEN",s));break}this.doc.directives.docEnd=!0;const n=ur(e.end,e.offset+e.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),n.comment){const s=this.doc.comment;this.doc.comment=s?`${s}
${n.comment}`:n.comment}this.doc.range[2]=n.offset;break}default:this.errors.push(new Ls($s(e),"UNEXPECTED_TOKEN",`Unsupported token ${e.type}`))}}*end(e=!1,n=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(e){const s=Object.assign({_directives:this.directives},this.options),r=new Ai(void 0,s);this.atDirectives&&this.onError(n,"MISSING_CHAR","Missing directives-end indicator line"),r.range=[0,n,n],this.decorate(r,!1),yield r}}}const Af="\uFEFF",Cf="",jf="",Po="";function Yx(t){switch(t){case Af:return"byte-order-mark";case Cf:return"doc-mode";case jf:return"flow-error-end";case Po:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case`
`:case`\r
`:return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(t[0]){case" ":case"	":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}function Nt(t){switch(t){case void 0:case" ":case`
`:case"\r":case"	":return!0;default:return!1}}const Ul=new Set("0123456789ABCDEFabcdef"),Gx=new Set("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()"),Mr=new Set(",[]{}"),qx=new Set(` ,[]{}
\r	`),Ki=t=>!t||qx.has(t);class Hx{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(e,n=!1){if(e){if(typeof e!="string")throw TypeError("source is not a string");this.buffer=this.buffer?this.buffer+e:e,this.lineEndPos=null}this.atEnd=!n;let s=this.next??"stream";for(;s&&(n||this.hasChars(1));)s=yield*this.parseNext(s)}atLineEnd(){let e=this.pos,n=this.buffer[e];for(;n===" "||n==="	";)n=this.buffer[++e];return!n||n==="#"||n===`
`?!0:n==="\r"?this.buffer[e+1]===`
`:!1}charAt(e){return this.buffer[this.pos+e]}continueScalar(e){let n=this.buffer[e];if(this.indentNext>0){let s=0;for(;n===" ";)n=this.buffer[++s+e];if(n==="\r"){const r=this.buffer[s+e+1];if(r===`
`||!r&&!this.atEnd)return e+s+1}return n===`
`||s>=this.indentNext||!n&&!this.atEnd?e+s:-1}if(n==="-"||n==="."){const s=this.buffer.substr(e,3);if((s==="---"||s==="...")&&Nt(this.buffer[e+3]))return-1}return e}getLine(){let e=this.lineEndPos;return(typeof e!="number"||e!==-1&&e<this.pos)&&(e=this.buffer.indexOf(`
`,this.pos),this.lineEndPos=e),e===-1?this.atEnd?this.buffer.substring(this.pos):null:(this.buffer[e-1]==="\r"&&(e-=1),this.buffer.substring(this.pos,e))}hasChars(e){return this.pos+e<=this.buffer.length}setNext(e){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=e,null}peek(e){return this.buffer.substr(this.pos,e)}*parseNext(e){switch(e){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let e=this.getLine();if(e===null)return this.setNext("stream");if(e[0]===Af&&(yield*this.pushCount(1),e=e.substring(1)),e[0]==="%"){let n=e.length,s=e.indexOf("#");for(;s!==-1;){const i=e[s-1];if(i===" "||i==="	"){n=s-1;break}else s=e.indexOf("#",s+1)}for(;;){const i=e[n-1];if(i===" "||i==="	")n-=1;else break}const r=(yield*this.pushCount(n))+(yield*this.pushSpaces(!0));return yield*this.pushCount(e.length-r),this.pushNewline(),"stream"}if(this.atLineEnd()){const n=yield*this.pushSpaces(!0);return yield*this.pushCount(e.length-n),yield*this.pushNewline(),"stream"}return yield Cf,yield*this.parseLineStart()}*parseLineStart(){const e=this.charAt(0);if(!e&&!this.atEnd)return this.setNext("line-start");if(e==="-"||e==="."){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");const n=this.peek(3);if((n==="---"||n==="...")&&Nt(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,n==="---"?"doc":"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!Nt(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){const[e,n]=this.peek(2);if(!n&&!this.atEnd)return this.setNext("block-start");if((e==="-"||e==="?"||e===":")&&Nt(n)){const s=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=s,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);const e=this.getLine();if(e===null)return this.setNext("doc");let n=yield*this.pushIndicators();switch(e[n]){case"#":yield*this.pushCount(e.length-n);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(Ki),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return n+=yield*this.parseBlockScalarHeader(),n+=yield*this.pushSpaces(!0),yield*this.pushCount(e.length-n),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let e,n,s=-1;do e=yield*this.pushNewline(),e>0?(n=yield*this.pushSpaces(!1),this.indentValue=s=n):n=0,n+=yield*this.pushSpaces(!0);while(e+n>0);const r=this.getLine();if(r===null)return this.setNext("flow");if((s!==-1&&s<this.indentNext&&r[0]!=="#"||s===0&&(r.startsWith("---")||r.startsWith("..."))&&Nt(r[3]))&&!(s===this.indentNext-1&&this.flowLevel===1&&(r[0]==="]"||r[0]==="}")))return this.flowLevel=0,yield jf,yield*this.parseLineStart();let i=0;for(;r[i]===",";)i+=yield*this.pushCount(1),i+=yield*this.pushSpaces(!0),this.flowKey=!1;switch(i+=yield*this.pushIndicators(),r[i]){case void 0:return"flow";case"#":return yield*this.pushCount(r.length-i),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(Ki),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{const o=this.charAt(1);if(this.flowKey||Nt(o)||o===",")return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){const e=this.charAt(0);let n=this.buffer.indexOf(e,this.pos+1);if(e==="'")for(;n!==-1&&this.buffer[n+1]==="'";)n=this.buffer.indexOf("'",n+2);else for(;n!==-1;){let i=0;for(;this.buffer[n-1-i]==="\\";)i+=1;if(i%2===0)break;n=this.buffer.indexOf('"',n+1)}const s=this.buffer.substring(0,n);let r=s.indexOf(`
`,this.pos);if(r!==-1){for(;r!==-1;){const i=this.continueScalar(r+1);if(i===-1)break;r=s.indexOf(`
`,i)}r!==-1&&(n=r-(s[r-1]==="\r"?2:1))}if(n===-1){if(!this.atEnd)return this.setNext("quoted-scalar");n=this.buffer.length}return yield*this.pushToIndex(n+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let e=this.pos;for(;;){const n=this.buffer[++e];if(n==="+")this.blockScalarKeep=!0;else if(n>"0"&&n<="9")this.blockScalarIndent=Number(n)-1;else if(n!=="-")break}return yield*this.pushUntil(n=>Nt(n)||n==="#")}*parseBlockScalar(){let e=this.pos-1,n=0,s;e:for(let i=this.pos;s=this.buffer[i];++i)switch(s){case" ":n+=1;break;case`
`:e=i,n=0;break;case"\r":{const o=this.buffer[i+1];if(!o&&!this.atEnd)return this.setNext("block-scalar");if(o===`
`)break}default:break e}if(!s&&!this.atEnd)return this.setNext("block-scalar");if(n>=this.indentNext){this.blockScalarIndent===-1?this.indentNext=n:this.indentNext=this.blockScalarIndent+(this.indentNext===0?1:this.indentNext);do{const i=this.continueScalar(e+1);if(i===-1)break;e=this.buffer.indexOf(`
`,i)}while(e!==-1);if(e===-1){if(!this.atEnd)return this.setNext("block-scalar");e=this.buffer.length}}let r=e+1;for(s=this.buffer[r];s===" ";)s=this.buffer[++r];if(s==="	"){for(;s==="	"||s===" "||s==="\r"||s===`
`;)s=this.buffer[++r];e=r-1}else if(!this.blockScalarKeep)do{let i=e-1,o=this.buffer[i];o==="\r"&&(o=this.buffer[--i]);const a=i;for(;o===" ";)o=this.buffer[--i];if(o===`
`&&i>=this.pos&&i+1+n>a)e=i;else break}while(!0);return yield Po,yield*this.pushToIndex(e+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){const e=this.flowLevel>0;let n=this.pos-1,s=this.pos-1,r;for(;r=this.buffer[++s];)if(r===":"){const i=this.buffer[s+1];if(Nt(i)||e&&Mr.has(i))break;n=s}else if(Nt(r)){let i=this.buffer[s+1];if(r==="\r"&&(i===`
`?(s+=1,r=`
`,i=this.buffer[s+1]):n=s),i==="#"||e&&Mr.has(i))break;if(r===`
`){const o=this.continueScalar(s+1);if(o===-1)break;s=Math.max(s,o-2)}}else{if(e&&Mr.has(r))break;n=s}return!r&&!this.atEnd?this.setNext("plain-scalar"):(yield Po,yield*this.pushToIndex(n+1,!0),e?"flow":"doc")}*pushCount(e){return e>0?(yield this.buffer.substr(this.pos,e),this.pos+=e,e):0}*pushToIndex(e,n){const s=this.buffer.slice(this.pos,e);return s?(yield s,this.pos+=s.length,s.length):(n&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(Ki))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"-":case"?":case":":{const e=this.flowLevel>0,n=this.charAt(1);if(Nt(n)||e&&Mr.has(n))return e?this.flowKey&&(this.flowKey=!1):this.indentNext=this.indentValue+1,(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}}return 0}*pushTag(){if(this.charAt(1)==="<"){let e=this.pos+2,n=this.buffer[e];for(;!Nt(n)&&n!==">";)n=this.buffer[++e];return yield*this.pushToIndex(n===">"?e+1:e,!1)}else{let e=this.pos+1,n=this.buffer[e];for(;n;)if(Gx.has(n))n=this.buffer[++e];else if(n==="%"&&Ul.has(this.buffer[e+1])&&Ul.has(this.buffer[e+2]))n=this.buffer[e+=3];else break;return yield*this.pushToIndex(e,!1)}}*pushNewline(){const e=this.buffer[this.pos];return e===`
`?yield*this.pushCount(1):e==="\r"&&this.charAt(1)===`
`?yield*this.pushCount(2):0}*pushSpaces(e){let n=this.pos-1,s;do s=this.buffer[++n];while(s===" "||e&&s==="	");const r=n-this.pos;return r>0&&(yield this.buffer.substr(this.pos,r),this.pos=n),r}*pushUntil(e){let n=this.pos,s=this.buffer[n];for(;!e(s);)s=this.buffer[++n];return yield*this.pushToIndex(n,!1)}}class Kx{constructor(){this.lineStarts=[],this.addNewLine=e=>this.lineStarts.push(e),this.linePos=e=>{let n=0,s=this.lineStarts.length;for(;n<s;){const i=n+s>>1;this.lineStarts[i]<e?n=i+1:s=i}if(this.lineStarts[n]===e)return{line:n+1,col:1};if(n===0)return{line:0,col:e};const r=this.lineStarts[n-1];return{line:n,col:e-r+1}}}}function fn(t,e){for(let n=0;n<t.length;++n)if(t[n].type===e)return!0;return!1}function Zl(t){for(let e=0;e<t.length;++e)switch(t[e].type){case"space":case"comment":case"newline":break;default:return e}return-1}function If(t){switch(t?.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function Pr(t){switch(t.type){case"document":return t.start;case"block-map":{const e=t.items[t.items.length-1];return e.sep??e.start}case"block-seq":return t.items[t.items.length-1].start;default:return[]}}function ss(t){if(t.length===0)return[];let e=t.length;e:for(;--e>=0;)switch(t[e].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;t[++e]?.type==="space";);return t.splice(e,t.length)}function Vl(t){if(t.start.type==="flow-seq-start")for(const e of t.items)e.sep&&!e.value&&!fn(e.start,"explicit-key-ind")&&!fn(e.sep,"map-value-ind")&&(e.key&&(e.value=e.key),delete e.key,If(e.value)?e.value.end?Array.prototype.push.apply(e.value.end,e.sep):e.value.end=e.sep:Array.prototype.push.apply(e.start,e.sep),delete e.sep)}class Xx{constructor(e){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new Hx,this.onNewLine=e}*parse(e,n=!1){this.onNewLine&&this.offset===0&&this.onNewLine(0);for(const s of this.lexer.lex(e,n))yield*this.next(s);n||(yield*this.end())}*next(e){if(this.source=e,this.atScalar){this.atScalar=!1,yield*this.step(),this.offset+=e.length;return}const n=Yx(e);if(n)if(n==="scalar")this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=n,yield*this.step(),n){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+e.length);break;case"space":this.atNewLine&&e[0]===" "&&(this.indent+=e.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=e.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=e.length}else{const s=`Not a YAML token: ${e}`;yield*this.pop({type:"error",offset:this.offset,message:s,source:e}),this.offset+=e.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){const e=this.peek(1);if(this.type==="doc-end"&&e?.type!=="doc-end"){for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source});return}if(!e)return yield*this.stream();switch(e.type){case"document":return yield*this.document(e);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(e);case"block-scalar":return yield*this.blockScalar(e);case"block-map":return yield*this.blockMap(e);case"block-seq":return yield*this.blockSequence(e);case"flow-collection":return yield*this.flowCollection(e);case"doc-end":return yield*this.documentEnd(e)}yield*this.pop()}peek(e){return this.stack[this.stack.length-e]}*pop(e){const n=e??this.stack.pop();if(!n)yield{type:"error",offset:this.offset,source:"",message:"Tried to pop an empty stack"};else if(this.stack.length===0)yield n;else{const s=this.peek(1);switch(n.type==="block-scalar"?n.indent="indent"in s?s.indent:0:n.type==="flow-collection"&&s.type==="document"&&(n.indent=0),n.type==="flow-collection"&&Vl(n),s.type){case"document":s.value=n;break;case"block-scalar":s.props.push(n);break;case"block-map":{const r=s.items[s.items.length-1];if(r.value){s.items.push({start:[],key:n,sep:[]}),this.onKeyLine=!0;return}else if(r.sep)r.value=n;else{Object.assign(r,{key:n,sep:[]}),this.onKeyLine=!r.explicitKey;return}break}case"block-seq":{const r=s.items[s.items.length-1];r.value?s.items.push({start:[],value:n}):r.value=n;break}case"flow-collection":{const r=s.items[s.items.length-1];!r||r.value?s.items.push({start:[],key:n,sep:[]}):r.sep?r.value=n:Object.assign(r,{key:n,sep:[]});return}default:yield*this.pop(),yield*this.pop(n)}if((s.type==="document"||s.type==="block-map"||s.type==="block-seq")&&(n.type==="block-map"||n.type==="block-seq")){const r=n.items[n.items.length-1];r&&!r.sep&&!r.value&&r.start.length>0&&Zl(r.start)===-1&&(n.indent===0||r.start.every(i=>i.type!=="comment"||i.indent<n.indent))&&(s.type==="document"?s.end=r.start:s.items.push({start:r.start}),n.items.splice(-1,1))}}}*stream(){switch(this.type){case"directive-line":yield{type:"directive",offset:this.offset,source:this.source};return;case"byte-order-mark":case"space":case"comment":case"newline":yield this.sourceToken;return;case"doc-mode":case"doc-start":{const e={type:"document",offset:this.offset,start:[]};this.type==="doc-start"&&e.start.push(this.sourceToken),this.stack.push(e);return}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(e){if(e.value)return yield*this.lineEnd(e);switch(this.type){case"doc-start":{Zl(e.start)!==-1?(yield*this.pop(),yield*this.step()):e.start.push(this.sourceToken);return}case"anchor":case"tag":case"space":case"comment":case"newline":e.start.push(this.sourceToken);return}const n=this.startBlockValue(e);n?this.stack.push(n):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(e){if(this.type==="map-value-ind"){const n=Pr(this.peek(2)),s=ss(n);let r;e.end?(r=e.end,r.push(this.sourceToken),delete e.end):r=[this.sourceToken];const i={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:s,key:e,sep:r}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=i}else yield*this.lineEnd(e)}*blockScalar(e){switch(this.type){case"space":case"comment":case"newline":e.props.push(this.sourceToken);return;case"scalar":if(e.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let n=this.source.indexOf(`
`)+1;for(;n!==0;)this.onNewLine(this.offset+n),n=this.source.indexOf(`
`,n)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(e){const n=e.items[e.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,n.value){const s="end"in n.value?n.value.end:void 0;(Array.isArray(s)?s[s.length-1]:void 0)?.type==="comment"?s?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)e.items.push({start:[this.sourceToken]});else if(n.sep)n.sep.push(this.sourceToken);else{if(this.atIndentedComment(n.start,e.indent)){const r=e.items[e.items.length-2]?.value?.end;if(Array.isArray(r)){Array.prototype.push.apply(r,n.start),r.push(this.sourceToken),e.items.pop();return}}n.start.push(this.sourceToken)}return}if(this.indent>=e.indent){const s=!this.onKeyLine&&this.indent===e.indent,r=s&&(n.sep||n.explicitKey)&&this.type!=="seq-item-ind";let i=[];if(r&&n.sep&&!n.value){const o=[];for(let a=0;a<n.sep.length;++a){const l=n.sep[a];switch(l.type){case"newline":o.push(a);break;case"space":break;case"comment":l.indent>e.indent&&(o.length=0);break;default:o.length=0}}o.length>=2&&(i=n.sep.splice(o[1]))}switch(this.type){case"anchor":case"tag":r||n.value?(i.push(this.sourceToken),e.items.push({start:i}),this.onKeyLine=!0):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"explicit-key-ind":!n.sep&&!n.explicitKey?(n.start.push(this.sourceToken),n.explicitKey=!0):r||n.value?(i.push(this.sourceToken),e.items.push({start:i,explicitKey:!0})):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken],explicitKey:!0}]}),this.onKeyLine=!0;return;case"map-value-ind":if(n.explicitKey)if(n.sep)if(n.value)e.items.push({start:[],key:null,sep:[this.sourceToken]});else if(fn(n.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:i,key:null,sep:[this.sourceToken]}]});else if(If(n.key)&&!fn(n.sep,"newline")){const o=ss(n.start),a=n.key,l=n.sep;l.push(this.sourceToken),delete n.key,delete n.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:a,sep:l}]})}else i.length>0?n.sep=n.sep.concat(i,this.sourceToken):n.sep.push(this.sourceToken);else if(fn(n.start,"newline"))Object.assign(n,{key:null,sep:[this.sourceToken]});else{const o=ss(n.start);this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:null,sep:[this.sourceToken]}]})}else n.sep?n.value||r?e.items.push({start:i,key:null,sep:[this.sourceToken]}):fn(n.sep,"map-value-ind")?this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):n.sep.push(this.sourceToken):Object.assign(n,{key:null,sep:[this.sourceToken]});this.onKeyLine=!0;return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const o=this.flowScalar(this.type);r||n.value?(e.items.push({start:i,key:o,sep:[]}),this.onKeyLine=!0):n.sep?this.stack.push(o):(Object.assign(n,{key:o,sep:[]}),this.onKeyLine=!0);return}default:{const o=this.startBlockValue(e);if(o){if(o.type==="block-seq"){if(!n.explicitKey&&n.sep&&!fn(n.sep,"newline")){yield*this.pop({type:"error",offset:this.offset,message:"Unexpected block-seq-ind on same line with key",source:this.source});return}}else s&&e.items.push({start:i});this.stack.push(o);return}}}}yield*this.pop(),yield*this.step()}*blockSequence(e){const n=e.items[e.items.length-1];switch(this.type){case"newline":if(n.value){const s="end"in n.value?n.value.end:void 0;(Array.isArray(s)?s[s.length-1]:void 0)?.type==="comment"?s?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)e.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(n.start,e.indent)){const r=e.items[e.items.length-2]?.value?.end;if(Array.isArray(r)){Array.prototype.push.apply(r,n.start),r.push(this.sourceToken),e.items.pop();return}}n.start.push(this.sourceToken)}return;case"anchor":case"tag":if(n.value||this.indent<=e.indent)break;n.start.push(this.sourceToken);return;case"seq-item-ind":if(this.indent!==e.indent)break;n.value||fn(n.start,"seq-item-ind")?e.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken);return}if(this.indent>e.indent){const s=this.startBlockValue(e);if(s){this.stack.push(s);return}}yield*this.pop(),yield*this.step()}*flowCollection(e){const n=e.items[e.items.length-1];if(this.type==="flow-error-end"){let s;do yield*this.pop(),s=this.peek(1);while(s?.type==="flow-collection")}else if(e.end.length===0){switch(this.type){case"comma":case"explicit-key-ind":!n||n.sep?e.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken);return;case"map-value-ind":!n||n.value?e.items.push({start:[],key:null,sep:[this.sourceToken]}):n.sep?n.sep.push(this.sourceToken):Object.assign(n,{key:null,sep:[this.sourceToken]});return;case"space":case"comment":case"newline":case"anchor":case"tag":!n||n.value?e.items.push({start:[this.sourceToken]}):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const r=this.flowScalar(this.type);!n||n.value?e.items.push({start:[],key:r,sep:[]}):n.sep?this.stack.push(r):Object.assign(n,{key:r,sep:[]});return}case"flow-map-end":case"flow-seq-end":e.end.push(this.sourceToken);return}const s=this.startBlockValue(e);s?this.stack.push(s):(yield*this.pop(),yield*this.step())}else{const s=this.peek(2);if(s.type==="block-map"&&(this.type==="map-value-ind"&&s.indent===e.indent||this.type==="newline"&&!s.items[s.items.length-1].sep))yield*this.pop(),yield*this.step();else if(this.type==="map-value-ind"&&s.type!=="flow-collection"){const r=Pr(s),i=ss(r);Vl(e);const o=e.end.splice(1,e.end.length);o.push(this.sourceToken);const a={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:i,key:e,sep:o}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=a}else yield*this.lineEnd(e)}}flowScalar(e){if(this.onNewLine){let n=this.source.indexOf(`
`)+1;for(;n!==0;)this.onNewLine(this.offset+n),n=this.source.indexOf(`
`,n)+1}return{type:e,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(e){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;const n=Pr(e),s=ss(n);return s.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:s,explicitKey:!0}]}}case"map-value-ind":{this.onKeyLine=!0;const n=Pr(e),s=ss(n);return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:s,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(e,n){return this.type!=="comment"||this.indent<=n?!1:e.every(s=>s.type==="newline"||s.type==="space")}*documentEnd(e){this.type!=="doc-mode"&&(e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop()))}*lineEnd(e){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;default:e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop())}}}function Qx(t){const e=t.prettyErrors!==!1;return{lineCounter:t.lineCounter||e&&new Kx||null,prettyErrors:e}}function Jx(t,e={}){const{lineCounter:n,prettyErrors:s}=Qx(e),r=new Xx(n?.addNewLine),i=new Wx(e);let o=null;for(const a of i.compose(r.parse(t),!0,t.length))if(!o)o=a;else if(o.options.logLevel!=="silent"){o.errors.push(new Ls(a.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}return s&&n&&(o.errors.forEach(Ll(t,n)),o.warnings.forEach(Ll(t,n))),o}function Mf(t,e,n){let s;const r=Jx(t,n);if(!r)return null;if(r.warnings.forEach(i=>rf(r.options.logLevel,i)),r.errors.length>0){if(r.options.logLevel!=="silent")throw r.errors[0];r.errors=[]}return r.toJS(Object.assign({reviver:s},n))}const Pf=Ro((t,e,n)=>({trains:{},currentTrain:void 0,setTrainsFromYml:s=>{try{const r=Mf(s),i=Db(r);i.valid?t({trains:yu.parse(r),parseErrors:void 0}):(console.error("Invalid YAML data:",i.errors),ze.error("We couldn't load your trains. Please check that you uploaded the SavedTrainProperties YAML file from TrainCarts. See the browser console for more details.",{duration:1e4}),t({trains:{},parseErrors:i.errors}))}catch(r){console.error("Error parsing YAML:",r),ze.error("We couldn't read your file. Please make sure it's a valid YAML and try again. See the browser console for more details.",{duration:1e4}),t({trains:{},parseErrors:["Failed to parse YAML.",String(r)]});return}},setTrains:s=>t({trains:s}),setCurrentTrain:s=>t({currentTrain:s}),clearCurrentTrain:()=>t({currentTrain:void 0}),reset:()=>t(n.getInitialState())})),e_=Lo("inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function t_(t){const e=D.c(12);let n,s,r,i;e[0]!==t?({className:n,variant:i,asChild:r,...s}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r,e[4]=i):(n=e[1],s=e[2],r=e[3],i=e[4]);const a=(r===void 0?!1:r)?Hl:"span";let l;e[5]!==n||e[6]!==i?(l=U(e_({variant:i}),n),e[5]=n,e[6]=i,e[7]=l):l=e[7];let c;return e[8]!==a||e[9]!==s||e[10]!==l?(c=h.jsx(a,{"data-slot":"badge",className:l,...s}),e[8]=a,e[9]=s,e[10]=l,e[11]=c):c=e[11],c}function n_(t){const e=D.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let s;return e[2]!==n?(s=h.jsx(cd,{"data-slot":"hover-card",...n}),e[2]=n,e[3]=s):s=e[3],s}function s_(t){const e=D.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let s;return e[2]!==n?(s=h.jsx(ud,{"data-slot":"hover-card-trigger",...n}),e[2]=n,e[3]=s):s=e[3],s}function r_(t){const e=D.c(12);let n,s,r,i;e[0]!==t?({className:n,align:r,sideOffset:i,...s}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r,e[4]=i):(n=e[1],s=e[2],r=e[3],i=e[4]);const o=r===void 0?"center":r,a=i===void 0?4:i;let l;e[5]!==n?(l=U("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-64 origin-(--radix-hover-card-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",n),e[5]=n,e[6]=l):l=e[6];let c;return e[7]!==o||e[8]!==s||e[9]!==a||e[10]!==l?(c=h.jsx(fd,{"data-slot":"hover-card-portal",children:h.jsx(hd,{"data-slot":"hover-card-content",align:o,sideOffset:a,className:l,...s})}),e[7]=o,e[8]=s,e[9]=a,e[10]=l,e[11]=c):c=e[11],c}function i_(){const t=D.c(61),e=yt(),n=Pf(),[s,r]=z.useState(n.currentTrain),[i,o]=z.useState(e.cart),[a,l]=z.useState(e.metadata.projectName);let c;t[0]!==n.trains?(c=Object.keys(n.trains),t[0]=n.trains,t[1]=c):c=t[1];const u=c.length;let f,d;t[2]!==n.currentTrain?(f=()=>{n.currentTrain&&r(n.currentTrain)},d=[n.currentTrain],t[2]=n.currentTrain,t[3]=f,t[4]=d):(f=t[3],d=t[4]),z.useEffect(f,d);let p,g;t[5]!==e.cart?(p=()=>{e.cart&&o(e.cart)},g=[e.cart],t[5]=e.cart,t[6]=p,t[7]=g):(p=t[6],g=t[7]),z.useEffect(p,g);let m,b;t[8]!==s?(m=()=>{if(s&&s.carts){const q=Object.values(s.carts)[0];o(q)}},b=[s],t[8]=s,t[9]=m,t[10]=b):(m=t[9],b=t[10]),z.useEffect(m,b);let y;t[11]===Symbol.for("react.memo_cache_sentinel")?(y=h.jsx(sa,{children:"New TCA-Project"}),t[11]=y):y=t[11];let k;t[12]===Symbol.for("react.memo_cache_sentinel")?(k=h.jsx(ft,{htmlFor:"projectName",children:"Project name"}),t[12]=k):k=t[12];let x,_,E;t[13]===Symbol.for("react.memo_cache_sentinel")?(E=h.jsx(ps,{id:"projectName",placeholder:"My TCA Project",className:"mt-2",onChange:q=>l(q.target.value)}),x=h.jsx("hr",{className:"my-4"}),_=h.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"TC Animator lets you animate one cart from a single train per project. To work on a different train or cart, create a new project for each one."}),t[13]=x,t[14]=_,t[15]=E):(x=t[13],_=t[14],E=t[15]);let T;t[16]!==s||t[17]!==u||t[18]!==n.trains?(T=u>1&&s==null&&h.jsxs(h.Fragment,{children:[h.jsx(ft,{htmlFor:"train",children:"Train"}),h.jsxs(Wr,{onValueChange:q=>{const ie=n.trains[q];ie&&(r(ie),o(null))},children:[h.jsx(Gr,{className:"w-full",id:"train",children:h.jsx(Yr,{placeholder:"Select a train"})}),h.jsx(qr,{children:h.jsxs(ro,{children:[h.jsx(io,{children:"Trains"}),Object.values(n.trains).filter(l_).map(a_)]})})]})]}),t[16]=s,t[17]=u,t[18]=n.trains,t[19]=T):T=t[19];let v;t[20]===Symbol.for("react.memo_cache_sentinel")?(v=h.jsx(ft,{htmlFor:"cart",className:"mt-4",children:"Cart"}),t[20]=v):v=t[20];let w;t[21]!==i||t[22]!==s?(w=s?.carts?Object.entries(s.carts).find(q=>{const[,ie]=q;return ie===i})?.[0]??"":"",t[21]=i,t[22]=s,t[23]=w):w=t[23];const S=!s?.carts;let N;t[24]!==s?.carts?(N=q=>{const ie=s?.carts?.[q];ie&&o(ie)},t[24]=s?.carts,t[25]=N):N=t[25];let O;t[26]===Symbol.for("react.memo_cache_sentinel")?(O=h.jsx(Gr,{className:"w-full",id:"cart",children:h.jsx(Yr,{placeholder:"Select a cart"})}),t[26]=O):O=t[26];let A;t[27]===Symbol.for("react.memo_cache_sentinel")?(A=h.jsx(io,{children:"Carts"}),t[27]=A):A=t[27];let C;t[28]!==s?.carts?(C=Object.entries(s?.carts||{}).map(o_),t[28]=s?.carts,t[29]=C):C=t[29];let M;t[30]!==C?(M=h.jsx(qr,{children:h.jsxs(ro,{children:[A,C]})}),t[30]=C,t[31]=M):M=t[31];let P;t[32]!==w||t[33]!==S||t[34]!==N||t[35]!==M?(P=h.jsxs(Wr,{value:w,disabled:S,onValueChange:N,children:[O,M]}),t[32]=w,t[33]=S,t[34]=N,t[35]=M,t[36]=P):P=t[36];let R;t[37]!==T||t[38]!==P?(R=h.jsxs(ta,{children:[y,h.jsx(ra,{asChild:!0,children:h.jsxs("div",{children:[k,E,x,_,T,v,P]})})]}),t[37]=T,t[38]=P,t[39]=R):R=t[39];let $;t[40]!==e||t[41]!==n?($=()=>{e.reset(),n.reset()},t[40]=e,t[41]=n,t[42]=$):$=t[42];let F;t[43]===Symbol.for("react.memo_cache_sentinel")?(F=h.jsx(uh,{}),t[43]=F):F=t[43];let L;t[44]!==$?(L=h.jsxs(Fe,{variant:"secondary",onClick:$,children:[F,"Back"]}),t[44]=$,t[45]=L):L=t[45];let W;t[46]!==i||t[47]!==s||t[48]!==a||t[49]!==e||t[50]!==n?(W=async()=>{a&&s&&i&&(e.setProjectName(a),n.setCurrentTrain(s),e.setCart(i),await e.saveProject(),n.reset())},t[46]=i,t[47]=s,t[48]=a,t[49]=e,t[50]=n,t[51]=W):W=t[51];const K=!(a&&s&&i);let ne;t[52]!==W||t[53]!==K?(ne=h.jsx(Fe,{onClick:W,disabled:K,children:"Create Project"}),t[52]=W,t[53]=K,t[54]=ne):ne=t[54];let Y;t[55]!==L||t[56]!==ne?(Y=h.jsxs(na,{className:"flex justify-between",children:[L,ne]}),t[55]=L,t[56]=ne,t[57]=Y):Y=t[57];let te;return t[58]!==R||t[59]!==Y?(te=h.jsx(Jo,{open:!0,children:h.jsxs(ea,{children:[R,Y]})}),t[58]=R,t[59]=Y,t[60]=te):te=t[60],te}function o_(t){const[e]=t;return h.jsx(Dn,{value:e,children:e},e)}function a_(t){return h.jsx(Dn,{value:t.savedName,children:t.savedName},t.savedName)}function l_(t){return t.carts}function c_(){const t=yt(),e=Pf(),[n,s]=z.useState(!1),[r,i]=z.useState(""),o=z.useRef(!1),a=async()=>{s(!0);const u=await Fo({description:"Select a YAML file",mimeTypes:["application/x-yaml","text/yaml"],extensions:[".yaml",".yml"],id:"load-saved-train-properties",startIn:"documents"}).catch(()=>null);if(u){const f=await u.text();e.setTrainsFromYml(f),e.setCurrentTrain(Object.values(e.trains)[0])}s(!1)},l=z.useCallback(async u=>{s(!0),await(async()=>{const d=u??r;if(!d)return;const p=["paste.traincarts.net","hastebin.com","paste.foxxite.com"],g=new URL(d);if(!p.includes(g.hostname)){ze.error("The provided URL is not from a supported domain.");return}const m=ze.loading("Importing data...");g.pathname.includes("/raw/")||(g.pathname=`/raw${g.pathname}`);const b=await fetch(g.toString(),{method:"GET",headers:{"Content-Type":"text/plain"}}).catch(k=>(ze.error(`Failed to fetch data: ${k.message}`,{id:m}),null));if(!b)return;if(!b.ok){ze.error(`Failed to fetch data: ${b.status} ${b.statusText}`);return}const y=await b.text();try{const k=Mf(y);if(!k||typeof k!="object"){ze.error("The fetched data is not a valid YAML object.",{id:m});return}if(!("carts"in k)){ze.error("The fetched data does not appear to be a valid TrainCarts export.",{id:m});return}const x=k.carts,E={savedName:"TemporaryTrain",carts:Xt(re(),Qo).parse(x)};e.setTrains({TemporaryTrain:E}),e.setCurrentTrain(E)}catch(k){ze.error(`Failed to parse YAML: ${k}`,{id:m});return}ze.success("Data imported successfully!",{id:m})})().catch(d=>{console.error("Error during import:",d),ze.error(`Import failed: ${d}`,{id:"import-error"})}),s(!1)},[r,e]),c=async()=>{s(!0),await ze.promise(t.loadProjectFromFileDialog(),{loading:"Loading project...",success:"Project loaded successfully!",error:"Failed to load project."}).unwrap().catch(()=>{t.reset()}),s(!1)};return z.useEffect(()=>{const u=async g=>{if(s(!0),!g.name.endsWith(ys)){ze.error(`Invalid file type. Please select a ${ys} file.`),s(!1);return}try{await ze.promise(t.loadProjectFromFileHandle(g),{loading:"Loading project...",success:"Project loaded successfully!",error:"Failed to load project."})}catch{t.reset()}s(!1)},f=g=>{if(n||t.metadata.createdAt)return;const m=g.clipboardData?.getData("text");if(m&&/^https?:\/\/\S+$/i.test(m.trim())&&!o.current){o.current=!0,l(m.trim()),setTimeout(()=>{o.current=!1},500);return}const b=g.clipboardData?.items;if(b){for(const y of b)if(y.kind==="file"){const k=y.getAsFile();if(k){u(k);return}}}},d=g=>{if(g.preventDefault(),!(n||t.metadata.createdAt)&&g.dataTransfer?.files&&g.dataTransfer.files.length>0){const m=g.dataTransfer.files[0];u(m)}},p=g=>{g.preventDefault()};return window.addEventListener("paste",f),window.addEventListener("drop",d),window.addEventListener("dragover",p),()=>{window.removeEventListener("paste",f),window.removeEventListener("drop",d),window.removeEventListener("dragover",p)}},[n,l,t]),n?h.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 backdrop-blur"}):Object.entries(e.trains).length>0&&!t.metadata.createdAt?h.jsx(i_,{}):h.jsx(Jo,{open:!t.metadata.createdAt,children:h.jsxs(ea,{children:[h.jsxs(ta,{children:[h.jsx(sa,{className:"text-3xl font-bold text-center",children:"Welcome to TC Animator!"}),h.jsx(ra,{asChild:!0,children:h.jsxs("div",{className:"space-y-4 pt-2",children:[h.jsx("p",{className:"text-center text-balance leading-relaxed",children:"Please import a train exported from TrainCarts or open an existing TCA-Project."}),h.jsxs("div",{className:"flex flex-col gap-4",children:[h.jsxs("div",{className:"space-y-4 p-6 rounded-lg border border-zinc-300 bg-zinc-50/50 dark:border-zinc-800 dark:bg-zinc-950/50 hover:border-blue-500/50 dark:hover:border-blue-500/50 transition-colors",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"p-2 rounded-lg bg-blue-500/10",children:h.jsx(ah,{className:"w-5 h-5 text-blue-400"})}),h.jsxs("h2",{className:"text-lg font-semibold",children:["Import from TrainCarts"," ",h.jsxs(n_,{children:[h.jsx(s_,{asChild:!0,children:h.jsx(t_,{variant:"secondary",children:"1.21.11-v1"})}),h.jsx(r_,{className:"w-fit max-w-sm",children:h.jsxs("p",{className:"text-balance",children:["TC Animator is proprietary donationware originally created for"," ",h.jsx("a",{href:"https://wondervalepark.com",target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 underline hover:text-blue-600",children:"Wondervale"}),". It has been released publicly, but it is designed specifically to support the version of TrainCarts used on Wondervale's servers. Other versions might work, but they are"," ",h.jsx("strong",{children:"not officially supported."})]})})]})]})]}),h.jsxs("h6",{className:"text-sm text-muted-foreground text-balance -mt-2",children:["Run"," ",h.jsx("code",{className:"font-mono text-primary",children:"/train export"})," ","in your Minecraft server to get a shareable link. Paste it here to import your train."]}),h.jsxs("div",{className:"space-y-3",children:[h.jsx(ps,{type:"url",value:r,onChange:u=>i(u.target.value),placeholder:"https://paste.traincarts.net/"}),h.jsx(Fe,{disabled:!r.trim(),onClick:u=>{u.shiftKey?a():l()},className:"w-full",children:"Import from TrainCarts"})]})]}),h.jsxs("div",{className:"space-y-4 p-6 rounded-lg border border-zinc-300 bg-zinc-50/50 dark:border-zinc-800 dark:bg-zinc-950/50 hover:border-emerald-500/50 dark:hover:border-emerald-500/50 transition-colors",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"p-2 rounded-lg bg-blue-500/10",children:h.jsx(lh,{className:"w-5 h-5 text-emerald-400"})}),h.jsx("h2",{className:"text-lg font-semibold",children:"Open TCA-Project"})]}),h.jsxs("h6",{className:"text-sm text-muted-foreground text-balance -mt-2",children:["Open a previously saved TCA-Project file with the"," ",h.jsx("code",{className:"font-mono text-primary",children:ys})," ","extension."]}),h.jsx(Fe,{className:"bg-emerald-500 hover:bg-emerald-500/90 dark:bg-emerald-700  dark:hover:bg-emerald-700/90 w-full",onClick:c,children:"Browse files"})]})]})]})})]}),h.jsx(na,{className:"sm:justify-center text-sm text-muted-foreground",children:h.jsxs("a",{href:"https://foxxite.com",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5",children:[h.jsx("span",{children:"Made with  by Foxxite | Articca"}),h.jsx(ch,{className:"w-4 h-4"})]})})]})})}Bf.createRoot(document.getElementById("root")).render(h.jsxs(z.StrictMode,{children:[h.jsx(Z2,{}),h.jsx(c_,{}),h.jsx(z2,{}),h.jsx(Uf,{position:"top-center",richColors:!0})]}));
