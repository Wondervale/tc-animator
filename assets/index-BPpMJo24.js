const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/monaco-B-o7uJD9.js","assets/react-Bp6ARjJk.js","assets/lodash-DfTyGjEf.js"])))=>i.map(i=>d[i]);
import{B as $,j as d,P as Vc,C as Kc,D as Gc,r as U,E as qc,S as Yc,F as zt,G as Hc,z as Wc,T as Xc}from"./react-Bp6ARjJk.js";import{t as Qc}from"./tailwind-D6B6e0vX.js";import{G as Jc,X as Na,C as eu,a as Oa,b as tu,M as nu,c as su,I as ps,d as ru,B as iu,e as ou,R as au,f as lu,F as cu,E as uu,g as fu}from"./lucide-DZ7JDAqv.js";import{T as hu,C as du,D as pu,R as mu,P as gu,a as yu,O as bu,b as wu,I as vu,S as xu,M as _u,c as Eu,d as Su,e as ku,f as Au,g as Tu,h as Nu,i as Ou,j as Iu,V as Cu,k as ju,l as Ru,G as Mu,L as Pu,m as $u,n as zu,o as Lu,p as Fu,q as Du,r as Bu,s as Uu,t as Zu,u as Vu,A as Ku,v as Gu,w as qu,x as Yu,y as Hu,z as Wu,B as Xu,E as Qu,F as Ju,H as ef,J as tf,K as nf,N as sf,Q as rf,U as of,W as af,X as lf,Y as cf,Z as uf,_ as ff,$ as hf}from"./radix-6VuHaqCQ.js";import{a as ki,p as df,b as pf}from"./zustand-Dy9N9sSW.js";import{N as mf}from"./nbt-dlIGLSUp.js";import{g as gf}from"./lodash-DfTyGjEf.js";import{u as ir,a as Ai,b as yf,c as Ti,T as bf,B as wf,I as vf,d as xf,e as _f,O as Ef,L as Sf,f as kf,P as Af,H as Tf,G as Nf,g as Of,h as If,C as Cf,_ as jf}from"./react-three-DI5cI5SY.js";import{a7 as uo,a8 as Ia,a9 as Gs,e as Ee,aa as Rf,Q as Ca,ab as Ni,ac as fo,ad as ho,ae as Mf,af as Pf,D as $f}from"./three-B8WDGRLw.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function ja(t){var e,n,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=ja(t[e]))&&(s&&(s+=" "),s+=n)}else for(n in t)t[n]&&(s&&(s+=" "),s+=n);return s}function Ra(){for(var t,e,n=0,s="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=ja(t))&&(s&&(s+=" "),s+=e);return s}function V(...t){return Qc(Ra(t))}function rt(t){return-t*(Math.PI/180)}function Ma(t){const e=new ArrayBuffer(t.byteLength);return new Uint8Array(e).set(new Uint8Array(t)),e}function po(t){const e=$.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=V("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=d.jsx(Gc,{"data-slot":"resizable-panel-group",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function ms(t){const e=$.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let s;return e[2]!==n?(s=d.jsx(Vc,{"data-slot":"resizable-panel",...n}),e[2]=n,e[3]=s):s=e[3],s}function mo(t){const e=$.c(12);let n,s,r;e[0]!==t?({withHandle:r,className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r):(n=e[1],s=e[2],r=e[3]);let i;e[4]!==n?(i=V("bg-border focus-visible:ring-ring relative flex w-px items-center justify-center after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:ring-1 focus-visible:ring-offset-1 focus-visible:outline-hidden data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:translate-x-0 data-[panel-group-direction=vertical]:after:-translate-y-1/2 [&[data-panel-group-direction=vertical]>div]:rotate-90 hover:bg-primary",n),e[4]=n,e[5]=i):i=e[5];let o;e[6]!==r?(o=r&&d.jsx("div",{className:"bg-border z-10 flex h-4 w-3 items-center justify-center rounded-xs border",children:d.jsx(Jc,{className:"size-2.5"})}),e[6]=r,e[7]=o):o=e[7];let a;return e[8]!==s||e[9]!==i||e[10]!==o?(a=d.jsx(Kc,{"data-slot":"resizable-handle",className:i,...s,children:o}),e[8]=s,e[9]=i,e[10]=o,e[11]=a):a=e[11],a}function zf(t){const e=$.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let s;return e[2]!==n?(s=d.jsx(mu,{"data-slot":"dialog",...n}),e[2]=n,e[3]=s):s=e[3],s}function Lf(t){const e=$.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let s;return e[2]!==n?(s=d.jsx(gu,{"data-slot":"dialog-portal",...n}),e[2]=n,e[3]=s):s=e[3],s}function Ff(t){const e=$.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=V("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50 backdrop-blur",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=d.jsx(bu,{"data-slot":"dialog-overlay",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function Df(t){const e=$.c(15);let n,s,r,i;e[0]!==t?({className:s,children:n,showCloseButton:i,...r}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r,e[4]=i):(n=e[1],s=e[2],r=e[3],i=e[4]);const o=i===void 0?!0:i;let a;e[5]===Symbol.for("react.memo_cache_sentinel")?(a=d.jsx(Ff,{}),e[5]=a):a=e[5];let l;e[6]!==s?(l=V("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",s),e[6]=s,e[7]=l):l=e[7];let c;e[8]!==o?(c=o&&d.jsxs(yu,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[d.jsx(Na,{}),d.jsx("span",{className:"sr-only",children:"Close"})]}),e[8]=o,e[9]=c):c=e[9];let u;return e[10]!==n||e[11]!==r||e[12]!==l||e[13]!==c?(u=d.jsxs(Lf,{"data-slot":"dialog-portal",children:[a,d.jsxs(du,{"data-slot":"dialog-content",className:l,...r,children:[n,c]})]}),e[10]=n,e[11]=r,e[12]=l,e[13]=c,e[14]=u):u=e[14],u}function Bf(t){const e=$.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=V("flex flex-col gap-2 text-center sm:text-left",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=d.jsx("div",{"data-slot":"dialog-header",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function Uf(t){const e=$.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=V("text-lg leading-none font-semibold",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=d.jsx(hu,{"data-slot":"dialog-title",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function Zf(t){const e=$.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=V("text-muted-foreground text-sm",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=d.jsx(pu,{"data-slot":"dialog-description",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function Vf(t){const e=$.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=V("bg-background flex h-9 items-center gap-1 rounded-md border p-1 shadow-xs",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=d.jsx(Su,{"data-slot":"menubar",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function go(t){const e=$.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let s;return e[2]!==n?(s=d.jsx(_u,{"data-slot":"menubar-menu",...n}),e[2]=n,e[3]=s):s=e[3],s}function Kf(t){const e=$.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let s;return e[2]!==n?(s=d.jsx(ku,{"data-slot":"menubar-portal",...n}),e[2]=n,e[3]=s):s=e[3],s}function Gf(t){const e=$.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=V("focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground flex items-center rounded-sm px-2 py-1 text-sm font-medium outline-hidden select-none",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=d.jsx(wu,{"data-slot":"menubar-trigger",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function qf(t){const e=$.c(14);let n,s,r,i,o;e[0]!==t?({className:n,align:r,alignOffset:i,sideOffset:o,...s}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r,e[4]=i,e[5]=o):(n=e[1],s=e[2],r=e[3],i=e[4],o=e[5]);const a=r===void 0?"start":r,l=i===void 0?-4:i,c=o===void 0?8:o;let u;e[6]!==n?(u=V("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[12rem] origin-(--radix-menubar-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-md",n),e[6]=n,e[7]=u):u=e[7];let f;return e[8]!==a||e[9]!==l||e[10]!==s||e[11]!==c||e[12]!==u?(f=d.jsx(Kf,{children:d.jsx(Eu,{"data-slot":"menubar-content",align:a,alignOffset:l,sideOffset:c,className:u,...s})}),e[8]=a,e[9]=l,e[10]=s,e[11]=c,e[12]=u,e[13]=f):f=e[13],f}function on(t){const e=$.c(12);let n,s,r,i;e[0]!==t?({className:n,inset:s,variant:i,...r}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r,e[4]=i):(n=e[1],s=e[2],r=e[3],i=e[4]);const o=i===void 0?"default":i;let a;e[5]!==n?(a=V("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",n),e[5]=n,e[6]=a):a=e[6];let l;return e[7]!==s||e[8]!==r||e[9]!==a||e[10]!==o?(l=d.jsx(vu,{"data-slot":"menubar-item","data-inset":s,"data-variant":o,className:a,...r}),e[7]=s,e[8]=r,e[9]=a,e[10]=o,e[11]=l):l=e[11],l}function Or(t){const e=$.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=V("bg-border -mx-1 my-1 h-px",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=d.jsx(xu,{"data-slot":"menubar-separator",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function yo(t){const e=$.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=V("text-muted-foreground ml-auto text-xs tracking-widest",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=d.jsx("span",{"data-slot":"menubar-shortcut",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function Vr(t){const e=$.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let s;return e[2]!==n?(s=d.jsx(Ou,{"data-slot":"select",...n}),e[2]=n,e[3]=s):s=e[3],s}function Kr(t){const e=$.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let s;return e[2]!==n?(s=d.jsx(Mu,{"data-slot":"select-group",...n}),e[2]=n,e[3]=s):s=e[3],s}function Gr(t){const e=$.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let s;return e[2]!==n?(s=d.jsx(Cu,{"data-slot":"select-value",...n}),e[2]=n,e[3]=s):s=e[3],s}function qr(t){const e=$.c(13);let n,s,r,i;e[0]!==t?({className:s,size:i,children:n,...r}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r,e[4]=i):(n=e[1],s=e[2],r=e[3],i=e[4]);const o=i===void 0?"default":i;let a;e[5]!==s?(a=V("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 mt-2",s),e[5]=s,e[6]=a):a=e[6];let l;e[7]===Symbol.for("react.memo_cache_sentinel")?(l=d.jsx($u,{asChild:!0,children:d.jsx(Oa,{className:"size-4 opacity-50"})}),e[7]=l):l=e[7];let c;return e[8]!==n||e[9]!==r||e[10]!==o||e[11]!==a?(c=d.jsxs(Iu,{"data-slot":"select-trigger","data-size":o,className:a,...r,children:[n,l]}),e[8]=n,e[9]=r,e[10]=o,e[11]=a,e[12]=c):c=e[12],c}function Yr(t){const e=$.c(20);let n,s,r,i;e[0]!==t?({className:s,children:n,position:i,...r}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r,e[4]=i):(n=e[1],s=e[2],r=e[3],i=e[4]);const o=i===void 0?"popper":i,a=o==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1";let l;e[5]!==s||e[6]!==a?(l=V("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",a,s),e[5]=s,e[6]=a,e[7]=l):l=e[7];let c;e[8]===Symbol.for("react.memo_cache_sentinel")?(c=d.jsx(Yf,{}),e[8]=c):c=e[8];const u=o==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1";let f;e[9]!==u?(f=V("p-1",u),e[9]=u,e[10]=f):f=e[10];let h;e[11]!==n||e[12]!==f?(h=d.jsx(zu,{className:f,children:n}),e[11]=n,e[12]=f,e[13]=h):h=e[13];let p;e[14]===Symbol.for("react.memo_cache_sentinel")?(p=d.jsx(Hf,{}),e[14]=p):p=e[14];let b;return e[15]!==o||e[16]!==r||e[17]!==l||e[18]!==h?(b=d.jsx(ju,{children:d.jsxs(Ru,{"data-slot":"select-content",className:l,position:o,...r,children:[c,h,p]})}),e[15]=o,e[16]=r,e[17]=l,e[18]=h,e[19]=b):b=e[19],b}function Hr(t){const e=$.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=V("text-muted-foreground px-2 py-1.5 text-xs",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=d.jsx(Pu,{"data-slot":"select-label",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function qs(t){const e=$.c(13);let n,s,r;e[0]!==t?({className:s,children:n,...r}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r):(n=e[1],s=e[2],r=e[3]);let i;e[4]!==s?(i=V("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",s),e[4]=s,e[5]=i):i=e[5];let o;e[6]===Symbol.for("react.memo_cache_sentinel")?(o=d.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:d.jsx(Tu,{children:d.jsx(eu,{className:"size-4"})})}),e[6]=o):o=e[6];let a;e[7]!==n?(a=d.jsx(Nu,{children:n}),e[7]=n,e[8]=a):a=e[8];let l;return e[9]!==r||e[10]!==i||e[11]!==a?(l=d.jsxs(Au,{"data-slot":"select-item",className:i,...r,children:[o,a]}),e[9]=r,e[10]=i,e[11]=a,e[12]=l):l=e[12],l}function Yf(t){const e=$.c(9);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=V("flex cursor-default items-center justify-center py-1",n),e[3]=n,e[4]=r):r=e[4];let i;e[5]===Symbol.for("react.memo_cache_sentinel")?(i=d.jsx(tu,{className:"size-4"}),e[5]=i):i=e[5];let o;return e[6]!==s||e[7]!==r?(o=d.jsx(Lu,{"data-slot":"select-scroll-up-button",className:r,...s,children:i}),e[6]=s,e[7]=r,e[8]=o):o=e[8],o}function Hf(t){const e=$.c(9);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=V("flex cursor-default items-center justify-center py-1",n),e[3]=n,e[4]=r):r=e[4];let i;e[5]===Symbol.for("react.memo_cache_sentinel")?(i=d.jsx(Oa,{className:"size-4"}),e[5]=i):i=e[5];let o;return e[6]!==s||e[7]!==r?(o=d.jsx(Fu,{"data-slot":"select-scroll-down-button",className:r,...s,children:i}),e[6]=s,e[7]=r,e[8]=o):o=e[8],o}function Wf(t){const e=$.c(6);let n,s;e[0]!==t?({delayDuration:s,...n}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);const r=s===void 0?0:s;let i;return e[3]!==r||e[4]!==n?(i=d.jsx(Vu,{"data-slot":"tooltip-provider",delayDuration:r,...n}),e[3]=r,e[4]=n,e[5]=i):i=e[5],i}function wt(t){const e=$.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let s;return e[2]!==n?(s=d.jsx(Wf,{children:d.jsx(Bu,{"data-slot":"tooltip",...n})}),e[2]=n,e[3]=s):s=e[3],s}function vt(t){const e=$.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let s;return e[2]!==n?(s=d.jsx(Du,{"data-slot":"tooltip-trigger",...n}),e[2]=n,e[3]=s):s=e[3],s}function xt(t){const e=$.c(13);let n,s,r,i;e[0]!==t?({className:s,sideOffset:i,children:n,...r}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r,e[4]=i):(n=e[1],s=e[2],r=e[3],i=e[4]);const o=i===void 0?0:i;let a;e[5]!==s?(a=V("bg-secondary text-secondary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",s),e[5]=s,e[6]=a):a=e[6];let l;e[7]===Symbol.for("react.memo_cache_sentinel")?(l=d.jsx(Ku,{className:"bg-secondary fill-secondary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"}),e[7]=l):l=e[7];let c;return e[8]!==n||e[9]!==r||e[10]!==o||e[11]!==a?(c=d.jsx(Uu,{children:d.jsxs(Zu,{"data-slot":"tooltip-content",sideOffset:o,className:a,...r,children:[n,l]})}),e[8]=n,e[9]=r,e[10]=o,e[11]=a,e[12]=c):c=e[12],c}const bo=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,wo=Ra,Pa=(t,e)=>n=>{var s;if(e?.variants==null)return wo(t,n?.class,n?.className);const{variants:r,defaultVariants:i}=e,o=Object.keys(r).map(c=>{const u=n?.[c],f=i?.[c];if(u===null)return null;const h=bo(u)||bo(f);return r[c][h]}),a=n&&Object.entries(n).reduce((c,u)=>{let[f,h]=u;return h===void 0||(c[f]=h),c},{}),l=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((c,u)=>{let{class:f,className:h,...p}=u;return Object.entries(p).every(b=>{let[g,w]=b;return Array.isArray(w)?w.includes({...i,...a}[g]):{...i,...a}[g]===w})?[...c,f,h]:c},[]);return wo(t,o,l,n?.class,n?.className)},$a=Pa("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function at(t){const e=$.c(14);let n,s,r,i,o;e[0]!==t?({className:n,variant:o,size:r,asChild:i,...s}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r,e[4]=i,e[5]=o):(n=e[1],s=e[2],r=e[3],i=e[4],o=e[5]);const l=(i===void 0?!1:i)?Gu:"button";let c;e[6]!==n||e[7]!==r||e[8]!==o?(c=V($a({variant:o,size:r,className:n})),e[6]=n,e[7]=r,e[8]=o,e[9]=c):c=e[9];let u;return e[10]!==l||e[11]!==s||e[12]!==c?(u=d.jsx(l,{"data-slot":"button",className:c,...s}),e[10]=l,e[11]=s,e[12]=c,e[13]=u):u=e[13],u}const za={r:146,g:163,b:187,a:1},Xf=t=>{if(typeof t=="string"){const e=t.match(/^#([0-9a-f]{3,8})$/i);if(e){const n=e[1],s=parseInt(n.slice(0,2),16),r=parseInt(n.slice(2,4),16),i=parseInt(n.slice(4,6),16),o=n.length>6?parseInt(n.slice(6,8),16)/255:1;return{r:s,g:r,b:i,a:o}}}return za},Qf=t=>{const e=$.c(24),{defaultColor:n,onChangeComplete:s}=t,r=n===void 0?za:n,[i,o]=U.useState(!1);let a;e[0]!==r?(a=typeof r=="string"?Xf(r):r,e[0]=r,e[1]=a):a=e[1];const[l,c]=U.useState(a);let u;e[2]!==s?(u=qc(R=>s(R),{wait:500}),e[2]=s,e[3]=u):u=e[3];const f=u;let h;e[4]===Symbol.for("react.memo_cache_sentinel")?(h=()=>o(Jf),e[4]=h):h=e[4];const p=h;let b;e[5]===Symbol.for("react.memo_cache_sentinel")?(b=()=>o(!1),e[5]=b):b=e[5];const g=b;let w;e[6]!==f?(w=R=>{c(R.rgb),f(R)},e[6]=f,e[7]=w):w=e[7];const m=w,S=`rgba(${l.r}, ${l.g}, ${l.b}, ${l.a})`;let v;e[8]!==S?(v={width:"100%",height:"100%",background:S,borderRadius:"1px",border:"1px solid #ccc"},e[8]=S,e[9]=v):v=e[9];const _=v;let E;e[10]===Symbol.for("react.memo_cache_sentinel")?(E={position:"absolute",zIndex:2,left:"50%",transform:"translateX(-50%)"},e[10]=E):E=e[10];const A=E;let y;e[11]===Symbol.for("react.memo_cache_sentinel")?(y={position:"fixed",top:0,right:0,bottom:0,left:0},e[11]=y):y=e[11];const x=y;let k,T;e[12]!==i?(k=()=>{const R=M=>{i&&!M.target.closest(".color-picker")&&g()};return document.addEventListener("mousedown",R),()=>{document.removeEventListener("mousedown",R)}},T=[i],e[12]=i,e[13]=k,e[14]=T):(k=e[13],T=e[14]),U.useEffect(k,T);let I;e[15]!==_?(I=d.jsx(at,{onClick:p,variant:"secondary",className:"w-full",children:d.jsx("div",{style:_})}),e[15]=_,e[16]=I):I=e[16];let N;e[17]!==l||e[18]!==i||e[19]!==m?(N=i&&d.jsxs("div",{style:A,className:"color-picker",children:[d.jsx("div",{style:x,onClick:g}),d.jsx(Yc,{color:l,onChange:m,presetColors:["#92A3BB","#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],disableAlpha:!0})]}),e[17]=l,e[18]=i,e[19]=m,e[20]=N):N=e[20];let j;return e[21]!==I||e[22]!==N?(j=d.jsxs("div",{children:[I,N]}),e[21]=I,e[22]=N,e[23]=j):j=e[23],j};function Jf(t){return!t}function Oi(t){const e=$.c(10);let n,s,r;e[0]!==t?({className:n,type:r,...s}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r):(n=e[1],s=e[2],r=e[3]);let i;e[4]!==n?(i=V("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm mt-2","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",n),e[4]=n,e[5]=i):i=e[5];let o;return e[6]!==s||e[7]!==i||e[8]!==r?(o=d.jsx("input",{type:r,"data-slot":"input",className:i,...s}),e[6]=s,e[7]=i,e[8]=r,e[9]=o):o=e[9],o}function We(t){const e=$.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=V("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=d.jsx(qu,{"data-slot":"label",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function gs(t){const e=$.c(9);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=V("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",n),e[3]=n,e[4]=r):r=e[4];let i;e[5]===Symbol.for("react.memo_cache_sentinel")?(i=d.jsx(Yu,{"data-slot":"switch-thumb",className:V("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")}),e[5]=i):i=e[5];let o;return e[6]!==s||e[7]!==r?(o=d.jsx(Hu,{"data-slot":"switch",className:r,...s,children:i}),e[6]=s,e[7]=r,e[8]=o):o=e[8],o}const it={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},La=Object.create(null);for(const t in it)Object.hasOwn(it,t)&&(La[it[t]]=t);const _e={to:{},get:{}};_e.get=function(t){const e=t.slice(0,3).toLowerCase();let n,s;switch(e){case"hsl":{n=_e.get.hsl(t),s="hsl";break}case"hwb":{n=_e.get.hwb(t),s="hwb";break}default:{n=_e.get.rgb(t),s="rgb";break}}return n?{model:s,value:n}:null};_e.get.rgb=function(t){if(!t)return null;const e=/^#([a-f\d]{3,4})$/i,n=/^#([a-f\d]{6})([a-f\d]{2})?$/i,s=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[\s,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,r=/^rgba?\(\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[\s,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,i=/^(\w+)$/;let o=[0,0,0,1],a,l,c;if(a=t.match(n)){for(c=a[2],a=a[1],l=0;l<3;l++){const u=l*2;o[l]=Number.parseInt(a.slice(u,u+2),16)}c&&(o[3]=Number.parseInt(c,16)/255)}else if(a=t.match(e)){for(a=a[1],c=a[3],l=0;l<3;l++)o[l]=Number.parseInt(a[l]+a[l],16);c&&(o[3]=Number.parseInt(c+c,16)/255)}else if(a=t.match(s)){for(l=0;l<3;l++)o[l]=Number.parseInt(a[l+1],10);a[4]&&(o[3]=a[5]?Number.parseFloat(a[4])*.01:Number.parseFloat(a[4]))}else if(a=t.match(r)){for(l=0;l<3;l++)o[l]=Math.round(Number.parseFloat(a[l+1])*2.55);a[4]&&(o[3]=a[5]?Number.parseFloat(a[4])*.01:Number.parseFloat(a[4]))}else return(a=t.match(i))?a[1]==="transparent"?[0,0,0,0]:Object.hasOwn(it,a[1])?(o=it[a[1]],o[3]=1,o):null:null;for(l=0;l<3;l++)o[l]=Et(o[l],0,255);return o[3]=Et(o[3],0,1),o};_e.get.hsl=function(t){if(!t)return null;const e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[,|/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,n=t.match(e);if(n){const s=Number.parseFloat(n[4]),r=(Number.parseFloat(n[1])%360+360)%360,i=Et(Number.parseFloat(n[2]),0,100),o=Et(Number.parseFloat(n[3]),0,100),a=Et(Number.isNaN(s)?1:s,0,1);return[r,i,o,a]}return null};_e.get.hwb=function(t){if(!t)return null;const e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*[\s,]\s*([+-]?[\d.]+)%\s*[\s,]\s*([+-]?[\d.]+)%\s*(?:[\s,]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,n=t.match(e);if(n){const s=Number.parseFloat(n[4]),r=(Number.parseFloat(n[1])%360+360)%360,i=Et(Number.parseFloat(n[2]),0,100),o=Et(Number.parseFloat(n[3]),0,100),a=Et(Number.isNaN(s)?1:s,0,1);return[r,i,o,a]}return null};_e.to.hex=function(...t){return"#"+ys(t[0])+ys(t[1])+ys(t[2])+(t[3]<1?ys(Math.round(t[3]*255)):"")};_e.to.rgb=function(...t){return t.length<4||t[3]===1?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"};_e.to.rgb.percent=function(...t){const e=Math.round(t[0]/255*100),n=Math.round(t[1]/255*100),s=Math.round(t[2]/255*100);return t.length<4||t[3]===1?"rgb("+e+"%, "+n+"%, "+s+"%)":"rgba("+e+"%, "+n+"%, "+s+"%, "+t[3]+")"};_e.to.hsl=function(...t){return t.length<4||t[3]===1?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"};_e.to.hwb=function(...t){let e="";return t.length>=4&&t[3]!==1&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"};_e.to.keyword=function(...t){return La[t.slice(0,3)]};function Et(t,e,n){return Math.min(Math.max(e,t),n)}function ys(t){const e=Math.round(t).toString(16).toUpperCase();return e.length<2?"0"+e:e}const Fa={};for(const t of Object.keys(it))Fa[it[t]]=t;const z={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},oklab:{channels:3,labels:["okl","oka","okb"]},lch:{channels:3,labels:"lch"},oklch:{channels:3,labels:["okl","okc","okh"]},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}},dt=(6/29)**3;function gn(t){const e=t>.0031308?1.055*t**.4166666666666667-.055:t*12.92;return Math.min(Math.max(0,e),1)}function yn(t){return t>.04045?((t+.055)/1.055)**2.4:t/12.92}for(const t of Object.keys(z)){if(!("channels"in z[t]))throw new Error("missing channels property: "+t);if(!("labels"in z[t]))throw new Error("missing channel labels property: "+t);if(z[t].labels.length!==z[t].channels)throw new Error("channel and label counts mismatch: "+t);const{channels:e,labels:n}=z[t];delete z[t].channels,delete z[t].labels,Object.defineProperty(z[t],"channels",{value:e}),Object.defineProperty(z[t],"labels",{value:n})}z.rgb.hsl=function(t){const e=t[0]/255,n=t[1]/255,s=t[2]/255,r=Math.min(e,n,s),i=Math.max(e,n,s),o=i-r;let a,l;switch(i){case r:{a=0;break}case e:{a=(n-s)/o;break}case n:{a=2+(s-e)/o;break}case s:{a=4+(e-n)/o;break}}a=Math.min(a*60,360),a<0&&(a+=360);const c=(r+i)/2;return i===r?l=0:c<=.5?l=o/(i+r):l=o/(2-i-r),[a,l*100,c*100]};z.rgb.hsv=function(t){let e,n,s,r,i;const o=t[0]/255,a=t[1]/255,l=t[2]/255,c=Math.max(o,a,l),u=c-Math.min(o,a,l),f=function(h){return(c-h)/6/u+1/2};if(u===0)r=0,i=0;else{switch(i=u/c,e=f(o),n=f(a),s=f(l),c){case o:{r=s-n;break}case a:{r=1/3+e-s;break}case l:{r=2/3+n-e;break}}r<0?r+=1:r>1&&(r-=1)}return[r*360,i*100,c*100]};z.rgb.hwb=function(t){const e=t[0],n=t[1];let s=t[2];const r=z.rgb.hsl(t)[0],i=1/255*Math.min(e,Math.min(n,s));return s=1-1/255*Math.max(e,Math.max(n,s)),[r,i*100,s*100]};z.rgb.oklab=function(t){const e=yn(t[0]/255),n=yn(t[1]/255),s=yn(t[2]/255),r=Math.cbrt(.4122214708*e+.5363325363*n+.0514459929*s),i=Math.cbrt(.2119034982*e+.6806995451*n+.1073969566*s),o=Math.cbrt(.0883024619*e+.2817188376*n+.6299787005*s),a=.2104542553*r+.793617785*i-.0040720468*o,l=1.9779984951*r-2.428592205*i+.4505937099*o,c=.0259040371*r+.7827717662*i-.808675766*o;return[a*100,l*100,c*100]};z.rgb.cmyk=function(t){const e=t[0]/255,n=t[1]/255,s=t[2]/255,r=Math.min(1-e,1-n,1-s),i=(1-e-r)/(1-r)||0,o=(1-n-r)/(1-r)||0,a=(1-s-r)/(1-r)||0;return[i*100,o*100,a*100,r*100]};function eh(t,e){return(t[0]-e[0])**2+(t[1]-e[1])**2+(t[2]-e[2])**2}z.rgb.keyword=function(t){const e=Fa[t];if(e)return e;let n=Number.POSITIVE_INFINITY,s;for(const r of Object.keys(it)){const i=it[r],o=eh(t,i);o<n&&(n=o,s=r)}return s};z.keyword.rgb=function(t){return it[t]};z.rgb.xyz=function(t){const e=yn(t[0]/255),n=yn(t[1]/255),s=yn(t[2]/255),r=e*.4124564+n*.3575761+s*.1804375,i=e*.2126729+n*.7151522+s*.072175,o=e*.0193339+n*.119192+s*.9503041;return[r*100,i*100,o*100]};z.rgb.lab=function(t){const e=z.rgb.xyz(t);let n=e[0],s=e[1],r=e[2];n/=95.047,s/=100,r/=108.883,n=n>dt?n**(1/3):7.787*n+16/116,s=s>dt?s**(1/3):7.787*s+16/116,r=r>dt?r**(1/3):7.787*r+16/116;const i=116*s-16,o=500*(n-s),a=200*(s-r);return[i,o,a]};z.hsl.rgb=function(t){const e=t[0]/360,n=t[1]/100,s=t[2]/100;let r,i;if(n===0)return i=s*255,[i,i,i];const o=s<.5?s*(1+n):s+n-s*n,a=2*s-o,l=[0,0,0];for(let c=0;c<3;c++)r=e+1/3*-(c-1),r<0&&r++,r>1&&r--,6*r<1?i=a+(o-a)*6*r:2*r<1?i=o:3*r<2?i=a+(o-a)*(2/3-r)*6:i=a,l[c]=i*255;return l};z.hsl.hsv=function(t){const e=t[0];let n=t[1]/100,s=t[2]/100,r=n;const i=Math.max(s,.01);s*=2,n*=s<=1?s:2-s,r*=i<=1?i:2-i;const o=(s+n)/2,a=s===0?2*r/(i+r):2*n/(s+n);return[e,a*100,o*100]};z.hsv.rgb=function(t){const e=t[0]/60,n=t[1]/100;let s=t[2]/100;const r=Math.floor(e)%6,i=e-Math.floor(e),o=255*s*(1-n),a=255*s*(1-n*i),l=255*s*(1-n*(1-i));switch(s*=255,r){case 0:return[s,l,o];case 1:return[a,s,o];case 2:return[o,s,l];case 3:return[o,a,s];case 4:return[l,o,s];case 5:return[s,o,a]}};z.hsv.hsl=function(t){const e=t[0],n=t[1]/100,s=t[2]/100,r=Math.max(s,.01);let i,o;o=(2-n)*s;const a=(2-n)*r;return i=n*r,i/=a<=1?a:2-a,i=i||0,o/=2,[e,i*100,o*100]};z.hwb.rgb=function(t){const e=t[0]/360;let n=t[1]/100,s=t[2]/100;const r=n+s;let i;r>1&&(n/=r,s/=r);const o=Math.floor(6*e),a=1-s;i=6*e-o,(o&1)!==0&&(i=1-i);const l=n+i*(a-n);let c,u,f;switch(o){default:case 6:case 0:{c=a,u=l,f=n;break}case 1:{c=l,u=a,f=n;break}case 2:{c=n,u=a,f=l;break}case 3:{c=n,u=l,f=a;break}case 4:{c=l,u=n,f=a;break}case 5:{c=a,u=n,f=l;break}}return[c*255,u*255,f*255]};z.cmyk.rgb=function(t){const e=t[0]/100,n=t[1]/100,s=t[2]/100,r=t[3]/100,i=1-Math.min(1,e*(1-r)+r),o=1-Math.min(1,n*(1-r)+r),a=1-Math.min(1,s*(1-r)+r);return[i*255,o*255,a*255]};z.xyz.rgb=function(t){const e=t[0]/100,n=t[1]/100,s=t[2]/100;let r,i,o;return r=e*3.2404542+n*-1.5371385+s*-.4985314,i=e*-.969266+n*1.8760108+s*.041556,o=e*.0556434+n*-.2040259+s*1.0572252,r=gn(r),i=gn(i),o=gn(o),[r*255,i*255,o*255]};z.xyz.lab=function(t){let e=t[0],n=t[1],s=t[2];e/=95.047,n/=100,s/=108.883,e=e>dt?e**(1/3):7.787*e+16/116,n=n>dt?n**(1/3):7.787*n+16/116,s=s>dt?s**(1/3):7.787*s+16/116;const r=116*n-16,i=500*(e-n),o=200*(n-s);return[r,i,o]};z.xyz.oklab=function(t){const e=t[0]/100,n=t[1]/100,s=t[2]/100,r=Math.cbrt(.8189330101*e+.3618667424*n-.1288597137*s),i=Math.cbrt(.0329845436*e+.9293118715*n+.0361456387*s),o=Math.cbrt(.0482003018*e+.2643662691*n+.633851707*s),a=.2104542553*r+.793617785*i-.0040720468*o,l=1.9779984951*r-2.428592205*i+.4505937099*o,c=.0259040371*r+.7827717662*i-.808675766*o;return[a*100,l*100,c*100]};z.oklab.oklch=function(t){return z.lab.lch(t)};z.oklab.xyz=function(t){const e=t[0]/100,n=t[1]/100,s=t[2]/100,r=(.999999998*e+.396337792*n+.215803758*s)**3,i=(1.000000008*e-.105561342*n-.063854175*s)**3,o=(1.000000055*e-.089484182*n-1.291485538*s)**3,a=1.227013851*r-.55779998*i+.281256149*o,l=-.040580178*r+1.11225687*i-.071676679*o,c=-.076381285*r-.421481978*i+1.58616322*o;return[a*100,l*100,c*100]};z.oklab.rgb=function(t){const e=t[0]/100,n=t[1]/100,s=t[2]/100,r=(e+.3963377774*n+.2158037573*s)**3,i=(e-.1055613458*n-.0638541728*s)**3,o=(e-.0894841775*n-1.291485548*s)**3,a=gn(4.0767416621*r-3.3077115913*i+.2309699292*o),l=gn(-1.2684380046*r+2.6097574011*i-.3413193965*o),c=gn(-.0041960863*r-.7034186147*i+1.707614701*o);return[a*255,l*255,c*255]};z.oklch.oklab=function(t){return z.lch.lab(t)};z.lab.xyz=function(t){const e=t[0],n=t[1],s=t[2];let r,i,o;i=(e+16)/116,r=n/500+i,o=i-s/200;const a=i**3,l=r**3,c=o**3;return i=a>dt?a:(i-16/116)/7.787,r=l>dt?l:(r-16/116)/7.787,o=c>dt?c:(o-16/116)/7.787,r*=95.047,i*=100,o*=108.883,[r,i,o]};z.lab.lch=function(t){const e=t[0],n=t[1],s=t[2];let r;r=Math.atan2(s,n)*360/2/Math.PI,r<0&&(r+=360);const o=Math.sqrt(n*n+s*s);return[e,o,r]};z.lch.lab=function(t){const e=t[0],n=t[1],r=t[2]/360*2*Math.PI,i=n*Math.cos(r),o=n*Math.sin(r);return[e,i,o]};z.rgb.ansi16=function(t,e=null){const[n,s,r]=t;let i=e===null?z.rgb.hsv(t)[2]:e;if(i=Math.round(i/50),i===0)return 30;let o=30+(Math.round(r/255)<<2|Math.round(s/255)<<1|Math.round(n/255));return i===2&&(o+=60),o};z.hsv.ansi16=function(t){return z.rgb.ansi16(z.hsv.rgb(t),t[2])};z.rgb.ansi256=function(t){const e=t[0],n=t[1],s=t[2];return e>>4===n>>4&&n>>4===s>>4?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(n/255*5)+Math.round(s/255*5)};z.ansi16.rgb=function(t){t=t[0];let e=t%10;if(e===0||e===7)return t>50&&(e+=3.5),e=e/10.5*255,[e,e,e];const n=(Math.trunc(t>50)+1)*.5,s=(e&1)*n*255,r=(e>>1&1)*n*255,i=(e>>2&1)*n*255;return[s,r,i]};z.ansi256.rgb=function(t){if(t=t[0],t>=232){const i=(t-232)*10+8;return[i,i,i]}t-=16;let e;const n=Math.floor(t/36)/5*255,s=Math.floor((e=t%36)/6)/5*255,r=e%6/5*255;return[n,s,r]};z.rgb.hex=function(t){const n=(((Math.round(t[0])&255)<<16)+((Math.round(t[1])&255)<<8)+(Math.round(t[2])&255)).toString(16).toUpperCase();return"000000".slice(n.length)+n};z.hex.rgb=function(t){const e=t.toString(16).match(/[a-f\d]{6}|[a-f\d]{3}/i);if(!e)return[0,0,0];let n=e[0];e[0].length===3&&(n=[...n].map(a=>a+a).join(""));const s=Number.parseInt(n,16),r=s>>16&255,i=s>>8&255,o=s&255;return[r,i,o]};z.rgb.hcg=function(t){const e=t[0]/255,n=t[1]/255,s=t[2]/255,r=Math.max(Math.max(e,n),s),i=Math.min(Math.min(e,n),s),o=r-i;let a;const l=o<1?i/(1-o):0;return o<=0?a=0:r===e?a=(n-s)/o%6:r===n?a=2+(s-e)/o:a=4+(e-n)/o,a/=6,a%=1,[a*360,o*100,l*100]};z.hsl.hcg=function(t){const e=t[1]/100,n=t[2]/100,s=n<.5?2*e*n:2*e*(1-n);let r=0;return s<1&&(r=(n-.5*s)/(1-s)),[t[0],s*100,r*100]};z.hsv.hcg=function(t){const e=t[1]/100,n=t[2]/100,s=e*n;let r=0;return s<1&&(r=(n-s)/(1-s)),[t[0],s*100,r*100]};z.hcg.rgb=function(t){const e=t[0]/360,n=t[1]/100,s=t[2]/100;if(n===0)return[s*255,s*255,s*255];const r=[0,0,0],i=e%1*6,o=i%1,a=1-o;let l=0;switch(Math.floor(i)){case 0:{r[0]=1,r[1]=o,r[2]=0;break}case 1:{r[0]=a,r[1]=1,r[2]=0;break}case 2:{r[0]=0,r[1]=1,r[2]=o;break}case 3:{r[0]=0,r[1]=a,r[2]=1;break}case 4:{r[0]=o,r[1]=0,r[2]=1;break}default:r[0]=1,r[1]=0,r[2]=a}return l=(1-n)*s,[(n*r[0]+l)*255,(n*r[1]+l)*255,(n*r[2]+l)*255]};z.hcg.hsv=function(t){const e=t[1]/100,n=t[2]/100,s=e+n*(1-e);let r=0;return s>0&&(r=e/s),[t[0],r*100,s*100]};z.hcg.hsl=function(t){const e=t[1]/100,s=t[2]/100*(1-e)+.5*e;let r=0;return s>0&&s<.5?r=e/(2*s):s>=.5&&s<1&&(r=e/(2*(1-s))),[t[0],r*100,s*100]};z.hcg.hwb=function(t){const e=t[1]/100,n=t[2]/100,s=e+n*(1-e);return[t[0],(s-e)*100,(1-s)*100]};z.hwb.hcg=function(t){const e=t[1]/100,s=1-t[2]/100,r=s-e;let i=0;return r<1&&(i=(s-r)/(1-r)),[t[0],r*100,i*100]};z.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]};z.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]};z.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]};z.gray.hsl=function(t){return[0,0,t[0]]};z.gray.hsv=z.gray.hsl;z.gray.hwb=function(t){return[0,100,t[0]]};z.gray.cmyk=function(t){return[0,0,0,t[0]]};z.gray.lab=function(t){return[t[0],0,0]};z.gray.hex=function(t){const e=Math.round(t[0]/100*255)&255,s=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".slice(s.length)+s};z.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]};function th(){const t={},e=Object.keys(z);for(let{length:n}=e,s=0;s<n;s++)t[e[s]]={distance:-1,parent:null};return t}function nh(t){const e=th(),n=[t];for(e[t].distance=0;n.length>0;){const s=n.pop(),r=Object.keys(z[s]);for(let{length:i}=r,o=0;o<i;o++){const a=r[o],l=e[a];l.distance===-1&&(l.distance=e[s].distance+1,l.parent=s,n.unshift(a))}}return e}function sh(t,e){return function(n){return e(t(n))}}function rh(t,e){const n=[e[t].parent,t];let s=z[e[t].parent][t],r=e[t].parent;for(;e[r].parent;)n.unshift(e[r].parent),s=sh(z[e[r].parent][r],s),r=e[r].parent;return s.conversion=n,s}function ih(t){const e=nh(t),n={},s=Object.keys(e);for(let{length:r}=s,i=0;i<r;i++){const o=s[i];e[o].parent!==null&&(n[o]=rh(o,e))}return n}const ke={},oh=Object.keys(z);function ah(t){const e=function(...n){const s=n[0];return s==null?s:(s.length>1&&(n=s),t(n))};return"conversion"in t&&(e.conversion=t.conversion),e}function lh(t){const e=function(...n){const s=n[0];if(s==null)return s;s.length>1&&(n=s);const r=t(n);if(typeof r=="object")for(let{length:i}=r,o=0;o<i;o++)r[o]=Math.round(r[o]);return r};return"conversion"in t&&(e.conversion=t.conversion),e}for(const t of oh){ke[t]={},Object.defineProperty(ke[t],"channels",{value:z[t].channels}),Object.defineProperty(ke[t],"labels",{value:z[t].labels});const e=ih(t),n=Object.keys(e);for(const s of n){const r=e[s];ke[t][s]=lh(r),ke[t][s].raw=ah(r)}}const Da=["keyword","gray","hex"],Wr={};for(const t of Object.keys(ke))Wr[[...ke[t].labels].sort().join("")]=t;const Xr={};function Se(t,e){if(!(this instanceof Se))return new Se(t,e);if(e&&e in Da&&(e=null),e&&!(e in ke))throw new Error("Unknown model: "+e);let n,s;if(t==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(t instanceof Se)this.model=t.model,this.color=[...t.color],this.valpha=t.valpha;else if(typeof t=="string"){const r=_e.get(t);if(r===null)throw new Error("Unable to parse color from string: "+t);this.model=r.model,s=ke[this.model].channels,this.color=r.value.slice(0,s),this.valpha=typeof r.value[s]=="number"?r.value[s]:1}else if(t.length>0){this.model=e||"rgb",s=ke[this.model].channels;const r=Array.prototype.slice.call(t,0,s);this.color=Qr(r,s),this.valpha=typeof t[s]=="number"?t[s]:1}else if(typeof t=="number")this.model="rgb",this.color=[t>>16&255,t>>8&255,t&255],this.valpha=1;else{this.valpha=1;const r=Object.keys(t);"alpha"in t&&(r.splice(r.indexOf("alpha"),1),this.valpha=typeof t.alpha=="number"?t.alpha:0);const i=r.sort().join("");if(!(i in Wr))throw new Error("Unable to parse color from object: "+JSON.stringify(t));this.model=Wr[i];const{labels:o}=ke[this.model],a=[];for(n=0;n<o.length;n++)a.push(t[o[n]]);this.color=Qr(a)}if(Xr[this.model])for(s=ke[this.model].channels,n=0;n<s;n++){const r=Xr[this.model][n];r&&(this.color[n]=r(this.color[n]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}Se.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(t){let e=this.model in _e.to?this:this.rgb();e=e.round(typeof t=="number"?t:1);const n=e.valpha===1?e.color:[...e.color,this.valpha];return _e.to[e.model](...n)},percentString(t){const e=this.rgb().round(typeof t=="number"?t:1),n=e.valpha===1?e.color:[...e.color,this.valpha];return _e.to.rgb.percent(...n)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const t={},{channels:e}=ke[this.model],{labels:n}=ke[this.model];for(let s=0;s<e;s++)t[n[s]]=this.color[s];return this.valpha!==1&&(t.alpha=this.valpha),t},unitArray(){const t=this.rgb().color;return t[0]/=255,t[1]/=255,t[2]/=255,this.valpha!==1&&t.push(this.valpha),t},unitObject(){const t=this.rgb().object();return t.r/=255,t.g/=255,t.b/=255,this.valpha!==1&&(t.alpha=this.valpha),t},round(t){return t=Math.max(t||0,0),new Se([...this.color.map(uh(t)),this.valpha],this.model)},alpha(t){return t!==void 0?new Se([...this.color,Math.max(0,Math.min(1,t))],this.model):this.valpha},red:me("rgb",0,xe(255)),green:me("rgb",1,xe(255)),blue:me("rgb",2,xe(255)),hue:me(["hsl","hsv","hsl","hwb","hcg"],0,t=>(t%360+360)%360),saturationl:me("hsl",1,xe(100)),lightness:me("hsl",2,xe(100)),saturationv:me("hsv",1,xe(100)),value:me("hsv",2,xe(100)),chroma:me("hcg",1,xe(100)),gray:me("hcg",2,xe(100)),white:me("hwb",1,xe(100)),wblack:me("hwb",2,xe(100)),cyan:me("cmyk",0,xe(100)),magenta:me("cmyk",1,xe(100)),yellow:me("cmyk",2,xe(100)),black:me("cmyk",3,xe(100)),x:me("xyz",0,xe(95.047)),y:me("xyz",1,xe(100)),z:me("xyz",2,xe(108.833)),l:me("lab",0,xe(100)),a:me("lab",1),b:me("lab",2),keyword(t){return t!==void 0?new Se(t):ke[this.model].keyword(this.color)},hex(t){return t!==void 0?new Se(t):_e.to.hex(...this.rgb().round().color)},hexa(t){if(t!==void 0)return new Se(t);const e=this.rgb().round().color;let n=Math.round(this.valpha*255).toString(16).toUpperCase();return n.length===1&&(n="0"+n),_e.to.hex(...e)+n},rgbNumber(){const t=this.rgb().color;return(t[0]&255)<<16|(t[1]&255)<<8|t[2]&255},luminosity(){const t=this.rgb().color,e=[];for(const[n,s]of t.entries()){const r=s/255;e[n]=r<=.04045?r/12.92:((r+.055)/1.055)**2.4}return .2126*e[0]+.7152*e[1]+.0722*e[2]},contrast(t){const e=this.luminosity(),n=t.luminosity();return e>n?(e+.05)/(n+.05):(n+.05)/(e+.05)},level(t){const e=this.contrast(t);return e>=7?"AAA":e>=4.5?"AA":""},isDark(){const t=this.rgb().color;return(t[0]*2126+t[1]*7152+t[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const t=this.rgb();for(let e=0;e<3;e++)t.color[e]=255-t.color[e];return t},lighten(t){const e=this.hsl();return e.color[2]+=e.color[2]*t,e},darken(t){const e=this.hsl();return e.color[2]-=e.color[2]*t,e},saturate(t){const e=this.hsl();return e.color[1]+=e.color[1]*t,e},desaturate(t){const e=this.hsl();return e.color[1]-=e.color[1]*t,e},whiten(t){const e=this.hwb();return e.color[1]+=e.color[1]*t,e},blacken(t){const e=this.hwb();return e.color[2]+=e.color[2]*t,e},grayscale(){const t=this.rgb().color,e=t[0]*.3+t[1]*.59+t[2]*.11;return Se.rgb(e,e,e)},fade(t){return this.alpha(this.valpha-this.valpha*t)},opaquer(t){return this.alpha(this.valpha+this.valpha*t)},rotate(t){const e=this.hsl();let n=e.color[0];return n=(n+t)%360,n=n<0?360+n:n,e.color[0]=n,e},mix(t,e){if(!t||!t.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof t);const n=t.rgb(),s=this.rgb(),r=e===void 0?.5:e,i=2*r-1,o=n.alpha()-s.alpha(),a=((i*o===-1?i:(i+o)/(1+i*o))+1)/2,l=1-a;return Se.rgb(a*n.red()+l*s.red(),a*n.green()+l*s.green(),a*n.blue()+l*s.blue(),n.alpha()*r+s.alpha()*(1-r))}};for(const t of Object.keys(ke)){if(Da.includes(t))continue;const{channels:e}=ke[t];Se.prototype[t]=function(...n){return this.model===t?new Se(this):n.length>0?new Se(n,t):new Se([...fh(ke[this.model][t].raw(this.color)),this.valpha],t)},Se[t]=function(...n){let s=n[0];return typeof s=="number"&&(s=Qr(n,e)),new Se(s,t)}}function ch(t,e){return Number(t.toFixed(e))}function uh(t){return function(e){return ch(e,t)}}function me(t,e,n){t=Array.isArray(t)?t:[t];for(const s of t)(Xr[s]||=[])[e]=n;return t=t[0],function(s){let r;return s!==void 0?(n&&(s=n(s)),r=this[t](),r.color[e]=s,r):(r=this[t]().color[e],n&&(r=n(r)),r)}}function xe(t){return function(e){return Math.max(0,Math.min(t,e))}}function fh(t){return Array.isArray(t)?t:[t]}function Qr(t,e){for(let n=0;n<e;n++)typeof t[n]!="number"&&(t[n]=0);return t}const Jn=ki()(df((t,e)=>({theme:"dark",saveInterval:300,debugText:!1,gridColor:"#92a3bb",SSAOEnabled:!0,DOFEnabled:!0,controlDamping:!1,angleSnap:11.25,distanceSnap:.25,setTheme:n=>t({theme:n}),setSaveInterval:n=>t({saveInterval:n}),setDebugText:n=>t({debugText:n}),setGridColor:n=>t({gridColor:n}),setSSAOEnabled:n=>t({SSAOEnabled:n}),setDOFEnabled:n=>t({DOFEnabled:n}),setControlDamping:n=>t({controlDamping:n}),setAngleSnap:n=>t({angleSnap:n}),setDistanceSnap:n=>t({distanceSnap:n}),getComplementaryGridColor:()=>Se(e().gridColor).darken(.5).hex()}),{version:0,name:"preferences",storage:pf(()=>localStorage)})),bn=(()=>{if(typeof self>"u")return!1;if("top"in self&&self!==top)try{top.window.document._=0}catch{return!1}return"showOpenFilePicker"in self})(),hh=bn?Promise.resolve().then(function(){return yh}):Promise.resolve().then(function(){return Eh});async function Ii(...t){return(await hh).default(...t)}bn?Promise.resolve().then(function(){return wh}):Promise.resolve().then(function(){return kh});const dh=bn?Promise.resolve().then(function(){return xh}):Promise.resolve().then(function(){return Th});async function ph(...t){return(await dh).default(...t)}const mh=async t=>{const e=await t.getFile();return e.handle=t,e};var gh=async(t=[{}])=>{Array.isArray(t)||(t=[t]);const e=[];t.forEach((r,i)=>{e[i]={description:r.description||"Files",accept:{}},r.mimeTypes?r.mimeTypes.map(o=>{e[i].accept[o]=r.extensions||[]}):e[i].accept["*/*"]=r.extensions||[]});const n=await window.showOpenFilePicker({id:t[0].id,startIn:t[0].startIn,types:e,multiple:t[0].multiple||!1,excludeAcceptAllOption:t[0].excludeAcceptAllOption||!1}),s=await Promise.all(n.map(mh));return t[0].multiple?s:s[0]},yh={__proto__:null,default:gh};function $s(t){function e(n){if(Object(n)!==n)return Promise.reject(new TypeError(n+" is not an object."));var s=n.done;return Promise.resolve(n.value).then(function(r){return{value:r,done:s}})}return $s=function(n){this.s=n,this.n=n.next},$s.prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(n){var s=this.s.return;return s===void 0?Promise.resolve({value:n,done:!0}):e(s.apply(this.s,arguments))},throw:function(n){var s=this.s.return;return s===void 0?Promise.reject(n):e(s.apply(this.s,arguments))}},new $s(t)}const Ba=async(t,e,n=t.name,s)=>{const r=[],i=[];var o,a=!1,l=!1;try{for(var c,u=(function(f){var h,p,b,g=2;for(typeof Symbol<"u"&&(p=Symbol.asyncIterator,b=Symbol.iterator);g--;){if(p&&(h=f[p])!=null)return h.call(f);if(b&&(h=f[b])!=null)return new $s(h.call(f));p="@@asyncIterator",b="@@iterator"}throw new TypeError("Object is not async iterable")})(t.values());a=!(c=await u.next()).done;a=!1){const f=c.value,h=`${n}/${f.name}`;f.kind==="file"?i.push(f.getFile().then(p=>(p.directoryHandle=t,p.handle=f,Object.defineProperty(p,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>h})))):f.kind!=="directory"||!e||s&&s(f)||r.push(Ba(f,e,h,s))}}catch(f){l=!0,o=f}finally{try{a&&u.return!=null&&await u.return()}finally{if(l)throw o}}return[...(await Promise.all(r)).flat(),...await Promise.all(i)]};var bh=async(t={})=>{t.recursive=t.recursive||!1,t.mode=t.mode||"read";const e=await window.showDirectoryPicker({id:t.id,startIn:t.startIn,mode:t.mode});return(await(await e.values()).next()).done?[e]:Ba(e,t.recursive,void 0,t.skipDirectory)},wh={__proto__:null,default:bh},vh=async(t,e=[{}],n=null,s=!1,r=null)=>{Array.isArray(e)||(e=[e]),e[0].fileName=e[0].fileName||"Untitled";const i=[];let o=null;if(t instanceof Blob&&t.type?o=t.type:t.headers&&t.headers.get("content-type")&&(o=t.headers.get("content-type")),e.forEach((c,u)=>{i[u]={description:c.description||"Files",accept:{}},c.mimeTypes?(u===0&&o&&c.mimeTypes.push(o),c.mimeTypes.map(f=>{i[u].accept[f]=c.extensions||[]})):o?i[u].accept[o]=c.extensions||[]:i[u].accept["*/*"]=c.extensions||[]}),n)try{await n.getFile()}catch(c){if(n=null,s)throw c}const a=n||await window.showSaveFilePicker({suggestedName:e[0].fileName,id:e[0].id,startIn:e[0].startIn,types:i,excludeAcceptAllOption:e[0].excludeAcceptAllOption||!1});!n&&r&&r(a);const l=await a.createWritable();return"stream"in t?(await t.stream().pipeTo(l),a):"body"in t?(await t.body.pipeTo(l),a):(await l.write(await t),await l.close(),a)},xh={__proto__:null,default:vh},_h=async(t=[{}])=>(Array.isArray(t)||(t=[t]),new Promise((e,n)=>{const s=document.createElement("input");s.type="file";const r=[...t.map(i=>i.mimeTypes||[]),...t.map(i=>i.extensions||[])].join();s.multiple=t[0].multiple||!1,s.accept=r||"",s.style.display="none",document.body.append(s),s.addEventListener("cancel",()=>{s.remove(),n(new DOMException("The user aborted a request.","AbortError"))}),s.addEventListener("change",()=>{s.remove(),e(s.multiple?Array.from(s.files):s.files[0])}),"showPicker"in HTMLInputElement.prototype?s.showPicker():s.click()})),Eh={__proto__:null,default:_h},Sh=async(t=[{}])=>(Array.isArray(t)||(t=[t]),t[0].recursive=t[0].recursive||!1,new Promise((e,n)=>{const s=document.createElement("input");s.type="file",s.webkitdirectory=!0,s.style.display="none",document.body.append(s),s.addEventListener("cancel",()=>{s.remove(),n(new DOMException("The user aborted a request.","AbortError"))}),s.addEventListener("change",()=>{s.remove();let r=Array.from(s.files);t[0].recursive?t[0].recursive&&t[0].skipDirectory&&(r=r.filter(i=>i.webkitRelativePath.split("/").every(o=>!t[0].skipDirectory({name:o,kind:"directory"})))):r=r.filter(i=>i.webkitRelativePath.split("/").length===2),e(r)}),"showPicker"in HTMLInputElement.prototype?s.showPicker():s.click()})),kh={__proto__:null,default:Sh},Ah=async(t,e={})=>{Array.isArray(e)&&(e=e[0]);const n=document.createElement("a");let s=t;"body"in t&&(s=await(async function(o,a){const l=o.getReader(),c=new ReadableStream({start:h=>(async function p(){return l.read().then(({done:b,value:g})=>{if(!b)return h.enqueue(g),p();h.close()})})()}),u=new Response(c),f=await u.blob();return l.releaseLock(),new Blob([f],{type:a})})(t.body,t.headers.get("content-type"))),n.download=e.fileName||"Untitled",n.href=URL.createObjectURL(await s);const r=()=>{typeof i=="function"&&i()},i=e.legacySetup&&e.legacySetup(r,()=>i(),n);return n.addEventListener("click",()=>{setTimeout(()=>URL.revokeObjectURL(n.href),3e4),r()}),n.click(),null},Th={__proto__:null,default:Ah},ge=Uint8Array,Me=Uint16Array,Ci=Int32Array,or=new ge([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ar=new ge([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Jr=new ge([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ua=function(t,e){for(var n=new Me(31),s=0;s<31;++s)n[s]=e+=1<<t[s-1];for(var r=new Ci(n[30]),s=1;s<30;++s)for(var i=n[s];i<n[s+1];++i)r[i]=i-n[s]<<5|s;return{b:n,r}},Za=Ua(or,2),Va=Za.b,ei=Za.r;Va[28]=258,ei[258]=28;var Ka=Ua(ar,0),Nh=Ka.b,vo=Ka.r,ti=new Me(32768);for(var ce=0;ce<32768;++ce){var gt=(ce&43690)>>1|(ce&21845)<<1;gt=(gt&52428)>>2|(gt&13107)<<2,gt=(gt&61680)>>4|(gt&3855)<<4,ti[ce]=((gt&65280)>>8|(gt&255)<<8)>>1}var ot=(function(t,e,n){for(var s=t.length,r=0,i=new Me(e);r<s;++r)t[r]&&++i[t[r]-1];var o=new Me(e);for(r=1;r<e;++r)o[r]=o[r-1]+i[r-1]<<1;var a;if(n){a=new Me(1<<e);var l=15-e;for(r=0;r<s;++r)if(t[r])for(var c=r<<4|t[r],u=e-t[r],f=o[t[r]-1]++<<u,h=f|(1<<u)-1;f<=h;++f)a[ti[f]>>l]=c}else for(a=new Me(s),r=0;r<s;++r)t[r]&&(a[r]=ti[o[t[r]-1]++]>>15-t[r]);return a}),At=new ge(288);for(var ce=0;ce<144;++ce)At[ce]=8;for(var ce=144;ce<256;++ce)At[ce]=9;for(var ce=256;ce<280;++ce)At[ce]=7;for(var ce=280;ce<288;++ce)At[ce]=8;var Zn=new ge(32);for(var ce=0;ce<32;++ce)Zn[ce]=5;var Oh=ot(At,9,0),Ih=ot(At,9,1),Ch=ot(Zn,5,0),jh=ot(Zn,5,1),Ir=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},Ye=function(t,e,n){var s=e/8|0;return(t[s]|t[s+1]<<8)>>(e&7)&n},Cr=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},ji=function(t){return(t+7)/8|0},es=function(t,e,n){return(e==null||e<0)&&(e=0),(n==null||n>t.length)&&(n=t.length),new ge(t.subarray(e,n))},Rh=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Te=function(t,e,n){var s=new Error(e||Rh[t]);if(s.code=t,Error.captureStackTrace&&Error.captureStackTrace(s,Te),!n)throw s;return s},Mh=function(t,e,n,s){var r=t.length,i=s?s.length:0;if(!r||e.f&&!e.l)return n||new ge(0);var o=!n,a=o||e.i!=2,l=e.i;o&&(n=new ge(r*3));var c=function($e){var ct=n.length;if($e>ct){var Ge=new ge(Math.max(ct*2,$e));Ge.set(n),n=Ge}},u=e.f||0,f=e.p||0,h=e.b||0,p=e.l,b=e.d,g=e.m,w=e.n,m=r*8;do{if(!p){u=Ye(t,f,1);var S=Ye(t,f+1,3);if(f+=3,S)if(S==1)p=Ih,b=jh,g=9,w=5;else if(S==2){var A=Ye(t,f,31)+257,y=Ye(t,f+10,15)+4,x=A+Ye(t,f+5,31)+1;f+=14;for(var k=new ge(x),T=new ge(19),I=0;I<y;++I)T[Jr[I]]=Ye(t,f+I*3,7);f+=y*3;for(var N=Ir(T),j=(1<<N)-1,R=ot(T,N,1),I=0;I<x;){var M=R[Ye(t,f,j)];f+=M&15;var v=M>>4;if(v<16)k[I++]=v;else{var P=0,L=0;for(v==16?(L=3+Ye(t,f,3),f+=2,P=k[I-1]):v==17?(L=3+Ye(t,f,7),f+=3):v==18&&(L=11+Ye(t,f,127),f+=7);L--;)k[I++]=P}}var Z=k.subarray(0,A),F=k.subarray(A);g=Ir(Z),w=Ir(F),p=ot(Z,g,1),b=ot(F,w,1)}else Te(1);else{var v=ji(f)+4,_=t[v-4]|t[v-3]<<8,E=v+_;if(E>r){l&&Te(0);break}a&&c(h+_),n.set(t.subarray(v,E),h),e.b=h+=_,e.p=f=E*8,e.f=u;continue}if(f>m){l&&Te(0);break}}a&&c(h+131072);for(var J=(1<<g)-1,H=(1<<w)-1,ie=f;;ie=f){var P=p[Cr(t,f)&J],Y=P>>4;if(f+=P&15,f>m){l&&Te(0);break}if(P||Te(2),Y<256)n[h++]=Y;else if(Y==256){ie=f,p=null;break}else{var ee=Y-254;if(Y>264){var I=Y-257,ne=or[I];ee=Ye(t,f,(1<<ne)-1)+Va[I],f+=ne}var ye=b[Cr(t,f)&H],Re=ye>>4;ye||Te(3),f+=ye&15;var F=Nh[Re];if(Re>3){var ne=ar[Re];F+=Cr(t,f)&(1<<ne)-1,f+=ne}if(f>m){l&&Te(0);break}a&&c(h+131072);var Ze=h+ee;if(h<F){var Ve=i-F,Ke=Math.min(F,Ze);for(Ve+h<0&&Te(3);h<Ke;++h)n[h]=s[Ve+h]}for(;h<Ze;++h)n[h]=n[h-F]}}e.l=p,e.p=ie,e.b=h,e.f=u,p&&(u=1,e.m=g,e.d=b,e.n=w)}while(!u);return h!=n.length&&o?es(n,0,h):n.subarray(0,h)},ft=function(t,e,n){n<<=e&7;var s=e/8|0;t[s]|=n,t[s+1]|=n>>8},Rn=function(t,e,n){n<<=e&7;var s=e/8|0;t[s]|=n,t[s+1]|=n>>8,t[s+2]|=n>>16},jr=function(t,e){for(var n=[],s=0;s<t.length;++s)t[s]&&n.push({s,f:t[s]});var r=n.length,i=n.slice();if(!r)return{t:qa,l:0};if(r==1){var o=new ge(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(E,A){return E.f-A.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,u=1,f=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};u!=r-1;)a=n[n[c].f<n[f].f?c++:f++],l=n[c!=u&&n[c].f<n[f].f?c++:f++],n[u++]={s:-1,f:a.f+l.f,l:a,r:l};for(var h=i[0].s,s=1;s<r;++s)i[s].s>h&&(h=i[s].s);var p=new Me(h+1),b=ni(n[u-1],p,0);if(b>e){var s=0,g=0,w=b-e,m=1<<w;for(i.sort(function(A,y){return p[y.s]-p[A.s]||A.f-y.f});s<r;++s){var S=i[s].s;if(p[S]>e)g+=m-(1<<b-p[S]),p[S]=e;else break}for(g>>=w;g>0;){var v=i[s].s;p[v]<e?g-=1<<e-p[v]++-1:++s}for(;s>=0&&g;--s){var _=i[s].s;p[_]==e&&(--p[_],++g)}b=e}return{t:new ge(p),l:b}},ni=function(t,e,n){return t.s==-1?Math.max(ni(t.l,e,n+1),ni(t.r,e,n+1)):e[t.s]=n},xo=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Me(++e),s=0,r=t[0],i=1,o=function(l){n[s++]=l},a=1;a<=e;++a)if(t[a]==r&&a!=e)++i;else{if(!r&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(r),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(r);i=1,r=t[a]}return{c:n.subarray(0,s),n:e}},Mn=function(t,e){for(var n=0,s=0;s<e.length;++s)n+=t[s]*e[s];return n},Ga=function(t,e,n){var s=n.length,r=ji(e+2);t[r]=s&255,t[r+1]=s>>8,t[r+2]=t[r]^255,t[r+3]=t[r+1]^255;for(var i=0;i<s;++i)t[r+i+4]=n[i];return(r+4+s)*8},_o=function(t,e,n,s,r,i,o,a,l,c,u){ft(e,u++,n),++r[256];for(var f=jr(r,15),h=f.t,p=f.l,b=jr(i,15),g=b.t,w=b.l,m=xo(h),S=m.c,v=m.n,_=xo(g),E=_.c,A=_.n,y=new Me(19),x=0;x<S.length;++x)++y[S[x]&31];for(var x=0;x<E.length;++x)++y[E[x]&31];for(var k=jr(y,7),T=k.t,I=k.l,N=19;N>4&&!T[Jr[N-1]];--N);var j=c+5<<3,R=Mn(r,At)+Mn(i,Zn)+o,M=Mn(r,h)+Mn(i,g)+o+14+3*N+Mn(y,T)+2*y[16]+3*y[17]+7*y[18];if(l>=0&&j<=R&&j<=M)return Ga(e,u,t.subarray(l,l+c));var P,L,Z,F;if(ft(e,u,1+(M<R)),u+=2,M<R){P=ot(h,p,0),L=h,Z=ot(g,w,0),F=g;var J=ot(T,I,0);ft(e,u,v-257),ft(e,u+5,A-1),ft(e,u+10,N-4),u+=14;for(var x=0;x<N;++x)ft(e,u+3*x,T[Jr[x]]);u+=3*N;for(var H=[S,E],ie=0;ie<2;++ie)for(var Y=H[ie],x=0;x<Y.length;++x){var ee=Y[x]&31;ft(e,u,J[ee]),u+=T[ee],ee>15&&(ft(e,u,Y[x]>>5&127),u+=Y[x]>>12)}}else P=Oh,L=At,Z=Ch,F=Zn;for(var x=0;x<a;++x){var ne=s[x];if(ne>255){var ee=ne>>18&31;Rn(e,u,P[ee+257]),u+=L[ee+257],ee>7&&(ft(e,u,ne>>23&31),u+=or[ee]);var ye=ne&31;Rn(e,u,Z[ye]),u+=F[ye],ye>3&&(Rn(e,u,ne>>5&8191),u+=ar[ye])}else Rn(e,u,P[ne]),u+=L[ne]}return Rn(e,u,P[256]),u+L[256]},Ph=new Ci([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),qa=new ge(0),$h=function(t,e,n,s,r,i){var o=i.z||t.length,a=new ge(s+o+5*(1+Math.ceil(o/7e3))+r),l=a.subarray(s,a.length-r),c=i.l,u=(i.r||0)&7;if(e){u&&(l[0]=i.r>>3);for(var f=Ph[e-1],h=f>>13,p=f&8191,b=(1<<n)-1,g=i.p||new Me(32768),w=i.h||new Me(b+1),m=Math.ceil(n/3),S=2*m,v=function(et){return(t[et]^t[et+1]<<m^t[et+2]<<S)&b},_=new Ci(25e3),E=new Me(288),A=new Me(32),y=0,x=0,k=i.i||0,T=0,I=i.w||0,N=0;k+2<o;++k){var j=v(k),R=k&32767,M=w[j];if(g[R]=M,w[j]=R,I<=k){var P=o-k;if((y>7e3||T>24576)&&(P>423||!c)){u=_o(t,l,0,_,E,A,x,T,N,k-N,u),T=y=x=0,N=k;for(var L=0;L<286;++L)E[L]=0;for(var L=0;L<30;++L)A[L]=0}var Z=2,F=0,J=p,H=R-M&32767;if(P>2&&j==v(k-H))for(var ie=Math.min(h,P)-1,Y=Math.min(32767,k),ee=Math.min(258,P);H<=Y&&--J&&R!=M;){if(t[k+Z]==t[k+Z-H]){for(var ne=0;ne<ee&&t[k+ne]==t[k+ne-H];++ne);if(ne>Z){if(Z=ne,F=H,ne>ie)break;for(var ye=Math.min(H,ne-2),Re=0,L=0;L<ye;++L){var Ze=k-H+L&32767,Ve=g[Ze],Ke=Ze-Ve&32767;Ke>Re&&(Re=Ke,M=Ze)}}}R=M,M=g[R],H+=R-M&32767}if(F){_[T++]=268435456|ei[Z]<<18|vo[F];var $e=ei[Z]&31,ct=vo[F]&31;x+=or[$e]+ar[ct],++E[257+$e],++A[ct],I=k+Z,++y}else _[T++]=t[k],++E[t[k]]}}for(k=Math.max(k,I);k<o;++k)_[T++]=t[k],++E[t[k]];u=_o(t,l,c,_,E,A,x,T,N,k-N,u),c||(i.r=u&7|l[u/8|0]<<3,u-=7,i.h=w,i.p=g,i.i=k,i.w=I)}else{for(var k=i.w||0;k<o+c;k+=65535){var Ge=k+65535;Ge>=o&&(l[u/8|0]=c,Ge=o),u=Ga(l,u+1,t.subarray(k,Ge))}i.i=o}return es(a,0,s+ji(u)+r)},zh=(function(){for(var t=new Int32Array(256),e=0;e<256;++e){for(var n=e,s=9;--s;)n=(n&1&&-306674912)^n>>>1;t[e]=n}return t})(),Lh=function(){var t=-1;return{p:function(e){for(var n=t,s=0;s<e.length;++s)n=zh[n&255^e[s]]^n>>>8;t=n},d:function(){return~t}}},Fh=function(t,e,n,s,r){if(!r&&(r={l:1},e.dictionary)){var i=e.dictionary.subarray(-32768),o=new ge(i.length+t.length);o.set(i),o.set(t,i.length),t=o,r.w=i.length}return $h(t,e.level==null?6:e.level,e.mem==null?r.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,s,r)},Ya=function(t,e){var n={};for(var s in t)n[s]=t[s];for(var s in e)n[s]=e[s];return n},nt=function(t,e){return t[e]|t[e+1]<<8},Xe=function(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0},Rr=function(t,e){return Xe(t,e)+Xe(t,e+4)*4294967296},Ae=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8};function Dh(t,e){return Fh(t,e||{},0,0)}function Bh(t,e){return Mh(t,{i:2},e&&e.out,e&&e.dictionary)}var Ha=function(t,e,n,s){for(var r in t){var i=t[r],o=e+r,a=s;Array.isArray(i)&&(a=Ya(s,i[1]),i=i[0]),i instanceof ge?n[o]=[i,a]:(n[o+="/"]=[new ge(0),a],Ha(i,o,n,s))}},Eo=typeof TextEncoder<"u"&&new TextEncoder,si=typeof TextDecoder<"u"&&new TextDecoder,Uh=0;try{si.decode(qa,{stream:!0}),Uh=1}catch{}var Zh=function(t){for(var e="",n=0;;){var s=t[n++],r=(s>127)+(s>223)+(s>239);if(n+r>t.length)return{s:e,r:es(t,n-1)};r?r==3?(s=((s&15)<<18|(t[n++]&63)<<12|(t[n++]&63)<<6|t[n++]&63)-65536,e+=String.fromCharCode(55296|s>>10,56320|s&1023)):r&1?e+=String.fromCharCode((s&31)<<6|t[n++]&63):e+=String.fromCharCode((s&15)<<12|(t[n++]&63)<<6|t[n++]&63):e+=String.fromCharCode(s)}};function Vn(t,e){var n;if(Eo)return Eo.encode(t);for(var s=t.length,r=new ge(t.length+(t.length>>1)),i=0,o=function(c){r[i++]=c},n=0;n<s;++n){if(i+5>r.length){var a=new ge(i+8+(s-n<<1));a.set(r),r=a}var l=t.charCodeAt(n);l<128||e?o(l):l<2048?(o(192|l>>6),o(128|l&63)):l>55295&&l<57344?(l=65536+(l&1047552)|t.charCodeAt(++n)&1023,o(240|l>>18),o(128|l>>12&63),o(128|l>>6&63),o(128|l&63)):(o(224|l>>12),o(128|l>>6&63),o(128|l&63))}return es(r,0,i)}function ri(t,e){if(e){for(var n="",s=0;s<t.length;s+=16384)n+=String.fromCharCode.apply(null,t.subarray(s,s+16384));return n}else{if(si)return si.decode(t);var r=Zh(t),i=r.s,n=r.r;return n.length&&Te(8),i}}var Vh=function(t,e){return e+30+nt(t,e+26)+nt(t,e+28)},Kh=function(t,e,n){var s=nt(t,e+28),r=ri(t.subarray(e+46,e+46+s),!(nt(t,e+8)&2048)),i=e+46+s,o=Xe(t,e+20),a=n&&o==4294967295?Gh(t,i):[o,Xe(t,e+24),Xe(t,e+42)],l=a[0],c=a[1],u=a[2];return[nt(t,e+10),l,c,r,i+nt(t,e+30)+nt(t,e+32),u]},Gh=function(t,e){for(;nt(t,e)!=1;e+=4+nt(t,e+2));return[Rr(t,e+12),Rr(t,e+4),Rr(t,e+20)]},ii=function(t){var e=0;if(t)for(var n in t){var s=t[n].length;s>65535&&Te(9),e+=s+4}return e},So=function(t,e,n,s,r,i,o,a){var l=s.length,c=n.extra,u=a&&a.length,f=ii(c);Ae(t,e,o!=null?33639248:67324752),e+=4,o!=null&&(t[e++]=20,t[e++]=n.os),t[e]=20,e+=2,t[e++]=n.flag<<1|(i<0&&8),t[e++]=r&&8,t[e++]=n.compression&255,t[e++]=n.compression>>8;var h=new Date(n.mtime==null?Date.now():n.mtime),p=h.getFullYear()-1980;if((p<0||p>119)&&Te(10),Ae(t,e,p<<25|h.getMonth()+1<<21|h.getDate()<<16|h.getHours()<<11|h.getMinutes()<<5|h.getSeconds()>>1),e+=4,i!=-1&&(Ae(t,e,n.crc),Ae(t,e+4,i<0?-i-2:i),Ae(t,e+8,n.size)),Ae(t,e+12,l),Ae(t,e+14,f),e+=16,o!=null&&(Ae(t,e,u),Ae(t,e+6,n.attrs),Ae(t,e+10,o),e+=14),t.set(s,e),e+=l,f)for(var b in c){var g=c[b],w=g.length;Ae(t,e,+b),Ae(t,e+2,w),t.set(g,e+4),e+=4+w}return u&&(t.set(a,e),e+=u),e},qh=function(t,e,n,s,r){Ae(t,e,101010256),Ae(t,e+8,n),Ae(t,e+10,n),Ae(t,e+12,s),Ae(t,e+16,r)};function Yh(t,e){e||(e={});var n={},s=[];Ha(t,"",n,e);var r=0,i=0;for(var o in n){var a=n[o],l=a[0],c=a[1],u=c.level==0?0:8,f=Vn(o),h=f.length,p=c.comment,b=p&&Vn(p),g=b&&b.length,w=ii(c.extra);h>65535&&Te(11);var m=u?Dh(l,c):l,S=m.length,v=Lh();v.p(l),s.push(Ya(c,{size:l.length,crc:v.d(),c:m,f,m:b,u:h!=o.length||b&&p.length!=g,o:r,compression:u})),r+=30+h+w+S,i+=76+2*(h+w)+(g||0)+S}for(var _=new ge(i+22),E=r,A=i-r,y=0;y<s.length;++y){var f=s[y];So(_,f.o,f,f.f,f.u,f.c.length);var x=30+f.f.length+ii(f.extra);_.set(f.c,f.o+x),So(_,r,f,f.f,f.u,f.c.length,f.o,f.m),r+=16+x+(f.m?f.m.length:0)}return qh(_,r,s.length,A,E),_}function Hh(t,e){for(var n={},s=t.length-22;Xe(t,s)!=101010256;--s)(!s||t.length-s>65558)&&Te(13);var r=nt(t,s+8);if(!r)return{};var i=Xe(t,s+16),o=i==4294967295||r==65535;if(o){var a=Xe(t,s-12);o=Xe(t,a)==101075792,o&&(r=Xe(t,a+32),i=Xe(t,a+48))}for(var l=0;l<r;++l){var c=Kh(t,i,o),u=c[0],f=c[1],h=c[2],p=c[3],b=c[4],g=c[5],w=Vh(t,g);i=b,u?u==8?n[p]=Bh(t.subarray(w,w+f),{out:new ge(h)}):Te(14,"unknown compression type "+u):n[p]=es(t,w,w+f)}return n}function C(t,e,n){function s(a,l){var c;Object.defineProperty(a,"_zod",{value:a._zod??{},enumerable:!1}),(c=a._zod).traits??(c.traits=new Set),a._zod.traits.add(t),e(a,l);for(const u in o.prototype)u in a||Object.defineProperty(a,u,{value:o.prototype[u].bind(a)});a._zod.constr=o,a._zod.def=l}const r=n?.Parent??Object;class i extends r{}Object.defineProperty(i,"name",{value:t});function o(a){var l;const c=n?.Parent?new i:this;s(c,a),(l=c._zod).deferred??(l.deferred=[]);for(const u of c._zod.deferred)u();return c}return Object.defineProperty(o,"init",{value:s}),Object.defineProperty(o,Symbol.hasInstance,{value:a=>n?.Parent&&a instanceof n.Parent?!0:a?._zod?.traits?.has(t)}),Object.defineProperty(o,"name",{value:t}),o}class wn extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class Wa extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const Xa={};function Tt(t){return Xa}function Wh(t){const e=Object.values(t).filter(s=>typeof s=="number");return Object.entries(t).filter(([s,r])=>e.indexOf(+s)===-1).map(([s,r])=>r)}function oi(t,e){return typeof e=="bigint"?e.toString():e}function Ri(t){return{get value(){{const e=t();return Object.defineProperty(this,"value",{value:e}),e}}}}function Mi(t){return t==null}function Pi(t){const e=t.startsWith("^")?1:0,n=t.endsWith("$")?t.length-1:t.length;return t.slice(e,n)}function Xh(t,e){const n=(t.toString().split(".")[1]||"").length,s=e.toString();let r=(s.split(".")[1]||"").length;if(r===0&&/\d?e-\d?/.test(s)){const l=s.match(/\d?e-(\d?)/);l?.[1]&&(r=Number.parseInt(l[1]))}const i=n>r?n:r,o=Number.parseInt(t.toFixed(i).replace(".","")),a=Number.parseInt(e.toFixed(i).replace(".",""));return o%a/10**i}const ko=Symbol("evaluating");function re(t,e,n){let s;Object.defineProperty(t,e,{get(){if(s!==ko)return s===void 0&&(s=ko,s=n()),s},set(r){Object.defineProperty(t,e,{value:r})},configurable:!0})}function Yt(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0})}function Ht(...t){const e={};for(const n of t){const s=Object.getOwnPropertyDescriptors(n);Object.assign(e,s)}return Object.defineProperties({},e)}function Ao(t){return JSON.stringify(t)}const Qa="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function Ys(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}const Qh=Ri(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function _n(t){if(Ys(t)===!1)return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(Ys(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function Ja(t){return _n(t)?{...t}:Array.isArray(t)?[...t]:t}const Jh=new Set(["string","number","symbol"]);function En(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Rt(t,e,n){const s=new t._zod.constr(e??t._zod.def);return(!e||n?.parent)&&(s._zod.parent=t),s}function D(t){const e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function ed(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}const td={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function nd(t,e){const n=t._zod.def,s=Ht(t._zod.def,{get shape(){const r={};for(const i in e){if(!(i in n.shape))throw new Error(`Unrecognized key: "${i}"`);e[i]&&(r[i]=n.shape[i])}return Yt(this,"shape",r),r},checks:[]});return Rt(t,s)}function sd(t,e){const n=t._zod.def,s=Ht(t._zod.def,{get shape(){const r={...t._zod.def.shape};for(const i in e){if(!(i in n.shape))throw new Error(`Unrecognized key: "${i}"`);e[i]&&delete r[i]}return Yt(this,"shape",r),r},checks:[]});return Rt(t,s)}function rd(t,e){if(!_n(e))throw new Error("Invalid input to extend: expected a plain object");const n=t._zod.def.checks;if(n&&n.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const r=Ht(t._zod.def,{get shape(){const i={...t._zod.def.shape,...e};return Yt(this,"shape",i),i},checks:[]});return Rt(t,r)}function id(t,e){if(!_n(e))throw new Error("Invalid input to safeExtend: expected a plain object");const n={...t._zod.def,get shape(){const s={...t._zod.def.shape,...e};return Yt(this,"shape",s),s},checks:t._zod.def.checks};return Rt(t,n)}function od(t,e){const n=Ht(t._zod.def,{get shape(){const s={...t._zod.def.shape,...e._zod.def.shape};return Yt(this,"shape",s),s},get catchall(){return e._zod.def.catchall},checks:[]});return Rt(t,n)}function ad(t,e,n){const s=Ht(e._zod.def,{get shape(){const r=e._zod.def.shape,i={...r};if(n)for(const o in n){if(!(o in r))throw new Error(`Unrecognized key: "${o}"`);n[o]&&(i[o]=t?new t({type:"optional",innerType:r[o]}):r[o])}else for(const o in r)i[o]=t?new t({type:"optional",innerType:r[o]}):r[o];return Yt(this,"shape",i),i},checks:[]});return Rt(e,s)}function ld(t,e,n){const s=Ht(e._zod.def,{get shape(){const r=e._zod.def.shape,i={...r};if(n)for(const o in n){if(!(o in i))throw new Error(`Unrecognized key: "${o}"`);n[o]&&(i[o]=new t({type:"nonoptional",innerType:r[o]}))}else for(const o in r)i[o]=new t({type:"nonoptional",innerType:r[o]});return Yt(this,"shape",i),i},checks:[]});return Rt(e,s)}function un(t,e=0){if(t.aborted===!0)return!0;for(let n=e;n<t.issues.length;n++)if(t.issues[n]?.continue!==!0)return!0;return!1}function Lt(t,e){return e.map(n=>{var s;return(s=n).path??(s.path=[]),n.path.unshift(t),n})}function bs(t){return typeof t=="string"?t:t?.message}function Nt(t,e,n){const s={...t,path:t.path??[]};if(!t.message){const r=bs(t.inst?._zod.def?.error?.(t))??bs(e?.error?.(t))??bs(n.customError?.(t))??bs(n.localeError?.(t))??"Invalid input";s.message=r}return delete s.inst,delete s.continue,e?.reportInput||delete s.input,s}function $i(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function Kn(...t){const[e,n,s]=t;return typeof e=="string"?{message:e,code:"custom",input:n,inst:s}:{...e}}const el=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,oi,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},tl=C("$ZodError",el),nl=C("$ZodError",el,{Parent:Error});function cd(t,e=n=>n.message){const n={},s=[];for(const r of t.issues)r.path.length>0?(n[r.path[0]]=n[r.path[0]]||[],n[r.path[0]].push(e(r))):s.push(e(r));return{formErrors:s,fieldErrors:n}}function ud(t,e){const n=e||function(i){return i.message},s={_errors:[]},r=i=>{for(const o of i.issues)if(o.code==="invalid_union"&&o.errors.length)o.errors.map(a=>r({issues:a}));else if(o.code==="invalid_key")r({issues:o.issues});else if(o.code==="invalid_element")r({issues:o.issues});else if(o.path.length===0)s._errors.push(n(o));else{let a=s,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(n(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return r(t),s}const zi=t=>(e,n,s,r)=>{const i=s?Object.assign(s,{async:!1}):{async:!1},o=e._zod.run({value:n,issues:[]},i);if(o instanceof Promise)throw new wn;if(o.issues.length){const a=new(r?.Err??t)(o.issues.map(l=>Nt(l,i,Tt())));throw Qa(a,r?.callee),a}return o.value},Li=t=>async(e,n,s,r)=>{const i=s?Object.assign(s,{async:!0}):{async:!0};let o=e._zod.run({value:n,issues:[]},i);if(o instanceof Promise&&(o=await o),o.issues.length){const a=new(r?.Err??t)(o.issues.map(l=>Nt(l,i,Tt())));throw Qa(a,r?.callee),a}return o.value},lr=t=>(e,n,s)=>{const r=s?{...s,async:!1}:{async:!1},i=e._zod.run({value:n,issues:[]},r);if(i instanceof Promise)throw new wn;return i.issues.length?{success:!1,error:new(t??tl)(i.issues.map(o=>Nt(o,r,Tt())))}:{success:!0,data:i.value}},fd=lr(nl),cr=t=>async(e,n,s)=>{const r=s?Object.assign(s,{async:!0}):{async:!0};let i=e._zod.run({value:n,issues:[]},r);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new t(i.issues.map(o=>Nt(o,r,Tt())))}:{success:!0,data:i.value}},hd=cr(nl),dd=t=>(e,n,s)=>{const r=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return zi(t)(e,n,r)},pd=t=>(e,n,s)=>zi(t)(e,n,s),md=t=>async(e,n,s)=>{const r=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return Li(t)(e,n,r)},gd=t=>async(e,n,s)=>Li(t)(e,n,s),yd=t=>(e,n,s)=>{const r=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return lr(t)(e,n,r)},bd=t=>(e,n,s)=>lr(t)(e,n,s),wd=t=>async(e,n,s)=>{const r=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return cr(t)(e,n,r)},vd=t=>async(e,n,s)=>cr(t)(e,n,s),xd=/^[cC][^\s-]{8,}$/,_d=/^[0-9a-z]+$/,Ed=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,Sd=/^[0-9a-vA-V]{20}$/,kd=/^[A-Za-z0-9]{27}$/,Ad=/^[a-zA-Z0-9_-]{21}$/,Td=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,Nd=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,To=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,Od=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,Id="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function Cd(){return new RegExp(Id,"u")}const jd=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Rd=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,Md=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Pd=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,$d=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,sl=/^[A-Za-z0-9_-]*$/,zd=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,Ld=/^\+(?:[0-9]){6,14}[0-9]$/,rl="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",Fd=new RegExp(`^${rl}$`);function il(t){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function Dd(t){return new RegExp(`^${il(t)}$`)}function Bd(t){const e=il({precision:t.precision}),n=["Z"];t.local&&n.push(""),t.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const s=`${e}(?:${n.join("|")})`;return new RegExp(`^${rl}T(?:${s})$`)}const Ud=t=>{const e=t?`[\\s\\S]{${t?.minimum??0},${t?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},Zd=/^-?\d+$/,Vd=/^-?\d+(?:\.\d+)?/,Kd=/^(?:true|false)$/i,Gd=/^[^A-Z]*$/,qd=/^[^a-z]*$/,je=C("$ZodCheck",(t,e)=>{var n;t._zod??(t._zod={}),t._zod.def=e,(n=t._zod).onattach??(n.onattach=[])}),ol={number:"number",bigint:"bigint",object:"date"},al=C("$ZodCheckLessThan",(t,e)=>{je.init(t,e);const n=ol[typeof e.value];t._zod.onattach.push(s=>{const r=s._zod.bag,i=(e.inclusive?r.maximum:r.exclusiveMaximum)??Number.POSITIVE_INFINITY;e.value<i&&(e.inclusive?r.maximum=e.value:r.exclusiveMaximum=e.value)}),t._zod.check=s=>{(e.inclusive?s.value<=e.value:s.value<e.value)||s.issues.push({origin:n,code:"too_big",maximum:e.value,input:s.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),ll=C("$ZodCheckGreaterThan",(t,e)=>{je.init(t,e);const n=ol[typeof e.value];t._zod.onattach.push(s=>{const r=s._zod.bag,i=(e.inclusive?r.minimum:r.exclusiveMinimum)??Number.NEGATIVE_INFINITY;e.value>i&&(e.inclusive?r.minimum=e.value:r.exclusiveMinimum=e.value)}),t._zod.check=s=>{(e.inclusive?s.value>=e.value:s.value>e.value)||s.issues.push({origin:n,code:"too_small",minimum:e.value,input:s.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),Yd=C("$ZodCheckMultipleOf",(t,e)=>{je.init(t,e),t._zod.onattach.push(n=>{var s;(s=n._zod.bag).multipleOf??(s.multipleOf=e.value)}),t._zod.check=n=>{if(typeof n.value!=typeof e.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%e.value===BigInt(0):Xh(n.value,e.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:e.value,input:n.value,inst:t,continue:!e.abort})}}),Hd=C("$ZodCheckNumberFormat",(t,e)=>{je.init(t,e),e.format=e.format||"float64";const n=e.format?.includes("int"),s=n?"int":"number",[r,i]=td[e.format];t._zod.onattach.push(o=>{const a=o._zod.bag;a.format=e.format,a.minimum=r,a.maximum=i,n&&(a.pattern=Zd)}),t._zod.check=o=>{const a=o.value;if(n){if(!Number.isInteger(a)){o.issues.push({expected:s,format:e.format,code:"invalid_type",continue:!1,input:a,inst:t});return}if(!Number.isSafeInteger(a)){a>0?o.issues.push({input:a,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:s,continue:!e.abort}):o.issues.push({input:a,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:s,continue:!e.abort});return}}a<r&&o.issues.push({origin:"number",input:a,code:"too_small",minimum:r,inclusive:!0,inst:t,continue:!e.abort}),a>i&&o.issues.push({origin:"number",input:a,code:"too_big",maximum:i,inst:t})}}),Wd=C("$ZodCheckMaxLength",(t,e)=>{var n;je.init(t,e),(n=t._zod.def).when??(n.when=s=>{const r=s.value;return!Mi(r)&&r.length!==void 0}),t._zod.onattach.push(s=>{const r=s._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<r&&(s._zod.bag.maximum=e.maximum)}),t._zod.check=s=>{const r=s.value;if(r.length<=e.maximum)return;const o=$i(r);s.issues.push({origin:o,code:"too_big",maximum:e.maximum,inclusive:!0,input:r,inst:t,continue:!e.abort})}}),Xd=C("$ZodCheckMinLength",(t,e)=>{var n;je.init(t,e),(n=t._zod.def).when??(n.when=s=>{const r=s.value;return!Mi(r)&&r.length!==void 0}),t._zod.onattach.push(s=>{const r=s._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>r&&(s._zod.bag.minimum=e.minimum)}),t._zod.check=s=>{const r=s.value;if(r.length>=e.minimum)return;const o=$i(r);s.issues.push({origin:o,code:"too_small",minimum:e.minimum,inclusive:!0,input:r,inst:t,continue:!e.abort})}}),Qd=C("$ZodCheckLengthEquals",(t,e)=>{var n;je.init(t,e),(n=t._zod.def).when??(n.when=s=>{const r=s.value;return!Mi(r)&&r.length!==void 0}),t._zod.onattach.push(s=>{const r=s._zod.bag;r.minimum=e.length,r.maximum=e.length,r.length=e.length}),t._zod.check=s=>{const r=s.value,i=r.length;if(i===e.length)return;const o=$i(r),a=i>e.length;s.issues.push({origin:o,...a?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:s.value,inst:t,continue:!e.abort})}}),ur=C("$ZodCheckStringFormat",(t,e)=>{var n,s;je.init(t,e),t._zod.onattach.push(r=>{const i=r._zod.bag;i.format=e.format,e.pattern&&(i.patterns??(i.patterns=new Set),i.patterns.add(e.pattern))}),e.pattern?(n=t._zod).check??(n.check=r=>{e.pattern.lastIndex=0,!e.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:e.format,input:r.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(s=t._zod).check??(s.check=()=>{})}),Jd=C("$ZodCheckRegex",(t,e)=>{ur.init(t,e),t._zod.check=n=>{e.pattern.lastIndex=0,!e.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),ep=C("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=Gd),ur.init(t,e)}),tp=C("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=qd),ur.init(t,e)}),np=C("$ZodCheckIncludes",(t,e)=>{je.init(t,e);const n=En(e.includes),s=new RegExp(typeof e.position=="number"?`^.{${e.position}}${n}`:n);e.pattern=s,t._zod.onattach.push(r=>{const i=r._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(s)}),t._zod.check=r=>{r.value.includes(e.includes,e.position)||r.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:r.value,inst:t,continue:!e.abort})}}),sp=C("$ZodCheckStartsWith",(t,e)=>{je.init(t,e);const n=new RegExp(`^${En(e.prefix)}.*`);e.pattern??(e.pattern=n),t._zod.onattach.push(s=>{const r=s._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(n)}),t._zod.check=s=>{s.value.startsWith(e.prefix)||s.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:s.value,inst:t,continue:!e.abort})}}),rp=C("$ZodCheckEndsWith",(t,e)=>{je.init(t,e);const n=new RegExp(`.*${En(e.suffix)}$`);e.pattern??(e.pattern=n),t._zod.onattach.push(s=>{const r=s._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(n)}),t._zod.check=s=>{s.value.endsWith(e.suffix)||s.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:s.value,inst:t,continue:!e.abort})}}),ip=C("$ZodCheckOverwrite",(t,e)=>{je.init(t,e),t._zod.check=n=>{n.value=e.tx(n.value)}});class op{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const s=e.split(`
`).filter(o=>o),r=Math.min(...s.map(o=>o.length-o.trimStart().length)),i=s.map(o=>o.slice(r)).map(o=>" ".repeat(this.indent*2)+o);for(const o of i)this.content.push(o)}compile(){const e=Function,n=this?.args,r=[...(this?.content??[""]).map(i=>`  ${i}`)];return new e(...n,r.join(`
`))}}const ap={major:4,minor:1,patch:11},ae=C("$ZodType",(t,e)=>{var n;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=ap;const s=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&s.unshift(t);for(const r of s)for(const i of r._zod.onattach)i(t);if(s.length===0)(n=t._zod).deferred??(n.deferred=[]),t._zod.deferred?.push(()=>{t._zod.run=t._zod.parse});else{const r=(o,a,l)=>{let c=un(o),u;for(const f of a){if(f._zod.def.when){if(!f._zod.def.when(o))continue}else if(c)continue;const h=o.issues.length,p=f._zod.check(o);if(p instanceof Promise&&l?.async===!1)throw new wn;if(u||p instanceof Promise)u=(u??Promise.resolve()).then(async()=>{await p,o.issues.length!==h&&(c||(c=un(o,h)))});else{if(o.issues.length===h)continue;c||(c=un(o,h))}}return u?u.then(()=>o):o},i=(o,a,l)=>{if(un(o))return o.aborted=!0,o;const c=r(a,s,l);if(c instanceof Promise){if(l.async===!1)throw new wn;return c.then(u=>t._zod.parse(u,l))}return t._zod.parse(c,l)};t._zod.run=(o,a)=>{if(a.skipChecks)return t._zod.parse(o,a);if(a.direction==="backward"){const c=t._zod.parse({value:o.value,issues:[]},{...a,skipChecks:!0});return c instanceof Promise?c.then(u=>i(u,o,a)):i(c,o,a)}const l=t._zod.parse(o,a);if(l instanceof Promise){if(a.async===!1)throw new wn;return l.then(c=>r(c,s,a))}return r(l,s,a)}}t["~standard"]={validate:r=>{try{const i=fd(t,r);return i.success?{value:i.data}:{issues:i.error?.issues}}catch{return hd(t,r).then(o=>o.success?{value:o.data}:{issues:o.error?.issues})}},vendor:"zod",version:1}}),Fi=C("$ZodString",(t,e)=>{ae.init(t,e),t._zod.pattern=[...t?._zod.bag?.patterns??[]].pop()??Ud(t._zod.bag),t._zod.parse=(n,s)=>{if(e.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:t}),n}}),he=C("$ZodStringFormat",(t,e)=>{ur.init(t,e),Fi.init(t,e)}),lp=C("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=Nd),he.init(t,e)}),cp=C("$ZodUUID",(t,e)=>{if(e.version){const s={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(s===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=To(s))}else e.pattern??(e.pattern=To());he.init(t,e)}),up=C("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=Od),he.init(t,e)}),fp=C("$ZodURL",(t,e)=>{he.init(t,e),t._zod.check=n=>{try{const s=n.value.trim(),r=new URL(s);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(r.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:zd.source,input:n.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(r.protocol.endsWith(":")?r.protocol.slice(0,-1):r.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:n.value,inst:t,continue:!e.abort})),e.normalize?n.value=r.href:n.value=s;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:t,continue:!e.abort})}}}),hp=C("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=Cd()),he.init(t,e)}),dp=C("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=Ad),he.init(t,e)}),pp=C("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=xd),he.init(t,e)}),mp=C("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=_d),he.init(t,e)}),gp=C("$ZodULID",(t,e)=>{e.pattern??(e.pattern=Ed),he.init(t,e)}),yp=C("$ZodXID",(t,e)=>{e.pattern??(e.pattern=Sd),he.init(t,e)}),bp=C("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=kd),he.init(t,e)}),wp=C("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=Bd(e)),he.init(t,e)}),vp=C("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=Fd),he.init(t,e)}),xp=C("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=Dd(e)),he.init(t,e)}),_p=C("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=Td),he.init(t,e)}),Ep=C("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=jd),he.init(t,e),t._zod.onattach.push(n=>{const s=n._zod.bag;s.format="ipv4"})}),Sp=C("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=Rd),he.init(t,e),t._zod.onattach.push(n=>{const s=n._zod.bag;s.format="ipv6"}),t._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:t,continue:!e.abort})}}}),kp=C("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=Md),he.init(t,e)}),Ap=C("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=Pd),he.init(t,e),t._zod.check=n=>{const s=n.value.split("/");try{if(s.length!==2)throw new Error;const[r,i]=s;if(!i)throw new Error;const o=Number(i);if(`${o}`!==i)throw new Error;if(o<0||o>128)throw new Error;new URL(`http://[${r}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:t,continue:!e.abort})}}});function cl(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}const Tp=C("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=$d),he.init(t,e),t._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64"}),t._zod.check=n=>{cl(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:t,continue:!e.abort})}});function Np(t){if(!sl.test(t))return!1;const e=t.replace(/[-_]/g,s=>s==="-"?"+":"/"),n=e.padEnd(Math.ceil(e.length/4)*4,"=");return cl(n)}const Op=C("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=sl),he.init(t,e),t._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64url"}),t._zod.check=n=>{Np(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:t,continue:!e.abort})}}),Ip=C("$ZodE164",(t,e)=>{e.pattern??(e.pattern=Ld),he.init(t,e)});function Cp(t,e=null){try{const n=t.split(".");if(n.length!==3)return!1;const[s]=n;if(!s)return!1;const r=JSON.parse(atob(s));return!("typ"in r&&r?.typ!=="JWT"||!r.alg||e&&(!("alg"in r)||r.alg!==e))}catch{return!1}}const jp=C("$ZodJWT",(t,e)=>{he.init(t,e),t._zod.check=n=>{Cp(n.value,e.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:t,continue:!e.abort})}}),ul=C("$ZodNumber",(t,e)=>{ae.init(t,e),t._zod.pattern=t._zod.bag.pattern??Vd,t._zod.parse=(n,s)=>{if(e.coerce)try{n.value=Number(n.value)}catch{}const r=n.value;if(typeof r=="number"&&!Number.isNaN(r)&&Number.isFinite(r))return n;const i=typeof r=="number"?Number.isNaN(r)?"NaN":Number.isFinite(r)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:r,inst:t,...i?{received:i}:{}}),n}}),Rp=C("$ZodNumber",(t,e)=>{Hd.init(t,e),ul.init(t,e)}),Mp=C("$ZodBoolean",(t,e)=>{ae.init(t,e),t._zod.pattern=Kd,t._zod.parse=(n,s)=>{if(e.coerce)try{n.value=!!n.value}catch{}const r=n.value;return typeof r=="boolean"||n.issues.push({expected:"boolean",code:"invalid_type",input:r,inst:t}),n}}),Pp=C("$ZodUnknown",(t,e)=>{ae.init(t,e),t._zod.parse=n=>n}),$p=C("$ZodNever",(t,e)=>{ae.init(t,e),t._zod.parse=(n,s)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:t}),n)}),zp=C("$ZodDate",(t,e)=>{ae.init(t,e),t._zod.parse=(n,s)=>{if(e.coerce)try{n.value=new Date(n.value)}catch{}const r=n.value,i=r instanceof Date;return i&&!Number.isNaN(r.getTime())||n.issues.push({expected:"date",code:"invalid_type",input:r,...i?{received:"Invalid Date"}:{},inst:t}),n}});function No(t,e,n){t.issues.length&&e.issues.push(...Lt(n,t.issues)),e.value[n]=t.value}const Lp=C("$ZodArray",(t,e)=>{ae.init(t,e),t._zod.parse=(n,s)=>{const r=n.value;if(!Array.isArray(r))return n.issues.push({expected:"array",code:"invalid_type",input:r,inst:t}),n;n.value=Array(r.length);const i=[];for(let o=0;o<r.length;o++){const a=r[o],l=e.element._zod.run({value:a,issues:[]},s);l instanceof Promise?i.push(l.then(c=>No(c,n,o))):No(l,n,o)}return i.length?Promise.all(i).then(()=>n):n}});function Hs(t,e,n,s){t.issues.length&&e.issues.push(...Lt(n,t.issues)),t.value===void 0?n in s&&(e.value[n]=void 0):e.value[n]=t.value}function fl(t){const e=Object.keys(t.shape);for(const s of e)if(!t.shape?.[s]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${s}": expected a Zod schema`);const n=ed(t.shape);return{...t,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(n)}}function hl(t,e,n,s,r,i){const o=[],a=r.keySet,l=r.catchall._zod,c=l.def.type;for(const u of Object.keys(e)){if(a.has(u))continue;if(c==="never"){o.push(u);continue}const f=l.run({value:e[u],issues:[]},s);f instanceof Promise?t.push(f.then(h=>Hs(h,n,u,e))):Hs(f,n,u,e)}return o.length&&n.issues.push({code:"unrecognized_keys",keys:o,input:e,inst:i}),t.length?Promise.all(t).then(()=>n):n}const Fp=C("$ZodObject",(t,e)=>{if(ae.init(t,e),!Object.getOwnPropertyDescriptor(e,"shape")?.get){const a=e.shape;Object.defineProperty(e,"shape",{get:()=>{const l={...a};return Object.defineProperty(e,"shape",{value:l}),l}})}const s=Ri(()=>fl(e));re(t._zod,"propValues",()=>{const a=e.shape,l={};for(const c in a){const u=a[c]._zod;if(u.values){l[c]??(l[c]=new Set);for(const f of u.values)l[c].add(f)}}return l});const r=Ys,i=e.catchall;let o;t._zod.parse=(a,l)=>{o??(o=s.value);const c=a.value;if(!r(c))return a.issues.push({expected:"object",code:"invalid_type",input:c,inst:t}),a;a.value={};const u=[],f=o.shape;for(const h of o.keys){const b=f[h]._zod.run({value:c[h],issues:[]},l);b instanceof Promise?u.push(b.then(g=>Hs(g,a,h,c))):Hs(b,a,h,c)}return i?hl(u,c,a,l,s.value,t):u.length?Promise.all(u).then(()=>a):a}}),Dp=C("$ZodObjectJIT",(t,e)=>{Fp.init(t,e);const n=t._zod.parse,s=Ri(()=>fl(e)),r=h=>{const p=new op(["shape","payload","ctx"]),b=s.value,g=v=>{const _=Ao(v);return`shape[${_}]._zod.run({ value: input[${_}], issues: [] }, ctx)`};p.write("const input = payload.value;");const w=Object.create(null);let m=0;for(const v of b.keys)w[v]=`key_${m++}`;p.write("const newResult = {};");for(const v of b.keys){const _=w[v],E=Ao(v);p.write(`const ${_} = ${g(v)};`),p.write(`
        if (${_}.issues.length) {
          payload.issues = payload.issues.concat(${_}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${E}, ...iss.path] : [${E}]
          })));
        }
        
        
        if (${_}.value === undefined) {
          if (${E} in input) {
            newResult[${E}] = undefined;
          }
        } else {
          newResult[${E}] = ${_}.value;
        }
        
      `)}p.write("payload.value = newResult;"),p.write("return payload;");const S=p.compile();return(v,_)=>S(h,v,_)};let i;const o=Ys,a=!Xa.jitless,c=a&&Qh.value,u=e.catchall;let f;t._zod.parse=(h,p)=>{f??(f=s.value);const b=h.value;return o(b)?a&&c&&p?.async===!1&&p.jitless!==!0?(i||(i=r(e.shape)),h=i(h,p),u?hl([],b,h,p,f,t):h):n(h,p):(h.issues.push({expected:"object",code:"invalid_type",input:b,inst:t}),h)}});function Oo(t,e,n,s){for(const i of t)if(i.issues.length===0)return e.value=i.value,e;const r=t.filter(i=>!un(i));return r.length===1?(e.value=r[0].value,r[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:n,errors:t.map(i=>i.issues.map(o=>Nt(o,s,Tt())))}),e)}const Bp=C("$ZodUnion",(t,e)=>{ae.init(t,e),re(t._zod,"optin",()=>e.options.some(r=>r._zod.optin==="optional")?"optional":void 0),re(t._zod,"optout",()=>e.options.some(r=>r._zod.optout==="optional")?"optional":void 0),re(t._zod,"values",()=>{if(e.options.every(r=>r._zod.values))return new Set(e.options.flatMap(r=>Array.from(r._zod.values)))}),re(t._zod,"pattern",()=>{if(e.options.every(r=>r._zod.pattern)){const r=e.options.map(i=>i._zod.pattern);return new RegExp(`^(${r.map(i=>Pi(i.source)).join("|")})$`)}});const n=e.options.length===1,s=e.options[0]._zod.run;t._zod.parse=(r,i)=>{if(n)return s(r,i);let o=!1;const a=[];for(const l of e.options){const c=l._zod.run({value:r.value,issues:[]},i);if(c instanceof Promise)a.push(c),o=!0;else{if(c.issues.length===0)return c;a.push(c)}}return o?Promise.all(a).then(l=>Oo(l,r,t,i)):Oo(a,r,t,i)}}),Up=C("$ZodIntersection",(t,e)=>{ae.init(t,e),t._zod.parse=(n,s)=>{const r=n.value,i=e.left._zod.run({value:r,issues:[]},s),o=e.right._zod.run({value:r,issues:[]},s);return i instanceof Promise||o instanceof Promise?Promise.all([i,o]).then(([l,c])=>Io(n,l,c)):Io(n,i,o)}});function ai(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(_n(t)&&_n(e)){const n=Object.keys(e),s=Object.keys(t).filter(i=>n.indexOf(i)!==-1),r={...t,...e};for(const i of s){const o=ai(t[i],e[i]);if(!o.valid)return{valid:!1,mergeErrorPath:[i,...o.mergeErrorPath]};r[i]=o.data}return{valid:!0,data:r}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let s=0;s<t.length;s++){const r=t[s],i=e[s],o=ai(r,i);if(!o.valid)return{valid:!1,mergeErrorPath:[s,...o.mergeErrorPath]};n.push(o.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function Io(t,e,n){if(e.issues.length&&t.issues.push(...e.issues),n.issues.length&&t.issues.push(...n.issues),un(t))return t;const s=ai(e.value,n.value);if(!s.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(s.mergeErrorPath)}`);return t.value=s.data,t}const Zp=C("$ZodTuple",(t,e)=>{ae.init(t,e);const n=e.items,s=n.length-[...n].reverse().findIndex(r=>r._zod.optin!=="optional");t._zod.parse=(r,i)=>{const o=r.value;if(!Array.isArray(o))return r.issues.push({input:o,inst:t,expected:"tuple",code:"invalid_type"}),r;r.value=[];const a=[];if(!e.rest){const c=o.length>n.length,u=o.length<s-1;if(c||u)return r.issues.push({...c?{code:"too_big",maximum:n.length}:{code:"too_small",minimum:n.length},input:o,inst:t,origin:"array"}),r}let l=-1;for(const c of n){if(l++,l>=o.length&&l>=s)continue;const u=c._zod.run({value:o[l],issues:[]},i);u instanceof Promise?a.push(u.then(f=>ws(f,r,l))):ws(u,r,l)}if(e.rest){const c=o.slice(n.length);for(const u of c){l++;const f=e.rest._zod.run({value:u,issues:[]},i);f instanceof Promise?a.push(f.then(h=>ws(h,r,l))):ws(f,r,l)}}return a.length?Promise.all(a).then(()=>r):r}});function ws(t,e,n){t.issues.length&&e.issues.push(...Lt(n,t.issues)),e.value[n]=t.value}const Vp=C("$ZodRecord",(t,e)=>{ae.init(t,e),t._zod.parse=(n,s)=>{const r=n.value;if(!_n(r))return n.issues.push({expected:"record",code:"invalid_type",input:r,inst:t}),n;const i=[];if(e.keyType._zod.values){const o=e.keyType._zod.values;n.value={};for(const l of o)if(typeof l=="string"||typeof l=="number"||typeof l=="symbol"){const c=e.valueType._zod.run({value:r[l],issues:[]},s);c instanceof Promise?i.push(c.then(u=>{u.issues.length&&n.issues.push(...Lt(l,u.issues)),n.value[l]=u.value})):(c.issues.length&&n.issues.push(...Lt(l,c.issues)),n.value[l]=c.value)}let a;for(const l in r)o.has(l)||(a=a??[],a.push(l));a&&a.length>0&&n.issues.push({code:"unrecognized_keys",input:r,inst:t,keys:a})}else{n.value={};for(const o of Reflect.ownKeys(r)){if(o==="__proto__")continue;const a=e.keyType._zod.run({value:o,issues:[]},s);if(a instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(a.issues.length){n.issues.push({code:"invalid_key",origin:"record",issues:a.issues.map(c=>Nt(c,s,Tt())),input:o,path:[o],inst:t}),n.value[a.value]=a.value;continue}const l=e.valueType._zod.run({value:r[o],issues:[]},s);l instanceof Promise?i.push(l.then(c=>{c.issues.length&&n.issues.push(...Lt(o,c.issues)),n.value[a.value]=c.value})):(l.issues.length&&n.issues.push(...Lt(o,l.issues)),n.value[a.value]=l.value)}}return i.length?Promise.all(i).then(()=>n):n}}),Kp=C("$ZodEnum",(t,e)=>{ae.init(t,e);const n=Wh(e.entries),s=new Set(n);t._zod.values=s,t._zod.pattern=new RegExp(`^(${n.filter(r=>Jh.has(typeof r)).map(r=>typeof r=="string"?En(r):r.toString()).join("|")})$`),t._zod.parse=(r,i)=>{const o=r.value;return s.has(o)||r.issues.push({code:"invalid_value",values:n,input:o,inst:t}),r}}),Gp=C("$ZodLiteral",(t,e)=>{if(ae.init(t,e),e.values.length===0)throw new Error("Cannot create literal schema with no valid values");t._zod.values=new Set(e.values),t._zod.pattern=new RegExp(`^(${e.values.map(n=>typeof n=="string"?En(n):n?En(n.toString()):String(n)).join("|")})$`),t._zod.parse=(n,s)=>{const r=n.value;return t._zod.values.has(r)||n.issues.push({code:"invalid_value",values:e.values,input:r,inst:t}),n}}),qp=C("$ZodTransform",(t,e)=>{ae.init(t,e),t._zod.parse=(n,s)=>{if(s.direction==="backward")throw new Wa(t.constructor.name);const r=e.transform(n.value,n);if(s.async)return(r instanceof Promise?r:Promise.resolve(r)).then(o=>(n.value=o,n));if(r instanceof Promise)throw new wn;return n.value=r,n}});function Co(t,e){return t.issues.length&&e===void 0?{issues:[],value:void 0}:t}const Yp=C("$ZodOptional",(t,e)=>{ae.init(t,e),t._zod.optin="optional",t._zod.optout="optional",re(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),re(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${Pi(n.source)})?$`):void 0}),t._zod.parse=(n,s)=>{if(e.innerType._zod.optin==="optional"){const r=e.innerType._zod.run(n,s);return r instanceof Promise?r.then(i=>Co(i,n.value)):Co(r,n.value)}return n.value===void 0?n:e.innerType._zod.run(n,s)}}),Hp=C("$ZodNullable",(t,e)=>{ae.init(t,e),re(t._zod,"optin",()=>e.innerType._zod.optin),re(t._zod,"optout",()=>e.innerType._zod.optout),re(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${Pi(n.source)}|null)$`):void 0}),re(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(n,s)=>n.value===null?n:e.innerType._zod.run(n,s)}),Wp=C("$ZodDefault",(t,e)=>{ae.init(t,e),t._zod.optin="optional",re(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,s)=>{if(s.direction==="backward")return e.innerType._zod.run(n,s);if(n.value===void 0)return n.value=e.defaultValue,n;const r=e.innerType._zod.run(n,s);return r instanceof Promise?r.then(i=>jo(i,e)):jo(r,e)}});function jo(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}const Xp=C("$ZodPrefault",(t,e)=>{ae.init(t,e),t._zod.optin="optional",re(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,s)=>(s.direction==="backward"||n.value===void 0&&(n.value=e.defaultValue),e.innerType._zod.run(n,s))}),Qp=C("$ZodNonOptional",(t,e)=>{ae.init(t,e),re(t._zod,"values",()=>{const n=e.innerType._zod.values;return n?new Set([...n].filter(s=>s!==void 0)):void 0}),t._zod.parse=(n,s)=>{const r=e.innerType._zod.run(n,s);return r instanceof Promise?r.then(i=>Ro(i,t)):Ro(r,t)}});function Ro(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}const Jp=C("$ZodCatch",(t,e)=>{ae.init(t,e),re(t._zod,"optin",()=>e.innerType._zod.optin),re(t._zod,"optout",()=>e.innerType._zod.optout),re(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,s)=>{if(s.direction==="backward")return e.innerType._zod.run(n,s);const r=e.innerType._zod.run(n,s);return r instanceof Promise?r.then(i=>(n.value=i.value,i.issues.length&&(n.value=e.catchValue({...n,error:{issues:i.issues.map(o=>Nt(o,s,Tt()))},input:n.value}),n.issues=[]),n)):(n.value=r.value,r.issues.length&&(n.value=e.catchValue({...n,error:{issues:r.issues.map(i=>Nt(i,s,Tt()))},input:n.value}),n.issues=[]),n)}}),em=C("$ZodPipe",(t,e)=>{ae.init(t,e),re(t._zod,"values",()=>e.in._zod.values),re(t._zod,"optin",()=>e.in._zod.optin),re(t._zod,"optout",()=>e.out._zod.optout),re(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(n,s)=>{if(s.direction==="backward"){const i=e.out._zod.run(n,s);return i instanceof Promise?i.then(o=>vs(o,e.in,s)):vs(i,e.in,s)}const r=e.in._zod.run(n,s);return r instanceof Promise?r.then(i=>vs(i,e.out,s)):vs(r,e.out,s)}});function vs(t,e,n){return t.issues.length?(t.aborted=!0,t):e._zod.run({value:t.value,issues:t.issues},n)}const tm=C("$ZodReadonly",(t,e)=>{ae.init(t,e),re(t._zod,"propValues",()=>e.innerType._zod.propValues),re(t._zod,"values",()=>e.innerType._zod.values),re(t._zod,"optin",()=>e.innerType._zod.optin),re(t._zod,"optout",()=>e.innerType._zod.optout),t._zod.parse=(n,s)=>{if(s.direction==="backward")return e.innerType._zod.run(n,s);const r=e.innerType._zod.run(n,s);return r instanceof Promise?r.then(Mo):Mo(r)}});function Mo(t){return t.value=Object.freeze(t.value),t}const nm=C("$ZodLazy",(t,e)=>{ae.init(t,e),re(t._zod,"innerType",()=>e.getter()),re(t._zod,"pattern",()=>t._zod.innerType._zod.pattern),re(t._zod,"propValues",()=>t._zod.innerType._zod.propValues),re(t._zod,"optin",()=>t._zod.innerType._zod.optin??void 0),re(t._zod,"optout",()=>t._zod.innerType._zod.optout??void 0),t._zod.parse=(n,s)=>t._zod.innerType._zod.run(n,s)}),sm=C("$ZodCustom",(t,e)=>{je.init(t,e),ae.init(t,e),t._zod.parse=(n,s)=>n,t._zod.check=n=>{const s=n.value,r=e.fn(s);if(r instanceof Promise)return r.then(i=>Po(i,n,s,t));Po(r,n,s,t)}});function Po(t,e,n,s){if(!t){const r={code:"custom",input:n,inst:s,path:[...s._zod.def.path??[]],continue:!s._zod.def.abort};s._zod.def.params&&(r.params=s._zod.def.params),e.issues.push(Kn(r))}}class rm{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...n){const s=n[0];if(this._map.set(e,s),s&&typeof s=="object"&&"id"in s){if(this._idmap.has(s.id))throw new Error(`ID ${s.id} already exists in the registry`);this._idmap.set(s.id,e)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const n=this._map.get(e);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(e),this}get(e){const n=e._zod.parent;if(n){const s={...this.get(n)??{}};delete s.id;const r={...s,...this._map.get(e)};return Object.keys(r).length?r:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function im(){return new rm}const xs=im();function om(t,e){return new t({type:"string",...D(e)})}function am(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...D(e)})}function $o(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...D(e)})}function lm(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...D(e)})}function cm(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...D(e)})}function um(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...D(e)})}function fm(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...D(e)})}function hm(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...D(e)})}function dm(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...D(e)})}function pm(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...D(e)})}function mm(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...D(e)})}function gm(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...D(e)})}function ym(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...D(e)})}function bm(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...D(e)})}function wm(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...D(e)})}function vm(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...D(e)})}function xm(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...D(e)})}function _m(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...D(e)})}function Em(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...D(e)})}function Sm(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...D(e)})}function km(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...D(e)})}function Am(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...D(e)})}function Tm(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...D(e)})}function Nm(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...D(e)})}function Om(t,e){return new t({type:"string",format:"date",check:"string_format",...D(e)})}function Im(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...D(e)})}function Cm(t,e){return new t({type:"string",format:"duration",check:"string_format",...D(e)})}function jm(t,e){return new t({type:"number",checks:[],...D(e)})}function Rm(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"safeint",...D(e)})}function Mm(t,e){return new t({type:"boolean",...D(e)})}function Pm(t){return new t({type:"unknown"})}function $m(t,e){return new t({type:"never",...D(e)})}function zm(t,e){return new t({type:"date",...D(e)})}function zo(t,e){return new al({check:"less_than",...D(e),value:t,inclusive:!1})}function zs(t,e){return new al({check:"less_than",...D(e),value:t,inclusive:!0})}function Lo(t,e){return new ll({check:"greater_than",...D(e),value:t,inclusive:!1})}function Ls(t,e){return new ll({check:"greater_than",...D(e),value:t,inclusive:!0})}function Fo(t,e){return new Yd({check:"multiple_of",...D(e),value:t})}function dl(t,e){return new Wd({check:"max_length",...D(e),maximum:t})}function Ws(t,e){return new Xd({check:"min_length",...D(e),minimum:t})}function pl(t,e){return new Qd({check:"length_equals",...D(e),length:t})}function Lm(t,e){return new Jd({check:"string_format",format:"regex",...D(e),pattern:t})}function Fm(t){return new ep({check:"string_format",format:"lowercase",...D(t)})}function Dm(t){return new tp({check:"string_format",format:"uppercase",...D(t)})}function Bm(t,e){return new np({check:"string_format",format:"includes",...D(e),includes:t})}function Um(t,e){return new sp({check:"string_format",format:"starts_with",...D(e),prefix:t})}function Zm(t,e){return new rp({check:"string_format",format:"ends_with",...D(e),suffix:t})}function ts(t){return new ip({check:"overwrite",tx:t})}function Vm(t){return ts(e=>e.normalize(t))}function Km(){return ts(t=>t.trim())}function Gm(){return ts(t=>t.toLowerCase())}function qm(){return ts(t=>t.toUpperCase())}function Ym(t,e,n){return new t({type:"array",element:e,...D(n)})}function Hm(t,e,n){return new t({type:"custom",check:"custom",fn:e,...D(n)})}function Wm(t){const e=Xm(n=>(n.addIssue=s=>{if(typeof s=="string")n.issues.push(Kn(s,n.value,e._zod.def));else{const r=s;r.fatal&&(r.continue=!1),r.code??(r.code="custom"),r.input??(r.input=n.value),r.inst??(r.inst=e),r.continue??(r.continue=!e._zod.def.abort),n.issues.push(Kn(r))}},t(n.value,n)));return e}function Xm(t,e){const n=new je({check:"custom",...D(e)});return n._zod.check=t,n}const Qm=C("ZodISODateTime",(t,e)=>{wp.init(t,e),pe.init(t,e)});function Jm(t){return Nm(Qm,t)}const eg=C("ZodISODate",(t,e)=>{vp.init(t,e),pe.init(t,e)});function tg(t){return Om(eg,t)}const ng=C("ZodISOTime",(t,e)=>{xp.init(t,e),pe.init(t,e)});function sg(t){return Im(ng,t)}const rg=C("ZodISODuration",(t,e)=>{_p.init(t,e),pe.init(t,e)});function ig(t){return Cm(rg,t)}const og=(t,e)=>{tl.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:n=>ud(t,n)},flatten:{value:n=>cd(t,n)},addIssue:{value:n=>{t.issues.push(n),t.message=JSON.stringify(t.issues,oi,2)}},addIssues:{value:n=>{t.issues.push(...n),t.message=JSON.stringify(t.issues,oi,2)}},isEmpty:{get(){return t.issues.length===0}}})},Be=C("ZodError",og,{Parent:Error}),ag=zi(Be),lg=Li(Be),cg=lr(Be),ug=cr(Be),fg=dd(Be),hg=pd(Be),dg=md(Be),pg=gd(Be),mg=yd(Be),gg=bd(Be),yg=wd(Be),bg=vd(Be),ue=C("ZodType",(t,e)=>(ae.init(t,e),t.def=e,t.type=e.type,Object.defineProperty(t,"_def",{value:e}),t.check=(...n)=>t.clone(Ht(e,{checks:[...e.checks??[],...n.map(s=>typeof s=="function"?{_zod:{check:s,def:{check:"custom"},onattach:[]}}:s)]})),t.clone=(n,s)=>Rt(t,n,s),t.brand=()=>t,t.register=((n,s)=>(n.add(t,s),t)),t.parse=(n,s)=>ag(t,n,s,{callee:t.parse}),t.safeParse=(n,s)=>cg(t,n,s),t.parseAsync=async(n,s)=>lg(t,n,s,{callee:t.parseAsync}),t.safeParseAsync=async(n,s)=>ug(t,n,s),t.spa=t.safeParseAsync,t.encode=(n,s)=>fg(t,n,s),t.decode=(n,s)=>hg(t,n,s),t.encodeAsync=async(n,s)=>dg(t,n,s),t.decodeAsync=async(n,s)=>pg(t,n,s),t.safeEncode=(n,s)=>mg(t,n,s),t.safeDecode=(n,s)=>gg(t,n,s),t.safeEncodeAsync=async(n,s)=>yg(t,n,s),t.safeDecodeAsync=async(n,s)=>bg(t,n,s),t.refine=(n,s)=>t.check(d1(n,s)),t.superRefine=n=>t.check(p1(n)),t.overwrite=n=>t.check(ts(n)),t.optional=()=>Ko(t),t.nullable=()=>Go(t),t.nullish=()=>Ko(Go(t)),t.nonoptional=n=>r1(t,n),t.array=()=>Sn(t),t.or=n=>bl([t,n]),t.and=n=>Gg(t,n),t.transform=n=>qo(t,Qg(n)),t.default=n=>t1(t,n),t.prefault=n=>s1(t,n),t.catch=n=>o1(t,n),t.pipe=n=>qo(t,n),t.readonly=()=>c1(t),t.describe=n=>{const s=t.clone();return xs.add(s,{description:n}),s},Object.defineProperty(t,"description",{get(){return xs.get(t)?.description},configurable:!0}),t.meta=(...n)=>{if(n.length===0)return xs.get(t);const s=t.clone();return xs.add(s,n[0]),s},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t)),ml=C("_ZodString",(t,e)=>{Fi.init(t,e),ue.init(t,e);const n=t._zod.bag;t.format=n.format??null,t.minLength=n.minimum??null,t.maxLength=n.maximum??null,t.regex=(...s)=>t.check(Lm(...s)),t.includes=(...s)=>t.check(Bm(...s)),t.startsWith=(...s)=>t.check(Um(...s)),t.endsWith=(...s)=>t.check(Zm(...s)),t.min=(...s)=>t.check(Ws(...s)),t.max=(...s)=>t.check(dl(...s)),t.length=(...s)=>t.check(pl(...s)),t.nonempty=(...s)=>t.check(Ws(1,...s)),t.lowercase=s=>t.check(Fm(s)),t.uppercase=s=>t.check(Dm(s)),t.trim=()=>t.check(Km()),t.normalize=(...s)=>t.check(Vm(...s)),t.toLowerCase=()=>t.check(Gm()),t.toUpperCase=()=>t.check(qm())}),wg=C("ZodString",(t,e)=>{Fi.init(t,e),ml.init(t,e),t.email=n=>t.check(am(vg,n)),t.url=n=>t.check(hm(xg,n)),t.jwt=n=>t.check(Tm($g,n)),t.emoji=n=>t.check(dm(_g,n)),t.guid=n=>t.check($o(Do,n)),t.uuid=n=>t.check(lm(_s,n)),t.uuidv4=n=>t.check(cm(_s,n)),t.uuidv6=n=>t.check(um(_s,n)),t.uuidv7=n=>t.check(fm(_s,n)),t.nanoid=n=>t.check(pm(Eg,n)),t.guid=n=>t.check($o(Do,n)),t.cuid=n=>t.check(mm(Sg,n)),t.cuid2=n=>t.check(gm(kg,n)),t.ulid=n=>t.check(ym(Ag,n)),t.base64=n=>t.check(Sm(Rg,n)),t.base64url=n=>t.check(km(Mg,n)),t.xid=n=>t.check(bm(Tg,n)),t.ksuid=n=>t.check(wm(Ng,n)),t.ipv4=n=>t.check(vm(Og,n)),t.ipv6=n=>t.check(xm(Ig,n)),t.cidrv4=n=>t.check(_m(Cg,n)),t.cidrv6=n=>t.check(Em(jg,n)),t.e164=n=>t.check(Am(Pg,n)),t.datetime=n=>t.check(Jm(n)),t.date=n=>t.check(tg(n)),t.time=n=>t.check(sg(n)),t.duration=n=>t.check(ig(n))});function X(t){return om(wg,t)}const pe=C("ZodStringFormat",(t,e)=>{he.init(t,e),ml.init(t,e)}),vg=C("ZodEmail",(t,e)=>{up.init(t,e),pe.init(t,e)}),Do=C("ZodGUID",(t,e)=>{lp.init(t,e),pe.init(t,e)}),_s=C("ZodUUID",(t,e)=>{cp.init(t,e),pe.init(t,e)}),xg=C("ZodURL",(t,e)=>{fp.init(t,e),pe.init(t,e)}),_g=C("ZodEmoji",(t,e)=>{hp.init(t,e),pe.init(t,e)}),Eg=C("ZodNanoID",(t,e)=>{dp.init(t,e),pe.init(t,e)}),Sg=C("ZodCUID",(t,e)=>{pp.init(t,e),pe.init(t,e)}),kg=C("ZodCUID2",(t,e)=>{mp.init(t,e),pe.init(t,e)}),Ag=C("ZodULID",(t,e)=>{gp.init(t,e),pe.init(t,e)}),Tg=C("ZodXID",(t,e)=>{yp.init(t,e),pe.init(t,e)}),Ng=C("ZodKSUID",(t,e)=>{bp.init(t,e),pe.init(t,e)}),Og=C("ZodIPv4",(t,e)=>{Ep.init(t,e),pe.init(t,e)}),Ig=C("ZodIPv6",(t,e)=>{Sp.init(t,e),pe.init(t,e)}),Cg=C("ZodCIDRv4",(t,e)=>{kp.init(t,e),pe.init(t,e)}),jg=C("ZodCIDRv6",(t,e)=>{Ap.init(t,e),pe.init(t,e)}),Rg=C("ZodBase64",(t,e)=>{Tp.init(t,e),pe.init(t,e)}),Mg=C("ZodBase64URL",(t,e)=>{Op.init(t,e),pe.init(t,e)}),Pg=C("ZodE164",(t,e)=>{Ip.init(t,e),pe.init(t,e)}),$g=C("ZodJWT",(t,e)=>{jp.init(t,e),pe.init(t,e)}),gl=C("ZodNumber",(t,e)=>{ul.init(t,e),ue.init(t,e),t.gt=(s,r)=>t.check(Lo(s,r)),t.gte=(s,r)=>t.check(Ls(s,r)),t.min=(s,r)=>t.check(Ls(s,r)),t.lt=(s,r)=>t.check(zo(s,r)),t.lte=(s,r)=>t.check(zs(s,r)),t.max=(s,r)=>t.check(zs(s,r)),t.int=s=>t.check(Bo(s)),t.safe=s=>t.check(Bo(s)),t.positive=s=>t.check(Lo(0,s)),t.nonnegative=s=>t.check(Ls(0,s)),t.negative=s=>t.check(zo(0,s)),t.nonpositive=s=>t.check(zs(0,s)),t.multipleOf=(s,r)=>t.check(Fo(s,r)),t.step=(s,r)=>t.check(Fo(s,r)),t.finite=()=>t;const n=t._zod.bag;t.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,t.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,t.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),t.isFinite=!0,t.format=n.format??null});function W(t){return jm(gl,t)}const zg=C("ZodNumberFormat",(t,e)=>{Rp.init(t,e),gl.init(t,e)});function Bo(t){return Rm(zg,t)}const Lg=C("ZodBoolean",(t,e)=>{Mp.init(t,e),ue.init(t,e)});function Kt(t){return Mm(Lg,t)}const Fg=C("ZodUnknown",(t,e)=>{Pp.init(t,e),ue.init(t,e)});function Xs(){return Pm(Fg)}const Dg=C("ZodNever",(t,e)=>{$p.init(t,e),ue.init(t,e)});function Bg(t){return $m(Dg,t)}const Ug=C("ZodDate",(t,e)=>{zp.init(t,e),ue.init(t,e),t.min=(s,r)=>t.check(Ls(s,r)),t.max=(s,r)=>t.check(zs(s,r));const n=t._zod.bag;t.minDate=n.minimum?new Date(n.minimum):null,t.maxDate=n.maximum?new Date(n.maximum):null});function Uo(t){return zm(Ug,t)}const Zg=C("ZodArray",(t,e)=>{Lp.init(t,e),ue.init(t,e),t.element=e.element,t.min=(n,s)=>t.check(Ws(n,s)),t.nonempty=n=>t.check(Ws(1,n)),t.max=(n,s)=>t.check(dl(n,s)),t.length=(n,s)=>t.check(pl(n,s)),t.unwrap=()=>t.element});function Sn(t,e){return Ym(Zg,t,e)}const yl=C("ZodObject",(t,e)=>{Dp.init(t,e),ue.init(t,e),re(t,"shape",()=>e.shape),t.keyof=()=>Hg(Object.keys(t._zod.def.shape)),t.catchall=n=>t.clone({...t._zod.def,catchall:n}),t.passthrough=()=>t.clone({...t._zod.def,catchall:Xs()}),t.loose=()=>t.clone({...t._zod.def,catchall:Xs()}),t.strict=()=>t.clone({...t._zod.def,catchall:Bg()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=n=>rd(t,n),t.safeExtend=n=>id(t,n),t.merge=n=>od(t,n),t.pick=n=>nd(t,n),t.omit=n=>sd(t,n),t.partial=(...n)=>ad(wl,t,n[0]),t.required=(...n)=>ld(vl,t,n[0])});function Ut(t,e){const n={type:"object",shape:t??{},...D(e)};return new yl(n)}function Ot(t,e){return new yl({type:"object",shape:t,catchall:Xs(),...D(e)})}const Vg=C("ZodUnion",(t,e)=>{Bp.init(t,e),ue.init(t,e),t.options=e.options});function bl(t,e){return new Vg({type:"union",options:t,...D(e)})}const Kg=C("ZodIntersection",(t,e)=>{Up.init(t,e),ue.init(t,e)});function Gg(t,e){return new Kg({type:"intersection",left:t,right:e})}const qg=C("ZodTuple",(t,e)=>{Zp.init(t,e),ue.init(t,e),t.rest=n=>t.clone({...t._zod.def,rest:n})});function Zo(t,e,n){const s=e instanceof ae,r=s?n:e,i=s?e:null;return new qg({type:"tuple",items:t,rest:i,...D(r)})}const Yg=C("ZodRecord",(t,e)=>{Vp.init(t,e),ue.init(t,e),t.keyType=e.keyType,t.valueType=e.valueType});function It(t,e,n){return new Yg({type:"record",keyType:t,valueType:e,...D(n)})}const li=C("ZodEnum",(t,e)=>{Kp.init(t,e),ue.init(t,e),t.enum=e.entries,t.options=Object.values(e.entries);const n=new Set(Object.keys(e.entries));t.extract=(s,r)=>{const i={};for(const o of s)if(n.has(o))i[o]=e.entries[o];else throw new Error(`Key ${o} not found in enum`);return new li({...e,checks:[],...D(r),entries:i})},t.exclude=(s,r)=>{const i={...e.entries};for(const o of s)if(n.has(o))delete i[o];else throw new Error(`Key ${o} not found in enum`);return new li({...e,checks:[],...D(r),entries:i})}});function Hg(t,e){const n=Array.isArray(t)?Object.fromEntries(t.map(s=>[s,s])):t;return new li({type:"enum",entries:n,...D(e)})}const Wg=C("ZodLiteral",(t,e)=>{Gp.init(t,e),ue.init(t,e),t.values=new Set(e.values),Object.defineProperty(t,"value",{get(){if(e.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return e.values[0]}})});function Vo(t,e){return new Wg({type:"literal",values:Array.isArray(t)?t:[t],...D(e)})}const Xg=C("ZodTransform",(t,e)=>{qp.init(t,e),ue.init(t,e),t._zod.parse=(n,s)=>{if(s.direction==="backward")throw new Wa(t.constructor.name);n.addIssue=i=>{if(typeof i=="string")n.issues.push(Kn(i,n.value,e));else{const o=i;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=n.value),o.inst??(o.inst=t),n.issues.push(Kn(o))}};const r=e.transform(n.value,n);return r instanceof Promise?r.then(i=>(n.value=i,n)):(n.value=r,n)}});function Qg(t){return new Xg({type:"transform",transform:t})}const wl=C("ZodOptional",(t,e)=>{Yp.init(t,e),ue.init(t,e),t.unwrap=()=>t._zod.def.innerType});function Ko(t){return new wl({type:"optional",innerType:t})}const Jg=C("ZodNullable",(t,e)=>{Hp.init(t,e),ue.init(t,e),t.unwrap=()=>t._zod.def.innerType});function Go(t){return new Jg({type:"nullable",innerType:t})}const e1=C("ZodDefault",(t,e)=>{Wp.init(t,e),ue.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function t1(t,e){return new e1({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():Ja(e)}})}const n1=C("ZodPrefault",(t,e)=>{Xp.init(t,e),ue.init(t,e),t.unwrap=()=>t._zod.def.innerType});function s1(t,e){return new n1({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():Ja(e)}})}const vl=C("ZodNonOptional",(t,e)=>{Qp.init(t,e),ue.init(t,e),t.unwrap=()=>t._zod.def.innerType});function r1(t,e){return new vl({type:"nonoptional",innerType:t,...D(e)})}const i1=C("ZodCatch",(t,e)=>{Jp.init(t,e),ue.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function o1(t,e){return new i1({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}const a1=C("ZodPipe",(t,e)=>{em.init(t,e),ue.init(t,e),t.in=e.in,t.out=e.out});function qo(t,e){return new a1({type:"pipe",in:t,out:e})}const l1=C("ZodReadonly",(t,e)=>{tm.init(t,e),ue.init(t,e),t.unwrap=()=>t._zod.def.innerType});function c1(t){return new l1({type:"readonly",innerType:t})}const u1=C("ZodLazy",(t,e)=>{nm.init(t,e),ue.init(t,e),t.unwrap=()=>t._zod.def.getter()});function f1(t){return new u1({type:"lazy",getter:t})}const h1=C("ZodCustom",(t,e)=>{sm.init(t,e),ue.init(t,e)});function d1(t,e={}){return Hm(h1,t,e)}function p1(t){return Wm(t)}const m1=Ut({schemaVersion:W().min(0).default(0),projectName:X(),createdAt:Uo().optional().nullable(),lastModifiedAt:Uo().optional().nullable(),orbitControls:Ut({position:Zo([W(),W(),W()]),target:Zo([W(),W(),W()]),zoom:W().optional()}).optional()}),xl=Ot({transform:X().optional(),posX:W(),posY:W(),posZ:W(),rotX:W(),rotY:W(),rotZ:W(),sizeX:W().optional(),sizeY:W().optional(),sizeZ:W().optional(),anchor:X().optional()}),g1=Ot({enabled:Kt()}),_l=bl([Ot({"==":Vo("org.bukkit.inventory.ItemStack"),DataVersion:W(),id:X(),count:W(),components:It(X(),X()).transform(t=>{const e={};for(const[n,s]of Object.entries(t))try{e[n]=mf.parseSNBT(s).toJSON()}catch{e[n]=s}return e}).optional(),schema_version:W()}),Ot({"==":Vo("org.bukkit.inventory.ItemStack"),DataVersion:W(),id:X(),count:W(),components:It(X(),Xs()).optional(),schema_version:W()})]),El=f1(()=>Ut({type:X(),item:_l.optional(),position:xl,attachments:It(X(),El).optional(),displayItem:g1.optional(),shulkerColor:X().optional(),schematic:X().optional(),displayMode:X().optional(),firstPersonViewMode:X().optional(),firstPersonViewLockMode:X().optional(),lockRotation:Kt().optional(),names:Sn(X()).optional(),text:X().optional(),animations:It(X(),Ot({nodes:Sn(X()),looped:Kt().optional(),speed:W().optional()})).optional(),brightness:Ut({block:W(),sky:W()}).optional()})),y1=Ot({type:X(),entityType:X(),attachments:It(X(),El),position:xl.optional(),item:_l.optional(),shulkerColor:X().optional(),editor:Ut({selectedIndex:W().optional(),animNodeSelectedOption:W().optional(),scrollOffset:W().optional(),expanded:Kt().optional()}).passthrough().optional(),animations:It(X(),Ut({nodes:Sn(X()),looped:Kt().optional(),speed:W().optional()}).passthrough()).optional(),physical:Ut({cartLength:W().optional(),wheelCenter:W().optional(),wheelDistance:W().optional(),cartCouplerLength:W().optional()}).passthrough().optional()}),Sl=Ot({model:y1.optional(),entityType:X(),flipped:Kt().optional()}),b1=Ot({savedName:X(),name:X().optional(),carts:It(X(),Sl).optional(),claims:Sn(X()).optional(),spawnPattern:X().optional(),flipped:Kt().optional(),spawnLimit:W().optional(),usedModels:Sn(X()).optional()}),kl=It(X(),b1);function w1(t){const e=kl.safeParse(t);return e.success?{valid:!0}:{valid:!1,errors:e.error.issues.map(n=>`${n.path.join(".")}: ${n.message}`)}}class v1{constructor(){this.keyToValue=new Map,this.valueToKey=new Map}set(e,n){this.keyToValue.set(e,n),this.valueToKey.set(n,e)}getByKey(e){return this.keyToValue.get(e)}getByValue(e){return this.valueToKey.get(e)}clear(){this.keyToValue.clear(),this.valueToKey.clear()}}class Al{constructor(e){this.generateIdentifier=e,this.kv=new v1}register(e,n){this.kv.getByValue(e)||(n||(n=this.generateIdentifier(e)),this.kv.set(n,e))}clear(){this.kv.clear()}getIdentifier(e){return this.kv.getByValue(e)}getValue(e){return this.kv.getByKey(e)}}class x1 extends Al{constructor(){super(e=>e.name),this.classToAllowedProps=new Map}register(e,n){typeof n=="object"?(n.allowProps&&this.classToAllowedProps.set(e,n.allowProps),super.register(e,n.identifier)):super.register(e,n)}getAllowedProps(e){return this.classToAllowedProps.get(e)}}function _1(t){if("values"in Object)return Object.values(t);const e=[];for(const n in t)t.hasOwnProperty(n)&&e.push(t[n]);return e}function E1(t,e){const n=_1(t);if("find"in n)return n.find(e);const s=n;for(let r=0;r<s.length;r++){const i=s[r];if(e(i))return i}}function kn(t,e){Object.entries(t).forEach(([n,s])=>e(s,n))}function Fs(t,e){return t.indexOf(e)!==-1}function Yo(t,e){for(let n=0;n<t.length;n++){const s=t[n];if(e(s))return s}}class S1{constructor(){this.transfomers={}}register(e){this.transfomers[e.name]=e}findApplicable(e){return E1(this.transfomers,n=>n.isApplicable(e))}findByName(e){return this.transfomers[e]}}const k1=t=>Object.prototype.toString.call(t).slice(8,-1),Tl=t=>typeof t>"u",A1=t=>t===null,Gn=t=>typeof t!="object"||t===null||t===Object.prototype?!1:Object.getPrototypeOf(t)===null?!0:Object.getPrototypeOf(t)===Object.prototype,ci=t=>Gn(t)&&Object.keys(t).length===0,Ct=t=>Array.isArray(t),T1=t=>typeof t=="string",N1=t=>typeof t=="number"&&!isNaN(t),O1=t=>typeof t=="boolean",I1=t=>t instanceof RegExp,qn=t=>t instanceof Map,Yn=t=>t instanceof Set,Nl=t=>k1(t)==="Symbol",C1=t=>t instanceof Date&&!isNaN(t.valueOf()),j1=t=>t instanceof Error,Ho=t=>typeof t=="number"&&isNaN(t),R1=t=>O1(t)||A1(t)||Tl(t)||N1(t)||T1(t)||Nl(t),M1=t=>typeof t=="bigint",P1=t=>t===1/0||t===-1/0,$1=t=>ArrayBuffer.isView(t)&&!(t instanceof DataView),z1=t=>t instanceof URL,Ol=t=>t.replace(/\./g,"\\."),Mr=t=>t.map(String).map(Ol).join("."),Ln=t=>{const e=[];let n="";for(let r=0;r<t.length;r++){let i=t.charAt(r);if(i==="\\"&&t.charAt(r+1)==="."){n+=".",r++;continue}if(i==="."){e.push(n),n="";continue}n+=i}const s=n;return e.push(s),e};function tt(t,e,n,s){return{isApplicable:t,annotation:e,transform:n,untransform:s}}const Il=[tt(Tl,"undefined",()=>null,()=>{}),tt(M1,"bigint",t=>t.toString(),t=>typeof BigInt<"u"?BigInt(t):(console.error("Please add a BigInt polyfill."),t)),tt(C1,"Date",t=>t.toISOString(),t=>new Date(t)),tt(j1,"Error",(t,e)=>{const n={name:t.name,message:t.message};return e.allowedErrorProps.forEach(s=>{n[s]=t[s]}),n},(t,e)=>{const n=new Error(t.message);return n.name=t.name,n.stack=t.stack,e.allowedErrorProps.forEach(s=>{n[s]=t[s]}),n}),tt(I1,"regexp",t=>""+t,t=>{const e=t.slice(1,t.lastIndexOf("/")),n=t.slice(t.lastIndexOf("/")+1);return new RegExp(e,n)}),tt(Yn,"set",t=>[...t.values()],t=>new Set(t)),tt(qn,"map",t=>[...t.entries()],t=>new Map(t)),tt(t=>Ho(t)||P1(t),"number",t=>Ho(t)?"NaN":t>0?"Infinity":"-Infinity",Number),tt(t=>t===0&&1/t===-1/0,"number",()=>"-0",Number),tt(z1,"URL",t=>t.toString(),t=>new URL(t))];function fr(t,e,n,s){return{isApplicable:t,annotation:e,transform:n,untransform:s}}const Cl=fr((t,e)=>Nl(t)?!!e.symbolRegistry.getIdentifier(t):!1,(t,e)=>["symbol",e.symbolRegistry.getIdentifier(t)],t=>t.description,(t,e,n)=>{const s=n.symbolRegistry.getValue(e[1]);if(!s)throw new Error("Trying to deserialize unknown symbol");return s}),L1=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,Uint8ClampedArray].reduce((t,e)=>(t[e.name]=e,t),{}),jl=fr($1,t=>["typed-array",t.constructor.name],t=>[...t],(t,e)=>{const n=L1[e[1]];if(!n)throw new Error("Trying to deserialize unknown typed array");return new n(t)});function Rl(t,e){return t?.constructor?!!e.classRegistry.getIdentifier(t.constructor):!1}const Ml=fr(Rl,(t,e)=>["class",e.classRegistry.getIdentifier(t.constructor)],(t,e)=>{const n=e.classRegistry.getAllowedProps(t.constructor);if(!n)return{...t};const s={};return n.forEach(r=>{s[r]=t[r]}),s},(t,e,n)=>{const s=n.classRegistry.getValue(e[1]);if(!s)throw new Error(`Trying to deserialize unknown class '${e[1]}' - check https://github.com/blitz-js/superjson/issues/116#issuecomment-773996564`);return Object.assign(Object.create(s.prototype),t)}),Pl=fr((t,e)=>!!e.customTransformerRegistry.findApplicable(t),(t,e)=>["custom",e.customTransformerRegistry.findApplicable(t).name],(t,e)=>e.customTransformerRegistry.findApplicable(t).serialize(t),(t,e,n)=>{const s=n.customTransformerRegistry.findByName(e[1]);if(!s)throw new Error("Trying to deserialize unknown custom value");return s.deserialize(t)}),F1=[Ml,Cl,Pl,jl],Wo=(t,e)=>{const n=Yo(F1,r=>r.isApplicable(t,e));if(n)return{value:n.transform(t,e),type:n.annotation(t,e)};const s=Yo(Il,r=>r.isApplicable(t,e));if(s)return{value:s.transform(t,e),type:s.annotation}},$l={};Il.forEach(t=>{$l[t.annotation]=t});const D1=(t,e,n)=>{if(Ct(e))switch(e[0]){case"symbol":return Cl.untransform(t,e,n);case"class":return Ml.untransform(t,e,n);case"custom":return Pl.untransform(t,e,n);case"typed-array":return jl.untransform(t,e,n);default:throw new Error("Unknown transformation: "+e)}else{const s=$l[e];if(!s)throw new Error("Unknown transformation: "+e);return s.untransform(t,n)}},fn=(t,e)=>{if(e>t.size)throw new Error("index out of bounds");const n=t.keys();for(;e>0;)n.next(),e--;return n.next().value};function zl(t){if(Fs(t,"__proto__"))throw new Error("__proto__ is not allowed as a property");if(Fs(t,"prototype"))throw new Error("prototype is not allowed as a property");if(Fs(t,"constructor"))throw new Error("constructor is not allowed as a property")}const B1=(t,e)=>{zl(e);for(let n=0;n<e.length;n++){const s=e[n];if(Yn(t))t=fn(t,+s);else if(qn(t)){const r=+s,i=+e[++n]==0?"key":"value",o=fn(t,r);switch(i){case"key":t=o;break;case"value":t=t.get(o);break}}else t=t[s]}return t},ui=(t,e,n)=>{if(zl(e),e.length===0)return n(t);let s=t;for(let i=0;i<e.length-1;i++){const o=e[i];if(Ct(s)){const a=+o;s=s[a]}else if(Gn(s))s=s[o];else if(Yn(s)){const a=+o;s=fn(s,a)}else if(qn(s)){if(i===e.length-2)break;const l=+o,c=+e[++i]==0?"key":"value",u=fn(s,l);switch(c){case"key":s=u;break;case"value":s=s.get(u);break}}}const r=e[e.length-1];if(Ct(s)?s[+r]=n(s[+r]):Gn(s)&&(s[r]=n(s[r])),Yn(s)){const i=fn(s,+r),o=n(i);i!==o&&(s.delete(i),s.add(o))}if(qn(s)){const i=+e[e.length-2],o=fn(s,i);switch(+r==0?"key":"value"){case"key":{const l=n(o);s.set(l,s.get(o)),l!==o&&s.delete(o);break}case"value":{s.set(o,n(s.get(o)));break}}}return t};function fi(t,e,n=[]){if(!t)return;if(!Ct(t)){kn(t,(i,o)=>fi(i,e,[...n,...Ln(o)]));return}const[s,r]=t;r&&kn(r,(i,o)=>{fi(i,e,[...n,...Ln(o)])}),e(s,n)}function U1(t,e,n){return fi(e,(s,r)=>{t=ui(t,r,i=>D1(i,s,n))}),t}function Z1(t,e){function n(s,r){const i=B1(t,Ln(r));s.map(Ln).forEach(o=>{t=ui(t,o,()=>i)})}if(Ct(e)){const[s,r]=e;s.forEach(i=>{t=ui(t,Ln(i),()=>t)}),r&&kn(r,n)}else kn(e,n);return t}const V1=(t,e)=>Gn(t)||Ct(t)||qn(t)||Yn(t)||Rl(t,e);function K1(t,e,n){const s=n.get(t);s?s.push(e):n.set(t,[e])}function G1(t,e){const n={};let s;return t.forEach(r=>{if(r.length<=1)return;e||(r=r.map(a=>a.map(String)).sort((a,l)=>a.length-l.length));const[i,...o]=r;i.length===0?s=o.map(Mr):n[Mr(i)]=o.map(Mr)}),s?ci(n)?[s]:[s,n]:ci(n)?void 0:n}const Ll=(t,e,n,s,r=[],i=[],o=new Map)=>{const a=R1(t);if(!a){K1(t,r,e);const p=o.get(t);if(p)return s?{transformedValue:null}:p}if(!V1(t,n)){const p=Wo(t,n),b=p?{transformedValue:p.value,annotations:[p.type]}:{transformedValue:t};return a||o.set(t,b),b}if(Fs(i,t))return{transformedValue:null};const l=Wo(t,n),c=l?.value??t,u=Ct(c)?[]:{},f={};kn(c,(p,b)=>{if(b==="__proto__"||b==="constructor"||b==="prototype")throw new Error(`Detected property ${b}. This is a prototype pollution risk, please remove it from your object.`);const g=Ll(p,e,n,s,[...r,b],[...i,t],o);u[b]=g.transformedValue,Ct(g.annotations)?f[b]=g.annotations:Gn(g.annotations)&&kn(g.annotations,(w,m)=>{f[Ol(b)+"."+m]=w})});const h=ci(f)?{transformedValue:u,annotations:l?[l.type]:void 0}:{transformedValue:u,annotations:l?[l.type,f]:f};return a||o.set(t,h),h};function Fl(t){return Object.prototype.toString.call(t).slice(8,-1)}function Xo(t){return Fl(t)==="Array"}function q1(t){if(Fl(t)!=="Object")return!1;const e=Object.getPrototypeOf(t);return!!e&&e.constructor===Object&&e===Object.prototype}function Y1(t,e,n,s,r){const i={}.propertyIsEnumerable.call(s,e)?"enumerable":"nonenumerable";i==="enumerable"&&(t[e]=n),r&&i==="nonenumerable"&&Object.defineProperty(t,e,{value:n,enumerable:!1,writable:!0,configurable:!0})}function hi(t,e={}){if(Xo(t))return t.map(r=>hi(r,e));if(!q1(t))return t;const n=Object.getOwnPropertyNames(t),s=Object.getOwnPropertySymbols(t);return[...n,...s].reduce((r,i)=>{if(Xo(e.props)&&!e.props.includes(i))return r;const o=t[i],a=hi(o,e);return Y1(r,i,a,t,e.nonenumerable),r},{})}class q{constructor({dedupe:e=!1}={}){this.classRegistry=new x1,this.symbolRegistry=new Al(n=>n.description??""),this.customTransformerRegistry=new S1,this.allowedErrorProps=[],this.dedupe=e}serialize(e){const n=new Map,s=Ll(e,n,this,this.dedupe),r={json:s.transformedValue};s.annotations&&(r.meta={...r.meta,values:s.annotations});const i=G1(n,this.dedupe);return i&&(r.meta={...r.meta,referentialEqualities:i}),r}deserialize(e){const{json:n,meta:s}=e;let r=hi(n);return s?.values&&(r=U1(r,s.values,this)),s?.referentialEqualities&&(r=Z1(r,s.referentialEqualities)),r}stringify(e){return JSON.stringify(this.serialize(e))}parse(e){return this.deserialize(JSON.parse(e))}registerClass(e,n){this.classRegistry.register(e,n)}registerSymbol(e,n){this.symbolRegistry.register(e,n)}registerCustom(e,n){this.customTransformerRegistry.register({name:n,...e})}allowErrorProps(...e){this.allowedErrorProps.push(...e)}}q.defaultInstance=new q;q.serialize=q.defaultInstance.serialize.bind(q.defaultInstance);q.deserialize=q.defaultInstance.deserialize.bind(q.defaultInstance);q.stringify=q.defaultInstance.stringify.bind(q.defaultInstance);q.parse=q.defaultInstance.parse.bind(q.defaultInstance);q.registerClass=q.defaultInstance.registerClass.bind(q.defaultInstance);q.registerSymbol=q.defaultInstance.registerSymbol.bind(q.defaultInstance);q.registerCustom=q.defaultInstance.registerCustom.bind(q.defaultInstance);q.allowErrorProps=q.defaultInstance.allowErrorProps.bind(q.defaultInstance);q.serialize;q.deserialize;q.stringify;q.parse;q.registerClass;q.registerCustom;q.registerSymbol;q.allowErrorProps;class Dl{constructor(){this._listeners={}}addEventListener(e,n){const s=this._listeners;return s[e]===void 0&&(s[e]=[]),s[e].indexOf(n)===-1&&s[e].push(n),this}removeEventListener(e,n){const r=this._listeners[e];if(r!==void 0){const i=r.indexOf(n);i!==-1&&r.splice(i,1)}return this}dispatchEvent(e){const s=this._listeners[e.type];if(s!==void 0){const r=s.slice(0);for(let i=0,o=r.length;i<o;i++)r[i].call(this,e)}return this}dispose(){for(const e in this._listeners)delete this._listeners[e]}}class hn{constructor(e,n,s,r={}){if(this._name=void 0,this._parent=void 0,this._child=void 0,this._attributes=void 0,this._disposed=!1,this._name=e,this._parent=n,this._child=s,this._attributes=r,!n.isOnGraph(s))throw new Error("Cannot connect disconnected graphs.")}getName(){return this._name}getParent(){return this._parent}getChild(){return this._child}setChild(e){return this._child=e,this}getAttributes(){return this._attributes}dispose(){this._disposed||(this._parent._destroyRef(this),this._disposed=!0)}isDisposed(){return this._disposed}}class H1 extends Dl{constructor(...e){super(...e),this._emptySet=new Set,this._edges=new Set,this._parentEdges=new Map,this._childEdges=new Map}listEdges(){return Array.from(this._edges)}listParentEdges(e){return Array.from(this._childEdges.get(e)||this._emptySet)}listParents(e){const n=new Set;for(const s of this.listParentEdges(e))n.add(s.getParent());return Array.from(n)}listChildEdges(e){return Array.from(this._parentEdges.get(e)||this._emptySet)}listChildren(e){const n=new Set;for(const s of this.listChildEdges(e))n.add(s.getChild());return Array.from(n)}disconnectParents(e,n){for(const s of this.listParentEdges(e))(!n||n(s.getParent()))&&s.dispose();return this}_createEdge(e,n,s,r){const i=new hn(e,n,s,r);this._edges.add(i);const o=i.getParent();this._parentEdges.has(o)||this._parentEdges.set(o,new Set),this._parentEdges.get(o).add(i);const a=i.getChild();return this._childEdges.has(a)||this._childEdges.set(a,new Set),this._childEdges.get(a).add(i),i}_destroyEdge(e){return this._edges.delete(e),this._parentEdges.get(e.getParent()).delete(e),this._childEdges.get(e.getChild()).delete(e),this}}function Fn(){return Fn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Fn.apply(this,arguments)}class _t{constructor(e){if(this.list=[],e)for(const n of e)this.list.push(n)}add(e){this.list.push(e)}remove(e){const n=this.list.indexOf(e);n>=0&&this.list.splice(n,1)}removeChild(e){const n=[];for(const s of this.list)s.getChild()===e&&n.push(s);for(const s of n)this.remove(s);return n}listRefsByChild(e){const n=[];for(const s of this.list)s.getChild()===e&&n.push(s);return n}values(){return this.list}}class fe{constructor(e){if(this.set=new Set,this.map=new Map,e)for(const n of e)this.add(n)}add(e){const n=e.getChild();this.removeChild(n),this.set.add(e),this.map.set(n,e)}remove(e){this.set.delete(e),this.map.delete(e.getChild())}removeChild(e){const n=this.map.get(e)||null;return n&&this.remove(n),n}getRefByChild(e){return this.map.get(e)||null}values(){return Array.from(this.set)}}class st{constructor(e){this.map={},e&&Object.assign(this.map,e)}set(e,n){this.map[e]=n}delete(e){delete this.map[e]}get(e){return this.map[e]||null}keys(){return Object.keys(this.map)}values(){return Object.values(this.map)}}const se=Symbol("attributes"),$t=Symbol("immutableKeys");class Di extends Dl{constructor(e){super(),this._disposed=!1,this.graph=void 0,this[se]=void 0,this[$t]=void 0,this.graph=e,this[$t]=new Set,this[se]=this._createAttributes()}getDefaults(){return{}}_createAttributes(){const e=this.getDefaults(),n={};for(const s in e){const r=e[s];if(r instanceof Di){const i=this.graph._createEdge(s,this,r);this[$t].add(s),n[s]=i}else n[s]=r}return n}isOnGraph(e){return this.graph===e.graph}isDisposed(){return this._disposed}dispose(){this._disposed||(this.graph.listChildEdges(this).forEach(e=>e.dispose()),this.graph.disconnectParents(this),this._disposed=!0,this.dispatchEvent({type:"dispose"}))}detach(){return this.graph.disconnectParents(this),this}swap(e,n){for(const s in this[se]){const r=this[se][s];if(r instanceof hn){const i=r;i.getChild()===e&&this.setRef(s,n,i.getAttributes())}else if(r instanceof _t)for(const i of r.listRefsByChild(e)){const o=i.getAttributes();this.removeRef(s,e),this.addRef(s,n,o)}else if(r instanceof fe){const i=r.getRefByChild(e);if(i){const o=i.getAttributes();this.removeRef(s,e),this.addRef(s,n,o)}}else if(r instanceof st)for(const i of r.keys()){const o=r.get(i);o.getChild()===e&&this.setRefMap(s,i,n,o.getAttributes())}}return this}get(e){return this[se][e]}set(e,n){return this[se][e]=n,this.dispatchEvent({type:"change",attribute:e})}getRef(e){const n=this[se][e];return n?n.getChild():null}setRef(e,n,s){if(this[$t].has(e))throw new Error(`Cannot overwrite immutable attribute, "${e}".`);const r=this[se][e];if(r&&r.dispose(),!n)return this;const i=this.graph._createEdge(e,this,n,s);return this[se][e]=i,this.dispatchEvent({type:"change",attribute:e})}listRefs(e){return this.assertRefList(e).values().map(s=>s.getChild())}addRef(e,n,s){const r=this.graph._createEdge(e,this,n,s);return this.assertRefList(e).add(r),this.dispatchEvent({type:"change",attribute:e})}removeRef(e,n){const s=this.assertRefList(e);if(s instanceof _t)for(const r of s.listRefsByChild(n))r.dispose();else{const r=s.getRefByChild(n);r&&r.dispose()}return this}assertRefList(e){const n=this[se][e];if(n instanceof _t||n instanceof fe)return n;throw new Error(`Expected RefList or RefSet for attribute "${e}"`)}listRefMapKeys(e){return this.assertRefMap(e).keys()}listRefMapValues(e){return this.assertRefMap(e).values().map(n=>n.getChild())}getRefMap(e,n){const r=this.assertRefMap(e).get(n);return r?r.getChild():null}setRefMap(e,n,s,r){const i=this.assertRefMap(e),o=i.get(n);if(o&&o.dispose(),!s)return this;r=Object.assign(r||{},{key:n});const a=this.graph._createEdge(e,this,s,Fn({},r,{key:n}));return i.set(n,a),this.dispatchEvent({type:"change",attribute:e,key:n})}assertRefMap(e){const n=this[se][e];if(n instanceof st)return n;throw new Error(`Expected RefMap for attribute "${e}"`)}dispatchEvent(e){return super.dispatchEvent(Fn({},e,{target:this})),this.graph.dispatchEvent(Fn({},e,{target:this,type:`node:${e.type}`})),this}_destroyRef(e){const n=e.getName();if(this[se][n]===e)this[se][n]=null,this[$t].has(n)&&e.getChild().dispose();else if(this[se][n]instanceof _t)this[se][n].remove(e);else if(this[se][n]instanceof fe)this[se][n].remove(e);else if(this[se][n]instanceof st){const s=this[se][n];for(const r of s.keys())s.get(r)===e&&s.delete(r)}else return;this.graph._destroyEdge(e),this.dispatchEvent({type:"change",attribute:n})}}const Bl="v4.2.1",Qs="@glb.bin";var B;(function(t){t.ACCESSOR="Accessor",t.ANIMATION="Animation",t.ANIMATION_CHANNEL="AnimationChannel",t.ANIMATION_SAMPLER="AnimationSampler",t.BUFFER="Buffer",t.CAMERA="Camera",t.MATERIAL="Material",t.MESH="Mesh",t.PRIMITIVE="Primitive",t.PRIMITIVE_TARGET="PrimitiveTarget",t.NODE="Node",t.ROOT="Root",t.SCENE="Scene",t.SKIN="Skin",t.TEXTURE="Texture",t.TEXTURE_INFO="TextureInfo"})(B||(B={}));var Js;(function(t){t.INTERLEAVED="interleaved",t.SEPARATE="separate"})(Js||(Js={}));var Pe;(function(t){t.ARRAY_BUFFER="ARRAY_BUFFER",t.ELEMENT_ARRAY_BUFFER="ELEMENT_ARRAY_BUFFER",t.INVERSE_BIND_MATRICES="INVERSE_BIND_MATRICES",t.OTHER="OTHER",t.SPARSE="SPARSE"})(Pe||(Pe={}));var di;(function(t){t[t.R=4096]="R",t[t.G=256]="G",t[t.B=16]="B",t[t.A=1]="A"})(di||(di={}));var St;(function(t){t.GLTF="GLTF",t.GLB="GLB"})(St||(St={}));const hr={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};class te{static createBufferFromDataURI(e){if(typeof Buffer>"u"){const n=atob(e.split(",")[1]),s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}else{const n=e.split(",")[1],s=e.indexOf("base64")>=0;return Buffer.from(n,s?"base64":"utf8")}}static encodeText(e){return new TextEncoder().encode(e)}static decodeText(e){return new TextDecoder().decode(e)}static concat(e){let n=0;for(const i of e)n+=i.byteLength;const s=new Uint8Array(n);let r=0;for(const i of e)s.set(i,r),r+=i.byteLength;return s}static pad(e,n=0){const s=this.padNumber(e.byteLength);if(s===e.byteLength)return e;const r=new Uint8Array(s);if(r.set(e),n!==0)for(let i=e.byteLength;i<s;i++)r[i]=n;return r}static padNumber(e){return Math.ceil(e/4)*4}static equals(e,n){if(e===n)return!0;if(e.byteLength!==n.byteLength)return!1;let s=e.byteLength;for(;s--;)if(e[s]!==n[s])return!1;return!0}static toView(e,n=0,s=1/0){return new Uint8Array(e.buffer,e.byteOffset+n,Math.min(e.byteLength,s))}static assertView(e){if(e&&!ArrayBuffer.isView(e))throw new Error(`Method requires Uint8Array parameter; received "${typeof e}".`);return e}}class W1{match(e){return e.length>=3&&e[0]===255&&e[1]===216&&e[2]===255}getSize(e){let n=new DataView(e.buffer,e.byteOffset+4),s,r;for(;n.byteLength;){if(s=n.getUint16(0,!1),X1(n,s),r=n.getUint8(s+1),r===192||r===193||r===194)return[n.getUint16(s+7,!1),n.getUint16(s+5,!1)];n=new DataView(e.buffer,n.byteOffset+s+2)}throw new TypeError("Invalid JPG, no size found")}getChannels(e){return 3}}class dr{match(e){return e.length>=8&&e[0]===137&&e[1]===80&&e[2]===78&&e[3]===71&&e[4]===13&&e[5]===10&&e[6]===26&&e[7]===10}getSize(e){const n=new DataView(e.buffer,e.byteOffset);return te.decodeText(e.slice(12,16))===dr.PNG_FRIED_CHUNK_NAME?[n.getUint32(32,!1),n.getUint32(36,!1)]:[n.getUint32(16,!1),n.getUint32(20,!1)]}getChannels(e){return 4}}dr.PNG_FRIED_CHUNK_NAME="CgBI";class Zt{static registerFormat(e,n){this.impls[e]=n}static getMimeType(e){for(const n in this.impls)if(this.impls[n].match(e))return n;return null}static getSize(e,n){return this.impls[n]?this.impls[n].getSize(e):null}static getChannels(e,n){return this.impls[n]?this.impls[n].getChannels(e):null}static getVRAMByteLength(e,n){if(!this.impls[n])return null;if(this.impls[n].getVRAMByteLength)return this.impls[n].getVRAMByteLength(e);let s=0;const r=4,i=this.getSize(e,n);if(!i)return null;for(;i[0]>1||i[1]>1;)s+=i[0]*i[1]*r,i[0]=Math.max(Math.floor(i[0]/2),1),i[1]=Math.max(Math.floor(i[1]/2),1);return s+=1*r,s}static mimeTypeToExtension(e){return e==="image/jpeg"?"jpg":e.split("/").pop()}static extensionToMimeType(e){return e==="jpg"?"image/jpeg":e?`image/${e}`:""}}Zt.impls={"image/jpeg":new W1,"image/png":new dr};function X1(t,e){if(e>t.byteLength)throw new TypeError("Corrupt JPG, exceeded buffer limits");if(t.getUint8(e)!==255)throw new TypeError("Invalid JPG, marker table corrupted");return t}class An{static basename(e){const n=e.split(/[\\/]/).pop();return n.substring(0,n.lastIndexOf("."))}static extension(e){if(e.startsWith("data:image/")){const n=e.match(/data:(image\/\w+)/)[1];return Zt.mimeTypeToExtension(n)}else{if(e.startsWith("data:model/gltf+json"))return"gltf";if(e.startsWith("data:model/gltf-binary"))return"glb";if(e.startsWith("data:application/"))return"bin"}return e.split(/[\\/]/).pop().split(/[.]/).pop()}}var pi=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function Q1(){var t=new pi(3);return pi!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Pr(t){var e=t[0],n=t[1],s=t[2];return Math.hypot(e,n,s)}(function(){var t=Q1();return function(e,n,s,r,i,o){var a,l;for(n||(n=3),s||(s=0),r?l=Math.min(r*n+s,e.length):l=e.length,a=s;a<l;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],i(t,t,o),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2];return e}})();const Qo="https://null.example";class Dn{static dirname(e){const n=e.lastIndexOf("/");return n===-1?"./":e.substring(0,n+1)}static basename(e){return An.basename(new URL(e,Qo).pathname)}static extension(e){return An.extension(new URL(e,Qo).pathname)}static resolve(e,n){if(!this.isRelativePath(n))return n;const s=e.split("/"),r=n.split("/");s.pop();for(let i=0;i<r.length;i++)r[i]!=="."&&(r[i]===".."?s.pop():s.push(r[i]));return s.join("/")}static isAbsoluteURL(e){return this.PROTOCOL_REGEXP.test(e)}static isRelativePath(e){return!/^(?:[a-zA-Z]+:)?\//.test(e)}}Dn.DEFAULT_INIT={};Dn.PROTOCOL_REGEXP=/^[a-zA-Z]+:\/\//;function Jo(t){return Object.prototype.toString.call(t)==="[object Object]"}function Ft(t){if(Jo(t)===!1)return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(Jo(n)===!1||Object.hasOwn(n,"isPrototypeOf")===!1)}var mi,gi;(function(t){t[t.SILENT=4]="SILENT",t[t.ERROR=3]="ERROR",t[t.WARN=2]="WARN",t[t.INFO=1]="INFO",t[t.DEBUG=0]="DEBUG"})(gi||(gi={}));class Le{constructor(e){this.verbosity=void 0,this.verbosity=e}debug(e){this.verbosity<=Le.Verbosity.DEBUG&&console.debug(e)}info(e){this.verbosity<=Le.Verbosity.INFO&&console.info(e)}warn(e){this.verbosity<=Le.Verbosity.WARN&&console.warn(e)}error(e){this.verbosity<=Le.Verbosity.ERROR&&console.error(e)}}mi=Le;Le.Verbosity=gi;Le.DEFAULT_INSTANCE=new mi(mi.Verbosity.INFO);function J1(t){var e=t[0],n=t[1],s=t[2],r=t[3],i=t[4],o=t[5],a=t[6],l=t[7],c=t[8],u=t[9],f=t[10],h=t[11],p=t[12],b=t[13],g=t[14],w=t[15],m=e*o-n*i,S=e*a-s*i,v=e*l-r*i,_=n*a-s*o,E=n*l-r*o,A=s*l-r*a,y=c*b-u*p,x=c*g-f*p,k=c*w-h*p,T=u*g-f*b,I=u*w-h*b,N=f*w-h*g;return m*N-S*I+v*T+_*k-E*x+A*y}function e0(t,e,n){var s=e[0],r=e[1],i=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],f=e[8],h=e[9],p=e[10],b=e[11],g=e[12],w=e[13],m=e[14],S=e[15],v=n[0],_=n[1],E=n[2],A=n[3];return t[0]=v*s+_*a+E*f+A*g,t[1]=v*r+_*l+E*h+A*w,t[2]=v*i+_*c+E*p+A*m,t[3]=v*o+_*u+E*b+A*S,v=n[4],_=n[5],E=n[6],A=n[7],t[4]=v*s+_*a+E*f+A*g,t[5]=v*r+_*l+E*h+A*w,t[6]=v*i+_*c+E*p+A*m,t[7]=v*o+_*u+E*b+A*S,v=n[8],_=n[9],E=n[10],A=n[11],t[8]=v*s+_*a+E*f+A*g,t[9]=v*r+_*l+E*h+A*w,t[10]=v*i+_*c+E*p+A*m,t[11]=v*o+_*u+E*b+A*S,v=n[12],_=n[13],E=n[14],A=n[15],t[12]=v*s+_*a+E*f+A*g,t[13]=v*r+_*l+E*h+A*w,t[14]=v*i+_*c+E*p+A*m,t[15]=v*o+_*u+E*b+A*S,t}function t0(t,e){var n=e[0],s=e[1],r=e[2],i=e[4],o=e[5],a=e[6],l=e[8],c=e[9],u=e[10];return t[0]=Math.hypot(n,s,r),t[1]=Math.hypot(i,o,a),t[2]=Math.hypot(l,c,u),t}function n0(t,e){var n=new pi(3);t0(n,e);var s=1/n[0],r=1/n[1],i=1/n[2],o=e[0]*s,a=e[1]*r,l=e[2]*i,c=e[4]*s,u=e[5]*r,f=e[6]*i,h=e[8]*s,p=e[9]*r,b=e[10]*i,g=o+u+b,w=0;return g>0?(w=Math.sqrt(g+1)*2,t[3]=.25*w,t[0]=(f-p)/w,t[1]=(h-l)/w,t[2]=(a-c)/w):o>u&&o>b?(w=Math.sqrt(1+o-u-b)*2,t[3]=(f-p)/w,t[0]=.25*w,t[1]=(a+c)/w,t[2]=(h+l)/w):u>b?(w=Math.sqrt(1+u-o-b)*2,t[3]=(h-l)/w,t[0]=(a+c)/w,t[1]=.25*w,t[2]=(f+p)/w):(w=Math.sqrt(1+b-o-u)*2,t[3]=(a-c)/w,t[0]=(h+l)/w,t[1]=(f+p)/w,t[2]=.25*w),t}class de{static identity(e){return e}static eq(e,n,s=1e-5){if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(Math.abs(e[r]-n[r])>s)return!1;return!0}static clamp(e,n,s){return e<n?n:e>s?s:e}static decodeNormalizedInt(e,n){switch(n){case 5126:return e;case 5123:return e/65535;case 5121:return e/255;case 5122:return Math.max(e/32767,-1);case 5120:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}static encodeNormalizedInt(e,n){switch(n){case 5126:return e;case 5123:return Math.round(de.clamp(e,0,1)*65535);case 5121:return Math.round(de.clamp(e,0,1)*255);case 5122:return Math.round(de.clamp(e,-1,1)*32767);case 5120:return Math.round(de.clamp(e,-1,1)*127);default:throw new Error("Invalid component type.")}}static decompose(e,n,s,r){let i=Pr([e[0],e[1],e[2]]);const o=Pr([e[4],e[5],e[6]]),a=Pr([e[8],e[9],e[10]]);J1(e)<0&&(i=-i),n[0]=e[12],n[1]=e[13],n[2]=e[14];const c=e.slice(),u=1/i,f=1/o,h=1/a;c[0]*=u,c[1]*=u,c[2]*=u,c[4]*=f,c[5]*=f,c[6]*=f,c[8]*=h,c[9]*=h,c[10]*=h,n0(s,c),r[0]=i,r[1]=o,r[2]=a}static compose(e,n,s,r){const i=r,o=n[0],a=n[1],l=n[2],c=n[3],u=o+o,f=a+a,h=l+l,p=o*u,b=o*f,g=o*h,w=a*f,m=a*h,S=l*h,v=c*u,_=c*f,E=c*h,A=s[0],y=s[1],x=s[2];return i[0]=(1-(w+S))*A,i[1]=(b+E)*A,i[2]=(g-_)*A,i[3]=0,i[4]=(b-E)*y,i[5]=(1-(p+S))*y,i[6]=(m+v)*y,i[7]=0,i[8]=(g+_)*x,i[9]=(m-v)*x,i[10]=(1-(p+w))*x,i[11]=0,i[12]=e[0],i[13]=e[1],i[14]=e[2],i[15]=1,i}}function s0(t,e){if(!!t!=!!e)return!1;const n=t.getChild(),s=e.getChild();return n===s||n.equals(s)}function r0(t,e){if(!!t!=!!e)return!1;const n=t.values(),s=e.values();if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++){const i=n[r],o=s[r];if(i.getChild()!==o.getChild()&&!i.getChild().equals(o.getChild()))return!1}return!0}function i0(t,e){if(!!t!=!!e)return!1;const n=t.keys(),s=e.keys();if(n.length!==s.length)return!1;for(const r of n){const i=t.get(r),o=e.get(r);if(!!i!=!!o)return!1;const a=i.getChild(),l=o.getChild();if(a!==l&&!a.equals(l))return!1}return!0}function Ul(t,e){if(t===e)return!0;if(!!t!=!!e||!t||!e||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Zl(t,e){if(t===e)return!0;if(!!t!=!!e)return!1;if(!Ft(t)||!Ft(e))return t===e;const n=t,s=e;let r=0,i=0,o;for(o in n)r++;for(o in s)i++;if(r!==i)return!1;for(o in n){const a=n[o],l=s[o];if(er(a)&&er(l)){if(!Ul(a,l))return!1}else if(Ft(a)&&Ft(l)){if(!Zl(a,l))return!1}else if(a!==l)return!1}return!0}function er(t){return Array.isArray(t)||ArrayBuffer.isView(t)}const ea="23456789abdegjkmnpqrvwxyzABDEGJKMNPQRVWXYZ",o0=999,a0=6,ta=new Set,l0=function(){let e="";for(let n=0;n<a0;n++)e+=ea.charAt(Math.floor(Math.random()*ea.length));return e},c0=function(){for(let e=0;e<o0;e++){const n=l0();if(!ta.has(n))return ta.add(n),n}return""},jt=t=>t,u0=new Set;class Bi extends Di{constructor(e,n=""){super(e),this[se].name=n,this.init(),this.dispatchEvent({type:"create"})}getGraph(){return this.graph}getDefaults(){return Object.assign(super.getDefaults(),{name:"",extras:{}})}set(e,n){return Array.isArray(n)&&(n=n.slice()),super.set(e,n)}getName(){return this.get("name")}setName(e){return this.set("name",e)}getExtras(){return this.get("extras")}setExtras(e){return this.set("extras",e)}clone(){const e=this.constructor;return new e(this.graph).copy(this,jt)}copy(e,n=jt){for(const s in this[se]){const r=this[se][s];if(r instanceof hn)this[$t].has(s)||r.dispose();else if(r instanceof _t||r instanceof fe)for(const i of r.values())i.dispose();else if(r instanceof st)for(const i of r.values())i.dispose()}for(const s in e[se]){const r=this[se][s],i=e[se][s];if(i instanceof hn)this[$t].has(s)?r.getChild().copy(n(i.getChild()),n):this.setRef(s,n(i.getChild()),i.getAttributes());else if(i instanceof fe||i instanceof _t)for(const o of i.values())this.addRef(s,n(o.getChild()),o.getAttributes());else if(i instanceof st)for(const o of i.keys()){const a=i.get(o);this.setRefMap(s,o,n(a.getChild()),a.getAttributes())}else Ft(i)?this[se][s]=JSON.parse(JSON.stringify(i)):Array.isArray(i)||i instanceof ArrayBuffer||ArrayBuffer.isView(i)?this[se][s]=i.slice():this[se][s]=i}return this}equals(e,n=u0){if(this===e)return!0;if(this.propertyType!==e.propertyType)return!1;for(const s in this[se]){if(n.has(s))continue;const r=this[se][s],i=e[se][s];if(r instanceof hn||i instanceof hn){if(!s0(r,i))return!1}else if(r instanceof fe||i instanceof fe||r instanceof _t||i instanceof _t){if(!r0(r,i))return!1}else if(r instanceof st||i instanceof st){if(!i0(r,i))return!1}else if(Ft(r)||Ft(i)){if(!Zl(r,i))return!1}else if(er(r)||er(i)){if(!Ul(r,i))return!1}else if(r!==i)return!1}return!0}detach(){return this.graph.disconnectParents(this,e=>e.propertyType!=="Root"),this}listParents(){return this.graph.listParents(this)}}class Ce extends Bi{getDefaults(){return Object.assign(super.getDefaults(),{extensions:new st})}getExtension(e){return this.getRefMap("extensions",e)}setExtension(e,n){return n&&n._validateParent(this),this.setRefMap("extensions",e,n)}listExtensions(){return this.listRefMapValues("extensions")}}class K extends Ce{init(){this.propertyType=B.ACCESSOR}getDefaults(){return Object.assign(super.getDefaults(),{array:null,type:K.Type.SCALAR,componentType:K.ComponentType.FLOAT,normalized:!1,sparse:!1,buffer:null})}static getElementSize(e){switch(e){case K.Type.SCALAR:return 1;case K.Type.VEC2:return 2;case K.Type.VEC3:return 3;case K.Type.VEC4:return 4;case K.Type.MAT2:return 4;case K.Type.MAT3:return 9;case K.Type.MAT4:return 16;default:throw new Error("Unexpected type: "+e)}}static getComponentSize(e){switch(e){case K.ComponentType.BYTE:return 1;case K.ComponentType.UNSIGNED_BYTE:return 1;case K.ComponentType.SHORT:return 2;case K.ComponentType.UNSIGNED_SHORT:return 2;case K.ComponentType.UNSIGNED_INT:return 4;case K.ComponentType.FLOAT:return 4;default:throw new Error("Unexpected component type: "+e)}}getMinNormalized(e){const n=this.getNormalized(),s=this.getElementSize(),r=this.getComponentType();if(this.getMin(e),n)for(let i=0;i<s;i++)e[i]=de.decodeNormalizedInt(e[i],r);return e}getMin(e){const n=this.getArray(),s=this.getCount(),r=this.getElementSize();for(let i=0;i<r;i++)e[i]=1/0;for(let i=0;i<s*r;i+=r)for(let o=0;o<r;o++){const a=n[i+o];Number.isFinite(a)&&(e[o]=Math.min(e[o],a))}return e}getMaxNormalized(e){const n=this.getNormalized(),s=this.getElementSize(),r=this.getComponentType();if(this.getMax(e),n)for(let i=0;i<s;i++)e[i]=de.decodeNormalizedInt(e[i],r);return e}getMax(e){const n=this.get("array"),s=this.getCount(),r=this.getElementSize();for(let i=0;i<r;i++)e[i]=-1/0;for(let i=0;i<s*r;i+=r)for(let o=0;o<r;o++){const a=n[i+o];Number.isFinite(a)&&(e[o]=Math.max(e[o],a))}return e}getCount(){const e=this.get("array");return e?e.length/this.getElementSize():0}getType(){return this.get("type")}setType(e){return this.set("type",e)}getElementSize(){return K.getElementSize(this.get("type"))}getComponentSize(){return this.get("array").BYTES_PER_ELEMENT}getComponentType(){return this.get("componentType")}getNormalized(){return this.get("normalized")}setNormalized(e){return this.set("normalized",e)}getScalar(e){const n=this.getElementSize(),s=this.getComponentType(),r=this.getArray();return this.getNormalized()?de.decodeNormalizedInt(r[e*n],s):r[e*n]}setScalar(e,n){const s=this.getElementSize(),r=this.getComponentType(),i=this.getArray();return this.getNormalized()?i[e*s]=de.encodeNormalizedInt(n,r):i[e*s]=n,this}getElement(e,n){const s=this.getNormalized(),r=this.getElementSize(),i=this.getComponentType(),o=this.getArray();for(let a=0;a<r;a++)s?n[a]=de.decodeNormalizedInt(o[e*r+a],i):n[a]=o[e*r+a];return n}setElement(e,n){const s=this.getNormalized(),r=this.getElementSize(),i=this.getComponentType(),o=this.getArray();for(let a=0;a<r;a++)s?o[e*r+a]=de.encodeNormalizedInt(n[a],i):o[e*r+a]=n[a];return this}getSparse(){return this.get("sparse")}setSparse(e){return this.set("sparse",e)}getBuffer(){return this.getRef("buffer")}setBuffer(e){return this.setRef("buffer",e)}getArray(){return this.get("array")}setArray(e){return this.set("componentType",e?f0(e):K.ComponentType.FLOAT),this.set("array",e),this}getByteLength(){const e=this.get("array");return e?e.byteLength:0}}K.Type={SCALAR:"SCALAR",VEC2:"VEC2",VEC3:"VEC3",VEC4:"VEC4",MAT2:"MAT2",MAT3:"MAT3",MAT4:"MAT4"};K.ComponentType={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125,FLOAT:5126};function f0(t){switch(t.constructor){case Float32Array:return K.ComponentType.FLOAT;case Uint32Array:return K.ComponentType.UNSIGNED_INT;case Uint16Array:return K.ComponentType.UNSIGNED_SHORT;case Uint8Array:return K.ComponentType.UNSIGNED_BYTE;case Int16Array:return K.ComponentType.SHORT;case Int8Array:return K.ComponentType.BYTE;default:throw new Error("Unknown accessor componentType.")}}class Vl extends Ce{init(){this.propertyType=B.ANIMATION}getDefaults(){return Object.assign(super.getDefaults(),{channels:new fe,samplers:new fe})}addChannel(e){return this.addRef("channels",e)}removeChannel(e){return this.removeRef("channels",e)}listChannels(){return this.listRefs("channels")}addSampler(e){return this.addRef("samplers",e)}removeSampler(e){return this.removeRef("samplers",e)}listSamplers(){return this.listRefs("samplers")}}class Kl extends Ce{init(){this.propertyType=B.ANIMATION_CHANNEL}getDefaults(){return Object.assign(super.getDefaults(),{targetPath:null,targetNode:null,sampler:null})}getTargetPath(){return this.get("targetPath")}setTargetPath(e){return this.set("targetPath",e)}getTargetNode(){return this.getRef("targetNode")}setTargetNode(e){return this.setRef("targetNode",e)}getSampler(){return this.getRef("sampler")}setSampler(e){return this.setRef("sampler",e)}}Kl.TargetPath={TRANSLATION:"translation",ROTATION:"rotation",SCALE:"scale",WEIGHTS:"weights"};class ns extends Ce{init(){this.propertyType=B.ANIMATION_SAMPLER}getDefaultAttributes(){return Object.assign(super.getDefaults(),{interpolation:ns.Interpolation.LINEAR,input:null,output:null})}getInterpolation(){return this.get("interpolation")}setInterpolation(e){return this.set("interpolation",e)}getInput(){return this.getRef("input")}setInput(e){return this.setRef("input",e,{usage:Pe.OTHER})}getOutput(){return this.getRef("output")}setOutput(e){return this.setRef("output",e,{usage:Pe.OTHER})}}ns.Interpolation={LINEAR:"LINEAR",STEP:"STEP",CUBICSPLINE:"CUBICSPLINE"};class Gl extends Ce{init(){this.propertyType=B.BUFFER}getDefaults(){return Object.assign(super.getDefaults(),{uri:""})}getURI(){return this.get("uri")}setURI(e){return this.set("uri",e)}}class Wt extends Ce{init(){this.propertyType=B.CAMERA}getDefaults(){return Object.assign(super.getDefaults(),{type:Wt.Type.PERSPECTIVE,znear:.1,zfar:100,aspectRatio:null,yfov:Math.PI*2*50/360,xmag:1,ymag:1})}getType(){return this.get("type")}setType(e){return this.set("type",e)}getZNear(){return this.get("znear")}setZNear(e){return this.set("znear",e)}getZFar(){return this.get("zfar")}setZFar(e){return this.set("zfar",e)}getAspectRatio(){return this.get("aspectRatio")}setAspectRatio(e){return this.set("aspectRatio",e)}getYFov(){return this.get("yfov")}setYFov(e){return this.set("yfov",e)}getXMag(){return this.get("xmag")}setXMag(e){return this.set("xmag",e)}getYMag(){return this.get("ymag")}setYMag(e){return this.set("ymag",e)}}Wt.Type={PERSPECTIVE:"perspective",ORTHOGRAPHIC:"orthographic"};class h0 extends Bi{_validateParent(e){if(!this.parentTypes.includes(e.propertyType))throw new Error(`Parent "${e.propertyType}" invalid for child "${this.propertyType}".`)}}h0.EXTENSION_NAME=void 0;class Qe extends Ce{init(){this.propertyType=B.TEXTURE_INFO}getDefaults(){return Object.assign(super.getDefaults(),{texCoord:0,magFilter:null,minFilter:null,wrapS:Qe.WrapMode.REPEAT,wrapT:Qe.WrapMode.REPEAT})}getTexCoord(){return this.get("texCoord")}setTexCoord(e){return this.set("texCoord",e)}getMagFilter(){return this.get("magFilter")}setMagFilter(e){return this.set("magFilter",e)}getMinFilter(){return this.get("minFilter")}setMinFilter(e){return this.set("minFilter",e)}getWrapS(){return this.get("wrapS")}setWrapS(e){return this.set("wrapS",e)}getWrapT(){return this.get("wrapT")}setWrapT(e){return this.set("wrapT",e)}}Qe.WrapMode={CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497};Qe.MagFilter={NEAREST:9728,LINEAR:9729};Qe.MinFilter={NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987};const{R:Es,G:Ss,B:ks,A:d0}=di;class Gt extends Ce{init(){this.propertyType=B.MATERIAL}getDefaults(){return Object.assign(super.getDefaults(),{alphaMode:Gt.AlphaMode.OPAQUE,alphaCutoff:.5,doubleSided:!1,baseColorFactor:[1,1,1,1],baseColorTexture:null,baseColorTextureInfo:new Qe(this.graph,"baseColorTextureInfo"),emissiveFactor:[0,0,0],emissiveTexture:null,emissiveTextureInfo:new Qe(this.graph,"emissiveTextureInfo"),normalScale:1,normalTexture:null,normalTextureInfo:new Qe(this.graph,"normalTextureInfo"),occlusionStrength:1,occlusionTexture:null,occlusionTextureInfo:new Qe(this.graph,"occlusionTextureInfo"),roughnessFactor:1,metallicFactor:1,metallicRoughnessTexture:null,metallicRoughnessTextureInfo:new Qe(this.graph,"metallicRoughnessTextureInfo")})}getDoubleSided(){return this.get("doubleSided")}setDoubleSided(e){return this.set("doubleSided",e)}getAlpha(){return this.get("baseColorFactor")[3]}setAlpha(e){const n=this.get("baseColorFactor").slice();return n[3]=e,this.set("baseColorFactor",n)}getAlphaMode(){return this.get("alphaMode")}setAlphaMode(e){return this.set("alphaMode",e)}getAlphaCutoff(){return this.get("alphaCutoff")}setAlphaCutoff(e){return this.set("alphaCutoff",e)}getBaseColorFactor(){return this.get("baseColorFactor")}setBaseColorFactor(e){return this.set("baseColorFactor",e)}getBaseColorTexture(){return this.getRef("baseColorTexture")}getBaseColorTextureInfo(){return this.getRef("baseColorTexture")?this.getRef("baseColorTextureInfo"):null}setBaseColorTexture(e){return this.setRef("baseColorTexture",e,{channels:Es|Ss|ks|d0,isColor:!0})}getEmissiveFactor(){return this.get("emissiveFactor")}setEmissiveFactor(e){return this.set("emissiveFactor",e)}getEmissiveTexture(){return this.getRef("emissiveTexture")}getEmissiveTextureInfo(){return this.getRef("emissiveTexture")?this.getRef("emissiveTextureInfo"):null}setEmissiveTexture(e){return this.setRef("emissiveTexture",e,{channels:Es|Ss|ks,isColor:!0})}getNormalScale(){return this.get("normalScale")}setNormalScale(e){return this.set("normalScale",e)}getNormalTexture(){return this.getRef("normalTexture")}getNormalTextureInfo(){return this.getRef("normalTexture")?this.getRef("normalTextureInfo"):null}setNormalTexture(e){return this.setRef("normalTexture",e,{channels:Es|Ss|ks})}getOcclusionStrength(){return this.get("occlusionStrength")}setOcclusionStrength(e){return this.set("occlusionStrength",e)}getOcclusionTexture(){return this.getRef("occlusionTexture")}getOcclusionTextureInfo(){return this.getRef("occlusionTexture")?this.getRef("occlusionTextureInfo"):null}setOcclusionTexture(e){return this.setRef("occlusionTexture",e,{channels:Es})}getRoughnessFactor(){return this.get("roughnessFactor")}setRoughnessFactor(e){return this.set("roughnessFactor",e)}getMetallicFactor(){return this.get("metallicFactor")}setMetallicFactor(e){return this.set("metallicFactor",e)}getMetallicRoughnessTexture(){return this.getRef("metallicRoughnessTexture")}getMetallicRoughnessTextureInfo(){return this.getRef("metallicRoughnessTexture")?this.getRef("metallicRoughnessTextureInfo"):null}setMetallicRoughnessTexture(e){return this.setRef("metallicRoughnessTexture",e,{channels:Ss|ks})}}Gt.AlphaMode={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};class ql extends Ce{init(){this.propertyType=B.MESH}getDefaults(){return Object.assign(super.getDefaults(),{weights:[],primitives:new fe})}addPrimitive(e){return this.addRef("primitives",e)}removePrimitive(e){return this.removeRef("primitives",e)}listPrimitives(){return this.listRefs("primitives")}getWeights(){return this.get("weights")}setWeights(e){return this.set("weights",e)}}class Yl extends Ce{init(){this.propertyType=B.NODE}getDefaults(){return Object.assign(super.getDefaults(),{translation:[0,0,0],rotation:[0,0,0,1],scale:[1,1,1],weights:[],camera:null,mesh:null,skin:null,children:new fe})}copy(e,n=jt){if(n===jt)throw new Error("Node cannot be copied.");return super.copy(e,n)}getTranslation(){return this.get("translation")}getRotation(){return this.get("rotation")}getScale(){return this.get("scale")}setTranslation(e){return this.set("translation",e)}setRotation(e){return this.set("rotation",e)}setScale(e){return this.set("scale",e)}getMatrix(){return de.compose(this.get("translation"),this.get("rotation"),this.get("scale"),[])}setMatrix(e){const n=this.get("translation").slice(),s=this.get("rotation").slice(),r=this.get("scale").slice();return de.decompose(e,n,s,r),this.set("translation",n).set("rotation",s).set("scale",r)}getWorldTranslation(){const e=[0,0,0];return de.decompose(this.getWorldMatrix(),e,[0,0,0,1],[1,1,1]),e}getWorldRotation(){const e=[0,0,0,1];return de.decompose(this.getWorldMatrix(),[0,0,0],e,[1,1,1]),e}getWorldScale(){const e=[1,1,1];return de.decompose(this.getWorldMatrix(),[0,0,0],[0,0,0,1],e),e}getWorldMatrix(){const e=[];for(let r=this;r!=null;r=r.getParentNode())e.push(r);let n;const s=e.pop().getMatrix();for(;n=e.pop();)e0(s,s,n.getMatrix());return s}addChild(e){const n=e.getParentNode();n&&n.removeChild(e);for(const s of e.listParents())s.propertyType===B.SCENE&&s.removeChild(e);return this.addRef("children",e)}removeChild(e){return this.removeRef("children",e)}listChildren(){return this.listRefs("children")}getParentNode(){for(const e of this.listParents())if(e.propertyType===B.NODE)return e;return null}getMesh(){return this.getRef("mesh")}setMesh(e){return this.setRef("mesh",e)}getCamera(){return this.getRef("camera")}setCamera(e){return this.setRef("camera",e)}getSkin(){return this.getRef("skin")}setSkin(e){return this.setRef("skin",e)}getWeights(){return this.get("weights")}setWeights(e){return this.set("weights",e)}traverse(e){e(this);for(const n of this.listChildren())n.traverse(e);return this}}class pr extends Ce{init(){this.propertyType=B.PRIMITIVE}getDefaults(){return Object.assign(super.getDefaults(),{mode:pr.Mode.TRIANGLES,material:null,indices:null,attributes:new st,targets:new fe})}getIndices(){return this.getRef("indices")}setIndices(e){return this.setRef("indices",e,{usage:Pe.ELEMENT_ARRAY_BUFFER})}getAttribute(e){return this.getRefMap("attributes",e)}setAttribute(e,n){return this.setRefMap("attributes",e,n,{usage:Pe.ARRAY_BUFFER})}listAttributes(){return this.listRefMapValues("attributes")}listSemantics(){return this.listRefMapKeys("attributes")}getMaterial(){return this.getRef("material")}setMaterial(e){return this.setRef("material",e)}getMode(){return this.get("mode")}setMode(e){return this.set("mode",e)}listTargets(){return this.listRefs("targets")}addTarget(e){return this.addRef("targets",e)}removeTarget(e){return this.removeRef("targets",e)}}pr.Mode={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class p0 extends Bi{init(){this.propertyType=B.PRIMITIVE_TARGET}getDefaults(){return Object.assign(super.getDefaults(),{attributes:new st})}getAttribute(e){return this.getRefMap("attributes",e)}setAttribute(e,n){return this.setRefMap("attributes",e,n,{usage:Pe.ARRAY_BUFFER})}listAttributes(){return this.listRefMapValues("attributes")}listSemantics(){return this.listRefMapKeys("attributes")}}function Oe(){return Oe=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Oe.apply(null,arguments)}class Hl extends Ce{init(){this.propertyType=B.SCENE}getDefaults(){return Object.assign(super.getDefaults(),{children:new fe})}copy(e,n=jt){if(n===jt)throw new Error("Scene cannot be copied.");return super.copy(e,n)}addChild(e){const n=e.getParentNode();return n&&n.removeChild(e),this.addRef("children",e)}removeChild(e){return this.removeRef("children",e)}listChildren(){return this.listRefs("children")}traverse(e){for(const n of this.listChildren())n.traverse(e);return this}}class Wl extends Ce{init(){this.propertyType=B.SKIN}getDefaults(){return Object.assign(super.getDefaults(),{skeleton:null,inverseBindMatrices:null,joints:new fe})}getSkeleton(){return this.getRef("skeleton")}setSkeleton(e){return this.setRef("skeleton",e)}getInverseBindMatrices(){return this.getRef("inverseBindMatrices")}setInverseBindMatrices(e){return this.setRef("inverseBindMatrices",e,{usage:Pe.INVERSE_BIND_MATRICES})}addJoint(e){return this.addRef("joints",e)}removeJoint(e){return this.removeRef("joints",e)}listJoints(){return this.listRefs("joints")}}class Xl extends Ce{init(){this.propertyType=B.TEXTURE}getDefaults(){return Object.assign(super.getDefaults(),{image:null,mimeType:"",uri:""})}getMimeType(){return this.get("mimeType")||Zt.extensionToMimeType(An.extension(this.get("uri")))}setMimeType(e){return this.set("mimeType",e)}getURI(){return this.get("uri")}setURI(e){this.set("uri",e);const n=Zt.extensionToMimeType(An.extension(e));return n&&this.set("mimeType",n),this}getImage(){return this.get("image")}setImage(e){return this.set("image",te.assertView(e))}getSize(){const e=this.get("image");return e?Zt.getSize(e,this.getMimeType()):null}}class m0 extends Ce{init(){this.propertyType=B.ROOT}getDefaults(){return Object.assign(super.getDefaults(),{asset:{generator:`glTF-Transform ${Bl}`,version:"2.0"},defaultScene:null,accessors:new fe,animations:new fe,buffers:new fe,cameras:new fe,materials:new fe,meshes:new fe,nodes:new fe,scenes:new fe,skins:new fe,textures:new fe})}constructor(e){super(e),this._extensions=new Set,e.addEventListener("node:create",n=>{this._addChildOfRoot(n.target)})}clone(){throw new Error("Root cannot be cloned.")}copy(e,n=jt){if(n===jt)throw new Error("Root cannot be copied.");this.set("asset",Oe({},e.get("asset"))),this.setName(e.getName()),this.setExtras(Oe({},e.getExtras())),this.setDefaultScene(e.getDefaultScene()?n(e.getDefaultScene()):null);for(const s of e.listRefMapKeys("extensions")){const r=e.getExtension(s);this.setExtension(s,n(r))}return this}_addChildOfRoot(e){return e instanceof Hl?this.addRef("scenes",e):e instanceof Yl?this.addRef("nodes",e):e instanceof Wt?this.addRef("cameras",e):e instanceof Wl?this.addRef("skins",e):e instanceof ql?this.addRef("meshes",e):e instanceof Gt?this.addRef("materials",e):e instanceof Xl?this.addRef("textures",e):e instanceof Vl?this.addRef("animations",e):e instanceof K?this.addRef("accessors",e):e instanceof Gl&&this.addRef("buffers",e),this}getAsset(){return this.get("asset")}listExtensionsUsed(){return Array.from(this._extensions)}listExtensionsRequired(){return this.listExtensionsUsed().filter(e=>e.isRequired())}_enableExtension(e){return this._extensions.add(e),this}_disableExtension(e){return this._extensions.delete(e),this}listScenes(){return this.listRefs("scenes")}setDefaultScene(e){return this.setRef("defaultScene",e)}getDefaultScene(){return this.getRef("defaultScene")}listNodes(){return this.listRefs("nodes")}listCameras(){return this.listRefs("cameras")}listSkins(){return this.listRefs("skins")}listMeshes(){return this.listRefs("meshes")}listMaterials(){return this.listRefs("materials")}listTextures(){return this.listRefs("textures")}listAnimations(){return this.listRefs("animations")}listAccessors(){return this.listRefs("accessors")}listBuffers(){return this.listRefs("buffers")}}let Ql=class yi{static fromGraph(e){return yi._GRAPH_DOCUMENTS.get(e)||null}constructor(){this._graph=new H1,this._root=new m0(this._graph),this._logger=Le.DEFAULT_INSTANCE,yi._GRAPH_DOCUMENTS.set(this._graph,this)}getRoot(){return this._root}getGraph(){return this._graph}getLogger(){return this._logger}setLogger(e){return this._logger=e,this}clone(){throw new Error("Use 'cloneDocument(source)' from '@gltf-transform/functions'.")}merge(e){throw new Error("Use 'mergeDocuments(target, source)' from '@gltf-transform/functions'.")}async transform(...e){const n=e.map(s=>s.name);for(const s of e)await s(this,{stack:n});return this}createExtension(e){const n=e.EXTENSION_NAME;return this.getRoot().listExtensionsUsed().find(r=>r.extensionName===n)||new e(this)}createScene(e=""){return new Hl(this._graph,e)}createNode(e=""){return new Yl(this._graph,e)}createCamera(e=""){return new Wt(this._graph,e)}createSkin(e=""){return new Wl(this._graph,e)}createMesh(e=""){return new ql(this._graph,e)}createPrimitive(){return new pr(this._graph)}createPrimitiveTarget(e=""){return new p0(this._graph,e)}createMaterial(e=""){return new Gt(this._graph,e)}createTexture(e=""){return new Xl(this._graph,e)}createAnimation(e=""){return new Vl(this._graph,e)}createAnimationChannel(e=""){return new Kl(this._graph,e)}createAnimationSampler(e=""){return new ns(this._graph,e)}createAccessor(e="",n=null){return n||(n=this.getRoot().listBuffers()[0]),new K(this._graph,e).setBuffer(n)}createBuffer(e=""){return new Gl(this._graph,e)}};Ql._GRAPH_DOCUMENTS=new WeakMap;class g0{constructor(e){this.jsonDoc=void 0,this.buffers=[],this.bufferViews=[],this.bufferViewBuffers=[],this.accessors=[],this.textures=[],this.textureInfos=new Map,this.materials=[],this.meshes=[],this.cameras=[],this.nodes=[],this.skins=[],this.animations=[],this.scenes=[],this.jsonDoc=e}setTextureInfo(e,n){this.textureInfos.set(e,n),n.texCoord!==void 0&&e.setTexCoord(n.texCoord),n.extras!==void 0&&e.setExtras(n.extras);const s=this.jsonDoc.json.textures[n.index];if(s.sampler===void 0)return;const r=this.jsonDoc.json.samplers[s.sampler];r.magFilter!==void 0&&e.setMagFilter(r.magFilter),r.minFilter!==void 0&&e.setMinFilter(r.minFilter),r.wrapS!==void 0&&e.setWrapS(r.wrapS),r.wrapT!==void 0&&e.setWrapT(r.wrapT)}}const na={logger:Le.DEFAULT_INSTANCE,extensions:[],dependencies:{}},y0=new Set([B.BUFFER,B.TEXTURE,B.MATERIAL,B.MESH,B.PRIMITIVE,B.NODE,B.SCENE]);class b0{static read(e,n=na){const s=Oe({},na,n),{json:r}=e,i=new Ql().setLogger(s.logger);this.validate(e,s);const o=new g0(e),a=r.asset,l=i.getRoot().getAsset();a.copyright&&(l.copyright=a.copyright),a.extras&&(l.extras=a.extras),r.extras!==void 0&&i.getRoot().setExtras(Oe({},r.extras));const c=r.extensionsUsed||[],u=r.extensionsRequired||[];s.extensions.sort((y,x)=>y.EXTENSION_NAME>x.EXTENSION_NAME?1:-1);for(const y of s.extensions)if(c.includes(y.EXTENSION_NAME)){const x=i.createExtension(y).setRequired(u.includes(y.EXTENSION_NAME)),k=x.prereadTypes.filter(T=>!y0.has(T));k.length&&s.logger.warn(`Preread hooks for some types (${k.join()}), requested by extension ${x.extensionName}, are unsupported. Please file an issue or a PR.`);for(const T of x.readDependencies)x.install(T,s.dependencies[T])}const f=r.buffers||[];i.getRoot().listExtensionsUsed().filter(y=>y.prereadTypes.includes(B.BUFFER)).forEach(y=>y.preread(o,B.BUFFER)),o.buffers=f.map(y=>{const x=i.createBuffer(y.name);return y.extras&&x.setExtras(y.extras),y.uri&&y.uri.indexOf("__")!==0&&x.setURI(y.uri),x});const h=r.bufferViews||[];o.bufferViewBuffers=h.map((y,x)=>{if(!o.bufferViews[x]){const k=e.json.buffers[y.buffer],T=k.uri?e.resources[k.uri]:e.resources[Qs],I=y.byteOffset||0;o.bufferViews[x]=te.toView(T,I,y.byteLength)}return o.buffers[y.buffer]});const p=r.accessors||[];o.accessors=p.map(y=>{const x=o.bufferViewBuffers[y.bufferView],k=i.createAccessor(y.name,x).setType(y.type);return y.extras&&k.setExtras(y.extras),y.normalized!==void 0&&k.setNormalized(y.normalized),y.bufferView===void 0||k.setArray(Ds(y,o)),k});const b=r.images||[],g=r.textures||[];i.getRoot().listExtensionsUsed().filter(y=>y.prereadTypes.includes(B.TEXTURE)).forEach(y=>y.preread(o,B.TEXTURE)),o.textures=b.map(y=>{const x=i.createTexture(y.name);if(y.extras&&x.setExtras(y.extras),y.bufferView!==void 0){const k=r.bufferViews[y.bufferView],T=e.json.buffers[k.buffer],I=T.uri?e.resources[T.uri]:e.resources[Qs],N=k.byteOffset||0,j=k.byteLength,R=I.slice(N,N+j);x.setImage(R)}else y.uri!==void 0&&(x.setImage(e.resources[y.uri]),y.uri.indexOf("__")!==0&&x.setURI(y.uri));if(y.mimeType!==void 0)x.setMimeType(y.mimeType);else if(y.uri){const k=An.extension(y.uri);x.setMimeType(Zt.extensionToMimeType(k))}return x}),i.getRoot().listExtensionsUsed().filter(y=>y.prereadTypes.includes(B.MATERIAL)).forEach(y=>y.preread(o,B.MATERIAL));const w=r.materials||[];o.materials=w.map(y=>{const x=i.createMaterial(y.name);y.extras&&x.setExtras(y.extras),y.alphaMode!==void 0&&x.setAlphaMode(y.alphaMode),y.alphaCutoff!==void 0&&x.setAlphaCutoff(y.alphaCutoff),y.doubleSided!==void 0&&x.setDoubleSided(y.doubleSided);const k=y.pbrMetallicRoughness||{};if(k.baseColorFactor!==void 0&&x.setBaseColorFactor(k.baseColorFactor),y.emissiveFactor!==void 0&&x.setEmissiveFactor(y.emissiveFactor),k.metallicFactor!==void 0&&x.setMetallicFactor(k.metallicFactor),k.roughnessFactor!==void 0&&x.setRoughnessFactor(k.roughnessFactor),k.baseColorTexture!==void 0){const T=k.baseColorTexture,I=o.textures[g[T.index].source];x.setBaseColorTexture(I),o.setTextureInfo(x.getBaseColorTextureInfo(),T)}if(y.emissiveTexture!==void 0){const T=y.emissiveTexture,I=o.textures[g[T.index].source];x.setEmissiveTexture(I),o.setTextureInfo(x.getEmissiveTextureInfo(),T)}if(y.normalTexture!==void 0){const T=y.normalTexture,I=o.textures[g[T.index].source];x.setNormalTexture(I),o.setTextureInfo(x.getNormalTextureInfo(),T),y.normalTexture.scale!==void 0&&x.setNormalScale(y.normalTexture.scale)}if(y.occlusionTexture!==void 0){const T=y.occlusionTexture,I=o.textures[g[T.index].source];x.setOcclusionTexture(I),o.setTextureInfo(x.getOcclusionTextureInfo(),T),y.occlusionTexture.strength!==void 0&&x.setOcclusionStrength(y.occlusionTexture.strength)}if(k.metallicRoughnessTexture!==void 0){const T=k.metallicRoughnessTexture,I=o.textures[g[T.index].source];x.setMetallicRoughnessTexture(I),o.setTextureInfo(x.getMetallicRoughnessTextureInfo(),T)}return x}),i.getRoot().listExtensionsUsed().filter(y=>y.prereadTypes.includes(B.MESH)).forEach(y=>y.preread(o,B.MESH));const m=r.meshes||[];i.getRoot().listExtensionsUsed().filter(y=>y.prereadTypes.includes(B.PRIMITIVE)).forEach(y=>y.preread(o,B.PRIMITIVE)),o.meshes=m.map(y=>{const x=i.createMesh(y.name);return y.extras&&x.setExtras(y.extras),y.weights!==void 0&&x.setWeights(y.weights),(y.primitives||[]).forEach(T=>{const I=i.createPrimitive();T.extras&&I.setExtras(T.extras),T.material!==void 0&&I.setMaterial(o.materials[T.material]),T.mode!==void 0&&I.setMode(T.mode);for(const[R,M]of Object.entries(T.attributes||{}))I.setAttribute(R,o.accessors[M]);T.indices!==void 0&&I.setIndices(o.accessors[T.indices]);const N=y.extras&&y.extras.targetNames||[];(T.targets||[]).forEach((R,M)=>{const P=N[M]||M.toString(),L=i.createPrimitiveTarget(P);for(const[Z,F]of Object.entries(R))L.setAttribute(Z,o.accessors[F]);I.addTarget(L)}),x.addPrimitive(I)}),x});const S=r.cameras||[];o.cameras=S.map(y=>{const x=i.createCamera(y.name).setType(y.type);if(y.extras&&x.setExtras(y.extras),y.type===Wt.Type.PERSPECTIVE){const k=y.perspective;x.setYFov(k.yfov),x.setZNear(k.znear),k.zfar!==void 0&&x.setZFar(k.zfar),k.aspectRatio!==void 0&&x.setAspectRatio(k.aspectRatio)}else{const k=y.orthographic;x.setZNear(k.znear).setZFar(k.zfar).setXMag(k.xmag).setYMag(k.ymag)}return x});const v=r.nodes||[];i.getRoot().listExtensionsUsed().filter(y=>y.prereadTypes.includes(B.NODE)).forEach(y=>y.preread(o,B.NODE)),o.nodes=v.map(y=>{const x=i.createNode(y.name);if(y.extras&&x.setExtras(y.extras),y.translation!==void 0&&x.setTranslation(y.translation),y.rotation!==void 0&&x.setRotation(y.rotation),y.scale!==void 0&&x.setScale(y.scale),y.matrix!==void 0){const k=[0,0,0],T=[0,0,0,1],I=[1,1,1];de.decompose(y.matrix,k,T,I),x.setTranslation(k),x.setRotation(T),x.setScale(I)}return y.weights!==void 0&&x.setWeights(y.weights),x});const _=r.skins||[];o.skins=_.map(y=>{const x=i.createSkin(y.name);y.extras&&x.setExtras(y.extras),y.inverseBindMatrices!==void 0&&x.setInverseBindMatrices(o.accessors[y.inverseBindMatrices]),y.skeleton!==void 0&&x.setSkeleton(o.nodes[y.skeleton]);for(const k of y.joints)x.addJoint(o.nodes[k]);return x}),v.map((y,x)=>{const k=o.nodes[x];(y.children||[]).forEach(I=>k.addChild(o.nodes[I])),y.mesh!==void 0&&k.setMesh(o.meshes[y.mesh]),y.camera!==void 0&&k.setCamera(o.cameras[y.camera]),y.skin!==void 0&&k.setSkin(o.skins[y.skin])});const E=r.animations||[];o.animations=E.map(y=>{const x=i.createAnimation(y.name);y.extras&&x.setExtras(y.extras);const T=(y.samplers||[]).map(N=>{const j=i.createAnimationSampler().setInput(o.accessors[N.input]).setOutput(o.accessors[N.output]).setInterpolation(N.interpolation||ns.Interpolation.LINEAR);return N.extras&&j.setExtras(N.extras),x.addSampler(j),j});return(y.channels||[]).forEach(N=>{const j=i.createAnimationChannel().setSampler(T[N.sampler]).setTargetPath(N.target.path);N.target.node!==void 0&&j.setTargetNode(o.nodes[N.target.node]),N.extras&&j.setExtras(N.extras),x.addChannel(j)}),x});const A=r.scenes||[];return i.getRoot().listExtensionsUsed().filter(y=>y.prereadTypes.includes(B.SCENE)).forEach(y=>y.preread(o,B.SCENE)),o.scenes=A.map(y=>{const x=i.createScene(y.name);return y.extras&&x.setExtras(y.extras),(y.nodes||[]).map(T=>o.nodes[T]).forEach(T=>x.addChild(T)),x}),r.scene!==void 0&&i.getRoot().setDefaultScene(o.scenes[r.scene]),i.getRoot().listExtensionsUsed().forEach(y=>y.read(o)),p.forEach((y,x)=>{const k=o.accessors[x],T=!!y.sparse,I=!y.bufferView&&!k.getArray();(T||I)&&k.setSparse(!0).setArray(v0(y,o))}),i}static validate(e,n){const s=e.json;if(s.asset.version!=="2.0")throw new Error(`Unsupported glTF version, "${s.asset.version}".`);if(s.extensionsRequired){for(const r of s.extensionsRequired)if(!n.extensions.find(i=>i.EXTENSION_NAME===r))throw new Error(`Missing required extension, "${r}".`)}if(s.extensionsUsed)for(const r of s.extensionsUsed)n.extensions.find(i=>i.EXTENSION_NAME===r)||n.logger.warn(`Missing optional extension, "${r}".`)}}function w0(t,e){const n=e.jsonDoc,s=e.bufferViews[t.bufferView],r=n.json.bufferViews[t.bufferView],i=hr[t.componentType],o=K.getElementSize(t.type),a=i.BYTES_PER_ELEMENT,l=t.byteOffset||0,c=new i(t.count*o),u=new DataView(s.buffer,s.byteOffset,s.byteLength),f=r.byteStride;for(let h=0;h<t.count;h++)for(let p=0;p<o;p++){const b=l+h*f+p*a;let g;switch(t.componentType){case K.ComponentType.FLOAT:g=u.getFloat32(b,!0);break;case K.ComponentType.UNSIGNED_INT:g=u.getUint32(b,!0);break;case K.ComponentType.UNSIGNED_SHORT:g=u.getUint16(b,!0);break;case K.ComponentType.UNSIGNED_BYTE:g=u.getUint8(b);break;case K.ComponentType.SHORT:g=u.getInt16(b,!0);break;case K.ComponentType.BYTE:g=u.getInt8(b);break;default:throw new Error(`Unexpected componentType "${t.componentType}".`)}c[h*o+p]=g}return c}function Ds(t,e){const n=e.jsonDoc,s=e.bufferViews[t.bufferView],r=n.json.bufferViews[t.bufferView],i=hr[t.componentType],o=K.getElementSize(t.type),a=i.BYTES_PER_ELEMENT,l=o*a;if(r.byteStride!==void 0&&r.byteStride!==l)return w0(t,e);const c=s.byteOffset+(t.byteOffset||0),u=t.count*o*a;return new i(s.buffer.slice(c,c+u))}function v0(t,e){const n=hr[t.componentType],s=K.getElementSize(t.type);let r;t.bufferView!==void 0?r=Ds(t,e):r=new n(t.count*s);const i=t.sparse;if(!i)return r;const o=i.count,a=Oe({},t,i.indices,{count:o,type:"SCALAR"}),l=Oe({},t,i.values,{count:o}),c=Ds(a,e),u=Ds(l,e);for(let f=0;f<a.count;f++)for(let h=0;h<s;h++)r[c[f]*s+h]=u[f*s+h];return r}var Hn;(function(t){t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER"})(Hn||(Hn={}));class Vt{constructor(e,n,s){this._doc=void 0,this.jsonDoc=void 0,this.options=void 0,this.accessorIndexMap=new Map,this.animationIndexMap=new Map,this.bufferIndexMap=new Map,this.cameraIndexMap=new Map,this.skinIndexMap=new Map,this.materialIndexMap=new Map,this.meshIndexMap=new Map,this.nodeIndexMap=new Map,this.imageIndexMap=new Map,this.textureDefIndexMap=new Map,this.textureInfoDefMap=new Map,this.samplerDefIndexMap=new Map,this.sceneIndexMap=new Map,this.imageBufferViews=[],this.otherBufferViews=new Map,this.otherBufferViewsIndexMap=new Map,this.extensionData={},this.bufferURIGenerator=void 0,this.imageURIGenerator=void 0,this.logger=void 0,this._accessorUsageMap=new Map,this.accessorUsageGroupedByParent=new Set(["ARRAY_BUFFER"]),this.accessorParents=new Map,this._doc=e,this.jsonDoc=n,this.options=s;const r=e.getRoot(),i=r.listBuffers().length,o=r.listTextures().length;this.bufferURIGenerator=new sa(i>1,()=>s.basename||"buffer"),this.imageURIGenerator=new sa(o>1,a=>x0(e,a)||s.basename||"texture"),this.logger=e.getLogger()}createTextureInfoDef(e,n){const s={magFilter:n.getMagFilter()||void 0,minFilter:n.getMinFilter()||void 0,wrapS:n.getWrapS(),wrapT:n.getWrapT()},r=JSON.stringify(s);this.samplerDefIndexMap.has(r)||(this.samplerDefIndexMap.set(r,this.jsonDoc.json.samplers.length),this.jsonDoc.json.samplers.push(s));const i={source:this.imageIndexMap.get(e),sampler:this.samplerDefIndexMap.get(r)},o=JSON.stringify(i);this.textureDefIndexMap.has(o)||(this.textureDefIndexMap.set(o,this.jsonDoc.json.textures.length),this.jsonDoc.json.textures.push(i));const a={index:this.textureDefIndexMap.get(o)};return n.getTexCoord()!==0&&(a.texCoord=n.getTexCoord()),Object.keys(n.getExtras()).length>0&&(a.extras=n.getExtras()),this.textureInfoDefMap.set(n,a),a}createPropertyDef(e){const n={};return e.getName()&&(n.name=e.getName()),Object.keys(e.getExtras()).length>0&&(n.extras=e.getExtras()),n}createAccessorDef(e){const n=this.createPropertyDef(e);return n.type=e.getType(),n.componentType=e.getComponentType(),n.count=e.getCount(),this._doc.getGraph().listParentEdges(e).some(r=>r.getName()==="attributes"&&r.getAttributes().key==="POSITION"||r.getName()==="input")&&(n.max=e.getMax([]).map(Math.fround),n.min=e.getMin([]).map(Math.fround)),e.getNormalized()&&(n.normalized=e.getNormalized()),n}createImageData(e,n,s){if(this.options.format===St.GLB)this.imageBufferViews.push(n),e.bufferView=this.jsonDoc.json.bufferViews.length,this.jsonDoc.json.bufferViews.push({buffer:0,byteOffset:-1,byteLength:n.byteLength});else{const r=Zt.mimeTypeToExtension(s.getMimeType());e.uri=this.imageURIGenerator.createURI(s,r),this.assignResourceURI(e.uri,n,!1)}}assignResourceURI(e,n,s){const r=this.jsonDoc.resources;if(!(e in r)){r[e]=n;return}if(n===r[e]){this.logger.warn(`Duplicate resource URI, "${e}".`);return}const i=`Resource URI "${e}" already assigned to different data.`;if(!s){this.logger.warn(i);return}throw new Error(i)}getAccessorUsage(e){const n=this._accessorUsageMap.get(e);if(n)return n;if(e.getSparse())return Pe.SPARSE;for(const s of this._doc.getGraph().listParentEdges(e)){const{usage:r}=s.getAttributes();if(r)return r;s.getParent().propertyType!==B.ROOT&&this.logger.warn(`Missing attribute ".usage" on edge, "${s.getName()}".`)}return Pe.OTHER}addAccessorToUsageGroup(e,n){const s=this._accessorUsageMap.get(e);if(s&&s!==n)throw new Error(`Accessor with usage "${s}" cannot be reused as "${n}".`);return this._accessorUsageMap.set(e,n),this}}Vt.BufferViewTarget=Hn;Vt.BufferViewUsage=Pe;Vt.USAGE_TO_TARGET={[Pe.ARRAY_BUFFER]:Hn.ARRAY_BUFFER,[Pe.ELEMENT_ARRAY_BUFFER]:Hn.ELEMENT_ARRAY_BUFFER};class sa{constructor(e,n){this.multiple=void 0,this.basename=void 0,this.counter={},this.multiple=e,this.basename=n}createURI(e,n){if(e.getURI())return e.getURI();if(this.multiple){const s=this.basename(e);return this.counter[s]=this.counter[s]||1,`${s}_${this.counter[s]++}.${n}`}else return`${this.basename(e)}.${n}`}}function x0(t,e){const n=t.getGraph().listParentEdges(e).find(s=>s.getParent()!==t.getRoot());return n?n.getName().replace(/texture$/i,""):""}const{BufferViewUsage:As}=Vt,{UNSIGNED_INT:_0,UNSIGNED_SHORT:E0,UNSIGNED_BYTE:S0}=K.ComponentType,k0=new Set([B.ACCESSOR,B.BUFFER,B.MATERIAL,B.MESH]);class A0{static write(e,n){const s=e.getGraph(),r=e.getRoot(),i={asset:Oe({generator:`glTF-Transform ${Bl}`},r.getAsset()),extras:Oe({},r.getExtras())},o={json:i,resources:{}},a=new Vt(e,o,n),l=n.logger||Le.DEFAULT_INSTANCE,c=new Set(n.extensions.map(m=>m.EXTENSION_NAME)),u=e.getRoot().listExtensionsUsed().filter(m=>c.has(m.extensionName)).sort((m,S)=>m.extensionName>S.extensionName?1:-1),f=e.getRoot().listExtensionsRequired().filter(m=>c.has(m.extensionName)).sort((m,S)=>m.extensionName>S.extensionName?1:-1);u.length<e.getRoot().listExtensionsUsed().length&&l.warn("Some extensions were not registered for I/O, and will not be written.");for(const m of u){const S=m.prewriteTypes.filter(v=>!k0.has(v));S.length&&l.warn(`Prewrite hooks for some types (${S.join()}), requested by extension ${m.extensionName}, are unsupported. Please file an issue or a PR.`);for(const v of m.writeDependencies)m.install(v,n.dependencies[v])}function h(m,S,v,_){const E=[];let A=0;for(const k of m){const T=a.createAccessorDef(k);T.bufferView=i.bufferViews.length;const I=k.getArray(),N=te.pad(te.toView(I));T.byteOffset=A,A+=N.byteLength,E.push(N),a.accessorIndexMap.set(k,i.accessors.length),i.accessors.push(T)}const y=te.concat(E),x={buffer:S,byteOffset:v,byteLength:y.byteLength};return _&&(x.target=_),i.bufferViews.push(x),{buffers:E,byteLength:A}}function p(m,S,v){const _=m[0].getCount();let E=0;for(const T of m){const I=a.createAccessorDef(T);I.bufferView=i.bufferViews.length,I.byteOffset=E;const N=T.getElementSize(),j=T.getComponentSize();E+=te.padNumber(N*j),a.accessorIndexMap.set(T,i.accessors.length),i.accessors.push(I)}const A=_*E,y=new ArrayBuffer(A),x=new DataView(y);for(let T=0;T<_;T++){let I=0;for(const N of m){const j=N.getElementSize(),R=N.getComponentSize(),M=N.getComponentType(),P=N.getArray();for(let L=0;L<j;L++){const Z=T*E+I+L*R,F=P[T*j+L];switch(M){case K.ComponentType.FLOAT:x.setFloat32(Z,F,!0);break;case K.ComponentType.BYTE:x.setInt8(Z,F);break;case K.ComponentType.SHORT:x.setInt16(Z,F,!0);break;case K.ComponentType.UNSIGNED_BYTE:x.setUint8(Z,F);break;case K.ComponentType.UNSIGNED_SHORT:x.setUint16(Z,F,!0);break;case K.ComponentType.UNSIGNED_INT:x.setUint32(Z,F,!0);break;default:throw new Error("Unexpected component type: "+M)}}I+=te.padNumber(j*R)}}const k={buffer:S,byteOffset:v,byteLength:A,byteStride:E,target:Vt.BufferViewTarget.ARRAY_BUFFER};return i.bufferViews.push(k),{byteLength:A,buffers:[new Uint8Array(y)]}}function b(m,S,v){const _=[];let E=0;const A=new Map;let y=-1/0,x=!1;for(const M of m){const P=a.createAccessorDef(M);i.accessors.push(P),a.accessorIndexMap.set(M,i.accessors.length-1);const L=[],Z=[],F=[],J=new Array(M.getElementSize()).fill(0);for(let ee=0,ne=M.getCount();ee<ne;ee++)if(M.getElement(ee,F),!de.eq(F,J,0)){y=Math.max(ee,y),L.push(ee);for(let ye=0;ye<F.length;ye++)Z.push(F[ye])}const H=L.length,ie={accessorDef:P,count:H};if(A.set(M,ie),H===0)continue;H>M.getCount()/2&&(x=!0);const Y=hr[M.getComponentType()];ie.indices=L,ie.values=new Y(Z)}if(!Number.isFinite(y))return{buffers:_,byteLength:E};x&&l.warn("Some sparse accessors have >50% non-zero elements, which may increase file size.");const k=y<255?Uint8Array:y<65535?Uint16Array:Uint32Array,T=y<255?S0:y<65535?E0:_0,I={buffer:S,byteOffset:v+E,byteLength:0};for(const M of m){const P=A.get(M);if(P.count===0)continue;P.indicesByteOffset=I.byteLength;const L=te.pad(te.toView(new k(P.indices)));_.push(L),E+=L.byteLength,I.byteLength+=L.byteLength}i.bufferViews.push(I);const N=i.bufferViews.length-1,j={buffer:S,byteOffset:v+E,byteLength:0};for(const M of m){const P=A.get(M);if(P.count===0)continue;P.valuesByteOffset=j.byteLength;const L=te.pad(te.toView(P.values));_.push(L),E+=L.byteLength,j.byteLength+=L.byteLength}i.bufferViews.push(j);const R=i.bufferViews.length-1;for(const M of m){const P=A.get(M);P.count!==0&&(P.accessorDef.sparse={count:P.count,indices:{bufferView:N,byteOffset:P.indicesByteOffset,componentType:T},values:{bufferView:R,byteOffset:P.valuesByteOffset}})}return{buffers:_,byteLength:E}}if(i.accessors=[],i.bufferViews=[],i.samplers=[],i.textures=[],i.images=r.listTextures().map((m,S)=>{const v=a.createPropertyDef(m);m.getMimeType()&&(v.mimeType=m.getMimeType());const _=m.getImage();return _&&a.createImageData(v,_,m),a.imageIndexMap.set(m,S),v}),u.filter(m=>m.prewriteTypes.includes(B.ACCESSOR)).forEach(m=>m.prewrite(a,B.ACCESSOR)),r.listAccessors().forEach(m=>{const S=a.accessorUsageGroupedByParent,v=a.accessorParents;if(a.accessorIndexMap.has(m))return;const _=a.getAccessorUsage(m);if(a.addAccessorToUsageGroup(m,_),S.has(_)){const E=s.listParents(m).find(A=>A.propertyType!==B.ROOT);v.set(m,E)}}),u.filter(m=>m.prewriteTypes.includes(B.BUFFER)).forEach(m=>m.prewrite(a,B.BUFFER)),(r.listAccessors().length>0||a.otherBufferViews.size>0||r.listTextures().length>0&&n.format===St.GLB)&&r.listBuffers().length===0)throw new Error("Buffer required for Document resources, but none was found.");i.buffers=[],r.listBuffers().forEach((m,S)=>{const v=a.createPropertyDef(m),_=a.accessorUsageGroupedByParent,E=m.listParents().filter(j=>j instanceof K),A=new Set(E.map(j=>a.accessorParents.get(j))),y=new Map(Array.from(A).map((j,R)=>[j,R])),x={};for(const j of E){var k;if(a.accessorIndexMap.has(j))continue;const R=a.getAccessorUsage(j);let M=R;if(_.has(R)){const P=a.accessorParents.get(j);M+=`:${y.get(P)}`}x[k=M]||(x[k]={usage:R,accessors:[]}),x[M].accessors.push(j)}const T=[],I=i.buffers.length;let N=0;for(const{usage:j,accessors:R}of Object.values(x))if(j===As.ARRAY_BUFFER&&n.vertexLayout===Js.INTERLEAVED){const M=p(R,I,N);N+=M.byteLength;for(const P of M.buffers)T.push(P)}else if(j===As.ARRAY_BUFFER)for(const M of R){const P=p([M],I,N);N+=P.byteLength;for(const L of P.buffers)T.push(L)}else if(j===As.SPARSE){const M=b(R,I,N);N+=M.byteLength;for(const P of M.buffers)T.push(P)}else if(j===As.ELEMENT_ARRAY_BUFFER){const M=Vt.BufferViewTarget.ELEMENT_ARRAY_BUFFER,P=h(R,I,N,M);N+=P.byteLength;for(const L of P.buffers)T.push(L)}else{const M=h(R,I,N);N+=M.byteLength;for(const P of M.buffers)T.push(P)}if(a.imageBufferViews.length&&S===0){for(let j=0;j<a.imageBufferViews.length;j++)if(i.bufferViews[i.images[j].bufferView].byteOffset=N,N+=a.imageBufferViews[j].byteLength,T.push(a.imageBufferViews[j]),N%8){const R=8-N%8;N+=R,T.push(new Uint8Array(R))}}if(a.otherBufferViews.has(m))for(const j of a.otherBufferViews.get(m))i.bufferViews.push({buffer:I,byteOffset:N,byteLength:j.byteLength}),a.otherBufferViewsIndexMap.set(j,i.bufferViews.length-1),N+=j.byteLength,T.push(j);if(N){let j;n.format===St.GLB?j=Qs:(j=a.bufferURIGenerator.createURI(m,"bin"),v.uri=j),v.byteLength=N,a.assignResourceURI(j,te.concat(T),!0)}i.buffers.push(v),a.bufferIndexMap.set(m,S)}),r.listAccessors().find(m=>!m.getBuffer())&&l.warn("Skipped writing one or more Accessors: no Buffer assigned."),u.filter(m=>m.prewriteTypes.includes(B.MATERIAL)).forEach(m=>m.prewrite(a,B.MATERIAL)),i.materials=r.listMaterials().map((m,S)=>{const v=a.createPropertyDef(m);if(m.getAlphaMode()!==Gt.AlphaMode.OPAQUE&&(v.alphaMode=m.getAlphaMode()),m.getAlphaMode()===Gt.AlphaMode.MASK&&(v.alphaCutoff=m.getAlphaCutoff()),m.getDoubleSided()&&(v.doubleSided=!0),v.pbrMetallicRoughness={},de.eq(m.getBaseColorFactor(),[1,1,1,1])||(v.pbrMetallicRoughness.baseColorFactor=m.getBaseColorFactor()),de.eq(m.getEmissiveFactor(),[0,0,0])||(v.emissiveFactor=m.getEmissiveFactor()),m.getRoughnessFactor()!==1&&(v.pbrMetallicRoughness.roughnessFactor=m.getRoughnessFactor()),m.getMetallicFactor()!==1&&(v.pbrMetallicRoughness.metallicFactor=m.getMetallicFactor()),m.getBaseColorTexture()){const _=m.getBaseColorTexture(),E=m.getBaseColorTextureInfo();v.pbrMetallicRoughness.baseColorTexture=a.createTextureInfoDef(_,E)}if(m.getEmissiveTexture()){const _=m.getEmissiveTexture(),E=m.getEmissiveTextureInfo();v.emissiveTexture=a.createTextureInfoDef(_,E)}if(m.getNormalTexture()){const _=m.getNormalTexture(),E=m.getNormalTextureInfo(),A=a.createTextureInfoDef(_,E);m.getNormalScale()!==1&&(A.scale=m.getNormalScale()),v.normalTexture=A}if(m.getOcclusionTexture()){const _=m.getOcclusionTexture(),E=m.getOcclusionTextureInfo(),A=a.createTextureInfoDef(_,E);m.getOcclusionStrength()!==1&&(A.strength=m.getOcclusionStrength()),v.occlusionTexture=A}if(m.getMetallicRoughnessTexture()){const _=m.getMetallicRoughnessTexture(),E=m.getMetallicRoughnessTextureInfo();v.pbrMetallicRoughness.metallicRoughnessTexture=a.createTextureInfoDef(_,E)}return a.materialIndexMap.set(m,S),v}),u.filter(m=>m.prewriteTypes.includes(B.MESH)).forEach(m=>m.prewrite(a,B.MESH)),i.meshes=r.listMeshes().map((m,S)=>{const v=a.createPropertyDef(m);let _=null;return v.primitives=m.listPrimitives().map(E=>{const A={attributes:{}};A.mode=E.getMode();const y=E.getMaterial();y&&(A.material=a.materialIndexMap.get(y)),Object.keys(E.getExtras()).length&&(A.extras=E.getExtras());const x=E.getIndices();x&&(A.indices=a.accessorIndexMap.get(x));for(const k of E.listSemantics())A.attributes[k]=a.accessorIndexMap.get(E.getAttribute(k));for(const k of E.listTargets()){const T={};for(const I of k.listSemantics())T[I]=a.accessorIndexMap.get(k.getAttribute(I));A.targets=A.targets||[],A.targets.push(T)}return E.listTargets().length&&!_&&(_=E.listTargets().map(k=>k.getName())),A}),m.getWeights().length&&(v.weights=m.getWeights()),_&&(v.extras=v.extras||{},v.extras.targetNames=_),a.meshIndexMap.set(m,S),v}),i.cameras=r.listCameras().map((m,S)=>{const v=a.createPropertyDef(m);if(v.type=m.getType(),v.type===Wt.Type.PERSPECTIVE){v.perspective={znear:m.getZNear(),zfar:m.getZFar(),yfov:m.getYFov()};const _=m.getAspectRatio();_!==null&&(v.perspective.aspectRatio=_)}else v.orthographic={znear:m.getZNear(),zfar:m.getZFar(),xmag:m.getXMag(),ymag:m.getYMag()};return a.cameraIndexMap.set(m,S),v}),i.nodes=r.listNodes().map((m,S)=>{const v=a.createPropertyDef(m);return de.eq(m.getTranslation(),[0,0,0])||(v.translation=m.getTranslation()),de.eq(m.getRotation(),[0,0,0,1])||(v.rotation=m.getRotation()),de.eq(m.getScale(),[1,1,1])||(v.scale=m.getScale()),m.getWeights().length&&(v.weights=m.getWeights()),a.nodeIndexMap.set(m,S),v}),i.skins=r.listSkins().map((m,S)=>{const v=a.createPropertyDef(m),_=m.getInverseBindMatrices();_&&(v.inverseBindMatrices=a.accessorIndexMap.get(_));const E=m.getSkeleton();return E&&(v.skeleton=a.nodeIndexMap.get(E)),v.joints=m.listJoints().map(A=>a.nodeIndexMap.get(A)),a.skinIndexMap.set(m,S),v}),r.listNodes().forEach((m,S)=>{const v=i.nodes[S],_=m.getMesh();_&&(v.mesh=a.meshIndexMap.get(_));const E=m.getCamera();E&&(v.camera=a.cameraIndexMap.get(E));const A=m.getSkin();A&&(v.skin=a.skinIndexMap.get(A)),m.listChildren().length>0&&(v.children=m.listChildren().map(y=>a.nodeIndexMap.get(y)))}),i.animations=r.listAnimations().map((m,S)=>{const v=a.createPropertyDef(m),_=new Map;return v.samplers=m.listSamplers().map((E,A)=>{const y=a.createPropertyDef(E);return y.input=a.accessorIndexMap.get(E.getInput()),y.output=a.accessorIndexMap.get(E.getOutput()),y.interpolation=E.getInterpolation(),_.set(E,A),y}),v.channels=m.listChannels().map(E=>{const A=a.createPropertyDef(E);return A.sampler=_.get(E.getSampler()),A.target={node:a.nodeIndexMap.get(E.getTargetNode()),path:E.getTargetPath()},A}),a.animationIndexMap.set(m,S),v}),i.scenes=r.listScenes().map((m,S)=>{const v=a.createPropertyDef(m);return v.nodes=m.listChildren().map(_=>a.nodeIndexMap.get(_)),a.sceneIndexMap.set(m,S),v});const w=r.getDefaultScene();return w&&(i.scene=r.listScenes().indexOf(w)),i.extensionsUsed=u.map(m=>m.extensionName),i.extensionsRequired=f.map(m=>m.extensionName),u.forEach(m=>m.write(a)),T0(i),o}}function T0(t){const e=[];for(const n in t){const s=t[n];(Array.isArray(s)&&s.length===0||s===null||s===""||s&&typeof s=="object"&&Object.keys(s).length===0)&&e.push(n)}for(const n of e)delete t[n]}var tr;(function(t){t[t.JSON=1313821514]="JSON",t[t.BIN=5130562]="BIN"})(tr||(tr={}));class N0{constructor(){this._logger=Le.DEFAULT_INSTANCE,this._extensions=new Set,this._dependencies={},this._vertexLayout=Js.INTERLEAVED,this.lastReadBytes=0,this.lastWriteBytes=0}setLogger(e){return this._logger=e,this}registerExtensions(e){for(const n of e)this._extensions.add(n),n.register();return this}registerDependencies(e){return Object.assign(this._dependencies,e),this}setVertexLayout(e){return this._vertexLayout=e,this}async read(e){return await this.readJSON(await this.readAsJSON(e))}async readAsJSON(e){const n=await this.readURI(e,"view");this.lastReadBytes=n.byteLength;const s=ra(n)?this._binaryToJSON(n):{json:JSON.parse(te.decodeText(n)),resources:{}};return await this._readResourcesExternal(s,this.dirname(e)),this._readResourcesInternal(s),s}async readJSON(e){return e=this._copyJSON(e),this._readResourcesInternal(e),b0.read(e,{extensions:Array.from(this._extensions),dependencies:this._dependencies,logger:this._logger})}async binaryToJSON(e){const n=this._binaryToJSON(te.assertView(e));this._readResourcesInternal(n);const s=n.json;if(s.buffers&&s.buffers.some(r=>O0(n,r)))throw new Error("Cannot resolve external buffers with binaryToJSON().");if(s.images&&s.images.some(r=>I0(n,r)))throw new Error("Cannot resolve external images with binaryToJSON().");return n}async readBinary(e){return this.readJSON(await this.binaryToJSON(te.assertView(e)))}async writeJSON(e,n={}){if(n.format===St.GLB&&e.getRoot().listBuffers().length>1)throw new Error("GLB must have 01 buffers.");return A0.write(e,{format:n.format||St.GLTF,basename:n.basename||"",logger:this._logger,vertexLayout:this._vertexLayout,dependencies:Oe({},this._dependencies),extensions:Array.from(this._extensions)})}async writeBinary(e){const{json:n,resources:s}=await this.writeJSON(e,{format:St.GLB}),r=new Uint32Array([1179937895,2,12]),i=JSON.stringify(n),o=te.pad(te.encodeText(i),32),a=te.toView(new Uint32Array([o.byteLength,1313821514])),l=te.concat([a,o]);r[r.length-1]+=l.byteLength;const c=Object.values(s)[0];if(!c||!c.byteLength)return te.concat([te.toView(r),l]);const u=te.pad(c,0),f=te.toView(new Uint32Array([u.byteLength,5130562])),h=te.concat([f,u]);return r[r.length-1]+=h.byteLength,te.concat([te.toView(r),l,h])}async _readResourcesExternal(e,n){var s=this;const r=e.json.images||[],i=e.json.buffers||[],o=[...r,...i].map(async function(a){const l=a.uri;if(!l||l.match(/data:/))return Promise.resolve();e.resources[l]=await s.readURI(s.resolve(n,l),"view"),s.lastReadBytes+=e.resources[l].byteLength});await Promise.all(o)}_readResourcesInternal(e){function n(i){if(i.uri){if(i.uri in e.resources){te.assertView(e.resources[i.uri]);return}if(i.uri.match(/data:/)){const o=`__${c0()}.${An.extension(i.uri)}`;e.resources[o]=te.createBufferFromDataURI(i.uri),i.uri=o}}}(e.json.images||[]).forEach(i=>{if(i.bufferView===void 0&&i.uri===void 0)throw new Error("Missing resource URI or buffer view.");n(i)}),(e.json.buffers||[]).forEach(n)}_copyJSON(e){const{images:n,buffers:s}=e.json;return e={json:Oe({},e.json),resources:Oe({},e.resources)},n&&(e.json.images=n.map(r=>Oe({},r))),s&&(e.json.buffers=s.map(r=>Oe({},r))),e}_binaryToJSON(e){if(!ra(e))throw new Error("Invalid glTF 2.0 binary.");const n=new Uint32Array(e.buffer,e.byteOffset+12,2);if(n[1]!==tr.JSON)throw new Error("Missing required GLB JSON chunk.");const s=20,r=n[0],i=te.decodeText(te.toView(e,s,r)),o=JSON.parse(i),a=s+r;if(e.byteLength<=a)return{json:o,resources:{}};const l=new Uint32Array(e.buffer,e.byteOffset+a,2);if(l[1]!==tr.BIN)return{json:o,resources:{}};const c=l[0],u=te.toView(e,a+8,c);return{json:o,resources:{[Qs]:u}}}}function O0(t,e){return e.uri!==void 0&&!(e.uri in t.resources)}function I0(t,e){return e.uri!==void 0&&!(e.uri in t.resources)&&e.bufferView===void 0}function ra(t){if(t.byteLength<3*Uint32Array.BYTES_PER_ELEMENT)return!1;const e=new Uint32Array(t.buffer,t.byteOffset,3);return e[0]===1179937895&&e[1]===2}class C0 extends N0{constructor(e=Dn.DEFAULT_INIT){super(),this._fetchConfig=void 0,this._fetchConfig=e}async readURI(e,n){const s=await fetch(e,this._fetchConfig);switch(n){case"view":return new Uint8Array(await s.arrayBuffer());case"text":return s.text()}}resolve(e,n){return Dn.resolve(e,n)}dirname(e){return Dn.dirname(e)}}async function Jl(t){const e=URL.createObjectURL(new Blob([t])),n=new C0,s=await n.read(e);return await n.writeBinary(s)}var $r,ia;function j0(){return ia||(ia=1,$r=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var s,r,i;if(Array.isArray(e)){if(s=e.length,s!=n.length)return!1;for(r=s;r--!==0;)if(!t(e[r],n[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(i=Object.keys(e),s=i.length,s!==Object.keys(n).length)return!1;for(r=s;r--!==0;)if(!Object.prototype.hasOwnProperty.call(n,i[r]))return!1;for(r=s;r--!==0;){var o=i[r];if(!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n}),$r}var R0=j0();const M0=gf(R0),Mt=Vn(""),Ts=0;function oa(t){if(!t)return[];const e=new Set;function n(r){if(r&&typeof r=="object"&&"minecraft:custom_model_data"in r){const i=r["minecraft:custom_model_data"];if(i?.floats)for(const o of i.floats)e.add(o)}}function s(r){for(const i of Object.keys(r)){const o=r[i];n(o.item?.components),o.attachments&&s(o.attachments)}}return t.model&&(n(t.model.item?.components),t.model.attachments&&s(t.model.attachments)),Array.from(e).sort((r,i)=>r-i)}const Ue=ki((t,e)=>{const n=s=>{const r=typeof s=="function"?s(e()):s,i=e(),o={...r};let a=!1;if("metadata"in o&&o.metadata){const l={...i.metadata},c={...o.metadata};delete l.orbitControls,delete c.orbitControls,M0(l,c)||(a=!0)}return"saved"in o&&o.saved===!0?o.saved=!0:a&&(o.saved=!1),t(o)};return{saved:!1,metadata:{schemaVersion:Ts,projectName:"",createdAt:null,lastModifiedAt:null,orbitControls:void 0},cart:null,modelIds:[],modelFiles:new Map,selectedObjectPath:void 0,setSelectedObjectPath:s=>n({selectedObjectPath:s}),setMetadata:s=>n({metadata:s}),setProjectName:s=>n(r=>({metadata:{...r.metadata,projectName:s}})),setCart:s=>n({cart:s,modelIds:oa(s)}),clearCart:()=>n({cart:null}),saveProject:async s=>{const r=Ue.getState();if(!r.cart)throw new Error("No cart data to save.");const i=`${r.metadata.projectName||"TCA-Project"}.tcaproj`,o={...r.metadata,createdAt:r.metadata.createdAt||new Date},a={"metadata.json":Vn(q.stringify(o)),"cart.json":Vn(q.stringify(r.cart))};for(const p of r.modelIds){const b=r.modelFiles.get(p);if(!b)continue;const g=new Uint8Array(b.slice(0,4));let w=".gltf";if(g[0]===103&&g[1]===108&&g[2]===84&&g[3]===70&&(w=".glb"),w===".gltf"){const m=await Jl(b);a[`models/${p}.glb`]=m}else a[`models/${p}.glb`]=new Uint8Array(b)}const l=Yh(a,{level:9,mem:8}),c=new Uint8Array(Mt.length+l.length);c.set(Mt),c.set(l,Mt.length);const u=new Uint8Array(c.length);u.set(c);const f=new Blob([u],{type:"application/binary"}),h=r.fileHandle;if(!h||s){const p=await zt.promise(Promise.race([ph(f,{fileName:i,extensions:[".tcaproj"],mimeTypes:["application/binary"],id:"tca-project"}),new Promise((b,g)=>setTimeout(()=>g(new Error("Save timed out.")),15e3))]),{loading:"Saving project...",success:"Project saved successfully!",error:"Failed to save the project."}).unwrap();p&&(n({saved:!0,fileHandle:p,metadata:{...o}}),p.name!==i&&n({metadata:{...o,lastModifiedAt:new Date,projectName:p.name.replace(/\.tcaproj$/,"")}}))}else await zt.promise(Promise.race([h.createWritable().then(async b=>(await b.write(u),await b.close(),!0)).catch(()=>!1),new Promise((b,g)=>setTimeout(()=>g(new Error("Save timed out.")),15e3))]),{loading:"Saving project...",success:"Project saved successfully!",error:"Failed to save the project."}).unwrap()&&n({saved:!0,fileHandle:h,metadata:{...o,lastModifiedAt:new Date}})},loadProjectFromFile:async()=>{const s=await Ii({description:"Select a TCA-Project file",extensions:[".tcaproj"],mimeTypes:["application/binary"],id:"tca-project",startIn:"documents"}).catch(()=>null);if(!s)throw new Error("No file selected.");const r=await s.arrayBuffer(),i=new Uint8Array(Mt.length);if(i.set(Mt),!new Uint8Array(r.slice(0,Mt.length)).every((c,u)=>c===i[u]))throw new Error("Invalid TCA-Project file format.");const a=new Uint8Array(r.slice(Mt.length)),l=await Hh(a);for(const[c,u]of Object.entries(l))if(c==="metadata.json"){const f=q.parse(ri(u)),h=m1.safeParse(f);if(!h.success){console.error("Invalid metadata in project:",h.error),zt.error("We couldn't load your project. The metadata is invalid. See the browser console for more details.",{duration:1e4}),n({metadata:{schemaVersion:Ts,projectName:"",createdAt:null,lastModifiedAt:null},cart:null,fileHandle:void 0});continue}n({metadata:h.data})}else if(c==="cart.json"){const f=q.parse(ri(u)),h=Sl.safeParse(f);if(!h.success){console.error("Invalid cart data in project:",h.error),zt.error("We couldn't load your project. The cart data is invalid. See the browser console for more details.",{duration:1e4}),n({metadata:{schemaVersion:Ts,projectName:"",createdAt:null,lastModifiedAt:null},cart:null,fileHandle:void 0});continue}n({cart:h.data,modelIds:oa(h.data)})}else if(c.startsWith("models/")&&c.endsWith(".glb")){const f=parseInt(c.replace("models/","").replace(".glb",""));isNaN(f)||n(h=>{const p=new Map(h.modelFiles);return p.set(f,Ma(u.buffer)),{modelFiles:p}})}else console.warn(`Unknown file in TCA-Project: ${c}`);n({saved:!0,fileHandle:s.handle})},reset:()=>n({metadata:{schemaVersion:Ts,projectName:"",createdAt:null,lastModifiedAt:null},cart:null,fileHandle:void 0}),setModelFile:(s,r)=>{n(i=>{const o=new Map(i.modelFiles);return r?o.set(s,r):o.delete(s),{modelFiles:o,saved:!1}})},removeModelFile:s=>{n(r=>{const i=new Map(r.modelFiles);return i.delete(s),{modelFiles:i,saved:!1}})},logState:()=>{const s=e();console.log("ProjectStore state:",s)}}});function P0(){const t=$.c(56),e=Ue(),[n,s]=U.useState(document.fullscreenElement),[r,i]=U.useState(!1),[o,a]=U.useState(!1),l=z0;let c,u;t[0]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{const ie=()=>{s(document.fullscreenElement)};return document.addEventListener("fullscreenchange",ie),()=>{document.removeEventListener("fullscreenchange",ie)}},u=[],t[0]=c,t[1]=u):(c=t[0],u=t[1]),U.useEffect(c,u);let f;t[2]!==e?(f=async()=>{i(!0),await e.saveProject(),e.reset(),i(!1)},t[2]=e,t[3]=f):f=t[3];const h=f;let p,b;t[4]!==e?(p=()=>{const ie=Y=>{Y.key==="s"&&(Y.ctrlKey||Y.metaKey)&&e.cart?(Y.preventDefault(),e.saveProject().catch($0)):Y.key===","&&(Y.ctrlKey||Y.metaKey)&&(Y.preventDefault(),a(!0))};return window.addEventListener("keydown",ie),()=>{window.removeEventListener("keydown",ie)}},b=[e],t[4]=e,t[5]=p,t[6]=b):(p=t[5],b=t[6]),U.useEffect(p,b);const g=e.metadata.projectName||"Untitled Project";let w;t[7]!==e.saved?(w=e.saved?d.jsx(Na,{}):d.jsx("span",{style:{display:"inline-block",width:10,height:10,borderRadius:"50%",background:"currentColor",marginRight:4,aspectRatio:"1 / 1"}}),t[7]=e.saved,t[8]=w):w=t[8];let m;t[9]!==h||t[10]!==r||t[11]!==w?(m=d.jsx(at,{className:"h-4 w-4",variant:"ghost",size:"icon",disabled:r,onClick:h,children:w}),t[9]=h,t[10]=r,t[11]=w,t[12]=m):m=t[12];let S;t[13]!==g||t[14]!==m?(S=d.jsxs("div",{className:"bg-card flex items-center gap-2 px-2",children:[g,m]}),t[13]=g,t[14]=m,t[15]=S):S=t[15];let v;t[16]===Symbol.for("react.memo_cache_sentinel")?(v=d.jsx(Gf,{children:"File"}),t[16]=v):v=t[16];let _;t[17]!==e?(_=async()=>e.saveProject(),t[17]=e,t[18]=_):_=t[18];let E;t[19]===Symbol.for("react.memo_cache_sentinel")?(E=d.jsx(yo,{children:"CTRL + S"}),t[19]=E):E=t[19];let A;t[20]!==r||t[21]!==_?(A=d.jsxs(on,{disabled:r,onClick:_,children:["Save Project ",E]}),t[20]=r,t[21]=_,t[22]=A):A=t[22];let y;t[23]!==e?(y=async()=>e.saveProject(!0),t[23]=e,t[24]=y):y=t[24];let x;t[25]!==r||t[26]!==y?(x=d.jsx(on,{disabled:r,onClick:y,children:"Save Project As"}),t[25]=r,t[26]=y,t[27]=x):x=t[27];let k;t[28]===Symbol.for("react.memo_cache_sentinel")?(k=d.jsx(Or,{}),t[28]=k):k=t[28];let T;t[29]!==e?(T=async()=>e.loadProjectFromFile(),t[29]=e,t[30]=T):T=t[30];let I;t[31]!==r||t[32]!==T?(I=d.jsx(on,{disabled:r,onClick:T,children:"Load Project"}),t[31]=r,t[32]=T,t[33]=I):I=t[33];let N;t[34]!==h||t[35]!==r?(N=d.jsx(on,{disabled:r,onClick:h,children:"New Project"}),t[34]=h,t[35]=r,t[36]=N):N=t[36];let j;t[37]===Symbol.for("react.memo_cache_sentinel")?(j=d.jsx(Or,{}),t[37]=j):j=t[37];let R;t[38]===Symbol.for("react.memo_cache_sentinel")?(R=()=>a(!0),t[38]=R):R=t[38];let M,P,L;t[39]===Symbol.for("react.memo_cache_sentinel")?(M=d.jsxs(on,{onClick:R,children:["Preferences",d.jsx(yo,{children:"CTRL + ,"})]}),P=d.jsx(Or,{}),L=d.jsx(on,{children:"Print"}),t[39]=M,t[40]=P,t[41]=L):(M=t[39],P=t[40],L=t[41]);let Z;t[42]!==A||t[43]!==x||t[44]!==I||t[45]!==N?(Z=d.jsxs(go,{children:[v,d.jsxs(qf,{children:[A,x,k,I,N,j,M,P,L]})]}),t[42]=A,t[43]=x,t[44]=I,t[45]=N,t[46]=Z):Z=t[46];let F;t[47]!==n?(F=d.jsx(go,{children:d.jsx(at,{className:"ml-auto",variant:"ghost",size:"icon",onClick:l,children:n?d.jsx(su,{}):d.jsx(nu,{})})}),t[47]=n,t[48]=F):F=t[48];let J;t[49]!==o?(J=d.jsx(D0,{open:o,setOpen:a}),t[49]=o,t[50]=J):J=t[50];let H;return t[51]!==Z||t[52]!==F||t[53]!==J||t[54]!==S?(H=d.jsxs(Vf,{className:"rounded-none",children:[S,Z,F,J]}),t[51]=Z,t[52]=F,t[53]=J,t[54]=S,t[55]=H):H=t[55],H}function $0(t){console.error("Save failed:",t)}function z0(){document.fullscreenElement?document.exitFullscreen().catch(L0):document.documentElement.requestFullscreen().catch(F0)}function L0(t){console.error("Error exiting fullscreen mode:",t)}function F0(t){console.error("Error entering fullscreen mode:",t)}function D0(t){const e=$.c(61),{open:n,setOpen:s}=t,r=Jn();let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=d.jsx(Uf,{children:"Preferences"}),e[0]=i):i=e[0];let o;e[1]===Symbol.for("react.memo_cache_sentinel")?(o=d.jsx(We,{htmlFor:"theme-select",children:"Theme:"}),e[1]=o):o=e[1];let a;e[2]!==r?(a=F=>{if(F!=="light"&&F!=="dark"){console.warn("Invalid theme selected:",F);return}r.setTheme(F)},e[2]=r,e[3]=a):a=e[3];let l;e[4]===Symbol.for("react.memo_cache_sentinel")?(l=d.jsx(qr,{className:"h-10 w-full",id:"theme-select",children:d.jsx(Gr,{placeholder:"Select theme"})}),e[4]=l):l=e[4];let c;e[5]===Symbol.for("react.memo_cache_sentinel")?(c=d.jsx(Yr,{children:d.jsxs(Kr,{children:[d.jsx(Hr,{children:"Available Themes"}),d.jsx(qs,{value:"light",children:"Light"}),d.jsx(qs,{value:"dark",children:"Dark"})]})}),e[5]=c):c=e[5];let u;e[6]!==r.theme||e[7]!==a?(u=d.jsxs("div",{className:"flex flex-col",children:[o,d.jsxs(Vr,{value:r.theme,onValueChange:a,children:[l,c]})]}),e[6]=r.theme,e[7]=a,e[8]=u):u=e[8];let f;e[9]===Symbol.for("react.memo_cache_sentinel")?(f=d.jsx(We,{htmlFor:"save-interval",children:"Auto-save Interval (seconds):"}),e[9]=f):f=e[9];let h;e[10]!==r?(h=F=>{const J=parseInt(F.target.value,10);if(isNaN(J)||J<1){console.warn("Invalid save interval:",F.target.value);return}r.setSaveInterval(J)},e[10]=r,e[11]=h):h=e[11];let p;e[12]!==r.saveInterval||e[13]!==h?(p=d.jsxs("div",{className:"flex flex-col",children:[f,d.jsx(Oi,{id:"save-interval",type:"number",min:1,value:r.saveInterval,onChange:h,className:"h-10 w-full"})]}),e[12]=r.saveInterval,e[13]=h,e[14]=p):p=e[14];let b;e[15]===Symbol.for("react.memo_cache_sentinel")?(b=d.jsx(We,{htmlFor:"grid-color",className:"mb-2 block",children:"Grid Color:"}),e[15]=b):b=e[15];let g;e[16]!==r?(g=F=>{r.setGridColor(F.hex)},e[16]=r,e[17]=g):g=e[17];let w;e[18]!==r.gridColor||e[19]!==g?(w=d.jsxs("div",{className:"flex flex-col",children:[b,d.jsx(Qf,{defaultColor:r.gridColor,onChangeComplete:g})]}),e[18]=r.gridColor,e[19]=g,e[20]=w):w=e[20];let m;e[21]===Symbol.for("react.memo_cache_sentinel")?(m=d.jsx(vt,{asChild:!0,children:d.jsx(ps,{className:"mr-[0.5] inline h-3"})}),e[21]=m):m=e[21];let S;e[22]===Symbol.for("react.memo_cache_sentinel")?(S=d.jsxs(We,{htmlFor:"debug-text",className:"mb-2 block",children:[d.jsxs(wt,{children:[m,d.jsx(xt,{children:d.jsx("p",{children:"Debug text displays additional information about the 3D scene, such as object coordinates and rendering details. It can be useful for troubleshooting but may clutter the view."})})]}),"Debug Text:"]}),e[22]=S):S=e[22];let v;e[23]!==r?(v=F=>r.setDebugText(F),e[23]=r,e[24]=v):v=e[24];let _;e[25]!==r.debugText||e[26]!==v?(_=d.jsxs("div",{className:"flex flex-row gap-2",children:[S,d.jsx(gs,{id:"debug-text",checked:r.debugText,onCheckedChange:v})]}),e[25]=r.debugText,e[26]=v,e[27]=_):_=e[27];let E;e[28]===Symbol.for("react.memo_cache_sentinel")?(E=d.jsx(vt,{asChild:!0,children:d.jsx(ps,{className:"mr-[0.5] inline h-3"})}),e[28]=E):E=e[28];let A;e[29]===Symbol.for("react.memo_cache_sentinel")?(A=d.jsxs(We,{htmlFor:"ssao-enabled",className:"mb-2 block",children:[d.jsxs(wt,{children:[E,d.jsx(xt,{children:d.jsx("p",{children:"Screen Space Ambient Occlusion (SSAO) is a shading method that adds soft shadows to enhance depth perception in 3D scenes. It can improve visual realism but may impact performance."})})]}),"SSAO Enabled:"]}),e[29]=A):A=e[29];let y;e[30]!==r?(y=F=>r.setSSAOEnabled(F),e[30]=r,e[31]=y):y=e[31];let x;e[32]!==r.SSAOEnabled||e[33]!==y?(x=d.jsxs("div",{className:"flex flex-row gap-2",children:[A,d.jsx(gs,{id:"ssao-enabled",checked:r.SSAOEnabled,onCheckedChange:y})]}),e[32]=r.SSAOEnabled,e[33]=y,e[34]=x):x=e[34];let k;e[35]===Symbol.for("react.memo_cache_sentinel")?(k=d.jsx(vt,{asChild:!0,children:d.jsx(ps,{className:"mr-[0.5] inline h-3"})}),e[35]=k):k=e[35];let T;e[36]===Symbol.for("react.memo_cache_sentinel")?(T=d.jsxs(We,{htmlFor:"dof-enabled",className:"mb-2 block",children:[d.jsxs(wt,{children:[k,d.jsx(xt,{children:d.jsx("p",{children:"Depth of Field (DOF) creates a blurred effect on objects outside the focus area, simulating camera lens behavior. It enhances realism but can be resource-intensive and may affect performance."})})]}),"Depth of Field Enabled:"]}),e[36]=T):T=e[36];let I;e[37]!==r?(I=F=>r.setDOFEnabled(F),e[37]=r,e[38]=I):I=e[38];let N;e[39]!==r.DOFEnabled||e[40]!==I?(N=d.jsxs("div",{className:"flex flex-row gap-2",children:[T,d.jsx(gs,{id:"dof-enabled",checked:r.DOFEnabled,onCheckedChange:I})]}),e[39]=r.DOFEnabled,e[40]=I,e[41]=N):N=e[41];let j;e[42]===Symbol.for("react.memo_cache_sentinel")?(j=d.jsx(vt,{asChild:!0,children:d.jsx(ps,{className:"mr-[0.5] inline h-3"})}),e[42]=j):j=e[42];let R;e[43]===Symbol.for("react.memo_cache_sentinel")?(R=d.jsxs(We,{htmlFor:"control-damping-enabled",className:"mb-2 block",children:[d.jsxs(wt,{children:[j,d.jsx(xt,{children:d.jsx("p",{children:"Enabling control damping makes camera movements smoother by adding inertia. This results in a more natural feel when orbiting or panning the view, but may introduce a slight delay in responsiveness."})})]}),"Orbit Controls Damping:"]}),e[43]=R):R=e[43];let M;e[44]!==r?(M=F=>r.setControlDamping(F),e[44]=r,e[45]=M):M=e[45];let P;e[46]!==r.controlDamping||e[47]!==M?(P=d.jsxs("div",{className:"flex flex-row gap-2",children:[R,d.jsx(gs,{id:"control-damping",checked:r.controlDamping,onCheckedChange:M})]}),e[46]=r.controlDamping,e[47]=M,e[48]=P):P=e[48];let L;e[49]!==w||e[50]!==_||e[51]!==x||e[52]!==N||e[53]!==P||e[54]!==u||e[55]!==p?(L=d.jsx(Df,{children:d.jsxs(Bf,{children:[i,d.jsx(Zf,{asChild:!0,children:d.jsxs("div",{children:["Here you can adjust your preferences for the application.",d.jsxs("div",{className:"mt-4 flex flex-col gap-4",children:[u,p,w,_,x,N,P]})]})})]})}),e[49]=w,e[50]=_,e[51]=x,e[52]=N,e[53]=P,e[54]=u,e[55]=p,e[56]=L):L=e[56];let Z;return e[57]!==n||e[58]!==s||e[59]!==L?(Z=d.jsx(zf,{open:n,onOpenChange:s,children:L}),e[57]=n,e[58]=s,e[59]=L,e[60]=Z):Z=e[60],Z}let Bs=[],Us=[];function B0(t){return Bs.push(t),()=>{Bs=Bs.filter(e=>e!==t)}}function U0(t){return Us.push(t),()=>{Us=Us.filter(e=>e!==t)}}function Z0(){const t=$.c(3),e=U.useRef(0);let n;t[0]===Symbol.for("react.memo_cache_sentinel")?(n=performance.now(),t[0]=n):n=t[0];const s=U.useRef(n),{gl:r}=ir();let i;return t[1]!==r?(i=()=>{e.current=e.current+1;const o=performance.now(),a=o-s.current;if(a>500){const l=Math.round(e.current*1e3/a);e.current=0,s.current=o,Bs.forEach(u=>u(l));const c=r.info;Us.forEach(u=>u(c.render))}},t[1]=r,t[2]=i):i=t[2],Ai(i),null}function V0(t){const e=$.c(24),{position:n}=t,s=n===void 0?"top-right":n,r=Jn(),[i,o]=U.useState(0);let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a={calls:0,frame:0,lines:0,points:0,triangles:0},e[0]=a):a=e[0];const[l,c]=U.useState(a);let u,f;e[1]===Symbol.for("react.memo_cache_sentinel")?(u=()=>B0(o),f=[],e[1]=u,e[2]=f):(u=e[1],f=e[2]),U.useEffect(u,f);let h,p;e[3]===Symbol.for("react.memo_cache_sentinel")?(h=()=>U0(c),p=[],e[3]=h,e[4]=p):(h=e[3],p=e[4]),U.useEffect(h,p);const b=s.includes("top")?8:void 0,g=s.includes("bottom")?8:void 0,w=s.includes("left")?8:void 0,m=s.includes("right")?8:void 0;let S;e[5]!==m||e[6]!==b||e[7]!==g||e[8]!==w?(S={top:b,bottom:g,left:w,right:m},e[5]=m,e[6]=b,e[7]=g,e[8]=w,e[9]=S):S=e[9];const v=S;let _;e[10]!==v?(_={...v},e[10]=v,e[11]=_):_=e[11];let E;e[12]!==i?(E=d.jsxs("p",{children:[i," FPS"]}),e[12]=i,e[13]=E):E=e[13];let A;e[14]!==r.DOFEnabled||e[15]!==r.SSAOEnabled||e[16]!==r.controlDamping||e[17]!==r.debugText||e[18]!==l?(A=r.debugText&&d.jsxs(d.Fragment,{children:[d.jsx("hr",{className:"border-border my-1 border-t"}),d.jsxs("p",{children:["Draw Calls: ",l.calls]}),d.jsxs("p",{children:["Frame: ",l.frame]}),d.jsxs("p",{children:["Triangles: ",l.triangles]}),d.jsxs("p",{children:["Lines: ",l.lines]}),d.jsxs("p",{children:["Points: ",l.points]}),d.jsx("hr",{className:"border-border my-1 border-t"}),d.jsxs("p",{children:["Debug Text: ",r.debugText?"On":"Off"]}),d.jsxs("p",{children:["SSAO: ",r.SSAOEnabled?"On":"Off"]}),d.jsxs("p",{children:["Depth of Field: ",r.DOFEnabled?"On":"Off"]}),d.jsxs("p",{children:["Control Damping:"," ",r.controlDamping?"On":"Off"]})]}),e[14]=r.DOFEnabled,e[15]=r.SSAOEnabled,e[16]=r.controlDamping,e[17]=r.debugText,e[18]=l,e[19]=A):A=e[19];let y;return e[20]!==_||e[21]!==E||e[22]!==A?(y=d.jsxs("div",{className:"text-muted-foreground pointer-events-none absolute z-10 text-right font-mono text-sm",style:_,children:[E,A]}),e[20]=_,e[21]=E,e[22]=A,e[23]=y):y=e[23],y}const K0="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAAAXNSR0IArs4c6QAAAHpJREFUOI21kjEKACEMBNdD/IGV/39abMwL0uSKgIiCyRVnETFsMrJsUlWEDxFlu0opIuJWZn4ABNUiAiADuChaawDGGNYB4BDs6yvhuRNsYJ3/n5DXd611c9khbPt8wtw33YwSps5x6dSdhKSq8Sz13r9niYiYOZ7wF+cqCUwV0Ir/AAAAAElFTkSuQmCC",Ns=[],G0=5;function q0(){const t=Math.floor(Math.random()*360),e=70+Math.random()*10,n=80+Math.random()*10;return`hsl(${t}, ${e}%, ${n}%)`}function Y0(){let t="",e=0;do t=q0(),e++;while(Ns.includes(t)&&e<10);return Ns.push(t),Ns.length>G0&&Ns.shift(),t}const Wn=U.forwardRef((t,e)=>{const n=$.c(14),s=yf(K0);let r,i;n[0]!==s?(i=s.clone(),i.magFilter=uo,i.minFilter=uo,n[0]=s,n[1]=i):i=n[1],r=i;const o=r;let a,l;n[2]===Symbol.for("react.memo_cache_sentinel")?(l=Y0(),n[2]=l):l=n[2],a=l;const c=a,[u,f]=U.useState(!1);let h,p,b;n[3]===Symbol.for("react.memo_cache_sentinel")?(h=v=>{v.stopPropagation(),f(!0)},p=()=>f(!1),b=d.jsx("boxGeometry",{args:[1,1,1]}),n[3]=h,n[4]=p,n[5]=b):(h=n[3],p=n[4],b=n[5]);const g=u?c:"#000",w=u?.5:0;let m;n[6]!==g||n[7]!==w||n[8]!==o?(m=d.jsx("meshStandardMaterial",{map:o,color:c,emissive:g,emissiveIntensity:w}),n[6]=g,n[7]=w,n[8]=o,n[9]=m):m=n[9];let S;return n[10]!==t||n[11]!==e||n[12]!==m?(S=d.jsxs("mesh",{ref:e,...t,castShadow:!0,receiveShadow:!0,onPointerOver:h,onPointerOut:p,children:[b,m]}),n[10]=t,n[11]=e,n[12]=m,n[13]=S):S=n[13],S});class H0{add(e,n,s){if(typeof arguments[0]!="string")for(let r in arguments[0])this.add(r,arguments[0][r],arguments[1]);else(Array.isArray(e)?e:[e]).forEach(function(r){this[r]=this[r]||[],n&&this[r][s?"unshift":"push"](n)},this)}run(e,n){this[e]=this[e]||[],this[e].forEach(function(s){s.call(n&&n.context?n.context:n,n)})}}class W0{constructor(e){this.jsep=e,this.registered={}}register(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];n.forEach(r=>{if(typeof r!="object"||!r.name||!r.init)throw new Error("Invalid JSEP plugin format");this.registered[r.name]||(r.init(this.jsep),this.registered[r.name]=r)})}}class O{static get version(){return"1.4.0"}static toString(){return"JavaScript Expression Parser (JSEP) v"+O.version}static addUnaryOp(e){return O.max_unop_len=Math.max(e.length,O.max_unop_len),O.unary_ops[e]=1,O}static addBinaryOp(e,n,s){return O.max_binop_len=Math.max(e.length,O.max_binop_len),O.binary_ops[e]=n,s?O.right_associative.add(e):O.right_associative.delete(e),O}static addIdentifierChar(e){return O.additional_identifier_chars.add(e),O}static addLiteral(e,n){return O.literals[e]=n,O}static removeUnaryOp(e){return delete O.unary_ops[e],e.length===O.max_unop_len&&(O.max_unop_len=O.getMaxKeyLen(O.unary_ops)),O}static removeAllUnaryOps(){return O.unary_ops={},O.max_unop_len=0,O}static removeIdentifierChar(e){return O.additional_identifier_chars.delete(e),O}static removeBinaryOp(e){return delete O.binary_ops[e],e.length===O.max_binop_len&&(O.max_binop_len=O.getMaxKeyLen(O.binary_ops)),O.right_associative.delete(e),O}static removeAllBinaryOps(){return O.binary_ops={},O.max_binop_len=0,O}static removeLiteral(e){return delete O.literals[e],O}static removeAllLiterals(){return O.literals={},O}get char(){return this.expr.charAt(this.index)}get code(){return this.expr.charCodeAt(this.index)}constructor(e){this.expr=e,this.index=0}static parse(e){return new O(e).parse()}static getMaxKeyLen(e){return Math.max(0,...Object.keys(e).map(n=>n.length))}static isDecimalDigit(e){return e>=48&&e<=57}static binaryPrecedence(e){return O.binary_ops[e]||0}static isIdentifierStart(e){return e>=65&&e<=90||e>=97&&e<=122||e>=128&&!O.binary_ops[String.fromCharCode(e)]||O.additional_identifier_chars.has(String.fromCharCode(e))}static isIdentifierPart(e){return O.isIdentifierStart(e)||O.isDecimalDigit(e)}throwError(e){const n=new Error(e+" at character "+this.index);throw n.index=this.index,n.description=e,n}runHook(e,n){if(O.hooks[e]){const s={context:this,node:n};return O.hooks.run(e,s),s.node}return n}searchHook(e){if(O.hooks[e]){const n={context:this};return O.hooks[e].find(function(s){return s.call(n.context,n),n.node}),n.node}}gobbleSpaces(){let e=this.code;for(;e===O.SPACE_CODE||e===O.TAB_CODE||e===O.LF_CODE||e===O.CR_CODE;)e=this.expr.charCodeAt(++this.index);this.runHook("gobble-spaces")}parse(){this.runHook("before-all");const e=this.gobbleExpressions(),n=e.length===1?e[0]:{type:O.COMPOUND,body:e};return this.runHook("after-all",n)}gobbleExpressions(e){let n=[],s,r;for(;this.index<this.expr.length;)if(s=this.code,s===O.SEMCOL_CODE||s===O.COMMA_CODE)this.index++;else if(r=this.gobbleExpression())n.push(r);else if(this.index<this.expr.length){if(s===e)break;this.throwError('Unexpected "'+this.char+'"')}return n}gobbleExpression(){const e=this.searchHook("gobble-expression")||this.gobbleBinaryExpression();return this.gobbleSpaces(),this.runHook("after-expression",e)}gobbleBinaryOp(){this.gobbleSpaces();let e=this.expr.substr(this.index,O.max_binop_len),n=e.length;for(;n>0;){if(O.binary_ops.hasOwnProperty(e)&&(!O.isIdentifierStart(this.code)||this.index+e.length<this.expr.length&&!O.isIdentifierPart(this.expr.charCodeAt(this.index+e.length))))return this.index+=n,e;e=e.substr(0,--n)}return!1}gobbleBinaryExpression(){let e,n,s,r,i,o,a,l,c;if(o=this.gobbleToken(),!o||(n=this.gobbleBinaryOp(),!n))return o;for(i={value:n,prec:O.binaryPrecedence(n),right_a:O.right_associative.has(n)},a=this.gobbleToken(),a||this.throwError("Expected expression after "+n),r=[o,i,a];n=this.gobbleBinaryOp();){if(s=O.binaryPrecedence(n),s===0){this.index-=n.length;break}i={value:n,prec:s,right_a:O.right_associative.has(n)},c=n;const u=f=>i.right_a&&f.right_a?s>f.prec:s<=f.prec;for(;r.length>2&&u(r[r.length-2]);)a=r.pop(),n=r.pop().value,o=r.pop(),e={type:O.BINARY_EXP,operator:n,left:o,right:a},r.push(e);e=this.gobbleToken(),e||this.throwError("Expected expression after "+c),r.push(i,e)}for(l=r.length-1,e=r[l];l>1;)e={type:O.BINARY_EXP,operator:r[l-1].value,left:r[l-2],right:e},l-=2;return e}gobbleToken(){let e,n,s,r;if(this.gobbleSpaces(),r=this.searchHook("gobble-token"),r)return this.runHook("after-token",r);if(e=this.code,O.isDecimalDigit(e)||e===O.PERIOD_CODE)return this.gobbleNumericLiteral();if(e===O.SQUOTE_CODE||e===O.DQUOTE_CODE)r=this.gobbleStringLiteral();else if(e===O.OBRACK_CODE)r=this.gobbleArray();else{for(n=this.expr.substr(this.index,O.max_unop_len),s=n.length;s>0;){if(O.unary_ops.hasOwnProperty(n)&&(!O.isIdentifierStart(this.code)||this.index+n.length<this.expr.length&&!O.isIdentifierPart(this.expr.charCodeAt(this.index+n.length)))){this.index+=s;const i=this.gobbleToken();return i||this.throwError("missing unaryOp argument"),this.runHook("after-token",{type:O.UNARY_EXP,operator:n,argument:i,prefix:!0})}n=n.substr(0,--s)}O.isIdentifierStart(e)?(r=this.gobbleIdentifier(),O.literals.hasOwnProperty(r.name)?r={type:O.LITERAL,value:O.literals[r.name],raw:r.name}:r.name===O.this_str&&(r={type:O.THIS_EXP})):e===O.OPAREN_CODE&&(r=this.gobbleGroup())}return r?(r=this.gobbleTokenProperty(r),this.runHook("after-token",r)):this.runHook("after-token",!1)}gobbleTokenProperty(e){this.gobbleSpaces();let n=this.code;for(;n===O.PERIOD_CODE||n===O.OBRACK_CODE||n===O.OPAREN_CODE||n===O.QUMARK_CODE;){let s;if(n===O.QUMARK_CODE){if(this.expr.charCodeAt(this.index+1)!==O.PERIOD_CODE)break;s=!0,this.index+=2,this.gobbleSpaces(),n=this.code}this.index++,n===O.OBRACK_CODE?(e={type:O.MEMBER_EXP,computed:!0,object:e,property:this.gobbleExpression()},e.property||this.throwError('Unexpected "'+this.char+'"'),this.gobbleSpaces(),n=this.code,n!==O.CBRACK_CODE&&this.throwError("Unclosed ["),this.index++):n===O.OPAREN_CODE?e={type:O.CALL_EXP,arguments:this.gobbleArguments(O.CPAREN_CODE),callee:e}:(n===O.PERIOD_CODE||s)&&(s&&this.index--,this.gobbleSpaces(),e={type:O.MEMBER_EXP,computed:!1,object:e,property:this.gobbleIdentifier()}),s&&(e.optional=!0),this.gobbleSpaces(),n=this.code}return e}gobbleNumericLiteral(){let e="",n,s;for(;O.isDecimalDigit(this.code);)e+=this.expr.charAt(this.index++);if(this.code===O.PERIOD_CODE)for(e+=this.expr.charAt(this.index++);O.isDecimalDigit(this.code);)e+=this.expr.charAt(this.index++);if(n=this.char,n==="e"||n==="E"){for(e+=this.expr.charAt(this.index++),n=this.char,(n==="+"||n==="-")&&(e+=this.expr.charAt(this.index++));O.isDecimalDigit(this.code);)e+=this.expr.charAt(this.index++);O.isDecimalDigit(this.expr.charCodeAt(this.index-1))||this.throwError("Expected exponent ("+e+this.char+")")}return s=this.code,O.isIdentifierStart(s)?this.throwError("Variable names cannot start with a number ("+e+this.char+")"):(s===O.PERIOD_CODE||e.length===1&&e.charCodeAt(0)===O.PERIOD_CODE)&&this.throwError("Unexpected period"),{type:O.LITERAL,value:parseFloat(e),raw:e}}gobbleStringLiteral(){let e="";const n=this.index,s=this.expr.charAt(this.index++);let r=!1;for(;this.index<this.expr.length;){let i=this.expr.charAt(this.index++);if(i===s){r=!0;break}else if(i==="\\")switch(i=this.expr.charAt(this.index++),i){case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:e+=i}else e+=i}return r||this.throwError('Unclosed quote after "'+e+'"'),{type:O.LITERAL,value:e,raw:this.expr.substring(n,this.index)}}gobbleIdentifier(){let e=this.code,n=this.index;for(O.isIdentifierStart(e)?this.index++:this.throwError("Unexpected "+this.char);this.index<this.expr.length&&(e=this.code,O.isIdentifierPart(e));)this.index++;return{type:O.IDENTIFIER,name:this.expr.slice(n,this.index)}}gobbleArguments(e){const n=[];let s=!1,r=0;for(;this.index<this.expr.length;){this.gobbleSpaces();let i=this.code;if(i===e){s=!0,this.index++,e===O.CPAREN_CODE&&r&&r>=n.length&&this.throwError("Unexpected token "+String.fromCharCode(e));break}else if(i===O.COMMA_CODE){if(this.index++,r++,r!==n.length){if(e===O.CPAREN_CODE)this.throwError("Unexpected token ,");else if(e===O.CBRACK_CODE)for(let o=n.length;o<r;o++)n.push(null)}}else if(n.length!==r&&r!==0)this.throwError("Expected comma");else{const o=this.gobbleExpression();(!o||o.type===O.COMPOUND)&&this.throwError("Expected comma"),n.push(o)}}return s||this.throwError("Expected "+String.fromCharCode(e)),n}gobbleGroup(){this.index++;let e=this.gobbleExpressions(O.CPAREN_CODE);if(this.code===O.CPAREN_CODE)return this.index++,e.length===1?e[0]:e.length?{type:O.SEQUENCE_EXP,expressions:e}:!1;this.throwError("Unclosed (")}gobbleArray(){return this.index++,{type:O.ARRAY_EXP,elements:this.gobbleArguments(O.CBRACK_CODE)}}}const X0=new H0;Object.assign(O,{hooks:X0,plugins:new W0(O),COMPOUND:"Compound",SEQUENCE_EXP:"SequenceExpression",IDENTIFIER:"Identifier",MEMBER_EXP:"MemberExpression",LITERAL:"Literal",THIS_EXP:"ThisExpression",CALL_EXP:"CallExpression",UNARY_EXP:"UnaryExpression",BINARY_EXP:"BinaryExpression",ARRAY_EXP:"ArrayExpression",TAB_CODE:9,LF_CODE:10,CR_CODE:13,SPACE_CODE:32,PERIOD_CODE:46,COMMA_CODE:44,SQUOTE_CODE:39,DQUOTE_CODE:34,OPAREN_CODE:40,CPAREN_CODE:41,OBRACK_CODE:91,CBRACK_CODE:93,QUMARK_CODE:63,SEMCOL_CODE:59,COLON_CODE:58,unary_ops:{"-":1,"!":1,"~":1,"+":1},binary_ops:{"||":1,"??":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10,"**":11},right_associative:new Set(["**"]),additional_identifier_chars:new Set(["$","_"]),literals:{true:!0,false:!1,null:null},this_str:"this"});O.max_unop_len=O.getMaxKeyLen(O.unary_ops);O.max_binop_len=O.getMaxKeyLen(O.binary_ops);const mt=t=>new O(t).parse(),Q0=Object.getOwnPropertyNames(class{});Object.getOwnPropertyNames(O).filter(t=>!Q0.includes(t)&&mt[t]===void 0).forEach(t=>{mt[t]=O[t]});mt.Jsep=O;const J0="ConditionalExpression";var ey={name:"ternary",init(t){t.hooks.add("after-expression",function(n){if(n.node&&this.code===t.QUMARK_CODE){this.index++;const s=n.node,r=this.gobbleExpression();if(r||this.throwError("Expected expression"),this.gobbleSpaces(),this.code===t.COLON_CODE){this.index++;const i=this.gobbleExpression();if(i||this.throwError("Expected expression"),n.node={type:J0,test:s,consequent:r,alternate:i},s.operator&&t.binary_ops[s.operator]<=.9){let o=s;for(;o.right.operator&&t.binary_ops[o.right.operator]<=.9;)o=o.right;n.node.test=o.right,o.right=n.node,n.node=s}}else this.throwError("Expected :")}})}};mt.plugins.register(ey);const aa=47,ty=92;var ny={name:"regex",init(t){t.hooks.add("gobble-token",function(n){if(this.code===aa){const s=++this.index;let r=!1;for(;this.index<this.expr.length;){if(this.code===aa&&!r){const i=this.expr.slice(s,this.index);let o="";for(;++this.index<this.expr.length;){const l=this.code;if(l>=97&&l<=122||l>=65&&l<=90||l>=48&&l<=57)o+=this.char;else break}let a;try{a=new RegExp(i,o)}catch(l){this.throwError(l.message)}return n.node={type:t.LITERAL,value:a,raw:this.expr.slice(s-1,this.index)},n.node=this.gobbleTokenProperty(n.node),n.node}this.code===t.OBRACK_CODE?r=!0:r&&this.code===t.CBRACK_CODE&&(r=!1),this.index+=this.code===ty?2:1}this.throwError("Unclosed Regex")}})}};const zr=43,sy=45,cn={name:"assignment",assignmentOperators:new Set(["=","*=","**=","/=","%=","+=","-=","<<=",">>=",">>>=","&=","^=","|=","||=","&&=","??="]),updateOperators:[zr,sy],assignmentPrecedence:.9,init(t){const e=[t.IDENTIFIER,t.MEMBER_EXP];cn.assignmentOperators.forEach(s=>t.addBinaryOp(s,cn.assignmentPrecedence,!0)),t.hooks.add("gobble-token",function(r){const i=this.code;cn.updateOperators.some(o=>o===i&&o===this.expr.charCodeAt(this.index+1))&&(this.index+=2,r.node={type:"UpdateExpression",operator:i===zr?"++":"--",argument:this.gobbleTokenProperty(this.gobbleIdentifier()),prefix:!0},(!r.node.argument||!e.includes(r.node.argument.type))&&this.throwError(`Unexpected ${r.node.operator}`))}),t.hooks.add("after-token",function(r){if(r.node){const i=this.code;cn.updateOperators.some(o=>o===i&&o===this.expr.charCodeAt(this.index+1))&&(e.includes(r.node.type)||this.throwError(`Unexpected ${r.node.operator}`),this.index+=2,r.node={type:"UpdateExpression",operator:i===zr?"++":"--",argument:r.node,prefix:!1})}}),t.hooks.add("after-expression",function(r){r.node&&n(r.node)});function n(s){cn.assignmentOperators.has(s.operator)?(s.type="AssignmentExpression",n(s.left),n(s.right)):s.operator||Object.values(s).forEach(r=>{r&&typeof r=="object"&&n(r)})}}};mt.plugins.register(ny,cn);mt.addUnaryOp("typeof");mt.addLiteral("null",null);mt.addLiteral("undefined",void 0);const ry=new Set(["constructor","__proto__","__defineGetter__","__defineSetter__"]),oe={evalAst(t,e){switch(t.type){case"BinaryExpression":case"LogicalExpression":return oe.evalBinaryExpression(t,e);case"Compound":return oe.evalCompound(t,e);case"ConditionalExpression":return oe.evalConditionalExpression(t,e);case"Identifier":return oe.evalIdentifier(t,e);case"Literal":return oe.evalLiteral(t,e);case"MemberExpression":return oe.evalMemberExpression(t,e);case"UnaryExpression":return oe.evalUnaryExpression(t,e);case"ArrayExpression":return oe.evalArrayExpression(t,e);case"CallExpression":return oe.evalCallExpression(t,e);case"AssignmentExpression":return oe.evalAssignmentExpression(t,e);default:throw SyntaxError("Unexpected expression",t)}},evalBinaryExpression(t,e){return{"||":(s,r)=>s||r(),"&&":(s,r)=>s&&r(),"|":(s,r)=>s|r(),"^":(s,r)=>s^r(),"&":(s,r)=>s&r(),"==":(s,r)=>s==r(),"!=":(s,r)=>s!=r(),"===":(s,r)=>s===r(),"!==":(s,r)=>s!==r(),"<":(s,r)=>s<r(),">":(s,r)=>s>r(),"<=":(s,r)=>s<=r(),">=":(s,r)=>s>=r(),"<<":(s,r)=>s<<r(),">>":(s,r)=>s>>r(),">>>":(s,r)=>s>>>r(),"+":(s,r)=>s+r(),"-":(s,r)=>s-r(),"*":(s,r)=>s*r(),"/":(s,r)=>s/r(),"%":(s,r)=>s%r()}[t.operator](oe.evalAst(t.left,e),()=>oe.evalAst(t.right,e))},evalCompound(t,e){let n;for(let s=0;s<t.body.length;s++){t.body[s].type==="Identifier"&&["var","let","const"].includes(t.body[s].name)&&t.body[s+1]&&t.body[s+1].type==="AssignmentExpression"&&(s+=1);const r=t.body[s];n=oe.evalAst(r,e)}return n},evalConditionalExpression(t,e){return oe.evalAst(t.test,e)?oe.evalAst(t.consequent,e):oe.evalAst(t.alternate,e)},evalIdentifier(t,e){if(Object.hasOwn(e,t.name))return e[t.name];throw ReferenceError(`${t.name} is not defined`)},evalLiteral(t){return t.value},evalMemberExpression(t,e){const n=String(t.computed?oe.evalAst(t.property):t.property.name),s=oe.evalAst(t.object,e);if(s==null)throw TypeError(`Cannot read properties of ${s} (reading '${n}')`);if(!Object.hasOwn(s,n)&&ry.has(n))throw TypeError(`Cannot read properties of ${s} (reading '${n}')`);const r=s[n];return typeof r=="function"?r.bind(s):r},evalUnaryExpression(t,e){return{"-":s=>-oe.evalAst(s,e),"!":s=>!oe.evalAst(s,e),"~":s=>~oe.evalAst(s,e),"+":s=>+oe.evalAst(s,e),typeof:s=>typeof oe.evalAst(s,e)}[t.operator](t.argument)},evalArrayExpression(t,e){return t.elements.map(n=>oe.evalAst(n,e))},evalCallExpression(t,e){const n=t.arguments.map(r=>oe.evalAst(r,e));return oe.evalAst(t.callee,e)(...n)},evalAssignmentExpression(t,e){if(t.left.type!=="Identifier")throw SyntaxError("Invalid left-hand side in assignment");const n=t.left.name,s=oe.evalAst(t.right,e);return e[n]=s,e[n]}};class iy{constructor(e){this.code=e,this.ast=mt(this.code)}runInNewContext(e){const n=Object.assign(Object.create(null),e);return oe.evalAst(this.ast,n)}}function yt(t,e){return t=t.slice(),t.push(e),t}function bi(t,e){return e=e.slice(),e.unshift(t),e}class oy extends Error{constructor(e){super('JSONPath should not be called with "new" (it prevents return of (unwrapped) scalar values)'),this.avoidNew=!0,this.value=e,this.name="NewError"}}function Q(t,e,n,s,r){if(!(this instanceof Q))try{return new Q(t,e,n,s,r)}catch(o){if(!o.avoidNew)throw o;return o.value}typeof t=="string"&&(r=s,s=n,n=e,e=t,t=null);const i=t&&typeof t=="object";if(t=t||{},this.json=t.json||n,this.path=t.path||e,this.resultType=t.resultType||"value",this.flatten=t.flatten||!1,this.wrap=Object.hasOwn(t,"wrap")?t.wrap:!0,this.sandbox=t.sandbox||{},this.eval=t.eval===void 0?"safe":t.eval,this.ignoreEvalErrors=typeof t.ignoreEvalErrors>"u"?!1:t.ignoreEvalErrors,this.parent=t.parent||null,this.parentProperty=t.parentProperty||null,this.callback=t.callback||s||null,this.otherTypeCallback=t.otherTypeCallback||r||function(){throw new TypeError("You must supply an otherTypeCallback callback option with the @other() operator.")},t.autostart!==!1){const o={path:i?t.path:e};i?"json"in t&&(o.json=t.json):o.json=n;const a=this.evaluate(o);if(!a||typeof a!="object")throw new oy(a);return a}}Q.prototype.evaluate=function(t,e,n,s){let r=this.parent,i=this.parentProperty,{flatten:o,wrap:a}=this;if(this.currResultType=this.resultType,this.currEval=this.eval,this.currSandbox=this.sandbox,n=n||this.callback,this.currOtherTypeCallback=s||this.otherTypeCallback,e=e||this.json,t=t||this.path,t&&typeof t=="object"&&!Array.isArray(t)){if(!t.path&&t.path!=="")throw new TypeError('You must supply a "path" property when providing an object argument to JSONPath.evaluate().');if(!Object.hasOwn(t,"json"))throw new TypeError('You must supply a "json" property when providing an object argument to JSONPath.evaluate().');({json:e}=t),o=Object.hasOwn(t,"flatten")?t.flatten:o,this.currResultType=Object.hasOwn(t,"resultType")?t.resultType:this.currResultType,this.currSandbox=Object.hasOwn(t,"sandbox")?t.sandbox:this.currSandbox,a=Object.hasOwn(t,"wrap")?t.wrap:a,this.currEval=Object.hasOwn(t,"eval")?t.eval:this.currEval,n=Object.hasOwn(t,"callback")?t.callback:n,this.currOtherTypeCallback=Object.hasOwn(t,"otherTypeCallback")?t.otherTypeCallback:this.currOtherTypeCallback,r=Object.hasOwn(t,"parent")?t.parent:r,i=Object.hasOwn(t,"parentProperty")?t.parentProperty:i,t=t.path}if(r=r||null,i=i||null,Array.isArray(t)&&(t=Q.toPathString(t)),!t&&t!==""||!e)return;const l=Q.toPathArray(t);l[0]==="$"&&l.length>1&&l.shift(),this._hasParentSelector=null;const c=this._trace(l,e,["$"],r,i,n).filter(function(u){return u&&!u.isParentSelector});return c.length?!a&&c.length===1&&!c[0].hasArrExpr?this._getPreferredOutput(c[0]):c.reduce((u,f)=>{const h=this._getPreferredOutput(f);return o&&Array.isArray(h)?u=u.concat(h):u.push(h),u},[]):a?[]:void 0};Q.prototype._getPreferredOutput=function(t){const e=this.currResultType;switch(e){case"all":{const n=Array.isArray(t.path)?t.path:Q.toPathArray(t.path);return t.pointer=Q.toPointer(n),t.path=typeof t.path=="string"?t.path:Q.toPathString(t.path),t}case"value":case"parent":case"parentProperty":return t[e];case"path":return Q.toPathString(t[e]);case"pointer":return Q.toPointer(t.path);default:throw new TypeError("Unknown result type")}};Q.prototype._handleCallback=function(t,e,n){if(e){const s=this._getPreferredOutput(t);t.path=typeof t.path=="string"?t.path:Q.toPathString(t.path),e(s,n,t)}};Q.prototype._trace=function(t,e,n,s,r,i,o,a){let l;if(!t.length)return l={path:n,value:e,parent:s,parentProperty:r,hasArrExpr:o},this._handleCallback(l,i,"value"),l;const c=t[0],u=t.slice(1),f=[];function h(p){Array.isArray(p)?p.forEach(b=>{f.push(b)}):f.push(p)}if((typeof c!="string"||a)&&e&&Object.hasOwn(e,c))h(this._trace(u,e[c],yt(n,c),e,c,i,o));else if(c==="*")this._walk(e,p=>{h(this._trace(u,e[p],yt(n,p),e,p,i,!0,!0))});else if(c==="..")h(this._trace(u,e,n,s,r,i,o)),this._walk(e,p=>{typeof e[p]=="object"&&h(this._trace(t.slice(),e[p],yt(n,p),e,p,i,!0))});else{if(c==="^")return this._hasParentSelector=!0,{path:n.slice(0,-1),expr:u,isParentSelector:!0};if(c==="~")return l={path:yt(n,c),value:r,parent:s,parentProperty:null},this._handleCallback(l,i,"property"),l;if(c==="$")h(this._trace(u,e,n,null,null,i,o));else if(/^(-?\d*):(-?\d*):?(\d*)$/u.test(c))h(this._slice(c,u,e,n,s,r,i));else if(c.indexOf("?(")===0){if(this.currEval===!1)throw new Error("Eval [?(expr)] prevented in JSONPath expression.");const p=c.replace(/^\?\((.*?)\)$/u,"$1"),b=/@.?([^?]*)[['](\??\(.*?\))(?!.\)\])[\]']/gu.exec(p);b?this._walk(e,g=>{const w=[b[2]],m=b[1]?e[g][b[1]]:e[g];this._trace(w,m,n,s,r,i,!0).length>0&&h(this._trace(u,e[g],yt(n,g),e,g,i,!0))}):this._walk(e,g=>{this._eval(p,e[g],g,n,s,r)&&h(this._trace(u,e[g],yt(n,g),e,g,i,!0))})}else if(c[0]==="("){if(this.currEval===!1)throw new Error("Eval [(expr)] prevented in JSONPath expression.");h(this._trace(bi(this._eval(c,e,n.at(-1),n.slice(0,-1),s,r),u),e,n,s,r,i,o))}else if(c[0]==="@"){let p=!1;const b=c.slice(1,-2);switch(b){case"scalar":(!e||!["object","function"].includes(typeof e))&&(p=!0);break;case"boolean":case"string":case"undefined":case"function":typeof e===b&&(p=!0);break;case"integer":Number.isFinite(e)&&!(e%1)&&(p=!0);break;case"number":Number.isFinite(e)&&(p=!0);break;case"nonFinite":typeof e=="number"&&!Number.isFinite(e)&&(p=!0);break;case"object":e&&typeof e===b&&(p=!0);break;case"array":Array.isArray(e)&&(p=!0);break;case"other":p=this.currOtherTypeCallback(e,n,s,r);break;case"null":e===null&&(p=!0);break;default:throw new TypeError("Unknown value type "+b)}if(p)return l={path:n,value:e,parent:s,parentProperty:r},this._handleCallback(l,i,"value"),l}else if(c[0]==="`"&&e&&Object.hasOwn(e,c.slice(1))){const p=c.slice(1);h(this._trace(u,e[p],yt(n,p),e,p,i,o,!0))}else if(c.includes(",")){const p=c.split(",");for(const b of p)h(this._trace(bi(b,u),e,n,s,r,i,!0))}else!a&&e&&Object.hasOwn(e,c)&&h(this._trace(u,e[c],yt(n,c),e,c,i,o,!0))}if(this._hasParentSelector)for(let p=0;p<f.length;p++){const b=f[p];if(b&&b.isParentSelector){const g=this._trace(b.expr,e,b.path,s,r,i,o);if(Array.isArray(g)){f[p]=g[0];const w=g.length;for(let m=1;m<w;m++)p++,f.splice(p,0,g[m])}else f[p]=g}}return f};Q.prototype._walk=function(t,e){if(Array.isArray(t)){const n=t.length;for(let s=0;s<n;s++)e(s)}else t&&typeof t=="object"&&Object.keys(t).forEach(n=>{e(n)})};Q.prototype._slice=function(t,e,n,s,r,i,o){if(!Array.isArray(n))return;const a=n.length,l=t.split(":"),c=l[2]&&Number.parseInt(l[2])||1;let u=l[0]&&Number.parseInt(l[0])||0,f=l[1]&&Number.parseInt(l[1])||a;u=u<0?Math.max(0,u+a):Math.min(a,u),f=f<0?Math.max(0,f+a):Math.min(a,f);const h=[];for(let p=u;p<f;p+=c)this._trace(bi(p,e),n,s,r,i,o,!0).forEach(g=>{h.push(g)});return h};Q.prototype._eval=function(t,e,n,s,r,i){this.currSandbox._$_parentProperty=i,this.currSandbox._$_parent=r,this.currSandbox._$_property=n,this.currSandbox._$_root=this.json,this.currSandbox._$_v=e;const o=t.includes("@path");o&&(this.currSandbox._$_path=Q.toPathString(s.concat([n])));const a=this.currEval+"Script:"+t;if(!Q.cache[a]){let l=t.replaceAll("@parentProperty","_$_parentProperty").replaceAll("@parent","_$_parent").replaceAll("@property","_$_property").replaceAll("@root","_$_root").replaceAll(/@([.\s)[])/gu,"_$_v$1");if(o&&(l=l.replaceAll("@path","_$_path")),this.currEval==="safe"||this.currEval===!0||this.currEval===void 0)Q.cache[a]=new this.safeVm.Script(l);else if(this.currEval==="native")Q.cache[a]=new this.vm.Script(l);else if(typeof this.currEval=="function"&&this.currEval.prototype&&Object.hasOwn(this.currEval.prototype,"runInNewContext")){const c=this.currEval;Q.cache[a]=new c(l)}else if(typeof this.currEval=="function")Q.cache[a]={runInNewContext:c=>this.currEval(l,c)};else throw new TypeError(`Unknown "eval" property "${this.currEval}"`)}try{return Q.cache[a].runInNewContext(this.currSandbox)}catch(l){if(this.ignoreEvalErrors)return!1;throw new Error("jsonPath: "+l.message+": "+t)}};Q.cache={};Q.toPathString=function(t){const e=t,n=e.length;let s="$";for(let r=1;r<n;r++)/^(~|\^|@.*?\(\))$/u.test(e[r])||(s+=/^[0-9*]+$/u.test(e[r])?"["+e[r]+"]":"['"+e[r]+"']");return s};Q.toPointer=function(t){const e=t,n=e.length;let s="";for(let r=1;r<n;r++)/^(~|\^|@.*?\(\))$/u.test(e[r])||(s+="/"+e[r].toString().replaceAll("~","~0").replaceAll("/","~1"));return s};Q.toPathArray=function(t){const{cache:e}=Q;if(e[t])return e[t].concat();const n=[],r=t.replaceAll(/@(?:null|boolean|number|string|integer|undefined|nonFinite|scalar|array|object|function|other)\(\)/gu,";$&;").replaceAll(/[['](\??\(.*?\))[\]'](?!.\])/gu,function(i,o){return"[#"+(n.push(o)-1)+"]"}).replaceAll(/\[['"]([^'\]]*)['"]\]/gu,function(i,o){return"['"+o.replaceAll(".","%@%").replaceAll("~","%%@@%%")+"']"}).replaceAll("~",";~;").replaceAll(/['"]?\.['"]?(?![^[]*\])|\[['"]?/gu,";").replaceAll("%@%",".").replaceAll("%%@@%%","~").replaceAll(/(?:;)?(\^+)(?:;)?/gu,function(i,o){return";"+o.split("").join(";")+";"}).replaceAll(/;;;|;;/gu,";..;").replaceAll(/;$|'?\]|'$/gu,"").split(";").map(function(i){const o=i.match(/#(\d+)/u);return!o||!o[1]?i:n[o[1]]});return e[t]=r,e[t].concat()};Q.prototype.safeVm={Script:iy};const ay=function(t,e,n){const s=t.length;for(let r=0;r<s;r++){const i=t[r];n(i)&&e.push(t.splice(r--,1)[0])}};class ly{constructor(e){this.code=e}runInNewContext(e){let n=this.code;const s=Object.keys(e),r=[];ay(s,r,c=>typeof e[c]=="function");const i=s.map(c=>e[c]);n=r.reduce((c,u)=>{let f=e[u].toString();return/function/u.test(f)||(f="function "+f),"var "+u+"="+f+";"+c},"")+n,!/(['"])use strict\1/u.test(n)&&!s.includes("arguments")&&(n="var arguments = undefined;"+n),n=n.replace(/;\s*$/u,"");const a=n.lastIndexOf(";"),l=a!==-1?n.slice(0,a+1)+" return "+n.slice(a+1):" return "+n;return new Function(...s,l)(...i)}}Q.prototype.vm={Script:ly};const nr=new Map;function cy(t,e){const n=nr.get(t);if(n&&n.buffer===e)return n.url;n&&URL.revokeObjectURL(n.url);const s=new Blob([e]),r=URL.createObjectURL(s);return nr.set(t,{buffer:e,url:r}),r}function la(t){const e=nr.get(t);e&&(URL.revokeObjectURL(e.url),nr.delete(t))}function ec({jsonPath:t}){const{cart:e,modelFiles:n}=Ue(),s=U.useMemo(()=>{if(!t||!e)return[];const r=Q({path:t,json:e,resultType:"value"});if(r.length===0)return[];const i=r[0];if(!i||typeof i!="object")return[];const o=new Set;function a(l){if(!l)return;const c=l["minecraft:custom_model_data"];if(c&&typeof c=="object"&&"floats"in c){const u=c.floats;Array.isArray(u)&&u.forEach(f=>o.add(f))}}if("item"in i){const l=i.item;a(l?.components)}return Array.from(o)},[t,e]);return d.jsx(d.Fragment,{children:s.map(r=>{if(!n)return d.jsx(Wn,{},r);const i=n.get(r);return i?d.jsx(uy,{modelId:r,arrayBuffer:i},r):d.jsx(Wn,{},r)})})}function uy(t){const e=$.c(9),{modelId:n,arrayBuffer:s}=t,[r,i]=U.useState(void 0);let o,a;if(e[0]!==s||e[1]!==n?(o=()=>{if(!s){i(void 0),la(n);return}const c=cy(n,s);return i(c),()=>{la(n)}},a=[n,s],e[0]=s,e[1]=n,e[2]=o,e[3]=a):(o=e[2],a=e[3]),U.useEffect(o,a),!r){let c;return e[4]!==n?(c=d.jsx(Wn,{},n),e[4]=n,e[5]=c):c=e[5],c}let l;return e[6]!==r||e[7]!==n?(l=d.jsx(fy,{modelId:n,blobUrl:r}),e[6]=r,e[7]=n,e[8]=l):l=e[8],l}function fy({modelId:t,blobUrl:e,scale:n=1,position:s=new Ee(0,0,0)}){const{scene:r}=Ti(e),i=U.useMemo(()=>{if(!r)return null;const o=Ia(r);o.updateWorldMatrix(!0,!0);const a=new Gs().setFromObject(o),l=new Ee;a.getCenter(l);const c=new Ee;a.getSize(c);const u=new Ee(l.x,a.min.y,l.z),f=new Rf;return o.traverse(h=>{h.isMesh&&h.position.sub(u)}),f.add(o),f},[r]);return i?d.jsx(d.Fragment,{children:d.jsx("primitive",{object:i,scale:n,position:s,rotation:[0,rt(180),0],castShadow:!0,receiveShadow:!0})}):d.jsx(Wn,{},t)}const tc="/tc-animator/assets/dummy-DI_pM9Uk.glb";Ti.preload(tc);function hy({scale:t=1,position:e=new Ee(0,0,0)}){const{scene:n}=Ti(tc),s=U.useMemo(()=>n?Ia(n):null,[n]);return s?d.jsx("primitive",{object:s,scale:t,position:e,castShadow:!0,receiveShadow:!0,rotation:[0,rt(180),0]}):d.jsx(Wn,{})}function ca(t){const e=$.c(14),n=U.useRef(null),{camera:s}=ir();let r;e[0]!==s?(r=()=>{if(!n.current)return;const g=n.current.getWorldPosition(new Ee),w=s.position.clone();w.y=g.y;const m=w.sub(g).normalize();let S=Math.atan2(m.x,m.z);if(n.current.parent){const v=new Ca;n.current.parent.getWorldQuaternion(v);const E=new Ni().setFromQuaternion(v,"YXZ").y;S=S-E+Math.PI}else S=S+Math.PI;n.current.rotation.set(0,S+rt(180),0)},e[0]=s,e[1]=r):r=e[1],Ai(r);let i;e[2]===Symbol.for("react.memo_cache_sentinel")?(i=[.3,.3,.3],e[2]=i):i=e[2];let o,a=0,l=0,c=-.1;const u=t.position;Array.isArray(u)&&u.length===3?(a=u[0]??0,l=u[1]??0,c=(u[2]??0)-.1):u&&typeof u=="object"&&"x"in u&&"y"in u&&"z"in u?(a=u.x??0,l=u.y??0,c=(u.z??0)-.1):typeof u=="number"&&(a=u);let f;e[3]!==a||e[4]!==l||e[5]!==c?(f=new Ee(a,l,c),e[3]=a,e[4]=l,e[5]=c,e[6]=f):f=e[6],o=f;let h;e[7]!==o?(h=d.jsx(wf,{castShadow:!0,receiveShadow:!0,args:i,position:o}),e[7]=o,e[8]=h):h=e[8];let p;e[9]!==t?(p=d.jsx(bf,{ref:n,...t,renderOrder:9999,children:t.children}),e[9]=t,e[10]=p):p=e[10];let b;return e[11]!==h||e[12]!==p?(b=d.jsxs(d.Fragment,{children:[h,p]}),e[11]=h,e[12]=p,e[13]=b):b=e[13],b}function dy(t){const e=$.c(33),{onSelect:n,onHover:s}=t,{cart:r,setSelectedObjectPath:i}=Ue(),o=U.useRef(null);if(!r?.model)return null;const{position:a}=r.model,l=a?.posX||0,c=a?.posY||0,u=a?.posZ||0;let f;e[0]!==l||e[1]!==c||e[2]!==u?(f=new Ee(l,c,u),e[0]=l,e[1]=c,e[2]=u,e[3]=f):f=e[3];const h=f,p=a?.rotX||0;let b;e[4]!==a?.rotY||e[5]!==a?.rotZ||e[6]!==p?(b=new Ni(rt(p),rt(a?.rotY||0),rt(a?.rotZ||0)),e[4]=a?.rotY,e[5]=a?.rotZ,e[6]=p,e[7]=b):b=e[7];const g=b,w=a?.sizeX||1,m=a?.sizeY||1,S=a?.sizeZ||1;let v;e[8]!==w||e[9]!==m||e[10]!==S?(v=new Ee(w,m,S),e[8]=w,e[9]=m,e[10]=S,e[11]=v):v=e[11];const _=v;let E,A;e[12]!==s?(E=N=>{N.stopPropagation(),o.current&&s(o.current)},A=N=>{N.stopPropagation(),s(null)},e[12]=s,e[13]=E,e[14]=A):(E=e[13],A=e[14]);let y;e[15]!==n||e[16]!==i?(y=N=>{N.stopPropagation(),o.current&&(n(o.current),i("$.model"))},e[15]=n,e[16]=i,e[17]=y):y=e[17];let x;e[18]===Symbol.for("react.memo_cache_sentinel")?(x=d.jsx(ec,{jsonPath:"$.model"}),e[18]=x):x=e[18];let k;e[19]!==_?(k=d.jsx("group",{scale:_,children:x}),e[19]=_,e[20]=k):k=e[20];let T;e[21]!==r.model||e[22]!==s||e[23]!==n?(T=d.jsx(nc,{attachments:r.model,onSelect:n,onHover:s,jsonPath:"$.model"}),e[21]=r.model,e[22]=s,e[23]=n,e[24]=T):T=e[24];let I;return e[25]!==h||e[26]!==g||e[27]!==E||e[28]!==A||e[29]!==y||e[30]!==k||e[31]!==T?(I=d.jsxs("group",{ref:o,position:h,rotation:g,onPointerOver:E,onPointerOut:A,onClick:y,children:[k,T]}),e[25]=h,e[26]=g,e[27]=E,e[28]=A,e[29]=y,e[30]=k,e[31]=T,e[32]=I):I=e[32],I}function py(t){const e=$.c(61),{attachment:n,onSelect:s,onHover:r,jsonPath:i}=t,o=Jn(),{setSelectedObjectPath:a}=Ue(),l=U.useRef(null),c=n.position?.posX||0,u=n.position?.posY||0,f=n.position?.posZ||0;let h,p,b,g,w,m,S,v;if(e[0]!==n.names||e[1]!==n.position?.rotX||e[2]!==n.position?.rotY||e[3]!==n.position?.rotZ||e[4]!==n.position?.sizeX||e[5]!==n.position?.sizeY||e[6]!==n.position?.sizeZ||e[7]!==n.type||e[8]!==i||e[9]!==r||e[10]!==s||e[11]!==o.debugText||e[12]!==a||e[13]!==c||e[14]!==u||e[15]!==f){const A=new Ee(c,u,f),y=new Ni(rt(n.position?.rotX||0),rt(n.position?.rotY||0),rt(n.position?.rotZ||0)),x=n.position?.sizeX||1,k=n.position?.sizeY||1,T=n.position?.sizeZ||1;let I;e[24]!==x||e[25]!==k||e[26]!==T?(I=new Ee(x,k,T),e[24]=x,e[25]=k,e[26]=T,e[27]=I):I=e[27];const N=I;b=l,g=A,w=y,e[28]!==n.type||e[29]!==r?(m=R=>{l.current&&!["SEAT","HITBOX"].includes(n.type)&&(R.stopPropagation(),r(l.current))},e[28]=n.type,e[29]=r,e[30]=m):m=e[30],e[31]!==r?(S=R=>{R.stopPropagation(),r(null)},e[31]=r,e[32]=S):S=e[32],e[33]!==n.type||e[34]!==i||e[35]!==s||e[36]!==a?(v=R=>{l.current&&!["SEAT","HITBOX"].includes(n.type)&&(R.stopPropagation(),s(l.current),a(i))},e[33]=n.type,e[34]=i,e[35]=s,e[36]=a,e[37]=v):v=e[37];let j;e:switch(n.type){case"SEAT":{const R=o.debugText&&d.jsx(ca,{fontSize:.3,color:"white",anchorX:"center",anchorY:"middle",outlineWidth:.05,outlineColor:"black",position:[0,3.5,0],children:`${n.names&&Array.isArray(n.names)&&n.names.length>0?n.names[0]:"Seat"}
Pos:${A.toArray().map(wy)}`});let M;e[38]===Symbol.for("react.memo_cache_sentinel")?(M=d.jsx(hy,{}),e[38]=M):M=e[38];let P;e[39]!==R?(P=d.jsxs(d.Fragment,{children:[R,M]}),e[39]=R,e[40]=P):P=e[40],j=P;break e}case"HITBOX":{j=null;break e}default:{let R;e[41]!==i?(R=d.jsx(ec,{jsonPath:i}),e[41]=i,e[42]=R):R=e[42],j=R}}e[43]!==N||e[44]!==j?(h=d.jsx("group",{scale:N,children:j}),e[43]=N,e[44]=j,e[45]=h):h=e[45],p=o.debugText&&!["SEAT","HITBOX"].includes(n.type)&&d.jsx(ca,{position:[0,1.5,0],fontSize:.3,color:"yellow",anchorX:"center",anchorY:"middle",scale:[1,1,1],outlineWidth:.05,outlineColor:"black",children:`${n.names&&Array.isArray(n.names)&&n.names.length>0?n.names[0]:""}
Pos:${A.toArray().map(by)}
rot:${y.toArray().filter(yy).map(gy)}
scale:${N.toArray().map(my)}`}),e[0]=n.names,e[1]=n.position?.rotX,e[2]=n.position?.rotY,e[3]=n.position?.rotZ,e[4]=n.position?.sizeX,e[5]=n.position?.sizeY,e[6]=n.position?.sizeZ,e[7]=n.type,e[8]=i,e[9]=r,e[10]=s,e[11]=o.debugText,e[12]=a,e[13]=c,e[14]=u,e[15]=f,e[16]=h,e[17]=p,e[18]=b,e[19]=g,e[20]=w,e[21]=m,e[22]=S,e[23]=v}else h=e[16],p=e[17],b=e[18],g=e[19],w=e[20],m=e[21],S=e[22],v=e[23];let _;e[46]!==n||e[47]!==i||e[48]!==r||e[49]!==s?(_=n.attachments&&d.jsx(nc,{attachments:n,onSelect:s,onHover:r,jsonPath:`${i}`}),e[46]=n,e[47]=i,e[48]=r,e[49]=s,e[50]=_):_=e[50];let E;return e[51]!==h||e[52]!==p||e[53]!==_||e[54]!==b||e[55]!==g||e[56]!==w||e[57]!==m||e[58]!==S||e[59]!==v?(E=d.jsxs("group",{ref:b,position:g,rotation:w,onPointerOver:m,onPointerOut:S,onClick:v,children:[h,p,_]}),e[51]=h,e[52]=p,e[53]=_,e[54]=b,e[55]=g,e[56]=w,e[57]=m,e[58]=S,e[59]=v,e[60]=E):E=e[60],E}function my(t){return t.toFixed(2)}function gy(t){return t.toFixed(2)}function yy(t){return typeof t=="number"}function by(t){return t.toFixed(2)}function wy(t){return`
${t.toFixed(2)}`}function nc({attachments:t,onSelect:e,onHover:n,jsonPath:s}){return Object.entries(t.attachments||{}).map(([r,i])=>d.jsx(py,{attachment:i,onSelect:e,onHover:n,jsonPath:`${s}.attachments.${r}`},r))}function ua(t){const e=$.c(13),{selection:n,color:s,scaleFactor:r}=t,i=s===void 0?16753920:s,o=r===void 0?1.05:r,{scene:a}=ir(),l=U.useRef(null);let c;e:{if(!n){let g;e[0]===Symbol.for("react.memo_cache_sentinel")?(g=new Ee(1,1,1),e[0]=g):g=e[0],c=g;break e}let b;if(e[1]!==o||e[2]!==n){const g=n.clone(!0);g.rotation.set(0,0,0),g.updateWorldMatrix(!0,!0),b=new Gs().setFromObject(g).getSize(new Ee).multiplyScalar(o),g.remove(),e[1]=o,e[2]=n,e[3]=b}else b=e[3];c=b}const u=c;let f,h;e[4]!==u||e[5]!==i||e[6]!==a||e[7]!==n?(f=()=>{if(n){if(!l.current){const b=new fo(new ho(u.x,u.y,u.z)),g=new Mf({color:i});l.current=new Pf(b,g),a.add(l.current)}return()=>{l.current&&(a.remove(l.current),l.current.geometry.dispose(),l.current=null)}}},h=[n,a,i,u],e[4]=u,e[5]=i,e[6]=a,e[7]=n,e[8]=f,e[9]=h):(f=e[8],h=e[9]),U.useEffect(f,h);let p;return e[10]!==u||e[11]!==n?(p=()=>{if(!l.current||!n)return;const b=new Gs().setFromObject(n).getCenter(new Ee);l.current.geometry.dispose(),l.current.geometry=new fo(new ho(u.x,u.y,u.z)),l.current.position.copy(b),l.current.quaternion.copy(n.getWorldQuaternion(new Ca))},e[10]=u,e[11]=n,e[12]=p):p=e[12],Ai(p),null}function vy(t){const e=$.c(26);let n,s,r,i,o,a;e[0]!==t?({className:n,defaultValue:s,value:a,min:i,max:o,...r}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r,e[4]=i,e[5]=o,e[6]=a):(n=e[1],s=e[2],r=e[3],i=e[4],o=e[5],a=e[6]);const l=i===void 0?0:i,c=o===void 0?100:o;let u,f;e[7]!==s||e[8]!==c||e[9]!==l||e[10]!==a?(f=Array.isArray(a)?a:Array.isArray(s)?s:[l,c],e[7]=s,e[8]=c,e[9]=l,e[10]=a,e[11]=f):f=e[11],u=f;const h=u;let p;e[12]!==n?(p=V("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",n),e[12]=n,e[13]=p):p=e[13];let b;e[14]===Symbol.for("react.memo_cache_sentinel")?(b=V("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),e[14]=b):b=e[14];let g;e[15]===Symbol.for("react.memo_cache_sentinel")?(g=d.jsx(Wu,{"data-slot":"slider-track",className:b,children:d.jsx(Xu,{"data-slot":"slider-range",className:V("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),e[15]=g):g=e[15];let w;e[16]!==h.length?(w=Array.from({length:h.length},xy),e[16]=h.length,e[17]=w):w=e[17];let m;return e[18]!==s||e[19]!==c||e[20]!==l||e[21]!==r||e[22]!==p||e[23]!==w||e[24]!==a?(m=d.jsxs(Qu,{"data-slot":"slider",defaultValue:s,value:a,min:l,max:c,className:p,...r,children:[g,w]}),e[18]=s,e[19]=c,e[20]=l,e[21]=r,e[22]=p,e[23]=w,e[24]=a,e[25]=m):m=e[25],m}function xy(t,e){return d.jsx(Ju,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},e)}function _y(t){const e=$.c(17),{value:n,onChange:s}=t,r=n===void 0?0:n;let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=[0,1,5,11.25,15,22.5,30,45],e[0]=i):i=e[0];const o=i,[a,l]=U.useState(r||0);let c;e[1]!==s?(c=_=>{l(_),s(_)},e[1]=s,e[2]=c):c=e[2];const u=c;let f;e[3]===Symbol.for("react.memo_cache_sentinel")?(f=_=>o.reduce((E,A)=>Math.abs(A-_)<Math.abs(E-_)?A:E),e[3]=f):f=e[3];const h=f;let p;e[4]===Symbol.for("react.memo_cache_sentinel")?(p={minWidth:"5ch"},e[4]=p):p=e[4];const b=a>0?`${a}`:"Off";let g;e[5]!==b?(g=d.jsxs(We,{className:"flex items-center gap-1 font-semibold whitespace-nowrap",children:["Angle Snap:",d.jsx("span",{className:"inline-block",style:p,children:b})]}),e[5]=b,e[6]=g):g=e[6];let w;e[7]!==a?(w=[a],e[7]=a,e[8]=w):w=e[8];let m;e[9]!==u?(m=_=>{const E=h(_[0]);u(E)},e[9]=u,e[10]=m):m=e[10];let S;e[11]!==w||e[12]!==m?(S=d.jsx(vy,{min:0,max:45,step:.1,value:w,onValueChange:m,className:"w-full"}),e[11]=w,e[12]=m,e[13]=S):S=e[13];let v;return e[14]!==S||e[15]!==g?(v=d.jsxs("div",{className:"flex w-sm flex-row items-center gap-2",children:[g,S]}),e[14]=S,e[15]=g,e[16]=v):v=e[16],v}const Ey=Pa("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium hover:bg-muted hover:text-muted-foreground disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] outline-none transition-[color,box-shadow] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive whitespace-nowrap",{variants:{variant:{default:"bg-card",outline:"border border-input bg-card shadow-xs hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-2 min-w-9",sm:"h-8 px-1.5 min-w-8",lg:"h-10 px-2.5 min-w-10"}},defaultVariants:{variant:"default",size:"default"}});function fa(t){const e=$.c(12);let n,s,r,i;e[0]!==t?({className:n,variant:i,size:r,...s}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r,e[4]=i):(n=e[1],s=e[2],r=e[3],i=e[4]);let o;e[5]!==n||e[6]!==r||e[7]!==i?(o=V(Ey({variant:i,size:r,className:n})),e[5]=n,e[6]=r,e[7]=i,e[8]=o):o=e[8];let a;return e[9]!==s||e[10]!==o?(a=d.jsx(ef,{"data-slot":"toggle",className:o,...s}),e[9]=s,e[10]=o,e[11]=a):a=e[11],a}function Sy({controlsRef:t}){const e=Ue(),{camera:n}=ir();return U.useEffect(()=>{const s=t.current,r=e.metadata.orbitControls;!s||!r||(n.position.copy(new Ee(...r.position)),s.target.copy(new Ee(...r.target)),r.zoom&&"zoom"in n&&(n.zoom=r.zoom,n.updateProjectionMatrix()),s.update())},[e.metadata.orbitControls,n,t]),U.useEffect(()=>{const s=t.current;if(!s)return;const r=()=>{e.setMetadata({...e.metadata,orbitControls:{position:n.position.toArray(),target:s.target.toArray(),zoom:n.zoom}})};return s.addEventListener("change",r),()=>s.removeEventListener("change",r)},[n,e,t]),null}function ky(){const t=$.c(100),e=Jn(),n=Ue(),s=U.useRef(null),[r,i]=U.useState(null),[o,a]=U.useState(null),[l,c]=U.useState("translate"),[u,f]=U.useState("world");let h,p;t[0]!==n||t[1]!==r||t[2]!==u?(h=()=>{const ut=qe=>{if(!(qe.target&&qe.target.isContentEditable))if(qe.key==="v"||qe.key==="V")c("translate");else if(qe.key==="r"||qe.key==="R")c("rotate");else if(qe.key==="x"||qe.key==="X")f(u==="world"?"local":"world");else if(qe.key==="f"||qe.key==="F"){if(r){const co=new Gs().setFromObject(r),Bc=co.getSize(new Ee).length(),Tr=co.getCenter(new Ee),Uc=Bc*1.5,Nr=s.current?.object;if(Nr){const Zc=new Ee().subVectors(Nr.position,Tr).normalize().multiplyScalar(Uc);Nr.position.copy(Zc.add(Tr)),s.current?.target.copy(Tr),s.current?.update()}}}else qe.key==="Escape"&&(n.setSelectedObjectPath(void 0),i(null))};return window.addEventListener("keydown",ut),()=>{window.removeEventListener("keydown",ut)}},p=[u,n,r],t[0]=n,t[1]=r,t[2]=u,t[3]=h,t[4]=p):(h=t[3],p=t[4]),U.useEffect(h,p);let b,g;if(t[5]!==n.cart||t[6]!==r?(b=()=>{r&&(n.cart||i(null))},g=[n.cart,r],t[5]=n.cart,t[6]=r,t[7]=b,t[8]=g):(b=t[7],g=t[8]),U.useEffect(b,g),!n.cart){let ut;return t[9]===Symbol.for("react.memo_cache_sentinel")?(ut=d.jsx("div",{className:"flex h-full w-full items-center justify-center bg-black",children:d.jsx("p",{className:"text-muted-foreground",children:"No cart selected. Please create or open a project."})}),t[9]=ut):ut=t[9],ut}let w;t[10]===Symbol.for("react.memo_cache_sentinel")?(w=d.jsx(Sf,{},"smaa"),t[10]=w):w=t[10];let m;t[11]!==e.SSAOEnabled?(m=e.SSAOEnabled&&d.jsx(vf,{},"ssao"),t[11]=e.SSAOEnabled,t[12]=m):m=t[12];let S;t[13]!==e.DOFEnabled?(S=e.DOFEnabled&&d.jsx(xf,{focusDistance:2,focalLength:5,bokehScale:2},"dof"),t[13]=e.DOFEnabled,t[14]=S):S=t[14];let v;t[15]!==m||t[16]!==S?(v=[w,m,S].filter(Boolean),t[15]=m,t[16]=S,t[17]=v):v=t[17];const _=v,E=`three-bg ${o?"cursor-pointer":"cursor-default"}`;let A;t[18]===Symbol.for("react.memo_cache_sentinel")?(A={position:[3,3,3],fov:45},t[18]=A):A=t[18];let y,x;t[19]===Symbol.for("react.memo_cache_sentinel")?(y=[1,2],x={toneMapping:0,powerPreference:"high-performance",alpha:!1,antialias:!0,stencil:!1,autoClear:!1,depth:!0},t[19]=y,t[20]=x):(y=t[19],x=t[20]);let k;t[21]!==n?(k=ut=>{ut.type==="click"&&(n.setSelectedObjectPath(void 0),i(null))},t[21]=n,t[22]=k):k=t[22];let T;t[23]!==_?(T=d.jsx(kf,{enabled:!0,enableNormalPass:!0,depthBuffer:!0,stencilBuffer:!0,children:_}),t[23]=_,t[24]=T):T=t[24];let I,N,j,R;t[25]===Symbol.for("react.memo_cache_sentinel")?(I=d.jsx(Z0,{}),N=d.jsx(Af,{all:!0}),j=d.jsx("ambientLight",{intensity:2}),R=d.jsx("directionalLight",{position:[5,5,5],intensity:3,castShadow:!0}),t[25]=I,t[26]=N,t[27]=j,t[28]=R):(I=t[25],N=t[26],j=t[27],R=t[28]);let M;t[29]===Symbol.for("react.memo_cache_sentinel")?(M=d.jsx(U.Suspense,{fallback:d.jsx(Tf,{center:!0,children:"Loading..."}),children:d.jsx(dy,{onSelect:i,onHover:a})}),t[29]=M):M=t[29];let P;t[30]===Symbol.for("react.memo_cache_sentinel")?(P=[.5,-.501,.5],t[30]=P):P=t[30];const L=e.gridColor;let Z;t[31]!==e?(Z=e.getComplementaryGridColor(),t[31]=e,t[32]=Z):Z=t[32];let F;t[33]!==e.gridColor||t[34]!==Z?(F=d.jsx(Nf,{position:P,cellSize:.0625,sectionSize:1,cellThickness:.5,sectionThickness:1.5,cellColor:L,sectionColor:Z,infiniteGrid:!0,side:$f}),t[33]=e.gridColor,t[34]=Z,t[35]=F):F=t[35];let J;t[36]!==e.angleSnap||t[37]!==e.distanceSnap||t[38]!==r||t[39]!==l||t[40]!==u?(J=r&&d.jsx(_f,{object:r,mode:l,rotationSnap:rt(e.angleSnap),translationSnap:e.distanceSnap,onMouseDown:()=>s.current.enabled=!1,onMouseUp:()=>s.current.enabled=!0,space:u}),t[36]=e.angleSnap,t[37]=e.distanceSnap,t[38]=r,t[39]=l,t[40]=u,t[41]=J):J=t[41];let H;t[42]!==e.controlDamping?(H=d.jsx(Ef,{ref:s,makeDefault:!0,enableDamping:e.controlDamping}),t[42]=e.controlDamping,t[43]=H):H=t[43];let ie;t[44]===Symbol.for("react.memo_cache_sentinel")?(ie=[80,80],t[44]=ie):ie=t[44];let Y,ee;t[45]===Symbol.for("react.memo_cache_sentinel")?(Y=d.jsx(Of,{alignment:"bottom-right",margin:ie,children:d.jsx(If,{axisColors:["#9d4b4b","#2f7f4f","#3b5b9d"],labelColor:"white"})}),ee=d.jsx(Sy,{controlsRef:s}),t[45]=Y,t[46]=ee):(Y=t[45],ee=t[46]);let ne;t[47]!==o?(ne=o&&d.jsx(ua,{selection:o,color:16753920,scaleFactor:1.1}),t[47]=o,t[48]=ne):ne=t[48];let ye;t[49]!==r?(ye=r&&d.jsx(ua,{selection:r,color:65535,scaleFactor:1.1}),t[49]=r,t[50]=ye):ye=t[50];let Re;t[51]!==k||t[52]!==T||t[53]!==F||t[54]!==J||t[55]!==H||t[56]!==ne||t[57]!==ye||t[58]!==E?(Re=d.jsxs(Cf,{className:E,camera:A,shadows:!0,dpr:y,gl:x,onPointerMissed:k,children:[T,I,N,j,R,M,F,J,H,Y,ee,ne,ye]}),t[51]=k,t[52]=T,t[53]=F,t[54]=J,t[55]=H,t[56]=ne,t[57]=ye,t[58]=E,t[59]=Re):Re=t[59];let Ze;t[60]===Symbol.for("react.memo_cache_sentinel")?(Ze=d.jsx(V0,{}),t[60]=Ze):Ze=t[60];let Ve;t[61]!==u?(Ve=()=>{f(u==="world"?"local":"world")},t[61]=u,t[62]=Ve):Ve=t[62];let Ke;t[63]!==u?(Ke=d.jsx(vt,{children:u==="world"?d.jsx(ru,{}):d.jsx(iu,{})}),t[63]=u,t[64]=Ke):Ke=t[64];let $e;t[65]!==Ve||t[66]!==Ke?($e=d.jsx(at,{variant:"secondary",size:"icon",asChild:!0,onClick:Ve,children:Ke}),t[65]=Ve,t[66]=Ke,t[67]=$e):$e=t[67];const ct=u==="world"?"World Space":"Local Space";let Ge;t[68]===Symbol.for("react.memo_cache_sentinel")?(Ge=d.jsx("kbd",{className:"text-muted-foreground ml-1",children:"X"}),t[68]=Ge):Ge=t[68];let et;t[69]!==ct?(et=d.jsxs(xt,{children:[ct,Ge]}),t[69]=ct,t[70]=et):et=t[70];let Qt;t[71]!==$e||t[72]!==et?(Qt=d.jsxs(wt,{children:[$e,et]}),t[71]=$e,t[72]=et,t[73]=Qt):Qt=t[73];const kr=l==="translate";let as;t[74]===Symbol.for("react.memo_cache_sentinel")?(as=()=>c("translate"),t[74]=as):as=t[74];let ls;t[75]===Symbol.for("react.memo_cache_sentinel")?(ls=d.jsx(vt,{children:d.jsx(ou,{})}),t[75]=ls):ls=t[75];let Jt;t[76]!==kr?(Jt=d.jsx(fa,{pressed:kr,onClick:as,asChild:!0,children:ls}),t[76]=kr,t[77]=Jt):Jt=t[77];let cs;t[78]===Symbol.for("react.memo_cache_sentinel")?(cs=d.jsxs(xt,{children:["Translate Mode",d.jsx("kbd",{className:"text-muted-foreground ml-1",children:"V"})]}),t[78]=cs):cs=t[78];let en;t[79]!==Jt?(en=d.jsxs(wt,{children:[Jt,cs]}),t[79]=Jt,t[80]=en):en=t[80];const Ar=l==="rotate";let us;t[81]===Symbol.for("react.memo_cache_sentinel")?(us=()=>c("rotate"),t[81]=us):us=t[81];let fs;t[82]===Symbol.for("react.memo_cache_sentinel")?(fs=d.jsx(vt,{children:d.jsx(au,{})}),t[82]=fs):fs=t[82];let tn;t[83]!==Ar?(tn=d.jsx(fa,{pressed:Ar,onClick:us,asChild:!0,children:fs}),t[83]=Ar,t[84]=tn):tn=t[84];let hs;t[85]===Symbol.for("react.memo_cache_sentinel")?(hs=d.jsxs(xt,{children:["Rotate Mode",d.jsx("kbd",{className:"text-muted-foreground ml-1",children:"R"})]}),t[85]=hs):hs=t[85];let nn;t[86]!==tn?(nn=d.jsxs(wt,{children:[tn,hs]}),t[86]=tn,t[87]=nn):nn=t[87];let sn;t[88]!==e.angleSnap||t[89]!==e.setAngleSnap||t[90]!==l?(sn=l==="rotate"&&d.jsx(_y,{value:e.angleSnap,onChange:e.setAngleSnap}),t[88]=e.angleSnap,t[89]=e.setAngleSnap,t[90]=l,t[91]=sn):sn=t[91];let rn;t[92]!==Qt||t[93]!==en||t[94]!==nn||t[95]!==sn?(rn=d.jsxs("div",{className:"absolute top-[8px] left-[8px] flex flex-row gap-[8px]",children:[Qt,en,nn,sn]}),t[92]=Qt,t[93]=en,t[94]=nn,t[95]=sn,t[96]=rn):rn=t[96];let ds;return t[97]!==Re||t[98]!==rn?(ds=d.jsxs("div",{className:"relative h-full w-full",children:[Re,Ze,rn]}),t[97]=Re,t[98]=rn,t[99]=ds):ds=t[99],ds}function Ay(t){const e=$.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=V("flex flex-col gap-2",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=d.jsx(tf,{"data-slot":"tabs",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function Ty(t){const e=$.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=V("bg-muted text-muted-foreground inline-flex flex-wrap w-fit items-center justify-center rounded-lg p-[3px]",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=d.jsx(nf,{"data-slot":"tabs-list",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function Os(t){const e=$.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=V("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-9  items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 flex-1",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=d.jsx(sf,{"data-slot":"tabs-trigger",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function Is(t){const e=$.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=V("flex-1 outline-none",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=d.jsx(rf,{"data-slot":"tabs-content",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function Ny(t){const e=$.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=V("w-full caption-bottom text-sm",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=d.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:d.jsx("table",{"data-slot":"table",className:r,...s})}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function Oy(t){const e=$.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=V("[&_tr]:border-b",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=d.jsx("thead",{"data-slot":"table-header",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function Iy(t){const e=$.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=V("[&_tr:last-child]:border-0",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=d.jsx("tbody",{"data-slot":"table-body",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function ha(t){const e=$.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=V("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=d.jsx("tr",{"data-slot":"table-row",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function da(t){const e=$.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=V("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=d.jsx("th",{"data-slot":"table-head",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function pa(t){const e=$.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=V("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=d.jsx("td",{"data-slot":"table-cell",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}const Cy="/tc-animator/assets/blockbench-settings-G7FDEJl4.png";function jy(){const t=$.c(31),{modelIds:e,selectedObjectPath:n,cart:s,modelFiles:r,setModelFile:i}=Ue();let o;e:{if(!n||!s){let k;t[0]===Symbol.for("react.memo_cache_sentinel")?(k=[],t[0]=k):k=t[0],o=k;break e}let y;if(t[1]!==s||t[2]!==n){const k=Q({path:n,json:s,resultType:"value"});if(k.length===0){let N;t[5]===Symbol.for("react.memo_cache_sentinel")?(N=[],t[5]=N):N=t[5],o=N;break e}const T=k[0];if(!T||typeof T!="object"){let N;t[6]===Symbol.for("react.memo_cache_sentinel")?(N=[],t[6]=N):N=t[6],o=N;break e}y=new Set;const I=function(j){if(!j)return;const R=j["minecraft:custom_model_data"];if(R&&typeof R=="object"&&"floats"in R){const M=R.floats;Array.isArray(M)&&M.forEach(P=>y.add(P))}};if("item"in T){const N=T.item;I(N?.components)}t[1]=s,t[2]=n,t[3]=y,t[4]=o}else y=t[3],o=t[4];let x;t[7]!==y?(x=Array.from(y),t[7]=y,t[8]=x):x=t[8],o=x}const a=o;let l;t[9]!==i?(l=async y=>{try{const x=await Ii({mimeTypes:["model/gltf+json","model/gltf-binary"],extensions:[".gltf",".glb"],multiple:!1,description:"3D Model (GLTF/GLB)",id:"tca-models"}),k=await x.arrayBuffer();let T=k;if(x.name.toLowerCase().endsWith(".gltf"))try{const I=await Jl(k);T=Ma(I.buffer)}catch(I){console.error("Failed to convert GLTF to GLB:",I),alert("Failed to convert GLTF to GLB. See console for details."),i(y,T)}i(y,T)}catch(x){const k=x;k.name!=="AbortError"&&(console.error("Error loading model file:",k),alert("Error loading model file. See console for details."))}},t[9]=i,t[10]=l):l=t[10];const c=l;let u,f;t[11]===Symbol.for("react.memo_cache_sentinel")?(u=d.jsx("br",{}),f=d.jsx("br",{}),t[11]=u,t[12]=f):(u=t[11],f=t[12]);let h;t[13]===Symbol.for("react.memo_cache_sentinel")?(h=d.jsx("b",{children:"GLTF"}),t[13]=h):h=t[13];let p;t[14]===Symbol.for("react.memo_cache_sentinel")?(p=d.jsx("b",{children:"GLB"}),t[14]=p):p=t[14];let b;t[15]===Symbol.for("react.memo_cache_sentinel")?(b=d.jsx(vt,{className:"mx-1 cursor-help font-bold underline underline-offset-2",children:"Blockbench"}),t[15]=b):b=t[15];let g;t[16]===Symbol.for("react.memo_cache_sentinel")?(g=d.jsxs(wt,{children:[b,d.jsxs(xt,{children:[d.jsx("p",{className:"mb-2",children:"Use these settings when exporting from Blockbench:"}),d.jsx("img",{src:Cy,alt:"Blockbench export settings"})]})]}),t[16]=g):g=t[16];let w,m;t[17]===Symbol.for("react.memo_cache_sentinel")?(w=d.jsx("br",{}),m=d.jsx("br",{}),t[17]=w,t[18]=m):(w=t[17],m=t[18]);let S,v;t[19]===Symbol.for("react.memo_cache_sentinel")?(S=d.jsxs("p",{className:"text-muted-foreground mb-4",children:["You can replace the default cubes with your own 3D models to make the cart look like it would in-game with a resourcepack.",u,f,"Models must be in ",h," or ",p," format. These can be exported from",g,"or most 3D software.",w,m,"Below, you'll see each ",d.jsx("b",{children:"Custom Model ID"})," for your attachments. Select an attachment in the 3D view to highlight the corresponding ID if it has one. Upload your model next to the matching ID to apply it in TC Animator."]}),v=d.jsx("hr",{className:"my-4"}),t[19]=S,t[20]=v):(S=t[19],v=t[20]);let _;t[21]!==e.length?(_=e.length===0&&d.jsx("p",{className:"text-muted-foreground text-sm",children:"No custom models required for this cart."}),t[21]=e.length,t[22]=_):_=t[22];let E;t[23]!==c||t[24]!==r||t[25]!==e||t[26]!==a?(E=e.length>0&&d.jsxs(Ny,{children:[d.jsx(Oy,{children:d.jsxs(ha,{children:[d.jsx(da,{children:"Custom Model ID"}),d.jsx(da,{children:"Upload Model"})]})}),d.jsx(Iy,{children:e.map(y=>d.jsxs(ha,{children:[d.jsx(pa,{className:a.includes(y)?"font-bold text-yellow-500":"",children:y}),d.jsx(pa,{children:d.jsx(at,{variant:"secondary",size:"sm",onClick:()=>c(y),children:r.get(y)?"Change Model":"Upload Model"})})]},y))})]}),t[23]=c,t[24]=r,t[25]=e,t[26]=a,t[27]=E):E=t[27];let A;return t[28]!==_||t[29]!==E?(A=d.jsxs(d.Fragment,{children:[S,v,_,E]}),t[28]=_,t[29]=E,t[30]=A):A=t[30],A}function ma(t){const e=$.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=V("bg-accent animate-pulse rounded-md",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=d.jsx("div",{"data-slot":"skeleton",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}const ga=U.lazy(()=>jf(()=>import("./monaco-B-o7uJD9.js"),__vite__mapDeps([0,1,2])));function Ry(){const t=Ue(),e=U.useMemo(()=>({...t,cart:void 0,modelFiles:void 0,fileHandle:void 0}),[t]);return d.jsxs(Ay,{defaultValue:"object-controls",className:"-mt-4 h-full w-full",children:[d.jsxs(Ty,{className:"w-full rounded-none",children:[d.jsx(Os,{value:"object-controls",children:"Object Controls"}),d.jsx(Os,{value:"custom-models",children:"Custom Models"}),d.jsx(Os,{value:"cart-debug",children:"Cart Debug"}),d.jsx(Os,{value:"project-debug",children:"Project Debug"})]}),d.jsx(Is,{value:"object-controls",className:"px-4",children:"W.I.P."}),d.jsx(Is,{value:"custom-models",className:"px-4",children:d.jsx(jy,{})}),d.jsx(Is,{value:"cart-debug",children:d.jsx(U.Suspense,{fallback:d.jsx(ma,{className:"h-full w-full"}),children:d.jsx(ga,{language:"json",theme:"vs-dark",value:JSON.stringify(t.cart,null,2),options:{minimap:{enabled:!0},scrollbar:{alwaysConsumeMouseWheel:!1},wordWrap:"on",automaticLayout:!0},onChange:n=>{if(n)try{const s=JSON.parse(n);t.setCart(s)}catch(s){console.error("Failed to parse JSON:",s)}}})})}),d.jsx(Is,{value:"project-debug",children:d.jsxs(U.Suspense,{fallback:d.jsx(ma,{className:"h-full w-full"}),children:[d.jsx(at,{className:"mb-2 block w-full",onClick:()=>t.logState(),children:"Log State to Console"}),d.jsx(ga,{language:"json",theme:"vs-dark",value:JSON.stringify(e,null,2),options:{minimap:{enabled:!1},scrollbar:{alwaysConsumeMouseWheel:!1},wordWrap:"off",automaticLayout:!0,readOnly:!0}})]})})]})}function My(){const t=$.c(16),[e,n]=U.useState(null),[s,r]=U.useState(null),[i,o]=U.useState(!1);let a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=v=>{r(v),o(!1)},t[0]=a):a=t[0];const l=a;let c;t[1]!==s?(c=()=>{s&&s.playPause()},t[1]=s,t[2]=c):c=t[2];const u=c;let f;t[3]===Symbol.for("react.memo_cache_sentinel")?(f=d.jsx(Oi,{type:"file",accept:"audio/*",onChange:v=>{if(v.target.files&&v.target.files.length>0){const _=v.target.files[0];n(_)}}}),t[3]=f):f=t[3];let h;t[4]!==e?(h=e?URL.createObjectURL(e):"",t[4]=e,t[5]=h):h=t[5];let p,b;t[6]===Symbol.for("react.memo_cache_sentinel")?(p=()=>o(!0),b=()=>o(!1),t[6]=p,t[7]=b):(p=t[6],b=t[7]);let g;t[8]!==h?(g=d.jsx(Hc,{url:h,waveColor:"#3a81f6",onReady:l,onPlay:p,onPause:b}),t[8]=h,t[9]=g):g=t[9];const w=i?"Pause":"Play";let m;t[10]!==u||t[11]!==w?(m=d.jsx("button",{onClick:u,children:w}),t[10]=u,t[11]=w,t[12]=m):m=t[12];let S;return t[13]!==g||t[14]!==m?(S=d.jsxs("div",{children:[f,g,m]}),t[13]=g,t[14]=m,t[15]=S):S=t[15],S}function Py(){const t=$.c(15),e=Jn(),n=Ue();let s,r;t[0]!==e.theme?(s=()=>{const b=window.document.documentElement;b.classList.remove("light","dark"),b.classList.add(e.theme)},r=[e.theme],t[0]=e.theme,t[1]=s,t[2]=r):(s=t[1],r=t[2]),U.useEffect(s,r);let i,o;t[3]!==n?(i=()=>{const b=g=>{n.saved||!n.cart||(g.preventDefault(),g.returnValue="")};return window.addEventListener("beforeunload",b),()=>{window.removeEventListener("beforeunload",b)}},o=[n],t[3]=n,t[4]=i,t[5]=o):(i=t[4],o=t[5]),U.useEffect(i,o);let a,l;t[6]!==e.saveInterval||t[7]!==n?(a=()=>{const b=setInterval(()=>{!n.saved&&n.cart&&n.saveProject().catch($y)},e.saveInterval*1e3);return()=>{clearInterval(b)}},l=[n,e.saveInterval],t[6]=e.saveInterval,t[7]=n,t[8]=a,t[9]=l):(a=t[8],l=t[9]),U.useEffect(a,l);let c,u;t[10]===Symbol.for("react.memo_cache_sentinel")?(c=d.jsxs(ms,{minSize:5,defaultSize:25,className:"bg-card flex flex-col gap-4",children:[d.jsx(P0,{}),d.jsx(Ry,{})]}),u=d.jsx(mo,{}),t[10]=c,t[11]=u):(c=t[10],u=t[11]);let f,h;t[12]===Symbol.for("react.memo_cache_sentinel")?(f=d.jsx(ms,{minSize:5,defaultSize:80,children:d.jsxs(po,{direction:"horizontal",autoSaveId:"tca-preview",autoSave:"true",children:[c,u,d.jsx(ms,{minSize:5,defaultSize:75,children:d.jsx(ky,{})})]})}),h=d.jsx(mo,{}),t[12]=f,t[13]=h):(f=t[12],h=t[13]);let p;return t[14]===Symbol.for("react.memo_cache_sentinel")?(p=d.jsx("div",{className:"h-screen w-screen",children:d.jsxs(po,{direction:"vertical",autoSaveId:"tca-project",autoSave:"true",children:[f,h,d.jsxs(ms,{minSize:5,defaultSize:20,className:"bg-card p-4",children:["Timeline",d.jsx(My,{})]})]})}),t[14]=p):p=t[14],p}function $y(t){console.error("Auto-save failed:",t)}function Ui(t){const e=$.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let s;return e[2]!==n?(s=d.jsx(uf,{"data-slot":"alert-dialog",...n}),e[2]=n,e[3]=s):s=e[3],s}function zy(t){const e=$.c(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let s;return e[2]!==n?(s=d.jsx(ff,{"data-slot":"alert-dialog-portal",...n}),e[2]=n,e[3]=s):s=e[3],s}function Ly(t){const e=$.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=V("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50 backdrop-blur",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=d.jsx(hf,{"data-slot":"alert-dialog-overlay",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function Zi(t){const e=$.c(9);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]===Symbol.for("react.memo_cache_sentinel")?(r=d.jsx(Ly,{}),e[3]=r):r=e[3];let i;e[4]!==n?(i=V("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",n),e[4]=n,e[5]=i):i=e[5];let o;return e[6]!==s||e[7]!==i?(o=d.jsxs(zy,{children:[r,d.jsx(cf,{"data-slot":"alert-dialog-content",className:i,...s})]}),e[6]=s,e[7]=i,e[8]=o):o=e[8],o}function Vi(t){const e=$.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=V("flex flex-col gap-2 text-center sm:text-left",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=d.jsx("div",{"data-slot":"alert-dialog-header",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function Ki(t){const e=$.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=V("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=d.jsx("div",{"data-slot":"alert-dialog-footer",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function Gi(t){const e=$.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=V("text-lg font-semibold",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=d.jsx(af,{"data-slot":"alert-dialog-title",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function qi(t){const e=$.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=V("text-muted-foreground text-sm",n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=d.jsx(lf,{"data-slot":"alert-dialog-description",className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function Fy(t){const e=$.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=V($a({variant:"outline"}),n),e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==s||e[6]!==r?(i=d.jsx(of,{className:r,...s}),e[5]=s,e[6]=r,e[7]=i):i=e[7],i}function Dy(){const t=[],e=document.createElement("canvas");return!!(e.getContext("webgl")||e.getContext("experimental-webgl"))||t.push("WebGL / 3D Graphics"),"AudioContext"in window||"webkitAudioContext"in window||t.push("Web Audio API (AudioContext)"),"requestAnimationFrame"in window||t.push("Animation Frame API (requestAnimationFrame)"),t}const By=()=>{const t=$.c(22);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],t[0]=e):e=t[0];const[n,s]=U.useState(e),[r,i]=U.useState(!1);let o,a;if(t[1]===Symbol.for("react.memo_cache_sentinel")?(o=()=>{const v=Dy();(v.length>0||!bn)&&(s(v),setTimeout(()=>{i(!0)},10))},a=[],t[1]=o,t[2]=a):(o=t[1],a=t[2]),U.useEffect(o,a),!r)return null;let l;t[3]===Symbol.for("react.memo_cache_sentinel")?(l=d.jsx(Gi,{children:"Missing Browser Capabilities"}),t[3]=l):l=t[3];let c;t[4]!==n?(c=n.map(Uy),t[4]=n,t[5]=c):c=t[5];let u;t[6]===Symbol.for("react.memo_cache_sentinel")?(u=!bn&&d.jsxs("li",{children:["File System Access API",d.jsx("br",{}),d.jsx("span",{className:"text-xs text-muted-foreground",children:"Used for autosave and loading files directly. Without it, you'll need to manually download and upload your files each time."})]}),t[6]=u):u=t[6];let f;t[7]!==c?(f=d.jsxs("ul",{className:"my-2 list-disc list-inside",children:[c,u]}),t[7]=c,t[8]=f):f=t[8];let h;t[9]===Symbol.for("react.memo_cache_sentinel")?(h=d.jsx("strong",{children:"Chrome"}),t[9]=h):h=t[9];let p;t[10]===Symbol.for("react.memo_cache_sentinel")?(p=d.jsx("strong",{children:"Edge"}),t[10]=p):p=t[10];let b;t[11]===Symbol.for("react.memo_cache_sentinel")?(b=d.jsx("strong",{children:"Brave"}),t[11]=b):b=t[11];let g;t[12]!==f?(g=d.jsxs(Vi,{children:[l,d.jsxs(qi,{children:["This app requires certain browser features to work correctly. Your current browser is missing the following capabilities:",f,"To use all features, switch to a modern Chromium-based browser like ",h,","," ",p,", or ",b,"."]})]}),t[12]=f,t[13]=g):g=t[13];let w;t[14]!==n.length?(w=!bn&&n.length===0&&d.jsx(Ki,{children:d.jsx(Fy,{children:"Acknowledge"})}),t[14]=n.length,t[15]=w):w=t[15];let m;t[16]!==g||t[17]!==w?(m=d.jsxs(Zi,{children:[g,w]}),t[16]=g,t[17]=w,t[18]=m):m=t[18];let S;return t[19]!==r||t[20]!==m?(S=d.jsx(Ui,{open:r,onOpenChange:i,children:m}),t[19]=r,t[20]=m,t[21]=S):S=t[21],S};function Uy(t){return d.jsx("li",{children:t},t)}const Yi=Symbol.for("yaml.alias"),wi=Symbol.for("yaml.document"),kt=Symbol.for("yaml.map"),sc=Symbol.for("yaml.pair"),lt=Symbol.for("yaml.scalar"),On=Symbol.for("yaml.seq"),De=Symbol.for("yaml.node.type"),Xt=t=>!!t&&typeof t=="object"&&t[De]===Yi,mr=t=>!!t&&typeof t=="object"&&t[De]===wi,ss=t=>!!t&&typeof t=="object"&&t[De]===kt,ve=t=>!!t&&typeof t=="object"&&t[De]===sc,le=t=>!!t&&typeof t=="object"&&t[De]===lt,rs=t=>!!t&&typeof t=="object"&&t[De]===On;function be(t){if(t&&typeof t=="object")switch(t[De]){case kt:case On:return!0}return!1}function we(t){if(t&&typeof t=="object")switch(t[De]){case Yi:case kt:case lt:case On:return!0}return!1}const rc=t=>(le(t)||be(t))&&!!t.anchor,Pt=Symbol("break visit"),Zy=Symbol("skip children"),Bn=Symbol("remove node");function In(t,e){const n=Vy(e);mr(t)?dn(null,t.contents,n,Object.freeze([t]))===Bn&&(t.contents=null):dn(null,t,n,Object.freeze([]))}In.BREAK=Pt;In.SKIP=Zy;In.REMOVE=Bn;function dn(t,e,n,s){const r=Ky(t,e,n,s);if(we(r)||ve(r))return Gy(t,s,r),dn(t,r,n,s);if(typeof r!="symbol"){if(be(e)){s=Object.freeze(s.concat(e));for(let i=0;i<e.items.length;++i){const o=dn(i,e.items[i],n,s);if(typeof o=="number")i=o-1;else{if(o===Pt)return Pt;o===Bn&&(e.items.splice(i,1),i-=1)}}}else if(ve(e)){s=Object.freeze(s.concat(e));const i=dn("key",e.key,n,s);if(i===Pt)return Pt;i===Bn&&(e.key=null);const o=dn("value",e.value,n,s);if(o===Pt)return Pt;o===Bn&&(e.value=null)}}return r}function Vy(t){return typeof t=="object"&&(t.Collection||t.Node||t.Value)?Object.assign({Alias:t.Node,Map:t.Node,Scalar:t.Node,Seq:t.Node},t.Value&&{Map:t.Value,Scalar:t.Value,Seq:t.Value},t.Collection&&{Map:t.Collection,Seq:t.Collection},t):t}function Ky(t,e,n,s){if(typeof n=="function")return n(t,e,s);if(ss(e))return n.Map?.(t,e,s);if(rs(e))return n.Seq?.(t,e,s);if(ve(e))return n.Pair?.(t,e,s);if(le(e))return n.Scalar?.(t,e,s);if(Xt(e))return n.Alias?.(t,e,s)}function Gy(t,e,n){const s=e[e.length-1];if(be(s))s.items[t]=n;else if(ve(s))t==="key"?s.key=n:s.value=n;else if(mr(s))s.contents=n;else{const r=Xt(s)?"alias":"scalar";throw new Error(`Cannot replace node with ${r} parent`)}}const qy={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},Yy=t=>t.replace(/[!,[\]{}]/g,e=>qy[e]);class Ne{constructor(e,n){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},Ne.defaultYaml,e),this.tags=Object.assign({},Ne.defaultTags,n)}clone(){const e=new Ne(this.yaml,this.tags);return e.docStart=this.docStart,e}atDocument(){const e=new Ne(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:Ne.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},Ne.defaultTags);break}return e}add(e,n){this.atNextDocument&&(this.yaml={explicit:Ne.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},Ne.defaultTags),this.atNextDocument=!1);const s=e.trim().split(/[ \t]+/),r=s.shift();switch(r){case"%TAG":{if(s.length!==2&&(n(0,"%TAG directive should contain exactly two parts"),s.length<2))return!1;const[i,o]=s;return this.tags[i]=o,!0}case"%YAML":{if(this.yaml.explicit=!0,s.length!==1)return n(0,"%YAML directive should contain exactly one part"),!1;const[i]=s;if(i==="1.1"||i==="1.2")return this.yaml.version=i,!0;{const o=/^\d+\.\d+$/.test(i);return n(6,`Unsupported YAML version ${i}`,o),!1}}default:return n(0,`Unknown directive ${r}`,!0),!1}}tagName(e,n){if(e==="!")return"!";if(e[0]!=="!")return n(`Not a valid tag: ${e}`),null;if(e[1]==="<"){const o=e.slice(2,-1);return o==="!"||o==="!!"?(n(`Verbatim tags aren't resolved, so ${e} is invalid.`),null):(e[e.length-1]!==">"&&n("Verbatim tags must end with a >"),o)}const[,s,r]=e.match(/^(.*!)([^!]*)$/s);r||n(`The ${e} tag has no suffix`);const i=this.tags[s];if(i)try{return i+decodeURIComponent(r)}catch(o){return n(String(o)),null}return s==="!"?e:(n(`Could not resolve tag: ${e}`),null)}tagString(e){for(const[n,s]of Object.entries(this.tags))if(e.startsWith(s))return n+Yy(e.substring(s.length));return e[0]==="!"?e:`!<${e}>`}toString(e){const n=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],s=Object.entries(this.tags);let r;if(e&&s.length>0&&we(e.contents)){const i={};In(e.contents,(o,a)=>{we(a)&&a.tag&&(i[a.tag]=!0)}),r=Object.keys(i)}else r=[];for(const[i,o]of s)i==="!!"&&o==="tag:yaml.org,2002:"||(!e||r.some(a=>a.startsWith(o)))&&n.push(`%TAG ${i} ${o}`);return n.join(`
`)}}Ne.defaultYaml={explicit:!1,version:"1.2"};Ne.defaultTags={"!!":"tag:yaml.org,2002:"};function ic(t){if(/[\x00-\x19\s,[\]{}]/.test(t)){const n=`Anchor must not contain whitespace or control characters: ${JSON.stringify(t)}`;throw new Error(n)}return!0}function oc(t){const e=new Set;return In(t,{Value(n,s){s.anchor&&e.add(s.anchor)}}),e}function ac(t,e){for(let n=1;;++n){const s=`${t}${n}`;if(!e.has(s))return s}}function Hy(t,e){const n=[],s=new Map;let r=null;return{onAnchor:i=>{n.push(i),r??(r=oc(t));const o=ac(e,r);return r.add(o),o},setAnchors:()=>{for(const i of n){const o=s.get(i);if(typeof o=="object"&&o.anchor&&(le(o.node)||be(o.node)))o.node.anchor=o.anchor;else{const a=new Error("Failed to resolve repeated object (this should not happen)");throw a.source=i,a}}},sourceObjects:s}}function pn(t,e,n,s){if(s&&typeof s=="object")if(Array.isArray(s))for(let r=0,i=s.length;r<i;++r){const o=s[r],a=pn(t,s,String(r),o);a===void 0?delete s[r]:a!==o&&(s[r]=a)}else if(s instanceof Map)for(const r of Array.from(s.keys())){const i=s.get(r),o=pn(t,s,r,i);o===void 0?s.delete(r):o!==i&&s.set(r,o)}else if(s instanceof Set)for(const r of Array.from(s)){const i=pn(t,s,r,r);i===void 0?s.delete(r):i!==r&&(s.delete(r),s.add(i))}else for(const[r,i]of Object.entries(s)){const o=pn(t,s,r,i);o===void 0?delete s[r]:o!==i&&(s[r]=o)}return t.call(e,n,s)}function Fe(t,e,n){if(Array.isArray(t))return t.map((s,r)=>Fe(s,String(r),n));if(t&&typeof t.toJSON=="function"){if(!n||!rc(t))return t.toJSON(e,n);const s={aliasCount:0,count:1,res:void 0};n.anchors.set(t,s),n.onCreate=i=>{s.res=i,delete n.onCreate};const r=t.toJSON(e,n);return n.onCreate&&n.onCreate(r),r}return typeof t=="bigint"&&!n?.keep?Number(t):t}class Hi{constructor(e){Object.defineProperty(this,De,{value:e})}clone(){const e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}toJS(e,{mapAsMap:n,maxAliasCount:s,onAnchor:r,reviver:i}={}){if(!mr(e))throw new TypeError("A document argument is required");const o={anchors:new Map,doc:e,keep:!0,mapAsMap:n===!0,mapKeyWarned:!1,maxAliasCount:typeof s=="number"?s:100},a=Fe(this,"",o);if(typeof r=="function")for(const{count:l,res:c}of o.anchors.values())r(c,l);return typeof i=="function"?pn(i,{"":a},"",a):a}}class Wi extends Hi{constructor(e){super(Yi),this.source=e,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(e,n){let s;n?.aliasResolveCache?s=n.aliasResolveCache:(s=[],In(e,{Node:(i,o)=>{(Xt(o)||rc(o))&&s.push(o)}}),n&&(n.aliasResolveCache=s));let r;for(const i of s){if(i===this)break;i.anchor===this.source&&(r=i)}return r}toJSON(e,n){if(!n)return{source:this.source};const{anchors:s,doc:r,maxAliasCount:i}=n,o=this.resolve(r,n);if(!o){const l=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(l)}let a=s.get(o);if(a||(Fe(o,null,n),a=s.get(o)),!a||a.res===void 0){const l="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(l)}if(i>=0&&(a.count+=1,a.aliasCount===0&&(a.aliasCount=Zs(r,o,s)),a.count*a.aliasCount>i)){const l="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(l)}return a.res}toString(e,n,s){const r=`*${this.source}`;if(e){if(ic(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source)){const i=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(i)}if(e.implicitKey)return`${r} `}return r}}function Zs(t,e,n){if(Xt(e)){const s=e.resolve(t),r=n&&s&&n.get(s);return r?r.count*r.aliasCount:0}else if(be(e)){let s=0;for(const r of e.items){const i=Zs(t,r,n);i>s&&(s=i)}return s}else if(ve(e)){const s=Zs(t,e.key,n),r=Zs(t,e.value,n);return Math.max(s,r)}return 1}const lc=t=>!t||typeof t!="function"&&typeof t!="object";class G extends Hi{constructor(e){super(lt),this.value=e}toJSON(e,n){return n?.keep?this.value:Fe(this.value,e,n)}toString(){return String(this.value)}}G.BLOCK_FOLDED="BLOCK_FOLDED";G.BLOCK_LITERAL="BLOCK_LITERAL";G.PLAIN="PLAIN";G.QUOTE_DOUBLE="QUOTE_DOUBLE";G.QUOTE_SINGLE="QUOTE_SINGLE";const Wy="tag:yaml.org,2002:";function Xy(t,e,n){if(e){const s=n.filter(i=>i.tag===e),r=s.find(i=>!i.format)??s[0];if(!r)throw new Error(`Tag ${e} not found`);return r}return n.find(s=>s.identify?.(t)&&!s.format)}function Xn(t,e,n){if(mr(t)&&(t=t.contents),we(t))return t;if(ve(t)){const f=n.schema[kt].createNode?.(n.schema,null,n);return f.items.push(t),f}(t instanceof String||t instanceof Number||t instanceof Boolean||typeof BigInt<"u"&&t instanceof BigInt)&&(t=t.valueOf());const{aliasDuplicateObjects:s,onAnchor:r,onTagObj:i,schema:o,sourceObjects:a}=n;let l;if(s&&t&&typeof t=="object"){if(l=a.get(t),l)return l.anchor??(l.anchor=r(t)),new Wi(l.anchor);l={anchor:null,node:null},a.set(t,l)}e?.startsWith("!!")&&(e=Wy+e.slice(2));let c=Xy(t,e,o.tags);if(!c){if(t&&typeof t.toJSON=="function"&&(t=t.toJSON()),!t||typeof t!="object"){const f=new G(t);return l&&(l.node=f),f}c=t instanceof Map?o[kt]:Symbol.iterator in Object(t)?o[On]:o[kt]}i&&(i(c),delete n.onTagObj);const u=c?.createNode?c.createNode(n.schema,t,n):typeof c?.nodeClass?.from=="function"?c.nodeClass.from(n.schema,t,n):new G(t);return e?u.tag=e:c.default||(u.tag=c.tag),l&&(l.node=u),u}function sr(t,e,n){let s=n;for(let r=e.length-1;r>=0;--r){const i=e[r];if(typeof i=="number"&&Number.isInteger(i)&&i>=0){const o=[];o[i]=s,s=o}else s=new Map([[i,s]])}return Xn(s,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:t,sourceObjects:new Map})}const $n=t=>t==null||typeof t=="object"&&!!t[Symbol.iterator]().next().done;class cc extends Hi{constructor(e,n){super(e),Object.defineProperty(this,"schema",{value:n,configurable:!0,enumerable:!1,writable:!0})}clone(e){const n=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return e&&(n.schema=e),n.items=n.items.map(s=>we(s)||ve(s)?s.clone(e):s),this.range&&(n.range=this.range.slice()),n}addIn(e,n){if($n(e))this.add(n);else{const[s,...r]=e,i=this.get(s,!0);if(be(i))i.addIn(r,n);else if(i===void 0&&this.schema)this.set(s,sr(this.schema,r,n));else throw new Error(`Expected YAML collection at ${s}. Remaining path: ${r}`)}}deleteIn(e){const[n,...s]=e;if(s.length===0)return this.delete(n);const r=this.get(n,!0);if(be(r))return r.deleteIn(s);throw new Error(`Expected YAML collection at ${n}. Remaining path: ${s}`)}getIn(e,n){const[s,...r]=e,i=this.get(s,!0);return r.length===0?!n&&le(i)?i.value:i:be(i)?i.getIn(r,n):void 0}hasAllNullValues(e){return this.items.every(n=>{if(!ve(n))return!1;const s=n.value;return s==null||e&&le(s)&&s.value==null&&!s.commentBefore&&!s.comment&&!s.tag})}hasIn(e){const[n,...s]=e;if(s.length===0)return this.has(n);const r=this.get(n,!0);return be(r)?r.hasIn(s):!1}setIn(e,n){const[s,...r]=e;if(r.length===0)this.set(s,n);else{const i=this.get(s,!0);if(be(i))i.setIn(r,n);else if(i===void 0&&this.schema)this.set(s,sr(this.schema,r,n));else throw new Error(`Expected YAML collection at ${s}. Remaining path: ${r}`)}}}const Qy=t=>t.replace(/^(?!$)(?: $)?/gm,"#");function ht(t,e){return/^\n+$/.test(t)?t.substring(1):e?t.replace(/^(?! *$)/gm,e):t}const Dt=(t,e,n)=>t.endsWith(`
`)?ht(n,e):n.includes(`
`)?`
`+ht(n,e):(t.endsWith(" ")?"":" ")+n,uc="flow",vi="block",Vs="quoted";function gr(t,e,n="flow",{indentAtStart:s,lineWidth:r=80,minContentWidth:i=20,onFold:o,onOverflow:a}={}){if(!r||r<0)return t;r<i&&(i=0);const l=Math.max(1+i,1+r-e.length);if(t.length<=l)return t;const c=[],u={};let f=r-e.length;typeof s=="number"&&(s>r-Math.max(2,i)?c.push(0):f=r-s);let h,p,b=!1,g=-1,w=-1,m=-1;n===vi&&(g=ya(t,g,e.length),g!==-1&&(f=g+l));for(let v;v=t[g+=1];){if(n===Vs&&v==="\\"){switch(w=g,t[g+1]){case"x":g+=3;break;case"u":g+=5;break;case"U":g+=9;break;default:g+=1}m=g}if(v===`
`)n===vi&&(g=ya(t,g,e.length)),f=g+e.length+l,h=void 0;else{if(v===" "&&p&&p!==" "&&p!==`
`&&p!=="	"){const _=t[g+1];_&&_!==" "&&_!==`
`&&_!=="	"&&(h=g)}if(g>=f)if(h)c.push(h),f=h+l,h=void 0;else if(n===Vs){for(;p===" "||p==="	";)p=v,v=t[g+=1],b=!0;const _=g>m+1?g-2:w-1;if(u[_])return t;c.push(_),u[_]=!0,f=_+l,h=void 0}else b=!0}p=v}if(b&&a&&a(),c.length===0)return t;o&&o();let S=t.slice(0,c[0]);for(let v=0;v<c.length;++v){const _=c[v],E=c[v+1]||t.length;_===0?S=`
${e}${t.slice(0,E)}`:(n===Vs&&u[_]&&(S+=`${t[_]}\\`),S+=`
${e}${t.slice(_+1,E)}`)}return S}function ya(t,e,n){let s=e,r=e+1,i=t[r];for(;i===" "||i==="	";)if(e<r+n)i=t[++e];else{do i=t[++e];while(i&&i!==`
`);s=e,r=e+1,i=t[r]}return s}const yr=(t,e)=>({indentAtStart:e?t.indent.length:t.indentAtStart,lineWidth:t.options.lineWidth,minContentWidth:t.options.minContentWidth}),br=t=>/^(%|---|\.\.\.)/m.test(t);function Jy(t,e,n){if(!e||e<0)return!1;const s=e-n,r=t.length;if(r<=s)return!1;for(let i=0,o=0;i<r;++i)if(t[i]===`
`){if(i-o>s)return!0;if(o=i+1,r-o<=s)return!1}return!0}function Un(t,e){const n=JSON.stringify(t);if(e.options.doubleQuotedAsJSON)return n;const{implicitKey:s}=e,r=e.options.doubleQuotedMinMultiLineLength,i=e.indent||(br(t)?"  ":"");let o="",a=0;for(let l=0,c=n[l];c;c=n[++l])if(c===" "&&n[l+1]==="\\"&&n[l+2]==="n"&&(o+=n.slice(a,l)+"\\ ",l+=1,a=l,c="\\"),c==="\\")switch(n[l+1]){case"u":{o+=n.slice(a,l);const u=n.substr(l+2,4);switch(u){case"0000":o+="\\0";break;case"0007":o+="\\a";break;case"000b":o+="\\v";break;case"001b":o+="\\e";break;case"0085":o+="\\N";break;case"00a0":o+="\\_";break;case"2028":o+="\\L";break;case"2029":o+="\\P";break;default:u.substr(0,2)==="00"?o+="\\x"+u.substr(2):o+=n.substr(l,6)}l+=5,a=l+1}break;case"n":if(s||n[l+2]==='"'||n.length<r)l+=1;else{for(o+=n.slice(a,l)+`

`;n[l+2]==="\\"&&n[l+3]==="n"&&n[l+4]!=='"';)o+=`
`,l+=2;o+=i,n[l+2]===" "&&(o+="\\"),l+=1,a=l+1}break;default:l+=1}return o=a?o+n.slice(a):n,s?o:gr(o,i,Vs,yr(e,!1))}function xi(t,e){if(e.options.singleQuote===!1||e.implicitKey&&t.includes(`
`)||/[ \t]\n|\n[ \t]/.test(t))return Un(t,e);const n=e.indent||(br(t)?"  ":""),s="'"+t.replace(/'/g,"''").replace(/\n+/g,`$&
${n}`)+"'";return e.implicitKey?s:gr(s,n,uc,yr(e,!1))}function mn(t,e){const{singleQuote:n}=e.options;let s;if(n===!1)s=Un;else{const r=t.includes('"'),i=t.includes("'");r&&!i?s=xi:i&&!r?s=Un:s=n?xi:Un}return s(t,e)}let _i;try{_i=new RegExp(`(^|(?<!
))
+(?!
|$)`,"g")}catch{_i=/\n+(?!\n|$)/g}function Ks({comment:t,type:e,value:n},s,r,i){const{blockQuote:o,commentString:a,lineWidth:l}=s.options;if(!o||/\n[\t ]+$/.test(n))return mn(n,s);const c=s.indent||(s.forceBlockIndent||br(n)?"  ":""),u=o==="literal"?!0:o==="folded"||e===G.BLOCK_FOLDED?!1:e===G.BLOCK_LITERAL?!0:!Jy(n,l,c.length);if(!n)return u?`|
`:`>
`;let f,h;for(h=n.length;h>0;--h){const E=n[h-1];if(E!==`
`&&E!=="	"&&E!==" ")break}let p=n.substring(h);const b=p.indexOf(`
`);b===-1?f="-":n===p||b!==p.length-1?(f="+",i&&i()):f="",p&&(n=n.slice(0,-p.length),p[p.length-1]===`
`&&(p=p.slice(0,-1)),p=p.replace(_i,`$&${c}`));let g=!1,w,m=-1;for(w=0;w<n.length;++w){const E=n[w];if(E===" ")g=!0;else if(E===`
`)m=w;else break}let S=n.substring(0,m<w?m+1:w);S&&(n=n.substring(S.length),S=S.replace(/\n+/g,`$&${c}`));let _=(g?c?"2":"1":"")+f;if(t&&(_+=" "+a(t.replace(/ ?[\r\n]+/g," ")),r&&r()),!u){const E=n.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${c}`);let A=!1;const y=yr(s,!0);o!=="folded"&&e!==G.BLOCK_FOLDED&&(y.onOverflow=()=>{A=!0});const x=gr(`${S}${E}${p}`,c,vi,y);if(!A)return`>${_}
${c}${x}`}return n=n.replace(/\n+/g,`$&${c}`),`|${_}
${c}${S}${n}${p}`}function eb(t,e,n,s){const{type:r,value:i}=t,{actualString:o,implicitKey:a,indent:l,indentStep:c,inFlow:u}=e;if(a&&i.includes(`
`)||u&&/[[\]{},]/.test(i))return mn(i,e);if(/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(i))return a||u||!i.includes(`
`)?mn(i,e):Ks(t,e,n,s);if(!a&&!u&&r!==G.PLAIN&&i.includes(`
`))return Ks(t,e,n,s);if(br(i)){if(l==="")return e.forceBlockIndent=!0,Ks(t,e,n,s);if(a&&l===c)return mn(i,e)}const f=i.replace(/\n+/g,`$&
${l}`);if(o){const h=g=>g.default&&g.tag!=="tag:yaml.org,2002:str"&&g.test?.test(f),{compat:p,tags:b}=e.doc.schema;if(b.some(h)||p?.some(h))return mn(i,e)}return a?f:gr(f,l,uc,yr(e,!1))}function Xi(t,e,n,s){const{implicitKey:r,inFlow:i}=e,o=typeof t.value=="string"?t:Object.assign({},t,{value:String(t.value)});let{type:a}=t;a!==G.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(o.value)&&(a=G.QUOTE_DOUBLE);const l=u=>{switch(u){case G.BLOCK_FOLDED:case G.BLOCK_LITERAL:return r||i?mn(o.value,e):Ks(o,e,n,s);case G.QUOTE_DOUBLE:return Un(o.value,e);case G.QUOTE_SINGLE:return xi(o.value,e);case G.PLAIN:return eb(o,e,n,s);default:return null}};let c=l(a);if(c===null){const{defaultKeyType:u,defaultStringType:f}=e.options,h=r&&u||f;if(c=l(h),c===null)throw new Error(`Unsupported default string type ${h}`)}return c}function fc(t,e){const n=Object.assign({blockQuote:!0,commentString:Qy,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},t.schema.toStringOptions,e);let s;switch(n.collectionStyle){case"block":s=!1;break;case"flow":s=!0;break;default:s=null}return{anchors:new Set,doc:t,flowCollectionPadding:n.flowCollectionPadding?" ":"",indent:"",indentStep:typeof n.indent=="number"?" ".repeat(n.indent):"  ",inFlow:s,options:n}}function tb(t,e){if(e.tag){const r=t.filter(i=>i.tag===e.tag);if(r.length>0)return r.find(i=>i.format===e.format)??r[0]}let n,s;if(le(e)){s=e.value;let r=t.filter(i=>i.identify?.(s));if(r.length>1){const i=r.filter(o=>o.test);i.length>0&&(r=i)}n=r.find(i=>i.format===e.format)??r.find(i=>!i.format)}else s=e,n=t.find(r=>r.nodeClass&&s instanceof r.nodeClass);if(!n){const r=s?.constructor?.name??(s===null?"null":typeof s);throw new Error(`Tag not resolved for ${r} value`)}return n}function nb(t,e,{anchors:n,doc:s}){if(!s.directives)return"";const r=[],i=(le(t)||be(t))&&t.anchor;i&&ic(i)&&(n.add(i),r.push(`&${i}`));const o=t.tag??(e.default?null:e.tag);return o&&r.push(s.directives.tagString(o)),r.join(" ")}function Tn(t,e,n,s){if(ve(t))return t.toString(e,n,s);if(Xt(t)){if(e.doc.directives)return t.toString(e);if(e.resolvedAliases?.has(t))throw new TypeError("Cannot stringify circular structure without alias nodes");e.resolvedAliases?e.resolvedAliases.add(t):e.resolvedAliases=new Set([t]),t=t.resolve(e.doc)}let r;const i=we(t)?t:e.doc.createNode(t,{onTagObj:l=>r=l});r??(r=tb(e.doc.schema.tags,i));const o=nb(i,r,e);o.length>0&&(e.indentAtStart=(e.indentAtStart??0)+o.length+1);const a=typeof r.stringify=="function"?r.stringify(i,e,n,s):le(i)?Xi(i,e,n,s):i.toString(e,n,s);return o?le(i)||a[0]==="{"||a[0]==="["?`${o} ${a}`:`${o}
${e.indent}${a}`:a}function sb({key:t,value:e},n,s,r){const{allNullValues:i,doc:o,indent:a,indentStep:l,options:{commentString:c,indentSeq:u,simpleKeys:f}}=n;let h=we(t)&&t.comment||null;if(f){if(h)throw new Error("With simple keys, key nodes cannot have comments");if(be(t)||!we(t)&&typeof t=="object"){const y="With simple keys, collection cannot be used as a key value";throw new Error(y)}}let p=!f&&(!t||h&&e==null&&!n.inFlow||be(t)||(le(t)?t.type===G.BLOCK_FOLDED||t.type===G.BLOCK_LITERAL:typeof t=="object"));n=Object.assign({},n,{allNullValues:!1,implicitKey:!p&&(f||!i),indent:a+l});let b=!1,g=!1,w=Tn(t,n,()=>b=!0,()=>g=!0);if(!p&&!n.inFlow&&w.length>1024){if(f)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");p=!0}if(n.inFlow){if(i||e==null)return b&&s&&s(),w===""?"?":p?`? ${w}`:w}else if(i&&!f||e==null&&p)return w=`? ${w}`,h&&!b?w+=Dt(w,n.indent,c(h)):g&&r&&r(),w;b&&(h=null),p?(h&&(w+=Dt(w,n.indent,c(h))),w=`? ${w}
${a}:`):(w=`${w}:`,h&&(w+=Dt(w,n.indent,c(h))));let m,S,v;we(e)?(m=!!e.spaceBefore,S=e.commentBefore,v=e.comment):(m=!1,S=null,v=null,e&&typeof e=="object"&&(e=o.createNode(e))),n.implicitKey=!1,!p&&!h&&le(e)&&(n.indentAtStart=w.length+1),g=!1,!u&&l.length>=2&&!n.inFlow&&!p&&rs(e)&&!e.flow&&!e.tag&&!e.anchor&&(n.indent=n.indent.substring(2));let _=!1;const E=Tn(e,n,()=>_=!0,()=>g=!0);let A=" ";if(h||m||S){if(A=m?`
`:"",S){const y=c(S);A+=`
${ht(y,n.indent)}`}E===""&&!n.inFlow?A===`
`&&(A=`

`):A+=`
${n.indent}`}else if(!p&&be(e)){const y=E[0],x=E.indexOf(`
`),k=x!==-1,T=n.inFlow??e.flow??e.items.length===0;if(k||!T){let I=!1;if(k&&(y==="&"||y==="!")){let N=E.indexOf(" ");y==="&"&&N!==-1&&N<x&&E[N+1]==="!"&&(N=E.indexOf(" ",N+1)),(N===-1||x<N)&&(I=!0)}I||(A=`
${n.indent}`)}}else(E===""||E[0]===`
`)&&(A="");return w+=A+E,n.inFlow?_&&s&&s():v&&!_?w+=Dt(w,n.indent,c(v)):g&&r&&r(),w}function hc(t,e){(t==="debug"||t==="warn")&&console.warn(e)}const Cs="<<",pt={identify:t=>t===Cs||typeof t=="symbol"&&t.description===Cs,default:"key",tag:"tag:yaml.org,2002:merge",test:/^<<$/,resolve:()=>Object.assign(new G(Symbol(Cs)),{addToJSMap:dc}),stringify:()=>Cs},rb=(t,e)=>(pt.identify(e)||le(e)&&(!e.type||e.type===G.PLAIN)&&pt.identify(e.value))&&t?.doc.schema.tags.some(n=>n.tag===pt.tag&&n.default);function dc(t,e,n){if(n=t&&Xt(n)?n.resolve(t.doc):n,rs(n))for(const s of n.items)Lr(t,e,s);else if(Array.isArray(n))for(const s of n)Lr(t,e,s);else Lr(t,e,n)}function Lr(t,e,n){const s=t&&Xt(n)?n.resolve(t.doc):n;if(!ss(s))throw new Error("Merge sources must be maps or map aliases");const r=s.toJSON(null,t,Map);for(const[i,o]of r)e instanceof Map?e.has(i)||e.set(i,o):e instanceof Set?e.add(i):Object.prototype.hasOwnProperty.call(e,i)||Object.defineProperty(e,i,{value:o,writable:!0,enumerable:!0,configurable:!0});return e}function pc(t,e,{key:n,value:s}){if(we(n)&&n.addToJSMap)n.addToJSMap(t,e,s);else if(rb(t,n))dc(t,e,s);else{const r=Fe(n,"",t);if(e instanceof Map)e.set(r,Fe(s,r,t));else if(e instanceof Set)e.add(r);else{const i=ib(n,r,t),o=Fe(s,i,t);i in e?Object.defineProperty(e,i,{value:o,writable:!0,enumerable:!0,configurable:!0}):e[i]=o}}return e}function ib(t,e,n){if(e===null)return"";if(typeof e!="object")return String(e);if(we(t)&&n?.doc){const s=fc(n.doc,{});s.anchors=new Set;for(const i of n.anchors.keys())s.anchors.add(i.anchor);s.inFlow=!0,s.inStringifyKey=!0;const r=t.toString(s);if(!n.mapKeyWarned){let i=JSON.stringify(r);i.length>40&&(i=i.substring(0,36)+'..."'),hc(n.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${i}. Set mapAsMap: true to use object keys.`),n.mapKeyWarned=!0}return r}return JSON.stringify(e)}function Qi(t,e,n){const s=Xn(t,void 0,n),r=Xn(e,void 0,n);return new Ie(s,r)}class Ie{constructor(e,n=null){Object.defineProperty(this,De,{value:sc}),this.key=e,this.value=n}clone(e){let{key:n,value:s}=this;return we(n)&&(n=n.clone(e)),we(s)&&(s=s.clone(e)),new Ie(n,s)}toJSON(e,n){const s=n?.mapAsMap?new Map:{};return pc(n,s,this)}toString(e,n,s){return e?.doc?sb(this,e,n,s):JSON.stringify(this)}}function mc(t,e,n){return(e.inFlow??t.flow?ab:ob)(t,e,n)}function ob({comment:t,items:e},n,{blockItemPrefix:s,flowChars:r,itemIndent:i,onChompKeep:o,onComment:a}){const{indent:l,options:{commentString:c}}=n,u=Object.assign({},n,{indent:i,type:null});let f=!1;const h=[];for(let b=0;b<e.length;++b){const g=e[b];let w=null;if(we(g))!f&&g.spaceBefore&&h.push(""),rr(n,h,g.commentBefore,f),g.comment&&(w=g.comment);else if(ve(g)){const S=we(g.key)?g.key:null;S&&(!f&&S.spaceBefore&&h.push(""),rr(n,h,S.commentBefore,f))}f=!1;let m=Tn(g,u,()=>w=null,()=>f=!0);w&&(m+=Dt(m,i,c(w))),f&&w&&(f=!1),h.push(s+m)}let p;if(h.length===0)p=r.start+r.end;else{p=h[0];for(let b=1;b<h.length;++b){const g=h[b];p+=g?`
${l}${g}`:`
`}}return t?(p+=`
`+ht(c(t),l),a&&a()):f&&o&&o(),p}function ab({items:t},e,{flowChars:n,itemIndent:s}){const{indent:r,indentStep:i,flowCollectionPadding:o,options:{commentString:a}}=e;s+=i;const l=Object.assign({},e,{indent:s,inFlow:!0,type:null});let c=!1,u=0;const f=[];for(let b=0;b<t.length;++b){const g=t[b];let w=null;if(we(g))g.spaceBefore&&f.push(""),rr(e,f,g.commentBefore,!1),g.comment&&(w=g.comment);else if(ve(g)){const S=we(g.key)?g.key:null;S&&(S.spaceBefore&&f.push(""),rr(e,f,S.commentBefore,!1),S.comment&&(c=!0));const v=we(g.value)?g.value:null;v?(v.comment&&(w=v.comment),v.commentBefore&&(c=!0)):g.value==null&&S?.comment&&(w=S.comment)}w&&(c=!0);let m=Tn(g,l,()=>w=null);b<t.length-1&&(m+=","),w&&(m+=Dt(m,s,a(w))),!c&&(f.length>u||m.includes(`
`))&&(c=!0),f.push(m),u=f.length}const{start:h,end:p}=n;if(f.length===0)return h+p;if(!c){const b=f.reduce((g,w)=>g+w.length+2,2);c=e.options.lineWidth>0&&b>e.options.lineWidth}if(c){let b=h;for(const g of f)b+=g?`
${i}${r}${g}`:`
`;return`${b}
${r}${p}`}else return`${h}${o}${f.join(" ")}${o}${p}`}function rr({indent:t,options:{commentString:e}},n,s,r){if(s&&r&&(s=s.replace(/^\n+/,"")),s){const i=ht(e(s),t);n.push(i.trimStart())}}function Bt(t,e){const n=le(e)?e.value:e;for(const s of t)if(ve(s)&&(s.key===e||s.key===n||le(s.key)&&s.key.value===n))return s}class ze extends cc{static get tagName(){return"tag:yaml.org,2002:map"}constructor(e){super(kt,e),this.items=[]}static from(e,n,s){const{keepUndefined:r,replacer:i}=s,o=new this(e),a=(l,c)=>{if(typeof i=="function")c=i.call(n,l,c);else if(Array.isArray(i)&&!i.includes(l))return;(c!==void 0||r)&&o.items.push(Qi(l,c,s))};if(n instanceof Map)for(const[l,c]of n)a(l,c);else if(n&&typeof n=="object")for(const l of Object.keys(n))a(l,n[l]);return typeof e.sortMapEntries=="function"&&o.items.sort(e.sortMapEntries),o}add(e,n){let s;ve(e)?s=e:!e||typeof e!="object"||!("key"in e)?s=new Ie(e,e?.value):s=new Ie(e.key,e.value);const r=Bt(this.items,s.key),i=this.schema?.sortMapEntries;if(r){if(!n)throw new Error(`Key ${s.key} already set`);le(r.value)&&lc(s.value)?r.value.value=s.value:r.value=s.value}else if(i){const o=this.items.findIndex(a=>i(s,a)<0);o===-1?this.items.push(s):this.items.splice(o,0,s)}else this.items.push(s)}delete(e){const n=Bt(this.items,e);return n?this.items.splice(this.items.indexOf(n),1).length>0:!1}get(e,n){const r=Bt(this.items,e)?.value;return(!n&&le(r)?r.value:r)??void 0}has(e){return!!Bt(this.items,e)}set(e,n){this.add(new Ie(e,n),!0)}toJSON(e,n,s){const r=s?new s:n?.mapAsMap?new Map:{};n?.onCreate&&n.onCreate(r);for(const i of this.items)pc(n,r,i);return r}toString(e,n,s){if(!e)return JSON.stringify(this);for(const r of this.items)if(!ve(r))throw new Error(`Map items must all be pairs; found ${JSON.stringify(r)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),mc(this,e,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:s,onComment:n})}}const Cn={collection:"map",default:!0,nodeClass:ze,tag:"tag:yaml.org,2002:map",resolve(t,e){return ss(t)||e("Expected a mapping for this tag"),t},createNode:(t,e,n)=>ze.from(t,e,n)};class qt extends cc{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(e){super(On,e),this.items=[]}add(e){this.items.push(e)}delete(e){const n=js(e);return typeof n!="number"?!1:this.items.splice(n,1).length>0}get(e,n){const s=js(e);if(typeof s!="number")return;const r=this.items[s];return!n&&le(r)?r.value:r}has(e){const n=js(e);return typeof n=="number"&&n<this.items.length}set(e,n){const s=js(e);if(typeof s!="number")throw new Error(`Expected a valid index, not ${e}.`);const r=this.items[s];le(r)&&lc(n)?r.value=n:this.items[s]=n}toJSON(e,n){const s=[];n?.onCreate&&n.onCreate(s);let r=0;for(const i of this.items)s.push(Fe(i,String(r++),n));return s}toString(e,n,s){return e?mc(this,e,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:s,onComment:n}):JSON.stringify(this)}static from(e,n,s){const{replacer:r}=s,i=new this(e);if(n&&Symbol.iterator in Object(n)){let o=0;for(let a of n){if(typeof r=="function"){const l=n instanceof Set?a:String(o++);a=r.call(n,l,a)}i.items.push(Xn(a,void 0,s))}}return i}}function js(t){let e=le(t)?t.value:t;return e&&typeof e=="string"&&(e=Number(e)),typeof e=="number"&&Number.isInteger(e)&&e>=0?e:null}const jn={collection:"seq",default:!0,nodeClass:qt,tag:"tag:yaml.org,2002:seq",resolve(t,e){return rs(t)||e("Expected a sequence for this tag"),t},createNode:(t,e,n)=>qt.from(t,e,n)},wr={identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify(t,e,n,s){return e=Object.assign({actualString:!0},e),Xi(t,e,n,s)}},vr={identify:t=>t==null,createNode:()=>new G(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new G(null),stringify:({source:t},e)=>typeof t=="string"&&vr.test.test(t)?t:e.options.nullStr},Ji={identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:t=>new G(t[0]==="t"||t[0]==="T"),stringify({source:t,value:e},n){if(t&&Ji.test.test(t)){const s=t[0]==="t"||t[0]==="T";if(e===s)return t}return e?n.options.trueStr:n.options.falseStr}};function Je({format:t,minFractionDigits:e,tag:n,value:s}){if(typeof s=="bigint")return String(s);const r=typeof s=="number"?s:Number(s);if(!isFinite(r))return isNaN(r)?".nan":r<0?"-.inf":".inf";let i=JSON.stringify(s);if(!t&&e&&(!n||n==="tag:yaml.org,2002:float")&&/^\d/.test(i)){let o=i.indexOf(".");o<0&&(o=i.length,i+=".");let a=e-(i.length-o-1);for(;a-- >0;)i+="0"}return i}const gc={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Je},yc={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t),stringify(t){const e=Number(t.value);return isFinite(e)?e.toExponential():Je(t)}},bc={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(t){const e=new G(parseFloat(t)),n=t.indexOf(".");return n!==-1&&t[t.length-1]==="0"&&(e.minFractionDigits=t.length-n-1),e},stringify:Je},xr=t=>typeof t=="bigint"||Number.isInteger(t),eo=(t,e,n,{intAsBigInt:s})=>s?BigInt(t):parseInt(t.substring(e),n);function wc(t,e,n){const{value:s}=t;return xr(s)&&s>=0?n+s.toString(e):Je(t)}const vc={identify:t=>xr(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(t,e,n)=>eo(t,2,8,n),stringify:t=>wc(t,8,"0o")},xc={identify:xr,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(t,e,n)=>eo(t,0,10,n),stringify:Je},_c={identify:t=>xr(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(t,e,n)=>eo(t,2,16,n),stringify:t=>wc(t,16,"0x")},lb=[Cn,jn,wr,vr,Ji,vc,xc,_c,gc,yc,bc];function ba(t){return typeof t=="bigint"||Number.isInteger(t)}const Rs=({value:t})=>JSON.stringify(t),cb=[{identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify:Rs},{identify:t=>t==null,createNode:()=>new G(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:Rs},{identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^true$|^false$/,resolve:t=>t==="true",stringify:Rs},{identify:ba,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(t,e,{intAsBigInt:n})=>n?BigInt(t):parseInt(t,10),stringify:({value:t})=>ba(t)?t.toString():JSON.stringify(t)},{identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:t=>parseFloat(t),stringify:Rs}],ub={default:!0,tag:"",test:/^/,resolve(t,e){return e(`Unresolved plain scalar ${JSON.stringify(t)}`),t}},fb=[Cn,jn].concat(cb,ub),to={identify:t=>t instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(t,e){if(typeof atob=="function"){const n=atob(t.replace(/[\n\r]/g,"")),s=new Uint8Array(n.length);for(let r=0;r<n.length;++r)s[r]=n.charCodeAt(r);return s}else return e("This environment does not support reading binary tags; either Buffer or atob is required"),t},stringify({comment:t,type:e,value:n},s,r,i){if(!n)return"";const o=n;let a;if(typeof btoa=="function"){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);a=btoa(l)}else throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(e??(e=G.BLOCK_LITERAL),e!==G.QUOTE_DOUBLE){const l=Math.max(s.options.lineWidth-s.indent.length,s.options.minContentWidth),c=Math.ceil(a.length/l),u=new Array(c);for(let f=0,h=0;f<c;++f,h+=l)u[f]=a.substr(h,l);a=u.join(e===G.BLOCK_LITERAL?`
`:" ")}return Xi({comment:t,type:e,value:a},s,r,i)}};function Ec(t,e){if(rs(t))for(let n=0;n<t.items.length;++n){let s=t.items[n];if(!ve(s)){if(ss(s)){s.items.length>1&&e("Each pair must have its own sequence indicator");const r=s.items[0]||new Ie(new G(null));if(s.commentBefore&&(r.key.commentBefore=r.key.commentBefore?`${s.commentBefore}
${r.key.commentBefore}`:s.commentBefore),s.comment){const i=r.value??r.key;i.comment=i.comment?`${s.comment}
${i.comment}`:s.comment}s=r}t.items[n]=ve(s)?s:new Ie(s)}}else e("Expected a sequence for this tag");return t}function Sc(t,e,n){const{replacer:s}=n,r=new qt(t);r.tag="tag:yaml.org,2002:pairs";let i=0;if(e&&Symbol.iterator in Object(e))for(let o of e){typeof s=="function"&&(o=s.call(e,String(i++),o));let a,l;if(Array.isArray(o))if(o.length===2)a=o[0],l=o[1];else throw new TypeError(`Expected [key, value] tuple: ${o}`);else if(o&&o instanceof Object){const c=Object.keys(o);if(c.length===1)a=c[0],l=o[a];else throw new TypeError(`Expected tuple with one key, not ${c.length} keys`)}else a=o;r.items.push(Qi(a,l,n))}return r}const no={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:Ec,createNode:Sc};class vn extends qt{constructor(){super(),this.add=ze.prototype.add.bind(this),this.delete=ze.prototype.delete.bind(this),this.get=ze.prototype.get.bind(this),this.has=ze.prototype.has.bind(this),this.set=ze.prototype.set.bind(this),this.tag=vn.tag}toJSON(e,n){if(!n)return super.toJSON(e);const s=new Map;n?.onCreate&&n.onCreate(s);for(const r of this.items){let i,o;if(ve(r)?(i=Fe(r.key,"",n),o=Fe(r.value,i,n)):i=Fe(r,"",n),s.has(i))throw new Error("Ordered maps must not include duplicate keys");s.set(i,o)}return s}static from(e,n,s){const r=Sc(e,n,s),i=new this;return i.items=r.items,i}}vn.tag="tag:yaml.org,2002:omap";const so={collection:"seq",identify:t=>t instanceof Map,nodeClass:vn,default:!1,tag:"tag:yaml.org,2002:omap",resolve(t,e){const n=Ec(t,e),s=[];for(const{key:r}of n.items)le(r)&&(s.includes(r.value)?e(`Ordered maps must not include duplicate keys: ${r.value}`):s.push(r.value));return Object.assign(new vn,n)},createNode:(t,e,n)=>vn.from(t,e,n)};function kc({value:t,source:e},n){return e&&(t?Ac:Tc).test.test(e)?e:t?n.options.trueStr:n.options.falseStr}const Ac={identify:t=>t===!0,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new G(!0),stringify:kc},Tc={identify:t=>t===!1,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/,resolve:()=>new G(!1),stringify:kc},hb={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Je},db={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t.replace(/_/g,"")),stringify(t){const e=Number(t.value);return isFinite(e)?e.toExponential():Je(t)}},pb={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(t){const e=new G(parseFloat(t.replace(/_/g,""))),n=t.indexOf(".");if(n!==-1){const s=t.substring(n+1).replace(/_/g,"");s[s.length-1]==="0"&&(e.minFractionDigits=s.length)}return e},stringify:Je},is=t=>typeof t=="bigint"||Number.isInteger(t);function _r(t,e,n,{intAsBigInt:s}){const r=t[0];if((r==="-"||r==="+")&&(e+=1),t=t.substring(e).replace(/_/g,""),s){switch(n){case 2:t=`0b${t}`;break;case 8:t=`0o${t}`;break;case 16:t=`0x${t}`;break}const o=BigInt(t);return r==="-"?BigInt(-1)*o:o}const i=parseInt(t,n);return r==="-"?-1*i:i}function ro(t,e,n){const{value:s}=t;if(is(s)){const r=s.toString(e);return s<0?"-"+n+r.substr(1):n+r}return Je(t)}const mb={identify:is,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(t,e,n)=>_r(t,2,2,n),stringify:t=>ro(t,2,"0b")},gb={identify:is,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(t,e,n)=>_r(t,1,8,n),stringify:t=>ro(t,8,"0")},yb={identify:is,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(t,e,n)=>_r(t,0,10,n),stringify:Je},bb={identify:is,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(t,e,n)=>_r(t,2,16,n),stringify:t=>ro(t,16,"0x")};class xn extends ze{constructor(e){super(e),this.tag=xn.tag}add(e){let n;ve(e)?n=e:e&&typeof e=="object"&&"key"in e&&"value"in e&&e.value===null?n=new Ie(e.key,null):n=new Ie(e,null),Bt(this.items,n.key)||this.items.push(n)}get(e,n){const s=Bt(this.items,e);return!n&&ve(s)?le(s.key)?s.key.value:s.key:s}set(e,n){if(typeof n!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof n}`);const s=Bt(this.items,e);s&&!n?this.items.splice(this.items.indexOf(s),1):!s&&n&&this.items.push(new Ie(e))}toJSON(e,n){return super.toJSON(e,n,Set)}toString(e,n,s){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),n,s);throw new Error("Set items must all have null values")}static from(e,n,s){const{replacer:r}=s,i=new this(e);if(n&&Symbol.iterator in Object(n))for(let o of n)typeof r=="function"&&(o=r.call(n,o,o)),i.items.push(Qi(o,null,s));return i}}xn.tag="tag:yaml.org,2002:set";const io={collection:"map",identify:t=>t instanceof Set,nodeClass:xn,default:!1,tag:"tag:yaml.org,2002:set",createNode:(t,e,n)=>xn.from(t,e,n),resolve(t,e){if(ss(t)){if(t.hasAllNullValues(!0))return Object.assign(new xn,t);e("Set items must all have null values")}else e("Expected a mapping for this tag");return t}};function oo(t,e){const n=t[0],s=n==="-"||n==="+"?t.substring(1):t,r=o=>e?BigInt(o):Number(o),i=s.replace(/_/g,"").split(":").reduce((o,a)=>o*r(60)+r(a),r(0));return n==="-"?r(-1)*i:i}function Nc(t){let{value:e}=t,n=o=>o;if(typeof e=="bigint")n=o=>BigInt(o);else if(isNaN(e)||!isFinite(e))return Je(t);let s="";e<0&&(s="-",e*=n(-1));const r=n(60),i=[e%r];return e<60?i.unshift(0):(e=(e-i[0])/r,i.unshift(e%r),e>=60&&(e=(e-i[0])/r,i.unshift(e))),s+i.map(o=>String(o).padStart(2,"0")).join(":").replace(/000000\d*$/,"")}const Oc={identify:t=>typeof t=="bigint"||Number.isInteger(t),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(t,e,{intAsBigInt:n})=>oo(t,n),stringify:Nc},Ic={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:t=>oo(t,!1),stringify:Nc},Er={identify:t=>t instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(t){const e=t.match(Er.test);if(!e)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");const[,n,s,r,i,o,a]=e.map(Number),l=e[7]?Number((e[7]+"00").substr(1,3)):0;let c=Date.UTC(n,s-1,r,i||0,o||0,a||0,l);const u=e[8];if(u&&u!=="Z"){let f=oo(u,!1);Math.abs(f)<30&&(f*=60),c-=6e4*f}return new Date(c)},stringify:({value:t})=>t?.toISOString().replace(/(T00:00:00)?\.000Z$/,"")??""},wa=[Cn,jn,wr,vr,Ac,Tc,mb,gb,yb,bb,hb,db,pb,to,pt,so,no,io,Oc,Ic,Er],va=new Map([["core",lb],["failsafe",[Cn,jn,wr]],["json",fb],["yaml11",wa],["yaml-1.1",wa]]),xa={binary:to,bool:Ji,float:bc,floatExp:yc,floatNaN:gc,floatTime:Ic,int:xc,intHex:_c,intOct:vc,intTime:Oc,map:Cn,merge:pt,null:vr,omap:so,pairs:no,seq:jn,set:io,timestamp:Er},wb={"tag:yaml.org,2002:binary":to,"tag:yaml.org,2002:merge":pt,"tag:yaml.org,2002:omap":so,"tag:yaml.org,2002:pairs":no,"tag:yaml.org,2002:set":io,"tag:yaml.org,2002:timestamp":Er};function Fr(t,e,n){const s=va.get(e);if(s&&!t)return n&&!s.includes(pt)?s.concat(pt):s.slice();let r=s;if(!r)if(Array.isArray(t))r=[];else{const i=Array.from(va.keys()).filter(o=>o!=="yaml11").map(o=>JSON.stringify(o)).join(", ");throw new Error(`Unknown schema "${e}"; use one of ${i} or define customTags array`)}if(Array.isArray(t))for(const i of t)r=r.concat(i);else typeof t=="function"&&(r=t(r.slice()));return n&&(r=r.concat(pt)),r.reduce((i,o)=>{const a=typeof o=="string"?xa[o]:o;if(!a){const l=JSON.stringify(o),c=Object.keys(xa).map(u=>JSON.stringify(u)).join(", ");throw new Error(`Unknown custom tag ${l}; use one of ${c}`)}return i.includes(a)||i.push(a),i},[])}const vb=(t,e)=>t.key<e.key?-1:t.key>e.key?1:0;class ao{constructor({compat:e,customTags:n,merge:s,resolveKnownTags:r,schema:i,sortMapEntries:o,toStringDefaults:a}){this.compat=Array.isArray(e)?Fr(e,"compat"):e?Fr(null,e):null,this.name=typeof i=="string"&&i||"core",this.knownTags=r?wb:{},this.tags=Fr(n,this.name,s),this.toStringOptions=a??null,Object.defineProperty(this,kt,{value:Cn}),Object.defineProperty(this,lt,{value:wr}),Object.defineProperty(this,On,{value:jn}),this.sortMapEntries=typeof o=="function"?o:o===!0?vb:null}clone(){const e=Object.create(ao.prototype,Object.getOwnPropertyDescriptors(this));return e.tags=this.tags.slice(),e}}function xb(t,e){const n=[];let s=e.directives===!0;if(e.directives!==!1&&t.directives){const l=t.directives.toString(t);l?(n.push(l),s=!0):t.directives.docStart&&(s=!0)}s&&n.push("---");const r=fc(t,e),{commentString:i}=r.options;if(t.commentBefore){n.length!==1&&n.unshift("");const l=i(t.commentBefore);n.unshift(ht(l,""))}let o=!1,a=null;if(t.contents){if(we(t.contents)){if(t.contents.spaceBefore&&s&&n.push(""),t.contents.commentBefore){const u=i(t.contents.commentBefore);n.push(ht(u,""))}r.forceBlockIndent=!!t.comment,a=t.contents.comment}const l=a?void 0:()=>o=!0;let c=Tn(t.contents,r,()=>a=null,l);a&&(c+=Dt(c,"",i(a))),(c[0]==="|"||c[0]===">")&&n[n.length-1]==="---"?n[n.length-1]=`--- ${c}`:n.push(c)}else n.push(Tn(t.contents,r));if(t.directives?.docEnd)if(t.comment){const l=i(t.comment);l.includes(`
`)?(n.push("..."),n.push(ht(l,""))):n.push(`... ${l}`)}else n.push("...");else{let l=t.comment;l&&o&&(l=l.replace(/^\n+/,"")),l&&((!o||a)&&n[n.length-1]!==""&&n.push(""),n.push(ht(i(l),"")))}return n.join(`
`)+`
`}class Sr{constructor(e,n,s){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,De,{value:wi});let r=null;typeof n=="function"||Array.isArray(n)?r=n:s===void 0&&n&&(s=n,n=void 0);const i=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,stringKeys:!1,uniqueKeys:!0,version:"1.2"},s);this.options=i;let{version:o}=i;s?._directives?(this.directives=s._directives.atDocument(),this.directives.yaml.explicit&&(o=this.directives.yaml.version)):this.directives=new Ne({version:o}),this.setSchema(o,s),this.contents=e===void 0?null:this.createNode(e,r,s)}clone(){const e=Object.create(Sr.prototype,{[De]:{value:wi}});return e.commentBefore=this.commentBefore,e.comment=this.comment,e.errors=this.errors.slice(),e.warnings=this.warnings.slice(),e.options=Object.assign({},this.options),this.directives&&(e.directives=this.directives.clone()),e.schema=this.schema.clone(),e.contents=we(this.contents)?this.contents.clone(e.schema):this.contents,this.range&&(e.range=this.range.slice()),e}add(e){an(this.contents)&&this.contents.add(e)}addIn(e,n){an(this.contents)&&this.contents.addIn(e,n)}createAlias(e,n){if(!e.anchor){const s=oc(this);e.anchor=!n||s.has(n)?ac(n||"a",s):n}return new Wi(e.anchor)}createNode(e,n,s){let r;if(typeof n=="function")e=n.call({"":e},"",e),r=n;else if(Array.isArray(n)){const w=S=>typeof S=="number"||S instanceof String||S instanceof Number,m=n.filter(w).map(String);m.length>0&&(n=n.concat(m)),r=n}else s===void 0&&n&&(s=n,n=void 0);const{aliasDuplicateObjects:i,anchorPrefix:o,flow:a,keepUndefined:l,onTagObj:c,tag:u}=s??{},{onAnchor:f,setAnchors:h,sourceObjects:p}=Hy(this,o||"a"),b={aliasDuplicateObjects:i??!0,keepUndefined:l??!1,onAnchor:f,onTagObj:c,replacer:r,schema:this.schema,sourceObjects:p},g=Xn(e,u,b);return a&&be(g)&&(g.flow=!0),h(),g}createPair(e,n,s={}){const r=this.createNode(e,null,s),i=this.createNode(n,null,s);return new Ie(r,i)}delete(e){return an(this.contents)?this.contents.delete(e):!1}deleteIn(e){return $n(e)?this.contents==null?!1:(this.contents=null,!0):an(this.contents)?this.contents.deleteIn(e):!1}get(e,n){return be(this.contents)?this.contents.get(e,n):void 0}getIn(e,n){return $n(e)?!n&&le(this.contents)?this.contents.value:this.contents:be(this.contents)?this.contents.getIn(e,n):void 0}has(e){return be(this.contents)?this.contents.has(e):!1}hasIn(e){return $n(e)?this.contents!==void 0:be(this.contents)?this.contents.hasIn(e):!1}set(e,n){this.contents==null?this.contents=sr(this.schema,[e],n):an(this.contents)&&this.contents.set(e,n)}setIn(e,n){$n(e)?this.contents=n:this.contents==null?this.contents=sr(this.schema,Array.from(e),n):an(this.contents)&&this.contents.setIn(e,n)}setSchema(e,n={}){typeof e=="number"&&(e=String(e));let s;switch(e){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new Ne({version:"1.1"}),s={resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=e:this.directives=new Ne({version:e}),s={resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,s=null;break;default:{const r=JSON.stringify(e);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${r}`)}}if(n.schema instanceof Object)this.schema=n.schema;else if(s)this.schema=new ao(Object.assign(s,n));else throw new Error("With a null YAML version, the { schema: Schema } option is required")}toJS({json:e,jsonArg:n,mapAsMap:s,maxAliasCount:r,onAnchor:i,reviver:o}={}){const a={anchors:new Map,doc:this,keep:!e,mapAsMap:s===!0,mapKeyWarned:!1,maxAliasCount:typeof r=="number"?r:100},l=Fe(this.contents,n??"",a);if(typeof i=="function")for(const{count:c,res:u}of a.anchors.values())i(u,c);return typeof o=="function"?pn(o,{"":l},"",l):l}toJSON(e,n){return this.toJS({json:!0,jsonArg:e,mapAsMap:!1,onAnchor:n})}toString(e={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in e&&(!Number.isInteger(e.indent)||Number(e.indent)<=0)){const n=JSON.stringify(e.indent);throw new Error(`"indent" option must be a positive integer, not ${n}`)}return xb(this,e)}}function an(t){if(be(t))return!0;throw new Error("Expected a YAML collection as document contents")}class Cc extends Error{constructor(e,n,s,r){super(),this.name=e,this.code=s,this.message=r,this.pos=n}}class zn extends Cc{constructor(e,n,s){super("YAMLParseError",e,n,s)}}class _b extends Cc{constructor(e,n,s){super("YAMLWarning",e,n,s)}}const _a=(t,e)=>n=>{if(n.pos[0]===-1)return;n.linePos=n.pos.map(a=>e.linePos(a));const{line:s,col:r}=n.linePos[0];n.message+=` at line ${s}, column ${r}`;let i=r-1,o=t.substring(e.lineStarts[s-1],e.lineStarts[s]).replace(/[\n\r]+$/,"");if(i>=60&&o.length>80){const a=Math.min(i-39,o.length-79);o=""+o.substring(a),i-=a-1}if(o.length>80&&(o=o.substring(0,79)+""),s>1&&/^ *$/.test(o.substring(0,i))){let a=t.substring(e.lineStarts[s-2],e.lineStarts[s-1]);a.length>80&&(a=a.substring(0,79)+`
`),o=a+o}if(/[^ ]/.test(o)){let a=1;const l=n.linePos[1];l&&l.line===s&&l.col>r&&(a=Math.max(1,Math.min(l.col-r,80-i)));const c=" ".repeat(i)+"^".repeat(a);n.message+=`:

${o}
${c}
`}};function Nn(t,{flow:e,indicator:n,next:s,offset:r,onError:i,parentIndent:o,startOnNewline:a}){let l=!1,c=a,u=a,f="",h="",p=!1,b=!1,g=null,w=null,m=null,S=null,v=null,_=null,E=null;for(const x of t)switch(b&&(x.type!=="space"&&x.type!=="newline"&&x.type!=="comma"&&i(x.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),b=!1),g&&(c&&x.type!=="comment"&&x.type!=="newline"&&i(g,"TAB_AS_INDENT","Tabs are not allowed as indentation"),g=null),x.type){case"space":!e&&(n!=="doc-start"||s?.type!=="flow-collection")&&x.source.includes("	")&&(g=x),u=!0;break;case"comment":{u||i(x,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const k=x.source.substring(1)||" ";f?f+=h+k:f=k,h="",c=!1;break}case"newline":c?f?f+=x.source:(!_||n!=="seq-item-ind")&&(l=!0):h+=x.source,c=!0,p=!0,(w||m)&&(S=x),u=!0;break;case"anchor":w&&i(x,"MULTIPLE_ANCHORS","A node can have at most one anchor"),x.source.endsWith(":")&&i(x.offset+x.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",!0),w=x,E??(E=x.offset),c=!1,u=!1,b=!0;break;case"tag":{m&&i(x,"MULTIPLE_TAGS","A node can have at most one tag"),m=x,E??(E=x.offset),c=!1,u=!1,b=!0;break}case n:(w||m)&&i(x,"BAD_PROP_ORDER",`Anchors and tags must be after the ${x.source} indicator`),_&&i(x,"UNEXPECTED_TOKEN",`Unexpected ${x.source} in ${e??"collection"}`),_=x,c=n==="seq-item-ind"||n==="explicit-key-ind",u=!1;break;case"comma":if(e){v&&i(x,"UNEXPECTED_TOKEN",`Unexpected , in ${e}`),v=x,c=!1,u=!1;break}default:i(x,"UNEXPECTED_TOKEN",`Unexpected ${x.type} token`),c=!1,u=!1}const A=t[t.length-1],y=A?A.offset+A.source.length:r;return b&&s&&s.type!=="space"&&s.type!=="newline"&&s.type!=="comma"&&(s.type!=="scalar"||s.source!=="")&&i(s.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),g&&(c&&g.indent<=o||s?.type==="block-map"||s?.type==="block-seq")&&i(g,"TAB_AS_INDENT","Tabs are not allowed as indentation"),{comma:v,found:_,spaceBefore:l,comment:f,hasNewline:p,anchor:w,tag:m,newlineAfterProp:S,end:y,start:E??y}}function Qn(t){if(!t)return null;switch(t.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(t.source.includes(`
`))return!0;if(t.end){for(const e of t.end)if(e.type==="newline")return!0}return!1;case"flow-collection":for(const e of t.items){for(const n of e.start)if(n.type==="newline")return!0;if(e.sep){for(const n of e.sep)if(n.type==="newline")return!0}if(Qn(e.key)||Qn(e.value))return!0}return!1;default:return!0}}function Ei(t,e,n){if(e?.type==="flow-collection"){const s=e.end[0];s.indent===t&&(s.source==="]"||s.source==="}")&&Qn(e)&&n(s,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}function jc(t,e,n){const{uniqueKeys:s}=t.options;if(s===!1)return!1;const r=typeof s=="function"?s:(i,o)=>i===o||le(i)&&le(o)&&i.value===o.value;return e.some(i=>r(i.key,n))}const Ea="All mapping items must start at the same column";function Eb({composeNode:t,composeEmptyNode:e},n,s,r,i){const o=i?.nodeClass??ze,a=new o(n.schema);n.atRoot&&(n.atRoot=!1);let l=s.offset,c=null;for(const u of s.items){const{start:f,key:h,sep:p,value:b}=u,g=Nn(f,{indicator:"explicit-key-ind",next:h??p?.[0],offset:l,onError:r,parentIndent:s.indent,startOnNewline:!0}),w=!g.found;if(w){if(h&&(h.type==="block-seq"?r(l,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in h&&h.indent!==s.indent&&r(l,"BAD_INDENT",Ea)),!g.anchor&&!g.tag&&!p){c=g.end,g.comment&&(a.comment?a.comment+=`
`+g.comment:a.comment=g.comment);continue}(g.newlineAfterProp||Qn(h))&&r(h??f[f.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}else g.found?.indent!==s.indent&&r(l,"BAD_INDENT",Ea);n.atKey=!0;const m=g.end,S=h?t(n,h,g,r):e(n,m,f,null,g,r);n.schema.compat&&Ei(s.indent,h,r),n.atKey=!1,jc(n,a.items,S)&&r(m,"DUPLICATE_KEY","Map keys must be unique");const v=Nn(p??[],{indicator:"map-value-ind",next:b,offset:S.range[2],onError:r,parentIndent:s.indent,startOnNewline:!h||h.type==="block-scalar"});if(l=v.end,v.found){w&&(b?.type==="block-map"&&!v.hasNewline&&r(l,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),n.options.strict&&g.start<v.found.offset-1024&&r(S.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));const _=b?t(n,b,v,r):e(n,l,p,null,v,r);n.schema.compat&&Ei(s.indent,b,r),l=_.range[2];const E=new Ie(S,_);n.options.keepSourceTokens&&(E.srcToken=u),a.items.push(E)}else{w&&r(S.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),v.comment&&(S.comment?S.comment+=`
`+v.comment:S.comment=v.comment);const _=new Ie(S);n.options.keepSourceTokens&&(_.srcToken=u),a.items.push(_)}}return c&&c<l&&r(c,"IMPOSSIBLE","Map comment with trailing content"),a.range=[s.offset,l,c??l],a}function Sb({composeNode:t,composeEmptyNode:e},n,s,r,i){const o=i?.nodeClass??qt,a=new o(n.schema);n.atRoot&&(n.atRoot=!1),n.atKey&&(n.atKey=!1);let l=s.offset,c=null;for(const{start:u,value:f}of s.items){const h=Nn(u,{indicator:"seq-item-ind",next:f,offset:l,onError:r,parentIndent:s.indent,startOnNewline:!0});if(!h.found)if(h.anchor||h.tag||f)f&&f.type==="block-seq"?r(h.end,"BAD_INDENT","All sequence items must start at the same column"):r(l,"MISSING_CHAR","Sequence item without - indicator");else{c=h.end,h.comment&&(a.comment=h.comment);continue}const p=f?t(n,f,h,r):e(n,h.end,u,null,h,r);n.schema.compat&&Ei(s.indent,f,r),l=p.range[2],a.items.push(p)}return a.range=[s.offset,l,c??l],a}function os(t,e,n,s){let r="";if(t){let i=!1,o="";for(const a of t){const{source:l,type:c}=a;switch(c){case"space":i=!0;break;case"comment":{n&&!i&&s(a,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const u=l.substring(1)||" ";r?r+=o+u:r=u,o="";break}case"newline":r&&(o+=l),i=!0;break;default:s(a,"UNEXPECTED_TOKEN",`Unexpected ${c} at node end`)}e+=l.length}}return{comment:r,offset:e}}const Dr="Block collections are not allowed within flow collections",Br=t=>t&&(t.type==="block-map"||t.type==="block-seq");function kb({composeNode:t,composeEmptyNode:e},n,s,r,i){const o=s.start.source==="{",a=o?"flow map":"flow sequence",l=i?.nodeClass??(o?ze:qt),c=new l(n.schema);c.flow=!0;const u=n.atRoot;u&&(n.atRoot=!1),n.atKey&&(n.atKey=!1);let f=s.offset+s.start.source.length;for(let w=0;w<s.items.length;++w){const m=s.items[w],{start:S,key:v,sep:_,value:E}=m,A=Nn(S,{flow:a,indicator:"explicit-key-ind",next:v??_?.[0],offset:f,onError:r,parentIndent:s.indent,startOnNewline:!1});if(!A.found){if(!A.anchor&&!A.tag&&!_&&!E){w===0&&A.comma?r(A.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${a}`):w<s.items.length-1&&r(A.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${a}`),A.comment&&(c.comment?c.comment+=`
`+A.comment:c.comment=A.comment),f=A.end;continue}!o&&n.options.strict&&Qn(v)&&r(v,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(w===0)A.comma&&r(A.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${a}`);else if(A.comma||r(A.start,"MISSING_CHAR",`Missing , between ${a} items`),A.comment){let y="";e:for(const x of S)switch(x.type){case"comma":case"space":break;case"comment":y=x.source.substring(1);break e;default:break e}if(y){let x=c.items[c.items.length-1];ve(x)&&(x=x.value??x.key),x.comment?x.comment+=`
`+y:x.comment=y,A.comment=A.comment.substring(y.length+1)}}if(!o&&!_&&!A.found){const y=E?t(n,E,A,r):e(n,A.end,_,null,A,r);c.items.push(y),f=y.range[2],Br(E)&&r(y.range,"BLOCK_IN_FLOW",Dr)}else{n.atKey=!0;const y=A.end,x=v?t(n,v,A,r):e(n,y,S,null,A,r);Br(v)&&r(x.range,"BLOCK_IN_FLOW",Dr),n.atKey=!1;const k=Nn(_??[],{flow:a,indicator:"map-value-ind",next:E,offset:x.range[2],onError:r,parentIndent:s.indent,startOnNewline:!1});if(k.found){if(!o&&!A.found&&n.options.strict){if(_)for(const N of _){if(N===k.found)break;if(N.type==="newline"){r(N,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}A.start<k.found.offset-1024&&r(k.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else E&&("source"in E&&E.source&&E.source[0]===":"?r(E,"MISSING_CHAR",`Missing space after : in ${a}`):r(k.start,"MISSING_CHAR",`Missing , or : between ${a} items`));const T=E?t(n,E,k,r):k.found?e(n,k.end,_,null,k,r):null;T?Br(E)&&r(T.range,"BLOCK_IN_FLOW",Dr):k.comment&&(x.comment?x.comment+=`
`+k.comment:x.comment=k.comment);const I=new Ie(x,T);if(n.options.keepSourceTokens&&(I.srcToken=m),o){const N=c;jc(n,N.items,x)&&r(y,"DUPLICATE_KEY","Map keys must be unique"),N.items.push(I)}else{const N=new ze(n.schema);N.flow=!0,N.items.push(I);const j=(T??x).range;N.range=[x.range[0],j[1],j[2]],c.items.push(N)}f=T?T.range[2]:k.end}}const h=o?"}":"]",[p,...b]=s.end;let g=f;if(p&&p.source===h)g=p.offset+p.source.length;else{const w=a[0].toUpperCase()+a.substring(1),m=u?`${w} must end with a ${h}`:`${w} in block collection must be sufficiently indented and end with a ${h}`;r(f,u?"MISSING_CHAR":"BAD_INDENT",m),p&&p.source.length!==1&&b.unshift(p)}if(b.length>0){const w=os(b,g,n.options.strict,r);w.comment&&(c.comment?c.comment+=`
`+w.comment:c.comment=w.comment),c.range=[s.offset,g,w.offset]}else c.range=[s.offset,g,g];return c}function Ur(t,e,n,s,r,i){const o=n.type==="block-map"?Eb(t,e,n,s,i):n.type==="block-seq"?Sb(t,e,n,s,i):kb(t,e,n,s,i),a=o.constructor;return r==="!"||r===a.tagName?(o.tag=a.tagName,o):(r&&(o.tag=r),o)}function Ab(t,e,n,s,r){const i=s.tag,o=i?e.directives.tagName(i.source,h=>r(i,"TAG_RESOLVE_FAILED",h)):null;if(n.type==="block-seq"){const{anchor:h,newlineAfterProp:p}=s,b=h&&i?h.offset>i.offset?h:i:h??i;b&&(!p||p.offset<b.offset)&&r(b,"MISSING_CHAR","Missing newline after block sequence props")}const a=n.type==="block-map"?"map":n.type==="block-seq"?"seq":n.start.source==="{"?"map":"seq";if(!i||!o||o==="!"||o===ze.tagName&&a==="map"||o===qt.tagName&&a==="seq")return Ur(t,e,n,r,o);let l=e.schema.tags.find(h=>h.tag===o&&h.collection===a);if(!l){const h=e.schema.knownTags[o];if(h&&h.collection===a)e.schema.tags.push(Object.assign({},h,{default:!1})),l=h;else return h?r(i,"BAD_COLLECTION_TYPE",`${h.tag} used for ${a} collection, but expects ${h.collection??"scalar"}`,!0):r(i,"TAG_RESOLVE_FAILED",`Unresolved tag: ${o}`,!0),Ur(t,e,n,r,o)}const c=Ur(t,e,n,r,o,l),u=l.resolve?.(c,h=>r(i,"TAG_RESOLVE_FAILED",h),e.options)??c,f=we(u)?u:new G(u);return f.range=c.range,f.tag=o,l?.format&&(f.format=l.format),f}function Tb(t,e,n){const s=e.offset,r=Nb(e,t.options.strict,n);if(!r)return{value:"",type:null,comment:"",range:[s,s,s]};const i=r.mode===">"?G.BLOCK_FOLDED:G.BLOCK_LITERAL,o=e.source?Ob(e.source):[];let a=o.length;for(let g=o.length-1;g>=0;--g){const w=o[g][1];if(w===""||w==="\r")a=g;else break}if(a===0){const g=r.chomp==="+"&&o.length>0?`
`.repeat(Math.max(1,o.length-1)):"";let w=s+r.length;return e.source&&(w+=e.source.length),{value:g,type:i,comment:r.comment,range:[s,w,w]}}let l=e.indent+r.indent,c=e.offset+r.length,u=0;for(let g=0;g<a;++g){const[w,m]=o[g];if(m===""||m==="\r")r.indent===0&&w.length>l&&(l=w.length);else{w.length<l&&n(c+w.length,"MISSING_CHAR","Block scalars with more-indented leading empty lines must use an explicit indentation indicator"),r.indent===0&&(l=w.length),u=g,l===0&&!t.atRoot&&n(c,"BAD_INDENT","Block scalar values in collections must be indented");break}c+=w.length+m.length+1}for(let g=o.length-1;g>=a;--g)o[g][0].length>l&&(a=g+1);let f="",h="",p=!1;for(let g=0;g<u;++g)f+=o[g][0].slice(l)+`
`;for(let g=u;g<a;++g){let[w,m]=o[g];c+=w.length+m.length+1;const S=m[m.length-1]==="\r";if(S&&(m=m.slice(0,-1)),m&&w.length<l){const _=`Block scalar lines must not be less indented than their ${r.indent?"explicit indentation indicator":"first line"}`;n(c-m.length-(S?2:1),"BAD_INDENT",_),w=""}i===G.BLOCK_LITERAL?(f+=h+w.slice(l)+m,h=`
`):w.length>l||m[0]==="	"?(h===" "?h=`
`:!p&&h===`
`&&(h=`

`),f+=h+w.slice(l)+m,h=`
`,p=!0):m===""?h===`
`?f+=`
`:h=`
`:(f+=h+m,h=" ",p=!1)}switch(r.chomp){case"-":break;case"+":for(let g=a;g<o.length;++g)f+=`
`+o[g][0].slice(l);f[f.length-1]!==`
`&&(f+=`
`);break;default:f+=`
`}const b=s+r.length+e.source.length;return{value:f,type:i,comment:r.comment,range:[s,b,b]}}function Nb({offset:t,props:e},n,s){if(e[0].type!=="block-scalar-header")return s(e[0],"IMPOSSIBLE","Block scalar header not found"),null;const{source:r}=e[0],i=r[0];let o=0,a="",l=-1;for(let h=1;h<r.length;++h){const p=r[h];if(!a&&(p==="-"||p==="+"))a=p;else{const b=Number(p);!o&&b?o=b:l===-1&&(l=t+h)}}l!==-1&&s(l,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${r}`);let c=!1,u="",f=r.length;for(let h=1;h<e.length;++h){const p=e[h];switch(p.type){case"space":c=!0;case"newline":f+=p.source.length;break;case"comment":n&&!c&&s(p,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),f+=p.source.length,u=p.source.substring(1);break;case"error":s(p,"UNEXPECTED_TOKEN",p.message),f+=p.source.length;break;default:{const b=`Unexpected token in block scalar header: ${p.type}`;s(p,"UNEXPECTED_TOKEN",b);const g=p.source;g&&typeof g=="string"&&(f+=g.length)}}}return{mode:i,indent:o,chomp:a,comment:u,length:f}}function Ob(t){const e=t.split(/\n( *)/),n=e[0],s=n.match(/^( *)/),i=[s?.[1]?[s[1],n.slice(s[1].length)]:["",n]];for(let o=1;o<e.length;o+=2)i.push([e[o],e[o+1]]);return i}function Ib(t,e,n){const{offset:s,type:r,source:i,end:o}=t;let a,l;const c=(h,p,b)=>n(s+h,p,b);switch(r){case"scalar":a=G.PLAIN,l=Cb(i,c);break;case"single-quoted-scalar":a=G.QUOTE_SINGLE,l=jb(i,c);break;case"double-quoted-scalar":a=G.QUOTE_DOUBLE,l=Rb(i,c);break;default:return n(t,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${r}`),{value:"",type:null,comment:"",range:[s,s+i.length,s+i.length]}}const u=s+i.length,f=os(o,u,e,n);return{value:l,type:a,comment:f.comment,range:[s,u,f.offset]}}function Cb(t,e){let n="";switch(t[0]){case"	":n="a tab character";break;case",":n="flow indicator character ,";break;case"%":n="directive indicator character %";break;case"|":case">":{n=`block scalar indicator ${t[0]}`;break}case"@":case"`":{n=`reserved character ${t[0]}`;break}}return n&&e(0,"BAD_SCALAR_START",`Plain value cannot start with ${n}`),Rc(t)}function jb(t,e){return(t[t.length-1]!=="'"||t.length===1)&&e(t.length,"MISSING_CHAR","Missing closing 'quote"),Rc(t.slice(1,-1)).replace(/''/g,"'")}function Rc(t){let e,n;try{e=new RegExp(`(.*?)(?<![ 	])[ 	]*\r?
`,"sy"),n=new RegExp(`[ 	]*(.*?)(?:(?<![ 	])[ 	]*)?\r?
`,"sy")}catch{e=/(.*?)[ \t]*\r?\n/sy,n=/[ \t]*(.*?)[ \t]*\r?\n/sy}let s=e.exec(t);if(!s)return t;let r=s[1],i=" ",o=e.lastIndex;for(n.lastIndex=o;s=n.exec(t);)s[1]===""?i===`
`?r+=i:i=`
`:(r+=i+s[1],i=" "),o=n.lastIndex;const a=/[ \t]*(.*)/sy;return a.lastIndex=o,s=a.exec(t),r+i+(s?.[1]??"")}function Rb(t,e){let n="";for(let s=1;s<t.length-1;++s){const r=t[s];if(!(r==="\r"&&t[s+1]===`
`))if(r===`
`){const{fold:i,offset:o}=Mb(t,s);n+=i,s=o}else if(r==="\\"){let i=t[++s];const o=Pb[i];if(o)n+=o;else if(i===`
`)for(i=t[s+1];i===" "||i==="	";)i=t[++s+1];else if(i==="\r"&&t[s+1]===`
`)for(i=t[++s+1];i===" "||i==="	";)i=t[++s+1];else if(i==="x"||i==="u"||i==="U"){const a={x:2,u:4,U:8}[i];n+=$b(t,s+1,a,e),s+=a}else{const a=t.substr(s-1,2);e(s-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${a}`),n+=a}}else if(r===" "||r==="	"){const i=s;let o=t[s+1];for(;o===" "||o==="	";)o=t[++s+1];o!==`
`&&!(o==="\r"&&t[s+2]===`
`)&&(n+=s>i?t.slice(i,s+1):r)}else n+=r}return(t[t.length-1]!=='"'||t.length===1)&&e(t.length,"MISSING_CHAR",'Missing closing "quote'),n}function Mb(t,e){let n="",s=t[e+1];for(;(s===" "||s==="	"||s===`
`||s==="\r")&&!(s==="\r"&&t[e+2]!==`
`);)s===`
`&&(n+=`
`),e+=1,s=t[e+1];return n||(n=" "),{fold:n,offset:e}}const Pb={0:"\0",a:"\x07",b:"\b",e:"\x1B",f:"\f",n:`
`,r:"\r",t:"	",v:"\v",N:"",_:"",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","	":"	"};function $b(t,e,n,s){const r=t.substr(e,n),o=r.length===n&&/^[0-9a-fA-F]+$/.test(r)?parseInt(r,16):NaN;if(isNaN(o)){const a=t.substr(e-2,n+2);return s(e-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${a}`),a}return String.fromCodePoint(o)}function Mc(t,e,n,s){const{value:r,type:i,comment:o,range:a}=e.type==="block-scalar"?Tb(t,e,s):Ib(e,t.options.strict,s),l=n?t.directives.tagName(n.source,f=>s(n,"TAG_RESOLVE_FAILED",f)):null;let c;t.options.stringKeys&&t.atKey?c=t.schema[lt]:l?c=zb(t.schema,r,l,n,s):e.type==="scalar"?c=Lb(t,r,e,s):c=t.schema[lt];let u;try{const f=c.resolve(r,h=>s(n??e,"TAG_RESOLVE_FAILED",h),t.options);u=le(f)?f:new G(f)}catch(f){const h=f instanceof Error?f.message:String(f);s(n??e,"TAG_RESOLVE_FAILED",h),u=new G(r)}return u.range=a,u.source=r,i&&(u.type=i),l&&(u.tag=l),c.format&&(u.format=c.format),o&&(u.comment=o),u}function zb(t,e,n,s,r){if(n==="!")return t[lt];const i=[];for(const a of t.tags)if(!a.collection&&a.tag===n)if(a.default&&a.test)i.push(a);else return a;for(const a of i)if(a.test?.test(e))return a;const o=t.knownTags[n];return o&&!o.collection?(t.tags.push(Object.assign({},o,{default:!1,test:void 0})),o):(r(s,"TAG_RESOLVE_FAILED",`Unresolved tag: ${n}`,n!=="tag:yaml.org,2002:str"),t[lt])}function Lb({atKey:t,directives:e,schema:n},s,r,i){const o=n.tags.find(a=>(a.default===!0||t&&a.default==="key")&&a.test?.test(s))||n[lt];if(n.compat){const a=n.compat.find(l=>l.default&&l.test?.test(s))??n[lt];if(o.tag!==a.tag){const l=e.tagString(o.tag),c=e.tagString(a.tag),u=`Value may be parsed as either ${l} or ${c}`;i(r,"TAG_RESOLVE_FAILED",u,!0)}}return o}function Fb(t,e,n){if(e){n??(n=e.length);for(let s=n-1;s>=0;--s){let r=e[s];switch(r.type){case"space":case"comment":case"newline":t-=r.source.length;continue}for(r=e[++s];r?.type==="space";)t+=r.source.length,r=e[++s];break}}return t}const Db={composeNode:Pc,composeEmptyNode:lo};function Pc(t,e,n,s){const r=t.atKey,{spaceBefore:i,comment:o,anchor:a,tag:l}=n;let c,u=!0;switch(e.type){case"alias":c=Bb(t,e,s),(a||l)&&s(e,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":c=Mc(t,e,l,s),a&&(c.anchor=a.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":c=Ab(Db,t,e,n,s),a&&(c.anchor=a.source.substring(1));break;default:{const f=e.type==="error"?e.message:`Unsupported token (type: ${e.type})`;s(e,"UNEXPECTED_TOKEN",f),c=lo(t,e.offset,void 0,null,n,s),u=!1}}return a&&c.anchor===""&&s(a,"BAD_ALIAS","Anchor cannot be an empty string"),r&&t.options.stringKeys&&(!le(c)||typeof c.value!="string"||c.tag&&c.tag!=="tag:yaml.org,2002:str")&&s(l??e,"NON_STRING_KEY","With stringKeys, all keys must be strings"),i&&(c.spaceBefore=!0),o&&(e.type==="scalar"&&e.source===""?c.comment=o:c.commentBefore=o),t.options.keepSourceTokens&&u&&(c.srcToken=e),c}function lo(t,e,n,s,{spaceBefore:r,comment:i,anchor:o,tag:a,end:l},c){const u={type:"scalar",offset:Fb(e,n,s),indent:-1,source:""},f=Mc(t,u,a,c);return o&&(f.anchor=o.source.substring(1),f.anchor===""&&c(o,"BAD_ALIAS","Anchor cannot be an empty string")),r&&(f.spaceBefore=!0),i&&(f.comment=i,f.range[2]=l),f}function Bb({options:t},{offset:e,source:n,end:s},r){const i=new Wi(n.substring(1));i.source===""&&r(e,"BAD_ALIAS","Alias cannot be an empty string"),i.source.endsWith(":")&&r(e+n.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",!0);const o=e+n.length,a=os(s,o,t.strict,r);return i.range=[e,o,a.offset],a.comment&&(i.comment=a.comment),i}function Ub(t,e,{offset:n,start:s,value:r,end:i},o){const a=Object.assign({_directives:e},t),l=new Sr(void 0,a),c={atKey:!1,atRoot:!0,directives:l.directives,options:l.options,schema:l.schema},u=Nn(s,{indicator:"doc-start",next:r??i?.[0],offset:n,onError:o,parentIndent:0,startOnNewline:!0});u.found&&(l.directives.docStart=!0,r&&(r.type==="block-map"||r.type==="block-seq")&&!u.hasNewline&&o(u.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),l.contents=r?Pc(c,r,u,o):lo(c,u.end,s,null,u,o);const f=l.contents.range[2],h=os(i,f,!1,o);return h.comment&&(l.comment=h.comment),l.range=[n,f,h.offset],l}function Pn(t){if(typeof t=="number")return[t,t+1];if(Array.isArray(t))return t.length===2?t:[t[0],t[1]];const{offset:e,source:n}=t;return[e,e+(typeof n=="string"?n.length:1)]}function Sa(t){let e="",n=!1,s=!1;for(let r=0;r<t.length;++r){const i=t[r];switch(i[0]){case"#":e+=(e===""?"":s?`

`:`
`)+(i.substring(1)||" "),n=!0,s=!1;break;case"%":t[r+1]?.[0]!=="#"&&(r+=1),n=!1;break;default:n||(s=!0),n=!1}}return{comment:e,afterEmptyLine:s}}class Zb{constructor(e={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(n,s,r,i)=>{const o=Pn(n);i?this.warnings.push(new _b(o,s,r)):this.errors.push(new zn(o,s,r))},this.directives=new Ne({version:e.version||"1.2"}),this.options=e}decorate(e,n){const{comment:s,afterEmptyLine:r}=Sa(this.prelude);if(s){const i=e.contents;if(n)e.comment=e.comment?`${e.comment}
${s}`:s;else if(r||e.directives.docStart||!i)e.commentBefore=s;else if(be(i)&&!i.flow&&i.items.length>0){let o=i.items[0];ve(o)&&(o=o.key);const a=o.commentBefore;o.commentBefore=a?`${s}
${a}`:s}else{const o=i.commentBefore;i.commentBefore=o?`${s}
${o}`:s}}n?(Array.prototype.push.apply(e.errors,this.errors),Array.prototype.push.apply(e.warnings,this.warnings)):(e.errors=this.errors,e.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:Sa(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(e,n=!1,s=-1){for(const r of e)yield*this.next(r);yield*this.end(n,s)}*next(e){switch(e.type){case"directive":this.directives.add(e.source,(n,s,r)=>{const i=Pn(e);i[0]+=n,this.onError(i,"BAD_DIRECTIVE",s,r)}),this.prelude.push(e.source),this.atDirectives=!0;break;case"document":{const n=Ub(this.options,this.directives,e,this.onError);this.atDirectives&&!n.directives.docStart&&this.onError(e,"MISSING_CHAR","Missing directives-end/doc-start indicator line"),this.decorate(n,!1),this.doc&&(yield this.doc),this.doc=n,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(e.source);break;case"error":{const n=e.source?`${e.message}: ${JSON.stringify(e.source)}`:e.message,s=new zn(Pn(e),"UNEXPECTED_TOKEN",n);this.atDirectives||!this.doc?this.errors.push(s):this.doc.errors.push(s);break}case"doc-end":{if(!this.doc){const s="Unexpected doc-end without preceding document";this.errors.push(new zn(Pn(e),"UNEXPECTED_TOKEN",s));break}this.doc.directives.docEnd=!0;const n=os(e.end,e.offset+e.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),n.comment){const s=this.doc.comment;this.doc.comment=s?`${s}
${n.comment}`:n.comment}this.doc.range[2]=n.offset;break}default:this.errors.push(new zn(Pn(e),"UNEXPECTED_TOKEN",`Unsupported token ${e.type}`))}}*end(e=!1,n=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(e){const s=Object.assign({_directives:this.directives},this.options),r=new Sr(void 0,s);this.atDirectives&&this.onError(n,"MISSING_CHAR","Missing directives-end indicator line"),r.range=[0,n,n],this.decorate(r,!1),yield r}}}const $c="\uFEFF",zc="",Lc="",Si="";function Vb(t){switch(t){case $c:return"byte-order-mark";case zc:return"doc-mode";case Lc:return"flow-error-end";case Si:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case`
`:case`\r
`:return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(t[0]){case" ":case"	":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}function He(t){switch(t){case void 0:case" ":case`
`:case"\r":case"	":return!0;default:return!1}}const ka=new Set("0123456789ABCDEFabcdef"),Kb=new Set("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()"),Ms=new Set(",[]{}"),Gb=new Set(` ,[]{}
\r	`),Zr=t=>!t||Gb.has(t);class qb{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(e,n=!1){if(e){if(typeof e!="string")throw TypeError("source is not a string");this.buffer=this.buffer?this.buffer+e:e,this.lineEndPos=null}this.atEnd=!n;let s=this.next??"stream";for(;s&&(n||this.hasChars(1));)s=yield*this.parseNext(s)}atLineEnd(){let e=this.pos,n=this.buffer[e];for(;n===" "||n==="	";)n=this.buffer[++e];return!n||n==="#"||n===`
`?!0:n==="\r"?this.buffer[e+1]===`
`:!1}charAt(e){return this.buffer[this.pos+e]}continueScalar(e){let n=this.buffer[e];if(this.indentNext>0){let s=0;for(;n===" ";)n=this.buffer[++s+e];if(n==="\r"){const r=this.buffer[s+e+1];if(r===`
`||!r&&!this.atEnd)return e+s+1}return n===`
`||s>=this.indentNext||!n&&!this.atEnd?e+s:-1}if(n==="-"||n==="."){const s=this.buffer.substr(e,3);if((s==="---"||s==="...")&&He(this.buffer[e+3]))return-1}return e}getLine(){let e=this.lineEndPos;return(typeof e!="number"||e!==-1&&e<this.pos)&&(e=this.buffer.indexOf(`
`,this.pos),this.lineEndPos=e),e===-1?this.atEnd?this.buffer.substring(this.pos):null:(this.buffer[e-1]==="\r"&&(e-=1),this.buffer.substring(this.pos,e))}hasChars(e){return this.pos+e<=this.buffer.length}setNext(e){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=e,null}peek(e){return this.buffer.substr(this.pos,e)}*parseNext(e){switch(e){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let e=this.getLine();if(e===null)return this.setNext("stream");if(e[0]===$c&&(yield*this.pushCount(1),e=e.substring(1)),e[0]==="%"){let n=e.length,s=e.indexOf("#");for(;s!==-1;){const i=e[s-1];if(i===" "||i==="	"){n=s-1;break}else s=e.indexOf("#",s+1)}for(;;){const i=e[n-1];if(i===" "||i==="	")n-=1;else break}const r=(yield*this.pushCount(n))+(yield*this.pushSpaces(!0));return yield*this.pushCount(e.length-r),this.pushNewline(),"stream"}if(this.atLineEnd()){const n=yield*this.pushSpaces(!0);return yield*this.pushCount(e.length-n),yield*this.pushNewline(),"stream"}return yield zc,yield*this.parseLineStart()}*parseLineStart(){const e=this.charAt(0);if(!e&&!this.atEnd)return this.setNext("line-start");if(e==="-"||e==="."){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");const n=this.peek(3);if((n==="---"||n==="...")&&He(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,n==="---"?"doc":"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!He(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){const[e,n]=this.peek(2);if(!n&&!this.atEnd)return this.setNext("block-start");if((e==="-"||e==="?"||e===":")&&He(n)){const s=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=s,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);const e=this.getLine();if(e===null)return this.setNext("doc");let n=yield*this.pushIndicators();switch(e[n]){case"#":yield*this.pushCount(e.length-n);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(Zr),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return n+=yield*this.parseBlockScalarHeader(),n+=yield*this.pushSpaces(!0),yield*this.pushCount(e.length-n),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let e,n,s=-1;do e=yield*this.pushNewline(),e>0?(n=yield*this.pushSpaces(!1),this.indentValue=s=n):n=0,n+=yield*this.pushSpaces(!0);while(e+n>0);const r=this.getLine();if(r===null)return this.setNext("flow");if((s!==-1&&s<this.indentNext&&r[0]!=="#"||s===0&&(r.startsWith("---")||r.startsWith("..."))&&He(r[3]))&&!(s===this.indentNext-1&&this.flowLevel===1&&(r[0]==="]"||r[0]==="}")))return this.flowLevel=0,yield Lc,yield*this.parseLineStart();let i=0;for(;r[i]===",";)i+=yield*this.pushCount(1),i+=yield*this.pushSpaces(!0),this.flowKey=!1;switch(i+=yield*this.pushIndicators(),r[i]){case void 0:return"flow";case"#":return yield*this.pushCount(r.length-i),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(Zr),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{const o=this.charAt(1);if(this.flowKey||He(o)||o===",")return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){const e=this.charAt(0);let n=this.buffer.indexOf(e,this.pos+1);if(e==="'")for(;n!==-1&&this.buffer[n+1]==="'";)n=this.buffer.indexOf("'",n+2);else for(;n!==-1;){let i=0;for(;this.buffer[n-1-i]==="\\";)i+=1;if(i%2===0)break;n=this.buffer.indexOf('"',n+1)}const s=this.buffer.substring(0,n);let r=s.indexOf(`
`,this.pos);if(r!==-1){for(;r!==-1;){const i=this.continueScalar(r+1);if(i===-1)break;r=s.indexOf(`
`,i)}r!==-1&&(n=r-(s[r-1]==="\r"?2:1))}if(n===-1){if(!this.atEnd)return this.setNext("quoted-scalar");n=this.buffer.length}return yield*this.pushToIndex(n+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let e=this.pos;for(;;){const n=this.buffer[++e];if(n==="+")this.blockScalarKeep=!0;else if(n>"0"&&n<="9")this.blockScalarIndent=Number(n)-1;else if(n!=="-")break}return yield*this.pushUntil(n=>He(n)||n==="#")}*parseBlockScalar(){let e=this.pos-1,n=0,s;e:for(let i=this.pos;s=this.buffer[i];++i)switch(s){case" ":n+=1;break;case`
`:e=i,n=0;break;case"\r":{const o=this.buffer[i+1];if(!o&&!this.atEnd)return this.setNext("block-scalar");if(o===`
`)break}default:break e}if(!s&&!this.atEnd)return this.setNext("block-scalar");if(n>=this.indentNext){this.blockScalarIndent===-1?this.indentNext=n:this.indentNext=this.blockScalarIndent+(this.indentNext===0?1:this.indentNext);do{const i=this.continueScalar(e+1);if(i===-1)break;e=this.buffer.indexOf(`
`,i)}while(e!==-1);if(e===-1){if(!this.atEnd)return this.setNext("block-scalar");e=this.buffer.length}}let r=e+1;for(s=this.buffer[r];s===" ";)s=this.buffer[++r];if(s==="	"){for(;s==="	"||s===" "||s==="\r"||s===`
`;)s=this.buffer[++r];e=r-1}else if(!this.blockScalarKeep)do{let i=e-1,o=this.buffer[i];o==="\r"&&(o=this.buffer[--i]);const a=i;for(;o===" ";)o=this.buffer[--i];if(o===`
`&&i>=this.pos&&i+1+n>a)e=i;else break}while(!0);return yield Si,yield*this.pushToIndex(e+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){const e=this.flowLevel>0;let n=this.pos-1,s=this.pos-1,r;for(;r=this.buffer[++s];)if(r===":"){const i=this.buffer[s+1];if(He(i)||e&&Ms.has(i))break;n=s}else if(He(r)){let i=this.buffer[s+1];if(r==="\r"&&(i===`
`?(s+=1,r=`
`,i=this.buffer[s+1]):n=s),i==="#"||e&&Ms.has(i))break;if(r===`
`){const o=this.continueScalar(s+1);if(o===-1)break;s=Math.max(s,o-2)}}else{if(e&&Ms.has(r))break;n=s}return!r&&!this.atEnd?this.setNext("plain-scalar"):(yield Si,yield*this.pushToIndex(n+1,!0),e?"flow":"doc")}*pushCount(e){return e>0?(yield this.buffer.substr(this.pos,e),this.pos+=e,e):0}*pushToIndex(e,n){const s=this.buffer.slice(this.pos,e);return s?(yield s,this.pos+=s.length,s.length):(n&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(Zr))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"-":case"?":case":":{const e=this.flowLevel>0,n=this.charAt(1);if(He(n)||e&&Ms.has(n))return e?this.flowKey&&(this.flowKey=!1):this.indentNext=this.indentValue+1,(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}}return 0}*pushTag(){if(this.charAt(1)==="<"){let e=this.pos+2,n=this.buffer[e];for(;!He(n)&&n!==">";)n=this.buffer[++e];return yield*this.pushToIndex(n===">"?e+1:e,!1)}else{let e=this.pos+1,n=this.buffer[e];for(;n;)if(Kb.has(n))n=this.buffer[++e];else if(n==="%"&&ka.has(this.buffer[e+1])&&ka.has(this.buffer[e+2]))n=this.buffer[e+=3];else break;return yield*this.pushToIndex(e,!1)}}*pushNewline(){const e=this.buffer[this.pos];return e===`
`?yield*this.pushCount(1):e==="\r"&&this.charAt(1)===`
`?yield*this.pushCount(2):0}*pushSpaces(e){let n=this.pos-1,s;do s=this.buffer[++n];while(s===" "||e&&s==="	");const r=n-this.pos;return r>0&&(yield this.buffer.substr(this.pos,r),this.pos=n),r}*pushUntil(e){let n=this.pos,s=this.buffer[n];for(;!e(s);)s=this.buffer[++n];return yield*this.pushToIndex(n,!1)}}class Yb{constructor(){this.lineStarts=[],this.addNewLine=e=>this.lineStarts.push(e),this.linePos=e=>{let n=0,s=this.lineStarts.length;for(;n<s;){const i=n+s>>1;this.lineStarts[i]<e?n=i+1:s=i}if(this.lineStarts[n]===e)return{line:n+1,col:1};if(n===0)return{line:0,col:e};const r=this.lineStarts[n-1];return{line:n,col:e-r+1}}}}function bt(t,e){for(let n=0;n<t.length;++n)if(t[n].type===e)return!0;return!1}function Aa(t){for(let e=0;e<t.length;++e)switch(t[e].type){case"space":case"comment":case"newline":break;default:return e}return-1}function Fc(t){switch(t?.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function Ps(t){switch(t.type){case"document":return t.start;case"block-map":{const e=t.items[t.items.length-1];return e.sep??e.start}case"block-seq":return t.items[t.items.length-1].start;default:return[]}}function ln(t){if(t.length===0)return[];let e=t.length;e:for(;--e>=0;)switch(t[e].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;t[++e]?.type==="space";);return t.splice(e,t.length)}function Ta(t){if(t.start.type==="flow-seq-start")for(const e of t.items)e.sep&&!e.value&&!bt(e.start,"explicit-key-ind")&&!bt(e.sep,"map-value-ind")&&(e.key&&(e.value=e.key),delete e.key,Fc(e.value)?e.value.end?Array.prototype.push.apply(e.value.end,e.sep):e.value.end=e.sep:Array.prototype.push.apply(e.start,e.sep),delete e.sep)}class Hb{constructor(e){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new qb,this.onNewLine=e}*parse(e,n=!1){this.onNewLine&&this.offset===0&&this.onNewLine(0);for(const s of this.lexer.lex(e,n))yield*this.next(s);n||(yield*this.end())}*next(e){if(this.source=e,this.atScalar){this.atScalar=!1,yield*this.step(),this.offset+=e.length;return}const n=Vb(e);if(n)if(n==="scalar")this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=n,yield*this.step(),n){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+e.length);break;case"space":this.atNewLine&&e[0]===" "&&(this.indent+=e.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=e.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=e.length}else{const s=`Not a YAML token: ${e}`;yield*this.pop({type:"error",offset:this.offset,message:s,source:e}),this.offset+=e.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){const e=this.peek(1);if(this.type==="doc-end"&&(!e||e.type!=="doc-end")){for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source});return}if(!e)return yield*this.stream();switch(e.type){case"document":return yield*this.document(e);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(e);case"block-scalar":return yield*this.blockScalar(e);case"block-map":return yield*this.blockMap(e);case"block-seq":return yield*this.blockSequence(e);case"flow-collection":return yield*this.flowCollection(e);case"doc-end":return yield*this.documentEnd(e)}yield*this.pop()}peek(e){return this.stack[this.stack.length-e]}*pop(e){const n=e??this.stack.pop();if(!n)yield{type:"error",offset:this.offset,source:"",message:"Tried to pop an empty stack"};else if(this.stack.length===0)yield n;else{const s=this.peek(1);switch(n.type==="block-scalar"?n.indent="indent"in s?s.indent:0:n.type==="flow-collection"&&s.type==="document"&&(n.indent=0),n.type==="flow-collection"&&Ta(n),s.type){case"document":s.value=n;break;case"block-scalar":s.props.push(n);break;case"block-map":{const r=s.items[s.items.length-1];if(r.value){s.items.push({start:[],key:n,sep:[]}),this.onKeyLine=!0;return}else if(r.sep)r.value=n;else{Object.assign(r,{key:n,sep:[]}),this.onKeyLine=!r.explicitKey;return}break}case"block-seq":{const r=s.items[s.items.length-1];r.value?s.items.push({start:[],value:n}):r.value=n;break}case"flow-collection":{const r=s.items[s.items.length-1];!r||r.value?s.items.push({start:[],key:n,sep:[]}):r.sep?r.value=n:Object.assign(r,{key:n,sep:[]});return}default:yield*this.pop(),yield*this.pop(n)}if((s.type==="document"||s.type==="block-map"||s.type==="block-seq")&&(n.type==="block-map"||n.type==="block-seq")){const r=n.items[n.items.length-1];r&&!r.sep&&!r.value&&r.start.length>0&&Aa(r.start)===-1&&(n.indent===0||r.start.every(i=>i.type!=="comment"||i.indent<n.indent))&&(s.type==="document"?s.end=r.start:s.items.push({start:r.start}),n.items.splice(-1,1))}}}*stream(){switch(this.type){case"directive-line":yield{type:"directive",offset:this.offset,source:this.source};return;case"byte-order-mark":case"space":case"comment":case"newline":yield this.sourceToken;return;case"doc-mode":case"doc-start":{const e={type:"document",offset:this.offset,start:[]};this.type==="doc-start"&&e.start.push(this.sourceToken),this.stack.push(e);return}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(e){if(e.value)return yield*this.lineEnd(e);switch(this.type){case"doc-start":{Aa(e.start)!==-1?(yield*this.pop(),yield*this.step()):e.start.push(this.sourceToken);return}case"anchor":case"tag":case"space":case"comment":case"newline":e.start.push(this.sourceToken);return}const n=this.startBlockValue(e);n?this.stack.push(n):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(e){if(this.type==="map-value-ind"){const n=Ps(this.peek(2)),s=ln(n);let r;e.end?(r=e.end,r.push(this.sourceToken),delete e.end):r=[this.sourceToken];const i={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:s,key:e,sep:r}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=i}else yield*this.lineEnd(e)}*blockScalar(e){switch(this.type){case"space":case"comment":case"newline":e.props.push(this.sourceToken);return;case"scalar":if(e.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let n=this.source.indexOf(`
`)+1;for(;n!==0;)this.onNewLine(this.offset+n),n=this.source.indexOf(`
`,n)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(e){const n=e.items[e.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,n.value){const s="end"in n.value?n.value.end:void 0;(Array.isArray(s)?s[s.length-1]:void 0)?.type==="comment"?s?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)e.items.push({start:[this.sourceToken]});else if(n.sep)n.sep.push(this.sourceToken);else{if(this.atIndentedComment(n.start,e.indent)){const r=e.items[e.items.length-2]?.value?.end;if(Array.isArray(r)){Array.prototype.push.apply(r,n.start),r.push(this.sourceToken),e.items.pop();return}}n.start.push(this.sourceToken)}return}if(this.indent>=e.indent){const s=!this.onKeyLine&&this.indent===e.indent,r=s&&(n.sep||n.explicitKey)&&this.type!=="seq-item-ind";let i=[];if(r&&n.sep&&!n.value){const o=[];for(let a=0;a<n.sep.length;++a){const l=n.sep[a];switch(l.type){case"newline":o.push(a);break;case"space":break;case"comment":l.indent>e.indent&&(o.length=0);break;default:o.length=0}}o.length>=2&&(i=n.sep.splice(o[1]))}switch(this.type){case"anchor":case"tag":r||n.value?(i.push(this.sourceToken),e.items.push({start:i}),this.onKeyLine=!0):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"explicit-key-ind":!n.sep&&!n.explicitKey?(n.start.push(this.sourceToken),n.explicitKey=!0):r||n.value?(i.push(this.sourceToken),e.items.push({start:i,explicitKey:!0})):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken],explicitKey:!0}]}),this.onKeyLine=!0;return;case"map-value-ind":if(n.explicitKey)if(n.sep)if(n.value)e.items.push({start:[],key:null,sep:[this.sourceToken]});else if(bt(n.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:i,key:null,sep:[this.sourceToken]}]});else if(Fc(n.key)&&!bt(n.sep,"newline")){const o=ln(n.start),a=n.key,l=n.sep;l.push(this.sourceToken),delete n.key,delete n.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:a,sep:l}]})}else i.length>0?n.sep=n.sep.concat(i,this.sourceToken):n.sep.push(this.sourceToken);else if(bt(n.start,"newline"))Object.assign(n,{key:null,sep:[this.sourceToken]});else{const o=ln(n.start);this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:null,sep:[this.sourceToken]}]})}else n.sep?n.value||r?e.items.push({start:i,key:null,sep:[this.sourceToken]}):bt(n.sep,"map-value-ind")?this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):n.sep.push(this.sourceToken):Object.assign(n,{key:null,sep:[this.sourceToken]});this.onKeyLine=!0;return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const o=this.flowScalar(this.type);r||n.value?(e.items.push({start:i,key:o,sep:[]}),this.onKeyLine=!0):n.sep?this.stack.push(o):(Object.assign(n,{key:o,sep:[]}),this.onKeyLine=!0);return}default:{const o=this.startBlockValue(e);if(o){if(o.type==="block-seq"){if(!n.explicitKey&&n.sep&&!bt(n.sep,"newline")){yield*this.pop({type:"error",offset:this.offset,message:"Unexpected block-seq-ind on same line with key",source:this.source});return}}else s&&e.items.push({start:i});this.stack.push(o);return}}}}yield*this.pop(),yield*this.step()}*blockSequence(e){const n=e.items[e.items.length-1];switch(this.type){case"newline":if(n.value){const s="end"in n.value?n.value.end:void 0;(Array.isArray(s)?s[s.length-1]:void 0)?.type==="comment"?s?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)e.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(n.start,e.indent)){const r=e.items[e.items.length-2]?.value?.end;if(Array.isArray(r)){Array.prototype.push.apply(r,n.start),r.push(this.sourceToken),e.items.pop();return}}n.start.push(this.sourceToken)}return;case"anchor":case"tag":if(n.value||this.indent<=e.indent)break;n.start.push(this.sourceToken);return;case"seq-item-ind":if(this.indent!==e.indent)break;n.value||bt(n.start,"seq-item-ind")?e.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken);return}if(this.indent>e.indent){const s=this.startBlockValue(e);if(s){this.stack.push(s);return}}yield*this.pop(),yield*this.step()}*flowCollection(e){const n=e.items[e.items.length-1];if(this.type==="flow-error-end"){let s;do yield*this.pop(),s=this.peek(1);while(s&&s.type==="flow-collection")}else if(e.end.length===0){switch(this.type){case"comma":case"explicit-key-ind":!n||n.sep?e.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken);return;case"map-value-ind":!n||n.value?e.items.push({start:[],key:null,sep:[this.sourceToken]}):n.sep?n.sep.push(this.sourceToken):Object.assign(n,{key:null,sep:[this.sourceToken]});return;case"space":case"comment":case"newline":case"anchor":case"tag":!n||n.value?e.items.push({start:[this.sourceToken]}):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const r=this.flowScalar(this.type);!n||n.value?e.items.push({start:[],key:r,sep:[]}):n.sep?this.stack.push(r):Object.assign(n,{key:r,sep:[]});return}case"flow-map-end":case"flow-seq-end":e.end.push(this.sourceToken);return}const s=this.startBlockValue(e);s?this.stack.push(s):(yield*this.pop(),yield*this.step())}else{const s=this.peek(2);if(s.type==="block-map"&&(this.type==="map-value-ind"&&s.indent===e.indent||this.type==="newline"&&!s.items[s.items.length-1].sep))yield*this.pop(),yield*this.step();else if(this.type==="map-value-ind"&&s.type!=="flow-collection"){const r=Ps(s),i=ln(r);Ta(e);const o=e.end.splice(1,e.end.length);o.push(this.sourceToken);const a={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:i,key:e,sep:o}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=a}else yield*this.lineEnd(e)}}flowScalar(e){if(this.onNewLine){let n=this.source.indexOf(`
`)+1;for(;n!==0;)this.onNewLine(this.offset+n),n=this.source.indexOf(`
`,n)+1}return{type:e,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(e){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;const n=Ps(e),s=ln(n);return s.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:s,explicitKey:!0}]}}case"map-value-ind":{this.onKeyLine=!0;const n=Ps(e),s=ln(n);return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:s,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(e,n){return this.type!=="comment"||this.indent<=n?!1:e.every(s=>s.type==="newline"||s.type==="space")}*documentEnd(e){this.type!=="doc-mode"&&(e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop()))}*lineEnd(e){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;case"space":case"comment":default:e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop())}}}function Wb(t){const e=t.prettyErrors!==!1;return{lineCounter:t.lineCounter||e&&new Yb||null,prettyErrors:e}}function Xb(t,e={}){const{lineCounter:n,prettyErrors:s}=Wb(e),r=new Hb(n?.addNewLine),i=new Zb(e);let o=null;for(const a of i.compose(r.parse(t),!0,t.length))if(!o)o=a;else if(o.options.logLevel!=="silent"){o.errors.push(new zn(a.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}return s&&n&&(o.errors.forEach(_a(t,n)),o.warnings.forEach(_a(t,n))),o}function Qb(t,e,n){let s;const r=Xb(t,n);if(!r)return null;if(r.warnings.forEach(i=>hc(r.options.logLevel,i)),r.errors.length>0){if(r.options.logLevel!=="silent")throw r.errors[0];r.errors=[]}return r.toJS(Object.assign({reviver:s},n))}const Dc=ki(t=>({trains:{},currentTrain:void 0,setTrainsFromYml:e=>{try{const n=Qb(e),s=w1(n);s.valid?t({trains:kl.parse(n),parseErrors:void 0}):(console.error("Invalid YAML data:",s.errors),zt.error("We couldn't load your trains. Please check that you uploaded the SavedTrainProperties YAML file from TrainCarts. See the browser console for more details.",{duration:1e4}),t({trains:{},parseErrors:s.errors}))}catch(n){console.error("Error parsing YAML:",n),zt.error("We couldn't read your file. Please make sure it's a valid YAML and try again. See the browser console for more details.",{duration:1e4}),t({trains:{},parseErrors:["Failed to parse YAML.",String(n)]});return}},setTrains:e=>t({trains:e}),setCurrentTrain:e=>t({currentTrain:e}),clearCurrentTrain:()=>t({currentTrain:void 0}),reset:()=>t({trains:{},currentTrain:void 0,parseErrors:void 0})}));function Jb(){const t=$.c(58),e=Ue(),n=Dc(),[s,r]=U.useState(n.currentTrain),[i,o]=U.useState(e.cart),[a,l]=U.useState(e.metadata.projectName);let c;t[0]===Symbol.for("react.memo_cache_sentinel")?(c=d.jsx(Gi,{children:"New TCA-Project"}),t[0]=c):c=t[0];let u;t[1]===Symbol.for("react.memo_cache_sentinel")?(u=d.jsx(We,{htmlFor:"projectName",children:"Project name"}),t[1]=u):u=t[1];let f,h,p,b;t[2]===Symbol.for("react.memo_cache_sentinel")?(f=d.jsx(Oi,{id:"projectName",placeholder:"My TCA Project",className:"mt-2",onChange:Y=>l(Y.target.value)}),h=d.jsx("hr",{className:"my-4"}),p=d.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"TC Animator lets you animate one cart from a single train per project. To work on a different train or cart, create a new project for each one."}),b=d.jsx(We,{htmlFor:"train",children:"Train"}),t[2]=f,t[3]=h,t[4]=p,t[5]=b):(f=t[2],h=t[3],p=t[4],b=t[5]);let g;t[6]!==n.trains?(g=Y=>{const ee=n.trains[Y];ee&&(r(ee),o(null))},t[6]=n.trains,t[7]=g):g=t[7];let w;t[8]===Symbol.for("react.memo_cache_sentinel")?(w=d.jsx(qr,{className:"w-full",id:"train",children:d.jsx(Gr,{placeholder:"Select a train"})}),t[8]=w):w=t[8];let m;t[9]===Symbol.for("react.memo_cache_sentinel")?(m=d.jsx(Hr,{children:"Trains"}),t[9]=m):m=t[9];let S;t[10]!==n.trains?(S=Object.values(n.trains).filter(nw).map(tw),t[10]=n.trains,t[11]=S):S=t[11];let v;t[12]!==S?(v=d.jsx(Yr,{children:d.jsxs(Kr,{children:[m,S]})}),t[12]=S,t[13]=v):v=t[13];let _;t[14]!==v||t[15]!==g?(_=d.jsxs(Vr,{onValueChange:g,children:[w,v]}),t[14]=v,t[15]=g,t[16]=_):_=t[16];let E;t[17]===Symbol.for("react.memo_cache_sentinel")?(E=d.jsx(We,{htmlFor:"cart",className:"mt-4",children:"Cart"}),t[17]=E):E=t[17];let A;t[18]!==i||t[19]!==s?(A=s?.carts?Object.entries(s.carts).find(Y=>{const[,ee]=Y;return ee===i})?.[0]??"":"",t[18]=i,t[19]=s,t[20]=A):A=t[20];const y=!s?.carts;let x;t[21]!==s?.carts?(x=Y=>{const ee=s?.carts?.[Y];ee&&o(ee)},t[21]=s?.carts,t[22]=x):x=t[22];let k;t[23]===Symbol.for("react.memo_cache_sentinel")?(k=d.jsx(qr,{className:"w-full",id:"cart",children:d.jsx(Gr,{placeholder:"Select a cart"})}),t[23]=k):k=t[23];let T;t[24]===Symbol.for("react.memo_cache_sentinel")?(T=d.jsx(Hr,{children:"Carts"}),t[24]=T):T=t[24];let I;t[25]!==s?.carts?(I=Object.entries(s?.carts||{}).map(ew),t[25]=s?.carts,t[26]=I):I=t[26];let N;t[27]!==I?(N=d.jsx(Yr,{children:d.jsxs(Kr,{children:[T,I]})}),t[27]=I,t[28]=N):N=t[28];let j;t[29]!==A||t[30]!==y||t[31]!==x||t[32]!==N?(j=d.jsxs(Vr,{value:A,disabled:y,onValueChange:x,children:[k,N]}),t[29]=A,t[30]=y,t[31]=x,t[32]=N,t[33]=j):j=t[33];let R;t[34]!==_||t[35]!==j?(R=d.jsxs(Vi,{children:[c,d.jsx(qi,{asChild:!0,children:d.jsxs("div",{children:[u,f,h,p,b,_,E,j]})})]}),t[34]=_,t[35]=j,t[36]=R):R=t[36];let M;t[37]!==e||t[38]!==n?(M=()=>{e.reset(),n.reset()},t[37]=e,t[38]=n,t[39]=M):M=t[39];let P;t[40]===Symbol.for("react.memo_cache_sentinel")?(P=d.jsx(fu,{}),t[40]=P):P=t[40];let L;t[41]!==M?(L=d.jsxs(at,{variant:"secondary",onClick:M,children:[P,"Back"]}),t[41]=M,t[42]=L):L=t[42];let Z;t[43]!==i||t[44]!==s||t[45]!==a||t[46]!==e||t[47]!==n?(Z=async()=>{a&&s&&i&&(e.setProjectName(a),n.setCurrentTrain(s),e.setCart(i),await e.saveProject())},t[43]=i,t[44]=s,t[45]=a,t[46]=e,t[47]=n,t[48]=Z):Z=t[48];const F=!(a&&s&&i);let J;t[49]!==Z||t[50]!==F?(J=d.jsx(at,{onClick:Z,disabled:F,children:"Create Project"}),t[49]=Z,t[50]=F,t[51]=J):J=t[51];let H;t[52]!==L||t[53]!==J?(H=d.jsxs(Ki,{className:"flex justify-between",children:[L,J]}),t[52]=L,t[53]=J,t[54]=H):H=t[54];let ie;return t[55]!==R||t[56]!==H?(ie=d.jsx(Ui,{open:!0,children:d.jsxs(Zi,{children:[R,H]})}),t[55]=R,t[56]=H,t[57]=ie):ie=t[57],ie}function ew(t){const[e]=t;return d.jsx(qs,{value:e,children:e},e)}function tw(t){return d.jsx(qs,{value:t.savedName,children:t.savedName},t.savedName)}function nw(t){return t.carts}function sw(){const t=$.c(23),e=Ue(),n=Dc(),[s,r]=U.useState(!1);let i;t[0]!==n?(i=async()=>{r(!0);const _=await Ii({description:"Select a YAML file",mimeTypes:["application/x-yaml","text/yaml"],extensions:[".yaml",".yml"],id:"load-saved-train-properties",startIn:"documents"}).catch(rw);if(_){const E=await _.text();n.setTrainsFromYml(E),n.setCurrentTrain(Object.values(n.trains)[0])}r(!1)},t[0]=n,t[1]=i):i=t[1];const o=i;let a;t[2]!==e?(a=async()=>{r(!0),await zt.promise(e.loadProjectFromFile(),{loading:"Loading project...",success:"Project loaded successfully!",error:"Failed to load project."}).unwrap(),r(!1)},t[2]=e,t[3]=a):a=t[3];const l=a;if(s){let _;return t[4]===Symbol.for("react.memo_cache_sentinel")?(_=d.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 backdrop-blur"}),t[4]=_):_=t[4],_}if(Object.entries(n.trains).length>0&&!e.metadata.createdAt){let _;return t[5]===Symbol.for("react.memo_cache_sentinel")?(_=d.jsx(Jb,{}),t[5]=_):_=t[5],_}const c=!e.metadata.createdAt;let u;t[6]===Symbol.for("react.memo_cache_sentinel")?(u=d.jsx(Gi,{children:"Welcome to TC Animator!"}),t[6]=u):u=t[6];let f;t[7]===Symbol.for("react.memo_cache_sentinel")?(f=d.jsx("h3",{className:"text-lg",children:"Please import a SavedTrainProperties YAML file or open an existing project to get started."}),t[7]=f):f=t[7];let h;t[8]===Symbol.for("react.memo_cache_sentinel")?(h=d.jsx(lu,{className:"block size-24 mx-auto"}),t[8]=h):h=t[8];let p;t[9]!==o?(p=d.jsxs(at,{variant:"secondary",className:"aspect-square w-full h-auto flex flex-col",onClick:o,children:[h,"Import SavedTrainProperties"]}),t[9]=o,t[10]=p):p=t[10];let b;t[11]===Symbol.for("react.memo_cache_sentinel")?(b=d.jsx(cu,{className:"block size-24 mx-auto"}),t[11]=b):b=t[11];let g;t[12]!==l?(g=d.jsxs(at,{variant:"secondary",className:"aspect-square w-full h-auto flex flex-col",onClick:l,children:[b,"Open TCA-Project"]}),t[12]=l,t[13]=g):g=t[13];let w;t[14]!==p||t[15]!==g?(w=d.jsxs(Vi,{children:[u,d.jsx(qi,{asChild:!0,children:d.jsxs("div",{className:"flex flex-col items-center gap-4",children:[f,d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p,g]})]})})]}),t[14]=p,t[15]=g,t[16]=w):w=t[16];let m;t[17]===Symbol.for("react.memo_cache_sentinel")?(m=d.jsx(Ki,{className:"text-sm text-muted-foreground",children:d.jsxs("a",{href:"https://foxxite.com",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1",children:["Made with  by Foxxite | Articca",d.jsx(uu,{className:"inline-block size-4"})]})}),t[17]=m):m=t[17];let S;t[18]!==w?(S=d.jsxs(Zi,{children:[w,m]}),t[18]=w,t[19]=S):S=t[19];let v;return t[20]!==S||t[21]!==c?(v=d.jsx(Ui,{open:c,children:S}),t[20]=S,t[21]=c,t[22]=v):v=t[22],v}function rw(){return null}Wc.createRoot(document.getElementById("root")).render(d.jsxs(U.StrictMode,{children:[d.jsx(By,{}),d.jsx(sw,{}),d.jsx(Py,{}),d.jsx(Xc,{position:"top-center",richColors:!0})]}));
